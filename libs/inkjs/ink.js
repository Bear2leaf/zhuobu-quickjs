class t{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.sourceFilename=t,this.pluginNames=e,this.countAllVisits=n,this.errorHandler=i,this.fileHandler=r}}class e{constructor(t,e,n){this.length=t,this.debugMetadata=e,this.text=n}}var n;!function(t){t[t.Author=0]="Author",t[t.Warning=1]="Warning",t[t.Error=2]="Error"}(n||(n={}));class i{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.identifier=t,this.isByReference=e,this.isDivertTarget=n}get typeName(){return"Argument"}}function r(t,e){return t instanceof e?h(t):null}function s(t,e){if(t instanceof e)return h(t);throw new Error(`${t} is not of type ${e}`)}function a(t){return t.hasValidName&&t.name?t:null}function o(t){return void 0===t?null:t}function l(t){return"object"==typeof t&&"function"==typeof t.Equals}function h(t,e){return t}function u(t){return null!=t}class c{constructor(){var t=this;this._alreadyHadError=!1,this._alreadyHadWarning=!1,this._debugMetadata=null,this._runtimeObject=null,this.content=[],this.parent=null,this.GetType=()=>this.typeName,this.AddContent=t=>{null===this.content&&(this.content=[]);const e=Array.isArray(t)?t:[t];for(const t of e)t.hasOwnProperty("parent")&&(t.parent=this),this.content.push(t);return Array.isArray(t)?void 0:t},this.InsertContent=(t,e)=>(null===this.content&&(this.content=[]),e.parent=this,this.content.splice(t,0,e),e),this.Find=e=>function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=r(t,e);if(null!==i&&(null===n||!0===n(i)))return i;if(null===t.content)return null;for(const i of t.content){let t=i.Find&&i.Find(e)(n);if(t)return t}return null},this.FindAll=t=>(e,n)=>{const i=Array.isArray(n)?n:[],s=r(this,t);if(null===s||e&&!0!==e(s)||i.push(s),null===this.content)return[];for(const n of this.content)n.FindAll&&n.FindAll(t)(e,i);return i},this.Warning=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.Error(e,n,!0)}}get debugMetadata(){return null===this._debugMetadata&&this.parent?this.parent.debugMetadata:this._debugMetadata}set debugMetadata(t){this._debugMetadata=t}get hasOwnDebugMetadata(){return Boolean(this.debugMetadata)}get typeName(){return"ParsedObject"}get story(){let t=this;for(;t.parent;)t=t.parent;return t}get runtimeObject(){return this._runtimeObject||(this._runtimeObject=this.GenerateRuntimeObject(),this._runtimeObject&&(this._runtimeObject.debugMetadata=this.debugMetadata)),this._runtimeObject}set runtimeObject(t){this._runtimeObject=t}get runtimePath(){if(!this.runtimeObject.path)throw new Error;return this.runtimeObject.path}get containerForCounting(){return this.runtimeObject}get ancestry(){let t=[],e=this.parent;for(;e;)t.push(e),e=e.parent;return t=t.reverse(),t}ResolveReferences(t){if(null!==this.content)for(const e of this.content)e.ResolveReferences(t)}Error(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null===e&&(e=this),!(e._alreadyHadError&&!n||e._alreadyHadWarning&&n)){if(!this.parent)throw new Error(`No parent object to send error to: ${t}`);this.parent.Error(t,e,n),n?e._alreadyHadWarning=!0:e._alreadyHadError=!0}}}class d extends c{constructor(t){super(),this.warningMessage=t,this.GenerateRuntimeObject=()=>(this.Warning(this.warningMessage),null)}get typeName(){return"AuthorWarning"}}let p=class t{constructor(){if(this._components=[],this._componentsString=null,this._isRelative=!1,"string"==typeof arguments[0]){let t=arguments[0];this.componentsString=t}else if(arguments[0]instanceof t.Component&&arguments[1]instanceof t){let t=arguments[0],e=arguments[1];this._components.push(t),this._components=this._components.concat(e._components)}else if(arguments[0]instanceof Array){let t=arguments[0],e=!!arguments[1];this._components=this._components.concat(t),this._isRelative=e}}get isRelative(){return this._isRelative}get componentCount(){return this._components.length}get head(){return this._components.length>0?this._components[0]:null}get tail(){if(this._components.length>=2){let e=this._components.slice(1,this._components.length);return new t(e)}return t.self}get length(){return this._components.length}get lastComponent(){let t=this._components.length-1;return t>=0?this._components[t]:null}get containsNamedComponent(){for(let t=0,e=this._components.length;t<e;t++)if(!this._components[t].isIndex)return!0;return!1}static get self(){let e=new t;return e._isRelative=!0,e}GetComponent(t){return this._components[t]}PathByAppendingPath(e){let n=new t,i=0;for(let t=0;t<e._components.length&&e._components[t].isParent;++t)i++;for(let t=0;t<this._components.length-i;++t)n._components.push(this._components[t]);for(let t=i;t<e._components.length;++t)n._components.push(e._components[t]);return n}get componentsString(){return null==this._componentsString&&(this._componentsString=this._components.join("."),this.isRelative&&(this._componentsString="."+this._componentsString)),this._componentsString}set componentsString(e){if(this._components.length=0,this._componentsString=e,null==this._componentsString||""==this._componentsString)return;"."==this._componentsString[0]&&(this._isRelative=!0,this._componentsString=this._componentsString.substring(1));let n=this._componentsString.split(".");for(let e of n)/^(\-|\+)?([0-9]+|Infinity)$/.test(e)?this._components.push(new t.Component(parseInt(e))):this._components.push(new t.Component(e))}toString(){return this.componentsString}Equals(t){if(null==t)return!1;if(t._components.length!=this._components.length)return!1;if(t.isRelative!=this.isRelative)return!1;for(let e=0,n=t._components.length;e<n;e++)if(!t._components[e].Equals(this._components[e]))return!1;return!0}PathByAppendingComponent(e){let n=new t;return n._components.push(...this._components),n._components.push(e),n}};var m,f,g;p.parentId="^",function(t){class e{constructor(t){this.index=-1,this.name=null,"string"==typeof t?this.name=t:this.index=t}get isIndex(){return this.index>=0}get isParent(){return this.name==t.parentId}static ToParent(){return new e(t.parentId)}toString(){return this.isIndex?this.index.toString():this.name}Equals(t){return null!=t&&t.isIndex==this.isIndex&&(this.isIndex?this.index==t.index:this.name==t.name)}}t.Component=e}(p||(p={})),function(t){function e(t,e){if(!t)throw void 0!==e&&console.warn(e),console.trace&&console.trace(),new Error("")}t.AssertType=function(t,n,i){e(t instanceof n,i)},t.Assert=e}(m||(m={}));class C extends Error{}function v(t){throw new C(`${t} is null or undefined`)}class S{constructor(){this.parent=null,this._debugMetadata=null,this._path=null}get debugMetadata(){return null===this._debugMetadata&&this.parent?this.parent.debugMetadata:this._debugMetadata}set debugMetadata(t){this._debugMetadata=t}get ownDebugMetadata(){return this._debugMetadata}DebugLineNumberOfPath(t){if(null===t)return null;let e=this.rootContentContainer;if(e){let n=e.ContentAtPath(t).obj;if(n){let t=n.debugMetadata;if(null!==t)return t.startLineNumber}}return null}get path(){if(null==this._path)if(null==this.parent)this._path=new p;else{let t=[],e=this,n=r(e.parent,k);for(;null!==n;){let i=a(e);if(null!=i&&i.hasValidName){if(null===i.name)return v("namedChild.name");t.unshift(new p.Component(i.name))}else t.unshift(new p.Component(n.content.indexOf(e)));e=n,n=r(n.parent,k)}this._path=new p(t)}return this._path}ResolvePath(t){if(null===t)return v("path");if(t.isRelative){let e=r(this,k);return null===e&&(m.Assert(null!==this.parent,"Can't resolve relative path because we don't have a parent"),e=r(this.parent,k),m.Assert(null!==e,"Expected parent to be a container"),m.Assert(t.GetComponent(0).isParent),t=t.tail),null===e?v("nearestContainer"):e.ContentAtPath(t)}{let e=this.rootContentContainer;return null===e?v("contentContainer"):e.ContentAtPath(t)}}ConvertPathToRelative(t){let e=this.path,n=Math.min(t.length,e.length),i=-1;for(let r=0;r<n;++r){let n=e.GetComponent(r),s=t.GetComponent(r);if(!n.Equals(s))break;i=r}if(-1==i)return t;let r=e.componentCount-1-i,s=[];for(let t=0;t<r;++t)s.push(p.Component.ToParent());for(let e=i+1;e<t.componentCount;++e)s.push(t.GetComponent(e));return new p(s,!0)}CompactPathString(t){let e=null,n=null;if(t.isRelative)n=t.componentsString,e=this.path.PathByAppendingPath(t).componentsString;else{n=this.ConvertPathToRelative(t).componentsString,e=t.componentsString}return n.length<e.length?n:e}get rootContentContainer(){let t=this;for(;t.parent;)t=t.parent;return r(t,k)}Copy(){throw Error("Not Implemented: Doesn't support copying")}SetChild(t,e,n){t[e]&&(t[e]=null),t[e]=n,t[e]&&(t[e].parent=this)}Equals(t){return t===this}}class y{constructor(t){t=void 0!==t?t.toString():"",this.string=t}get Length(){return this.string.length}Append(t){null!==t&&(this.string+=t)}AppendLine(t){void 0!==t&&this.Append(t),this.string+="\n"}AppendFormat(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];this.string+=t.replace(/{(\d+)}/g,((t,e)=>void 0!==n[e]?n[e]:t))}toString(){return this.string}Clear(){this.string=""}}class b{constructor(){if(this.originName=null,this.itemName=null,void 0!==arguments[1]){let t=arguments[0],e=arguments[1];this.originName=t,this.itemName=e}else if(arguments[0]){let t=arguments[0].toString().split(".");this.originName=t[0],this.itemName=t[1]}}static get Null(){return new b(null,null)}get isNull(){return null==this.originName&&null==this.itemName}get fullName(){return(null!==this.originName?this.originName:"?")+"."+this.itemName}toString(){return this.fullName}Equals(t){if(t instanceof b){let e=t;return e.itemName==this.itemName&&e.originName==this.originName}return!1}copy(){return new b(this.originName,this.itemName)}serialized(){return JSON.stringify({originName:this.originName,itemName:this.itemName})}static fromSerializedKey(t){let e=JSON.parse(t);if(!b.isLikeInkListItem(e))return b.Null;let n=e;return new b(n.originName,n.itemName)}static isLikeInkListItem(t){return"object"==typeof t&&(!(!t.hasOwnProperty("originName")||!t.hasOwnProperty("itemName"))&&(("string"==typeof t.originName||null===typeof t.originName)&&("string"==typeof t.itemName||null===typeof t.itemName)))}}class w extends Map{constructor(){if(super(arguments[0]instanceof w?arguments[0]:[]),this.origins=null,this._originNames=[],arguments[0]instanceof w){let t=arguments[0],e=t.originNames;null!==e&&(this._originNames=e.slice()),null!==t.origins&&(this.origins=t.origins.slice())}else if("string"==typeof arguments[0]){let t=arguments[0],e=arguments[1];if(this.SetInitialOriginName(t),null===e.listDefinitions)return v("originStory.listDefinitions");let n=e.listDefinitions.TryListGetDefinition(t,null);if(!n.exists)throw new Error("InkList origin could not be found in story when constructing new list: "+t);if(null===n.result)return v("def.result");this.origins=[n.result]}else if("object"==typeof arguments[0]&&arguments[0].hasOwnProperty("Key")&&arguments[0].hasOwnProperty("Value")){let t=arguments[0];this.Add(t.Key,t.Value)}}static FromString(t,e){var n;if(null==t||""==t)return new w;let i=null===(n=e.listDefinitions)||void 0===n?void 0:n.FindSingleItemListWithName(t);if(i)return null===i.value?v("listValue.value"):new w(i.value);throw new Error("Could not find the InkListItem from the string '"+t+"' to create an InkList because it doesn't exist in the original list definition in ink.")}AddItem(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t instanceof b){let e=t;if(null==e.originName)return void this.AddItem(e.itemName);if(null===this.origins)return v("this.origins");for(let t of this.origins)if(t.name==e.originName){let n=t.TryGetValueForItem(e,0);if(n.exists)return void this.Add(e,n.result);throw new Error("Could not add the item "+e+" to this list because it doesn't exist in the original list definition in ink.")}throw new Error("Failed to add item to list because the item was from a new list definition that wasn't previously known to this list. Only items from previously known lists can be used, so that the int value can be found.")}if(null!==t){let n=t,i=null;if(null===this.origins)return v("this.origins");for(let t of this.origins){if(null===n)return v("itemName");if(t.ContainsItemWithName(n)){if(null!=i)throw new Error("Could not add the item "+n+" to this list because it could come from either "+t.name+" or "+i.name);i=t}}if(null==i){if(null==e)throw new Error("Could not add the item "+n+" to this list because it isn't known to any list definitions previously associated with this list.");{let t=w.FromString(n,e).orderedItems[0];this.Add(t.Key,t.Value)}}else{let t=new b(i.name,n),e=i.ValueForItem(t);this.Add(t,e)}}}ContainsItemNamed(t){for(let[e]of this){if(b.fromSerializedKey(e).itemName==t)return!0}return!1}ContainsKey(t){return this.has(t.serialized())}Add(t,e){let n=t.serialized();if(this.has(n))throw new Error(`The Map already contains an entry for ${t}`);this.set(n,e)}Remove(t){return this.delete(t.serialized())}get Count(){return this.size}get originOfMaxItem(){if(null==this.origins)return null;let t=this.maxItem.Key.originName,e=null;return this.origins.every((n=>n.name!=t||(e=n,!1))),e}get originNames(){if(this.Count>0){null==this._originNames&&this.Count>0?this._originNames=[]:(this._originNames||(this._originNames=[]),this._originNames.length=0);for(let[t]of this){let e=b.fromSerializedKey(t);if(null===e.originName)return v("item.originName");this._originNames.push(e.originName)}}return this._originNames}SetInitialOriginName(t){this._originNames=[t]}SetInitialOriginNames(t){this._originNames=null==t?null:t.slice()}get maxItem(){let t={Key:b.Null,Value:0};for(let[e,n]of this){let i=b.fromSerializedKey(e);(t.Key.isNull||n>t.Value)&&(t={Key:i,Value:n})}return t}get minItem(){let t={Key:b.Null,Value:0};for(let[e,n]of this){let i=b.fromSerializedKey(e);(t.Key.isNull||n<t.Value)&&(t={Key:i,Value:n})}return t}get inverse(){let t=new w;if(null!=this.origins)for(let e of this.origins)for(let[n,i]of e.items){let e=b.fromSerializedKey(n);this.ContainsKey(e)||t.Add(e,i)}return t}get all(){let t=new w;if(null!=this.origins)for(let e of this.origins)for(let[n,i]of e.items){let e=b.fromSerializedKey(n);t.set(e.serialized(),i)}return t}Union(t){let e=new w(this);for(let[n,i]of t)e.set(n,i);return e}Intersect(t){let e=new w;for(let[n,i]of this)t.has(n)&&e.set(n,i);return e}HasIntersection(t){for(let[e]of this)if(t.has(e))return!0;return!1}Without(t){let e=new w(this);for(let[n]of t)e.delete(n);return e}Contains(t){if("string"==typeof t)return this.ContainsItemNamed(t);const e=t;if(0==e.size||0==this.size)return!1;for(let[t]of e)if(!this.has(t))return!1;return!0}GreaterThan(t){return 0!=this.Count&&(0==t.Count||this.minItem.Value>t.maxItem.Value)}GreaterThanOrEquals(t){return 0!=this.Count&&(0==t.Count||this.minItem.Value>=t.minItem.Value&&this.maxItem.Value>=t.maxItem.Value)}LessThan(t){return 0!=t.Count&&(0==this.Count||this.maxItem.Value<t.minItem.Value)}LessThanOrEquals(t){return 0!=t.Count&&(0==this.Count||this.maxItem.Value<=t.maxItem.Value&&this.minItem.Value<=t.minItem.Value)}MaxAsList(){return this.Count>0?new w(this.maxItem):new w}MinAsList(){return this.Count>0?new w(this.minItem):new w}ListWithSubRange(t,e){if(0==this.Count)return new w;let n=this.orderedItems,i=0,r=Number.MAX_SAFE_INTEGER;Number.isInteger(t)?i=t:t instanceof w&&t.Count>0&&(i=t.minItem.Value),Number.isInteger(e)?r=e:e instanceof w&&e.Count>0&&(r=e.maxItem.Value);let s=new w;s.SetInitialOriginNames(this.originNames);for(let t of n)t.Value>=i&&t.Value<=r&&s.Add(t.Key,t.Value);return s}Equals(t){if(t instanceof w==!1)return!1;if(t.Count!=this.Count)return!1;for(let[e]of this)if(!t.has(e))return!1;return!0}get orderedItems(){let t=new Array;for(let[e,n]of this){let i=b.fromSerializedKey(e);t.push({Key:i,Value:n})}return t.sort(((t,e)=>null===t.Key.originName?v("x.Key.originName"):null===e.Key.originName?v("y.Key.originName"):t.Value==e.Value?t.Key.originName.localeCompare(e.Key.originName):t.Value<e.Value?-1:t.Value>e.Value?1:0)),t}get singleItem(){for(let t of this.orderedItems)return t.Key;return null}toString(){let t=this.orderedItems,e=new y;for(let n=0;n<t.length;n++){n>0&&e.Append(", ");let i=t[n].Key;if(null===i.itemName)return v("item.itemName");e.Append(i.itemName)}return e.toString()}valueOf(){return NaN}}class E extends Error{constructor(t){super(t),this.useEndLineNumber=!1,this.message=t,this.name="StoryException"}}function _(t,e,n){if(null===t)return{result:n,exists:!1};let i=t.get(e);return void 0===i?{result:n,exists:!1}:{result:i,exists:!0}}class T extends S{static Create(t,e){if(e){if(e===f.Int&&Number.isInteger(Number(t)))return new P(Number(t));if(e===f.Float&&!isNaN(t))return new N(Number(t))}return"boolean"==typeof t?new A(Boolean(t)):"string"==typeof t?new I(String(t)):Number.isInteger(Number(t))?new P(Number(t)):isNaN(t)?t instanceof p?new O(s(t,p)):t instanceof w?new W(s(t,w)):null:new N(Number(t))}Copy(){return s(T.Create(this.valueObject),S)}BadCastException(t){return new E("Can't cast "+this.valueObject+" from "+this.valueType+" to "+t)}}class x extends T{constructor(t){super(),this.value=t}get valueObject(){return this.value}toString(){return null===this.value?v("Value.value"):this.value.toString()}}class A extends x{constructor(t){super(t||!1)}get isTruthy(){return Boolean(this.value)}get valueType(){return f.Bool}Cast(t){if(null===this.value)return v("Value.value");if(t==this.valueType)return this;if(t==f.Int)return new P(this.value?1:0);if(t==f.Float)return new N(this.value?1:0);if(t==f.String)return new I(this.value?"true":"false");throw this.BadCastException(t)}toString(){return this.value?"true":"false"}}class P extends x{constructor(t){super(t||0)}get isTruthy(){return 0!=this.value}get valueType(){return f.Int}Cast(t){if(null===this.value)return v("Value.value");if(t==this.valueType)return this;if(t==f.Bool)return new A(0!==this.value);if(t==f.Float)return new N(this.value);if(t==f.String)return new I(""+this.value);throw this.BadCastException(t)}}class N extends x{constructor(t){super(t||0)}get isTruthy(){return 0!=this.value}get valueType(){return f.Float}Cast(t){if(null===this.value)return v("Value.value");if(t==this.valueType)return this;if(t==f.Bool)return new A(0!==this.value);if(t==f.Int)return new P(this.value);if(t==f.String)return new I(""+this.value);throw this.BadCastException(t)}}class I extends x{constructor(t){if(super(t||""),this._isNewline="\n"==this.value,this._isInlineWhitespace=!0,null===this.value)return v("Value.value");this.value.length>0&&this.value.split("").every((t=>" "==t||"\t"==t||(this._isInlineWhitespace=!1,!1)))}get valueType(){return f.String}get isTruthy(){return null===this.value?v("Value.value"):this.value.length>0}get isNewline(){return this._isNewline}get isInlineWhitespace(){return this._isInlineWhitespace}get isNonWhitespace(){return!this.isNewline&&!this.isInlineWhitespace}Cast(t){if(t==this.valueType)return this;if(t==f.Int){let e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=parseInt(t);return Number.isNaN(n)?{result:e,exists:!1}:{result:n,exists:!0}}(this.value);if(e.exists)return new P(e.result);throw this.BadCastException(t)}if(t==f.Float){let e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=parseFloat(t);return Number.isNaN(n)?{result:e,exists:!1}:{result:n,exists:!0}}(this.value);if(e.exists)return new N(e.result);throw this.BadCastException(t)}throw this.BadCastException(t)}}class O extends x{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}get valueType(){return f.DivertTarget}get targetPath(){return null===this.value?v("Value.value"):this.value}set targetPath(t){this.value=t}get isTruthy(){throw new Error("Shouldn't be checking the truthiness of a divert target")}Cast(t){if(t==this.valueType)return this;throw this.BadCastException(t)}toString(){return"DivertTargetValue("+this.targetPath+")"}}class F extends x{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;super(t),this._contextIndex=e}get contextIndex(){return this._contextIndex}set contextIndex(t){this._contextIndex=t}get variableName(){return null===this.value?v("Value.value"):this.value}set variableName(t){this.value=t}get valueType(){return f.VariablePointer}get isTruthy(){throw new Error("Shouldn't be checking the truthiness of a variable pointer")}Cast(t){if(t==this.valueType)return this;throw this.BadCastException(t)}toString(){return"VariablePointerValue("+this.variableName+")"}Copy(){return new F(this.variableName,this.contextIndex)}}class W extends x{get isTruthy(){return null===this.value?v("this.value"):this.value.Count>0}get valueType(){return f.List}Cast(t){if(null===this.value)return v("Value.value");if(t==f.Int){let t=this.value.maxItem;return t.Key.isNull?new P(0):new P(t.Value)}if(t==f.Float){let t=this.value.maxItem;return t.Key.isNull?new N(0):new N(t.Value)}if(t==f.String){let t=this.value.maxItem;return t.Key.isNull?new I(""):new I(t.Key.toString())}if(t==this.valueType)return this;throw this.BadCastException(t)}constructor(t,e){super(null),t||e?t instanceof w?this.value=new w(t):t instanceof b&&"number"==typeof e&&(this.value=new w({Key:t,Value:e})):this.value=new w}static RetainListOriginsForAssignment(t,e){let n=r(t,W),i=r(e,W);return i&&null===i.value?v("newList.value"):n&&null===n.value?v("oldList.value"):void(n&&i&&0==i.value.Count&&i.value.SetInitialOriginNames(n.value.originNames))}}!function(t){t[t.Bool=-1]="Bool",t[t.Int=0]="Int",t[t.Float=1]="Float",t[t.List=2]="List",t[t.String=3]="String",t[t.DivertTarget=4]="DivertTarget",t[t.VariablePointer=5]="VariablePointer"}(f||(f={}));class R{constructor(){this.obj=null,this.approximate=!1}get correctObj(){return this.approximate?null:this.obj}get container(){return this.obj instanceof k?this.obj:null}copy(){let t=new R;return t.obj=this.obj,t.approximate=this.approximate,t}}class k extends S{constructor(){super(...arguments),this.name=null,this._content=[],this.namedContent=new Map,this.visitsShouldBeCounted=!1,this.turnIndexShouldBeCounted=!1,this.countingAtStartOnly=!1,this._pathToFirstLeafContent=null}get hasValidName(){return null!=this.name&&this.name.length>0}get content(){return this._content}set content(t){this.AddContent(t)}get namedOnlyContent(){let t=new Map;for(let[e,n]of this.namedContent){let i=s(n,S);t.set(e,i)}for(let e of this.content){let n=a(e);null!=n&&n.hasValidName&&t.delete(n.name)}return 0==t.size&&(t=null),t}set namedOnlyContent(t){let e=this.namedOnlyContent;if(null!=e)for(let[t]of e)this.namedContent.delete(t);if(null!=t)for(let[,e]of t){let t=a(e);null!=t&&this.AddToNamedContentOnly(t)}}get countFlags(){let t=0;return this.visitsShouldBeCounted&&(t|=k.CountFlags.Visits),this.turnIndexShouldBeCounted&&(t|=k.CountFlags.Turns),this.countingAtStartOnly&&(t|=k.CountFlags.CountStartOnly),t==k.CountFlags.CountStartOnly&&(t=0),t}set countFlags(t){let e=t;(e&k.CountFlags.Visits)>0&&(this.visitsShouldBeCounted=!0),(e&k.CountFlags.Turns)>0&&(this.turnIndexShouldBeCounted=!0),(e&k.CountFlags.CountStartOnly)>0&&(this.countingAtStartOnly=!0)}get pathToFirstLeafContent(){return null==this._pathToFirstLeafContent&&(this._pathToFirstLeafContent=this.path.PathByAppendingPath(this.internalPathToFirstLeafContent)),this._pathToFirstLeafContent}get internalPathToFirstLeafContent(){let t=[],e=this;for(;e instanceof k;)e.content.length>0&&(t.push(new p.Component(0)),e=e.content[0]);return new p(t)}AddContent(t){if(t instanceof Array){let e=t;for(let t of e)this.AddContent(t)}else{let e=t;if(this._content.push(e),e.parent)throw new Error("content is already in "+e.parent);e.parent=this,this.TryAddNamedContent(e)}}TryAddNamedContent(t){let e=a(t);null!=e&&e.hasValidName&&this.AddToNamedContentOnly(e)}AddToNamedContentOnly(t){if(m.AssertType(t,S,"Can only add Runtime.Objects to a Runtime.Container"),s(t,S).parent=this,null===t.name)return v("namedContentObj.name");this.namedContent.set(t.name,t)}ContentAtPath(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;-1==n&&(n=t.length);let i=new R;i.approximate=!1;let s=this,a=this;for(let o=e;o<n;++o){let e=t.GetComponent(o);if(null==s){i.approximate=!0;break}let l=s.ContentWithPathComponent(e);if(null==l){i.approximate=!0;break}const h=r(l,k);if(o<n-1&&null==h){i.approximate=!0;break}a=l,s=h}return i.obj=a,i}InsertContent(t,e){if(this.content.splice(e,0,t),t.parent)throw new Error("content is already in "+t.parent);t.parent=this,this.TryAddNamedContent(t)}AddContentsOfContainer(t){this.content.push(...t.content);for(let e of t.content)e.parent=this,this.TryAddNamedContent(e)}ContentWithPathComponent(t){if(t.isIndex)return t.index>=0&&t.index<this.content.length?this.content[t.index]:null;if(t.isParent)return this.parent;{if(null===t.name)return v("component.name");let e=_(this.namedContent,t.name,null);return e.exists?s(e.result,S):null}}BuildStringOfHierarchy(){let t;if(0==arguments.length)return t=new y,this.BuildStringOfHierarchy(t,0,null),t.toString();t=arguments[0];let e=arguments[1],n=arguments[2];function i(){for(let n=0;n<4*e;++n)t.Append(" ")}i(),t.Append("["),this.hasValidName&&t.AppendFormat(" ({0})",this.name),this==n&&t.Append("  <---"),t.AppendLine(),e++;for(let r=0;r<this.content.length;++r){let s=this.content[r];if(s instanceof k){s.BuildStringOfHierarchy(t,e,n)}else i(),s instanceof I?(t.Append('"'),t.Append(s.toString().replace("\n","\\n")),t.Append('"')):t.Append(s.toString());r!=this.content.length-1&&t.Append(","),s instanceof k||s!=n||t.Append("  <---"),t.AppendLine()}let r=new Map;for(let[t,e]of this.namedContent)this.content.indexOf(s(e,S))>=0||r.set(t,e);if(r.size>0){i(),t.AppendLine("-- named: --");for(let[,i]of r){m.AssertType(i,k,"Can only print out named Containers"),i.BuildStringOfHierarchy(t,e,n),t.AppendLine()}}e--,i(),t.Append("]")}}!function(t){var e;(e=t.CountFlags||(t.CountFlags={}))[e.Start=0]="Start",e[e.Visits=1]="Visits",e[e.Turns=2]="Turns",e[e.CountStartOnly=4]="CountStartOnly"}(k||(k={}));class D extends S{get commandType(){return this._commandType}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D.CommandType.NotSet;super(),this._commandType=t}Copy(){return new D(this.commandType)}static EvalStart(){return new D(D.CommandType.EvalStart)}static EvalOutput(){return new D(D.CommandType.EvalOutput)}static EvalEnd(){return new D(D.CommandType.EvalEnd)}static Duplicate(){return new D(D.CommandType.Duplicate)}static PopEvaluatedValue(){return new D(D.CommandType.PopEvaluatedValue)}static PopFunction(){return new D(D.CommandType.PopFunction)}static PopTunnel(){return new D(D.CommandType.PopTunnel)}static BeginString(){return new D(D.CommandType.BeginString)}static EndString(){return new D(D.CommandType.EndString)}static NoOp(){return new D(D.CommandType.NoOp)}static ChoiceCount(){return new D(D.CommandType.ChoiceCount)}static Turns(){return new D(D.CommandType.Turns)}static TurnsSince(){return new D(D.CommandType.TurnsSince)}static ReadCount(){return new D(D.CommandType.ReadCount)}static Random(){return new D(D.CommandType.Random)}static SeedRandom(){return new D(D.CommandType.SeedRandom)}static VisitIndex(){return new D(D.CommandType.VisitIndex)}static SequenceShuffleIndex(){return new D(D.CommandType.SequenceShuffleIndex)}static StartThread(){return new D(D.CommandType.StartThread)}static Done(){return new D(D.CommandType.Done)}static End(){return new D(D.CommandType.End)}static ListFromInt(){return new D(D.CommandType.ListFromInt)}static ListRange(){return new D(D.CommandType.ListRange)}static ListRandom(){return new D(D.CommandType.ListRandom)}static BeginTag(){return new D(D.CommandType.BeginTag)}static EndTag(){return new D(D.CommandType.EndTag)}toString(){return"ControlCommand "+this.commandType.toString()}}!function(t){var e;(e=t.CommandType||(t.CommandType={}))[e.NotSet=-1]="NotSet",e[e.EvalStart=0]="EvalStart",e[e.EvalOutput=1]="EvalOutput",e[e.EvalEnd=2]="EvalEnd",e[e.Duplicate=3]="Duplicate",e[e.PopEvaluatedValue=4]="PopEvaluatedValue",e[e.PopFunction=5]="PopFunction",e[e.PopTunnel=6]="PopTunnel",e[e.BeginString=7]="BeginString",e[e.EndString=8]="EndString",e[e.NoOp=9]="NoOp",e[e.ChoiceCount=10]="ChoiceCount",e[e.Turns=11]="Turns",e[e.TurnsSince=12]="TurnsSince",e[e.ReadCount=13]="ReadCount",e[e.Random=14]="Random",e[e.SeedRandom=15]="SeedRandom",e[e.VisitIndex=16]="VisitIndex",e[e.SequenceShuffleIndex=17]="SequenceShuffleIndex",e[e.StartThread=18]="StartThread",e[e.Done=19]="Done",e[e.End=20]="End",e[e.ListFromInt=21]="ListFromInt",e[e.ListRange=22]="ListRange",e[e.ListRandom=23]="ListRandom",e[e.BeginTag=24]="BeginTag",e[e.EndTag=25]="EndTag",e[e.TOTAL_VALUES=26]="TOTAL_VALUES"}(D||(D={}));class L extends c{constructor(){super(...arguments),this._prototypeRuntimeConstantExpression=null,this.outputWhenComplete=!1,this.GenerateRuntimeObject=()=>{const t=new k;return t.AddContent(D.EvalStart()),this.GenerateIntoContainer(t),this.outputWhenComplete&&t.AddContent(D.EvalOutput()),t.AddContent(D.EvalEnd()),t},this.GenerateConstantIntoContainer=t=>{null===this._prototypeRuntimeConstantExpression&&(this._prototypeRuntimeConstantExpression=new k,this.GenerateIntoContainer(this._prototypeRuntimeConstantExpression));for(const e of this._prototypeRuntimeConstantExpression.content){const n=e.Copy();n&&t.AddContent(n)}},this.toString=()=>"No string value in JavaScript."}get typeName(){return"Expression"}Equals(t){return!1}}class V extends S{toString(){return"Void"}}class j extends S{static CallWithName(t){return new j(t)}static CallExistsWithName(t){return this.GenerateNativeFunctionsIfNecessary(),this._nativeFunctions.get(t)}get name(){return null===this._name?v("NativeFunctionCall._name"):this._name}set name(t){this._name=t,this._isPrototype||(null===j._nativeFunctions?v("NativeFunctionCall._nativeFunctions"):this._prototype=j._nativeFunctions.get(this._name)||null)}get numberOfParameters(){return this._prototype?this._prototype.numberOfParameters:this._numberOfParameters}set numberOfParameters(t){this._numberOfParameters=t}Call(t){if(this._prototype)return this._prototype.Call(t);if(this.numberOfParameters!=t.length)throw new Error("Unexpected number of parameters");let e=!1;for(let n of t){if(n instanceof V)throw new E("Attempting to perform "+this.name+' on a void value. Did you forget to "return" a value from a function you called here?');n instanceof W&&(e=!0)}if(2==t.length&&e)return this.CallBinaryListOperation(t);let n=this.CoerceValuesToSingleType(t),i=n[0].valueType;return i==f.Int||i==f.Float||i==f.String||i==f.DivertTarget||i==f.List?this.CallType(n):null}CallType(t){let e=s(t[0],x),n=e.valueType,i=e,r=t.length;if(2==r||1==r){if(null===this._operationFuncs)return v("NativeFunctionCall._operationFuncs");let a=this._operationFuncs.get(n);if(!a){const t=f[n];throw new E("Cannot perform operation "+this.name+" on "+t)}if(2==r){let e=s(t[1],x),n=a;if(null===i.value||null===e.value)return v("NativeFunctionCall.Call BinaryOp values");let r=n(i.value,e.value);return x.Create(r)}{let t=a;if(null===i.value)return v("NativeFunctionCall.Call UnaryOp value");let n=t(i.value);return this.name===j.Int?x.Create(n,f.Int):this.name===j.Float?x.Create(n,f.Float):x.Create(n,e.valueType)}}throw new Error("Unexpected number of parameters to NativeFunctionCall: "+t.length)}CallBinaryListOperation(t){if(("+"==this.name||"-"==this.name)&&t[0]instanceof W&&t[1]instanceof P)return this.CallListIncrementOperation(t);let e=s(t[0],x),n=s(t[1],x);if(!("&&"!=this.name&&"||"!=this.name||e.valueType==f.List&&n.valueType==f.List)){if(null===this._operationFuncs)return v("NativeFunctionCall._operationFuncs");let t=this._operationFuncs.get(f.Int);if(null===t)return v("NativeFunctionCall.CallBinaryListOperation op");let i=function(t){if("boolean"==typeof t)return t;throw new Error(`${t} is not a boolean`)}(t(e.isTruthy?1:0,n.isTruthy?1:0));return new A(i)}if(e.valueType==f.List&&n.valueType==f.List)return this.CallType([e,n]);throw new E("Can not call use "+this.name+" operation on "+f[e.valueType]+" and "+f[n.valueType])}CallListIncrementOperation(t){let e=s(t[0],W),n=s(t[1],P),i=new w;if(null===e.value)return v("NativeFunctionCall.CallListIncrementOperation listVal.value");for(let[t,r]of e.value){let s=b.fromSerializedKey(t);if(null===this._operationFuncs)return v("NativeFunctionCall._operationFuncs");let a=this._operationFuncs.get(f.Int);if(null===n.value)return v("NativeFunctionCall.CallListIncrementOperation intVal.value");let o=a(r,n.value),l=null;if(null===e.value.origins)return v("NativeFunctionCall.CallListIncrementOperation listVal.value.origins");for(let t of e.value.origins)if(t.name==s.originName){l=t;break}if(null!=l){let t=l.TryGetItemWithValue(o,b.Null);t.exists&&i.Add(t.result,o)}}return new W(i)}CoerceValuesToSingleType(t){let e=f.Int,n=null;for(let i of t){let t=s(i,x);t.valueType>e&&(e=t.valueType),t.valueType==f.List&&(n=r(t,W))}let i=[];if(f[e]==f[f.List])for(let e of t){let t=s(e,x);if(t.valueType==f.List)i.push(t);else{if(t.valueType!=f.Int){const e=f[t.valueType];throw new E("Cannot mix Lists and "+e+" values in this operation")}{let e=parseInt(t.valueObject);if(n=s(n,W),null===n.value)return v("NativeFunctionCall.CoerceValuesToSingleType specialCaseList.value");let r=n.value.originOfMaxItem;if(null===r)return v("NativeFunctionCall.CoerceValuesToSingleType list");let a=r.TryGetItemWithValue(e,b.Null);if(!a.exists)throw new E("Could not find List item with the value "+e+" in "+r.name);{let t=new W(a.result,e);i.push(t)}}}}else for(let n of t){let t=s(n,x).Cast(e);i.push(t)}return i}constructor(){if(super(),this._name=null,this._numberOfParameters=0,this._prototype=null,this._isPrototype=!1,this._operationFuncs=null,0===arguments.length)j.GenerateNativeFunctionsIfNecessary();else if(1===arguments.length){let t=arguments[0];j.GenerateNativeFunctionsIfNecessary(),this.name=t}else if(2===arguments.length){let t=arguments[0],e=arguments[1];this._isPrototype=!0,this.name=t,this.numberOfParameters=e}}static Identity(t){return t}static GenerateNativeFunctionsIfNecessary(){if(null==this._nativeFunctions){this._nativeFunctions=new Map,this.AddIntBinaryOp(this.Add,((t,e)=>t+e)),this.AddIntBinaryOp(this.Subtract,((t,e)=>t-e)),this.AddIntBinaryOp(this.Multiply,((t,e)=>t*e)),this.AddIntBinaryOp(this.Divide,((t,e)=>Math.floor(t/e))),this.AddIntBinaryOp(this.Mod,((t,e)=>t%e)),this.AddIntUnaryOp(this.Negate,(t=>-t)),this.AddIntBinaryOp(this.Equal,((t,e)=>t==e)),this.AddIntBinaryOp(this.Greater,((t,e)=>t>e)),this.AddIntBinaryOp(this.Less,((t,e)=>t<e)),this.AddIntBinaryOp(this.GreaterThanOrEquals,((t,e)=>t>=e)),this.AddIntBinaryOp(this.LessThanOrEquals,((t,e)=>t<=e)),this.AddIntBinaryOp(this.NotEquals,((t,e)=>t!=e)),this.AddIntUnaryOp(this.Not,(t=>0==t)),this.AddIntBinaryOp(this.And,((t,e)=>0!=t&&0!=e)),this.AddIntBinaryOp(this.Or,((t,e)=>0!=t||0!=e)),this.AddIntBinaryOp(this.Max,((t,e)=>Math.max(t,e))),this.AddIntBinaryOp(this.Min,((t,e)=>Math.min(t,e))),this.AddIntBinaryOp(this.Pow,((t,e)=>Math.pow(t,e))),this.AddIntUnaryOp(this.Floor,j.Identity),this.AddIntUnaryOp(this.Ceiling,j.Identity),this.AddIntUnaryOp(this.Int,j.Identity),this.AddIntUnaryOp(this.Float,(t=>t)),this.AddFloatBinaryOp(this.Add,((t,e)=>t+e)),this.AddFloatBinaryOp(this.Subtract,((t,e)=>t-e)),this.AddFloatBinaryOp(this.Multiply,((t,e)=>t*e)),this.AddFloatBinaryOp(this.Divide,((t,e)=>t/e)),this.AddFloatBinaryOp(this.Mod,((t,e)=>t%e)),this.AddFloatUnaryOp(this.Negate,(t=>-t)),this.AddFloatBinaryOp(this.Equal,((t,e)=>t==e)),this.AddFloatBinaryOp(this.Greater,((t,e)=>t>e)),this.AddFloatBinaryOp(this.Less,((t,e)=>t<e)),this.AddFloatBinaryOp(this.GreaterThanOrEquals,((t,e)=>t>=e)),this.AddFloatBinaryOp(this.LessThanOrEquals,((t,e)=>t<=e)),this.AddFloatBinaryOp(this.NotEquals,((t,e)=>t!=e)),this.AddFloatUnaryOp(this.Not,(t=>0==t)),this.AddFloatBinaryOp(this.And,((t,e)=>0!=t&&0!=e)),this.AddFloatBinaryOp(this.Or,((t,e)=>0!=t||0!=e)),this.AddFloatBinaryOp(this.Max,((t,e)=>Math.max(t,e))),this.AddFloatBinaryOp(this.Min,((t,e)=>Math.min(t,e))),this.AddFloatBinaryOp(this.Pow,((t,e)=>Math.pow(t,e))),this.AddFloatUnaryOp(this.Floor,(t=>Math.floor(t))),this.AddFloatUnaryOp(this.Ceiling,(t=>Math.ceil(t))),this.AddFloatUnaryOp(this.Int,(t=>Math.floor(t))),this.AddFloatUnaryOp(this.Float,j.Identity),this.AddStringBinaryOp(this.Add,((t,e)=>t+e)),this.AddStringBinaryOp(this.Equal,((t,e)=>t===e)),this.AddStringBinaryOp(this.NotEquals,((t,e)=>!(t===e))),this.AddStringBinaryOp(this.Has,((t,e)=>t.includes(e))),this.AddStringBinaryOp(this.Hasnt,((t,e)=>!t.includes(e))),this.AddListBinaryOp(this.Add,((t,e)=>t.Union(e))),this.AddListBinaryOp(this.Subtract,((t,e)=>t.Without(e))),this.AddListBinaryOp(this.Has,((t,e)=>t.Contains(e))),this.AddListBinaryOp(this.Hasnt,((t,e)=>!t.Contains(e))),this.AddListBinaryOp(this.Intersect,((t,e)=>t.Intersect(e))),this.AddListBinaryOp(this.Equal,((t,e)=>t.Equals(e))),this.AddListBinaryOp(this.Greater,((t,e)=>t.GreaterThan(e))),this.AddListBinaryOp(this.Less,((t,e)=>t.LessThan(e))),this.AddListBinaryOp(this.GreaterThanOrEquals,((t,e)=>t.GreaterThanOrEquals(e))),this.AddListBinaryOp(this.LessThanOrEquals,((t,e)=>t.LessThanOrEquals(e))),this.AddListBinaryOp(this.NotEquals,((t,e)=>!t.Equals(e))),this.AddListBinaryOp(this.And,((t,e)=>t.Count>0&&e.Count>0)),this.AddListBinaryOp(this.Or,((t,e)=>t.Count>0||e.Count>0)),this.AddListUnaryOp(this.Not,(t=>0==t.Count?1:0)),this.AddListUnaryOp(this.Invert,(t=>t.inverse)),this.AddListUnaryOp(this.All,(t=>t.all)),this.AddListUnaryOp(this.ListMin,(t=>t.MinAsList())),this.AddListUnaryOp(this.ListMax,(t=>t.MaxAsList())),this.AddListUnaryOp(this.Count,(t=>t.Count)),this.AddListUnaryOp(this.ValueOfList,(t=>t.maxItem.Value));let t=(t,e)=>t.Equals(e),e=(t,e)=>!t.Equals(e);this.AddOpToNativeFunc(this.Equal,2,f.DivertTarget,t),this.AddOpToNativeFunc(this.NotEquals,2,f.DivertTarget,e)}}AddOpFuncForType(t,e){null==this._operationFuncs&&(this._operationFuncs=new Map),this._operationFuncs.set(t,e)}static AddOpToNativeFunc(t,e,n,i){if(null===this._nativeFunctions)return v("NativeFunctionCall._nativeFunctions");let r=this._nativeFunctions.get(t);r||(r=new j(t,e),this._nativeFunctions.set(t,r)),r.AddOpFuncForType(n,i)}static AddIntBinaryOp(t,e){this.AddOpToNativeFunc(t,2,f.Int,e)}static AddIntUnaryOp(t,e){this.AddOpToNativeFunc(t,1,f.Int,e)}static AddFloatBinaryOp(t,e){this.AddOpToNativeFunc(t,2,f.Float,e)}static AddFloatUnaryOp(t,e){this.AddOpToNativeFunc(t,1,f.Float,e)}static AddStringBinaryOp(t,e){this.AddOpToNativeFunc(t,2,f.String,e)}static AddListBinaryOp(t,e){this.AddOpToNativeFunc(t,2,f.List,e)}static AddListUnaryOp(t,e){this.AddOpToNativeFunc(t,1,f.List,e)}toString(){return'Native "'+this.name+'"'}}j.Add="+",j.Subtract="-",j.Divide="/",j.Multiply="*",j.Mod="%",j.Negate="_",j.Equal="==",j.Greater=">",j.Less="<",j.GreaterThanOrEquals=">=",j.LessThanOrEquals="<=",j.NotEquals="!=",j.Not="!",j.And="&&",j.Or="||",j.Min="MIN",j.Max="MAX",j.Pow="POW",j.Floor="FLOOR",j.Ceiling="CEILING",j.Int="INT",j.Float="FLOAT",j.Has="?",j.Hasnt="!?",j.Intersect="^",j.ListMin="LIST_MIN",j.ListMax="LIST_MAX",j.All="LIST_ALL",j.Count="LIST_COUNT",j.ValueOfList="LIST_VALUE",j.Invert="LIST_INVERT",j._nativeFunctions=null;class B extends L{constructor(t,e){if(super(),this.isInt=()=>"int"==this.subtype,this.isFloat=()=>"float"==this.subtype,this.isBool=()=>"bool"==this.subtype,this.GenerateIntoContainer=t=>{this.isInt()?t.AddContent(new P(this.value)):this.isFloat()?t.AddContent(new N(this.value)):this.isBool()&&t.AddContent(new A(this.value))},this.toString=()=>String(this.value),("number"!=typeof t||Number.isNaN(t))&&"boolean"!=typeof t)throw new Error("Unexpected object type in NumberExpression.");this.value=t,this.subtype=e}get typeName(){return"Number"}Equals(t){const e=r(t,B);return!!e&&(e.subtype==this.subtype&&e.value==this.value)}}class M extends L{get nativeNameForOp(){return"-"===this.op?"_":"not"===this.op?"!":this.op}constructor(t,e){super(),this.op=e,this.GenerateIntoContainer=t=>{this.innerExpression.GenerateIntoContainer(t),t.AddContent(j.CallWithName(this.nativeNameForOp))},this.toString=()=>this.nativeNameForOp+this.innerExpression,this.innerExpression=this.AddContent(t)}get typeName(){return"UnaryExpression"}}M.WithInner=(t,e)=>{const n=r(t,B);if(n){if("-"===e){if(n.isInt())return new B(-n.value,"int");if(n.isFloat())return new B(-n.value,"float")}else if("!"==e||"not"==e){if(n.isInt())return new B(0==n.value,"bool");if(n.isFloat())return new B(0==n.value,"bool");if(n.isBool())return new B(!n.value,"bool")}throw new Error("Unexpected operation or number type")}return new M(t,e)};class G extends L{constructor(t,e,n){super(),this.opName=n,this.GenerateIntoContainer=t=>{this.leftExpression.GenerateIntoContainer(t),this.rightExpression.GenerateIntoContainer(t),this.opName=this.NativeNameForOp(this.opName),t.AddContent(j.CallWithName(this.opName))},this.NativeNameForOp=t=>"and"===t?"&&":"or"===t?"||":"mod"===t?"%":"has"===t?"?":"hasnt"===t?"!?":t,this.toString=()=>`(${this.leftExpression} ${this.opName} ${this.rightExpression})`,this.leftExpression=this.AddContent(t),this.rightExpression=this.AddContent(e),this.opName=n}get typeName(){return"BinaryExpression"}ResolveReferences(t){if(super.ResolveReferences(t),"?"===this.NativeNameForOp(this.opName)){const t=r(this.leftExpression,M);null===t||"not"!==t.op&&"!"!==t.op||this.Error(`Using 'not' or '!' here negates '${t.innerExpression}' rather than the result of the '?' or 'has' operator. You need to add parentheses around the (A ? B) expression.`)}}}class ${constructor(t){this.set=new Set,this.Add=t=>this.set.add(t),this.AddRange=(t,e)=>{for(let n=t.charCodeAt(0);n<=e.charCodeAt(0);++n)this.Add(String.fromCharCode(n));return this},this.AddCharacters=t=>{if("string"==typeof t||Array.isArray(t))for(const e of t)this.Add(e);else for(const e of t.set)this.Add(e);return this},t&&this.AddCharacters(t)}}$.FromRange=(t,e)=>(new $).AddRange(t,e);class q{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(this._start=t,this._end=e,this._correspondingCharSet=new $,this._excludes=new Set,this.ToCharacterSet=()=>{if(0===this._correspondingCharSet.set.size)for(let t,e=this.start.charCodeAt(0);e<=this.end.charCodeAt(0);e+=1)t=String.fromCharCode(e),this._excludes.has(t)||this._correspondingCharSet.AddCharacters(t);return this._correspondingCharSet},n instanceof $)this._excludes=n.set;else for(const t of n)this._excludes.add(t)}get start(){return this._start}get end(){return this._end}}q.Define=function(t,e){return new q(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[])};class U extends S{constructor(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];super(),this._pathOnChoice=null,this.hasCondition=!1,this.hasStartContent=!1,this.hasChoiceOnlyContent=!1,this.isInvisibleDefault=!1,this.onceOnly=!0,this.onceOnly=t}get pathOnChoice(){if(null!=this._pathOnChoice&&this._pathOnChoice.isRelative){let t=this.choiceTarget;t&&(this._pathOnChoice=t.path)}return this._pathOnChoice}set pathOnChoice(t){this._pathOnChoice=t}get choiceTarget(){return null===this._pathOnChoice?v("ChoicePoint._pathOnChoice"):this.ResolvePath(this._pathOnChoice).container}get pathStringOnChoice(){return null===this.pathOnChoice?v("ChoicePoint.pathOnChoice"):this.CompactPathString(this.pathOnChoice)}set pathStringOnChoice(t){this.pathOnChoice=new p(t)}get flags(){let t=0;return this.hasCondition&&(t|=1),this.hasStartContent&&(t|=2),this.hasChoiceOnlyContent&&(t|=4),this.isInvisibleDefault&&(t|=8),this.onceOnly&&(t|=16),t}set flags(t){this.hasCondition=(1&t)>0,this.hasStartContent=(2&t)>0,this.hasChoiceOnlyContent=(4&t)>0,this.isInvisibleDefault=(8&t)>0,this.onceOnly=(16&t)>0}toString(){if(null===this.pathOnChoice)return v("ChoicePoint.pathOnChoice");return"Choice: -> "+this.pathOnChoice.toString()}}!function(t){t[t.Tunnel=0]="Tunnel",t[t.Function=1]="Function",t[t.FunctionEvaluationFromGame=2]="FunctionEvaluationFromGame"}(g||(g={}));class K{constructor(){this.container=null,this.index=-1,2===arguments.length&&(this.container=arguments[0],this.index=arguments[1])}Resolve(){return this.index<0?this.container:null==this.container?null:0==this.container.content.length?this.container:this.index>=this.container.content.length?null:this.container.content[this.index]}get isNull(){return null==this.container}get path(){return this.isNull?null:this.index>=0?this.container.path.PathByAppendingComponent(new p.Component(this.index)):this.container.path}toString(){return this.container?"Ink Pointer -> "+this.container.path.toString()+" -- index "+this.index:"Ink Pointer (null)"}copy(){return new K(this.container,this.index)}static StartOf(t){return new K(t,0)}static get Null(){return new K(null,-1)}}let H=class t extends S{get targetPath(){if(null!=this._targetPath&&this._targetPath.isRelative){let t=this.targetPointer.Resolve();t&&(this._targetPath=t.path)}return this._targetPath}set targetPath(t){this._targetPath=t,this._targetPointer=K.Null}get targetPointer(){if(this._targetPointer.isNull){let t=this.ResolvePath(this._targetPath).obj;if(null===this._targetPath)return v("this._targetPath");if(null===this._targetPath.lastComponent)return v("this._targetPath.lastComponent");if(this._targetPath.lastComponent.isIndex){if(null===t)return v("targetObj");this._targetPointer.container=t.parent instanceof k?t.parent:null,this._targetPointer.index=this._targetPath.lastComponent.index}else this._targetPointer=K.StartOf(t instanceof k?t:null)}return this._targetPointer.copy()}get targetPathString(){return null==this.targetPath?null:this.CompactPathString(this.targetPath)}set targetPathString(t){this.targetPath=null==t?null:new p(t)}get hasVariableTarget(){return null!=this.variableDivertName}constructor(t){super(),this._targetPath=null,this._targetPointer=K.Null,this.variableDivertName=null,this.pushesToStack=!1,this.stackPushType=0,this.isExternal=!1,this.externalArgs=0,this.isConditional=!1,this.pushesToStack=!1,void 0!==t&&(this.pushesToStack=!0,this.stackPushType=t)}Equals(e){let n=e;return n instanceof t&&this.hasVariableTarget==n.hasVariableTarget&&(this.hasVariableTarget?this.variableDivertName==n.variableDivertName:null===this.targetPath?v("this.targetPath"):this.targetPath.Equals(n.targetPath))}toString(){if(this.hasVariableTarget)return"Divert(variable: "+this.variableDivertName+")";if(null==this.targetPath)return"Divert(null)";{let t=new y,e=this.targetPath.toString();return t.Append("Divert"),this.isConditional&&t.Append("?"),this.pushesToStack&&(this.stackPushType==g.Function?t.Append(" function"):t.Append(" tunnel")),t.Append(" -> "),t.Append(this.targetPathString),t.Append(" ("),t.Append(e),t.Append(")"),t.toString()}}};var J;!function(t){t[t.Knot=0]="Knot",t[t.List=1]="List",t[t.ListItem=2]="ListItem",t[t.Var=3]="Var",t[t.SubFlowAndWeave=4]="SubFlowAndWeave",t[t.Arg=5]="Arg",t[t.Temp=6]="Temp"}(J||(J={}));let z=class extends S{constructor(t,e){super(),this.variableName=t||null,this.isNewDeclaration=!!e,this.isGlobal=!1}toString(){return"VarAssign to "+this.variableName}},X=class extends c{get runtimeChoice(){if(!this._runtimeChoice)throw new Error;return this._runtimeChoice}get name(){var t;return(null===(t=this.identifier)||void 0===t?void 0:t.name)||null}get condition(){return this._condition}set condition(t){this._condition=t,t&&this.AddContent(t)}get runtimeContainer(){return this._innerContentContainer}get innerContentContainer(){return this._innerContentContainer}get containerForCounting(){return this._innerContentContainer}get runtimePath(){if(!this.innerContentContainer||!this.innerContentContainer.path)throw new Error;return this.innerContentContainer.path}constructor(t,e,n){super(),this._condition=null,this._innerContentContainer=null,this._outerContainer=null,this._runtimeChoice=null,this._returnToR1=null,this._returnToR2=null,this._r1Label=null,this._r2Label=null,this._divertToStartContentOuter=null,this._divertToStartContentInner=null,this._startContentRuntimeContainer=null,this.isInvisibleDefault=!1,this.hasWeaveStyleInlineBrackets=!1,this.GenerateRuntimeObject=()=>{if(this._outerContainer=new k,this._runtimeChoice=new U(this.onceOnly),this._runtimeChoice.isInvisibleDefault=this.isInvisibleDefault,(this.startContent||this.choiceOnlyContent||this.condition)&&this._outerContainer.AddContent(D.EvalStart()),this.startContent){this._returnToR1=new O,this._outerContainer.AddContent(this._returnToR1);const t=new z("$r",!0);this._outerContainer.AddContent(t),this._outerContainer.AddContent(D.BeginString()),this._divertToStartContentOuter=new H,this._outerContainer.AddContent(this._divertToStartContentOuter),this._startContentRuntimeContainer=this.startContent.GenerateRuntimeObject(),this._startContentRuntimeContainer.name="s";const e=new H;e.variableDivertName="$r",this._startContentRuntimeContainer.AddContent(e),this._outerContainer.AddToNamedContentOnly(this._startContentRuntimeContainer),this._r1Label=new k,this._r1Label.name="$r1",this._outerContainer.AddContent(this._r1Label),this._outerContainer.AddContent(D.EndString()),this._runtimeChoice.hasStartContent=!0}if(this.choiceOnlyContent){this._outerContainer.AddContent(D.BeginString());const t=this.choiceOnlyContent.GenerateRuntimeObject();this._outerContainer.AddContentsOfContainer(t),this._outerContainer.AddContent(D.EndString()),this._runtimeChoice.hasChoiceOnlyContent=!0}if(this.condition&&(this.condition.GenerateIntoContainer(this._outerContainer),this._runtimeChoice.hasCondition=!0),(this.startContent||this.choiceOnlyContent||this.condition)&&this._outerContainer.AddContent(D.EvalEnd()),this._outerContainer.AddContent(this._runtimeChoice),this._innerContentContainer=new k,this.startContent){this._returnToR2=new O,this._innerContentContainer.AddContent(D.EvalStart()),this._innerContentContainer.AddContent(this._returnToR2),this._innerContentContainer.AddContent(D.EvalEnd());const t=new z("$r",!0);this._innerContentContainer.AddContent(t),this._divertToStartContentInner=new H,this._innerContentContainer.AddContent(this._divertToStartContentInner),this._r2Label=new k,this._r2Label.name="$r2",this._innerContentContainer.AddContent(this._r2Label)}if(this.innerContent){const t=this.innerContent.GenerateRuntimeObject();this._innerContentContainer.AddContentsOfContainer(t)}return this.story.countAllVisits&&(this._innerContentContainer.visitsShouldBeCounted=!0),this._innerContentContainer.countingAtStartOnly=!0,this._outerContainer},this.toString=()=>null!==this.choiceOnlyContent?`* ${this.startContent}[${this.choiceOnlyContent}]...`:`* ${this.startContent}...`,this.startContent=t,this.choiceOnlyContent=e,this.innerContent=n,this.indentationDepth=1,t&&this.AddContent(this.startContent),e&&this.AddContent(this.choiceOnlyContent),n&&this.AddContent(this.innerContent),this.onceOnly=!0}get typeName(){return"Choice"}ResolveReferences(t){var e;if(this._innerContentContainer&&(this.runtimeChoice.pathOnChoice=this._innerContentContainer.path,this.onceOnly&&(this._innerContentContainer.visitsShouldBeCounted=!0)),this._returnToR1){if(!this._r1Label)throw new Error;this._returnToR1.targetPath=this._r1Label.path}if(this._returnToR2){if(!this._r2Label)throw new Error;this._returnToR2.targetPath=this._r2Label.path}if(this._divertToStartContentOuter){if(!this._startContentRuntimeContainer)throw new Error;this._divertToStartContentOuter.targetPath=this._startContentRuntimeContainer.path}if(this._divertToStartContentInner){if(!this._startContentRuntimeContainer)throw new Error;this._divertToStartContentInner.targetPath=this._startContentRuntimeContainer.path}super.ResolveReferences(t),this.identifier&&((null===(e=this.identifier)||void 0===e?void 0:e.name)||"").length>0&&t.CheckForNamingCollisions(this,this.identifier,J.SubFlowAndWeave)}};class Y{constructor(){this.characterIndex=0,this.characterInLineIndex=0,this.lineIndex=0,this.reportedErrorInScope=!1,this.uniqueId=0,this.customFlags=0,this.CopyFrom=t=>{Y._uniqueIdCounter++,this.uniqueId=Y._uniqueIdCounter,this.characterIndex=t.characterIndex,this.characterInLineIndex=t.characterInLineIndex,this.lineIndex=t.lineIndex,this.customFlags=t.customFlags,this.reportedErrorInScope=!1},this.SquashFrom=t=>{this.characterIndex=t.characterIndex,this.characterInLineIndex=t.characterInLineIndex,this.lineIndex=t.lineIndex,this.reportedErrorInScope=t.reportedErrorInScope,this.customFlags=t.customFlags}}}Y._uniqueIdCounter=1e3;class Z{get currentElement(){return this._stack[this._numElements-1]}get lineIndex(){return this.currentElement.lineIndex}set lineIndex(t){this.currentElement.lineIndex=t}get characterIndex(){return this.currentElement.characterIndex}set characterIndex(t){this.currentElement.characterIndex=t}get characterInLineIndex(){return this.currentElement.characterInLineIndex}set characterInLineIndex(t){this.currentElement.characterInLineIndex=t}get customFlags(){return this.currentElement.customFlags}set customFlags(t){this.currentElement.customFlags=t}get errorReportedAlreadyInScope(){return this.currentElement.reportedErrorInScope}get stackHeight(){return this._numElements}constructor(){this._stack=[],this._numElements=0,this.StringParserState=()=>{this._stack=new Array(200);for(let t=0;t<200;++t)this._stack[t]=new Y;this._numElements=1},this.Push=()=>{if(this._numElements>=this._stack.length&&this._numElements>0)throw new Error("Stack overflow in parser state.");const t=this._stack[this._numElements-1],e=this._stack[this._numElements];return this._numElements++,e.CopyFrom(t),e.uniqueId},this.Pop=t=>{if(1==this._numElements)throw new Error("Attempting to remove final stack element is illegal! Mismatched Begin/Succceed/Fail?");if(this.currentElement.uniqueId!=t)throw new Error("Mismatched rule IDs while Poping - do you have mismatched Begin/Succeed/Fail?");this._numElements-=1},this.Peek=t=>{if(this.currentElement.uniqueId!=t)throw new Error("Mismatched rule IDs while Peeking - do you have mismatched Begin/Succeed/Fail?");return this._stack[this._numElements-1]},this.PeekPenultimate=()=>this._numElements>=2?this._stack[this._numElements-2]:null,this.Squash=()=>{if(this._numElements<2)throw new Error("Attempting to remove final stack element is illegal! Mismatched Begin/Succceed/Fail?");const t=this._stack[this._numElements-2],e=this._stack[this._numElements-1];t.SquashFrom(e),this._numElements-=1},this.NoteErrorReported=()=>{for(const t of this._stack)t.reportedErrorInScope=!0};for(let t=0;t<200;t++)this._stack[t]=new Y;this._numElements=1}}const Q=Symbol("ParseSuccessStruct");class tt{constructor(t){var e=this;this.ParseRule=null,this.errorHandler=null,this.hadError=!1,this.BeginRule=()=>this.state.Push(),this.FailRule=t=>(this.state.Pop(t),null),this.CancelRule=t=>{this.state.Pop(t)},this.SucceedRule=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=e.state.Peek(t),r=e.state.PeekPenultimate();e.RuleDidSucceed&&e.RuleDidSucceed(n,r,i),e.state.Squash();let s=n;return null===s&&(s=tt.ParseSuccess),s},this.Expect=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.ParseObject(t);if(null===r){let s;null===n&&(n=t.name);const a=e.LineRemainder();s=null===a||0===a.length?"end of line":`'${a}'`,e.Error(`Expected ${n} but saw ${s}`),null!==i&&(r=i())}return r},this.Error=function(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.ErrorOnLine(t,e.lineIndex+1,n)},this.ErrorWithParsedObject=function(t,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.ErrorOnLine(t,n.debugMetadata?n.debugMetadata.startLineNumber:-1,i)},this.ErrorOnLine=(t,e,n)=>{if(!this.state.errorReportedAlreadyInScope){const i=n?"Warning":"Error";if(!this.errorHandler)throw new Error(`${i} on line ${e}: ${t}`);this.errorHandler(t,this.index,e-1,n),this.state.NoteErrorReported()}n||(this.hadError=!0)},this.Warning=t=>this.Error(t,!0),this.LineRemainder=()=>this.Peek((()=>this.ParseUntilCharactersFromString("\n\r"))),this.SetFlag=(t,e)=>{e?this.state.customFlags|=t:this.state.customFlags&=~t},this.GetFlag=t=>Boolean(this.state.customFlags&t),this.ParseObject=t=>{const e=this.BeginRule(),n=this.state.stackHeight,i=t();if(n!==this.state.stackHeight)throw new Error("Mismatched Begin/Fail/Succeed rules");return null===i?this.FailRule(e):(this.SucceedRule(e,i),i)},this.Parse=t=>{const e=this.BeginRule(),n=t();return null===n?(this.FailRule(e),null):(this.SucceedRule(e,n),n)},this.OneOf=t=>{for(const e of t){const t=this.ParseObject(e);if(null!==t)return t}return null},this.OneOrMore=t=>{const e=[];let n=null;do{n=this.ParseObject(t),null!==n&&e.push(n)}while(null!==n);return e.length>0?e:null},this.Optional=t=>()=>{const e=this.ParseObject(t);return null===e?tt.ParseSuccess:e},this.Exclude=t=>()=>this.ParseObject(t)&&tt.ParseSuccess,this.OptionalExclude=t=>()=>(this.ParseObject(t),tt.ParseSuccess),this.String=t=>()=>this.ParseString(t),this.TryAddResultToList=function(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t!==tt.ParseSuccess){if(n&&Array.isArray(t)){const n=t;if(null!==n){for(const t of n)e.push(t);return}}e.push(t)}},this.Interleave=function(t,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const s=e.BeginRule(),a=[],o=e.ParseObject(t);if(null===o)return e.FailRule(s);e.TryAddResultToList(o,a,r);let l=null,h=null;do{if(null!==i&&null!==e.Peek(i))break;if(l=e.ParseObject(n),null===l)break;if(e.TryAddResultToList(l,a,r),h=null,null!==l){if(h=e.ParseObject(t),null===h)break;e.TryAddResultToList(h,a,r)}}while((null!==l||null!==h)&&(l!==tt.ParseSuccess||h!=tt.ParseSuccess)&&e.remainingLength>0);return 0===a.length?e.FailRule(s):e.SucceedRule(s,a)},this.ParseString=t=>{if(t.length>this.remainingLength)return null;const e=this.BeginRule();let n=this.index,i=this.characterInLineIndex,r=this.lineIndex,s=!0;for(let e=0;e<t.length;e+=1){const a=t[e];if(this._chars[n]!==a){s=!1;break}"\n"===a&&(r++,i=-1),n++,i++}return this.index=n,this.characterInLineIndex=i,this.lineIndex=r,s?this.SucceedRule(e,t):this.FailRule(e)},this.ParseSingleCharacter=()=>{if(this.remainingLength>0){const t=this._chars[this.index];return"\n"===t&&(this.lineIndex+=1,this.characterInLineIndex=-1),this.index+=1,this.characterInLineIndex+=1,t}return"0"},this.ParseUntilCharactersFromString=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return e.ParseCharactersFromString(t,!1,n)},this.ParseUntilCharactersFromCharSet=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return e.ParseCharactersFromCharSet(t,!1,n)},this.ParseCharactersFromString=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;const r=new $(t);return"number"==typeof n?e.ParseCharactersFromCharSet(r,!0,n):e.ParseCharactersFromCharSet(r,n,i)},this.ParseCharactersFromCharSet=function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;-1===i&&(i=Number.MAX_SAFE_INTEGER);const r=e.index;let s=e.index,a=e.characterInLineIndex,o=e.lineIndex,l=0;for(;s<e._chars.length&&t.set.has(e._chars[s])===n&&l<i;)"\n"===e._chars[s]&&(o+=1,a=-1),s+=1,a+=1,l+=1;e.index=s,e.characterInLineIndex=a,e.lineIndex=o;return e.index>r?e._chars.slice(r,e.index).join(""):null},this.Peek=t=>{const e=this.BeginRule(),n=t();return this.CancelRule(e),n},this.ParseInt=()=>{const t=this.index,e=this.characterInLineIndex,n=null!==this.ParseString("-");this.ParseCharactersFromString(" \t");const i=this.ParseCharactersFromCharSet(tt.numbersCharacterSet);if(null===i)return this.index=t,this.characterInLineIndex=e,null;let r;return Number.isNaN(Number(i))?(this.Error("Failed to read integer value: "+i+". Perhaps it's out of the range of acceptable numbers ink supports? ("+Number.MIN_SAFE_INTEGER+" to "+Number.MAX_SAFE_INTEGER+")"),null):(r=Number(i),n?-r:r)},this.ParseFloat=()=>{const t=this.index,e=this.characterInLineIndex,n=this.ParseInt();if(null!==n&&null!==this.ParseString(".")){const t=this.ParseCharactersFromCharSet(tt.numbersCharacterSet);return Number(`${n}.${t}`)}return this.index=t,this.characterInLineIndex=e,null},this.ParseNewline=()=>{const t=this.BeginRule();return this.ParseString("\r"),null===this.ParseString("\n")?this.FailRule(t):this.SucceedRule(t,"\n")};const n=this.PreProcessInputString(t);this.state=new Z,this._chars=t?n.split(""):[],this.inputString=n}get currentCharacter(){return this.index>=0&&this.remainingLength>0?this._chars[this.index]:"0"}PreProcessInputString(t){return t}get endOfInput(){return this.index>=this._chars.length}get remainingString(){return this._chars.slice(this.index,this.index+this.remainingLength).join("")}get remainingLength(){return this._chars.length-this.index}get lineIndex(){return this.state.lineIndex}set lineIndex(t){this.state.lineIndex=t}set characterInLineIndex(t){this.state.characterInLineIndex=t}get characterInLineIndex(){return this.state.characterInLineIndex}get index(){return this.state.characterIndex}set index(t){this.state.characterIndex=t}ParseUntil(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=this.BeginRule(),r=new $;null!==e&&(r.set=new Set([...r.set.values(),...e.set.values()])),null!==n&&(r.set=new Set([...r.set.values(),...n.set.values()]));let s="",a=null;for(;;){const n=this.ParseUntilCharactersFromCharSet(r);if(n&&(s+=n),a=this.Peek(t),null!==a)break;{if(this.endOfInput)break;const t=this.currentCharacter;if(null!==e&&e.set.has(t)){s+=t,"\n"===t&&(this.lineIndex+=1,this.characterInLineIndex=-1),this.index+=1,this.characterInLineIndex+=1;continue}break}}return s.length>0?this.SucceedRule(i,String(s)):this.FailRule(i)}}tt.ParseSuccess=Q,tt.numbersCharacterSet=new $("0123456789");class et extends tt{constructor(){super(...arguments),this._commentOrNewlineStartCharacter=new $("/\r\n"),this._commentBlockEndCharacter=new $("*"),this._newlineCharacters=new $("\n\r"),this.Process=()=>{const t=this.Interleave(this.Optional(this.CommentsAndNewlines),this.Optional(this.MainInk));return null!==t?t.join(""):""},this.MainInk=()=>this.ParseUntil(this.CommentsAndNewlines,this._commentOrNewlineStartCharacter,null),this.CommentsAndNewlines=()=>{let t=this.Interleave(this.Optional(this.ParseNewline),this.Optional(this.ParseSingleComment));return null!==t?t.join(""):null},this.ParseSingleComment=()=>this.OneOf([this.EndOfLineComment,this.BlockComment]),this.EndOfLineComment=()=>null===this.ParseString("//")?null:(this.ParseUntilCharactersFromCharSet(this._newlineCharacters),""),this.BlockComment=()=>{if(null===this.ParseString("/*"))return null;const t=this.lineIndex,e=this.ParseUntil(this.String("*/"),this._commentBlockEndCharacter,null);return this.endOfInput||this.ParseString("*/"),null!=e?"\n".repeat(this.lineIndex-t):null}}PreProcessInputString(t){return t}}class nt extends c{constructor(t,e){super(),this.initialCondition=t,this.branches=e,this._reJoinTarget=null,this.GenerateRuntimeObject=()=>{const t=new k;this.initialCondition&&t.AddContent(this.initialCondition.runtimeObject);for(const e of this.branches){const n=e.runtimeObject;t.AddContent(n)}return null===this.initialCondition||null===this.branches[0].ownExpression||this.branches[this.branches.length-1].isElse||t.AddContent(D.PopEvaluatedValue()),this._reJoinTarget=D.NoOp(),t.AddContent(this._reJoinTarget),t},this.initialCondition&&this.AddContent(this.initialCondition),null!==this.branches&&this.AddContent(this.branches)}get typeName(){return"Conditional"}ResolveReferences(t){const e=this._reJoinTarget.path;for(const t of this.branches){if(!t.returnDivert)throw new Error;t.returnDivert.targetPath=e}super.ResolveReferences(t)}}class it extends c{constructor(t){super(),this.text=t,this.GenerateRuntimeObject=()=>new I(this.text),this.toString=()=>this.text}get typeName(){return"Text"}}class rt extends c{get constantName(){var t;return null===(t=this.constantIdentifier)||void 0===t?void 0:t.name}get expression(){if(!this._expression)throw new Error;return this._expression}constructor(t,e){super(),this._expression=null,this.GenerateRuntimeObject=()=>null,this.constantIdentifier=t,e&&(this._expression=this.AddContent(e))}get typeName(){return"CONST"}ResolveReferences(t){super.ResolveReferences(t),t.CheckForNamingCollisions(this,this.constantIdentifier,J.Var)}}var st;!function(t){t[t.Story=0]="Story",t[t.Knot=1]="Knot",t[t.Stitch=2]="Stitch",t[t.WeavePoint=3]="WeavePoint"}(st||(st={}));class at extends c{get name(){var t;return(null===(t=this.identifier)||void 0===t?void 0:t.name)||null}get runtimeContainer(){return this.runtimeObject}constructor(t,e){super(),this.indentationDepth=e,this.GenerateRuntimeObject=()=>{const t=new k;if(t.name=this.name,this.story.countAllVisits&&(t.visitsShouldBeCounted=!0),t.countingAtStartOnly=!0,this.content)for(const e of this.content)t.AddContent(e.runtimeObject);return t},this.toString=()=>{var t,e;return"- "+((null===(t=this.identifier)||void 0===t?void 0:t.name)?"("+(null===(e=this.identifier)||void 0===e?void 0:e.name)+")":"gather")},t&&(this.identifier=t)}get typeName(){return"Gather"}ResolveReferences(t){super.ResolveReferences(t),this.identifier&&(this.identifier.name||"").length>0&&t.CheckForNamingCollisions(this,this.identifier,J.SubFlowAndWeave)}}class ot{get baseTargetLevel(){return this.baseLevelIsAmbiguous?st.Story:this._baseTargetLevel}get baseLevelIsAmbiguous(){return!this._baseTargetLevel}get firstComponent(){return null!=this.components&&this.components.length?this.components[0].name:null}get numberOfComponents(){return this.components?this.components.length:0}get dotSeparatedComponents(){return null==this._dotSeparatedComponents&&(this._dotSeparatedComponents=(this.components?this.components:[]).map((t=>t.name)).filter(u).join(".")),this._dotSeparatedComponents}constructor(t,e){this._dotSeparatedComponents=null,this.toString=()=>null===this.components||0===this.components.length?this.baseTargetLevel===st.WeavePoint?"-> <next gather point>":"<invalid Path>":`-> ${this.dotSeparatedComponents}`,this.ResolveFromContext=t=>{if(null==this.components||0==this.components.length)return null;let e=this.ResolveBaseTarget(t);return null===e?null:this.components.length>1?this.ResolveTailComponents(e):e},this.ResolveBaseTarget=t=>{const e=this.firstComponent;let n=t;for(;n;){const i=n===t,r=this.GetChildFromContext(n,e,null,i);if(r)return r;n=n.parent}return null},this.ResolveTailComponents=t=>{let e=t;if(!this.components)return null;for(let t=1;t<this.components.length;++t){const n=this.components[t].name;let i,s=r(e,ct);if(i=null!==s?s.flowLevel+1:st.WeavePoint,e=this.GetChildFromContext(e,n,i),null===e)break}return e},this.GetChildFromContext=function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=null===n,a=r(t,At);if(e&&null!==a&&(s||n===st.WeavePoint))return a.WeavePointNamed(e);let o=r(t,ct);if(e&&null!==o){const t=i||o.flowLevel===st.Knot;return o.ContentWithNameAtLevel(e,n,t)}return null},Object.values(st).includes(t)?(this._baseTargetLevel=t,this.components=e||[]):Array.isArray(t)?(this._baseTargetLevel=null,this.components=t||[]):(this._baseTargetLevel=null,this.components=[t])}get typeName(){return"Path"}}class lt extends c{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super(),this.returnedExpression=null,this.GenerateRuntimeObject=()=>{const t=new k;return this.returnedExpression?t.AddContent(this.returnedExpression.runtimeObject):(t.AddContent(D.EvalStart()),t.AddContent(new V),t.AddContent(D.EvalEnd())),t.AddContent(D.PopFunction()),t},t&&(this.returnedExpression=this.AddContent(t))}get typeName(){return"ReturnType"}}function ht(t){let e=t.parent;for(;e;){if(e.hasOwnProperty("iamFlowbase")&&e.iamFlowbase())return e;e=e.parent}return null}class ut{constructor(t){this.debugMetadata=null,this.toString=()=>this.name||"undefined identifer",this.name=t}get typeName(){return"Identifier"}static Done(){return new ut("DONE")}}class ct extends c{get hasParameters(){return null!==this.args&&this.args.length>0}get subFlowsByName(){return this._subFlowsByName}get typeName(){return this.isFunction?"Function":String(this.flowLevel)}get name(){var t;return(null===(t=this.identifier)||void 0===t?void 0:t.name)||null}constructor(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),e=this,this.isFunction=s,this._rootWeave=null,this._subFlowsByName=new Map,this._startingSubFlowDivert=null,this._startingSubFlowRuntime=null,this._firstChildFlow=null,this.variableDeclarations=new Map,this.identifier=null,this.args=null,this.iamFlowbase=()=>!0,this.SplitWeaveAndSubFlowContent=(t,e)=>{var n,i;const s=[],a=[];this._subFlowsByName=new Map;for(const e of t){const t=r(e,ct);t?(null===this._firstChildFlow&&(this._firstChildFlow=t),a.push(e),(null===(n=t.identifier)||void 0===n?void 0:n.name)&&this._subFlowsByName.set(null===(i=t.identifier)||void 0===i?void 0:i.name,t)):s.push(e)}e&&s.push(new at(null,1),new vt(new ot(ut.Done())));const o=[];return s.length>0&&(this._rootWeave=new At(s,0),o.push(this._rootWeave)),a.length>0&&o.push(...a),o},this.ResolveVariableWithName=(t,e)=>{var n;const i={},r=null===e?this:ht(e);if(r){if(null!==r.args)for(const e of r.args)if((null===(n=e.identifier)||void 0===n?void 0:n.name)===t)return i.found=!0,i.isArgument=!0,i.ownerFlow=r,i;if(r!==this.story&&r.variableDeclarations.has(t))return i.found=!0,i.ownerFlow=r,i.isTemporary=!0,i}return this.story.variableDeclarations.has(t)?(i.found=!0,i.ownerFlow=this.story,i.isGlobal=!0,i):(i.found=!1,i)},this.AddNewVariableDeclaration=t=>{const e=t.variableName;if(this.variableDeclarations.has(e)){const n=this.variableDeclarations.get(e);let i="";return n.debugMetadata&&(i=` (${n.debugMetadata})`),void this.Error(`found declaration variable '${e}' that was already declared${i}`,t,!1)}this.variableDeclarations.set(t.variableName,t)},this.ResolveWeavePointNaming=()=>{this._rootWeave&&this._rootWeave.ResolveWeavePointNaming();for(const[,t]of this._subFlowsByName)t.hasOwnProperty("ResolveWeavePointNaming")&&t.ResolveWeavePointNaming()},this.GenerateRuntimeObject=()=>{var t;let e=null;this.isFunction?this.CheckForDisallowedFunctionFlowControl():this.flowLevel!==st.Knot&&this.flowLevel!==st.Stitch||(e=this.Find(lt)(),null!==e&&this.Error(`Return statements can only be used in knots that are declared as functions: == function ${this.identifier} ==`,e));const n=new k;n.name=null===(t=this.identifier)||void 0===t?void 0:t.name,this.story.countAllVisits&&(n.visitsShouldBeCounted=!0),this.GenerateArgumentVariableAssignments(n);let i=0;for(;null!==this.content&&i<this.content.length;){const t=this.content[i];if(t instanceof ct){const e=t,r=e.runtimeObject;0!==i||e.hasParameters||this.flowLevel!==st.Knot||(this._startingSubFlowDivert=new H,n.AddContent(this._startingSubFlowDivert),this._startingSubFlowRuntime=r);const s=r,a=n.namedContent.get(s.name)||null;if(a){const t=`${this.GetType()} already contains flow named '${s.name}' (at ${a.debugMetadata})`;this.Error(t,e)}n.AddToNamedContentOnly(s)}else t&&n.AddContent(t.runtimeObject);i+=1}return this.flowLevel===st.Story||this.isFunction||null===this._rootWeave||null!==e||this._rootWeave.ValidateTermination(this.WarningInTermination),n},this.GenerateArgumentVariableAssignments=t=>{var e;if(null!==this.args&&0!==this.args.length)for(let n=this.args.length-1;n>=0;--n){const i=(null===(e=this.args[n].identifier)||void 0===e?void 0:e.name)||null,r=new z(i,!0);t.AddContent(r)}},this.ContentWithNameAtLevel=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var r;if((n===e.flowLevel||null===n)&&t===(null===(r=e.identifier)||void 0===r?void 0:r.name))return e;if(n===st.WeavePoint||null===n){let r=null;if(e._rootWeave&&(r=e._rootWeave.WeavePointNamed(t),r))return r;if(n===st.WeavePoint)return i?e.DeepSearchForAnyLevelContent(t):null}if(null!==n&&n<e.flowLevel)return null;let s=e._subFlowsByName.get(t)||null;return!s||null!==n&&n!==s.flowLevel?i?e.DeepSearchForAnyLevelContent(t):null:s},this.DeepSearchForAnyLevelContent=t=>{const e=this.ContentWithNameAtLevel(t,st.WeavePoint,!1);if(e)return e;for(const[,e]of this._subFlowsByName){const n=e.ContentWithNameAtLevel(t,null,!0);if(n)return n}return null},this.CheckForDisallowedFunctionFlowControl=()=>{this.flowLevel!==st.Knot&&this.Error("Functions cannot be stitches - i.e. they should be defined as '== function myFunc ==' rather than internal to another knot.");for(const[t,e]of this._subFlowsByName)this.Error(`Functions may not contain stitches, but saw '${t}' within the function '${this.identifier}'`,e);if(!this._rootWeave)throw new Error;const t=this._rootWeave.FindAll(vt)();for(const e of t)e.isFunctionCall||e.parent instanceof Ct||this.Error(`Functions may not contain diverts, but saw '${e}'`,e);const e=this._rootWeave.FindAll(X)();for(const t of e)this.Error(`Functions may not contain choices, but saw '${t}'`,t)},this.WarningInTermination=t=>{let e="Apparent loose end exists where the flow runs out. Do you need a '-> DONE' statement, choice or divert?";t.parent===this._rootWeave&&this._firstChildFlow&&(e=`${e} Note that if you intend to enter '${this._firstChildFlow.identifier}' next, you need to divert to it explicitly.`);const n=r(t,vt);n&&n.isTunnel&&(e+=` When final tunnel to '${n.target} ->' returns it won't have anywhere to go.`),this.Warning(e,t)},this.toString=()=>`${this.typeName} '${this.identifier}'`,this.identifier=t,this.args=i,null===n&&(n=[]),this.PreProcessTopLevelObjects(n),n=this.SplitWeaveAndSubFlowContent(n,"Story"==this.GetType()&&!a),this.AddContent(n)}PreProcessTopLevelObjects(t){}ResolveReferences(t){var e,n;if(this._startingSubFlowDivert){if(!this._startingSubFlowRuntime)throw new Error;this._startingSubFlowDivert.targetPath=this._startingSubFlowRuntime.path}if(super.ResolveReferences(t),null!==this.args){for(const e of this.args)t.CheckForNamingCollisions(this,e.identifier,J.Arg,"argument");for(let t=0;t<this.args.length;t+=1)for(let i=t+1;i<this.args.length;i+=1)(null===(e=this.args[t].identifier)||void 0===e?void 0:e.name)==(null===(n=this.args[i].identifier)||void 0===n?void 0:n.name)&&this.Error(`Multiple arguments with the same name: '${this.args[t].identifier}'`)}if(this.flowLevel!==st.Story){const e=this.flowLevel===st.Knot?J.Knot:J.SubFlowAndWeave;t.CheckForNamingCollisions(this,this.identifier,e)}}}class dt extends c{get runtimeContainer(){return this.runtimeObject}constructor(t){super(),this.dontFlatten=!1,this.TrimTrailingWhitespace=()=>{for(let t=this.content.length-1;t>=0;--t){const e=r(this.content[t],it);if(null===e)break;if(e.text=e.text.replace(new RegExp(/[ \t]/g),""),0!==e.text.length)break;this.content.splice(t,1)}},this.GenerateRuntimeObject=()=>{const t=new k;if(null!==this.content)for(const e of this.content){const n=e.runtimeObject;n&&t.AddContent(n)}return this.dontFlatten&&this.story.DontFlattenContainer(t),t},this.toString=()=>`ContentList(${this.content.join(", ")})`,t&&this.AddContent(t);for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];n&&this.AddContent(n)}get typeName(){return"ContentList"}}let pt=class extends S{get containerForCount(){return null===this.pathForCount?null:this.ResolvePath(this.pathForCount).container}get pathStringForCount(){return null===this.pathForCount?null:this.CompactPathString(this.pathForCount)}set pathStringForCount(t){this.pathForCount=null===t?null:new p(t)}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super(),this.pathForCount=null,this.name=t}toString(){if(null!=this.name)return"var("+this.name+")";return"read_count("+this.pathStringForCount+")"}};class mt extends L{get name(){return this.path.join(".")}get path(){return this.pathIdentifiers.map((t=>t.name)).filter(u)}get identifier(){if(!this.pathIdentifiers||0==this.pathIdentifiers.length)return null;const t=this.path.join(".");return new ut(t)}get runtimeVarRef(){return this._runtimeVarRef}constructor(t){super(),this.pathIdentifiers=t,this._runtimeVarRef=null,this.isConstantReference=!1,this.isListItemReference=!1,this.GenerateIntoContainer=t=>{let e=this.story.constants.get(this.name);if(e)return e.GenerateConstantIntoContainer(t),void(this.isConstantReference=!0);if(this._runtimeVarRef=new pt(this.name),1===this.path.length||2===this.path.length){let t="",e="";1===this.path.length?t=this.path[0]:(e=this.path[0],t=this.path[1]);this.story.ResolveListItem(e,t,this)&&(this.isListItemReference=!0)}t.AddContent(this._runtimeVarRef)},this.toString=()=>`{${this.path.join(".")}}`}get typeName(){return"ref"}ResolveReferences(t){if(super.ResolveReferences(t),this.isConstantReference||this.isListItemReference)return;const e=new ot(this.pathIdentifiers),n=e.ResolveFromContext(this);if(n){if(!n.containerForCounting)throw new Error;if(n.containerForCounting.visitsShouldBeCounted=!0,null===this._runtimeVarRef)return;this._runtimeVarRef.pathForCount=n.runtimePath,this._runtimeVarRef.name=null;let t=r(n,ct);t&&t.isFunction&&(this.parent instanceof At||this.parent instanceof dt||this.parent instanceof ct)&&this.Warning(`'${t.identifier}' being used as read count rather than being called as function. Perhaps you intended to write ${t.identifier}()`)}else{if(this.path.length>1){let t=`Could not find target for read count: ${e}`;return this.path.length<=2&&(t+=`, or couldn't find list item with the name ${this.path.join(",")}`),void this.Error(t)}t.ResolveVariableWithName(this.name,this).found||this.Error(`Unresolved variable: ${this.name}`,this)}}}class ft extends L{get proxyDivert(){return this._proxyDivert}get name(){return this._proxyDivert.target.firstComponent||""}get args(){return this._proxyDivert.args}get runtimeDivert(){return this._proxyDivert.runtimeDivert}get isChoiceCount(){return"CHOICE_COUNT"===this.name}get isTurns(){return"TURNS"===this.name}get isTurnsSince(){return"TURNS_SINCE"===this.name}get isRandom(){return"RANDOM"===this.name}get isSeedRandom(){return"SEED_RANDOM"===this.name}get isListRange(){return"LIST_RANGE"===this.name}get isListRandom(){return"LIST_RANDOM"===this.name}get isReadCount(){return"READ_COUNT"===this.name}constructor(t,e){super(),this._divertTargetToCount=null,this._variableReferenceToCount=null,this.shouldPopReturnedValue=!1,this.GenerateIntoContainer=t=>{const e=this.story.ResolveList(this.name);let n=!1;if(this.isChoiceCount)this.args.length>0&&this.Error("The CHOICE_COUNT() function shouldn't take any arguments"),t.AddContent(D.ChoiceCount());else if(this.isTurns)this.args.length>0&&this.Error("The TURNS() function shouldn't take any arguments"),t.AddContent(D.Turns());else if(this.isTurnsSince||this.isReadCount){const e=r(this.args[0],Ct),n=r(this.args[0],mt);if(1!==this.args.length||null===e&&null===n)return void this.Error(`The ${this.name}() function should take one argument: a divert target to the target knot, stitch, gather or choice you want to check. e.g. TURNS_SINCE(-> myKnot)`);e?(this._divertTargetToCount=e,this.AddContent(this._divertTargetToCount),this._divertTargetToCount.GenerateIntoContainer(t)):n&&(this._variableReferenceToCount=n,this.AddContent(this._variableReferenceToCount),this._variableReferenceToCount.GenerateIntoContainer(t)),this.isTurnsSince?t.AddContent(D.TurnsSince()):t.AddContent(D.ReadCount())}else if(this.isRandom){2!==this.args.length&&this.Error("RANDOM should take 2 parameters: a minimum and a maximum integer");for(let e=0;e<this.args.length;e+=1){const n=r(this.args[e],B);if(n&&!n.isInt()){const t=0===e?"minimum":"maximum";this.Error(`RANDOM's ${t} parameter should be an integer`)}this.args[e].GenerateIntoContainer(t)}t.AddContent(D.Random())}else if(this.isSeedRandom){1!==this.args.length&&this.Error("SEED_RANDOM should take 1 parameter - an integer seed");const e=r(this.args[0],B);e&&!e.isInt()&&this.Error("SEED_RANDOM's parameter should be an integer seed"),this.args[0].GenerateIntoContainer(t),t.AddContent(D.SeedRandom())}else if(this.isListRange){3!==this.args.length&&this.Error("LIST_RANGE should take 3 parameters - a list, a min and a max");for(let e=0;e<this.args.length;e+=1)this.args[e].GenerateIntoContainer(t);t.AddContent(D.ListRange())}else if(this.isListRandom)1!==this.args.length&&this.Error("LIST_RANDOM should take 1 parameter - a list"),this.args[0].GenerateIntoContainer(t),t.AddContent(D.ListRandom());else if(j.CallExistsWithName(this.name)){const e=j.CallWithName(this.name);if(e.numberOfParameters!==this.args.length){let t=`${ft.name} should take ${e.numberOfParameters} parameter`;e.numberOfParameters>1&&(t+="s"),this.Error(t)}for(let e=0;e<this.args.length;e+=1)this.args[e].GenerateIntoContainer(t);t.AddContent(j.CallWithName(this.name))}else if(null!==e)if(this.args.length>1&&this.Error("Can currently only construct a list from one integer (or an empty list from a given list definition)"),1===this.args.length)t.AddContent(new I(this.name)),this.args[0].GenerateIntoContainer(t),t.AddContent(D.ListFromInt());else{const e=new w;e.SetInitialOriginName(this.name),t.AddContent(new W(e))}else t.AddContent(this._proxyDivert.runtimeObject),n=!0;n||this.content.splice(this.content.indexOf(this._proxyDivert),1),this.shouldPopReturnedValue&&t.AddContent(D.PopEvaluatedValue())},this.toString=()=>{const t=this.args.join(", ");return`${this.name}(${t})`},this._proxyDivert=new vt(new ot(t),e),this._proxyDivert.isFunctionCall=!0,this.AddContent(this._proxyDivert)}get typeName(){return"FunctionCall"}ResolveReferences(t){if(super.ResolveReferences(t),!this.content.includes(this._proxyDivert)&&null!==this.args)for(const e of this.args)e.ResolveReferences(t);if(this._divertTargetToCount){const t=this._divertTargetToCount.divert,e=null!=t.runtimeDivert.variableDivertName;if(e)return void this.Error(`When getting the TURNS_SINCE() of a variable target, remove the '->' - i.e. it should just be TURNS_SINCE(${t.runtimeDivert.variableDivertName})`);const n=t.targetContent;if(null===n)e||this.Error(`Failed to find target for TURNS_SINCE: '${t.target}'`);else{if(!n.containerForCounting)throw new Error;n.containerForCounting.turnIndexShouldBeCounted=!0}}else if(this._variableReferenceToCount){const t=this._variableReferenceToCount.runtimeVarRef;if(!t)throw new Error;null!==t.pathForCount&&this.Error(`Should be '${ft.name}'(-> '${this._variableReferenceToCount.name}). Usage without the '->' only makes sense for variable targets.`)}}}ft.IsBuiltIn=t=>!!j.CallExistsWithName(t)||("CHOICE_COUNT"===t||"TURNS_SINCE"===t||"TURNS"===t||"RANDOM"===t||"SEED_RANDOM"===t||"LIST_VALUE"===t||"LIST_RANDOM"===t||"READ_COUNT"===t);class gt extends L{get subExpressions(){return this.content}constructor(t){super(),this.GenerateIntoContainer=t=>{let e=!0;for(const n of this.subExpressions)n.GenerateIntoContainer(t),e||t.AddContent(j.CallWithName("&&")),e=!1},this.AddContent(t)}get typeName(){return"MultipleConditionExpression"}}class Ct extends L{get runtimeDivert(){if(!this._runtimeDivert)throw new Error;return this._runtimeDivert}get runtimeDivertTargetValue(){if(!this._runtimeDivertTargetValue)throw new Error;return this._runtimeDivertTargetValue}constructor(t){super(),this._runtimeDivert=null,this._runtimeDivertTargetValue=null,this.GenerateIntoContainer=t=>{this.divert.GenerateRuntimeObject(),this._runtimeDivert=this.divert.runtimeDivert,this._runtimeDivertTargetValue=new O,t.AddContent(this.runtimeDivertTargetValue)},this.Equals=t=>{const e=r(t,Ct);if(!e||!this.divert.target||!e.divert.target)return!1;return this.divert.target.dotSeparatedComponents===e.divert.target.dotSeparatedComponents},this.divert=this.AddContent(t)}get typeName(){return"DivertTarget"}ResolveReferences(t){if(super.ResolveReferences(t),this.divert.isDone||this.divert.isEnd)return void this.Error("Can't use -> DONE or -> END as variable divert targets",this);let e=this;for(;e&&e instanceof L;){let t=!1,n=!1;const i=e.parent;if(i instanceof G){const e=i;"=="!==e.opName&&"!="!==e.opName?t=!0:(e.leftExpression instanceof Ct||e.leftExpression instanceof mt)&&(e.rightExpression instanceof Ct||e.rightExpression instanceof mt)||(t=!0),n=!0}else if(i instanceof ft){const e=i;e.isTurnsSince||e.isReadCount||(t=!0),n=!0}else(i instanceof L||i instanceof gt||i instanceof X&&i.condition===e||i instanceof nt||i instanceof Pt)&&(t=!0,n=!0);if(t&&this.Error(`Can't use a divert target like that. Did you intend to call '${this.divert.target}' as a function: likeThis(), or check the read count: likeThis, with no arrows?`,this),n)break;e=i}if(this.runtimeDivert.hasVariableTarget){if(!this.divert.target)throw new Error;this.Error(`Since '${this.divert.target.dotSeparatedComponents}' is a variable, it shouldn't be preceded by '->' here.`)}this.runtimeDivert.targetPath&&(this.runtimeDivertTargetValue.targetPath=this.runtimeDivert.targetPath);let n=this.divert.targetContent;if(null!==n){let t=n.containerForCounting;if(null!==t){const e=r(this.parent,ft);e&&e.isTurnsSince||(t.visitsShouldBeCounted=!0),t.turnIndexShouldBeCounted=!0}let e=r(n,ct);if(null!=e&&null!==e.args)for(const t of e.args)t.isByReference&&this.Error(`Can't store a divert target to a knot or function that has by-reference arguments ('${e.identifier}' has 'ref ${t.identifier}').`)}}}class vt extends c{get runtimeDivert(){if(!this._runtimeDivert)throw new Error;return this._runtimeDivert}set runtimeDivert(t){this._runtimeDivert=t}get isEnd(){return Boolean(this.target&&"END"===this.target.dotSeparatedComponents)}get isDone(){return Boolean(this.target&&"DONE"===this.target.dotSeparatedComponents)}constructor(t,e){super(),this.args=[],this.target=null,this.targetContent=null,this._runtimeDivert=null,this.isFunctionCall=!1,this.isEmpty=!1,this.isTunnel=!1,this.isThread=!1,this.GenerateRuntimeObject=()=>{if(this.isEnd)return D.End();if(this.isDone)return D.Done();this.runtimeDivert=new H,this.ResolveTargetContent(),this.CheckArgumentValidity();const t=null!==this.args&&this.args.length>0;if(t||this.isFunctionCall||this.isTunnel||this.isThread){const e=new k;if(t){this.isFunctionCall||e.AddContent(D.EvalStart());let t=null;this.targetContent&&(t=this.targetContent.args);for(let n=0;n<this.args.length;++n){const i=this.args[n];let s=null;if(t&&n<t.length&&(s=t[n]),s&&s.isByReference){const t=r(i,mt);if(!t){this.Error(`Expected variable name to pass by reference to 'ref ${s.identifier}' but saw ${i}`);break}const n=new ot(t.pathIdentifiers);if(n.ResolveFromContext(this)){this.Error(`can't pass a read count by reference. '${n.dotSeparatedComponents}' is a knot/stitch/label, but '${this.target.dotSeparatedComponents}' requires the name of a VAR to be passed.`);break}const a=new F(t.name);e.AddContent(a)}else i.GenerateIntoContainer(e)}this.isFunctionCall||e.AddContent(D.EvalEnd())}return this.isThread?e.AddContent(D.StartThread()):(this.isFunctionCall||this.isTunnel)&&(this.runtimeDivert.pushesToStack=!0,this.runtimeDivert.stackPushType=this.isFunctionCall?g.Function:g.Tunnel),e.AddContent(this.runtimeDivert),e}return this.runtimeDivert},this.PathAsVariableName=()=>this.target?this.target.firstComponent:null,this.ResolveTargetContent=()=>{if(!this.isEmpty&&!this.isEnd&&null===this.targetContent){let t=this.PathAsVariableName();if(null!==t){const e=r(ht(this),ct);if(e){const n=e.ResolveVariableWithName(t,this);if(n.found){if(n.isArgument&&n.ownerFlow&&n.ownerFlow.args){let e=n.ownerFlow.args.find((e=>{var n;return(null===(n=e.identifier)||void 0===n?void 0:n.name)==t}));e&&!e.isDivertTarget&&this.Error(`Since '${e.identifier}' is used as a variable divert target (on ${this.debugMetadata}), it should be marked as: -> ${e.identifier}`,n.ownerFlow)}return void(this.runtimeDivert.variableDivertName=t)}}}if(!this.target)throw new Error;this.targetContent=this.target.ResolveFromContext(this)}},this.CheckArgumentValidity=()=>{if(this.isEmpty)return;let t=0;if(null!==this.args&&this.args.length>0&&(t=this.args.length),null===this.targetContent)return;const e=r(this.targetContent,ct);if(!(0!==t||null!==e&&e.hasParameters))return;if(null===e&&t>0)return void this.Error("target needs to be a knot or stitch in order to pass arguments");if(null!==e&&(null===e.args||!e.args&&t>0))return void this.Error(`target (${e.name}) doesn't take parameters`);if(this.parent instanceof Ct)return void(t>0&&this.Error("can't store arguments in a divert target variable"));const n=e.args.length;if(n!==t){let i;return i=0===t?"but there weren't any passed to it":t<n?`but only got ${t}`:`but got ${t}`,void this.Error(`to '${e.identifier}' requires ${n} arguments, ${i}`)}for(let t=0;t<n;++t){const n=e.args[t],i=this.args[t];if(n.isDivertTarget){let t=r(i,mt);if(i instanceof Ct||null!==t){if(t){const e=new ot(t.pathIdentifiers);e.ResolveFromContext(t)&&this.Error(`Passing read count of '${e.dotSeparatedComponents}' instead of a divert target. You probably meant '${e}'`)}}else this.Error(`Target '${e.identifier}' expects a divert target for the parameter named -> ${n.identifier} but saw ${i}`,i)}}null!==e||this.Error("Can't call as a function or with arguments unless it's a knot or stitch")},this.CheckExternalArgumentValidity=t=>{const e=this.target?this.target.firstComponent:null,n=t.externals.get(e);if(!n)throw new Error("external not found");const i=n.argumentNames.length;let r=0;this.args&&(r=this.args.length),r!==i&&this.Error(`incorrect number of arguments sent to external function '${e}'. Expected ${i} but got ${r}`)},this.toString=()=>{let t="";return null===this.target?"-> <empty divert>":(t+=this.target.toString(),this.isTunnel&&(t+=" ->"),this.isFunctionCall&&(t+=" ()"),t)},t&&(this.target=t),e&&(this.args=e,this.AddContent(e))}get typeName(){return"Divert"}ResolveReferences(t){if(this.isEmpty||this.isEnd||this.isDone)return;if(!this.runtimeDivert)throw new Error;this.targetContent&&(this.runtimeDivert.targetPath=this.targetContent.runtimePath),super.ResolveReferences(t);let e=r(this.targetContent,ct);e&&(!e.isFunction&&this.isFunctionCall?super.Error(`${e.identifier} hasn't been marked as a function, but it's being called as one. Do you need to declare the knot as '== function ${e.identifier} =='?`):!e.isFunction||this.isFunctionCall||this.parent instanceof Ct||super.Error(e.identifier+" can't be diverted to. It can only be called as a function since it's been marked as such: '"+e.identifier+"(...)'"));const n=null!==this.targetContent;let i=!1,s=!1;if(!this.target)throw new Error;if(1===this.target.numberOfComponents){if(!this.target.firstComponent)throw new Error;if(i=ft.IsBuiltIn(this.target.firstComponent),s=t.IsExternal(this.target.firstComponent),i||s)return this.isFunctionCall||super.Error(`${this.target.firstComponent} must be called as a function: ~ ${this.target.firstComponent}()`),void(s&&(this.runtimeDivert.isExternal=!0,null!==this.args&&(this.runtimeDivert.externalArgs=this.args.length),this.runtimeDivert.pushesToStack=!1,this.runtimeDivert.targetPath=new p(this.target.firstComponent),this.CheckExternalArgumentValidity(t)))}null==this.runtimeDivert.variableDivertName&&(n||i||s||this.Error(`target not found: '${this.target}'`))}Error(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==this&&e?super.Error(t,e):this.isFunctionCall?super.Error(`Function call ${t}`,e,n):super.Error(`Divert ${t}`,e,n)}}class St{constructor(t,e){this.divert=t,this.targetRuntimeObj=e}}class yt{constructor(t,e){this.divert=t,this.targetContent=e}}var bt;!function(t){t[t.Stopping=1]="Stopping",t[t.Cycle=2]="Cycle",t[t.Shuffle=4]="Shuffle",t[t.Once=8]="Once"}(bt||(bt={}));class wt extends c{constructor(t,e){super(),this.sequenceType=e,this._sequenceDivertsToResolve=[],this.GenerateRuntimeObject=()=>{const t=new k;t.visitsShouldBeCounted=!0,t.countingAtStartOnly=!0,this._sequenceDivertsToResolve=[],t.AddContent(D.EvalStart()),t.AddContent(D.VisitIndex());const e=(this.sequenceType&bt.Once)>0,n=(this.sequenceType&bt.Cycle)>0,i=(this.sequenceType&bt.Stopping)>0,r=(this.sequenceType&bt.Shuffle)>0;let s=this.sequenceElements.length;if(e&&(s+=1),i||e?(t.AddContent(new P(s-1)),t.AddContent(j.CallWithName("MIN"))):n&&(t.AddContent(new P(this.sequenceElements.length)),t.AddContent(j.CallWithName("%"))),r){const n=D.NoOp();if(e||i){const e=i?this.sequenceElements.length-1:this.sequenceElements.length;t.AddContent(D.Duplicate()),t.AddContent(new P(e)),t.AddContent(j.CallWithName("=="));const r=new H;r.isConditional=!0,t.AddContent(r),this.AddDivertToResolve(r,n)}let r=this.sequenceElements.length;i&&(r-=1),t.AddContent(new P(r)),t.AddContent(D.SequenceShuffleIndex()),(e||i)&&t.AddContent(n)}t.AddContent(D.EvalEnd());const a=D.NoOp();for(let e=0;e<s;e+=1){t.AddContent(D.EvalStart()),t.AddContent(D.Duplicate()),t.AddContent(new P(e)),t.AddContent(j.CallWithName("==")),t.AddContent(D.EvalEnd());const n=new H;let i;if(n.isConditional=!0,t.AddContent(n),e<this.sequenceElements.length){i=this.sequenceElements[e].runtimeObject}else i=new k;i.name=`s${e}`,i.InsertContent(D.PopEvaluatedValue(),0);const r=new H;i.AddContent(r),t.AddToNamedContentOnly(i),this.AddDivertToResolve(n,i),this.AddDivertToResolve(r,a)}return t.AddContent(a),t},this.AddDivertToResolve=(t,e)=>{this._sequenceDivertsToResolve.push(new yt(t,e))},this.sequenceType=e,this.sequenceElements=[];for(const e of t){const t=e.content;let n=null;n=null===t||0===t.length?e:new At(t),this.sequenceElements.push(n),this.AddContent(n)}}get typeName(){return"Sequence"}ResolveReferences(t){super.ResolveReferences(t);for(const t of this._sequenceDivertsToResolve)t.divert.targetPath=t.targetContent.path}}class Et extends c{constructor(){super(...arguments),this._overrideDivertTarget=null,this._divertAfter=null,this.GenerateRuntimeObject=()=>{const t=new k;if(t.AddContent(D.EvalStart()),this.divertAfter){const e=this.divertAfter.GenerateRuntimeObject(),n=e;if(n){const e=this.divertAfter.args;if(null!==e&&e.length>0){let e=-1,i=-1;for(let t=0;t<n.content.length;t+=1){const r=n.content[t];r&&(-1==e&&r.commandType===D.CommandType.EvalStart?e=t:r.commandType===D.CommandType.EvalEnd&&(i=t))}for(let r=e+1;r<i;r+=1){n.content[r].parent=null,t.AddContent(n.content[r])}}}let i=r(e,H);if(null!=i&&i.hasVariableTarget){let e=new pt(i.variableDivertName);t.AddContent(e)}else this._overrideDivertTarget=new O,t.AddContent(this._overrideDivertTarget)}else t.AddContent(new V);return t.AddContent(D.EvalEnd()),t.AddContent(D.PopTunnel()),t},this.toString=()=>` -> ${this._divertAfter}`}get divertAfter(){return this._divertAfter}set divertAfter(t){this._divertAfter=t,this._divertAfter&&this.AddContent(this._divertAfter)}get typeName(){return"TunnelOnwards"}ResolveReferences(t){super.ResolveReferences(t),this.divertAfter&&this.divertAfter.targetContent&&(this._overrideDivertTarget.targetPath=this.divertAfter.targetContent.runtimePath)}}let _t=class{constructor(t,e){this._name=t||"",this._items=null,this._itemNameToValues=e||new Map}get name(){return this._name}get items(){if(null==this._items){this._items=new Map;for(let[t,e]of this._itemNameToValues){let n=new b(this.name,t);this._items.set(n.serialized(),e)}}return this._items}ValueForItem(t){if(!t.itemName)return 0;let e=this._itemNameToValues.get(t.itemName);return void 0!==e?e:0}ContainsItem(t){return!!t.itemName&&(t.originName==this.name&&this._itemNameToValues.has(t.itemName))}ContainsItemWithName(t){return this._itemNameToValues.has(t)}TryGetItemWithValue(t,e){for(let[e,n]of this._itemNameToValues)if(n==t)return{result:new b(this.name,e),exists:!0};return{result:b.Null,exists:!1}}TryGetValueForItem(t,e){if(!t.itemName)return{result:0,exists:!1};let n=this._itemNameToValues.get(t.itemName);return n?{result:n,exists:!0}:{result:0,exists:!1}}};class Tt extends c{get typeName(){return"ListDefinition"}get runtimeListDefinition(){var t;const e=new Map;for(const t of this.itemDefinitions)e.has(t.name)?this.Error(`List '${this.identifier}' contains duplicate items called '${t.name}'`):e.set(t.name,t.seriesValue);return new _t((null===(t=this.identifier)||void 0===t?void 0:t.name)||"",e)}constructor(t){super(),this.itemDefinitions=t,this.identifier=null,this.variableAssignment=null,this._elementsByName=null,this.ItemNamed=t=>{if(null===this._elementsByName){this._elementsByName=new Map;for(const t of this.itemDefinitions)this._elementsByName.set(t.name,t)}return this._elementsByName.get(t)||null},this.GenerateRuntimeObject=()=>{var t,e;const n=new w;for(const e of this.itemDefinitions)if(e.inInitialList){const i=new b((null===(t=this.identifier)||void 0===t?void 0:t.name)||null,e.name||null);n.Add(i,e.seriesValue)}return n.SetInitialOriginName((null===(e=this.identifier)||void 0===e?void 0:e.name)||""),new W(n)};let e=1;for(const t of this.itemDefinitions)null!==t.explicitValue&&(e=t.explicitValue),t.seriesValue=e,e+=1;this.AddContent(t)}ResolveReferences(t){super.ResolveReferences(t),t.CheckForNamingCollisions(this,this.identifier,J.List)}}class xt extends c{get variableName(){return this.variableIdentifier.name}get typeName(){return this.isNewTemporaryDeclaration?"temp":this.isGlobalDeclaration?null!==this.listDefinition?"LIST":"VAR":"variable assignment"}get isDeclaration(){return this.isGlobalDeclaration||this.isNewTemporaryDeclaration}constructor(t){let{assignedExpression:e,isGlobalDeclaration:n,isTemporaryNewDeclaration:i,listDef:r,variableIdentifier:s}=t;super(),this._runtimeAssignment=null,this.expression=null,this.listDefinition=null,this.GenerateRuntimeObject=()=>{let t=null;if(this.isGlobalDeclaration?t=this.story:this.isNewTemporaryDeclaration&&(t=ht(this)),t&&t.AddNewVariableDeclaration(this),this.isGlobalDeclaration)return null;const e=new k;return this.expression?e.AddContent(this.expression.runtimeObject):this.listDefinition&&e.AddContent(this.listDefinition.runtimeObject),this._runtimeAssignment=new z(this.variableName,this.isNewTemporaryDeclaration),e.AddContent(this._runtimeAssignment),e},this.toString=()=>`${this.isGlobalDeclaration?"VAR":this.isNewTemporaryDeclaration?"~ temp":""} ${this.variableName}`,this.variableIdentifier=s,this.isGlobalDeclaration=Boolean(n),this.isNewTemporaryDeclaration=Boolean(i),r instanceof Tt?(this.listDefinition=this.AddContent(r),this.listDefinition.variableAssignment=this,this.isGlobalDeclaration=!0):e&&(this.expression=this.AddContent(e))}ResolveReferences(t){if(super.ResolveReferences(t),this.isDeclaration&&null===this.listDefinition&&t.CheckForNamingCollisions(this,this.variableIdentifier,this.isGlobalDeclaration?J.Var:J.Temp),this.isGlobalDeclaration){const t=r(this.expression,mt);!t||t.isConstantReference||t.isListItemReference||this.Error("global variable assignments cannot refer to other variables, only literal values, constants and list items")}if(!this.isNewTemporaryDeclaration){const e=t.ResolveVariableWithName(this.variableName,this);e.found||(this.variableName in this.story.constants?this.Error(`Can't re-assign to a constant (do you need to use VAR when declaring '${this.variableName}'?)`,this):this.Error(`Variable could not be found to assign to: '${this.variableName}'`,this)),this._runtimeAssignment&&(this._runtimeAssignment.isGlobal=e.isGlobal)}}}class At extends c{get rootContainer(){return this._rootContainer||(this._rootContainer=this.GenerateRuntimeObject()),this._rootContainer}get namedWeavePoints(){return this._namedWeavePoints}get lastParsedSignificantObject(){if(0===this.content.length)return null;let t=null;for(let e=this.content.length-1;e>=0;--e){t=this.content[e];let n=r(t,it);if((!n||"\n"!==n.text)&&!this.IsGlobalDeclaration(t))break}const e=r(t,At);return e&&(t=e.lastParsedSignificantObject),t}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;super(),this.previousWeavePoint=null,this.addContentToPreviousWeavePoint=!1,this.hasSeenChoiceInSection=!1,this.currentContainer=null,this._unnamedGatherCount=0,this._choiceCount=0,this._rootContainer=null,this._namedWeavePoints=new Map,this.looseEnds=[],this.gatherPointsToResolve=[],this.ResolveWeavePointNaming=()=>{var t,e,n;const i=[...this.FindAll(at)((t=>!(null===t.name||void 0===t.name))),...this.FindAll(X)((t=>!(null===t.name||void 0===t.name)))];this._namedWeavePoints=new Map;for(const r of i){const i=this.namedWeavePoints.get((null===(t=r.identifier)||void 0===t?void 0:t.name)||"");if(i){const t=i instanceof at?"gather":"choice",e=i;this.Error(`A ${t} with the same label name '${r.name}' already exists in this context on line ${e.debugMetadata?e.debugMetadata.startLineNumber:"NO DEBUG METADATA AVAILABLE"}`,r)}(null===(e=r.identifier)||void 0===e?void 0:e.name)&&this.namedWeavePoints.set(null===(n=r.identifier)||void 0===n?void 0:n.name,r)}},this.ConstructWeaveHierarchyFromIndentation=()=>{let t=0;for(;t<this.content.length;){const e=this.content[t];if(e instanceof X||e instanceof at){const n=e.indentationDepth-1;if(n>this.baseIndentIndex){let e=t;for(;t<this.content.length;){const e=r(this.content[t],X)||r(this.content[t],at);if(null!==e){if(e.indentationDepth-1<=this.baseIndentIndex)break}t+=1}const i=t-e,s=this.content.slice(e,e+i);this.content.splice(e,i);const a=new At(s,n);this.InsertContent(e,a),t=e}}t+=1}},this.DetermineBaseIndentationFromContent=t=>{for(const e of t)if(e instanceof X||e instanceof at)return e.indentationDepth-1;return 0},this.GenerateRuntimeObject=()=>{this._rootContainer=new k,this.currentContainer=this._rootContainer,this.looseEnds=[],this.gatherPointsToResolve=[];for(const t of this.content)if(t instanceof X||t instanceof at)this.AddRuntimeForWeavePoint(t);else if(t instanceof At){const e=t;this.AddRuntimeForNestedWeave(e),this.gatherPointsToResolve.splice(0,0,...e.gatherPointsToResolve)}else this.AddGeneralRuntimeContent(t.runtimeObject);return this.PassLooseEndsToAncestors(),this._rootContainer},this.AddRuntimeForGather=t=>{const e=!this.hasSeenChoiceInSection;this.hasSeenChoiceInSection=!1;const n=t.runtimeContainer;if(t.name||(n.name=`g-${this._unnamedGatherCount}`,this._unnamedGatherCount+=1),e){if(!this.currentContainer)throw new Error;this.currentContainer.AddContent(n)}else this.rootContainer.AddToNamedContentOnly(n);for(const e of this.looseEnds){const i=e;if(i instanceof at){if(i.indentationDepth==t.indentationDepth)continue}let r=null;if(i instanceof vt)r=i.runtimeObject;else{r=new H;const t=i;if(!t.runtimeContainer)throw new Error;t.runtimeContainer.AddContent(r)}this.gatherPointsToResolve.push(new St(r,n))}this.looseEnds=[],this.currentContainer=n},this.AddRuntimeForWeavePoint=t=>{if(t instanceof at)this.AddRuntimeForGather(t);else if(t instanceof X){if(!this.currentContainer)throw new Error;this.previousWeavePoint instanceof at&&this.looseEnds.splice(this.looseEnds.indexOf(this.previousWeavePoint),1);const e=t;if(this.currentContainer.AddContent(e.runtimeObject),!e.innerContentContainer)throw new Error;e.innerContentContainer.name=`c-${this._choiceCount}`,this.currentContainer.AddToNamedContentOnly(e.innerContentContainer),this._choiceCount+=1,this.hasSeenChoiceInSection=!0}if(this.addContentToPreviousWeavePoint=!1,this.WeavePointHasLooseEnd(t)){this.looseEnds.push(t);r(t,X)&&(this.addContentToPreviousWeavePoint=!0)}this.previousWeavePoint=t},this.AddRuntimeForNestedWeave=t=>{this.AddGeneralRuntimeContent(t.rootContainer),null!==this.previousWeavePoint&&(this.looseEnds.splice(this.looseEnds.indexOf(this.previousWeavePoint),1),this.addContentToPreviousWeavePoint=!1)},this.AddGeneralRuntimeContent=t=>{if(null!==t)if(this.addContentToPreviousWeavePoint){if(!this.previousWeavePoint||!this.previousWeavePoint.runtimeContainer)throw new Error;this.previousWeavePoint.runtimeContainer.AddContent(t)}else{if(!this.currentContainer)throw new Error;this.currentContainer.AddContent(t)}},this.PassLooseEndsToAncestors=()=>{if(0===this.looseEnds.length)return;let t=null,e=null,n=!1;for(let i=this.parent;null!==i;i=i.parent){const s=r(i,At);s&&(n||null!==t||(t=s),n&&null===e&&(e=s)),(i instanceof wt||i instanceof nt)&&(n=!0)}if(null!==t||null!==e)for(let i=this.looseEnds.length-1;i>=0;i-=1){const r=this.looseEnds[i];let s=!1;if(n){if(r instanceof X&&null!==t)t.ReceiveLooseEnd(r),s=!0;else if(!(r instanceof X)){const n=t||e;null!==n&&(n.ReceiveLooseEnd(r),s=!0)}}else(null==t?void 0:t.hasOwnProperty("ReceiveLooseEnd"))&&t.ReceiveLooseEnd(r),s=!0;s&&this.looseEnds.splice(i,1)}},this.ReceiveLooseEnd=t=>{this.looseEnds.push(t)},this.WeavePointNamed=t=>{if(!this.namedWeavePoints)return null;let e=this.namedWeavePoints.get(t);return e||null},this.IsGlobalDeclaration=t=>{const e=r(t,xt);if(e&&e.isGlobalDeclaration&&e.isDeclaration)return!0;return!!r(t,rt)},this.ContentThatFollowsWeavePoint=t=>{const e=[],n=t;if(null!==n.content)for(const t of n.content)this.IsGlobalDeclaration(t)||e.push(t);const i=r(n.parent,At);if(null===i)throw new Error("Expected weave point parent to be weave?");for(let t=i.content.indexOf(n)+1;t<i.content.length;t+=1){const n=i.content[t];if(!this.IsGlobalDeclaration(n)){if(n instanceof X||n instanceof at)break;if(n instanceof At)break;e.push(n)}}return e},this.ValidateTermination=t=>{if(this.lastParsedSignificantObject instanceof d)return;if(null!==this.looseEnds&&this.looseEnds.length>0)for(const e of this.looseEnds){const n=this.ContentThatFollowsWeavePoint(e);this.ValidateFlowOfObjectsTerminates(n,e,t)}else{for(const t of this.content)if(t instanceof X||t instanceof vt)return;this.ValidateFlowOfObjectsTerminates(this.content,this,t)}},this.BadNestedTerminationHandler=t=>{let e=null;for(let n=t.parent;null!==n;n=n.parent)if(n instanceof wt||n instanceof nt){e=r(n,nt);break}let n="Choices nested in conditionals or sequences need to explicitly divert afterwards.";if(null!==e){1===e.FindAll(X)().length&&(n=`Choices with conditions should be written: '* {condition} choice'. Otherwise, ${n.toLowerCase()}`)}this.Error(n,t)},this.ValidateFlowOfObjectsTerminates=(t,e,n)=>{let i=!1,r=e;for(const e of t){if(null!==e.Find(vt)((t=>!(t.isThread||t.isTunnel||t.isFunctionCall||t.parent instanceof Ct)))&&(i=!0),null!=e.Find(Et)()){i=!0;break}r=e}if(!i){if(r instanceof d)return;n(r)}},this.WeavePointHasLooseEnd=t=>{if(null===t.content)return!0;for(let e=t.content.length-1;e>=0;--e){let n=r(t.content[e],vt);if(n){if(!(n.isThread||n.isTunnel||n.isFunctionCall))return!1}}return!0},this.CheckForWeavePointNamingCollisions=()=>{if(!this.namedWeavePoints)return;const t=[];for(const e of this.ancestry){const n=r(e,ct);if(!n)break;t.push(n)}for(const[e,n]of this.namedWeavePoints)for(const i of t){const t=i.ContentWithNameAtLevel(e);if(t&&t!==n){const i=`${n.GetType()} '${e}' has the same label name as a ${t.GetType()} (on ${t.debugMetadata})`;this.Error(i,n)}}},this.baseIndentIndex=-1==e?this.DetermineBaseIndentationFromContent(t):e,this.AddContent(t),this.ConstructWeaveHierarchyFromIndentation()}get typeName(){return"Weave"}ResolveReferences(t){if(super.ResolveReferences(t),null!==this.looseEnds&&this.looseEnds.length>0){let t=!1;for(let e=this.parent;null!==e;e=e.parent)if(e instanceof wt||e instanceof nt){t=!0;break}t&&this.ValidateTermination(this.BadNestedTerminationHandler)}for(const t of this.gatherPointsToResolve)t.divert.targetPath=t.targetRuntimeObj.path;this.CheckForWeavePointNamingCollisions()}}class Pt extends c{get ownExpression(){return this._ownExpression}set ownExpression(t){this._ownExpression=t,this._ownExpression&&this.AddContent(this._ownExpression)}constructor(t){super(),this._contentContainer=null,this._conditionalDivert=null,this._ownExpression=null,this._innerWeave=null,this.isTrueBranch=!1,this.matchingEquality=!1,this.isElse=!1,this.isInline=!1,this.returnDivert=null,this.GenerateRuntimeObject=()=>{if(this._innerWeave)for(const t of this._innerWeave.content){const e=r(t,it);e&&e.text.startsWith("else:")&&this.Warning("Saw the text 'else:' which is being treated as content. Did you mean '- else:'?",e)}const t=new k,e=this.matchingEquality&&!this.isElse;if(e&&t.AddContent(D.Duplicate()),this._conditionalDivert=new H,this._conditionalDivert.isConditional=!this.isElse,!this.isTrueBranch&&!this.isElse){const e=null!==this.ownExpression;e&&t.AddContent(D.EvalStart()),this.ownExpression&&this.ownExpression.GenerateIntoContainer(t),this.matchingEquality&&t.AddContent(j.CallWithName("==")),e&&t.AddContent(D.EvalEnd())}return t.AddContent(this._conditionalDivert),this._contentContainer=this.GenerateRuntimeForContent(),this._contentContainer.name="b",this.isInline||this._contentContainer.InsertContent(new I("\n"),0),(e||this.isElse&&this.matchingEquality)&&this._contentContainer.InsertContent(D.PopEvaluatedValue(),0),t.AddToNamedContentOnly(this._contentContainer),this.returnDivert=new H,this._contentContainer.AddContent(this.returnDivert),t},this.GenerateRuntimeForContent=()=>null===this._innerWeave?new k:this._innerWeave.rootContainer,t&&(this._innerWeave=new At(t),this.AddContent(this._innerWeave))}get typeName(){return"ConditionalSingleBranch"}ResolveReferences(t){if(!this._conditionalDivert||!this._contentContainer)throw new Error;this._conditionalDivert.targetPath=this._contentContainer.path,super.ResolveReferences(t)}}var Nt;!function(t){t[t.ParsingString=1]="ParsingString",t[t.TagActive=2]="TagActive"}(Nt||(Nt={}));class It{constructor(){this.startLineNumber=0,this.endLineNumber=0,this.startCharacterNumber=0,this.endCharacterNumber=0,this.fileName=null,this.sourceName=null}Merge(t){let e=new It;return e.fileName=this.fileName,e.sourceName=this.sourceName,this.startLineNumber<t.startLineNumber?(e.startLineNumber=this.startLineNumber,e.startCharacterNumber=this.startCharacterNumber):this.startLineNumber>t.startLineNumber?(e.startLineNumber=t.startLineNumber,e.startCharacterNumber=t.startCharacterNumber):(e.startLineNumber=this.startLineNumber,e.startCharacterNumber=Math.min(this.startCharacterNumber,t.startCharacterNumber)),this.endLineNumber>t.endLineNumber?(e.endLineNumber=this.endLineNumber,e.endCharacterNumber=this.endCharacterNumber):this.endLineNumber<t.endLineNumber?(e.endLineNumber=t.endLineNumber,e.endCharacterNumber=t.endCharacterNumber):(e.endLineNumber=this.endLineNumber,e.endCharacterNumber=Math.max(this.endCharacterNumber,t.endCharacterNumber)),e}toString(){return null!==this.fileName?`line ${this.startLineNumber} of ${this.fileName}"`:"line "+this.startLineNumber}}class Ot extends c{get name(){var t;return(null===(t=this.identifier)||void 0===t?void 0:t.name)||null}constructor(t,e){super(),this.identifier=t,this.argumentNames=e,this.GenerateRuntimeObject=()=>(this.story.AddExternal(this),null)}get typeName(){return"EXTERNAL"}toString(){var t;return`EXTERNAL ${null===(t=this.identifier)||void 0===t?void 0:t.name}`}}class Ft{constructor(t,e,n){this.name=t,this.args=e,this.isFunction=n}}class Wt extends c{constructor(t){super(),this._objToWrap=t,this.GenerateRuntimeObject=()=>this._objToWrap}}let Rt=class extends Wt{constructor(t){super(t)}get typeName(){return"Glue"}};class kt extends S{toString(){return"Glue"}}class Dt extends L{constructor(t,e,n){super(),this.varIdentifier=t,this._runtimeAssignment=null,this.expression=null,this.GenerateIntoContainer=t=>{var e,n;t.AddContent(new pt((null===(e=this.varIdentifier)||void 0===e?void 0:e.name)||null)),this.expression?this.expression.GenerateIntoContainer(t):t.AddContent(new P(1)),t.AddContent(j.CallWithName(this.isInc?"+":"-")),this._runtimeAssignment=new z((null===(n=this.varIdentifier)||void 0===n?void 0:n.name)||null,!1),t.AddContent(this._runtimeAssignment)},this.toString=()=>{var t,e;return this.expression?`${null===(t=this.varIdentifier)||void 0===t?void 0:t.name}${this.isInc?" += ":" -= "}${this.expression}`:`${null===(e=this.varIdentifier)||void 0===e?void 0:e.name}`+(this.isInc?"++":"--")},e instanceof L?(this.expression=e,this.AddContent(this.expression),this.isInc=Boolean(n)):this.isInc=e}get typeName(){return"IncDecExpression"}ResolveReferences(t){var e;super.ResolveReferences(t);const n=t.ResolveVariableWithName((null===(e=this.varIdentifier)||void 0===e?void 0:e.name)||"",this);if(n.found||this.Error(`variable for ${this.incrementDecrementWord} could not be found: '${this.varIdentifier}' after searching: {this.descriptionOfScope}`),!this._runtimeAssignment)throw new Error;this._runtimeAssignment.isGlobal=n.isGlobal,this.parent instanceof At||this.parent instanceof ct||this.parent instanceof dt||this.Error(`Can't use ${this.incrementDecrementWord} as sub-expression`)}get incrementDecrementWord(){return this.isInc?"increment":"decrement"}}class Lt extends c{constructor(t){super(),this.includedStory=t,this.GenerateRuntimeObject=()=>null}get typeName(){return"IncludedFile"}}class Vt{constructor(t,e,n){this.type=t,this.precedence=e,this.requireWhitespace=n,this.toString=()=>this.type}}class jt extends ct{get flowLevel(){return st.Knot}constructor(t,e,n,i){super(t,e,n,i)}get typeName(){return this.isFunction?"Function":"Knot"}ResolveReferences(t){super.ResolveReferences(t);let e=this.story;for(const t in this.subFlowsByName){const n=e.ContentWithNameAtLevel(t,st.Knot,!1);if(n){const e=this.subFlowsByName.get(t),i=`Stitch '${e?e.name:"NO STITCH FOUND"}' has the same name as a knot (on ${n.debugMetadata})`;this.Error(i,e)}}}}class Bt extends L{constructor(t){super(),this.itemIdentifierList=t,this.GenerateIntoContainer=t=>{var e,n;const i=new w;if(null!=this.itemIdentifierList)for(const t of this.itemIdentifierList){const r=(null===(e=null==t?void 0:t.name)||void 0===e?void 0:e.split("."))||[];let s=null,a="";r.length>1?(s=r[0],a=r[1]):a=r[0];const o=this.story.ResolveListItem(s,a,this);if(null===o)null===s?this.Error(`Could not find list definition that contains item '${t}'`):this.Error(`Could not find list item ${t}`);else{if(null==o.parent)return void this.Error(`Could not find list definition for item ${t}`);s||(s=(null===(n=o.parent.identifier)||void 0===n?void 0:n.name)||null);const e=new b(s,o.name||null);i.has(e.serialized())?this.Warning(`Duplicate of item '${t}' in list.`):i.Add(e,o.seriesValue)}}t.AddContent(new W(i))}}get typeName(){return"List"}}class Mt extends c{get fullName(){var t;const e=this.parent;if(null===e)throw new Error("Can't get full name without a parent list.");return`${null===(t=e.identifier)||void 0===t?void 0:t.name}.${this.name}`}get typeName(){return"ListElement"}get name(){var t;return(null===(t=this.indentifier)||void 0===t?void 0:t.name)||null}constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),this.indentifier=t,this.inInitialList=e,this.explicitValue=n,this.seriesValue=0,this.parent=null,this.GenerateRuntimeObject=()=>{throw new Error("Not implemented.")},this.toString=()=>this.fullName,this.parent=this.parent}ResolveReferences(t){super.ResolveReferences(t),t.CheckForNamingCollisions(this,this.indentifier,J.ListItem)}}var Gt;!function(t){t[t.InnerBlock=0]="InnerBlock",t[t.Stitch=1]="Stitch",t[t.Knot=2]="Knot",t[t.Top=3]="Top"}(Gt||(Gt={}));class $t extends ct{get flowLevel(){return st.Stitch}constructor(t,e,n,i){super(t,e,n,i),this.baseToString=this.toString,this.toString=()=>`${null!==this.parent?this.parent+" > ":""}${this.baseToString()}`}get typeName(){return"Stitch"}}let qt=class extends S{constructor(t){super(),this.text=t.toString()||""}toString(){return"# "+this.text}};class Ut extends S{constructor(){super(...arguments),this.text="",this.index=0,this.threadAtGeneration=null,this.sourcePath="",this.targetPath=null,this.isInvisibleDefault=!1,this.tags=null,this.originalThreadIndex=0}get pathStringOnChoice(){return null===this.targetPath?v("Choice.targetPath"):this.targetPath.toString()}set pathStringOnChoice(t){this.targetPath=new p(t)}Clone(){let t=new Ut;return t.text=this.text,t.sourcePath=this.sourcePath,t.index=this.index,t.targetPath=this.targetPath,t.originalThreadIndex=this.originalThreadIndex,t.isInvisibleDefault=this.isInvisibleDefault,null!==this.threadAtGeneration&&(t.threadAtGeneration=this.threadAtGeneration.Copy()),t}}class Kt{constructor(t){this._lists=new Map,this._allUnambiguousListValueCache=new Map;for(let e of t){this._lists.set(e.name,e);for(let[t,n]of e.items){let e=b.fromSerializedKey(t),i=new W(e,n);if(!e.itemName)throw new Error("item.itemName is null or undefined.");this._allUnambiguousListValueCache.set(e.itemName,i),this._allUnambiguousListValueCache.set(e.fullName,i)}}}get lists(){let t=[];for(let[,e]of this._lists)t.push(e);return t}TryListGetDefinition(t,e){if(null===t)return{result:e,exists:!1};let n=this._lists.get(t);return n?{result:n,exists:!0}:{result:e,exists:!1}}FindSingleItemListWithName(t){if(null===t)return v("name");let e=this._allUnambiguousListValueCache.get(t);return void 0!==e?e:null}}class Ht{static JArrayToRuntimeObjList(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.length;e&&n--;let i=[];for(let e=0;e<n;e++){let n=t[e],r=this.JTokenToRuntimeObject(n);if(null===r)return v("runtimeObj");i.push(r)}return i}static WriteDictionaryRuntimeObjs(t,e){t.WriteObjectStart();for(let[n,i]of e)t.WritePropertyStart(n),this.WriteRuntimeObject(t,i),t.WritePropertyEnd();t.WriteObjectEnd()}static WriteListRuntimeObjs(t,e){t.WriteArrayStart();for(let n of e)this.WriteRuntimeObject(t,n);t.WriteArrayEnd()}static WriteIntDictionary(t,e){t.WriteObjectStart();for(let[n,i]of e)t.WriteIntProperty(n,i);t.WriteObjectEnd()}static WriteRuntimeObject(t,e){let n=r(e,k);if(n)return void this.WriteRuntimeContainer(t,n);let i=r(e,H);if(i){let e,n="->";return i.isExternal?n="x()":i.pushesToStack&&(i.stackPushType==g.Function?n="f()":i.stackPushType==g.Tunnel&&(n="->t->")),e=i.hasVariableTarget?i.variableDivertName:i.targetPathString,t.WriteObjectStart(),t.WriteProperty(n,e),i.hasVariableTarget&&t.WriteProperty("var",!0),i.isConditional&&t.WriteProperty("c",!0),i.externalArgs>0&&t.WriteIntProperty("exArgs",i.externalArgs),void t.WriteObjectEnd()}let s=r(e,U);if(s)return t.WriteObjectStart(),t.WriteProperty("*",s.pathStringOnChoice),t.WriteIntProperty("flg",s.flags),void t.WriteObjectEnd();let a=r(e,A);if(a)return void t.WriteBool(a.value);let o=r(e,P);if(o)return void t.WriteInt(o.value);let l=r(e,N);if(l)return void t.WriteFloat(l.value);let h=r(e,I);if(h)return void(h.isNewline?t.Write("\n",!1):(t.WriteStringStart(),t.WriteStringInner("^"),t.WriteStringInner(h.value),t.WriteStringEnd()));let u=r(e,W);if(u)return void this.WriteInkList(t,u);let c=r(e,O);if(c)return t.WriteObjectStart(),null===c.value?v("divTargetVal.value"):(t.WriteProperty("^->",c.value.componentsString),void t.WriteObjectEnd());let d=r(e,F);if(d)return t.WriteObjectStart(),t.WriteProperty("^var",d.value),t.WriteIntProperty("ci",d.contextIndex),void t.WriteObjectEnd();if(r(e,kt))return void t.Write("<>");let p=r(e,D);if(p)return void t.Write(Ht._controlCommandNames[p.commandType]);let m=r(e,j);if(m){let e=m.name;return"^"==e&&(e="L^"),void t.Write(e)}let f=r(e,pt);if(f){t.WriteObjectStart();let e=f.pathStringForCount;return null!=e?t.WriteProperty("CNT?",e):t.WriteProperty("VAR?",f.name),void t.WriteObjectEnd()}let C=r(e,z);if(C){t.WriteObjectStart();let e=C.isGlobal?"VAR=":"temp=";return t.WriteProperty(e,C.variableName),C.isNewDeclaration||t.WriteProperty("re",!0),void t.WriteObjectEnd()}if(r(e,V))return void t.Write("void");let S=r(e,qt);if(S)return t.WriteObjectStart(),t.WriteProperty("#",S.text),void t.WriteObjectEnd();let y=r(e,Ut);if(!y)throw new Error("Failed to convert runtime object to Json token: "+e);this.WriteChoice(t,y)}static JObjectToDictionaryRuntimeObjs(t){let e=new Map;for(let n in t)if(t.hasOwnProperty(n)){let i=this.JTokenToRuntimeObject(t[n]);if(null===i)return v("inkObject");e.set(n,i)}return e}static JObjectToIntDictionary(t){let e=new Map;for(let n in t)t.hasOwnProperty(n)&&e.set(n,parseInt(t[n]));return e}static JTokenToRuntimeObject(t){if("number"==typeof t&&!isNaN(t)||"boolean"==typeof t)return x.Create(t);if("string"==typeof t){let e=t.toString(),n=e[0];if("^"==n)return new I(e.substring(1));if("\n"==n&&1==e.length)return new I("\n");if("<>"==e)return new kt;for(let t=0;t<Ht._controlCommandNames.length;++t){if(e==Ht._controlCommandNames[t])return new D(t)}if("L^"==e&&(e="^"),j.CallExistsWithName(e))return j.CallWithName(e);if("->->"==e)return D.PopTunnel();if("~ret"==e)return D.PopFunction();if("void"==e)return new V}if("object"==typeof t&&!Array.isArray(t)){let e,n=t;if(n["^->"])return e=n["^->"],new O(new p(e.toString()));if(n["^var"]){e=n["^var"];let t=new F(e.toString());return"ci"in n&&(e=n.ci,t.contextIndex=parseInt(e)),t}let i=!1,r=!1,s=g.Function,a=!1;if((e=n["->"])?i=!0:(e=n["f()"])?(i=!0,r=!0,s=g.Function):(e=n["->t->"])?(i=!0,r=!0,s=g.Tunnel):(e=n["x()"])&&(i=!0,a=!0,r=!1,s=g.Function),i){let t=new H;t.pushesToStack=r,t.stackPushType=s,t.isExternal=a;let i=e.toString();return(e=n.var)?t.variableDivertName=i:t.targetPathString=i,t.isConditional=!!n.c,a&&(e=n.exArgs)&&(t.externalArgs=parseInt(e)),t}if(e=n["*"]){let t=new U;return t.pathStringOnChoice=e.toString(),(e=n.flg)&&(t.flags=parseInt(e)),t}if(e=n["VAR?"])return new pt(e.toString());if(e=n["CNT?"]){let t=new pt;return t.pathStringForCount=e.toString(),t}let o=!1,l=!1;if((e=n["VAR="])?(o=!0,l=!0):(e=n["temp="])&&(o=!0,l=!1),o){let t=e.toString(),i=!n.re,r=new z(t,i);return r.isGlobal=l,r}if(void 0!==n["#"])return e=n["#"],new qt(e.toString());if(e=n.list){let t=e,i=new w;if(e=n.origins){let t=e;i.SetInitialOriginNames(t)}for(let e in t)if(t.hasOwnProperty(e)){let n=t[e],r=new b(e),s=parseInt(n);i.Add(r,s)}return new W(i)}if(null!=n.originalChoicePath)return this.JObjectToChoice(n)}if(Array.isArray(t))return this.JArrayToContainer(t);if(null==t)return null;throw new Error("Failed to convert token to runtime object: "+this.toJson(t,["parent"]))}static toJson(t,e,n){return JSON.stringify(t,((t,n)=>(null==e?void 0:e.some((e=>e===t)))?void 0:n),n)}static WriteRuntimeContainer(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.WriteArrayStart(),null===e)return v("container");for(let n of e.content)this.WriteRuntimeObject(t,n);let i=e.namedOnlyContent,s=e.countFlags,a=null!=e.name&&!n,o=null!=i||s>0||a;if(o&&t.WriteObjectStart(),null!=i)for(let[e,n]of i){let i=e,s=r(n,k);t.WritePropertyStart(i),this.WriteRuntimeContainer(t,s,!0),t.WritePropertyEnd()}s>0&&t.WriteIntProperty("#f",s),a&&t.WriteProperty("#n",e.name),o?t.WriteObjectEnd():t.WriteNull(),t.WriteArrayEnd()}static JArrayToContainer(t){let e=new k;e.content=this.JArrayToRuntimeObjList(t,!0);let n=t[t.length-1];if(null!=n){let t=new Map;for(let i in n)if("#f"==i)e.countFlags=parseInt(n[i]);else if("#n"==i)e.name=n[i].toString();else{let e=this.JTokenToRuntimeObject(n[i]),s=r(e,k);s&&(s.name=i),t.set(i,e)}e.namedOnlyContent=t}return e}static JObjectToChoice(t){let e=new Ut;return e.text=t.text.toString(),e.index=parseInt(t.index),e.sourcePath=t.originalChoicePath.toString(),e.originalThreadIndex=parseInt(t.originalThreadIndex),e.pathStringOnChoice=t.targetPath.toString(),e.tags=this.JArrayToTags(t),e}static JArrayToTags(t){return t.tags?t.tags:null}static WriteChoice(t,e){t.WriteObjectStart(),t.WriteProperty("text",e.text),t.WriteIntProperty("index",e.index),t.WriteProperty("originalChoicePath",e.sourcePath),t.WriteIntProperty("originalThreadIndex",e.originalThreadIndex),t.WriteProperty("targetPath",e.pathStringOnChoice),this.WriteChoiceTags(t,e),t.WriteObjectEnd()}static WriteChoiceTags(t,e){if(e.tags&&e.tags.length>0){t.WritePropertyStart("tags"),t.WriteArrayStart();for(const n of e.tags)t.Write(n);t.WriteArrayEnd(),t.WritePropertyEnd()}}static WriteInkList(t,e){let n=e.value;if(null===n)return v("rawList");t.WriteObjectStart(),t.WritePropertyStart("list"),t.WriteObjectStart();for(let[e,i]of n){let n=b.fromSerializedKey(e),r=i;if(null===n.itemName)return v("item.itemName");t.WritePropertyNameStart(),t.WritePropertyNameInner(n.originName?n.originName:"?"),t.WritePropertyNameInner("."),t.WritePropertyNameInner(n.itemName),t.WritePropertyNameEnd(),t.Write(r),t.WritePropertyEnd()}if(t.WriteObjectEnd(),t.WritePropertyEnd(),0==n.Count&&null!=n.originNames&&n.originNames.length>0){t.WritePropertyStart("origins"),t.WriteArrayStart();for(let e of n.originNames)t.Write(e);t.WriteArrayEnd(),t.WritePropertyEnd()}t.WriteObjectEnd()}static ListDefinitionsToJToken(t){let e={};for(let n of t.lists){let t={};for(let[e,i]of n.items){let n=b.fromSerializedKey(e);if(null===n.itemName)return v("item.itemName");t[n.itemName]=i}e[n.name]=t}return e}static JTokenToListDefinitions(t){let e=t,n=[];for(let t in e)if(e.hasOwnProperty(t)){let i=t.toString(),r=e[t],s=new Map;for(let n in r)if(e.hasOwnProperty(t)){let t=r[n];s.set(n,parseInt(t))}let a=new _t(i,s);n.push(a)}return new Kt(n)}}Ht._controlCommandNames=(()=>{let t=[];t[D.CommandType.EvalStart]="ev",t[D.CommandType.EvalOutput]="out",t[D.CommandType.EvalEnd]="/ev",t[D.CommandType.Duplicate]="du",t[D.CommandType.PopEvaluatedValue]="pop",t[D.CommandType.PopFunction]="~ret",t[D.CommandType.PopTunnel]="->->",t[D.CommandType.BeginString]="str",t[D.CommandType.EndString]="/str",t[D.CommandType.NoOp]="nop",t[D.CommandType.ChoiceCount]="choiceCnt",t[D.CommandType.Turns]="turn",t[D.CommandType.TurnsSince]="turns",t[D.CommandType.ReadCount]="readc",t[D.CommandType.Random]="rnd",t[D.CommandType.SeedRandom]="srnd",t[D.CommandType.VisitIndex]="visit",t[D.CommandType.SequenceShuffleIndex]="seq",t[D.CommandType.StartThread]="thread",t[D.CommandType.Done]="done",t[D.CommandType.End]="end",t[D.CommandType.ListFromInt]="listInt",t[D.CommandType.ListRange]="range",t[D.CommandType.ListRandom]="lrnd",t[D.CommandType.BeginTag]="#",t[D.CommandType.EndTag]="/#";for(let e=0;e<D.CommandType.TOTAL_VALUES;++e)if(null==t[e])throw new Error("Control command not accounted for in serialisation");return t})();class Jt{get elements(){return this.callStack}get depth(){return this.elements.length}get currentElement(){let t=this._threads[this._threads.length-1].callstack;return t[t.length-1]}get currentElementIndex(){return this.callStack.length-1}get currentThread(){return this._threads[this._threads.length-1]}set currentThread(t){m.Assert(1==this._threads.length,"Shouldn't be directly setting the current thread when we have a stack of them"),this._threads.length=0,this._threads.push(t)}get canPop(){return this.callStack.length>1}constructor(){if(this._threadCounter=0,this._startOfRoot=K.Null,arguments[0]instanceof ie){let t=arguments[0];this._startOfRoot=K.StartOf(t.rootContentContainer),this.Reset()}else{let t=arguments[0];this._threads=[];for(let e of t._threads)this._threads.push(e.Copy());this._threadCounter=t._threadCounter,this._startOfRoot=t._startOfRoot.copy()}}Reset(){this._threads=[],this._threads.push(new Jt.Thread),this._threads[0].callstack.push(new Jt.Element(g.Tunnel,this._startOfRoot))}SetJsonToken(t,e){this._threads.length=0;let n=t.threads;for(let t of n){let n=t,i=new Jt.Thread(n,e);this._threads.push(i)}this._threadCounter=parseInt(t.threadCounter),this._startOfRoot=K.StartOf(e.rootContentContainer)}WriteJson(t){t.WriteObject((t=>{t.WritePropertyStart("threads"),t.WriteArrayStart();for(let e of this._threads)e.WriteJson(t);t.WriteArrayEnd(),t.WritePropertyEnd(),t.WritePropertyStart("threadCounter"),t.WriteInt(this._threadCounter),t.WritePropertyEnd()}))}PushThread(){let t=this.currentThread.Copy();this._threadCounter++,t.threadIndex=this._threadCounter,this._threads.push(t)}ForkThread(){let t=this.currentThread.Copy();return this._threadCounter++,t.threadIndex=this._threadCounter,t}PopThread(){if(!this.canPopThread)throw new Error("Can't pop thread");this._threads.splice(this._threads.indexOf(this.currentThread),1)}get canPopThread(){return this._threads.length>1&&!this.elementIsEvaluateFromGame}get elementIsEvaluateFromGame(){return this.currentElement.type==g.FunctionEvaluationFromGame}Push(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=new Jt.Element(t,this.currentElement.currentPointer,!1);i.evaluationStackHeightWhenPushed=e,i.functionStartInOutputStream=n,this.callStack.push(i)}CanPop(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!!this.canPop&&(null==t||this.currentElement.type==t)}Pop(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this.CanPop(t))throw new Error("Mismatched push/pop in Callstack");this.callStack.pop()}GetTemporaryVariableWithName(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;-1==e&&(e=this.currentElementIndex+1);let n=_(this.callStack[e-1].temporaryVariables,t,null);return n.exists?n.result:null}SetTemporaryVariable(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;-1==i&&(i=this.currentElementIndex+1);let r=this.callStack[i-1];if(!n&&!r.temporaryVariables.get(t))throw new Error("Could not find temporary variable to set: "+t);let s=_(r.temporaryVariables,t,null);s.exists&&W.RetainListOriginsForAssignment(s.result,e),r.temporaryVariables.set(t,e)}ContextForVariableNamed(t){return this.currentElement.temporaryVariables.get(t)?this.currentElementIndex+1:0}ThreadWithIndex(t){let e=this._threads.filter((e=>{if(e.threadIndex==t)return e}));return e.length>0?e[0]:null}get callStack(){return this.currentThread.callstack}get callStackTrace(){let t=new y;for(let e=0;e<this._threads.length;e++){let n=this._threads[e],i=e==this._threads.length-1;t.AppendFormat("=== THREAD {0}/{1} {2}===\n",e+1,this._threads.length,i?"(current) ":"");for(let e=0;e<n.callstack.length;e++){n.callstack[e].type==g.Function?t.Append("  [FUNCTION] "):t.Append("  [TUNNEL] ");let i=n.callstack[e].currentPointer;if(!i.isNull){if(t.Append("<SOMEWHERE IN "),null===i.container)return v("pointer.container");t.Append(i.container.path.toString()),t.AppendLine(">")}}}return t.toString()}}!function(t){class e{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.evaluationStackHeightWhenPushed=0,this.functionStartInOutputStream=0,this.currentPointer=e.copy(),this.inExpressionEvaluation=n,this.temporaryVariables=new Map,this.type=t}Copy(){let t=new e(this.type,this.currentPointer,this.inExpressionEvaluation);return t.temporaryVariables=new Map(this.temporaryVariables),t.evaluationStackHeightWhenPushed=this.evaluationStackHeightWhenPushed,t.functionStartInOutputStream=this.functionStartInOutputStream,t}}t.Element=e;class n{constructor(){if(this.threadIndex=0,this.previousPointer=K.Null,this.callstack=[],arguments[0]&&arguments[1]){let t=arguments[0],n=arguments[1];this.threadIndex=parseInt(t.threadIndex);let i=t.callstack;for(let t of i){let i,r=t,s=parseInt(r.type),a=K.Null,o=r.cPath;if(void 0!==o){i=o.toString();let t=n.ContentAtPath(new p(i));if(a.container=t.container,a.index=parseInt(r.idx),null==t.obj)throw new Error("When loading state, internal story location couldn't be found: "+i+". Has the story changed since this save data was created?");t.approximate&&(null!==a.container?n.Warning("When loading state, exact internal story location couldn't be found: '"+i+"', so it was approximated to '"+a.container.path.toString()+"' to recover. Has the story changed since this save data was created?"):n.Warning("When loading state, exact internal story location couldn't be found: '"+i+"' and it may not be recoverable. Has the story changed since this save data was created?"))}let l=!!r.exp,h=new e(s,a,l),u=r.temp;void 0!==u?h.temporaryVariables=Ht.JObjectToDictionaryRuntimeObjs(u):h.temporaryVariables.clear(),this.callstack.push(h)}let r=t.previousContentObject;if(void 0!==r){let t=new p(r.toString());this.previousPointer=n.PointerAtPath(t)}}}Copy(){let t=new n;t.threadIndex=this.threadIndex;for(let e of this.callstack)t.callstack.push(e.Copy());return t.previousPointer=this.previousPointer.copy(),t}WriteJson(t){t.WriteObjectStart(),t.WritePropertyStart("callstack"),t.WriteArrayStart();for(let e of this.callstack){if(t.WriteObjectStart(),!e.currentPointer.isNull){if(null===e.currentPointer.container)return v("el.currentPointer.container");t.WriteProperty("cPath",e.currentPointer.container.path.componentsString),t.WriteIntProperty("idx",e.currentPointer.index)}t.WriteProperty("exp",e.inExpressionEvaluation),t.WriteIntProperty("type",e.type),e.temporaryVariables.size>0&&(t.WritePropertyStart("temp"),Ht.WriteDictionaryRuntimeObjs(t,e.temporaryVariables),t.WritePropertyEnd()),t.WriteObjectEnd()}if(t.WriteArrayEnd(),t.WritePropertyEnd(),t.WriteIntProperty("threadIndex",this.threadIndex),!this.previousPointer.isNull){let e=this.previousPointer.Resolve();if(null===e)return v("this.previousPointer.Resolve()");t.WriteProperty("previousContentObject",e.path.toString())}t.WriteObjectEnd()}}t.Thread=n}(Jt||(Jt={}));class zt extends class{}{variableChangedEvent(t,e){for(let n of this.variableChangedEventCallbacks)n(t,e)}StartVariableObservation(){this._batchObservingVariableChanges=!0,this._changedVariablesForBatchObs=new Set}CompleteVariableObservation(){this._batchObservingVariableChanges=!1;let t=new Map;if(null!=this._changedVariablesForBatchObs)for(let t of this._changedVariablesForBatchObs){let e=this._globalVariables.get(t);this.variableChangedEvent(t,e)}if(null!=this.patch)for(let e of this.patch.changedVariables){let n=this.patch.TryGetGlobal(e,null);n.exists&&t.set(e,n)}return this._changedVariablesForBatchObs=null,t}NotifyObservers(t){for(const[e,n]of t)this.variableChangedEvent(e,n)}get callStack(){return this._callStack}set callStack(t){this._callStack=t}$(t,e){if(void 0===e){let e=null;return null!==this.patch&&(e=this.patch.TryGetGlobal(t,null),e.exists)?e.result.valueObject:(e=this._globalVariables.get(t),void 0===e&&(e=this._defaultGlobalVariables.get(t)),void 0!==e?e.valueObject:null)}{if(void 0===this._defaultGlobalVariables.get(t))throw new E("Cannot assign to a variable ("+t+") that hasn't been declared in the story");let n=x.Create(e);if(null==n)throw null==e?new Error("Cannot pass null to VariableState"):new Error("Invalid value passed to VariableState: "+e.toString());this.SetGlobal(t,n)}}constructor(t,e){super(),this.variableChangedEventCallbacks=[],this.patch=null,this._defaultGlobalVariables=new Map,this._changedVariablesForBatchObs=new Set,this._batchObservingVariableChanges=!1,this._globalVariables=new Map,this._callStack=t,this._listDefsOrigin=e;try{return new Proxy(this,{get:(t,e)=>e in t?t[e]:t.$(e),set:(t,e,n)=>(e in t?t[e]=n:t.$(e,n),!0)})}catch(t){}}ApplyPatch(){if(null===this.patch)return v("this.patch");for(let[t,e]of this.patch.globals)this._globalVariables.set(t,e);if(null!==this._changedVariablesForBatchObs)for(let t of this.patch.changedVariables)this._changedVariablesForBatchObs.add(t);this.patch=null}SetJsonToken(t){this._globalVariables.clear();for(let[e,n]of this._defaultGlobalVariables){let i=t[e];if(void 0!==i){let t=Ht.JTokenToRuntimeObject(i);if(null===t)return v("tokenInkObject");this._globalVariables.set(e,t)}else this._globalVariables.set(e,n)}}WriteJson(t){t.WriteObjectStart();for(let[e,n]of this._globalVariables){let i=e,r=n;if(zt.dontSaveDefaultValues&&this._defaultGlobalVariables.has(i)){let t=this._defaultGlobalVariables.get(i);if(this.RuntimeObjectsEqual(r,t))continue}t.WritePropertyStart(i),Ht.WriteRuntimeObject(t,r),t.WritePropertyEnd()}t.WriteObjectEnd()}RuntimeObjectsEqual(t,e){if(null===t)return v("obj1");if(null===e)return v("obj2");if(t.constructor!==e.constructor)return!1;let n=r(t,A);if(null!==n)return n.value===s(e,A).value;let i=r(t,P);if(null!==i)return i.value===s(e,P).value;let a=r(t,N);if(null!==a)return a.value===s(e,N).value;let o=r(t,x),h=r(e,x);if(null!==o&&null!==h)return l(o.valueObject)&&l(h.valueObject)?o.valueObject.Equals(h.valueObject):o.valueObject===h.valueObject;throw new Error("FastRoughDefinitelyEquals: Unsupported runtime object type: "+t.constructor.name)}GetVariableWithName(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=this.GetRawVariableWithName(t,e),i=r(n,F);return null!==i&&(n=this.ValueAtVariablePointer(i)),n}TryGetDefaultVariableValue(t){let e=_(this._defaultGlobalVariables,t,null);return e.exists?e.result:null}GlobalVariableExistsWithName(t){return this._globalVariables.has(t)||null!==this._defaultGlobalVariables&&this._defaultGlobalVariables.has(t)}GetRawVariableWithName(t,e){let n=null;if(0==e||-1==e){let e=null;if(null!==this.patch&&(e=this.patch.TryGetGlobal(t,null),e.exists))return e.result;if(e=_(this._globalVariables,t,null),e.exists)return e.result;if(null!==this._defaultGlobalVariables&&(e=_(this._defaultGlobalVariables,t,null),e.exists))return e.result;if(null===this._listDefsOrigin)return v("VariablesState._listDefsOrigin");let n=this._listDefsOrigin.FindSingleItemListWithName(t);if(n)return n}return n=this._callStack.GetTemporaryVariableWithName(t,e),n}ValueAtVariablePointer(t){return this.GetVariableWithName(t.variableName,t.contextIndex)}Assign(t,e){let n=t.variableName;if(null===n)return v("name");let i=-1,s=!1;if(s=t.isNewDeclaration?t.isGlobal:this.GlobalVariableExistsWithName(n),t.isNewDeclaration){let t=r(e,F);if(null!==t){e=this.ResolveVariablePointer(t)}}else{let t=null;do{t=r(this.GetRawVariableWithName(n,i),F),null!=t&&(n=t.variableName,i=t.contextIndex,s=0==i)}while(null!=t)}s?this.SetGlobal(n,e):this._callStack.SetTemporaryVariable(n,e,t.isNewDeclaration,i)}SnapshotDefaultGlobals(){this._defaultGlobalVariables=new Map(this._globalVariables)}RetainListOriginsForAssignment(t,e){let n=s(t,W),i=s(e,W);n.value&&i.value&&0==i.value.Count&&i.value.SetInitialOriginNames(n.value.originNames)}SetGlobal(t,e){let n=null;if(null===this.patch&&(n=_(this._globalVariables,t,null)),null!==this.patch&&(n=this.patch.TryGetGlobal(t,null),n.exists||(n=_(this._globalVariables,t,null))),W.RetainListOriginsForAssignment(n.result,e),null===t)return v("variableName");if(null!==this.patch?this.patch.SetGlobal(t,e):this._globalVariables.set(t,e),null!==this.variableChangedEvent&&null!==n&&e!==n.result)if(this._batchObservingVariableChanges){if(null===this._changedVariablesForBatchObs)return v("this._changedVariablesForBatchObs");null!==this.patch?this.patch.AddChangedVariable(t):null!==this._changedVariablesForBatchObs&&this._changedVariablesForBatchObs.add(t)}else this.variableChangedEvent(t,e)}ResolveVariablePointer(t){let e=t.contextIndex;-1==e&&(e=this.GetContextIndexOfVariableNamed(t.variableName));let n=r(this.GetRawVariableWithName(t.variableName,e),F);return null!=n?n:new F(t.variableName,e)}GetContextIndexOfVariableNamed(t){return this.GlobalVariableExistsWithName(t)?0:this._callStack.currentElementIndex}ObserveVariableChange(t){this.variableChangedEventCallbacks.push(t)}}zt.dontSaveDefaultValues=!0;class Xt{constructor(t){this.seed=t%2147483647,this.seed<=0&&(this.seed+=2147483646)}next(){return this.seed=48271*this.seed%2147483647}nextFloat(){return(this.next()-1)/2147483646}}class Yt{get globals(){return this._globals}get changedVariables(){return this._changedVariables}get visitCounts(){return this._visitCounts}get turnIndices(){return this._turnIndices}constructor(){if(this._changedVariables=new Set,this._visitCounts=new Map,this._turnIndices=new Map,1===arguments.length&&null!==arguments[0]){let t=arguments[0];this._globals=new Map(t._globals),this._changedVariables=new Set(t._changedVariables),this._visitCounts=new Map(t._visitCounts),this._turnIndices=new Map(t._turnIndices)}else this._globals=new Map,this._changedVariables=new Set,this._visitCounts=new Map,this._turnIndices=new Map}TryGetGlobal(t,e){return null!==t&&this._globals.has(t)?{result:this._globals.get(t),exists:!0}:{result:e,exists:!1}}SetGlobal(t,e){this._globals.set(t,e)}AddChangedVariable(t){return this._changedVariables.add(t)}TryGetVisitCount(t,e){return this._visitCounts.has(t)?{result:this._visitCounts.get(t),exists:!0}:{result:e,exists:!1}}SetVisitCount(t,e){this._visitCounts.set(t,e)}SetTurnIndex(t,e){this._turnIndices.set(t,e)}TryGetTurnIndex(t,e){return this._turnIndices.has(t)?{result:this._turnIndices.get(t),exists:!0}:{result:e,exists:!1}}}class Zt{static TextToDictionary(t){return new Zt.Reader(t).ToDictionary()}static TextToArray(t){return new Zt.Reader(t).ToArray()}}!function(t){t.Reader=class{constructor(t){this._rootObject=JSON.parse(t)}ToDictionary(){return this._rootObject}ToArray(){return this._rootObject}};class e{constructor(){this._currentPropertyName=null,this._currentString=null,this._stateStack=[],this._collectionStack=[],this._propertyNameStack=[],this._jsonObject=null}WriteObject(t){this.WriteObjectStart(),t(this),this.WriteObjectEnd()}WriteObjectStart(){this.StartNewObject(!0);let e={};if(this.state===t.Writer.State.Property){this.Assert(null!==this.currentCollection),this.Assert(null!==this.currentPropertyName);let t=this._propertyNameStack.pop();this.currentCollection[t]=e,this._collectionStack.push(e)}else this.state===t.Writer.State.Array?(this.Assert(null!==this.currentCollection),this.currentCollection.push(e),this._collectionStack.push(e)):(this.Assert(this.state===t.Writer.State.None),this._jsonObject=e,this._collectionStack.push(e));this._stateStack.push(new t.Writer.StateElement(t.Writer.State.Object))}WriteObjectEnd(){this.Assert(this.state===t.Writer.State.Object),this._collectionStack.pop(),this._stateStack.pop()}WriteProperty(t,e){if(this.WritePropertyStart(t),arguments[1]instanceof Function){(0,arguments[1])(this)}else{let t=arguments[1];this.Write(t)}this.WritePropertyEnd()}WriteIntProperty(t,e){this.WritePropertyStart(t),this.WriteInt(e),this.WritePropertyEnd()}WriteFloatProperty(t,e){this.WritePropertyStart(t),this.WriteFloat(e),this.WritePropertyEnd()}WritePropertyStart(e){this.Assert(this.state===t.Writer.State.Object),this._propertyNameStack.push(e),this.IncrementChildCount(),this._stateStack.push(new t.Writer.StateElement(t.Writer.State.Property))}WritePropertyEnd(){this.Assert(this.state===t.Writer.State.Property),this.Assert(1===this.childCount),this._stateStack.pop()}WritePropertyNameStart(){this.Assert(this.state===t.Writer.State.Object),this.IncrementChildCount(),this._currentPropertyName="",this._stateStack.push(new t.Writer.StateElement(t.Writer.State.Property)),this._stateStack.push(new t.Writer.StateElement(t.Writer.State.PropertyName))}WritePropertyNameEnd(){this.Assert(this.state===t.Writer.State.PropertyName),this.Assert(null!==this._currentPropertyName),this._propertyNameStack.push(this._currentPropertyName),this._currentPropertyName=null,this._stateStack.pop()}WritePropertyNameInner(e){this.Assert(this.state===t.Writer.State.PropertyName),this.Assert(null!==this._currentPropertyName),this._currentPropertyName+=e}WriteArrayStart(){this.StartNewObject(!0);let e=[];if(this.state===t.Writer.State.Property){this.Assert(null!==this.currentCollection),this.Assert(null!==this.currentPropertyName);let t=this._propertyNameStack.pop();this.currentCollection[t]=e,this._collectionStack.push(e)}else this.state===t.Writer.State.Array?(this.Assert(null!==this.currentCollection),this.currentCollection.push(e),this._collectionStack.push(e)):(this.Assert(this.state===t.Writer.State.None),this._jsonObject=e,this._collectionStack.push(e));this._stateStack.push(new t.Writer.StateElement(t.Writer.State.Array))}WriteArrayEnd(){this.Assert(this.state===t.Writer.State.Array),this._collectionStack.pop(),this._stateStack.pop()}Write(t){null!==t?(this.StartNewObject(!1),this._addToCurrentObject(t)):console.error("Warning: trying to write a null value")}WriteBool(t){null!==t&&(this.StartNewObject(!1),this._addToCurrentObject(t))}WriteInt(t){null!==t&&(this.StartNewObject(!1),this._addToCurrentObject(Math.floor(t)))}WriteFloat(t){null!==t&&(this.StartNewObject(!1),t==Number.POSITIVE_INFINITY?this._addToCurrentObject(34e37):t==Number.NEGATIVE_INFINITY?this._addToCurrentObject(-34e37):isNaN(t)?this._addToCurrentObject(0):this._addToCurrentObject(t))}WriteNull(){this.StartNewObject(!1),this._addToCurrentObject(null)}WriteStringStart(){this.StartNewObject(!1),this._currentString="",this._stateStack.push(new t.Writer.StateElement(t.Writer.State.String))}WriteStringEnd(){this.Assert(this.state==t.Writer.State.String),this._stateStack.pop(),this._addToCurrentObject(this._currentString),this._currentString=null}WriteStringInner(e){this.Assert(this.state===t.Writer.State.String),null!==e?this._currentString+=e:console.error("Warning: trying to write a null string")}toString(){return null===this._jsonObject?"":JSON.stringify(this._jsonObject)}StartNewObject(e){e?this.Assert(this.state===t.Writer.State.None||this.state===t.Writer.State.Property||this.state===t.Writer.State.Array):this.Assert(this.state===t.Writer.State.Property||this.state===t.Writer.State.Array),this.state===t.Writer.State.Property&&this.Assert(0===this.childCount),this.state!==t.Writer.State.Array&&this.state!==t.Writer.State.Property||this.IncrementChildCount()}get state(){return this._stateStack.length>0?this._stateStack[this._stateStack.length-1].type:t.Writer.State.None}get childCount(){return this._stateStack.length>0?this._stateStack[this._stateStack.length-1].childCount:0}get currentCollection(){return this._collectionStack.length>0?this._collectionStack[this._collectionStack.length-1]:null}get currentPropertyName(){return this._propertyNameStack.length>0?this._propertyNameStack[this._propertyNameStack.length-1]:null}IncrementChildCount(){this.Assert(this._stateStack.length>0);let t=this._stateStack.pop();t.childCount++,this._stateStack.push(t)}Assert(t){if(!t)throw Error("Assert failed while writing JSON")}_addToCurrentObject(e){this.Assert(null!==this.currentCollection),this.state===t.Writer.State.Array?(this.Assert(Array.isArray(this.currentCollection)),this.currentCollection.push(e)):this.state===t.Writer.State.Property&&(this.Assert(!Array.isArray(this.currentCollection)),this.Assert(null!==this.currentPropertyName),this.currentCollection[this.currentPropertyName]=e,this._propertyNameStack.pop())}}t.Writer=e,function(e){var n;(n=e.State||(e.State={}))[n.None=0]="None",n[n.Object=1]="Object",n[n.Array=2]="Array",n[n.Property=3]="Property",n[n.PropertyName=4]="PropertyName",n[n.String=5]="String";e.StateElement=class{constructor(e){this.type=t.Writer.State.None,this.childCount=0,this.type=e}}}(e=t.Writer||(t.Writer={}))}(Zt||(Zt={}));class Qt{constructor(){let t=arguments[0],e=arguments[1];if(this.name=t,this.callStack=new Jt(e),arguments[2]){let t=arguments[2];this.callStack.SetJsonToken(t.callstack,e),this.outputStream=Ht.JArrayToRuntimeObjList(t.outputStream),this.currentChoices=Ht.JArrayToRuntimeObjList(t.currentChoices);let n=t.choiceThreads;void 0!==n&&this.LoadFlowChoiceThreads(n,e)}else this.outputStream=[],this.currentChoices=[]}WriteJson(t){t.WriteObjectStart(),t.WriteProperty("callstack",(t=>this.callStack.WriteJson(t))),t.WriteProperty("outputStream",(t=>Ht.WriteListRuntimeObjs(t,this.outputStream)));let e=!1;for(let n of this.currentChoices){if(null===n.threadAtGeneration)return v("c.threadAtGeneration");n.originalThreadIndex=n.threadAtGeneration.threadIndex,null===this.callStack.ThreadWithIndex(n.originalThreadIndex)&&(e||(e=!0,t.WritePropertyStart("choiceThreads"),t.WriteObjectStart()),t.WritePropertyStart(n.originalThreadIndex),n.threadAtGeneration.WriteJson(t),t.WritePropertyEnd())}e&&(t.WriteObjectEnd(),t.WritePropertyEnd()),t.WriteProperty("currentChoices",(t=>{t.WriteArrayStart();for(let e of this.currentChoices)Ht.WriteChoice(t,e);t.WriteArrayEnd()})),t.WriteObjectEnd()}LoadFlowChoiceThreads(t,e){for(let n of this.currentChoices){let i=this.callStack.ThreadWithIndex(n.originalThreadIndex);if(null!==i)n.threadAtGeneration=i.Copy();else{let i=t[`${n.originalThreadIndex}`];n.threadAtGeneration=new Jt.Thread(i,e)}}}}class te{ToJson(){let t=new Zt.Writer;return this.WriteJson(t),t.toString()}toJson(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.ToJson(t)}LoadJson(t){let e=Zt.TextToDictionary(t);this.LoadJsonObj(e),null!==this.onDidLoadState&&this.onDidLoadState()}VisitCountAtPathString(t){let e;if(null!==this._patch){let n=this.story.ContentAtPath(new p(t)).container;if(null===n)throw new Error("Content at path not found: "+t);if(e=this._patch.TryGetVisitCount(n,0),e.exists)return e.result}return e=_(this._visitCounts,t,null),e.exists?e.result:0}VisitCountForContainer(t){if(null===t)return v("container");if(!t.visitsShouldBeCounted)return this.story.Error("Read count for target ("+t.name+" - on "+t.debugMetadata+") unknown. The story may need to be compiled with countAllVisits flag (-c)."),0;if(null!==this._patch){let e=this._patch.TryGetVisitCount(t,0);if(e.exists)return e.result}let e=t.path.toString(),n=_(this._visitCounts,e,null);return n.exists?n.result:0}IncrementVisitCountForContainer(t){if(null!==this._patch){let e=this.VisitCountForContainer(t);return e++,void this._patch.SetVisitCount(t,e)}let e=t.path.toString(),n=_(this._visitCounts,e,null);n.exists?this._visitCounts.set(e,n.result+1):this._visitCounts.set(e,1)}RecordTurnIndexVisitToContainer(t){if(null!==this._patch)return void this._patch.SetTurnIndex(t,this.currentTurnIndex);let e=t.path.toString();this._turnIndices.set(e,this.currentTurnIndex)}TurnsSinceForContainer(t){if(t.turnIndexShouldBeCounted||this.story.Error("TURNS_SINCE() for target ("+t.name+" - on "+t.debugMetadata+") unknown. The story may need to be compiled with countAllVisits flag (-c)."),null!==this._patch){let e=this._patch.TryGetTurnIndex(t,0);if(e.exists)return this.currentTurnIndex-e.result}let e=t.path.toString(),n=_(this._turnIndices,e,0);return n.exists?this.currentTurnIndex-n.result:-1}get callstackDepth(){return this.callStack.depth}get outputStream(){return this._currentFlow.outputStream}get currentChoices(){return this.canContinue?[]:this._currentFlow.currentChoices}get generatedChoices(){return this._currentFlow.currentChoices}get currentErrors(){return this._currentErrors}get currentWarnings(){return this._currentWarnings}get variablesState(){return this._variablesState}set variablesState(t){this._variablesState=t}get callStack(){return this._currentFlow.callStack}get evaluationStack(){return this._evaluationStack}get currentTurnIndex(){return this._currentTurnIndex}set currentTurnIndex(t){this._currentTurnIndex=t}get currentPathString(){let t=this.currentPointer;return t.isNull?null:null===t.path?v("pointer.path"):t.path.toString()}get previousPathString(){let t=this.previousPointer;return t.isNull?null:null===t.path?v("previousPointer.path"):t.path.toString()}get currentPointer(){return this.callStack.currentElement.currentPointer.copy()}set currentPointer(t){this.callStack.currentElement.currentPointer=t.copy()}get previousPointer(){return this.callStack.currentThread.previousPointer.copy()}set previousPointer(t){this.callStack.currentThread.previousPointer=t.copy()}get canContinue(){return!this.currentPointer.isNull&&!this.hasError}get hasError(){return null!=this.currentErrors&&this.currentErrors.length>0}get hasWarning(){return null!=this.currentWarnings&&this.currentWarnings.length>0}get currentText(){if(this._outputStreamTextDirty){let t=new y,e=!1;for(let n of this.outputStream){let i=r(n,I);if(e||null===i){let t=r(n,D);null!==t&&(t.commandType==D.CommandType.BeginTag?e=!0:t.commandType==D.CommandType.EndTag&&(e=!1))}else t.Append(i.value)}this._currentText=this.CleanOutputWhitespace(t.toString()),this._outputStreamTextDirty=!1}return this._currentText}CleanOutputWhitespace(t){let e=new y,n=-1,i=0;for(let r=0;r<t.length;r++){let s=t.charAt(r),a=" "==s||"\t"==s;a&&-1==n&&(n=r),a||("\n"!=s&&n>0&&n!=i&&e.Append(" "),n=-1),"\n"==s&&(i=r+1),a||e.Append(s)}return e.toString()}get currentTags(){if(this._outputStreamTagsDirty){this._currentTags=[];let t=!1,e=new y;for(let n of this.outputStream){let i=r(n,D);if(null!=i){if(i.commandType==D.CommandType.BeginTag){if(t&&e.Length>0){let t=this.CleanOutputWhitespace(e.toString());this._currentTags.push(t),e.Clear()}t=!0}else if(i.commandType==D.CommandType.EndTag){if(e.Length>0){let t=this.CleanOutputWhitespace(e.toString());this._currentTags.push(t),e.Clear()}t=!1}}else if(t){let t=r(n,I);null!==t&&e.Append(t.value)}else{let t=r(n,qt);null!=t&&null!=t.text&&t.text.length>0&&this._currentTags.push(t.text)}}if(e.Length>0){let t=this.CleanOutputWhitespace(e.toString());this._currentTags.push(t),e.Clear()}this._outputStreamTagsDirty=!1}return this._currentTags}get currentFlowName(){return this._currentFlow.name}get currentFlowIsDefaultFlow(){return this._currentFlow.name==this.kDefaultFlowName}get aliveFlowNames(){if(this._aliveFlowNamesDirty){if(this._aliveFlowNames=[],null!=this._namedFlows)for(let t of this._namedFlows.keys())t!=this.kDefaultFlowName&&this._aliveFlowNames.push(t);this._aliveFlowNamesDirty=!1}return this._aliveFlowNames}get inExpressionEvaluation(){return this.callStack.currentElement.inExpressionEvaluation}set inExpressionEvaluation(t){this.callStack.currentElement.inExpressionEvaluation=t}constructor(t){this.kInkSaveStateVersion=10,this.kMinCompatibleLoadVersion=8,this.onDidLoadState=null,this._currentErrors=null,this._currentWarnings=null,this.divertedPointer=K.Null,this._currentTurnIndex=0,this.storySeed=0,this.previousRandom=0,this.didSafeExit=!1,this._currentText=null,this._currentTags=null,this._outputStreamTextDirty=!0,this._outputStreamTagsDirty=!0,this._patch=null,this._aliveFlowNames=null,this._namedFlows=null,this.kDefaultFlowName="DEFAULT_FLOW",this._aliveFlowNamesDirty=!0,this.story=t,this._currentFlow=new Qt(this.kDefaultFlowName,t),this.OutputStreamDirty(),this._aliveFlowNamesDirty=!0,this._evaluationStack=[],this._variablesState=new zt(this.callStack,t.listDefinitions),this._visitCounts=new Map,this._turnIndices=new Map,this.currentTurnIndex=-1;let e=(new Date).getTime();this.storySeed=new Xt(e).next()%100,this.previousRandom=0,this.GoToStart()}GoToStart(){this.callStack.currentElement.currentPointer=K.StartOf(this.story.mainContentContainer)}SwitchFlow_Internal(t){if(null===t)throw new Error("Must pass a non-null string to Story.SwitchFlow");if(null===this._namedFlows&&(this._namedFlows=new Map,this._namedFlows.set(this.kDefaultFlowName,this._currentFlow)),t===this._currentFlow.name)return;let e,n=_(this._namedFlows,t,null);n.exists?e=n.result:(e=new Qt(t,this.story),this._namedFlows.set(t,e),this._aliveFlowNamesDirty=!0),this._currentFlow=e,this.variablesState.callStack=this._currentFlow.callStack,this.OutputStreamDirty()}SwitchToDefaultFlow_Internal(){null!==this._namedFlows&&this.SwitchFlow_Internal(this.kDefaultFlowName)}RemoveFlow_Internal(t){if(null===t)throw new Error("Must pass a non-null string to Story.DestroyFlow");if(t===this.kDefaultFlowName)throw new Error("Cannot destroy default flow");if(this._currentFlow.name===t&&this.SwitchToDefaultFlow_Internal(),null===this._namedFlows)return v("this._namedFlows");this._namedFlows.delete(t),this._aliveFlowNamesDirty=!0}CopyAndStartPatching(t){let e=new te(this.story);if(e._patch=new Yt(this._patch),e._currentFlow.name=this._currentFlow.name,e._currentFlow.callStack=new Jt(this._currentFlow.callStack),e._currentFlow.outputStream.push(...this._currentFlow.outputStream),e.OutputStreamDirty(),t)for(let t of this._currentFlow.currentChoices)e._currentFlow.currentChoices.push(t.Clone());else e._currentFlow.currentChoices.push(...this._currentFlow.currentChoices);if(null!==this._namedFlows){e._namedFlows=new Map;for(let[t,n]of this._namedFlows)e._namedFlows.set(t,n),e._aliveFlowNamesDirty=!0;e._namedFlows.set(this._currentFlow.name,e._currentFlow)}return this.hasError&&(e._currentErrors=[],e._currentErrors.push(...this.currentErrors||[])),this.hasWarning&&(e._currentWarnings=[],e._currentWarnings.push(...this.currentWarnings||[])),e.variablesState=this.variablesState,e.variablesState.callStack=e.callStack,e.variablesState.patch=e._patch,e.evaluationStack.push(...this.evaluationStack),this.divertedPointer.isNull||(e.divertedPointer=this.divertedPointer.copy()),e.previousPointer=this.previousPointer.copy(),e._visitCounts=this._visitCounts,e._turnIndices=this._turnIndices,e.currentTurnIndex=this.currentTurnIndex,e.storySeed=this.storySeed,e.previousRandom=this.previousRandom,e.didSafeExit=this.didSafeExit,e}RestoreAfterPatch(){this.variablesState.callStack=this.callStack,this.variablesState.patch=this._patch}ApplyAnyPatch(){if(null!==this._patch){this.variablesState.ApplyPatch();for(let[t,e]of this._patch.visitCounts)this.ApplyCountChanges(t,e,!0);for(let[t,e]of this._patch.turnIndices)this.ApplyCountChanges(t,e,!1);this._patch=null}}ApplyCountChanges(t,e,n){(n?this._visitCounts:this._turnIndices).set(t.path.toString(),e)}WriteJson(t){if(t.WriteObjectStart(),t.WritePropertyStart("flows"),t.WriteObjectStart(),null!==this._namedFlows)for(let[e,n]of this._namedFlows)t.WriteProperty(e,(t=>n.WriteJson(t)));else t.WriteProperty(this._currentFlow.name,(t=>this._currentFlow.WriteJson(t)));if(t.WriteObjectEnd(),t.WritePropertyEnd(),t.WriteProperty("currentFlowName",this._currentFlow.name),t.WriteProperty("variablesState",(t=>this.variablesState.WriteJson(t))),t.WriteProperty("evalStack",(t=>Ht.WriteListRuntimeObjs(t,this.evaluationStack))),!this.divertedPointer.isNull){if(null===this.divertedPointer.path)return v("divertedPointer");t.WriteProperty("currentDivertTarget",this.divertedPointer.path.componentsString)}t.WriteProperty("visitCounts",(t=>Ht.WriteIntDictionary(t,this._visitCounts))),t.WriteProperty("turnIndices",(t=>Ht.WriteIntDictionary(t,this._turnIndices))),t.WriteIntProperty("turnIdx",this.currentTurnIndex),t.WriteIntProperty("storySeed",this.storySeed),t.WriteIntProperty("previousRandom",this.previousRandom),t.WriteIntProperty("inkSaveVersion",this.kInkSaveStateVersion),t.WriteIntProperty("inkFormatVersion",ie.inkVersionCurrent),t.WriteObjectEnd()}LoadJsonObj(t){let e=t,n=e.inkSaveVersion;if(null==n)throw new Error("ink save format incorrect, can't load.");if(parseInt(n)<this.kMinCompatibleLoadVersion)throw new Error("Ink save format isn't compatible with the current version (saw '"+n+"', but minimum is "+this.kMinCompatibleLoadVersion+"), so can't load.");let i=e.flows;if(null!=i){let t=i;1===Object.keys(t).length?this._namedFlows=null:null===this._namedFlows?this._namedFlows=new Map:this._namedFlows.clear();let n=Object.entries(t);for(let[e,i]of n){let n=e,r=i,s=new Qt(n,this.story,r);if(1===Object.keys(t).length)this._currentFlow=new Qt(n,this.story,r);else{if(null===this._namedFlows)return v("this._namedFlows");this._namedFlows.set(n,s)}}if(null!=this._namedFlows&&this._namedFlows.size>1){let t=e.currentFlowName;this._currentFlow=this._namedFlows.get(t)}}else{this._namedFlows=null,this._currentFlow.name=this.kDefaultFlowName,this._currentFlow.callStack.SetJsonToken(e.callstackThreads,this.story),this._currentFlow.outputStream=Ht.JArrayToRuntimeObjList(e.outputStream),this._currentFlow.currentChoices=Ht.JArrayToRuntimeObjList(e.currentChoices);let t=e.choiceThreads;this._currentFlow.LoadFlowChoiceThreads(t,this.story)}this.OutputStreamDirty(),this._aliveFlowNamesDirty=!0,this.variablesState.SetJsonToken(e.variablesState),this.variablesState.callStack=this._currentFlow.callStack,this._evaluationStack=Ht.JArrayToRuntimeObjList(e.evalStack);let r=e.currentDivertTarget;if(null!=r){let t=new p(r.toString());this.divertedPointer=this.story.PointerAtPath(t)}this._visitCounts=Ht.JObjectToIntDictionary(e.visitCounts),this._turnIndices=Ht.JObjectToIntDictionary(e.turnIndices),this.currentTurnIndex=parseInt(e.turnIdx),this.storySeed=parseInt(e.storySeed),this.previousRandom=parseInt(e.previousRandom)}ResetErrors(){this._currentErrors=null,this._currentWarnings=null}ResetOutput(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.outputStream.length=0,null!==t&&this.outputStream.push(...t),this.OutputStreamDirty()}PushToOutputStream(t){let e=r(t,I);if(null!==e){let t=this.TrySplittingHeadTailWhitespace(e);if(null!==t){for(let e of t)this.PushToOutputStreamIndividual(e);return void this.OutputStreamDirty()}}this.PushToOutputStreamIndividual(t),this.OutputStreamDirty()}PopFromOutputStream(t){this.outputStream.splice(this.outputStream.length-t,t),this.OutputStreamDirty()}TrySplittingHeadTailWhitespace(t){let e=t.value;if(null===e)return v("single.value");let n=-1,i=-1;for(let t=0;t<e.length;t++){let r=e[t];if("\n"!=r){if(" "==r||"\t"==r)continue;break}-1==n&&(n=t),i=t}let r=-1,s=-1;for(let t=e.length-1;t>=0;t--){let n=e[t];if("\n"!=n){if(" "==n||"\t"==n)continue;break}-1==r&&(r=t),s=t}if(-1==n&&-1==r)return null;let a=[],o=0,l=e.length;if(-1!=n){if(n>0){let t=new I(e.substring(0,n));a.push(t)}a.push(new I("\n")),o=i+1}if(-1!=r&&(l=s),l>o){let t=e.substring(o,l);a.push(new I(t))}if(-1!=r&&s>i&&(a.push(new I("\n")),r<e.length-1)){let t=e.length-r-1,n=new I(e.substring(r+1,r+1+t));a.push(n)}return a}PushToOutputStreamIndividual(t){let e=r(t,kt),n=r(t,I),i=!0;if(e)this.TrimNewlinesFromOutputStream(),i=!0;else if(n){let t=-1,e=this.callStack.currentElement;e.type==g.Function&&(t=e.functionStartInOutputStream);let r=-1;for(let e=this.outputStream.length-1;e>=0;e--){let n=this.outputStream[e],i=n instanceof D?n:null;if(null!=(n instanceof kt?n:null)){r=e;break}if(null!=i&&i.commandType==D.CommandType.BeginString){e>=t&&(t=-1);break}}let s=-1;if(s=-1!=r&&-1!=t?Math.min(t,r):-1!=r?r:t,-1!=s){if(n.isNewline)i=!1;else if(n.isNonWhitespace&&(r>-1&&this.RemoveExistingGlue(),t>-1)){let t=this.callStack.elements;for(let e=t.length-1;e>=0;e--){let n=t[e];if(n.type!=g.Function)break;n.functionStartInOutputStream=-1}}}else n.isNewline&&(!this.outputStreamEndsInNewline&&this.outputStreamContainsContent||(i=!1))}if(i){if(null===t)return v("obj");this.outputStream.push(t),this.OutputStreamDirty()}}TrimNewlinesFromOutputStream(){let t=-1,e=this.outputStream.length-1;for(;e>=0;){let n=this.outputStream[e],i=r(n,D),s=r(n,I);if(null!=i||null!=s&&s.isNonWhitespace)break;null!=s&&s.isNewline&&(t=e),e--}if(t>=0)for(e=t;e<this.outputStream.length;){r(this.outputStream[e],I)?this.outputStream.splice(e,1):e++}this.OutputStreamDirty()}RemoveExistingGlue(){for(let t=this.outputStream.length-1;t>=0;t--){let e=this.outputStream[t];if(e instanceof kt)this.outputStream.splice(t,1);else if(e instanceof D)break}this.OutputStreamDirty()}get outputStreamEndsInNewline(){if(this.outputStream.length>0)for(let t=this.outputStream.length-1;t>=0;t--){if(this.outputStream[t]instanceof D)break;let e=this.outputStream[t];if(e instanceof I){if(e.isNewline)return!0;if(e.isNonWhitespace)break}}return!1}get outputStreamContainsContent(){for(let t of this.outputStream)if(t instanceof I)return!0;return!1}get inStringEvaluation(){for(let t=this.outputStream.length-1;t>=0;t--){let e=r(this.outputStream[t],D);if(e instanceof D&&e.commandType==D.CommandType.BeginString)return!0}return!1}PushEvaluationStack(t){let e=r(t,W);if(e){let t=e.value;if(null===t)return v("rawList");if(null!=t.originNames){t.origins||(t.origins=[]),t.origins.length=0;for(let e of t.originNames){if(null===this.story.listDefinitions)return v("StoryState.story.listDefinitions");let n=this.story.listDefinitions.TryListGetDefinition(e,null);if(null===n.result)return v("StoryState def.result");t.origins.indexOf(n.result)<0&&t.origins.push(n.result)}}}if(null===t)return v("obj");this.evaluationStack.push(t)}PopEvaluationStack(t){if(void 0===t){return o(this.evaluationStack.pop())}if(t>this.evaluationStack.length)throw new Error("trying to pop too many objects");return o(this.evaluationStack.splice(this.evaluationStack.length-t,t))}PeekEvaluationStack(){return this.evaluationStack[this.evaluationStack.length-1]}ForceEnd(){this.callStack.Reset(),this._currentFlow.currentChoices.length=0,this.currentPointer=K.Null,this.previousPointer=K.Null,this.didSafeExit=!0}TrimWhitespaceFromFunctionEnd(){m.Assert(this.callStack.currentElement.type==g.Function);let t=this.callStack.currentElement.functionStartInOutputStream;-1==t&&(t=0);for(let e=this.outputStream.length-1;e>=t;e--){let t=this.outputStream[e],n=r(t,I),i=r(t,D);if(null!=n){if(i)break;if(!n.isNewline&&!n.isInlineWhitespace)break;this.outputStream.splice(e,1),this.OutputStreamDirty()}}}PopCallStack(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.callStack.currentElement.type==g.Function&&this.TrimWhitespaceFromFunctionEnd(),this.callStack.Pop(t)}SetChosenPath(t,e){this._currentFlow.currentChoices.length=0;let n=this.story.PointerAtPath(t);n.isNull||-1!=n.index||(n.index=0),this.currentPointer=n,e&&this.currentTurnIndex++}StartFunctionEvaluationFromGame(t,e){this.callStack.Push(g.FunctionEvaluationFromGame,this.evaluationStack.length),this.callStack.currentElement.currentPointer=K.StartOf(t),this.PassArgumentsToEvaluationStack(e)}PassArgumentsToEvaluationStack(t){if(null!==t)for(let e=0;e<t.length;e++){if(!("number"==typeof t[e]||"string"==typeof t[e]||"boolean"==typeof t[e]||t[e]instanceof w))throw new Error("ink arguments when calling EvaluateFunction / ChoosePathStringWithParameters must benumber, string, bool or InkList. Argument was "+(null===o(t[e])?"null":t[e].constructor.name));this.PushEvaluationStack(x.Create(t[e]))}}TryExitFunctionEvaluationFromGame(){return this.callStack.currentElement.type==g.FunctionEvaluationFromGame&&(this.currentPointer=K.Null,this.didSafeExit=!0,!0)}CompleteFunctionEvaluationFromGame(){if(this.callStack.currentElement.type!=g.FunctionEvaluationFromGame)throw new Error("Expected external function evaluation to be complete. Stack trace: "+this.callStack.callStackTrace);let t=this.callStack.currentElement.evaluationStackHeightWhenPushed,e=null;for(;this.evaluationStack.length>t;){let t=this.PopEvaluationStack();null===e&&(e=t)}if(this.PopCallStack(g.FunctionEvaluationFromGame),e){if(e instanceof V)return null;let t=s(e,x);return t.valueType==f.DivertTarget?t.valueObject.toString():t.valueObject}return null}AddError(t,e){e?(null==this._currentWarnings&&(this._currentWarnings=[]),this._currentWarnings.push(t)):(null==this._currentErrors&&(this._currentErrors=[]),this._currentErrors.push(t))}OutputStreamDirty(){this._outputStreamTextDirty=!0,this._outputStreamTagsDirty=!0}}class ee{constructor(){this.startTime=void 0}get ElapsedMilliseconds(){return void 0===this.startTime?0:(new Date).getTime()-this.startTime}Start(){this.startTime=(new Date).getTime()}Stop(){this.startTime=void 0}}var ne;!function(t){t[t.Author=0]="Author",t[t.Warning=1]="Warning",t[t.Error=2]="Error"}(ne||(ne={})),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&t>-9007199254740992&&t<9007199254740992&&Math.floor(t)===t});let ie=class t extends S{get currentChoices(){let t=[];if(null===this._state)return v("this._state");for(let e of this._state.currentChoices)e.isInvisibleDefault||(e.index=t.length,t.push(e));return t}get currentText(){return this.IfAsyncWeCant("call currentText since it's a work in progress"),this.state.currentText}get currentTags(){return this.IfAsyncWeCant("call currentTags since it's a work in progress"),this.state.currentTags}get currentErrors(){return this.state.currentErrors}get currentWarnings(){return this.state.currentWarnings}get currentFlowName(){return this.state.currentFlowName}get currentFlowIsDefaultFlow(){return this.state.currentFlowIsDefaultFlow}get aliveFlowNames(){return this.state.aliveFlowNames}get hasError(){return this.state.hasError}get hasWarning(){return this.state.hasWarning}get variablesState(){return this.state.variablesState}get listDefinitions(){return this._listDefinitions}get state(){return this._state}StartProfiling(){}EndProfiling(){}constructor(){let e;super(),this.inkVersionMinimumCompatible=18,this.onError=null,this.onDidContinue=null,this.onMakeChoice=null,this.onEvaluateFunction=null,this.onCompleteEvaluateFunction=null,this.onChoosePathString=null,this._prevContainers=[],this.allowExternalFunctionFallbacks=!1,this._listDefinitions=null,this._variableObservers=null,this._hasValidatedExternals=!1,this._temporaryEvaluationContainer=null,this._asyncContinueActive=!1,this._stateSnapshotAtLastNewline=null,this._sawLookaheadUnsafeFunctionAfterNewline=!1,this._recursiveContinueCount=0,this._asyncSaving=!1,this._profiler=null;let n=null,i=null;if(arguments[0]instanceof k)e=arguments[0],void 0!==arguments[1]&&(n=arguments[1]),this._mainContentContainer=e;else if("string"==typeof arguments[0]){let t=arguments[0];i=Zt.TextToDictionary(t)}else i=arguments[0];if(null!=n&&(this._listDefinitions=new Kt(n)),this._externals=new Map,null!==i){let e=i,n=e.inkVersion;if(null==n)throw new Error("ink version number not found. Are you sure it's a valid .ink.json file?");let r=parseInt(n);if(r>t.inkVersionCurrent)throw new Error("Version of ink used to build story was newer than the current version of the engine");if(r<this.inkVersionMinimumCompatible)throw new Error("Version of ink used to build story is too old to be loaded by this version of the engine");r!=t.inkVersionCurrent&&console.warn("WARNING: Version of ink used to build story doesn't match current version of engine. Non-critical, but recommend synchronising.");let a,o=e.root;if(null==o)throw new Error("Root node for ink not found. Are you sure it's a valid .ink.json file?");(a=e.listDefs)&&(this._listDefinitions=Ht.JTokenToListDefinitions(a)),this._mainContentContainer=s(Ht.JTokenToRuntimeObject(o),k),this.ResetState()}}ToJson(e){let n=!1;if(e||(n=!0,e=new Zt.Writer),e.WriteObjectStart(),e.WriteIntProperty("inkVersion",t.inkVersionCurrent),e.WriteProperty("root",(t=>Ht.WriteRuntimeContainer(t,this._mainContentContainer))),null!=this._listDefinitions){e.WritePropertyStart("listDefs"),e.WriteObjectStart();for(let t of this._listDefinitions.lists){e.WritePropertyStart(t.name),e.WriteObjectStart();for(let[n,i]of t.items){let t=b.fromSerializedKey(n),r=i;e.WriteIntProperty(t.itemName,r)}e.WriteObjectEnd(),e.WritePropertyEnd()}e.WriteObjectEnd(),e.WritePropertyEnd()}if(e.WriteObjectEnd(),n)return e.toString()}ResetState(){this.IfAsyncWeCant("ResetState"),this._state=new te(this),this._state.variablesState.ObserveVariableChange(this.VariableStateDidChangeEvent.bind(this)),this.ResetGlobals()}ResetErrors(){if(null===this._state)return v("this._state");this._state.ResetErrors()}ResetCallstack(){if(this.IfAsyncWeCant("ResetCallstack"),null===this._state)return v("this._state");this._state.ForceEnd()}ResetGlobals(){if(this._mainContentContainer.namedContent.get("global decl")){let t=this.state.currentPointer.copy();this.ChoosePath(new p("global decl"),!1),this.ContinueInternal(),this.state.currentPointer=t}this.state.variablesState.SnapshotDefaultGlobals()}SwitchFlow(t){if(this.IfAsyncWeCant("switch flow"),this._asyncSaving)throw new Error("Story is already in background saving mode, can't switch flow to "+t);this.state.SwitchFlow_Internal(t)}RemoveFlow(t){this.state.RemoveFlow_Internal(t)}SwitchToDefaultFlow(){this.state.SwitchToDefaultFlow_Internal()}Continue(){return this.ContinueAsync(0),this.currentText}get canContinue(){return this.state.canContinue}get asyncContinueComplete(){return!this._asyncContinueActive}ContinueAsync(t){this._hasValidatedExternals||this.ValidateExternalBindings(),this.ContinueInternal(t)}ContinueInternal(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null!=this._profiler&&this._profiler.PreContinue();let e=t>0;if(this._recursiveContinueCount++,this._asyncContinueActive)this._asyncContinueActive&&!e&&(this._asyncContinueActive=!1);else{if(this._asyncContinueActive=e,!this.canContinue)throw new Error("Can't continue - should check canContinue before calling Continue");this._state.didSafeExit=!1,this._state.ResetOutput(),1==this._recursiveContinueCount&&this._state.variablesState.StartVariableObservation()}let n=new ee;n.Start();let i=!1;this._sawLookaheadUnsafeFunctionAfterNewline=!1;do{try{i=this.ContinueSingleStep()}catch(t){if(!(t instanceof E))throw t;this.AddError(t.message,void 0,t.useEndLineNumber);break}if(i)break;if(this._asyncContinueActive&&n.ElapsedMilliseconds>t)break}while(this.canContinue);n.Stop();let r=null;if(!i&&this.canContinue||(null!==this._stateSnapshotAtLastNewline&&this.RestoreStateSnapshot(),this.canContinue||(this.state.callStack.canPopThread&&this.AddError("Thread available to pop, threads should always be flat by the end of evaluation?"),0!=this.state.generatedChoices.length||this.state.didSafeExit||null!=this._temporaryEvaluationContainer||(this.state.callStack.CanPop(g.Tunnel)?this.AddError("unexpectedly reached end of content. Do you need a '->->' to return from a tunnel?"):this.state.callStack.CanPop(g.Function)?this.AddError("unexpectedly reached end of content. Do you need a '~ return'?"):this.state.callStack.canPop?this.AddError("unexpectedly reached end of content for unknown reason. Please debug compiler!"):this.AddError("ran out of content. Do you need a '-> DONE' or '-> END'?"))),this.state.didSafeExit=!1,this._sawLookaheadUnsafeFunctionAfterNewline=!1,1==this._recursiveContinueCount&&(r=this._state.variablesState.CompleteVariableObservation()),this._asyncContinueActive=!1,null!==this.onDidContinue&&this.onDidContinue()),this._recursiveContinueCount--,null!=this._profiler&&this._profiler.PostContinue(),this.state.hasError||this.state.hasWarning){if(null===this.onError){let t=new y;throw t.Append("Ink had "),this.state.hasError&&(t.Append(`${this.state.currentErrors.length}`),t.Append(1==this.state.currentErrors.length?" error":"errors"),this.state.hasWarning&&t.Append(" and ")),this.state.hasWarning&&(t.Append(`${this.state.currentWarnings.length}`),t.Append(1==this.state.currentWarnings.length?" warning":"warnings"),this.state.hasWarning&&t.Append(" and ")),t.Append(". It is strongly suggested that you assign an error handler to story.onError. The first issue was: "),t.Append(this.state.hasError?this.state.currentErrors[0]:this.state.currentWarnings[0]),new E(t.toString())}if(this.state.hasError)for(let t of this.state.currentErrors)this.onError(t,ne.Error);if(this.state.hasWarning)for(let t of this.state.currentWarnings)this.onError(t,ne.Warning);this.ResetErrors()}null!=r&&Object.keys(r).length>0&&this._state.variablesState.NotifyObservers(r)}ContinueSingleStep(){if(null!=this._profiler&&this._profiler.PreStep(),this.Step(),null!=this._profiler&&this._profiler.PostStep(),this.canContinue||this.state.callStack.elementIsEvaluateFromGame||this.TryFollowDefaultInvisibleChoice(),null!=this._profiler&&this._profiler.PreSnapshot(),!this.state.inStringEvaluation){if(null!==this._stateSnapshotAtLastNewline){if(null===this._stateSnapshotAtLastNewline.currentTags)return v("this._stateAtLastNewline.currentTags");if(null===this.state.currentTags)return v("this.state.currentTags");let e=this.CalculateNewlineOutputStateChange(this._stateSnapshotAtLastNewline.currentText,this.state.currentText,this._stateSnapshotAtLastNewline.currentTags.length,this.state.currentTags.length);if(e==t.OutputStateChange.ExtendedBeyondNewline||this._sawLookaheadUnsafeFunctionAfterNewline)return this.RestoreStateSnapshot(),!0;e==t.OutputStateChange.NewlineRemoved&&this.DiscardSnapshot()}this.state.outputStreamEndsInNewline&&(this.canContinue?null==this._stateSnapshotAtLastNewline&&this.StateSnapshot():this.DiscardSnapshot())}return null!=this._profiler&&this._profiler.PostSnapshot(),!1}CalculateNewlineOutputStateChange(e,n,i,r){if(null===e)return v("prevText");if(null===n)return v("currText");let s=n.length>=e.length&&e.length>0&&"\n"==n.charAt(e.length-1);if(i==r&&e.length==n.length&&s)return t.OutputStateChange.NoChange;if(!s)return t.OutputStateChange.NewlineRemoved;if(r>i)return t.OutputStateChange.ExtendedBeyondNewline;for(let i=e.length;i<n.length;i++){let e=n.charAt(i);if(" "!=e&&"\t"!=e)return t.OutputStateChange.ExtendedBeyondNewline}return t.OutputStateChange.NoChange}ContinueMaximally(){this.IfAsyncWeCant("ContinueMaximally");let t=new y;for(;this.canContinue;)t.Append(this.Continue());return t.toString()}ContentAtPath(t){return this.mainContentContainer.ContentAtPath(t)}KnotContainerWithName(t){let e=this.mainContentContainer.namedContent.get(t);return e instanceof k?e:null}PointerAtPath(t){if(0==t.length)return K.Null;let e=new K,n=t.length,i=null;return null===t.lastComponent?v("path.lastComponent"):(t.lastComponent.isIndex?(n=t.length-1,i=this.mainContentContainer.ContentAtPath(t,void 0,n),e.container=i.container,e.index=t.lastComponent.index):(i=this.mainContentContainer.ContentAtPath(t),e.container=i.container,e.index=-1),null==i.obj||i.obj==this.mainContentContainer&&n>0?this.Error("Failed to find content at path '"+t+"', and no approximation of it was possible."):i.approximate&&this.Warning("Failed to find content at path '"+t+"', so it was approximated to: '"+i.obj.path+"'."),e)}StateSnapshot(){this._stateSnapshotAtLastNewline=this._state,this._state=this._state.CopyAndStartPatching(!1)}RestoreStateSnapshot(){null===this._stateSnapshotAtLastNewline&&v("_stateSnapshotAtLastNewline"),this._stateSnapshotAtLastNewline.RestoreAfterPatch(),this._state=this._stateSnapshotAtLastNewline,this._stateSnapshotAtLastNewline=null,this._asyncSaving||this._state.ApplyAnyPatch()}DiscardSnapshot(){this._asyncSaving||this._state.ApplyAnyPatch(),this._stateSnapshotAtLastNewline=null}CopyStateForBackgroundThreadSave(){if(this.IfAsyncWeCant("start saving on a background thread"),this._asyncSaving)throw new Error("Story is already in background saving mode, can't call CopyStateForBackgroundThreadSave again!");let t=this._state;return this._state=this._state.CopyAndStartPatching(!0),this._asyncSaving=!0,t}BackgroundSaveComplete(){null===this._stateSnapshotAtLastNewline&&this._state.ApplyAnyPatch(),this._asyncSaving=!1}Step(){let t=!0,e=this.state.currentPointer.copy();if(e.isNull)return;let n=r(e.Resolve(),k);for(;n&&(this.VisitContainer(n,!0),0!=n.content.length);)e=K.StartOf(n),n=r(e.Resolve(),k);this.state.currentPointer=e.copy(),null!=this._profiler&&this._profiler.Step(this.state.callStack);let i=e.Resolve(),s=this.PerformLogicAndFlowControl(i);if(this.state.currentPointer.isNull)return;s&&(t=!1);let a=r(i,U);if(a){let e=this.ProcessChoice(a);e&&this.state.generatedChoices.push(e),i=null,t=!1}if(i instanceof k&&(t=!1),t){let t=r(i,F);if(t&&-1==t.contextIndex){let e=this.state.callStack.ContextForVariableNamed(t.variableName);i=new F(t.variableName,e)}this.state.inExpressionEvaluation?this.state.PushEvaluationStack(i):this.state.PushToOutputStream(i)}this.NextContent();let o=r(i,D);o&&o.commandType==D.CommandType.StartThread&&this.state.callStack.PushThread()}VisitContainer(t,e){t.countingAtStartOnly&&!e||(t.visitsShouldBeCounted&&this.state.IncrementVisitCountForContainer(t),t.turnIndexShouldBeCounted&&this.state.RecordTurnIndexVisitToContainer(t))}VisitChangedContainersDueToDivert(){let t=this.state.previousPointer.copy(),e=this.state.currentPointer.copy();if(e.isNull||-1==e.index)return;if(this._prevContainers.length=0,!t.isNull){let e=r(t.Resolve(),k)||r(t.container,k);for(;e;)this._prevContainers.push(e),e=r(e.parent,k)}let n=e.Resolve();if(null==n)return;let i=r(n.parent,k),s=!0;for(;i&&(this._prevContainers.indexOf(i)<0||i.countingAtStartOnly);){let t=i.content.length>0&&n==i.content[0]&&s;t||(s=!1),this.VisitContainer(i,t),n=i,i=r(i.parent,k)}}PopChoiceStringAndTags(t){let e=s(this.state.PopEvaluationStack(),I);for(;this.state.evaluationStack.length>0&&null!=r(this.state.PeekEvaluationStack(),qt);){let e=r(this.state.PopEvaluationStack(),qt);e&&t.push(e.text)}return e.value}ProcessChoice(t){let e=!0;if(t.hasCondition){let t=this.state.PopEvaluationStack();this.IsTruthy(t)||(e=!1)}let n="",i="",r=[];if(t.hasChoiceOnlyContent&&(i=this.PopChoiceStringAndTags(r)||""),t.hasStartContent&&(n=this.PopChoiceStringAndTags(r)||""),t.onceOnly){this.state.VisitCountForContainer(t.choiceTarget)>0&&(e=!1)}if(!e)return null;let s=new Ut;return s.targetPath=t.pathOnChoice,s.sourcePath=t.path.toString(),s.isInvisibleDefault=t.isInvisibleDefault,s.threadAtGeneration=this.state.callStack.ForkThread(),s.tags=r.reverse(),s.text=(n+i).replace(/^[ \t]+|[ \t]+$/g,""),s}IsTruthy(t){if(t instanceof x){let e=t;if(e instanceof O){let t=e;return this.Error("Shouldn't use a divert target (to "+t.targetPath+") as a conditional value. Did you intend a function call 'likeThis()' or a read count check 'likeThis'? (no arrows)"),!1}return e.isTruthy}return!1}PerformLogicAndFlowControl(t){if(null==t)return!1;if(t instanceof H){let e=t;if(e.isConditional){let t=this.state.PopEvaluationStack();if(!this.IsTruthy(t))return!0}if(e.hasVariableTarget){let t=e.variableDivertName,n=this.state.variablesState.GetVariableWithName(t);if(null==n)this.Error("Tried to divert using a target from a variable that could not be found ("+t+")");else if(!(n instanceof O)){let e=r(n,P),i="Tried to divert to a target from a variable, but the variable ("+t+") didn't contain a divert target, it ";e instanceof P&&0==e.value?i+="was empty/null (the value 0).":i+="contained '"+n+"'.",this.Error(i)}let i=s(n,O);this.state.divertedPointer=this.PointerAtPath(i.targetPath)}else{if(e.isExternal)return this.CallExternalFunction(e.targetPathString,e.externalArgs),!0;this.state.divertedPointer=e.targetPointer.copy()}return e.pushesToStack&&this.state.callStack.Push(e.stackPushType,void 0,this.state.outputStream.length),this.state.divertedPointer.isNull&&!e.isExternal&&(e&&e.debugMetadata&&null!=e.debugMetadata.sourceName?this.Error("Divert target doesn't exist: "+e.debugMetadata.sourceName):this.Error("Divert resolution failed: "+e)),!0}if(t instanceof D){let e=t;switch(e.commandType){case D.CommandType.EvalStart:this.Assert(!1===this.state.inExpressionEvaluation,"Already in expression evaluation?"),this.state.inExpressionEvaluation=!0;break;case D.CommandType.EvalEnd:this.Assert(!0===this.state.inExpressionEvaluation,"Not in expression evaluation mode"),this.state.inExpressionEvaluation=!1;break;case D.CommandType.EvalOutput:if(this.state.evaluationStack.length>0){let t=this.state.PopEvaluationStack();if(!(t instanceof V)){let e=new I(t.toString());this.state.PushToOutputStream(e)}}break;case D.CommandType.NoOp:break;case D.CommandType.Duplicate:this.state.PushEvaluationStack(this.state.PeekEvaluationStack());break;case D.CommandType.PopEvaluatedValue:this.state.PopEvaluationStack();break;case D.CommandType.PopFunction:case D.CommandType.PopTunnel:let t=e.commandType==D.CommandType.PopFunction?g.Function:g.Tunnel,n=null;if(t==g.Tunnel){let t=this.state.PopEvaluationStack();n=r(t,O),null===n&&this.Assert(t instanceof V,"Expected void if ->-> doesn't override target")}if(this.state.TryExitFunctionEvaluationFromGame())break;if(this.state.callStack.currentElement.type==t&&this.state.callStack.canPop)this.state.PopCallStack(),n&&(this.state.divertedPointer=this.PointerAtPath(n.targetPath));else{let e=new Map;e.set(g.Function,"function return statement (~ return)"),e.set(g.Tunnel,"tunnel onwards statement (->->)");let n=e.get(this.state.callStack.currentElement.type);this.state.callStack.canPop||(n="end of flow (-> END or choice)");let i="Found "+e.get(t)+", when expected "+n;this.Error(i)}break;case D.CommandType.BeginString:this.state.PushToOutputStream(e),this.Assert(!0===this.state.inExpressionEvaluation,"Expected to be in an expression when evaluating a string"),this.state.inExpressionEvaluation=!1;break;case D.CommandType.BeginTag:this.state.PushToOutputStream(e);break;case D.CommandType.EndTag:if(this.state.inStringEvaluation){let t=[],e=0;for(let n=this.state.outputStream.length-1;n>=0;--n){let i=this.state.outputStream[n];e++;let s=r(i,D);if(null!=s){if(s.commandType==D.CommandType.BeginTag)break;this.Error("Unexpected ControlCommand while extracting tag from choice");break}i instanceof I&&t.push(i)}this.state.PopFromOutputStream(e);let n=new y;for(let e of t.reverse())n.Append(e.toString());let i=new qt(this.state.CleanOutputWhitespace(n.toString()));this.state.PushEvaluationStack(i)}else this.state.PushToOutputStream(e);break;case D.CommandType.EndString:{let t=[],e=[],n=0;for(let i=this.state.outputStream.length-1;i>=0;--i){let s=this.state.outputStream[i];n++;let a=r(s,D);if(a&&a.commandType==D.CommandType.BeginString)break;s instanceof qt&&e.push(s),s instanceof I&&t.push(s)}this.state.PopFromOutputStream(n);for(let t of e)this.state.PushToOutputStream(t);t=t.reverse();let i=new y;for(let e of t)i.Append(e.toString());this.state.inExpressionEvaluation=!0,this.state.PushEvaluationStack(new I(i.toString()));break}case D.CommandType.ChoiceCount:let i=this.state.generatedChoices.length;this.state.PushEvaluationStack(new P(i));break;case D.CommandType.Turns:this.state.PushEvaluationStack(new P(this.state.currentTurnIndex+1));break;case D.CommandType.TurnsSince:case D.CommandType.ReadCount:let a=this.state.PopEvaluationStack();if(!(a instanceof O)){let t="";a instanceof P&&(t=". Did you accidentally pass a read count ('knot_name') instead of a target ('-> knot_name')?"),this.Error("TURNS_SINCE / READ_COUNT expected a divert target (knot, stitch, label name), but saw "+a+t);break}let o,l=s(a,O),h=r(this.ContentAtPath(l.targetPath).correctObj,k);null!=h?o=e.commandType==D.CommandType.TurnsSince?this.state.TurnsSinceForContainer(h):this.state.VisitCountForContainer(h):(o=e.commandType==D.CommandType.TurnsSince?-1:0,this.Warning("Failed to find container for "+e.toString()+" lookup at "+l.targetPath.toString())),this.state.PushEvaluationStack(new P(o));break;case D.CommandType.Random:{let t=r(this.state.PopEvaluationStack(),P),e=r(this.state.PopEvaluationStack(),P);if(null==e||e instanceof P==!1)return this.Error("Invalid value for minimum parameter of RANDOM(min, max)");if(null==t||t instanceof P==!1)return this.Error("Invalid value for maximum parameter of RANDOM(min, max)");if(null===t.value)return v("maxInt.value");if(null===e.value)return v("minInt.value");let n=t.value-e.value+1;(!isFinite(n)||n>Number.MAX_SAFE_INTEGER)&&(n=Number.MAX_SAFE_INTEGER,this.Error("RANDOM was called with a range that exceeds the size that ink numbers can use.")),n<=0&&this.Error("RANDOM was called with minimum as "+e.value+" and maximum as "+t.value+". The maximum must be larger");let i=this.state.storySeed+this.state.previousRandom,s=new Xt(i).next(),a=s%n+e.value;this.state.PushEvaluationStack(new P(a)),this.state.previousRandom=s;break}case D.CommandType.SeedRandom:let u=r(this.state.PopEvaluationStack(),P);if(null==u||u instanceof P==!1)return this.Error("Invalid value passed to SEED_RANDOM");if(null===u.value)return v("minInt.value");this.state.storySeed=u.value,this.state.previousRandom=0,this.state.PushEvaluationStack(new V);break;case D.CommandType.VisitIndex:let c=this.state.VisitCountForContainer(this.state.currentPointer.container)-1;this.state.PushEvaluationStack(new P(c));break;case D.CommandType.SequenceShuffleIndex:let d=this.NextSequenceShuffleIndex();this.state.PushEvaluationStack(new P(d));break;case D.CommandType.StartThread:break;case D.CommandType.Done:this.state.callStack.canPopThread?this.state.callStack.PopThread():(this.state.didSafeExit=!0,this.state.currentPointer=K.Null);break;case D.CommandType.End:this.state.ForceEnd();break;case D.CommandType.ListFromInt:let p=r(this.state.PopEvaluationStack(),P),m=s(this.state.PopEvaluationStack(),I);if(null===p)throw new E("Passed non-integer when creating a list element from a numerical value.");let f=null;if(null===this.listDefinitions)return v("this.listDefinitions");let C=this.listDefinitions.TryListGetDefinition(m.value,null);if(!C.exists)throw new E("Failed to find LIST called "+m.value);{if(null===p.value)return v("minInt.value");let t=C.result.TryGetItemWithValue(p.value,b.Null);t.exists&&(f=new W(t.result,p.value))}null==f&&(f=new W),this.state.PushEvaluationStack(f);break;case D.CommandType.ListRange:let S=r(this.state.PopEvaluationStack(),x),_=r(this.state.PopEvaluationStack(),x),T=r(this.state.PopEvaluationStack(),W);if(null===T||null===_||null===S)throw new E("Expected list, minimum and maximum for LIST_RANGE");if(null===T.value)return v("targetList.value");let A=T.value.ListWithSubRange(_.valueObject,S.valueObject);this.state.PushEvaluationStack(new W(A));break;case D.CommandType.ListRandom:{let t=this.state.PopEvaluationStack();if(null===t)throw new E("Expected list for LIST_RANDOM");let e=t.value,n=null;if(null===e)throw v("list");if(0==e.Count)n=new w;else{let t=this.state.storySeed+this.state.previousRandom,i=new Xt(t).next(),r=i%e.Count,s=e.entries();for(let t=0;t<=r-1;t++)s.next();let a=s.next().value,o={Key:b.fromSerializedKey(a[0]),Value:a[1]};if(null===o.Key.originName)return v("randomItem.Key.originName");n=new w(o.Key.originName,this),n.Add(o.Key,o.Value),this.state.previousRandom=i}this.state.PushEvaluationStack(new W(n));break}default:this.Error("unhandled ControlCommand: "+e)}return!0}if(t instanceof z){let e=t,n=this.state.PopEvaluationStack();return this.state.variablesState.Assign(e,n),!0}if(t instanceof pt){let e=t,n=null;if(null!=e.pathForCount){let t=e.containerForCount,i=this.state.VisitCountForContainer(t);n=new P(i)}else n=this.state.variablesState.GetVariableWithName(e.name),null==n&&(this.Warning("Variable not found: '"+e.name+"'. Using default value of 0 (false). This can happen with temporary variables if the declaration hasn't yet been hit. Globals are always given a default value on load if a value doesn't exist in the save state."),n=new P(0));return this.state.PushEvaluationStack(n),!0}if(t instanceof j){let e=t,n=this.state.PopEvaluationStack(e.numberOfParameters),i=e.Call(n);return this.state.PushEvaluationStack(i),!0}return!1}ChoosePathString(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(this.IfAsyncWeCant("call ChoosePathString right now"),null!==this.onChoosePathString&&this.onChoosePathString(t,n),e)this.ResetCallstack();else if(this.state.callStack.currentElement.type==g.Function){let e="",n=this.state.callStack.currentElement.currentPointer.container;throw null!=n&&(e="("+n.path.toString()+") "),new Error("Story was running a function "+e+"when you called ChoosePathString("+t+") - this is almost certainly not not what you want! Full stack trace: \n"+this.state.callStack.callStackTrace)}this.state.PassArgumentsToEvaluationStack(n),this.ChoosePath(new p(t))}IfAsyncWeCant(t){if(this._asyncContinueActive)throw new Error("Can't "+t+". Story is in the middle of a ContinueAsync(). Make more ContinueAsync() calls or a single Continue() call beforehand.")}ChoosePath(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.state.SetChosenPath(t,e),this.VisitChangedContainersDueToDivert()}ChooseChoiceIndex(t){let e=this.currentChoices;this.Assert(t>=0&&t<e.length,"choice out of range");let n=e[t];return null!==this.onMakeChoice&&this.onMakeChoice(n),null===n.threadAtGeneration?v("choiceToChoose.threadAtGeneration"):null===n.targetPath?v("choiceToChoose.targetPath"):(this.state.callStack.currentThread=n.threadAtGeneration,void this.ChoosePath(n.targetPath))}HasFunction(t){try{return null!=this.KnotContainerWithName(t)}catch(t){return!1}}EvaluateFunction(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null!==this.onEvaluateFunction&&this.onEvaluateFunction(t,e),this.IfAsyncWeCant("evaluate a function"),null==t)throw new Error("Function is null");if(""==t||""==t.trim())throw new Error("Function is empty or white space.");let i=this.KnotContainerWithName(t);if(null==i)throw new Error("Function doesn't exist: '"+t+"'");let r=[];r.push(...this.state.outputStream),this._state.ResetOutput(),this.state.StartFunctionEvaluationFromGame(i,e);let s=new y;for(;this.canContinue;)s.Append(this.Continue());let a=s.toString();this._state.ResetOutput(r);let o=this.state.CompleteFunctionEvaluationFromGame();return null!=this.onCompleteEvaluateFunction&&this.onCompleteEvaluateFunction(t,e,a,o),n?{returned:o,output:a}:o}EvaluateExpression(t){let e=this.state.callStack.elements.length;this.state.callStack.Push(g.Tunnel),this._temporaryEvaluationContainer=t,this.state.GoToStart();let n=this.state.evaluationStack.length;return this.Continue(),this._temporaryEvaluationContainer=null,this.state.callStack.elements.length>e&&this.state.PopCallStack(),this.state.evaluationStack.length>n?this.state.PopEvaluationStack():null}CallExternalFunction(t,e){if(null===t)return v("funcName");let n=this._externals.get(t),i=null,r=void 0!==n;if(r&&!n.lookAheadSafe&&this._state.inStringEvaluation&&this.Error("External function "+t+' could not be called because 1) it wasn\'t marked as lookaheadSafe when BindExternalFunction was called and 2) the story is in the middle of string generation, either because choice text is being generated, or because you have ink like "hello {func()}". You can work around this by generating the result of your function into a temporary variable before the string or choice gets generated: ~ temp x = '+t+"()"),r&&!n.lookAheadSafe&&null!==this._stateSnapshotAtLastNewline)return void(this._sawLookaheadUnsafeFunctionAfterNewline=!0);if(!r){if(this.allowExternalFunctionFallbacks)return i=this.KnotContainerWithName(t),this.Assert(null!==i,"Trying to call EXTERNAL function '"+t+"' which has not been bound, and fallback ink function could not be found."),this.state.callStack.Push(g.Function,void 0,this.state.outputStream.length),void(this.state.divertedPointer=K.StartOf(i));this.Assert(!1,"Trying to call EXTERNAL function '"+t+"' which has not been bound (and ink fallbacks disabled).")}let a=[];for(let t=0;t<e;++t){let t=s(this.state.PopEvaluationStack(),x).valueObject;a.push(t)}a.reverse();let o=n.function(a),l=null;null!=o?(l=x.Create(o),this.Assert(null!==l,"Could not create ink value from returned object of type "+typeof o)):l=new V,this.state.PushEvaluationStack(l)}BindExternalFunctionGeneral(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.IfAsyncWeCant("bind an external function"),this.Assert(!this._externals.has(t),"Function '"+t+"' has already been bound."),this._externals.set(t,{function:e,lookAheadSafe:n})}TryCoerce(t){return t}BindExternalFunction(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.Assert(null!=e,"Can't bind a null function"),this.BindExternalFunctionGeneral(t,(t=>{this.Assert(t.length>=e.length,"External function expected "+e.length+" arguments");let n=[];for(let e=0,i=t.length;e<i;e++)n[e]=this.TryCoerce(t[e]);return e.apply(null,n)}),n)}UnbindExternalFunction(t){this.IfAsyncWeCant("unbind an external a function"),this.Assert(this._externals.has(t),"Function '"+t+"' has not been bound."),this._externals.delete(t)}ValidateExternalBindings(){let t=null,e=null,n=arguments[1]||new Set;if(arguments[0]instanceof k&&(t=arguments[0]),arguments[0]instanceof S&&(e=arguments[0]),null===t&&null===e)if(this.ValidateExternalBindings(this._mainContentContainer,n),this._hasValidatedExternals=!0,0==n.size)this._hasValidatedExternals=!0;else{let t="Error: Missing function binding for external";t+=n.size>1?"s":"",t+=": '",t+=Array.from(n).join("', '"),t+="' ",t+=this.allowExternalFunctionFallbacks?", and no fallback ink function found.":" (ink fallbacks disabled)",this.Error(t)}else if(null!=t){for(let e of t.content){null!=e&&e.hasValidName||this.ValidateExternalBindings(e,n)}for(let[,e]of t.namedContent)this.ValidateExternalBindings(r(e,S),n)}else if(null!=e){let t=r(e,H);if(t&&t.isExternal){let e=t.targetPathString;if(null===e)return v("name");if(!this._externals.has(e))if(this.allowExternalFunctionFallbacks){this.mainContentContainer.namedContent.has(e)||n.add(e)}else n.add(e)}}}ObserveVariable(t,e){if(this.IfAsyncWeCant("observe a new variable"),null===this._variableObservers&&(this._variableObservers=new Map),!this.state.variablesState.GlobalVariableExistsWithName(t))throw new Error("Cannot observe variable '"+t+"' because it wasn't declared in the ink story.");this._variableObservers.has(t)?this._variableObservers.get(t).push(e):this._variableObservers.set(t,[e])}ObserveVariables(t,e){for(let n=0,i=t.length;n<i;n++)this.ObserveVariable(t[n],e[n])}RemoveVariableObserver(t,e){if(this.IfAsyncWeCant("remove a variable observer"),null!==this._variableObservers)if(null!=e){if(this._variableObservers.has(e))if(null!=t){let n=this._variableObservers.get(e);null!=n&&(n.splice(n.indexOf(t),1),0===n.length&&this._variableObservers.delete(e))}else this._variableObservers.delete(e)}else if(null!=t){let e=this._variableObservers.keys();for(let n of e){let e=this._variableObservers.get(n);null!=e&&(e.splice(e.indexOf(t),1),0===e.length&&this._variableObservers.delete(n))}}}VariableStateDidChangeEvent(t,e){if(null===this._variableObservers)return;let n=this._variableObservers.get(t);if(void 0!==n){if(!(e instanceof x))throw new Error("Tried to get the value of a variable that isn't a standard type");let i=s(e,x);for(let e of n)e(t,i.valueObject)}}get globalTags(){return this.TagsAtStartOfFlowContainerWithPathString("")}TagsForContentAtPath(t){return this.TagsAtStartOfFlowContainerWithPathString(t)}TagsAtStartOfFlowContainerWithPathString(t){let e=new p(t),n=this.ContentAtPath(e).container;if(null===n)return v("flowContainer");for(;;){let t=n.content[0];if(!(t instanceof k))break;n=t}let i=!1,s=null;for(let t of n.content){let e=r(t,D);if(null!=e)e.commandType==D.CommandType.BeginTag?i=!0:e.commandType==D.CommandType.EndTag&&(i=!1);else{if(!i)break;{let e=r(t,I);null!==e?(null===s&&(s=[]),null!==e.value&&s.push(e.value)):this.Error("Tag contained non-text content. Only plain text is allowed when using globalTags or TagsAtContentPath. If you want to evaluate dynamic content, you need to use story.Continue().")}}}return s}BuildStringOfHierarchy(){let t=new y;return this.mainContentContainer.BuildStringOfHierarchy(t,0,this.state.currentPointer.Resolve()),t.toString()}BuildStringOfContainer(t){let e=new y;return t.BuildStringOfHierarchy(e,0,this.state.currentPointer.Resolve()),e.toString()}NextContent(){if(this.state.previousPointer=this.state.currentPointer.copy(),!this.state.divertedPointer.isNull&&(this.state.currentPointer=this.state.divertedPointer.copy(),this.state.divertedPointer=K.Null,this.VisitChangedContainersDueToDivert(),!this.state.currentPointer.isNull))return;if(!this.IncrementContentPointer()){let t=!1;this.state.callStack.CanPop(g.Function)?(this.state.PopCallStack(g.Function),this.state.inExpressionEvaluation&&this.state.PushEvaluationStack(new V),t=!0):this.state.callStack.canPopThread?(this.state.callStack.PopThread(),t=!0):this.state.TryExitFunctionEvaluationFromGame(),t&&!this.state.currentPointer.isNull&&this.NextContent()}}IncrementContentPointer(){let t=!0,e=this.state.callStack.currentElement.currentPointer.copy();if(e.index++,null===e.container)return v("pointer.container");for(;e.index>=e.container.content.length;){t=!1;let n=r(e.container.parent,k);if(n instanceof k==!1)break;let i=n.content.indexOf(e.container);if(-1==i)break;if(e=new K(n,i),e.index++,t=!0,null===e.container)return v("pointer.container")}return t||(e=K.Null),this.state.callStack.currentElement.currentPointer=e.copy(),t}TryFollowDefaultInvisibleChoice(){let t=this._state.currentChoices,e=t.filter((t=>t.isInvisibleDefault));if(0==e.length||t.length>e.length)return!1;let n=e[0];return null===n.targetPath?v("choice.targetPath"):null===n.threadAtGeneration?v("choice.threadAtGeneration"):(this.state.callStack.currentThread=n.threadAtGeneration,null!==this._stateSnapshotAtLastNewline&&(this.state.callStack.currentThread=this.state.callStack.ForkThread()),this.ChoosePath(n.targetPath,!1),!0)}NextSequenceShuffleIndex(){let t=r(this.state.PopEvaluationStack(),P);if(!(t instanceof P))return this.Error("expected number of elements in sequence for shuffle index"),0;let e=this.state.currentPointer.container;if(null===e)return v("seqContainer");if(null===t.value)return v("numElementsIntVal.value");let n=t.value,i=s(this.state.PopEvaluationStack(),P).value;if(null===i)return v("seqCount");let a=i/n,o=i%n,l=e.path.toString(),h=0;for(let t=0,e=l.length;t<e;t++)h+=l.charCodeAt(t)||0;let u=h+a+this.state.storySeed,c=new Xt(Math.floor(u)),d=[];for(let t=0;t<n;++t)d.push(t);for(let t=0;t<=o;++t){let e=c.next()%d.length,n=d[e];if(d.splice(e,1),t==o)return n}throw new Error("Should never reach here")}Error(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new E(t);throw n.useEndLineNumber=e,n}Warning(t){this.AddError(t,!0)}AddError(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.currentDebugMetadata,r=e?"WARNING":"ERROR";if(null!=i){let e=n?i.endLineNumber:i.startLineNumber;t="RUNTIME "+r+": '"+i.fileName+"' line "+e+": "+t}else t=this.state.currentPointer.isNull?"RUNTIME "+r+": "+t:"RUNTIME "+r+": ("+this.state.currentPointer+"): "+t;this.state.AddError(t,e),e||this.state.ForceEnd()}Assert(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(0==t)throw null==e&&(e="Story assert"),new Error(e+" "+this.currentDebugMetadata)}get currentDebugMetadata(){let t,e=this.state.currentPointer;if(!e.isNull&&null!==e.Resolve()&&(t=e.Resolve().debugMetadata,null!==t))return t;for(let n=this.state.callStack.elements.length-1;n>=0;--n)if(e=this.state.callStack.elements[n].currentPointer,!e.isNull&&null!==e.Resolve()&&(t=e.Resolve().debugMetadata,null!==t))return t;for(let e=this.state.outputStream.length-1;e>=0;--e){if(t=this.state.outputStream[e].debugMetadata,null!==t)return t}return null}get mainContentContainer(){return this._temporaryEvaluationContainer?this._temporaryEvaluationContainer:this._mainContentContainer}};ie.inkVersionCurrent=21,function(t){var e;(e=t.OutputStateChange||(t.OutputStateChange={}))[e.NoChange=0]="NoChange",e[e.ExtendedBeyondNewline=1]="ExtendedBeyondNewline",e[e.NewlineRemoved=2]="NewlineRemoved"}(ie||(ie={}));class re extends ct{get flowLevel(){return st.Story}get hadError(){return this._hadError}get hadWarning(){return this._hadWarning}constructor(t){var e;super(null,t,null,!1,arguments.length>1&&void 0!==arguments[1]&&arguments[1]),e=this,this._errorHandler=null,this._hadError=!1,this._hadWarning=!1,this._dontFlattenContainers=new Set,this._listDefs=new Map,this.constants=new Map,this.externals=new Map,this.countAllVisits=!1,this.ExportRuntime=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var n,i;e._errorHandler=t,e.constants=new Map;for(const t of e.FindAll(rt)()){const n=e.constants.get(t.constantName);if(n&&!n.Equals(t.expression)){const i=`CONST '${t.constantName}' has been redefined with a different value. Multiple definitions of the same CONST are valid so long as they contain the same value. Initial definition was on ${n.debugMetadata}.`;e.Error(i,t,!1)}e.constants.set(t.constantName,t.expression)}e._listDefs=new Map;for(const t of e.FindAll(Tt)())(null===(n=t.identifier)||void 0===n?void 0:n.name)&&e._listDefs.set(null===(i=t.identifier)||void 0===i?void 0:i.name,t);e.externals=new Map,e.ResolveWeavePointNaming();const r=e.runtimeObject,s=new k;s.AddContent(D.EvalStart());const a=[];for(const[t,n]of e.variableDeclarations)if(n.isGlobalDeclaration){if(n.listDefinition)e._listDefs.set(t,n.listDefinition),s.AddContent(n.listDefinition.runtimeObject),a.push(n.listDefinition.runtimeListDefinition);else{if(!n.expression)throw new Error;n.expression.GenerateIntoContainer(s)}const i=new z(t,!0);i.isGlobal=!0,s.AddContent(i)}s.AddContent(D.EvalEnd()),s.AddContent(D.End()),e.variableDeclarations.size>0&&(s.name="global decl",r.AddToNamedContentOnly(s)),r.AddContent(D.Done());const o=new ie(r,a);return e.runtimeObject=o,e.hadError?null:(e.FlattenContainersIn(r),e.ResolveReferences(e),e.hadError?null:(o.ResetState(),o))},this.ResolveList=t=>{let e=this._listDefs.get(t);return e||null},this.ResolveListItem=function(t,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null;if(t)return(r=e._listDefs.get(t))?r.ItemNamed(n):null;{let t=null,r=null;for(const[,s]of e._listDefs.entries()){const a=s.ItemNamed(n);a&&(t?e.Error(`Ambiguous item name '${n}' found in multiple sets, including ${r.identifier} and ${s.identifier}`,i,!1):(t=a,r=s))}return t}},this.FlattenContainersIn=t=>{const e=new Set;if(t.content)for(const n of t.content){const t=r(n,k);t&&e.add(t)}if(t.namedContent)for(const[,n]of t.namedContent){const t=r(n,k);t&&e.add(t)}for(const t of e)this.TryFlattenContainer(t),this.FlattenContainersIn(t)},this.TryFlattenContainer=t=>{if(t.namedContent&&t.namedContent.size>0||t.hasValidName||this._dontFlattenContainers.has(t))return;const e=r(t.parent,k);if(e){let n=e.content.indexOf(t);e.content.splice(n,1);const i=t.ownDebugMetadata;if(t.content)for(const r of t.content)r.parent=null,null!==i&&null===r.ownDebugMetadata&&(r.debugMetadata=i),e.InsertContent(r,n),n+=1}},this.Error=(t,e,i)=>{let r=i?n.Warning:n.Error,s="";if(e instanceof d?(s+="TODO: ",r=n.Author):s+=i?"WARNING: ":"ERROR: ",e&&null!==e.debugMetadata&&e.debugMetadata.startLineNumber>=1&&(null!=e.debugMetadata.fileName&&(s+=`'${e.debugMetadata.fileName}' `),s+=`line ${e.debugMetadata.startLineNumber}: `),s+=t,t=s,null===this._errorHandler)throw new Error(t);this._errorHandler(t,r),this._hadError=r===n.Error,this._hadWarning=r===n.Warning},this.ResetError=()=>{this._hadError=!1,this._hadWarning=!1},this.IsExternal=t=>this.externals.has(t),this.AddExternal=t=>{this.externals.has(t.name)?this.Error(`Duplicate EXTERNAL definition of '${t.name}'`,t,!1):t.name&&this.externals.set(t.name,t)},this.DontFlattenContainer=t=>{this._dontFlattenContainers.add(t)},this.NameConflictError=(t,e,n,i)=>{t.Error(`${i} '${e}': name has already been used for a ${n.typeName.toLowerCase()} on ${n.debugMetadata}`)},this.CheckForNamingCollisions=function(t,n,i){var s;const a=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"")||t.typeName;if(re.IsReservedKeyword(null==n?void 0:n.name))return void t.Error(`'${n}' cannot be used for the name of a ${a.toLowerCase()} because it's a reserved keyword`);if(ft.IsBuiltIn((null==n?void 0:n.name)||""))return void t.Error(`'${n}' cannot be used for the name of a ${a.toLowerCase()} because it's a built in function`);const o=r(e.ContentWithNameAtLevel((null==n?void 0:n.name)||"",st.Knot),ct);if(o&&(o!==t||i===J.Arg))return void e.NameConflictError(t,(null==n?void 0:n.name)||"",o,a);if(i<J.List)return;for(const[i,r]of e._listDefs)if((null==n?void 0:n.name)===i&&t!==r&&r.variableAssignment!==t&&e.NameConflictError(t,null==n?void 0:n.name,r,a),!(t instanceof Mt))for(const i of r.itemDefinitions)(null==n?void 0:n.name)===i.name&&e.NameConflictError(t,(null==n?void 0:n.name)||"",i,a);if(i<=J.Var)return;const l=(null==n?void 0:n.name)&&e.variableDeclarations.get(null==n?void 0:n.name)||null;if(l&&l!==t&&l.isGlobalDeclaration&&null==l.listDefinition&&e.NameConflictError(t,(null==n?void 0:n.name)||"",l,a),i<J.SubFlowAndWeave)return;const h=new ot(n).ResolveFromContext(t);if(h&&h!==t)e.NameConflictError(t,(null==n?void 0:n.name)||"",h,a);else if(!(i<J.Arg)&&i!==J.Arg){let e=r(t,ct);if(e||(e=ht(t)),e&&e.hasParameters&&e.args)for(const i of e.args)if((null===(s=i.identifier)||void 0===s?void 0:s.name)===(null==n?void 0:n.name))return void t.Error(`${a} '${n}': name has already been used for a argument to ${e.identifier} on ${e.debugMetadata}`)}}}get typeName(){return"Story"}PreProcessTopLevelObjects(t){super.PreProcessTopLevelObjects(t);const e=[];for(let n of t)if(n instanceof Lt){const i=n,r=t.indexOf(n);if(t.splice(r,1),i.includedStory){const n=[],s=i.includedStory;if(null!=s.content){for(const t of s.content)t instanceof ct?e.push(t):n.push(t);n.push(new it("\n")),t.splice(r,0,...n)}}}else;t.splice(0,0,...e)}}re.IsReservedKeyword=t=>{switch(t){case"true":case"false":case"not":case"return":case"else":case"VAR":case"CONST":case"temp":case"LIST":case"function":return!0}return!1};class se extends L{get isSingleString(){if(1!==this.content.length)return!1;return this.content[0]instanceof it}constructor(t){super(),this.GenerateIntoContainer=t=>{t.AddContent(D.BeginString());for(const e of this.content)t.AddContent(e.runtimeObject);t.AddContent(D.EndString())},this.toString=()=>{let t="";for(const e of this.content)t+=e;return t},this.AddContent(t)}get typeName(){return"String"}Equals(t){const e=r(t,se);if(null===e)return!1;if(!this.isSingleString||!e.isSingleString)return!1;return this.toString()===e.toString()}}class ae extends c{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.GenerateRuntimeObject=()=>this.isStart?D.BeginTag():D.EndTag(),this.toString=()=>this.isStart?"#StartTag":"#EndTag",this.isStart=t,this.inChoice=e}get typeName(){return"Tag"}}class oe{constructor(t){this.rootPath=t,this.ResolveInkFilename=()=>{throw Error("Can't resolve filename because no FileHandler was provided when instantiating the parser / compiler.")},this.LoadInkFileContents=()=>{throw Error("Can't load ink content because no FileHandler was provided when instantiating the parser / compiler.")}}}class le extends tt{get fileHandler(){if(!this._fileHandler)throw new Error("No FileHandler defined");return this._fileHandler}set fileHandler(t){this._fileHandler=t}constructor(t){var e;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(super(t),e=this,this.ParseStory=()=>{const t=this.StatementsAtLevel(Gt.Top);return new re(t,this._rootParser!==this)},this.SeparatedList=(t,e)=>{const n=this.Parse(t);if(null===n)return null;const i=[];for(i.push(n);;){const n=this.BeginRule();if(null===e()){this.FailRule(n);break}const r=this.Parse(t);if(null===r){this.FailRule(n);break}this.SucceedRule(n),i.push(r)}return i},this.CreateDebugMetadata=(t,e)=>{const n=new It;return n.startLineNumber=((null==t?void 0:t.lineIndex)||0)+1,n.endLineNumber=e.lineIndex+1,n.startCharacterNumber=((null==t?void 0:t.characterInLineIndex)||0)+1,n.endCharacterNumber=e.characterInLineIndex+1,n.fileName=this._filename,n},this.RuleDidSucceed=(t,e,n)=>{const i=r(t,c);i&&(i.debugMetadata=this.CreateDebugMetadata(e,n));const s=Array.isArray(t)?t:null;if(null!==s)for(const t of s){r(t,c)&&(t.hasOwnDebugMetadata||(t.debugMetadata=this.CreateDebugMetadata(e,n)))}const a=r(t,ut);null!=a&&(a.debugMetadata=this.CreateDebugMetadata(e,n))},this.OnStringParserError=function(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];let a=s?"WARNING:":"ERROR:";if(null!==e._filename&&(a+=` '${e._filename}'`),a+=` line ${r+1}: ${t}`,null===e._externalErrorHandler)throw new Error(a);e._externalErrorHandler(a,s?n.Warning:n.Error)},this.AuthorWarning=()=>{this.Whitespace();const t=this.Parse(this.IdentifierWithMetadata);if(null===t||"TODO"!==t.name)return null;this.Whitespace(),this.ParseString(":"),this.Whitespace();const e=this.ParseUntilCharactersFromString("\n\r");return e?new d(e):null},this.ExtendIdentifierCharacterRanges=t=>{const e=le.ListAllCharacterRanges();for(const n of e)t.AddCharacters(n.ToCharacterSet())},this._parsingChoice=!1,this.Choice=()=>{let t=!0,e=this.Interleave(this.OptionalExclude(this.Whitespace),this.String("*"));if(!e){if(e=this.Interleave(this.OptionalExclude(this.Whitespace),this.String("+")),null===e)return null;t=!1}const n=this.Parse(this.BracketedName);this.Whitespace(),null!=n&&this.Newline();const i=this.Parse(this.ChoiceCondition);if(this.Whitespace(),this._parsingChoice)throw new Error("Already parsing a choice - shouldn't have nested choices");this._parsingChoice=!0;let s=null;const a=this.Parse(this.MixedTextAndLogic);a&&(s=new dt(a));let o=null,l=null;const h=null!==this.ParseString("[");if(h){this.EndTagIfNecessary(s);const t=this.Parse(this.MixedTextAndLogic);null!==t&&(o=new dt(t)),this.Expect(this.String("]"),"closing ']' for weave-style option"),this.EndTagIfNecessary(o);let e=this.Parse(this.MixedTextAndLogic);null!==e&&(l=new dt(e))}this.Whitespace(),this.EndTagIfNecessary(null!=l?l:s);const u=this.Parse(this.MultiDivert);this._parsingChoice=!1,this.Whitespace();const c=!s&&!l&&!o;if(c&&null===u&&this.Warning("Choice is completely empty. Interpretting as a default fallback choice. Add a divert arrow to remove this warning: * ->"),s||!h||o||this.Warning("Blank choice - if you intended a default fallback choice, use the `* ->` syntax"),l||(l=new dt),this.EndTagIfNecessary(l),null!==u)for(const t of u){const e=r(t,vt);e&&e.isEmpty||l.AddContent(t)}l.AddContent(new it("\n"));const d=new X(s,o,l);return n&&(d.identifier=n),d.indentationDepth=e.length,d.hasWeaveStyleInlineBrackets=h,d.condition=i,d.onceOnly=t,d.isInvisibleDefault=c,d},this.ChoiceCondition=()=>{const t=this.Interleave(this.ChoiceSingleCondition,this.ChoiceConditionsSpace);return null===t?null:1===t.length?t[0]:new gt(t)},this.ChoiceConditionsSpace=()=>(this.Newline(),this.Whitespace(),Q),this.ChoiceSingleCondition=()=>{if(null===this.ParseString("{"))return null;const t=this.Expect(this.Expression,"choice condition inside { }");return this.DisallowIncrement(t),this.Expect(this.String("}"),"closing '}' for choice condition"),t},this.Gather=()=>{const t=this.Parse(this.GatherDashes);if(null===t)return null;const e=Number(t),n=this.Parse(this.BracketedName),i=new at(n,e);return this.Newline(),i},this.GatherDashes=()=>{this.Whitespace();let t=0;for(;null!==this.ParseDashNotArrow();)t+=1,this.Whitespace();return 0===t?null:t},this.ParseDashNotArrow=()=>{const t=this.BeginRule();return null===this.ParseString("->")&&"-"===this.ParseSingleCharacter()?this.SucceedRule(t):this.FailRule(t)},this.BracketedName=()=>{if(null===this.ParseString("("))return null;this.Whitespace();const t=this.Parse(this.IdentifierWithMetadata);return null===t?null:(this.Whitespace(),this.Expect(this.String(")"),"closing ')' for bracketed name"),t)},this.InnerConditionalContent=t=>{if(void 0===t){const t=this.Parse(this.ConditionExpression),e=this.Parse((()=>this.InnerConditionalContent(t)));return null===e?null:e}let e;const n=null!==t,i=null===this.Parse(this.Newline);if(i&&!n)return null;if(i)e=this.InlineConditionalBranches();else{if(e=this.MultilineConditionalBranches(),null===e){if(t){let t=this.StatementsAtLevel(Gt.InnerBlock);if(null!==t){e=[new Pt(t)];const n=this.Parse(this.SingleMultilineCondition);n&&(n.isElse||(this.ErrorWithParsedObject("Expected an '- else:' clause here rather than an extra condition",n),n.isElse=!0),e.push(n))}}if(null===e)return null}else if(1===e.length&&e[0].isElse&&t){const t=new Pt(null);t.isTrueBranch=!0,e.unshift(t)}if(t){let t=!1;for(let n=0;n<e.length;++n){const i=e[n],r=n===e.length-1;i.ownExpression?(i.matchingEquality=!0,t=!0):t&&r?(i.matchingEquality=!0,i.isElse=!0):!r&&e.length>2?this.ErrorWithParsedObject("Only final branch can be an 'else'. Did you miss a ':'?",i):0===n?i.isTrueBranch=!0:i.isElse=!0}}else{for(let t=0;t<e.length;++t){const n=e[t],i=t===e.length-1;if(null===n.ownExpression)if(i)n.isElse=!0;else if(n.isElse){const t=e[e.length-1];t.isElse?this.ErrorWithParsedObject("Multiple 'else' cases. Can have a maximum of one, at the end.",t):this.ErrorWithParsedObject("'else' case in conditional should always be the final one",n)}else this.ErrorWithParsedObject("Branch doesn't have condition. Are you missing a ':'? ",n)}1===e.length&&null===e[0].ownExpression&&this.ErrorWithParsedObject("Condition block with no conditions",e[0])}}if(null===e)return null;for(const t of e)t.isInline=i;return new nt(t,e)},this.InlineConditionalBranches=()=>{const t=this.Interleave(this.MixedTextAndLogic,this.Exclude(this.String("|")),null,!1);if(null===t||0===t.length)return null;const e=[];if(t.length>2)this.Error("Expected one or two alternatives separated by '|' in inline conditional");else{const n=new Pt(t[0]);if(n.isTrueBranch=!0,e.push(n),t.length>1){const n=new Pt(t[1]);n.isElse=!0,e.push(n)}}return e},this.MultilineConditionalBranches=()=>{this.MultilineWhitespace();const t=this.OneOrMore(this.SingleMultilineCondition);return null===t?null:(this.MultilineWhitespace(),t)},this.SingleMultilineCondition=()=>{if(this.Whitespace(),null!==this.ParseString("->")||null===this.ParseString("-"))return null;this.Whitespace();let t=null;const e=null!==this.Parse(this.ElseExpression);e||(t=this.Parse(this.ConditionExpression));let n=this.StatementsAtLevel(Gt.InnerBlock);null===t&&null===n&&(this.Error("expected content for the conditional branch following '-'"),n=[new it("")]),this.MultilineWhitespace();const i=new Pt(n);return i.ownExpression=t,i.isElse=e,i},this.ConditionExpression=()=>{const t=this.Parse(this.Expression);return null===t?null:(this.DisallowIncrement(t),this.Whitespace(),null===this.ParseString(":")?null:t)},this.ElseExpression=()=>null===this.ParseString("else")?null:(this.Whitespace(),null===this.ParseString(":")?null:Q),this._nonTextPauseCharacters=null,this._nonTextEndCharacters=null,this._notTextEndCharactersChoice=null,this._notTextEndCharactersString=null,this.TrimEndWhitespace=(t,e)=>{if(t.length>0){const n=t.length-1,i=t[n];if(i instanceof it){const r=i;r.text=r.text.replace(new RegExp(/[ \t]+$/g),""),e?r.text+=" ":0===r.text.length&&(t.splice(n,1),this.TrimEndWhitespace(t,!1))}}},this.LineOfMixedTextAndLogic=()=>{this.Parse(this.Whitespace);let t=this.Parse(this.MixedTextAndLogic);if(!t||!t.length)return null;const e=t[0];if(e&&e.text&&e.text.startsWith("return")&&this.Warning("Do you need a '~' before 'return'? If not, perhaps use a glue: <> (since it's lowercase) or rewrite somehow?"),0===t.length)return null;return t[t.length-1]instanceof vt||this.TrimEndWhitespace(t,!1),this.EndTagIfNecessary(t),t.length>0&&t[0]instanceof ae&&t[0].isStart||t.push(new it("\n")),this.Expect(this.EndOfLine,"end of line",this.SkipToNextLine),t},this.MixedTextAndLogic=()=>{null!==this.ParseObject(this.Spaced(this.String("~")))&&this.Error("You shouldn't use a '~' here - tildas are for logic that's on its own line. To do inline logic, use { curly braces } instead");let t=this.Interleave(this.Optional(this.ContentText),this.Optional(this.InlineLogicOrGlueOrStartTag));if(!this._parsingChoice){const e=this.Parse(this.MultiDivert);null!==e&&(null===t&&(t=[]),this.EndTagIfNecessary(t),this.TrimEndWhitespace(t,!0),t.push(...e))}return t||null},this.ContentText=()=>this.ContentTextAllowingEscapeChar(),this.ContentTextAllowingEscapeChar=()=>{let t=null;for(;;){let e=this.Parse(this.ContentTextNoEscape);const n=null!==this.ParseString("\\");if(!n&&null===e)break;if(null===t&&(t=""),null!==e&&(t+=String(e)),n){t+=this.ParseSingleCharacter()}}return null!==t?new it(t):null},this.ContentTextNoEscape=()=>{null===this._nonTextPauseCharacters&&(this._nonTextPauseCharacters=new $("-<")),null===this._nonTextEndCharacters&&(this._nonTextEndCharacters=new $("{}|\n\r\\#"),this._notTextEndCharactersChoice=new $(this._nonTextEndCharacters),this._notTextEndCharactersChoice.AddCharacters("[]"),this._notTextEndCharactersString=new $(this._nonTextEndCharacters),this._notTextEndCharactersString.AddCharacters('"'));let t=null;t=this.parsingStringExpression?this._notTextEndCharactersString:this._parsingChoice?this._notTextEndCharactersChoice:this._nonTextEndCharacters;const e=this.ParseUntil((()=>this.OneOf([this.ParseDivertArrow,this.ParseThreadArrow,this.EndOfLine,this.Glue])),this._nonTextPauseCharacters,t);return null!==e?e:null},this.MultiDivert=()=>{this.Whitespace();let t=[];const e=this.Parse(this.StartThread);if(e)return t=[e],t;const n=this.Interleave(this.ParseDivertArrowOrTunnelOnwards,this.DivertIdentifierWithArguments);if(!n)return null;t=[],this.EndTagIfNecessary(t);for(let e=0;e<n.length;++e){if(e%2==0){if("->->"===n[e]){0===e||e===n.length-1||e===n.length-2||this.Error("Tunnel onwards '->->' must only come at the begining or the start of a divert");const i=new Et;if(e<n.length-1){const t=r(n[e+1],vt);i.divertAfter=t}t.push(i);break}}else{const i=n[e];e<n.length-1&&(i.isTunnel=!0),t.push(i)}}if(0===t.length&&1===n.length){const e=new vt(null);e.isEmpty=!0,t.push(e),this._parsingChoice||this.Error("Empty diverts (->) are only valid on choices")}return t},this.StartThread=()=>{if(this.Whitespace(),null===this.ParseThreadArrow())return null;this.Whitespace();const t=this.Expect(this.DivertIdentifierWithArguments,"target for new thread",(()=>new vt(null)));return t.isThread=!0,t},this.DivertIdentifierWithArguments=()=>{this.Whitespace();const t=this.Parse(this.DotSeparatedDivertPathComponents);if(!t)return null;this.Whitespace();const e=this.Parse(this.ExpressionFunctionCallArguments);this.Whitespace();const n=new ot(t);return new vt(n,e)},this.SingleDivert=()=>{const t=this.Parse(this.MultiDivert);if(!t)return null;if(1!==t.length)return null;if(t[0]instanceof Et)return null;const e=t[0];return e.isTunnel?null:e},this.DotSeparatedDivertPathComponents=()=>this.Interleave(this.Spaced(this.IdentifierWithMetadata),this.Exclude(this.String("."))),this.ParseDivertArrowOrTunnelOnwards=()=>{let t=0;for(;null!==this.ParseString("->");)t+=1;return 0===t?null:1===t?"->":(2===t||this.Error("Unexpected number of arrows in divert. Should only have '->' or '->->'"),"->->")},this.ParseDivertArrow=()=>this.ParseString("->"),this.ParseThreadArrow=()=>this.ParseString("<-"),this._binaryOperators=[],this._maxBinaryOpLength=0,this.TempDeclarationOrAssignment=()=>{this.Whitespace();const t=this.ParseTempKeyword();this.Whitespace();let e=null;if(e=t?this.Expect(this.IdentifierWithMetadata,"variable name"):this.Parse(this.IdentifierWithMetadata),null===e)return null;this.Whitespace();const n=null!==this.ParseString("+"),i=null!==this.ParseString("-");if(n&&i&&this.Error("Unexpected sequence '+-'"),null===this.ParseString("="))return t&&this.Error("Expected '='"),null;const r=this.Expect(this.Expression,"value expression to be assigned");if(n||i){return new Dt(e,r,n)}return new xt({variableIdentifier:e,assignedExpression:r,isTemporaryNewDeclaration:t})},this.DisallowIncrement=t=>{t instanceof Dt&&this.Error("Can't use increment/decrement here. It can only be used on a ~ line")},this.ParseTempKeyword=()=>{const t=this.BeginRule();return"temp"===this.Parse(this.Identifier)?(this.SucceedRule(t),!0):(this.FailRule(t),!1)},this.ReturnStatement=()=>{this.Whitespace();if("return"!==this.Parse(this.Identifier))return null;this.Whitespace();const t=this.Parse(this.Expression);return new lt(t)},this.Expression=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;e.Whitespace();let n=e.ExpressionUnary();if(null===n)return null;for(e.Whitespace();;){const i=e.BeginRule(),r=e.ParseInfixOperator();if(!(null!==r&&r.precedence>t)){e.FailRule(i);break}{const t=`right side of '${r.type}' expression`,s=e.Expect((()=>e.ExpressionInfixRight(n,r)),t);if(null===s)return e.FailRule(i),null;n=e.SucceedRule(i,s)}}return e.Whitespace(),n},this.ExpressionUnary=()=>{const t=this.Parse(this.ExpressionDivertTarget);if(null!==t)return t;let e=this.OneOf([this.String("-"),this.String("!")]);null===e&&(e=this.Parse(this.ExpressionNot)),this.Whitespace();let n=this.OneOf([this.ExpressionList,this.ExpressionParen,this.ExpressionFunctionCall,this.ExpressionVariableName,this.ExpressionLiteral]);if(null===n&&null!==e&&(n=this.ExpressionUnary()),null===n)return null;null!==e&&(n=M.WithInner(n,e)),this.Whitespace();const i=this.OneOf([this.String("++"),this.String("--")]);if(null!==i){const t="++"===i;if(n instanceof mt){n=new Dt(n.identifier,t)}else this.Error(`can only increment and decrement variables, but saw '${n}'.`)}return n},this.ExpressionNot=()=>{const t=this.Identifier();return"not"===t?t:null},this.ExpressionLiteral=()=>this.OneOf([this.ExpressionFloat,this.ExpressionInt,this.ExpressionBool,this.ExpressionString]),this.ExpressionDivertTarget=()=>{this.Whitespace();const t=this.Parse(this.SingleDivert);return!t||t&&t.isThread?null:(this.Whitespace(),new Ct(t))},this.ExpressionInt=()=>{const t=this.ParseInt();return null===t?null:new B(t,"int")},this.ExpressionFloat=()=>{const t=this.ParseFloat();return null===t?null:new B(t,"float")},this.ExpressionString=()=>{if(null===this.ParseString('"'))return null;this.parsingStringExpression=!0;let t=this.Parse(this.MixedTextAndLogic);return this.Expect(this.String('"'),"close quote for string expression"),this.parsingStringExpression=!1,null===t?t=[new it("")]:t.find((t=>t instanceof vt))&&this.Error("String expressions cannot contain diverts (->)"),new se(t)},this.ExpressionBool=()=>{const t=this.Parse(this.Identifier);return"true"===t?new B(!0,"bool"):"false"===t?new B(!1,"bool"):null},this.ExpressionFunctionCall=()=>{const t=this.Parse(this.IdentifierWithMetadata);if(null===t)return null;this.Whitespace();const e=this.Parse(this.ExpressionFunctionCallArguments);return null===e?null:new ft(t,e)},this.ExpressionFunctionCallArguments=()=>{if(null===this.ParseString("("))return null;const t=this.Exclude(this.String(","));let e=this.Interleave(this.Expression,t);return null===e&&(e=[]),this.Whitespace(),this.Expect(this.String(")"),"closing ')' for function call"),e},this.ExpressionVariableName=()=>{const t=this.Interleave(this.IdentifierWithMetadata,this.Exclude(this.Spaced(this.String("."))));return null===t||re.IsReservedKeyword(t[0].name)?null:new mt(t)},this.ExpressionParen=()=>{if(null===this.ParseString("("))return null;const t=this.Parse(this.Expression);return null===t?null:(this.Whitespace(),this.Expect(this.String(")"),"closing parenthesis ')' for expression"),t)},this.ExpressionInfixRight=(t,e)=>{if(!t)return null;this.Whitespace();const n=this.Parse((()=>this.Expression(e.precedence)));if(n){return new G(t,n,e.type)}return null},this.ParseInfixOperator=()=>{for(const t of this._binaryOperators){const e=this.BeginRule();if(null!==this.ParseString(t.type)){if(t.requireWhitespace&&null===this.Whitespace()){this.FailRule(e);continue}return this.SucceedRule(e,t)}this.FailRule(e)}return null},this.ExpressionList=()=>{if(this.Whitespace(),null===this.ParseString("("))return null;this.Whitespace();const t=this.SeparatedList(this.ListMember,this.Spaced(this.String(",")));return this.Whitespace(),null===this.ParseString(")")?null:new Bt(t)},this.ListMember=()=>{this.Whitespace();let t=this.Parse(this.IdentifierWithMetadata);if(null===t)return null;if(null!==this.ParseString(".")){const e=this.Expect(this.IdentifierWithMetadata,`element name within the set ${t}`);t.name+=`.${null==e?void 0:e.name}`}return this.Whitespace(),t},this.RegisterExpressionOperators=()=>{this.RegisterBinaryOperator("&&",1),this.RegisterBinaryOperator("||",1),this.RegisterBinaryOperator("and",1,!0),this.RegisterBinaryOperator("or",1,!0),this.RegisterBinaryOperator("==",2),this.RegisterBinaryOperator(">=",2),this.RegisterBinaryOperator("<=",2),this.RegisterBinaryOperator("<",2),this.RegisterBinaryOperator(">",2),this.RegisterBinaryOperator("!=",2),this.RegisterBinaryOperator("?",3),this.RegisterBinaryOperator("has",3,!0),this.RegisterBinaryOperator("!?",3),this.RegisterBinaryOperator("hasnt",3,!0),this.RegisterBinaryOperator("^",3),this.RegisterBinaryOperator("+",4),this.RegisterBinaryOperator("-",5),this.RegisterBinaryOperator("*",6),this.RegisterBinaryOperator("/",7),this.RegisterBinaryOperator("%",8),this.RegisterBinaryOperator("mod",8,!0)},this.RegisterBinaryOperator=function(t,n){const i=new Vt(t,n,arguments.length>2&&void 0!==arguments[2]&&arguments[2]);e._binaryOperators.push(i),e._maxBinaryOpLength=Math.max(e._maxBinaryOpLength,t.length)},this._openFilenames=[],this.IncludeStatement=()=>{if(this.Whitespace(),null===this.ParseString("INCLUDE"))return null;this.Whitespace();let t=this.Expect((()=>this.ParseUntilCharactersFromString("\n\r")),"filename for include statement");t=t.replace(new RegExp(/[ \t]+$/g),"");const e=this.fileHandler.ResolveInkFilename(t);if(this.FilenameIsAlreadyOpen(e))return this.Error(`Recursive INCLUDE detected: '${e}' is already open.`),this.ParseUntilCharactersFromString("\r\n"),new Lt(null);this.AddOpenFilename(e);let n=null,i="";try{i=this._rootParser.fileHandler.LoadInkFileContents(e)}catch(e){this.Error(`Failed to load: '${t}'.\nError:${e}`)}if(null!=i){n=new le(i,t,this._externalErrorHandler,this._rootParser,this.fileHandler).ParseStory()}return this.RemoveOpenFilename(e),new Lt(n)},this.FilenameIsAlreadyOpen=t=>this._rootParser._openFilenames.includes(t),this.AddOpenFilename=t=>{this._rootParser._openFilenames.push(t)},this.RemoveOpenFilename=t=>{this._rootParser._openFilenames.splice(this._rootParser._openFilenames.indexOf(t),1)},this.KnotDefinition=()=>{const t=this.Parse(this.KnotDeclaration);if(null===t)return null;this.Expect(this.EndOfLine,"end of line after knot name definition",this.SkipToNextLine);const e=this.Expect((()=>this.StatementsAtLevel(Gt.Knot)),"at least one line within the knot",this.KnotStitchNoContentRecoveryRule);return new jt(t.name,e,t.args,t.isFunction)},this.KnotDeclaration=()=>{if(this.Whitespace(),null===this.KnotTitleEquals())return null;this.Whitespace();const t=this.Parse(this.IdentifierWithMetadata);let e;const n="function"===(null==t?void 0:t.name);n?(this.Expect(this.Whitespace,"whitespace after the 'function' keyword"),e=this.Parse(this.IdentifierWithMetadata)):e=t,null===e&&(this.Error("Expected the name of the "+(n?"function":"knot")),e=new ut("")),this.Whitespace();const i=this.Parse(this.BracketedKnotDeclArguments);return this.Whitespace(),this.Parse(this.KnotTitleEquals),new Ft(e,i,n)},this.KnotTitleEquals=()=>{const t=this.ParseCharactersFromString("=");return null===t||t.length<=1?null:t},this.StitchDefinition=()=>{const t=this.Parse(this.StitchDeclaration);if(null===t)return null;this.Expect(this.EndOfLine,"end of line after stitch name",this.SkipToNextLine);const e=this.Expect((()=>this.StatementsAtLevel(Gt.Stitch)),"at least one line within the stitch",this.KnotStitchNoContentRecoveryRule);return new $t(t.name,e,t.args,t.isFunction)},this.StitchDeclaration=()=>{if(this.Whitespace(),null===this.ParseString("="))return null;if(null!==this.ParseString("="))return null;this.Whitespace();const t=null!==this.ParseString("function");t&&this.Whitespace();const e=this.Parse(this.IdentifierWithMetadata);if(null===e)return null;this.Whitespace();const n=this.Parse(this.BracketedKnotDeclArguments);return this.Whitespace(),new Ft(e,n,t)},this.KnotStitchNoContentRecoveryRule=()=>{this.ParseUntil(this.KnotDeclaration,new $("="),null);return[new it("<ERROR IN FLOW>")]},this.BracketedKnotDeclArguments=()=>{if(null===this.ParseString("("))return null;let t=this.Interleave(this.Spaced(this.FlowDeclArgument),this.Exclude(this.String(",")));return this.Expect(this.String(")"),"closing ')' for parameter list"),null===t&&(t=[]),t},this.FlowDeclArgument=()=>{const t=this.Parse(this.IdentifierWithMetadata);this.Whitespace();const e=this.ParseDivertArrow();this.Whitespace();const n=this.Parse(this.IdentifierWithMetadata);if(null==t&&null===n)return null;const r=new i;return null!==e&&(r.isDivertTarget=!0),null!==t&&"ref"===t.name?(null===n&&this.Error("Expected an parameter name after 'ref'"),r.identifier=n,r.isByReference=!0):(r.isDivertTarget?r.identifier=n:r.identifier=t,null===r.identifier&&this.Error("Expected an parameter name"),r.isByReference=!1),r},this.ExternalDeclaration=()=>{this.Whitespace();const t=this.Parse(this.IdentifierWithMetadata);if(null===t||"EXTERNAL"!=t.name)return null;this.Whitespace();const e=this.Expect(this.IdentifierWithMetadata,"name of external function")||new ut("");this.Whitespace();let n=this.Expect(this.BracketedKnotDeclArguments,`declaration of arguments for EXTERNAL, even if empty, i.e. 'EXTERNAL ${e}()'`);null===n&&(n=[]);const i=n.map((t=>{var e;return null===(e=t.identifier)||void 0===e?void 0:e.name})).filter(u);return new Ot(e,i)},this._identifierCharSet=null,this.LogicLine=()=>{if(this.Whitespace(),null===this.ParseString("~"))return null;this.Whitespace();let t=this.Expect((()=>this.OneOf([this.ReturnStatement,this.TempDeclarationOrAssignment,this.Expression])),"expression after '~'",this.SkipToNextLine);if(null===t)return new dt;t instanceof L&&!(t instanceof ft||t instanceof Dt)&&this.Error("Logic following a '~' can't be that type of expression. It can only be something like:\n\t~ return\n\t~ var x = blah\n\t~ x++\n\t~ myFunction()");const e=r(t,ft);return e&&(e.shouldPopReturnedValue=!0),null!==t.Find(ft)()&&(t=new dt(t,new it("\n"))),this.Expect(this.EndOfLine,"end of line",this.SkipToNextLine),t},this.VariableDeclaration=()=>{this.Whitespace();if("VAR"!==this.Parse(this.Identifier))return null;this.Whitespace();const t=this.Expect(this.IdentifierWithMetadata,"variable name");this.Whitespace(),this.Expect(this.String("="),"the '=' for an assignment of a value, e.g. '= 5' (initial values are mandatory)"),this.Whitespace();const e=this.Expect(this.Expression,"initial value for ");if(e){if(e instanceof B||e instanceof se||e instanceof Ct||e instanceof mt||e instanceof Bt||this.Error("initial value for a variable must be a number, constant, list or divert target"),null!==this.Parse(this.ListElementDefinitionSeparator))this.Error("Unexpected ','. If you're trying to declare a new list, use the LIST keyword, not VAR");else if(e instanceof se){e.isSingleString||this.Error("Constant strings cannot contain any logic.")}return new xt({assignedExpression:e,isGlobalDeclaration:!0,variableIdentifier:t})}return null},this.ListDeclaration=()=>{this.Whitespace();if("LIST"!=this.Parse(this.Identifier))return null;this.Whitespace();const t=this.Expect(this.IdentifierWithMetadata,"list name");this.Whitespace(),this.Expect(this.String("="),"the '=' for an assignment of the list definition"),this.Whitespace();const e=this.Expect(this.ListDefinition,"list item names");return e?(e.identifier=new ut(t.name),new xt({variableIdentifier:t,listDef:e})):null},this.ListDefinition=()=>{this.AnyWhitespace();const t=this.SeparatedList(this.ListElementDefinition,this.ListElementDefinitionSeparator);return null===t?null:new Tt(t)},this.ListElementDefinitionSeparator=()=>(this.AnyWhitespace(),null===this.ParseString(",")?null:(this.AnyWhitespace(),",")),this.ListElementDefinition=()=>{const t=null!==this.ParseString("(");let e=t;this.Whitespace();const n=this.Parse(this.IdentifierWithMetadata);if(null===n)return null;this.Whitespace(),t&&null!=this.ParseString(")")&&(e=!1,this.Whitespace());let i=null;if(null!==this.ParseString("=")){this.Whitespace();const t=this.Expect(this.ExpressionInt,"value to be assigned to list item");null!==t&&(i=t.value),e&&(this.Whitespace(),null!==this.ParseString(")")&&(e=!1))}return e&&this.Error("Expected closing ')'"),new Mt(n,t,i)},this.ConstDeclaration=()=>{this.Whitespace();if("CONST"!==this.Parse(this.Identifier))return null;this.Whitespace();const t=this.Expect(this.IdentifierWithMetadata,"constant name");this.Whitespace(),this.Expect(this.String("="),"the '=' for an assignment of a value, e.g. '= 5' (initial values are mandatory)"),this.Whitespace();const e=this.Expect(this.Expression,"initial value for ");if(e instanceof B||e instanceof Ct||e instanceof se){if(e instanceof se){e.isSingleString||this.Error("Constant strings cannot contain any logic.")}}else this.Error("initial value for a constant must be a number or divert target");return new rt(t,e)},this.InlineLogicOrGlueOrStartTag=()=>this.OneOf([this.InlineLogic,this.Glue,this.StartTag]),this.Glue=()=>null!==this.ParseString("<>")?new Rt(new kt):null,this.InlineLogic=()=>{if(null===this.ParseString("{"))return null;let t=this.parsingStringExpression,e=this.tagActive;this.Whitespace();const n=this.Expect(this.InnerLogic,"some kind of logic, conditional or sequence within braces: { ... }");if(null===n)return this.parsingStringExpression=t,null;this.DisallowIncrement(n);let i=r(n,dt);return i||(i=new dt(n)),this.Whitespace(),this.Expect(this.String("}"),"closing brace '}' for inline logic"),this.parsingStringExpression=t,e||this.EndTagIfNecessary(i),i},this.InnerLogic=()=>{this.Whitespace();const t=this.ParseObject(this.SequenceTypeAnnotation);if(null!==t){const e=this.Expect(this.InnerSequenceObjects,"sequence elements (for cycle/stoping etc)");return null===e?null:new wt(e,t)}const e=this.Parse(this.ConditionExpression);if(e){return this.Expect((()=>this.InnerConditionalContent(e)),"conditional content following query")}const n=[this.InnerConditionalContent,this.InnerSequence,this.InnerExpression];for(const t of n){const e=this.BeginRule(),n=this.ParseObject(t);if(n){if(null!==this.Peek(this.Spaced(this.String("}"))))return this.SucceedRule(e,n);this.FailRule(e)}else this.FailRule(e)}return null},this.InnerExpression=()=>{const t=this.Parse(this.Expression);return t&&(t.outputWhenComplete=!0),t},this.IdentifierWithMetadata=()=>{const t=this.Identifier();return null===t?null:new ut(t)},this.Identifier=()=>{const t=this.ParseCharactersFromCharSet(this.identifierCharSet);if(null===t)return null;let e=!0;for(let n of t)if(!(n>="0"&&n<="9")){e=!1;break}return e?null:t},this._sequenceTypeSymbols=new $("!&~$"),this.InnerSequence=()=>{this.Whitespace();let t=bt.Stopping;const e=this.Parse(this.SequenceTypeAnnotation);null!==e&&(t=e);const n=this.Parse(this.InnerSequenceObjects);return null===n||n.length<=1?null:new wt(n,t)},this.SequenceTypeAnnotation=()=>{let t=this.Parse(this.SequenceTypeSymbolAnnotation);if(null===t&&(t=this.Parse(this.SequenceTypeWordAnnotation)),null===t)return null;switch(t){case bt.Once:case bt.Cycle:case bt.Stopping:case bt.Shuffle:case bt.Shuffle|bt.Stopping:case bt.Shuffle|bt.Once:break;default:return this.Error(`Sequence type combination not supported: ${t}`),bt.Stopping}return t},this.SequenceTypeSymbolAnnotation=()=>{null===this._sequenceTypeSymbols&&(this._sequenceTypeSymbols=new $("!&~$ "));let t=0;const e=this.ParseCharactersFromCharSet(this._sequenceTypeSymbols);if(null===e)return null;for(const n of e)switch(n){case"!":t|=bt.Once;break;case"&":t|=bt.Cycle;break;case"~":t|=bt.Shuffle;break;case"$":t|=bt.Stopping}return 0===t?null:t},this.SequenceTypeWordAnnotation=()=>{const t=this.Interleave(this.SequenceTypeSingleWord,this.Exclude(this.Whitespace));if(null===t||0===t.length)return null;if(null===this.ParseString(":"))return null;let e=0;for(const n of t)e|=n;return e},this.SequenceTypeSingleWord=()=>{let t=null;const e=this.Parse(this.IdentifierWithMetadata);if(null!==e)switch(e.name){case"once":t=bt.Once;break;case"cycle":t=bt.Cycle;break;case"shuffle":t=bt.Shuffle;break;case"stopping":t=bt.Stopping}return null===t?null:t},this.InnerSequenceObjects=()=>{let t=null;return t=null!==this.Parse(this.Newline)?this.Parse(this.InnerMultilineSequenceObjects):this.Parse(this.InnerInlineSequenceObjects),t},this.InnerInlineSequenceObjects=()=>{const t=this.Interleave(this.Optional(this.MixedTextAndLogic),this.String("|"),null,!1);if(null===t)return null;const e=[];let n=!1;for(const i of t)if("|"===i)n||e.push(new dt),n=!1;else{const t=i;null===t?this.Error(`Expected content, but got ${i} (this is an ink compiler bug!)`):e.push(new dt(t)),n=!0}return n||e.push(new dt),e},this.InnerMultilineSequenceObjects=()=>{this.MultilineWhitespace();const t=this.OneOrMore(this.SingleMultilineSequenceElement);return null===t?null:t},this.SingleMultilineSequenceElement=()=>{if(this.Whitespace(),null!==this.ParseString("->"))return null;if(null===this.ParseString("-"))return null;this.Whitespace();const t=this.StatementsAtLevel(Gt.InnerBlock);return null===t?this.MultilineWhitespace():t.unshift(new it("\n")),new dt(t)},this._statementRulesAtLevel=[],this._statementBreakRulesAtLevel=[],this.StatementsAtLevel=t=>{if(t===Gt.InnerBlock){null!==this.Parse(this.GatherDashes)&&this.Error("You can't use a gather (the dashes) within the { curly braces } context. For multi-line sequences and conditions, you should only use one dash.")}return this.Interleave(this.Optional(this.MultilineWhitespace),(()=>this.StatementAtLevel(t)),(()=>this.StatementsBreakForLevel(t)))},this.StatementAtLevel=t=>{const e=this._statementRulesAtLevel[t],n=this.OneOf(e);return t===Gt.Top&&n instanceof lt&&this.Error("should not have return statement outside of a knot"),n},this.StatementsBreakForLevel=t=>{this.Whitespace();const e=this._statementBreakRulesAtLevel[t],n=this.OneOf(e);return null===n?null:n},this.GenerateStatementLevelRules=()=>{const t=Object.values(Gt);this._statementRulesAtLevel="f".repeat(t.length).split("f").map((()=>[])),this._statementBreakRulesAtLevel="f".repeat(t.length).split("f").map((()=>[]));for(const e of t){const t=[],n=[];t.push(this.Line(this.MultiDivert)),e>=Gt.Top&&t.push(this.KnotDefinition),t.push(this.Line(this.Choice)),t.push(this.Line(this.AuthorWarning)),e>Gt.InnerBlock&&t.push(this.Gather),e>=Gt.Knot&&t.push(this.StitchDefinition),t.push(this.Line(this.ListDeclaration)),t.push(this.Line(this.VariableDeclaration)),t.push(this.Line(this.ConstDeclaration)),t.push(this.Line(this.ExternalDeclaration)),t.push(this.Line(this.IncludeStatement)),t.push(this.LogicLine),t.push(this.LineOfMixedTextAndLogic),e<=Gt.Knot&&n.push(this.KnotDeclaration),e<=Gt.Stitch&&n.push(this.StitchDeclaration),e<=Gt.InnerBlock&&(n.push(this.ParseDashNotArrow),n.push(this.String("}"))),this._statementRulesAtLevel[e]=t,this._statementBreakRulesAtLevel[e]=n}},this.SkipToNextLine=()=>(this.ParseUntilCharactersFromString("\n\r"),this.ParseNewline(),Q),this.Line=t=>()=>{const e=this.ParseObject(t);return null===e?null:(this.Expect(this.EndOfLine,"end of line",this.SkipToNextLine),e)},this.StartTag=()=>{if(this.Whitespace(),null===this.ParseString("#"))return null;this.parsingStringExpression&&this.Error("Tags aren't allowed inside of strings. Please use \\# if you want a hash symbol.");let t=null;if(this.tagActive){let e=new dt;e.AddContent(new ae(!1)),e.AddContent(new ae(!0)),t=e}else t=new ae(!0);return this.tagActive=!0,this.Whitespace(),t},this._inlineWhitespaceChars=new $(" \t"),this.EndOfLine=()=>this.OneOf([this.Newline,this.EndOfFile]),this.Newline=()=>{this.Whitespace();return null!==this.ParseNewline()?Q:null},this.EndOfFile=()=>(this.Whitespace(),this.endOfInput?Q:null),this.MultilineWhitespace=()=>{let t=this.OneOrMore(this.Newline);if(null===t)return null;return t.length>=1?Q:null},this.Whitespace=()=>null!==this.ParseCharactersFromCharSet(this._inlineWhitespaceChars)?Q:null,this.Spaced=t=>()=>{this.Whitespace();const e=this.ParseObject(t);return null===e?null:(this.Whitespace(),e)},this.AnyWhitespace=()=>{let t=!1;for(;null!==this.OneOf([this.Whitespace,this.MultilineWhitespace]);)t=!0;return t?Q:null},this.MultiSpaced=t=>()=>{this.AnyWhitespace();const e=this.ParseObject(t);return null===e?null:(this.AnyWhitespace(),e)},this._filename=null,this._externalErrorHandler=null,this._fileHandler=null,this._filename=s,this.RegisterExpressionOperators(),this.GenerateStatementLevelRules(),this.errorHandler=this.OnStringParserError,this._externalErrorHandler=a,this._fileHandler=null===l?new oe:l,null===o){if(this._rootParser=this,this._openFilenames=[],null!==this._filename){const t=this.fileHandler.ResolveInkFilename(this._filename);this._openFilenames.push(t)}}else this._rootParser=o}PreProcessInputString(t){return new et(t).Process()}get parsingStringExpression(){return this.GetFlag(Number(Nt.ParsingString))}set parsingStringExpression(t){this.SetFlag(Number(Nt.ParsingString),t)}get tagActive(){return this.GetFlag(Number(Nt.TagActive))}set tagActive(t){this.SetFlag(Number(Nt.TagActive),t)}get identifierCharSet(){return null===this._identifierCharSet&&((this._identifierCharSet=new $).AddRange("A","Z").AddRange("a","z").AddRange("0","9").Add("_"),this.ExtendIdentifierCharacterRanges(this._identifierCharSet)),this._identifierCharSet}EndTagIfNecessary(t){this.tagActive&&(null!=t&&(t instanceof dt?t.AddContent(new ae(!1)):t.push(new ae(!1))),this.tagActive=!1)}}le.LatinBasic=q.Define("A","z",(new $).AddRange("[","`")),le.LatinExtendedA=q.Define("Ā","ſ"),le.LatinExtendedB=q.Define("ƀ","ɏ"),le.Greek=q.Define("Ͱ","Ͽ",(new $).AddRange("͸","΅").AddCharacters("ʹ͵͸·΋΍΢")),le.Cyrillic=q.Define("Ѐ","ӿ",(new $).AddRange("҂","҉")),le.Armenian=q.Define("԰","֏",(new $).AddCharacters("԰").AddRange("՗","ՠ").AddRange("ֈ","֎")),le.Hebrew=q.Define("֐","׿",new $),le.Arabic=q.Define("؀","ۿ",new $),le.Korean=q.Define("가","힯",new $),le.Latin1Supplement=q.Define("","ÿ",new $),le.Chinese=q.Define("一","鿿",new $),le.ListAllCharacterRanges=()=>[le.LatinBasic,le.LatinExtendedA,le.LatinExtendedB,le.Arabic,le.Armenian,le.Cyrillic,le.Greek,le.Hebrew,le.Korean,le.Latin1Supplement,le.Chinese];class he{constructor(t){this.fileHierarchy=t,this.ResolveInkFilename=t=>{if(Object.keys(this.fileHierarchy).includes(t))return t;throw new Error(`Cannot locate ${t}. Are you trying a relative import ? This is not yet implemented.`)},this.LoadInkFileContents=t=>{if(Object.keys(this.fileHierarchy).includes(t))return this.fileHierarchy[t];throw new Error(`Cannot open ${t}.`)}}}class ue{get errors(){return this._errors}get warnings(){return this._warnings}get authorMessages(){return this._authorMessages}get inputString(){return this._inputString}get options(){return this._options}get parsedStory(){if(!this._parsedStory)throw new Error;return this._parsedStory}get runtimeStory(){if(!this._runtimeStory)throw new Error("Compilation failed.");return this._runtimeStory}get parser(){if(!this._parser)throw new Error;return this._parser}get debugSourceRanges(){return this._debugSourceRanges}constructor(i){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._errors=[],this._warnings=[],this._authorMessages=[],this._parsedStory=null,this._runtimeStory=null,this._parser=null,this._debugSourceRanges=[],this.Compile=()=>(this._parser=new le(this.inputString,this.options.sourceFilename||null,this.OnError,null,this.options.fileHandler),this._parsedStory=this.parser.ParseStory(),0===this.errors.length?(this.parsedStory.countAllVisits=this.options.countAllVisits,this._runtimeStory=this.parsedStory.ExportRuntime(this.OnError)):this._runtimeStory=null,this.runtimeStory),this.RetrieveDebugSourceForLatestContent=()=>{var t;for(const n of this.runtimeStory.state.outputStream){const i=r(n,I);if(null!==i){const n=new e((null===(t=i.value)||void 0===t?void 0:t.length)||0,i.debugMetadata,i.value||"unknown");this.debugSourceRanges.push(n)}}},this.GenerateStats=()=>null===this._parsedStory?null:function(t){let e=t.FindAll(it)(),n=0;for(const t of e){let e=0,i=!0;for(const n of t.text)" "==n||"\t"==n||"\n"==n||"\r"==n?i=!0:i&&(e++,i=!1);n+=e}const i=t.FindAll(jt)(),r=t.FindAll($t)(),s=t.FindAll(X)(),a=t.FindAll(at)((t=>null!=t.debugMetadata)),o=t.FindAll(vt)();return{words:n,knots:i.length,functions:i.filter((t=>t.isFunction)).length,stitches:r.length,gathers:a.length,diverts:o.length-1,choices:s.length}}(this._parsedStory),this.DebugMetadataForContentAtOffset=t=>{let e=0,n=null;for(const i of this.debugSourceRanges){if(null!==i.debugMetadata&&(n=i.debugMetadata),t>=e&&t<e+i.length)return n;e+=i.length}return null},this.OnError=(t,e)=>{switch(e){case n.Author:this._authorMessages.push(t);break;case n.Warning:this._warnings.push(t);break;case n.Error:this._errors.push(t)}null!==this.options.errorHandler&&this.options.errorHandler(t,e)},this._inputString=i,this._options=s||new t}}export{ue as Compiler,t as CompilerOptions,w as InkList,le as InkParser,he as JsonFileHandler,Gt as StatementLevel,ie as Story};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5rLmpzIiwic291cmNlcyI6WyIuLi9zcmMvY29tcGlsZXIvQ29tcGlsZXJPcHRpb25zLnRzIiwiLi4vc3JjL2NvbXBpbGVyL0RlYnVnU291cmNlUmFuZ2UudHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL0Vycm9yVHlwZS50cyIsIi4uL3NyYy9jb21waWxlci9QYXJzZXIvUGFyc2VkSGllcmFyY2h5L0FyZ3VtZW50LnRzIiwiLi4vc3JjL2VuZ2luZS9UeXBlQXNzZXJ0aW9uLnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9QYXJzZWRIaWVyYXJjaHkvT2JqZWN0LnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9QYXJzZWRIaWVyYXJjaHkvQXV0aG9yV2FybmluZy50cyIsIi4uL3NyYy9lbmdpbmUvUGF0aC50cyIsIi4uL3NyYy9lbmdpbmUvRGVidWcudHMiLCIuLi9zcmMvZW5naW5lL1ZhbHVlLnRzIiwiLi4vc3JjL2VuZ2luZS9QdXNoUG9wLnRzIiwiLi4vc3JjL2VuZ2luZS9OdWxsRXhjZXB0aW9uLnRzIiwiLi4vc3JjL2VuZ2luZS9PYmplY3QudHMiLCIuLi9zcmMvZW5naW5lL1N0cmluZ0J1aWxkZXIudHMiLCIuLi9zcmMvZW5naW5lL0lua0xpc3QudHMiLCIuLi9zcmMvZW5naW5lL1N0b3J5RXhjZXB0aW9uLnRzIiwiLi4vc3JjL2VuZ2luZS9UcnlHZXRSZXN1bHQudHMiLCIuLi9zcmMvZW5naW5lL1NlYXJjaFJlc3VsdC50cyIsIi4uL3NyYy9lbmdpbmUvQ29udGFpbmVyLnRzIiwiLi4vc3JjL2VuZ2luZS9Db250cm9sQ29tbWFuZC50cyIsIi4uL3NyYy9jb21waWxlci9QYXJzZXIvUGFyc2VkSGllcmFyY2h5L0V4cHJlc3Npb24vRXhwcmVzc2lvbi50cyIsIi4uL3NyYy9lbmdpbmUvVm9pZC50cyIsIi4uL3NyYy9lbmdpbmUvTmF0aXZlRnVuY3Rpb25DYWxsLnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9QYXJzZWRIaWVyYXJjaHkvRXhwcmVzc2lvbi9OdW1iZXJFeHByZXNzaW9uLnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9QYXJzZWRIaWVyYXJjaHkvRXhwcmVzc2lvbi9VbmFyeUV4cHJlc3Npb24udHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL1BhcnNlZEhpZXJhcmNoeS9FeHByZXNzaW9uL0JpbmFyeUV4cHJlc3Npb24udHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL0NoYXJhY3RlclNldC50cyIsIi4uL3NyYy9jb21waWxlci9QYXJzZXIvQ2hhcmFjdGVyUmFuZ2UudHMiLCIuLi9zcmMvZW5naW5lL0Nob2ljZVBvaW50LnRzIiwiLi4vc3JjL2VuZ2luZS9Qb2ludGVyLnRzIiwiLi4vc3JjL2VuZ2luZS9EaXZlcnQudHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL1BhcnNlZEhpZXJhcmNoeS9TeW1ib2xUeXBlLnRzIiwiLi4vc3JjL2VuZ2luZS9WYXJpYWJsZUFzc2lnbm1lbnQudHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL1BhcnNlZEhpZXJhcmNoeS9DaG9pY2UudHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL1N0cmluZ1BhcnNlci9TdHJpbmdQYXJzZXJFbGVtZW50LnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9TdHJpbmdQYXJzZXIvU3RyaW5nUGFyc2VyU3RhdGUudHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL1N0cmluZ1BhcnNlci9TdHJpbmdQYXJzZXIudHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL0NvbW1lbnRFbGltaW5hdG9yLnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9QYXJzZWRIaWVyYXJjaHkvQ29uZGl0aW9uYWwvQ29uZGl0aW9uYWwudHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL1BhcnNlZEhpZXJhcmNoeS9UZXh0LnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9QYXJzZWRIaWVyYXJjaHkvRGVjbGFyYXRpb24vQ29uc3RhbnREZWNsYXJhdGlvbi50cyIsIi4uL3NyYy9jb21waWxlci9QYXJzZXIvUGFyc2VkSGllcmFyY2h5L0Zsb3cvRmxvd0xldmVsLnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9QYXJzZWRIaWVyYXJjaHkvR2F0aGVyL0dhdGhlci50cyIsIi4uL3NyYy9jb21waWxlci9QYXJzZXIvUGFyc2VkSGllcmFyY2h5L1BhdGgudHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL1BhcnNlZEhpZXJhcmNoeS9SZXR1cm5UeXBlLnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9QYXJzZWRIaWVyYXJjaHkvRmxvdy9DbG9zZXN0Rmxvd0Jhc2UudHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL1BhcnNlZEhpZXJhcmNoeS9JZGVudGlmaWVyLnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9QYXJzZWRIaWVyYXJjaHkvRmxvdy9GbG93QmFzZS50cyIsIi4uL3NyYy9jb21waWxlci9QYXJzZXIvUGFyc2VkSGllcmFyY2h5L0NvbnRlbnRMaXN0LnRzIiwiLi4vc3JjL2VuZ2luZS9WYXJpYWJsZVJlZmVyZW5jZS50cyIsIi4uL3NyYy9jb21waWxlci9QYXJzZXIvUGFyc2VkSGllcmFyY2h5L1ZhcmlhYmxlL1ZhcmlhYmxlUmVmZXJlbmNlLnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9QYXJzZWRIaWVyYXJjaHkvRnVuY3Rpb25DYWxsLnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9QYXJzZWRIaWVyYXJjaHkvRXhwcmVzc2lvbi9NdWx0aXBsZUNvbmRpdGlvbkV4cHJlc3Npb24udHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL1BhcnNlZEhpZXJhcmNoeS9EaXZlcnQvRGl2ZXJ0VGFyZ2V0LnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9QYXJzZWRIaWVyYXJjaHkvRGl2ZXJ0L0RpdmVydC50cyIsIi4uL3NyYy9jb21waWxlci9QYXJzZXIvUGFyc2VkSGllcmFyY2h5L0dhdGhlci9HYXRoZXJQb2ludFRvUmVzb2x2ZS50cyIsIi4uL3NyYy9jb21waWxlci9QYXJzZXIvUGFyc2VkSGllcmFyY2h5L1NlcXVlbmNlL1NlcXVlbmNlRGl2ZXJ0VG9SZXNvbHZlLnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9QYXJzZWRIaWVyYXJjaHkvU2VxdWVuY2UvU2VxdWVuY2VUeXBlLnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9QYXJzZWRIaWVyYXJjaHkvU2VxdWVuY2UvU2VxdWVuY2UudHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL1BhcnNlZEhpZXJhcmNoeS9UdW5uZWxPbndhcmRzLnRzIiwiLi4vc3JjL2VuZ2luZS9MaXN0RGVmaW5pdGlvbi50cyIsIi4uL3NyYy9jb21waWxlci9QYXJzZXIvUGFyc2VkSGllcmFyY2h5L0xpc3QvTGlzdERlZmluaXRpb24udHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL1BhcnNlZEhpZXJhcmNoeS9WYXJpYWJsZS9WYXJpYWJsZUFzc2lnbm1lbnQudHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL1BhcnNlZEhpZXJhcmNoeS9XZWF2ZS50cyIsIi4uL3NyYy9jb21waWxlci9QYXJzZXIvUGFyc2VkSGllcmFyY2h5L0NvbmRpdGlvbmFsL0NvbmRpdGlvbmFsU2luZ2xlQnJhbmNoLnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9DdXN0b21GbGFncy50cyIsIi4uL3NyYy9lbmdpbmUvRGVidWdNZXRhZGF0YS50cyIsIi4uL3NyYy9jb21waWxlci9QYXJzZXIvUGFyc2VkSGllcmFyY2h5L0RlY2xhcmF0aW9uL0V4dGVybmFsRGVjbGFyYXRpb24udHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL0Zsb3dEZWNsLnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9QYXJzZWRIaWVyYXJjaHkvV3JhcC50cyIsIi4uL3NyYy9jb21waWxlci9QYXJzZXIvUGFyc2VkSGllcmFyY2h5L0dsdWUudHMiLCIuLi9zcmMvZW5naW5lL0dsdWUudHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL1BhcnNlZEhpZXJhcmNoeS9FeHByZXNzaW9uL0luY0RlY0V4cHJlc3Npb24udHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL1BhcnNlZEhpZXJhcmNoeS9JbmNsdWRlZEZpbGUudHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL0luZml4T3BlcmF0b3IudHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL1BhcnNlZEhpZXJhcmNoeS9Lbm90LnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9QYXJzZWRIaWVyYXJjaHkvTGlzdC9MaXN0LnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9QYXJzZWRIaWVyYXJjaHkvTGlzdC9MaXN0RWxlbWVudERlZmluaXRpb24udHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL1N0YXRlbWVudExldmVsLnRzIiwiLi4vc3JjL2NvbXBpbGVyL1BhcnNlci9QYXJzZWRIaWVyYXJjaHkvU3RpdGNoLnRzIiwiLi4vc3JjL2VuZ2luZS9UYWcudHMiLCIuLi9zcmMvZW5naW5lL0Nob2ljZS50cyIsIi4uL3NyYy9lbmdpbmUvTGlzdERlZmluaXRpb25zT3JpZ2luLnRzIiwiLi4vc3JjL2VuZ2luZS9Kc29uU2VyaWFsaXNhdGlvbi50cyIsIi4uL3NyYy9lbmdpbmUvQ2FsbFN0YWNrLnRzIiwiLi4vc3JjL2VuZ2luZS9WYXJpYWJsZXNTdGF0ZS50cyIsIi4uL3NyYy9lbmdpbmUvUFJORy50cyIsIi4uL3NyYy9lbmdpbmUvU3RhdGVQYXRjaC50cyIsIi4uL3NyYy9lbmdpbmUvU2ltcGxlSnNvbi50cyIsIi4uL3NyYy9lbmdpbmUvRmxvdy50cyIsIi4uL3NyYy9lbmdpbmUvU3RvcnlTdGF0ZS50cyIsIi4uL3NyYy9lbmdpbmUvU3RvcFdhdGNoLnRzIiwiLi4vc3JjL2VuZ2luZS9FcnJvci50cyIsIi4uL3NyYy9lbmdpbmUvU3RvcnkudHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL1BhcnNlZEhpZXJhcmNoeS9TdG9yeS50cyIsIi4uL3NyYy9jb21waWxlci9QYXJzZXIvUGFyc2VkSGllcmFyY2h5L0V4cHJlc3Npb24vU3RyaW5nRXhwcmVzc2lvbi50cyIsIi4uL3NyYy9jb21waWxlci9QYXJzZXIvUGFyc2VkSGllcmFyY2h5L1RhZy50cyIsIi4uL3NyYy9jb21waWxlci9GaWxlSGFuZGxlci9EZWZhdWx0RmlsZUhhbmRsZXIudHMiLCIuLi9zcmMvY29tcGlsZXIvUGFyc2VyL0lua1BhcnNlci50cyIsIi4uL3NyYy9jb21waWxlci9GaWxlSGFuZGxlci9Kc29uRmlsZUhhbmRsZXIudHMiLCIuLi9zcmMvY29tcGlsZXIvQ29tcGlsZXIudHMiLCIuLi9zcmMvY29tcGlsZXIvU3RhdHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXJyb3JIYW5kbGVyIH0gZnJvbSBcIi4uL2VuZ2luZS9FcnJvclwiO1xuaW1wb3J0IHsgSUZpbGVIYW5kbGVyIH0gZnJvbSBcIi4vSUZpbGVIYW5kbGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBDb21waWxlck9wdGlvbnMge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgcmVhZG9ubHkgc291cmNlRmlsZW5hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsLFxuICAgIHB1YmxpYyByZWFkb25seSBwbHVnaW5OYW1lczogc3RyaW5nW10gPSBbXSxcbiAgICBwdWJsaWMgcmVhZG9ubHkgY291bnRBbGxWaXNpdHM6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICBwdWJsaWMgcmVhZG9ubHkgZXJyb3JIYW5kbGVyOiBFcnJvckhhbmRsZXIgfCBudWxsID0gbnVsbCxcbiAgICBwdWJsaWMgcmVhZG9ubHkgZmlsZUhhbmRsZXI6IElGaWxlSGFuZGxlciB8IG51bGwgPSBudWxsXG4gICkge31cbn1cbiIsImltcG9ydCB7IERlYnVnTWV0YWRhdGEgfSBmcm9tIFwiLi4vZW5naW5lL0RlYnVnTWV0YWRhdGFcIjtcblxuZXhwb3J0IGNsYXNzIERlYnVnU291cmNlUmFuZ2Uge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgcmVhZG9ubHkgbGVuZ3RoOiBudW1iZXIsXG4gICAgcHVibGljIHJlYWRvbmx5IGRlYnVnTWV0YWRhdGE6IERlYnVnTWV0YWRhdGEgfCBudWxsLFxuICAgIHB1YmxpYyB0ZXh0OiBzdHJpbmdcbiAgKSB7fVxufVxuIiwiLy8gVE9ETzogVW5pZmlmeSB3aXRoIEVuZ2luZS5cblxuZXhwb3J0IGVudW0gRXJyb3JUeXBlIHtcbiAgQXV0aG9yLFxuICBXYXJuaW5nLFxuICBFcnJvcixcbn1cbiIsImltcG9ydCB7IElkZW50aWZpZXIgfSBmcm9tIFwiLi9JZGVudGlmaWVyXCI7XG5cbmV4cG9ydCBjbGFzcyBBcmd1bWVudCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBpZGVudGlmaWVyOiBJZGVudGlmaWVyIHwgbnVsbCA9IG51bGwsXG4gICAgcHVibGljIGlzQnlSZWZlcmVuY2U6IGJvb2xlYW4gfCBudWxsID0gbnVsbCxcbiAgICBwdWJsaWMgaXNEaXZlcnRUYXJnZXQ6IGJvb2xlYW4gfCBudWxsID0gbnVsbFxuICApIHt9XG5cbiAgZ2V0IHR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiQXJndW1lbnRcIjtcbiAgfVxufVxuIiwiaW1wb3J0IHsgSU5hbWVkQ29udGVudCB9IGZyb20gXCIuL0lOYW1lZENvbnRlbnRcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGFzT3JOdWxsPFQ+KFxuICBvYmo6IGFueSxcbiAgdHlwZTogKG5ldyAoLi4uYXJnOiBhbnlbXSkgPT4gVCkgfCAoRnVuY3Rpb24gJiB7IHByb3RvdHlwZTogVCB9KVxuKTogVCB8IG51bGwge1xuICBpZiAob2JqIGluc3RhbmNlb2YgdHlwZSkge1xuICAgIHJldHVybiB1bnNhZmVUeXBlQXNzZXJ0aW9uKG9iaiwgdHlwZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzT3JUaHJvd3M8VD4oXG4gIG9iajogYW55LFxuICB0eXBlOiAobmV3ICguLi5hcmc6IGFueVtdKSA9PiBUKSB8IChGdW5jdGlvbiAmIHsgcHJvdG90eXBlOiBUIH0pXG4pOiBUIHwgbmV2ZXIge1xuICBpZiAob2JqIGluc3RhbmNlb2YgdHlwZSkge1xuICAgIHJldHVybiB1bnNhZmVUeXBlQXNzZXJ0aW9uKG9iaiwgdHlwZSk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGAke29ian0gaXMgbm90IG9mIHR5cGUgJHt0eXBlfWApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhc051bWJlck9yVGhyb3dzKG9iajogYW55KSB7XG4gIGlmICh0eXBlb2Ygb2JqID09PSBcIm51bWJlclwiKSB7XG4gICAgcmV0dXJuIG9iaiBhcyBudW1iZXI7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGAke29ian0gaXMgbm90IGEgbnVtYmVyYCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFzQm9vbGVhbk9yVGhyb3dzKG9iajogYW55KSB7XG4gIGlmICh0eXBlb2Ygb2JqID09PSBcImJvb2xlYW5cIikge1xuICAgIHJldHVybiBvYmogYXMgYm9vbGVhbjtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7b2JqfSBpcyBub3QgYSBib29sZWFuYCk7XG4gIH1cbn1cblxuLy8gU28gaGVyZSwgaW4gdGhlIHJlZmVyZW5jZSBpbXBsZW1lbnRhdGlvbiwgY29udGVudE9iaiBpcyBjYXN0ZWQgdG8gYW4gSU5hbWVkQ29udGVudFxuLy8gYnV0IGhlcmUgd2UgdXNlIGpzLXN0eWxlIGR1Y2sgdHlwaW5nOiBpZiBpdCBpbXBsZW1lbnRzIHRoZSBzYW1lIHByb3BzIGFzIHRoZSBpbnRlcmZhY2UsXG4vLyB3ZSB0cmVhdCBpdCBhcyB2YWxpZC5cbmV4cG9ydCBmdW5jdGlvbiBhc0lOYW1lZENvbnRlbnRPck51bGwob2JqOiBhbnkpOiBJTmFtZWRDb250ZW50IHwgbnVsbCB7XG4gIGlmIChvYmouaGFzVmFsaWROYW1lICYmIG9iai5uYW1lKSB7XG4gICAgcmV0dXJuIG9iaiBhcyBJTmFtZWRDb250ZW50O1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBudWxsSWZVbmRlZmluZWQ8VD4ob2JqOiBUIHwgdW5kZWZpbmVkKTogVCB8IG51bGwge1xuICBpZiAodHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRXF1YXRhYmxlKHR5cGU6IGFueSkge1xuICByZXR1cm4gdHlwZW9mIHR5cGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHR5cGUuRXF1YWxzID09PSBcImZ1bmN0aW9uXCI7XG59XG5cbmZ1bmN0aW9uIHVuc2FmZVR5cGVBc3NlcnRpb248VD4oXG4gIG9iajogYW55LFxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gIHR5cGU6IChuZXcgKCkgPT4gVCkgfCAoRnVuY3Rpb24gJiB7IHByb3RvdHlwZTogVCB9KVxuKSB7XG4gIHJldHVybiBvYmogYXMgVDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclVuZGVmPFQ+KGVsZW1lbnQ6IFQgfCB1bmRlZmluZWQpOiBlbGVtZW50IGlzIFQge1xuICByZXR1cm4gZWxlbWVudCAhPSB1bmRlZmluZWQ7XG59XG4iLCJpbXBvcnQgeyBDb250YWluZXIgYXMgUnVudGltZUNvbnRhaW5lciB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvQ29udGFpbmVyXCI7XG5pbXBvcnQgeyBEZWJ1Z01ldGFkYXRhIH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9EZWJ1Z01ldGFkYXRhXCI7XG5pbXBvcnQgeyBGaW5kUXVlcnlGdW5jIH0gZnJvbSBcIi4vRmluZFF1ZXJ5RnVuY1wiO1xuaW1wb3J0IHsgSW5rT2JqZWN0IGFzIFJ1bnRpbWVPYmplY3QgfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL09iamVjdFwiO1xuaW1wb3J0IHsgUGF0aCBhcyBSdW50aW1lUGF0aCB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvUGF0aFwiO1xuaW1wb3J0IHsgU3RvcnkgfSBmcm9tIFwiLi9TdG9yeVwiO1xuaW1wb3J0IHsgYXNPck51bGwgfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL1R5cGVBc3NlcnRpb25cIjtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFBhcnNlZE9iamVjdCB7XG4gIHB1YmxpYyBhYnN0cmFjdCByZWFkb25seSBHZW5lcmF0ZVJ1bnRpbWVPYmplY3Q6ICgpID0+IFJ1bnRpbWVPYmplY3QgfCBudWxsO1xuXG4gIHByaXZhdGUgX2FscmVhZHlIYWRFcnJvcjogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9hbHJlYWR5SGFkV2FybmluZzogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9kZWJ1Z01ldGFkYXRhOiBEZWJ1Z01ldGFkYXRhIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgX3J1bnRpbWVPYmplY3Q6IFJ1bnRpbWVPYmplY3QgfCBudWxsID0gbnVsbDtcblxuICBwdWJsaWMgY29udGVudDogUGFyc2VkT2JqZWN0W10gPSBbXTtcbiAgcHVibGljIHBhcmVudDogUGFyc2VkT2JqZWN0IHwgbnVsbCA9IG51bGw7XG5cbiAgZ2V0IGRlYnVnTWV0YWRhdGEoKSB7XG4gICAgaWYgKHRoaXMuX2RlYnVnTWV0YWRhdGEgPT09IG51bGwgJiYgdGhpcy5wYXJlbnQpIHtcbiAgICAgIHJldHVybiB0aGlzLnBhcmVudC5kZWJ1Z01ldGFkYXRhO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9kZWJ1Z01ldGFkYXRhO1xuICB9XG5cbiAgc2V0IGRlYnVnTWV0YWRhdGEodmFsdWU6IERlYnVnTWV0YWRhdGEgfCBudWxsKSB7XG4gICAgdGhpcy5fZGVidWdNZXRhZGF0YSA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGhhc093bkRlYnVnTWV0YWRhdGEoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIEJvb2xlYW4odGhpcy5kZWJ1Z01ldGFkYXRhKTtcbiAgfVxuXG4gIGdldCB0eXBlTmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIlBhcnNlZE9iamVjdFwiO1xuICB9XG5cbiAgcHVibGljIHJlYWRvbmx5IEdldFR5cGUgPSAoKTogc3RyaW5nID0+IHRoaXMudHlwZU5hbWU7XG5cbiAgZ2V0IHN0b3J5KCk6IFN0b3J5IHtcbiAgICBsZXQgYW5jZXN0b3I6IFBhcnNlZE9iamVjdCA9IHRoaXM7XG4gICAgd2hpbGUgKGFuY2VzdG9yLnBhcmVudCkge1xuICAgICAgYW5jZXN0b3IgPSBhbmNlc3Rvci5wYXJlbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFuY2VzdG9yIGFzIFN0b3J5O1xuICB9XG5cbiAgZ2V0IHJ1bnRpbWVPYmplY3QoKTogUnVudGltZU9iamVjdCB7XG4gICAgaWYgKCF0aGlzLl9ydW50aW1lT2JqZWN0KSB7XG4gICAgICB0aGlzLl9ydW50aW1lT2JqZWN0ID0gdGhpcy5HZW5lcmF0ZVJ1bnRpbWVPYmplY3QoKTtcbiAgICAgIGlmICh0aGlzLl9ydW50aW1lT2JqZWN0KSB7XG4gICAgICAgIHRoaXMuX3J1bnRpbWVPYmplY3QuZGVidWdNZXRhZGF0YSA9IHRoaXMuZGVidWdNZXRhZGF0YTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fcnVudGltZU9iamVjdCBhcyBSdW50aW1lT2JqZWN0O1xuICB9XG5cbiAgc2V0IHJ1bnRpbWVPYmplY3QodmFsdWU6IFJ1bnRpbWVPYmplY3QpIHtcbiAgICB0aGlzLl9ydW50aW1lT2JqZWN0ID0gdmFsdWU7XG4gIH1cblxuICBnZXQgcnVudGltZVBhdGgoKTogUnVudGltZVBhdGgge1xuICAgIGlmICghdGhpcy5ydW50aW1lT2JqZWN0LnBhdGgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnJ1bnRpbWVPYmplY3QucGF0aDtcbiAgfVxuXG4gIC8vIFdoZW4gY291bnRpbmcgdmlzaXRzIGFuZCB0dXJucyBzaW5jZSwgZGlmZmVyZW50IG9iamVjdFxuICAvLyB0eXBlcyBtYXkgaGF2ZSBkaWZmZXJlbnQgY29udGFpbmVycyB0aGF0IG5lZWRzIHRvIGJlIGNvdW50ZWQuXG4gIC8vIEZvciBtb3N0IGl0J2xsIGp1c3QgYmUgdGhlIG9iamVjdCdzIG1haW4gcnVudGltZSBvYmplY3QsXG4gIC8vIGJ1dCBmb3IgZS5nLiBjaG9pY2VzLCBpdCdsbCBiZSB0aGUgdGFyZ2V0IGNvbnRhaW5lci5cbiAgZ2V0IGNvbnRhaW5lckZvckNvdW50aW5nKCk6IFJ1bnRpbWVDb250YWluZXIgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5ydW50aW1lT2JqZWN0IGFzIFJ1bnRpbWVDb250YWluZXI7XG4gIH1cblxuICBnZXQgYW5jZXN0cnkoKTogUGFyc2VkT2JqZWN0W10ge1xuICAgIGxldCByZXN1bHQgPSBbXTtcblxuICAgIGxldCBhbmNlc3RvciA9IHRoaXMucGFyZW50O1xuICAgIHdoaWxlIChhbmNlc3Rvcikge1xuICAgICAgcmVzdWx0LnB1c2goYW5jZXN0b3IpO1xuICAgICAgYW5jZXN0b3IgPSBhbmNlc3Rvci5wYXJlbnQ7XG4gICAgfVxuXG4gICAgcmVzdWx0ID0gcmVzdWx0LnJldmVyc2UoKTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKlxuICBnZXQgZGVzY3JpcHRpb25PZlNjb3BlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgbG9jYXRpb25OYW1lczogc3RyaW5nW10gPSBbXTtcblxuICAgIGxldCBhbmNlc3RvcjogUGFyc2VkT2JqZWN0IHwgbnVsbCA9IHRoaXM7XG4gICAgd2hpbGUgKGFuY2VzdG9yKSB7XG4gICAgICB2YXIgYW5jZXN0b3JGbG93ID0gYW5jZXN0b3IgYXMgRmxvd0Jhc2U7XG4gICAgICBpZiAoYW5jZXN0b3JGbG93ICYmIGFuY2VzdG9yRmxvdy5uYW1lICE9IG51bGwpIHtcbiAgICAgICAgbG9jYXRpb25OYW1lcy5wdXNoKGAnJHthbmNlc3RvckZsb3cubmFtZX0nYCk7XG4gICAgICB9XG4gICAgICBhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudDtcbiAgICB9XG5cbiAgICBsZXQgc2NvcGVTQiA9ICcnO1xuICAgIGlmIChsb2NhdGlvbk5hbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGxvY2F0aW9uc0xpc3RTdHIgPSBsb2NhdGlvbk5hbWVzLmpvaW4oJywgJyk7XG4gICAgICBzY29wZVNCICs9IGAke2xvY2F0aW9uc0xpc3RTdHJ9IGFuZGA7XG4gICAgfVxuXG4gICAgc2NvcGVTQiArPSAnYXQgdG9wIHNjb3BlJztcblxuICAgIHJldHVybiBzY29wZVNCO1xuICB9XG4qL1xuXG4gIC8vIFJldHVybiB0aGUgb2JqZWN0IHNvIHRoYXQgbWV0aG9kIGNhbiBiZSBjaGFpbmVkIGVhc2lseVxuICBwdWJsaWMgcmVhZG9ubHkgQWRkQ29udGVudCA9IDxUIGV4dGVuZHMgUGFyc2VkT2JqZWN0LCBWIGV4dGVuZHMgVCB8IFRbXT4oXG4gICAgc3ViQ29udGVudDogVlxuICApID0+IHtcbiAgICBpZiAodGhpcy5jb250ZW50ID09PSBudWxsKSB7XG4gICAgICB0aGlzLmNvbnRlbnQgPSBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBzdWIgPSBBcnJheS5pc0FycmF5KHN1YkNvbnRlbnQpID8gc3ViQ29udGVudCA6IFtzdWJDb250ZW50XTtcblxuICAgIC8vIE1ha2UgcmVzaWxpZW50IHRvIGNvbnRlbnQgbm90IGV4aXN0aW5nLCB3aGljaCBjYW4gaGFwcGVuXG4gICAgLy8gaW4gdGhlIGNhc2Ugb2YgcGFyc2UgZXJyb3JzIHdoZXJlIHdlJ3ZlIGFscmVhZHkgcmVwb3J0ZWRcbiAgICAvLyBhbiBlcnJvciBidXQgc3RpbGwgd2FudCBhIHZhbGlkIHN0cnVjdHVyZSBzbyB3ZSBjYW5cbiAgICAvLyBjYXJyeSBvbiBwYXJzaW5nLlxuICAgIGZvciAoY29uc3Qgc3Mgb2Ygc3ViKSB7XG4gICAgICBpZiAoc3MuaGFzT3duUHJvcGVydHkoXCJwYXJlbnRcIikpIHtcbiAgICAgICAgc3MucGFyZW50ID0gdGhpcztcbiAgICAgIH1cbiAgICAgIHRoaXMuY29udGVudC5wdXNoKHNzKTtcbiAgICB9XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShzdWJDb250ZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc3ViQ29udGVudDtcbiAgICB9XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IEluc2VydENvbnRlbnQgPSA8VCBleHRlbmRzIFBhcnNlZE9iamVjdD4oXG4gICAgaW5kZXg6IG51bWJlcixcbiAgICBzdWJDb250ZW50OiBUXG4gICk6IFQgPT4ge1xuICAgIGlmICh0aGlzLmNvbnRlbnQgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuY29udGVudCA9IFtdO1xuICAgIH1cblxuICAgIHN1YkNvbnRlbnQucGFyZW50ID0gdGhpcztcbiAgICB0aGlzLmNvbnRlbnQuc3BsaWNlKGluZGV4LCAwLCBzdWJDb250ZW50KTtcblxuICAgIHJldHVybiBzdWJDb250ZW50O1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBGaW5kID1cbiAgICA8VCBleHRlbmRzIFBhcnNlZE9iamVjdD4oXG4gICAgICB0eXBlOiAobmV3ICguLi5hcmc6IGFueVtdKSA9PiBUKSB8IChGdW5jdGlvbiAmIHsgcHJvdG90eXBlOiBUIH0pXG4gICAgKSA9PlxuICAgIChxdWVyeUZ1bmM6IEZpbmRRdWVyeUZ1bmM8VD4gfCBudWxsID0gbnVsbCk6IFQgfCBudWxsID0+IHtcbiAgICAgIGxldCB0T2JqID0gYXNPck51bGwodGhpcywgdHlwZSkgYXMgYW55IGFzIFQ7XG4gICAgICBpZiAodE9iaiAhPT0gbnVsbCAmJiAocXVlcnlGdW5jID09PSBudWxsIHx8IHF1ZXJ5RnVuYyh0T2JqKSA9PT0gdHJ1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHRPYmo7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmNvbnRlbnQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3Qgb2JqIG9mIHRoaXMuY29udGVudCkge1xuICAgICAgICBsZXQgbmVzdGVkUmVzdWx0ID0gb2JqLkZpbmQgJiYgb2JqLkZpbmQodHlwZSkocXVlcnlGdW5jKTtcbiAgICAgICAgaWYgKG5lc3RlZFJlc3VsdCkge1xuICAgICAgICAgIHJldHVybiBuZXN0ZWRSZXN1bHQgYXMgVDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBGaW5kQWxsID1cbiAgICA8VCBleHRlbmRzIFBhcnNlZE9iamVjdD4oXG4gICAgICB0eXBlOiAobmV3ICguLi5hcmc6IGFueVtdKSA9PiBUKSB8IChGdW5jdGlvbiAmIHsgcHJvdG90eXBlOiBUIH0pXG4gICAgKSA9PlxuICAgIChxdWVyeUZ1bmM/OiBGaW5kUXVlcnlGdW5jPFQ+LCBmb3VuZFNvRmFyPzogVFtdKTogVFtdID0+IHtcbiAgICAgIGNvbnN0IGZvdW5kID0gQXJyYXkuaXNBcnJheShmb3VuZFNvRmFyKSA/IGZvdW5kU29GYXIgOiBbXTtcblxuICAgICAgY29uc3QgdE9iaiA9IGFzT3JOdWxsKHRoaXMsIHR5cGUpO1xuICAgICAgaWYgKHRPYmogIT09IG51bGwgJiYgKCFxdWVyeUZ1bmMgfHwgcXVlcnlGdW5jKHRPYmopID09PSB0cnVlKSkge1xuICAgICAgICBmb3VuZC5wdXNoKHRPYmopO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5jb250ZW50ID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBvYmogb2YgdGhpcy5jb250ZW50KSB7XG4gICAgICAgIG9iai5GaW5kQWxsICYmIG9iai5GaW5kQWxsKHR5cGUpKHF1ZXJ5RnVuYywgZm91bmQpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm91bmQ7XG4gICAgfTtcblxuICBwdWJsaWMgUmVzb2x2ZVJlZmVyZW5jZXMoY29udGV4dDogU3RvcnkpIHtcbiAgICBpZiAodGhpcy5jb250ZW50ICE9PSBudWxsKSB7XG4gICAgICBmb3IgKGNvbnN0IG9iaiBvZiB0aGlzLmNvbnRlbnQpIHtcbiAgICAgICAgb2JqLlJlc29sdmVSZWZlcmVuY2VzKGNvbnRleHQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBFcnJvcihcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgc291cmNlOiBQYXJzZWRPYmplY3QgfCBudWxsID0gbnVsbCxcbiAgICBpc1dhcm5pbmc6IGJvb2xlYW4gPSBmYWxzZVxuICApOiB2b2lkIHtcbiAgICBpZiAoc291cmNlID09PSBudWxsKSB7XG4gICAgICBzb3VyY2UgPSB0aGlzO1xuICAgIH1cblxuICAgIC8vIE9ubHkgYWxsb3cgYSBzaW5nbGUgcGFyc2VkIG9iamVjdCB0byBoYXZlIGEgc2luZ2xlIGVycm9yICpkaXJlY3RseSogYXNzb2NpYXRlZCB3aXRoIGl0XG4gICAgaWYgKFxuICAgICAgKHNvdXJjZS5fYWxyZWFkeUhhZEVycm9yICYmICFpc1dhcm5pbmcpIHx8XG4gICAgICAoc291cmNlLl9hbHJlYWR5SGFkV2FybmluZyAmJiBpc1dhcm5pbmcpXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGFyZW50KSB7XG4gICAgICB0aGlzLnBhcmVudC5FcnJvcihtZXNzYWdlLCBzb3VyY2UsIGlzV2FybmluZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTm8gcGFyZW50IG9iamVjdCB0byBzZW5kIGVycm9yIHRvOiAke21lc3NhZ2V9YCk7XG4gICAgfVxuXG4gICAgaWYgKGlzV2FybmluZykge1xuICAgICAgc291cmNlLl9hbHJlYWR5SGFkV2FybmluZyA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNvdXJjZS5fYWxyZWFkeUhhZEVycm9yID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVhZG9ubHkgV2FybmluZyA9IChcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgc291cmNlOiBQYXJzZWRPYmplY3QgfCBudWxsID0gbnVsbFxuICApOiB2b2lkID0+IHtcbiAgICB0aGlzLkVycm9yKG1lc3NhZ2UsIHNvdXJjZSwgdHJ1ZSk7XG4gIH07XG59XG4iLCJpbXBvcnQgeyBQYXJzZWRPYmplY3QgfSBmcm9tIFwiLi9PYmplY3RcIjtcblxuZXhwb3J0IGNsYXNzIEF1dGhvcldhcm5pbmcgZXh0ZW5kcyBQYXJzZWRPYmplY3Qge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgcmVhZG9ubHkgd2FybmluZ01lc3NhZ2U6IHN0cmluZykge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBnZXQgdHlwZU5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJBdXRob3JXYXJuaW5nXCI7XG4gIH1cblxuICBwdWJsaWMgcmVhZG9ubHkgR2VuZXJhdGVSdW50aW1lT2JqZWN0ID0gKCk6IG51bGwgPT4ge1xuICAgIHRoaXMuV2FybmluZyh0aGlzLndhcm5pbmdNZXNzYWdlKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcbn1cbiIsImV4cG9ydCBjbGFzcyBQYXRoIHtcbiAgcHVibGljIHN0YXRpYyBwYXJlbnRJZCA9IFwiXlwiO1xuXG4gIHB1YmxpYyBfaXNSZWxhdGl2ZTogYm9vbGVhbjtcbiAgcHVibGljIF9jb21wb25lbnRzOiBQYXRoLkNvbXBvbmVudFtdO1xuICBwdWJsaWMgX2NvbXBvbmVudHNTdHJpbmc6IHN0cmluZyB8IG51bGw7XG5cbiAgY29uc3RydWN0b3IoKTtcbiAgY29uc3RydWN0b3IoY29tcG9uZW50c1N0cmluZzogc3RyaW5nKTtcbiAgY29uc3RydWN0b3IoaGVhZDogUGF0aC5Db21wb25lbnQsIHRhaWw6IFBhdGgpO1xuICBjb25zdHJ1Y3RvcihoZWFkOiBQYXRoLkNvbXBvbmVudFtdLCByZWxhdGl2ZT86IGJvb2xlYW4pO1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9jb21wb25lbnRzID0gW107XG4gICAgdGhpcy5fY29tcG9uZW50c1N0cmluZyA9IG51bGw7XG4gICAgdGhpcy5faXNSZWxhdGl2ZSA9IGZhbHNlO1xuXG4gICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT0gXCJzdHJpbmdcIikge1xuICAgICAgbGV0IGNvbXBvbmVudHNTdHJpbmcgPSBhcmd1bWVudHNbMF0gYXMgc3RyaW5nO1xuICAgICAgdGhpcy5jb21wb25lbnRzU3RyaW5nID0gY29tcG9uZW50c1N0cmluZztcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgYXJndW1lbnRzWzBdIGluc3RhbmNlb2YgUGF0aC5Db21wb25lbnQgJiZcbiAgICAgIGFyZ3VtZW50c1sxXSBpbnN0YW5jZW9mIFBhdGhcbiAgICApIHtcbiAgICAgIGxldCBoZWFkID0gYXJndW1lbnRzWzBdIGFzIFBhdGguQ29tcG9uZW50O1xuICAgICAgbGV0IHRhaWwgPSBhcmd1bWVudHNbMV0gYXMgUGF0aDtcbiAgICAgIHRoaXMuX2NvbXBvbmVudHMucHVzaChoZWFkKTtcbiAgICAgIHRoaXMuX2NvbXBvbmVudHMgPSB0aGlzLl9jb21wb25lbnRzLmNvbmNhdCh0YWlsLl9jb21wb25lbnRzKTtcbiAgICB9IGVsc2UgaWYgKGFyZ3VtZW50c1swXSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICBsZXQgaGVhZCA9IGFyZ3VtZW50c1swXSBhcyBQYXRoLkNvbXBvbmVudFtdO1xuICAgICAgbGV0IHJlbGF0aXZlID0gISFhcmd1bWVudHNbMV0gYXMgYm9vbGVhbjtcbiAgICAgIHRoaXMuX2NvbXBvbmVudHMgPSB0aGlzLl9jb21wb25lbnRzLmNvbmNhdChoZWFkKTtcbiAgICAgIHRoaXMuX2lzUmVsYXRpdmUgPSByZWxhdGl2ZTtcbiAgICB9XG4gIH1cbiAgZ2V0IGlzUmVsYXRpdmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzUmVsYXRpdmU7XG4gIH1cbiAgZ2V0IGNvbXBvbmVudENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudHMubGVuZ3RoO1xuICB9XG4gIGdldCBoZWFkKCk6IFBhdGguQ29tcG9uZW50IHwgbnVsbCB7XG4gICAgaWYgKHRoaXMuX2NvbXBvbmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuICBnZXQgdGFpbCgpOiBQYXRoIHtcbiAgICBpZiAodGhpcy5fY29tcG9uZW50cy5sZW5ndGggPj0gMikge1xuICAgICAgLy8gY2FyZWZ1bCwgdGhlIG9yaWdpbmFsIGNvZGUgdXNlcyBsZW5ndGgtMSBoZXJlLiBUaGlzIGlzIGJlY2F1c2UgdGhlIHNlY29uZCBhcmd1bWVudCBvZlxuICAgICAgLy8gTGlzdC5HZXRSYW5nZSBpcyBhIG51bWJlciBvZiBlbGVtZW50cyB0byBleHRyYWN0LCB3aGVyZWFzZSBBcnJheS5zbGljZSB1c2VzIGFuIGluZGV4XG4gICAgICBsZXQgdGFpbENvbXBzID0gdGhpcy5fY29tcG9uZW50cy5zbGljZSgxLCB0aGlzLl9jb21wb25lbnRzLmxlbmd0aCk7XG4gICAgICByZXR1cm4gbmV3IFBhdGgodGFpbENvbXBzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFBhdGguc2VsZjtcbiAgICB9XG4gIH1cbiAgZ2V0IGxlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9jb21wb25lbnRzLmxlbmd0aDtcbiAgfVxuICBnZXQgbGFzdENvbXBvbmVudCgpOiBQYXRoLkNvbXBvbmVudCB8IG51bGwge1xuICAgIGxldCBsYXN0Q29tcG9uZW50SWR4ID0gdGhpcy5fY29tcG9uZW50cy5sZW5ndGggLSAxO1xuICAgIGlmIChsYXN0Q29tcG9uZW50SWR4ID49IDApIHtcbiAgICAgIHJldHVybiB0aGlzLl9jb21wb25lbnRzW2xhc3RDb21wb25lbnRJZHhdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbiAgZ2V0IGNvbnRhaW5zTmFtZWRDb21wb25lbnQoKTogYm9vbGVhbiB7XG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSB0aGlzLl9jb21wb25lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgaWYgKCF0aGlzLl9jb21wb25lbnRzW2ldLmlzSW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBzdGF0aWMgZ2V0IHNlbGYoKTogUGF0aCB7XG4gICAgbGV0IHBhdGggPSBuZXcgUGF0aCgpO1xuICAgIHBhdGguX2lzUmVsYXRpdmUgPSB0cnVlO1xuICAgIHJldHVybiBwYXRoO1xuICB9XG5cbiAgcHVibGljIEdldENvbXBvbmVudChpbmRleDogbnVtYmVyKTogUGF0aC5Db21wb25lbnQge1xuICAgIHJldHVybiB0aGlzLl9jb21wb25lbnRzW2luZGV4XTtcbiAgfVxuICBwdWJsaWMgUGF0aEJ5QXBwZW5kaW5nUGF0aChwYXRoVG9BcHBlbmQ6IFBhdGgpOiBQYXRoIHtcbiAgICBsZXQgcCA9IG5ldyBQYXRoKCk7XG5cbiAgICBsZXQgdXB3YXJkTW92ZXMgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aFRvQXBwZW5kLl9jb21wb25lbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICBpZiAocGF0aFRvQXBwZW5kLl9jb21wb25lbnRzW2ldLmlzUGFyZW50KSB7XG4gICAgICAgIHVwd2FyZE1vdmVzKys7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2NvbXBvbmVudHMubGVuZ3RoIC0gdXB3YXJkTW92ZXM7ICsraSkge1xuICAgICAgcC5fY29tcG9uZW50cy5wdXNoKHRoaXMuX2NvbXBvbmVudHNbaV0pO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSB1cHdhcmRNb3ZlczsgaSA8IHBhdGhUb0FwcGVuZC5fY29tcG9uZW50cy5sZW5ndGg7ICsraSkge1xuICAgICAgcC5fY29tcG9uZW50cy5wdXNoKHBhdGhUb0FwcGVuZC5fY29tcG9uZW50c1tpXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHA7XG4gIH1cbiAgZ2V0IGNvbXBvbmVudHNTdHJpbmcoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5fY29tcG9uZW50c1N0cmluZyA9PSBudWxsKSB7XG4gICAgICB0aGlzLl9jb21wb25lbnRzU3RyaW5nID0gdGhpcy5fY29tcG9uZW50cy5qb2luKFwiLlwiKTtcbiAgICAgIGlmICh0aGlzLmlzUmVsYXRpdmUpXG4gICAgICAgIHRoaXMuX2NvbXBvbmVudHNTdHJpbmcgPSBcIi5cIiArIHRoaXMuX2NvbXBvbmVudHNTdHJpbmc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2NvbXBvbmVudHNTdHJpbmc7XG4gIH1cbiAgc2V0IGNvbXBvbmVudHNTdHJpbmcodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuX2NvbXBvbmVudHMubGVuZ3RoID0gMDtcblxuICAgIHRoaXMuX2NvbXBvbmVudHNTdHJpbmcgPSB2YWx1ZTtcblxuICAgIGlmICh0aGlzLl9jb21wb25lbnRzU3RyaW5nID09IG51bGwgfHwgdGhpcy5fY29tcG9uZW50c1N0cmluZyA9PSBcIlwiKSByZXR1cm47XG5cbiAgICBpZiAodGhpcy5fY29tcG9uZW50c1N0cmluZ1swXSA9PSBcIi5cIikge1xuICAgICAgdGhpcy5faXNSZWxhdGl2ZSA9IHRydWU7XG4gICAgICB0aGlzLl9jb21wb25lbnRzU3RyaW5nID0gdGhpcy5fY29tcG9uZW50c1N0cmluZy5zdWJzdHJpbmcoMSk7XG4gICAgfVxuXG4gICAgbGV0IGNvbXBvbmVudFN0cmluZ3MgPSB0aGlzLl9jb21wb25lbnRzU3RyaW5nLnNwbGl0KFwiLlwiKTtcbiAgICBmb3IgKGxldCBzdHIgb2YgY29tcG9uZW50U3RyaW5ncykge1xuICAgICAgLy8gd2UgbmVlZCB0byBkaXN0aW5ndWlzaCBiZXR3ZWVuIG5hbWVkIGNvbXBvbmVudHMgdGhhdCBzdGFydCB3aXRoIGEgbnVtYmVyLCBlZyBcIjQyc29tZXdoZXJlXCIsIGFuZCBpbmRleGVkIGNvbXBvbmVudHNcbiAgICAgIC8vIHRoZSBub3JtYWwgcGFyc2VJbnQgd29uJ3QgZG8gZm9yIHRoZSBkZXRlY3Rpb24gYmVjYXVzZSBpdCdzIHRvbyByZWxheGVkLlxuICAgICAgLy8gc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL3BhcnNlSW50XG4gICAgICBpZiAoL14oXFwtfFxcKyk/KFswLTldK3xJbmZpbml0eSkkLy50ZXN0KHN0cikpIHtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50cy5wdXNoKG5ldyBQYXRoLkNvbXBvbmVudChwYXJzZUludChzdHIpKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9jb21wb25lbnRzLnB1c2gobmV3IFBhdGguQ29tcG9uZW50KHN0cikpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5jb21wb25lbnRzU3RyaW5nO1xuICB9XG4gIHB1YmxpYyBFcXVhbHMob3RoZXJQYXRoOiBQYXRoIHwgbnVsbCk6IGJvb2xlYW4ge1xuICAgIGlmIChvdGhlclBhdGggPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKG90aGVyUGF0aC5fY29tcG9uZW50cy5sZW5ndGggIT0gdGhpcy5fY29tcG9uZW50cy5sZW5ndGgpIHJldHVybiBmYWxzZTtcblxuICAgIGlmIChvdGhlclBhdGguaXNSZWxhdGl2ZSAhPSB0aGlzLmlzUmVsYXRpdmUpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIHRoZSBvcmlnaW5hbCBjb2RlIHVzZXMgU2VxdWVuY2VFcXVhbCBoZXJlLCBzbyB3ZSBuZWVkIHRvIGl0ZXJhdGUgb3ZlciB0aGUgY29tcG9uZW50cyBtYW51YWxseS5cbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IG90aGVyUGF0aC5fY29tcG9uZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIC8vIGl0J3Mgbm90IHF1aXRlIGNsZWFyIHdoZXRoZXIgdGhpcyB0ZXN0IHNob3VsZCB1c2UgRXF1YWxzIG9yIGEgc2ltcGxlID09IG9wZXJhdG9yLFxuICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS95LWxvaHNlL2lua2pzL2lzc3Vlcy8yMlxuICAgICAgaWYgKCFvdGhlclBhdGguX2NvbXBvbmVudHNbaV0uRXF1YWxzKHRoaXMuX2NvbXBvbmVudHNbaV0pKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcHVibGljIFBhdGhCeUFwcGVuZGluZ0NvbXBvbmVudChjOiBQYXRoLkNvbXBvbmVudCk6IFBhdGgge1xuICAgIGxldCBwID0gbmV3IFBhdGgoKTtcbiAgICBwLl9jb21wb25lbnRzLnB1c2goLi4udGhpcy5fY29tcG9uZW50cyk7XG4gICAgcC5fY29tcG9uZW50cy5wdXNoKGMpO1xuICAgIHJldHVybiBwO1xuICB9XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgUGF0aCB7XG4gIGV4cG9ydCBjbGFzcyBDb21wb25lbnQge1xuICAgIHB1YmxpYyByZWFkb25seSBpbmRleDogbnVtYmVyO1xuICAgIHB1YmxpYyByZWFkb25seSBuYW1lOiBzdHJpbmcgfCBudWxsO1xuXG4gICAgY29uc3RydWN0b3IoaW5kZXhPck5hbWU6IHN0cmluZyB8IG51bWJlcikge1xuICAgICAgdGhpcy5pbmRleCA9IC0xO1xuICAgICAgdGhpcy5uYW1lID0gbnVsbDtcbiAgICAgIGlmICh0eXBlb2YgaW5kZXhPck5hbWUgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICB0aGlzLm5hbWUgPSBpbmRleE9yTmFtZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleE9yTmFtZTtcbiAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGlzSW5kZXgoKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gdGhpcy5pbmRleCA+PSAwO1xuICAgIH1cbiAgICBnZXQgaXNQYXJlbnQoKTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gdGhpcy5uYW1lID09IFBhdGgucGFyZW50SWQ7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBUb1BhcmVudCgpOiBDb21wb25lbnQge1xuICAgICAgcmV0dXJuIG5ldyBDb21wb25lbnQoUGF0aC5wYXJlbnRJZCk7XG4gICAgfVxuICAgIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgIGlmICh0aGlzLmlzSW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXgudG9TdHJpbmcoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBFcXVhbHMob3RoZXJDb21wOiBDb21wb25lbnQpOiBib29sZWFuIHtcbiAgICAgIGlmIChvdGhlckNvbXAgIT0gbnVsbCAmJiBvdGhlckNvbXAuaXNJbmRleCA9PSB0aGlzLmlzSW5kZXgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNJbmRleCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLmluZGV4ID09IG90aGVyQ29tcC5pbmRleDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5uYW1lID09IG90aGVyQ29tcC5uYW1lO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBuYW1lc3BhY2UgRGVidWcge1xuICBleHBvcnQgZnVuY3Rpb24gQXNzZXJ0VHlwZTxUPihcbiAgICB2YXJpYWJsZTogYW55LFxuICAgIHR5cGU6IG5ldyAoKSA9PiBULFxuICAgIG1lc3NhZ2U6IHN0cmluZ1xuICApOiB2b2lkIHwgbmV2ZXIge1xuICAgIEFzc2VydCh2YXJpYWJsZSBpbnN0YW5jZW9mIHR5cGUsIG1lc3NhZ2UpO1xuICB9XG5cbiAgZXhwb3J0IGZ1bmN0aW9uIEFzc2VydChjb25kaXRpb246IGJvb2xlYW4sIG1lc3NhZ2U/OiBzdHJpbmcpOiB2b2lkIHwgbmV2ZXIge1xuICAgIGlmICghY29uZGl0aW9uKSB7XG4gICAgICBpZiAodHlwZW9mIG1lc3NhZ2UgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29uc29sZS50cmFjZSkge1xuICAgICAgICBjb25zb2xlLnRyYWNlKCk7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlwiKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IElua09iamVjdCB9IGZyb20gXCIuL09iamVjdFwiO1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gXCIuL1BhdGhcIjtcbmltcG9ydCB7IElua0xpc3QsIElua0xpc3RJdGVtIH0gZnJvbSBcIi4vSW5rTGlzdFwiO1xuaW1wb3J0IHsgU3RvcnlFeGNlcHRpb24gfSBmcm9tIFwiLi9TdG9yeUV4Y2VwdGlvblwiO1xuaW1wb3J0IHsgYXNPck51bGwsIGFzT3JUaHJvd3MgfSBmcm9tIFwiLi9UeXBlQXNzZXJ0aW9uXCI7XG5pbXBvcnQgeyB0cnlQYXJzZUludCwgdHJ5UGFyc2VGbG9hdCB9IGZyb20gXCIuL1RyeUdldFJlc3VsdFwiO1xuaW1wb3J0IHsgdGhyb3dOdWxsRXhjZXB0aW9uIH0gZnJvbSBcIi4vTnVsbEV4Y2VwdGlvblwiO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RWYWx1ZSBleHRlbmRzIElua09iamVjdCB7XG4gIHB1YmxpYyBhYnN0cmFjdCBnZXQgdmFsdWVUeXBlKCk6IFZhbHVlVHlwZTtcbiAgcHVibGljIGFic3RyYWN0IGdldCBpc1RydXRoeSgpOiBib29sZWFuO1xuICBwdWJsaWMgYWJzdHJhY3QgZ2V0IHZhbHVlT2JqZWN0KCk6IGFueTtcblxuICBwdWJsaWMgYWJzdHJhY3QgQ2FzdChuZXdUeXBlOiBWYWx1ZVR5cGUpOiBWYWx1ZTxhbnk+O1xuXG4gIHB1YmxpYyBzdGF0aWMgQ3JlYXRlKFxuICAgIHZhbDogYW55LFxuICAgIHByZWZlcnJlZE51bWJlclR5cGU/OiBWYWx1ZVR5cGVcbiAgKTogVmFsdWU8YW55PiB8IG51bGwge1xuICAgIC8vIFRoaXMgY29kZSBkb2Vzbid0IGV4aXN0IGluIHVwc3RyZWFtIGFuZCBpcyBzaW1wbHkgaGVyZSB0byBlbmZvcmNlXG4gICAgLy8gdGhlIGNyZWF0aW9uIG9mIHRoZSBwcm9wZXIgbnVtYmVyIHZhbHVlLlxuICAgIC8vIElmIGBwcmVmZXJyZWROdW1iZXJUeXBlYCBpcyBub3QgcHJvdmlkZWQgb3IgaWYgdmFsdWUgZG9lc24ndCBtYXRjaFxuICAgIC8vIGBwcmVmZXJyZWROdW1iZXJUeXBlYCwgdGhpcyBjb25kaXRpb25hbCBkb2VzIG5vdGhpbmcuXG4gICAgaWYgKHByZWZlcnJlZE51bWJlclR5cGUpIHtcbiAgICAgIGlmIChcbiAgICAgICAgcHJlZmVycmVkTnVtYmVyVHlwZSA9PT0gKFZhbHVlVHlwZS5JbnQgYXMgVmFsdWVUeXBlKSAmJlxuICAgICAgICBOdW1iZXIuaXNJbnRlZ2VyKE51bWJlcih2YWwpKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBuZXcgSW50VmFsdWUoTnVtYmVyKHZhbCkpO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgcHJlZmVycmVkTnVtYmVyVHlwZSA9PT0gKFZhbHVlVHlwZS5GbG9hdCBhcyBWYWx1ZVR5cGUpICYmXG4gICAgICAgICFpc05hTih2YWwpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdFZhbHVlKE51bWJlcih2YWwpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHZhbCA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgIHJldHVybiBuZXcgQm9vbFZhbHVlKEJvb2xlYW4odmFsKSk7XG4gICAgfVxuXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3ktbG9oc2UvaW5ranMvaXNzdWVzLzQyNVxuICAgIC8vIENoYW5nZWQgY29uZGl0aW9uIHNlcXVlbmNlLCBiZWNhdXNlIE51bWJlcignJykgaXNcbiAgICAvLyBwYXJzZWQgdG8gMCwgd2hpY2ggbWFkZSBzZXR0aW5nIHN0cmluZyB0byBlbXB0eVxuICAgIC8vIGltcG9zc2libGVcbiAgICBpZiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIG5ldyBTdHJpbmdWYWx1ZShTdHJpbmcodmFsKSk7XG4gICAgfSBlbHNlIGlmIChOdW1iZXIuaXNJbnRlZ2VyKE51bWJlcih2YWwpKSkge1xuICAgICAgcmV0dXJuIG5ldyBJbnRWYWx1ZShOdW1iZXIodmFsKSk7XG4gICAgfSBlbHNlIGlmICghaXNOYU4odmFsKSkge1xuICAgICAgcmV0dXJuIG5ldyBGbG9hdFZhbHVlKE51bWJlcih2YWwpKTtcbiAgICB9IGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIFBhdGgpIHtcbiAgICAgIHJldHVybiBuZXcgRGl2ZXJ0VGFyZ2V0VmFsdWUoYXNPclRocm93cyh2YWwsIFBhdGgpKTtcbiAgICB9IGVsc2UgaWYgKHZhbCBpbnN0YW5jZW9mIElua0xpc3QpIHtcbiAgICAgIHJldHVybiBuZXcgTGlzdFZhbHVlKGFzT3JUaHJvd3ModmFsLCBJbmtMaXN0KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcHVibGljIENvcHkoKSB7XG4gICAgcmV0dXJuIGFzT3JUaHJvd3MoQWJzdHJhY3RWYWx1ZS5DcmVhdGUodGhpcy52YWx1ZU9iamVjdCksIElua09iamVjdCk7XG4gIH1cbiAgcHVibGljIEJhZENhc3RFeGNlcHRpb24odGFyZ2V0VHlwZTogVmFsdWVUeXBlKSB7XG4gICAgcmV0dXJuIG5ldyBTdG9yeUV4Y2VwdGlvbihcbiAgICAgIFwiQ2FuJ3QgY2FzdCBcIiArXG4gICAgICAgIHRoaXMudmFsdWVPYmplY3QgK1xuICAgICAgICBcIiBmcm9tIFwiICtcbiAgICAgICAgdGhpcy52YWx1ZVR5cGUgK1xuICAgICAgICBcIiB0byBcIiArXG4gICAgICAgIHRhcmdldFR5cGVcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBWYWx1ZTxcbiAgVCBleHRlbmRzIHsgdG9TdHJpbmc6ICgpID0+IHN0cmluZyB9LFxuPiBleHRlbmRzIEFic3RyYWN0VmFsdWUge1xuICBwdWJsaWMgdmFsdWU6IFQgfCBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKHZhbDogVCB8IG51bGwpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMudmFsdWUgPSB2YWw7XG4gIH1cbiAgcHVibGljIGdldCB2YWx1ZU9iamVjdCgpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgfVxuICBwdWJsaWMgdG9TdHJpbmcoKSB7XG4gICAgaWYgKHRoaXMudmFsdWUgPT09IG51bGwpIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJWYWx1ZS52YWx1ZVwiKTtcbiAgICByZXR1cm4gdGhpcy52YWx1ZS50b1N0cmluZygpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBCb29sVmFsdWUgZXh0ZW5kcyBWYWx1ZTxib29sZWFuPiB7XG4gIGNvbnN0cnVjdG9yKHZhbDogYm9vbGVhbikge1xuICAgIHN1cGVyKHZhbCB8fCBmYWxzZSk7XG4gIH1cbiAgcHVibGljIGdldCBpc1RydXRoeSgpIHtcbiAgICByZXR1cm4gQm9vbGVhbih0aGlzLnZhbHVlKTtcbiAgfVxuICBwdWJsaWMgZ2V0IHZhbHVlVHlwZSgpIHtcbiAgICByZXR1cm4gVmFsdWVUeXBlLkJvb2w7XG4gIH1cblxuICBwdWJsaWMgQ2FzdChuZXdUeXBlOiBWYWx1ZVR5cGUpOiBWYWx1ZTxhbnk+IHtcbiAgICBpZiAodGhpcy52YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcIlZhbHVlLnZhbHVlXCIpO1xuXG4gICAgaWYgKG5ld1R5cGUgPT0gdGhpcy52YWx1ZVR5cGUpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGlmIChuZXdUeXBlID09IFZhbHVlVHlwZS5JbnQpIHtcbiAgICAgIHJldHVybiBuZXcgSW50VmFsdWUodGhpcy52YWx1ZSA/IDEgOiAwKTtcbiAgICB9XG5cbiAgICBpZiAobmV3VHlwZSA9PSBWYWx1ZVR5cGUuRmxvYXQpIHtcbiAgICAgIHJldHVybiBuZXcgRmxvYXRWYWx1ZSh0aGlzLnZhbHVlID8gMS4wIDogMC4wKTtcbiAgICB9XG5cbiAgICBpZiAobmV3VHlwZSA9PSBWYWx1ZVR5cGUuU3RyaW5nKSB7XG4gICAgICByZXR1cm4gbmV3IFN0cmluZ1ZhbHVlKHRoaXMudmFsdWUgPyBcInRydWVcIiA6IFwiZmFsc2VcIik7XG4gICAgfVxuXG4gICAgdGhyb3cgdGhpcy5CYWRDYXN0RXhjZXB0aW9uKG5ld1R5cGUpO1xuICB9XG5cbiAgcHVibGljIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnZhbHVlID8gXCJ0cnVlXCIgOiBcImZhbHNlXCI7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEludFZhbHVlIGV4dGVuZHMgVmFsdWU8bnVtYmVyPiB7XG4gIGNvbnN0cnVjdG9yKHZhbDogbnVtYmVyKSB7XG4gICAgc3VwZXIodmFsIHx8IDApO1xuICB9XG4gIHB1YmxpYyBnZXQgaXNUcnV0aHkoKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWUgIT0gMDtcbiAgfVxuICBwdWJsaWMgZ2V0IHZhbHVlVHlwZSgpIHtcbiAgICByZXR1cm4gVmFsdWVUeXBlLkludDtcbiAgfVxuXG4gIHB1YmxpYyBDYXN0KG5ld1R5cGU6IFZhbHVlVHlwZSk6IFZhbHVlPGFueT4ge1xuICAgIGlmICh0aGlzLnZhbHVlID09PSBudWxsKSByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwiVmFsdWUudmFsdWVcIik7XG5cbiAgICBpZiAobmV3VHlwZSA9PSB0aGlzLnZhbHVlVHlwZSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKG5ld1R5cGUgPT0gVmFsdWVUeXBlLkJvb2wpIHtcbiAgICAgIHJldHVybiBuZXcgQm9vbFZhbHVlKHRoaXMudmFsdWUgPT09IDAgPyBmYWxzZSA6IHRydWUpO1xuICAgIH1cblxuICAgIGlmIChuZXdUeXBlID09IFZhbHVlVHlwZS5GbG9hdCkge1xuICAgICAgcmV0dXJuIG5ldyBGbG9hdFZhbHVlKHRoaXMudmFsdWUpO1xuICAgIH1cblxuICAgIGlmIChuZXdUeXBlID09IFZhbHVlVHlwZS5TdHJpbmcpIHtcbiAgICAgIHJldHVybiBuZXcgU3RyaW5nVmFsdWUoXCJcIiArIHRoaXMudmFsdWUpO1xuICAgIH1cblxuICAgIHRocm93IHRoaXMuQmFkQ2FzdEV4Y2VwdGlvbihuZXdUeXBlKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmxvYXRWYWx1ZSBleHRlbmRzIFZhbHVlPG51bWJlcj4ge1xuICBjb25zdHJ1Y3Rvcih2YWw6IG51bWJlcikge1xuICAgIHN1cGVyKHZhbCB8fCAwLjApO1xuICB9XG4gIHB1YmxpYyBnZXQgaXNUcnV0aHkoKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWUgIT0gMC4wO1xuICB9XG4gIHB1YmxpYyBnZXQgdmFsdWVUeXBlKCkge1xuICAgIHJldHVybiBWYWx1ZVR5cGUuRmxvYXQ7XG4gIH1cblxuICBwdWJsaWMgQ2FzdChuZXdUeXBlOiBWYWx1ZVR5cGUpOiBWYWx1ZTxhbnk+IHtcbiAgICBpZiAodGhpcy52YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcIlZhbHVlLnZhbHVlXCIpO1xuXG4gICAgaWYgKG5ld1R5cGUgPT0gdGhpcy52YWx1ZVR5cGUpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIGlmIChuZXdUeXBlID09IFZhbHVlVHlwZS5Cb29sKSB7XG4gICAgICByZXR1cm4gbmV3IEJvb2xWYWx1ZSh0aGlzLnZhbHVlID09PSAwLjAgPyBmYWxzZSA6IHRydWUpO1xuICAgIH1cblxuICAgIGlmIChuZXdUeXBlID09IFZhbHVlVHlwZS5JbnQpIHtcbiAgICAgIHJldHVybiBuZXcgSW50VmFsdWUodGhpcy52YWx1ZSk7XG4gICAgfVxuXG4gICAgaWYgKG5ld1R5cGUgPT0gVmFsdWVUeXBlLlN0cmluZykge1xuICAgICAgcmV0dXJuIG5ldyBTdHJpbmdWYWx1ZShcIlwiICsgdGhpcy52YWx1ZSk7XG4gICAgfVxuXG4gICAgdGhyb3cgdGhpcy5CYWRDYXN0RXhjZXB0aW9uKG5ld1R5cGUpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTdHJpbmdWYWx1ZSBleHRlbmRzIFZhbHVlPHN0cmluZz4ge1xuICBwdWJsaWMgX2lzTmV3bGluZTogYm9vbGVhbjtcbiAgcHVibGljIF9pc0lubGluZVdoaXRlc3BhY2U6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IodmFsOiBzdHJpbmcpIHtcbiAgICBzdXBlcih2YWwgfHwgXCJcIik7XG5cbiAgICB0aGlzLl9pc05ld2xpbmUgPSB0aGlzLnZhbHVlID09IFwiXFxuXCI7XG4gICAgdGhpcy5faXNJbmxpbmVXaGl0ZXNwYWNlID0gdHJ1ZTtcblxuICAgIGlmICh0aGlzLnZhbHVlID09PSBudWxsKSByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwiVmFsdWUudmFsdWVcIik7XG5cbiAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnZhbHVlLnNwbGl0KFwiXCIpLmV2ZXJ5KChjKSA9PiB7XG4gICAgICAgIGlmIChjICE9IFwiIFwiICYmIGMgIT0gXCJcXHRcIikge1xuICAgICAgICAgIHRoaXMuX2lzSW5saW5lV2hpdGVzcGFjZSA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBnZXQgdmFsdWVUeXBlKCkge1xuICAgIHJldHVybiBWYWx1ZVR5cGUuU3RyaW5nO1xuICB9XG4gIHB1YmxpYyBnZXQgaXNUcnV0aHkoKSB7XG4gICAgaWYgKHRoaXMudmFsdWUgPT09IG51bGwpIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJWYWx1ZS52YWx1ZVwiKTtcbiAgICByZXR1cm4gdGhpcy52YWx1ZS5sZW5ndGggPiAwO1xuICB9XG4gIHB1YmxpYyBnZXQgaXNOZXdsaW5lKCkge1xuICAgIHJldHVybiB0aGlzLl9pc05ld2xpbmU7XG4gIH1cbiAgcHVibGljIGdldCBpc0lubGluZVdoaXRlc3BhY2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzSW5saW5lV2hpdGVzcGFjZTtcbiAgfVxuICBwdWJsaWMgZ2V0IGlzTm9uV2hpdGVzcGFjZSgpIHtcbiAgICByZXR1cm4gIXRoaXMuaXNOZXdsaW5lICYmICF0aGlzLmlzSW5saW5lV2hpdGVzcGFjZTtcbiAgfVxuXG4gIHB1YmxpYyBDYXN0KG5ld1R5cGU6IFZhbHVlVHlwZSk6IFZhbHVlPGFueT4ge1xuICAgIGlmIChuZXdUeXBlID09IHRoaXMudmFsdWVUeXBlKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBpZiAobmV3VHlwZSA9PSBWYWx1ZVR5cGUuSW50KSB7XG4gICAgICBsZXQgcGFyc2VkSW50ID0gdHJ5UGFyc2VJbnQodGhpcy52YWx1ZSk7XG4gICAgICBpZiAocGFyc2VkSW50LmV4aXN0cykge1xuICAgICAgICByZXR1cm4gbmV3IEludFZhbHVlKHBhcnNlZEludC5yZXN1bHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgdGhpcy5CYWRDYXN0RXhjZXB0aW9uKG5ld1R5cGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChuZXdUeXBlID09IFZhbHVlVHlwZS5GbG9hdCkge1xuICAgICAgbGV0IHBhcnNlZEZsb2F0ID0gdHJ5UGFyc2VGbG9hdCh0aGlzLnZhbHVlKTtcbiAgICAgIGlmIChwYXJzZWRGbG9hdC5leGlzdHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGbG9hdFZhbHVlKHBhcnNlZEZsb2F0LnJlc3VsdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyB0aGlzLkJhZENhc3RFeGNlcHRpb24obmV3VHlwZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhyb3cgdGhpcy5CYWRDYXN0RXhjZXB0aW9uKG5ld1R5cGUpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEaXZlcnRUYXJnZXRWYWx1ZSBleHRlbmRzIFZhbHVlPFBhdGg+IHtcbiAgY29uc3RydWN0b3IodGFyZ2V0UGF0aDogUGF0aCB8IG51bGwgPSBudWxsKSB7XG4gICAgc3VwZXIodGFyZ2V0UGF0aCk7XG4gIH1cbiAgcHVibGljIGdldCB2YWx1ZVR5cGUoKSB7XG4gICAgcmV0dXJuIFZhbHVlVHlwZS5EaXZlcnRUYXJnZXQ7XG4gIH1cbiAgcHVibGljIGdldCB0YXJnZXRQYXRoKCkge1xuICAgIGlmICh0aGlzLnZhbHVlID09PSBudWxsKSByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwiVmFsdWUudmFsdWVcIik7XG4gICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gIH1cbiAgcHVibGljIHNldCB0YXJnZXRQYXRoKHZhbHVlOiBQYXRoKSB7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB9XG4gIHB1YmxpYyBnZXQgaXNUcnV0aHkoKTogbmV2ZXIge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlNob3VsZG4ndCBiZSBjaGVja2luZyB0aGUgdHJ1dGhpbmVzcyBvZiBhIGRpdmVydCB0YXJnZXRcIik7XG4gIH1cblxuICBwdWJsaWMgQ2FzdChuZXdUeXBlOiBWYWx1ZVR5cGUpOiBWYWx1ZTxhbnk+IHtcbiAgICBpZiAobmV3VHlwZSA9PSB0aGlzLnZhbHVlVHlwZSkgcmV0dXJuIHRoaXM7XG5cbiAgICB0aHJvdyB0aGlzLkJhZENhc3RFeGNlcHRpb24obmV3VHlwZSk7XG4gIH1cbiAgcHVibGljIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiBcIkRpdmVydFRhcmdldFZhbHVlKFwiICsgdGhpcy50YXJnZXRQYXRoICsgXCIpXCI7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFZhcmlhYmxlUG9pbnRlclZhbHVlIGV4dGVuZHMgVmFsdWU8c3RyaW5nPiB7XG4gIHB1YmxpYyBfY29udGV4dEluZGV4OiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IodmFyaWFibGVOYW1lOiBzdHJpbmcsIGNvbnRleHRJbmRleDogbnVtYmVyID0gLTEpIHtcbiAgICBzdXBlcih2YXJpYWJsZU5hbWUpO1xuXG4gICAgdGhpcy5fY29udGV4dEluZGV4ID0gY29udGV4dEluZGV4O1xuICB9XG5cbiAgcHVibGljIGdldCBjb250ZXh0SW5kZXgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbnRleHRJbmRleDtcbiAgfVxuICBwdWJsaWMgc2V0IGNvbnRleHRJbmRleCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fY29udGV4dEluZGV4ID0gdmFsdWU7XG4gIH1cbiAgcHVibGljIGdldCB2YXJpYWJsZU5hbWUoKSB7XG4gICAgaWYgKHRoaXMudmFsdWUgPT09IG51bGwpIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJWYWx1ZS52YWx1ZVwiKTtcbiAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgfVxuICBwdWJsaWMgc2V0IHZhcmlhYmxlTmFtZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB9XG4gIHB1YmxpYyBnZXQgdmFsdWVUeXBlKCkge1xuICAgIHJldHVybiBWYWx1ZVR5cGUuVmFyaWFibGVQb2ludGVyO1xuICB9XG5cbiAgcHVibGljIGdldCBpc1RydXRoeSgpOiBuZXZlciB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJTaG91bGRuJ3QgYmUgY2hlY2tpbmcgdGhlIHRydXRoaW5lc3Mgb2YgYSB2YXJpYWJsZSBwb2ludGVyXCJcbiAgICApO1xuICB9XG5cbiAgcHVibGljIENhc3QobmV3VHlwZTogVmFsdWVUeXBlKTogVmFsdWU8YW55PiB7XG4gICAgaWYgKG5ld1R5cGUgPT0gdGhpcy52YWx1ZVR5cGUpIHJldHVybiB0aGlzO1xuXG4gICAgdGhyb3cgdGhpcy5CYWRDYXN0RXhjZXB0aW9uKG5ld1R5cGUpO1xuICB9XG4gIHB1YmxpYyB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gXCJWYXJpYWJsZVBvaW50ZXJWYWx1ZShcIiArIHRoaXMudmFyaWFibGVOYW1lICsgXCIpXCI7XG4gIH1cbiAgcHVibGljIENvcHkoKSB7XG4gICAgcmV0dXJuIG5ldyBWYXJpYWJsZVBvaW50ZXJWYWx1ZSh0aGlzLnZhcmlhYmxlTmFtZSwgdGhpcy5jb250ZXh0SW5kZXgpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBMaXN0VmFsdWUgZXh0ZW5kcyBWYWx1ZTxJbmtMaXN0PiB7XG4gIHB1YmxpYyBnZXQgaXNUcnV0aHkoKSB7XG4gICAgaWYgKHRoaXMudmFsdWUgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJ0aGlzLnZhbHVlXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy52YWx1ZS5Db3VudCA+IDA7XG4gIH1cbiAgcHVibGljIGdldCB2YWx1ZVR5cGUoKSB7XG4gICAgcmV0dXJuIFZhbHVlVHlwZS5MaXN0O1xuICB9XG4gIHB1YmxpYyBDYXN0KG5ld1R5cGU6IFZhbHVlVHlwZSk6IFZhbHVlPGFueT4ge1xuICAgIGlmICh0aGlzLnZhbHVlID09PSBudWxsKSByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwiVmFsdWUudmFsdWVcIik7XG5cbiAgICBpZiAobmV3VHlwZSA9PSBWYWx1ZVR5cGUuSW50KSB7XG4gICAgICBsZXQgbWF4ID0gdGhpcy52YWx1ZS5tYXhJdGVtO1xuICAgICAgaWYgKG1heC5LZXkuaXNOdWxsKSByZXR1cm4gbmV3IEludFZhbHVlKDApO1xuICAgICAgZWxzZSByZXR1cm4gbmV3IEludFZhbHVlKG1heC5WYWx1ZSk7XG4gICAgfSBlbHNlIGlmIChuZXdUeXBlID09IFZhbHVlVHlwZS5GbG9hdCkge1xuICAgICAgbGV0IG1heCA9IHRoaXMudmFsdWUubWF4SXRlbTtcbiAgICAgIGlmIChtYXguS2V5LmlzTnVsbCkgcmV0dXJuIG5ldyBGbG9hdFZhbHVlKDAuMCk7XG4gICAgICBlbHNlIHJldHVybiBuZXcgRmxvYXRWYWx1ZShtYXguVmFsdWUpO1xuICAgIH0gZWxzZSBpZiAobmV3VHlwZSA9PSBWYWx1ZVR5cGUuU3RyaW5nKSB7XG4gICAgICBsZXQgbWF4ID0gdGhpcy52YWx1ZS5tYXhJdGVtO1xuICAgICAgaWYgKG1heC5LZXkuaXNOdWxsKSByZXR1cm4gbmV3IFN0cmluZ1ZhbHVlKFwiXCIpO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgU3RyaW5nVmFsdWUobWF4LktleS50b1N0cmluZygpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobmV3VHlwZSA9PSB0aGlzLnZhbHVlVHlwZSkgcmV0dXJuIHRoaXM7XG5cbiAgICB0aHJvdyB0aGlzLkJhZENhc3RFeGNlcHRpb24obmV3VHlwZSk7XG4gIH1cbiAgY29uc3RydWN0b3IoKTtcbiAgY29uc3RydWN0b3IobGlzdDogSW5rTGlzdCk7XG4gIGNvbnN0cnVjdG9yKGxpc3RPclNpbmdsZUl0ZW06IElua0xpc3RJdGVtLCBzaW5nbGVWYWx1ZTogbnVtYmVyKTtcbiAgY29uc3RydWN0b3IobGlzdE9yU2luZ2xlSXRlbT86IElua0xpc3RJdGVtIHwgSW5rTGlzdCwgc2luZ2xlVmFsdWU/OiBudW1iZXIpIHtcbiAgICBzdXBlcihudWxsKTtcblxuICAgIGlmICghbGlzdE9yU2luZ2xlSXRlbSAmJiAhc2luZ2xlVmFsdWUpIHtcbiAgICAgIHRoaXMudmFsdWUgPSBuZXcgSW5rTGlzdCgpO1xuICAgIH0gZWxzZSBpZiAobGlzdE9yU2luZ2xlSXRlbSBpbnN0YW5jZW9mIElua0xpc3QpIHtcbiAgICAgIHRoaXMudmFsdWUgPSBuZXcgSW5rTGlzdChsaXN0T3JTaW5nbGVJdGVtKTtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgbGlzdE9yU2luZ2xlSXRlbSBpbnN0YW5jZW9mIElua0xpc3RJdGVtICYmXG4gICAgICB0eXBlb2Ygc2luZ2xlVmFsdWUgPT09IFwibnVtYmVyXCJcbiAgICApIHtcbiAgICAgIHRoaXMudmFsdWUgPSBuZXcgSW5rTGlzdCh7XG4gICAgICAgIEtleTogbGlzdE9yU2luZ2xlSXRlbSxcbiAgICAgICAgVmFsdWU6IHNpbmdsZVZhbHVlLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBzdGF0aWMgUmV0YWluTGlzdE9yaWdpbnNGb3JBc3NpZ25tZW50KFxuICAgIG9sZFZhbHVlOiBJbmtPYmplY3QgfCBudWxsLFxuICAgIG5ld1ZhbHVlOiBJbmtPYmplY3RcbiAgKSB7XG4gICAgbGV0IG9sZExpc3QgPSBhc09yTnVsbChvbGRWYWx1ZSwgTGlzdFZhbHVlKTtcbiAgICBsZXQgbmV3TGlzdCA9IGFzT3JOdWxsKG5ld1ZhbHVlLCBMaXN0VmFsdWUpO1xuXG4gICAgaWYgKG5ld0xpc3QgJiYgbmV3TGlzdC52YWx1ZSA9PT0gbnVsbClcbiAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJuZXdMaXN0LnZhbHVlXCIpO1xuICAgIGlmIChvbGRMaXN0ICYmIG9sZExpc3QudmFsdWUgPT09IG51bGwpXG4gICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwib2xkTGlzdC52YWx1ZVwiKTtcblxuICAgIC8vIFdoZW4gYXNzaWduaW5nIHRoZSBlbXB0eSBsaXN0LCB0cnkgdG8gcmV0YWluIGFueSBpbml0aWFsIG9yaWdpbiBuYW1lc1xuICAgIGlmIChvbGRMaXN0ICYmIG5ld0xpc3QgJiYgbmV3TGlzdC52YWx1ZSEuQ291bnQgPT0gMClcbiAgICAgIG5ld0xpc3QudmFsdWUhLlNldEluaXRpYWxPcmlnaW5OYW1lcyhvbGRMaXN0LnZhbHVlIS5vcmlnaW5OYW1lcyk7XG4gIH1cbn1cblxuZXhwb3J0IGVudW0gVmFsdWVUeXBlIHtcbiAgQm9vbCA9IC0xLFxuICBJbnQgPSAwLFxuICBGbG9hdCA9IDEsXG4gIExpc3QgPSAyLFxuICBTdHJpbmcgPSAzLFxuICBEaXZlcnRUYXJnZXQgPSA0LFxuICBWYXJpYWJsZVBvaW50ZXIgPSA1LFxufVxuIiwiZXhwb3J0IGVudW0gUHVzaFBvcFR5cGUge1xuICBUdW5uZWwgPSAwLFxuICBGdW5jdGlvbiA9IDEsXG4gIEZ1bmN0aW9uRXZhbHVhdGlvbkZyb21HYW1lID0gMixcbn1cbiIsIi8qKlxuICogSW4gdGhlIG9yaWdpbmFsIEMjIGNvZGUsIGEgU3lzdGVtRXhjZXB0aW9uIHdvdWxkIGJlIHRocm93biB3aGVuIHBhc3NpbmdcbiAqIG51bGwgdG8gbWV0aG9kcyBleHBlY3RlZCBhIHZhbGlkIGluc3RhbmNlLiBKYXZhc2NyaXB0IGhhcyBubyBzdWNoXG4gKiBjb25jZXB0LCBidXQgVHlwZVNjcmlwdCB3aWxsIG5vdCBhbGxvdyBgbnVsbGAgdG8gYmUgcGFzc2VkIHRvIG1ldGhvZHNcbiAqIGV4cGxpY2l0ZWx5IHJlcXVpcmluZyBhIHZhbGlkIHR5cGUuXG4gKlxuICogV2hlbmV2ZXIgVHlwZVNjcmlwdCBjb21wbGFpbiBhYm91dCB0aGUgcG9zc2liaWxpdHkgb2YgYSBgbnVsbGAgdmFsdWUsXG4gKiBjaGVjayB0aGUgb2ZmZW5kaW5nIHZhbHVlIGFuZCBpdCBpdCdzIG51bGwsIHRocm93IHRoaXMgZXhjZXB0aW9uIHVzaW5nXG4gKiBgdGhyb3dOdWxsRXhjZXB0aW9uKG5hbWU6IHN0cmluZylgLlxuICovXG5leHBvcnQgY2xhc3MgTnVsbEV4Y2VwdGlvbiBleHRlbmRzIEVycm9yIHt9XG5cbi8qKlxuICogVGhyb3cgYSBOdWxsRXhjZXB0aW9uLlxuICpcbiAqIEBwYXJhbSBuYW1lIGEgc2hvcnQgZGVzY3JpcHRpb24gb2YgdGhlIG9mZmVuZGluZyB2YWx1ZSAob2Z0ZW4gaXRzIG5hbWUgd2l0aGluIHRoZSBjb2RlKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRocm93TnVsbEV4Y2VwdGlvbihuYW1lOiBzdHJpbmcpOiBuZXZlciB7XG4gIHRocm93IG5ldyBOdWxsRXhjZXB0aW9uKGAke25hbWV9IGlzIG51bGwgb3IgdW5kZWZpbmVkYCk7XG59XG4iLCJpbXBvcnQgeyBQYXRoIH0gZnJvbSBcIi4vUGF0aFwiO1xuaW1wb3J0IHsgQ29udGFpbmVyIH0gZnJvbSBcIi4vQ29udGFpbmVyXCI7XG5pbXBvcnQgeyBEZWJ1ZyB9IGZyb20gXCIuL0RlYnVnXCI7XG5pbXBvcnQgeyBhc09yTnVsbCwgYXNJTmFtZWRDb250ZW50T3JOdWxsIH0gZnJvbSBcIi4vVHlwZUFzc2VydGlvblwiO1xuaW1wb3J0IHsgdGhyb3dOdWxsRXhjZXB0aW9uIH0gZnJvbSBcIi4vTnVsbEV4Y2VwdGlvblwiO1xuaW1wb3J0IHsgU2VhcmNoUmVzdWx0IH0gZnJvbSBcIi4vU2VhcmNoUmVzdWx0XCI7XG5pbXBvcnQgeyBEZWJ1Z01ldGFkYXRhIH0gZnJvbSBcIi4vRGVidWdNZXRhZGF0YVwiO1xuXG5leHBvcnQgY2xhc3MgSW5rT2JqZWN0IHtcbiAgcHVibGljIHBhcmVudDogSW5rT2JqZWN0IHwgbnVsbCA9IG51bGw7XG5cbiAgZ2V0IGRlYnVnTWV0YWRhdGEoKTogRGVidWdNZXRhZGF0YSB8IG51bGwge1xuICAgIGlmICh0aGlzLl9kZWJ1Z01ldGFkYXRhID09PSBudWxsKSB7XG4gICAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmRlYnVnTWV0YWRhdGE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2RlYnVnTWV0YWRhdGE7XG4gIH1cblxuICBzZXQgZGVidWdNZXRhZGF0YSh2YWx1ZSkge1xuICAgIHRoaXMuX2RlYnVnTWV0YWRhdGEgPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBvd25EZWJ1Z01ldGFkYXRhKCkge1xuICAgIHJldHVybiB0aGlzLl9kZWJ1Z01ldGFkYXRhO1xuICB9XG5cbiAgcHJpdmF0ZSBfZGVidWdNZXRhZGF0YTogRGVidWdNZXRhZGF0YSB8IG51bGwgPSBudWxsO1xuXG4gIHB1YmxpYyBEZWJ1Z0xpbmVOdW1iZXJPZlBhdGgocGF0aDogUGF0aCkge1xuICAgIGlmIChwYXRoID09PSBudWxsKSByZXR1cm4gbnVsbDtcblxuICAgIC8vIFRyeSB0byBnZXQgYSBsaW5lIG51bWJlciBmcm9tIGRlYnVnIG1ldGFkYXRhXG4gICAgbGV0IHJvb3QgPSB0aGlzLnJvb3RDb250ZW50Q29udGFpbmVyO1xuICAgIGlmIChyb290KSB7XG4gICAgICBsZXQgdGFyZ2V0Q29udGVudCA9IHJvb3QuQ29udGVudEF0UGF0aChwYXRoKS5vYmo7XG4gICAgICBpZiAodGFyZ2V0Q29udGVudCkge1xuICAgICAgICBsZXQgZG0gPSB0YXJnZXRDb250ZW50LmRlYnVnTWV0YWRhdGE7XG4gICAgICAgIGlmIChkbSAhPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBkbS5zdGFydExpbmVOdW1iZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGdldCBwYXRoKCkge1xuICAgIGlmICh0aGlzLl9wYXRoID09IG51bGwpIHtcbiAgICAgIGlmICh0aGlzLnBhcmVudCA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuX3BhdGggPSBuZXcgUGF0aCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGNvbXBzOiBQYXRoLkNvbXBvbmVudFtdID0gW107XG5cbiAgICAgICAgbGV0IGNoaWxkOiBJbmtPYmplY3QgPSB0aGlzO1xuICAgICAgICBsZXQgY29udGFpbmVyID0gYXNPck51bGwoY2hpbGQucGFyZW50LCBDb250YWluZXIpO1xuXG4gICAgICAgIHdoaWxlIChjb250YWluZXIgIT09IG51bGwpIHtcbiAgICAgICAgICBsZXQgbmFtZWRDaGlsZCA9IGFzSU5hbWVkQ29udGVudE9yTnVsbChjaGlsZCk7XG4gICAgICAgICAgaWYgKG5hbWVkQ2hpbGQgIT0gbnVsbCAmJiBuYW1lZENoaWxkLmhhc1ZhbGlkTmFtZSkge1xuICAgICAgICAgICAgaWYgKG5hbWVkQ2hpbGQubmFtZSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcIm5hbWVkQ2hpbGQubmFtZVwiKTtcbiAgICAgICAgICAgIGNvbXBzLnVuc2hpZnQobmV3IFBhdGguQ29tcG9uZW50KG5hbWVkQ2hpbGQubmFtZSEpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29tcHMudW5zaGlmdChuZXcgUGF0aC5Db21wb25lbnQoY29udGFpbmVyLmNvbnRlbnQuaW5kZXhPZihjaGlsZCkpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjaGlsZCA9IGNvbnRhaW5lcjtcbiAgICAgICAgICBjb250YWluZXIgPSBhc09yTnVsbChjb250YWluZXIucGFyZW50LCBDb250YWluZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fcGF0aCA9IG5ldyBQYXRoKGNvbXBzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fcGF0aDtcbiAgfVxuICBwcml2YXRlIF9wYXRoOiBQYXRoIHwgbnVsbCA9IG51bGw7XG5cbiAgcHVibGljIFJlc29sdmVQYXRoKHBhdGg6IFBhdGggfCBudWxsKTogU2VhcmNoUmVzdWx0IHtcbiAgICBpZiAocGF0aCA9PT0gbnVsbCkgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcInBhdGhcIik7XG4gICAgaWYgKHBhdGguaXNSZWxhdGl2ZSkge1xuICAgICAgbGV0IG5lYXJlc3RDb250YWluZXIgPSBhc09yTnVsbCh0aGlzLCBDb250YWluZXIpO1xuXG4gICAgICBpZiAobmVhcmVzdENvbnRhaW5lciA9PT0gbnVsbCkge1xuICAgICAgICBEZWJ1Zy5Bc3NlcnQoXG4gICAgICAgICAgdGhpcy5wYXJlbnQgIT09IG51bGwsXG4gICAgICAgICAgXCJDYW4ndCByZXNvbHZlIHJlbGF0aXZlIHBhdGggYmVjYXVzZSB3ZSBkb24ndCBoYXZlIGEgcGFyZW50XCJcbiAgICAgICAgKTtcbiAgICAgICAgbmVhcmVzdENvbnRhaW5lciA9IGFzT3JOdWxsKHRoaXMucGFyZW50LCBDb250YWluZXIpO1xuICAgICAgICBEZWJ1Zy5Bc3NlcnQoXG4gICAgICAgICAgbmVhcmVzdENvbnRhaW5lciAhPT0gbnVsbCxcbiAgICAgICAgICBcIkV4cGVjdGVkIHBhcmVudCB0byBiZSBhIGNvbnRhaW5lclwiXG4gICAgICAgICk7XG4gICAgICAgIERlYnVnLkFzc2VydChwYXRoLkdldENvbXBvbmVudCgwKS5pc1BhcmVudCk7XG4gICAgICAgIHBhdGggPSBwYXRoLnRhaWw7XG4gICAgICB9XG5cbiAgICAgIGlmIChuZWFyZXN0Q29udGFpbmVyID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJuZWFyZXN0Q29udGFpbmVyXCIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5lYXJlc3RDb250YWluZXIuQ29udGVudEF0UGF0aChwYXRoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGNvbnRlbnRDb250YWluZXIgPSB0aGlzLnJvb3RDb250ZW50Q29udGFpbmVyO1xuICAgICAgaWYgKGNvbnRlbnRDb250YWluZXIgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcImNvbnRlbnRDb250YWluZXJcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29udGVudENvbnRhaW5lci5Db250ZW50QXRQYXRoKHBhdGgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBDb252ZXJ0UGF0aFRvUmVsYXRpdmUoZ2xvYmFsUGF0aDogUGF0aCkge1xuICAgIGxldCBvd25QYXRoID0gdGhpcy5wYXRoO1xuXG4gICAgbGV0IG1pblBhdGhMZW5ndGggPSBNYXRoLm1pbihnbG9iYWxQYXRoLmxlbmd0aCwgb3duUGF0aC5sZW5ndGgpO1xuICAgIGxldCBsYXN0U2hhcmVkUGF0aENvbXBJbmRleCA9IC0xO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtaW5QYXRoTGVuZ3RoOyArK2kpIHtcbiAgICAgIGxldCBvd25Db21wID0gb3duUGF0aC5HZXRDb21wb25lbnQoaSk7XG4gICAgICBsZXQgb3RoZXJDb21wID0gZ2xvYmFsUGF0aC5HZXRDb21wb25lbnQoaSk7XG5cbiAgICAgIGlmIChvd25Db21wLkVxdWFscyhvdGhlckNvbXApKSB7XG4gICAgICAgIGxhc3RTaGFyZWRQYXRoQ29tcEluZGV4ID0gaTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE5vIHNoYXJlZCBwYXRoIGNvbXBvbmVudHMsIHNvIGp1c3QgdXNlIGdsb2JhbCBwYXRoXG4gICAgaWYgKGxhc3RTaGFyZWRQYXRoQ29tcEluZGV4ID09IC0xKSByZXR1cm4gZ2xvYmFsUGF0aDtcblxuICAgIGxldCBudW1VcHdhcmRzTW92ZXMgPSBvd25QYXRoLmNvbXBvbmVudENvdW50IC0gMSAtIGxhc3RTaGFyZWRQYXRoQ29tcEluZGV4O1xuXG4gICAgbGV0IG5ld1BhdGhDb21wczogUGF0aC5Db21wb25lbnRbXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgdXAgPSAwOyB1cCA8IG51bVVwd2FyZHNNb3ZlczsgKyt1cClcbiAgICAgIG5ld1BhdGhDb21wcy5wdXNoKFBhdGguQ29tcG9uZW50LlRvUGFyZW50KCkpO1xuXG4gICAgZm9yIChcbiAgICAgIGxldCBkb3duID0gbGFzdFNoYXJlZFBhdGhDb21wSW5kZXggKyAxO1xuICAgICAgZG93biA8IGdsb2JhbFBhdGguY29tcG9uZW50Q291bnQ7XG4gICAgICArK2Rvd25cbiAgICApXG4gICAgICBuZXdQYXRoQ29tcHMucHVzaChnbG9iYWxQYXRoLkdldENvbXBvbmVudChkb3duKSk7XG5cbiAgICBsZXQgcmVsYXRpdmVQYXRoID0gbmV3IFBhdGgobmV3UGF0aENvbXBzLCB0cnVlKTtcbiAgICByZXR1cm4gcmVsYXRpdmVQYXRoO1xuICB9XG5cbiAgcHVibGljIENvbXBhY3RQYXRoU3RyaW5nKG90aGVyUGF0aDogUGF0aCkge1xuICAgIGxldCBnbG9iYWxQYXRoU3RyID0gbnVsbDtcbiAgICBsZXQgcmVsYXRpdmVQYXRoU3RyID0gbnVsbDtcblxuICAgIGlmIChvdGhlclBhdGguaXNSZWxhdGl2ZSkge1xuICAgICAgcmVsYXRpdmVQYXRoU3RyID0gb3RoZXJQYXRoLmNvbXBvbmVudHNTdHJpbmc7XG4gICAgICBnbG9iYWxQYXRoU3RyID0gdGhpcy5wYXRoLlBhdGhCeUFwcGVuZGluZ1BhdGgob3RoZXJQYXRoKS5jb21wb25lbnRzU3RyaW5nO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgcmVsYXRpdmVQYXRoID0gdGhpcy5Db252ZXJ0UGF0aFRvUmVsYXRpdmUob3RoZXJQYXRoKTtcbiAgICAgIHJlbGF0aXZlUGF0aFN0ciA9IHJlbGF0aXZlUGF0aC5jb21wb25lbnRzU3RyaW5nO1xuICAgICAgZ2xvYmFsUGF0aFN0ciA9IG90aGVyUGF0aC5jb21wb25lbnRzU3RyaW5nO1xuICAgIH1cblxuICAgIGlmIChyZWxhdGl2ZVBhdGhTdHIubGVuZ3RoIDwgZ2xvYmFsUGF0aFN0ci5sZW5ndGgpIHJldHVybiByZWxhdGl2ZVBhdGhTdHI7XG4gICAgZWxzZSByZXR1cm4gZ2xvYmFsUGF0aFN0cjtcbiAgfVxuXG4gIGdldCByb290Q29udGVudENvbnRhaW5lcigpIHtcbiAgICBsZXQgYW5jZXN0b3I6IElua09iamVjdCA9IHRoaXM7XG4gICAgd2hpbGUgKGFuY2VzdG9yLnBhcmVudCkge1xuICAgICAgYW5jZXN0b3IgPSBhbmNlc3Rvci5wYXJlbnQ7XG4gICAgfVxuICAgIHJldHVybiBhc09yTnVsbChhbmNlc3RvciwgQ29udGFpbmVyKTtcbiAgfVxuXG4gIHB1YmxpYyBDb3B5KCk6IElua09iamVjdCB7XG4gICAgdGhyb3cgRXJyb3IoXCJOb3QgSW1wbGVtZW50ZWQ6IERvZXNuJ3Qgc3VwcG9ydCBjb3B5aW5nXCIpO1xuICB9XG4gIC8vIFNldENoaWxkIHdvcmtzIHNsaWdodGx5IGRpZmVyZW50bHkgaW4gdGhlIGpzIGltcGxlbWVudGF0aW9uLlxuICAvLyBTaW5jZSB3ZSBjYW4ndCBwYXNzIGFuIG9iamV0cyBwcm9wZXJ0eSBieSByZWZlcmVuY2UsIHdlIGluc3RlYWQgcGFzc1xuICAvLyB0aGUgb2JqZWN0IGFuZCB0aGUgcHJvcGVydHkgc3RyaW5nLlxuICAvLyBUT0RPOiBUaGlzIG1ldGhvZCBjYW4gcHJvYmFibHkgYmUgcmV3cml0dGVuIHdpdGggdHlwZS1zYWZldHkgaW4gbWluZC5cbiAgcHVibGljIFNldENoaWxkKG9iajogYW55LCBwcm9wOiBhbnksIHZhbHVlOiBhbnkpIHtcbiAgICBpZiAob2JqW3Byb3BdKSBvYmpbcHJvcF0gPSBudWxsO1xuXG4gICAgb2JqW3Byb3BdID0gdmFsdWU7XG5cbiAgICBpZiAob2JqW3Byb3BdKSBvYmpbcHJvcF0ucGFyZW50ID0gdGhpcztcbiAgfVxuXG4gIHB1YmxpYyBFcXVhbHMob2JqOiBhbnkpIHtcbiAgICByZXR1cm4gb2JqID09PSB0aGlzO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgU3RyaW5nQnVpbGRlciB7XG4gIHByaXZhdGUgc3RyaW5nOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3Ioc3RyPzogc3RyaW5nKSB7XG4gICAgc3RyID0gdHlwZW9mIHN0ciAhPT0gXCJ1bmRlZmluZWRcIiA/IHN0ci50b1N0cmluZygpIDogXCJcIjtcbiAgICB0aGlzLnN0cmluZyA9IHN0cjtcbiAgfVxuICBnZXQgTGVuZ3RoKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuc3RyaW5nLmxlbmd0aDtcbiAgfVxuICBwdWJsaWMgQXBwZW5kKHN0cjogc3RyaW5nIHwgbnVsbCkge1xuICAgIGlmIChzdHIgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuc3RyaW5nICs9IHN0cjtcbiAgICB9XG4gIH1cbiAgcHVibGljIEFwcGVuZExpbmUoc3RyPzogc3RyaW5nKSB7XG4gICAgaWYgKHR5cGVvZiBzdHIgIT09IFwidW5kZWZpbmVkXCIpIHRoaXMuQXBwZW5kKHN0cik7XG4gICAgdGhpcy5zdHJpbmcgKz0gXCJcXG5cIjtcbiAgfVxuICBwdWJsaWMgQXBwZW5kRm9ybWF0KGZvcm1hdDogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkge1xuICAgIC8vIHRha2VuIGZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy82MTA0MDYvamF2YXNjcmlwdC1lcXVpdmFsZW50LXRvLXByaW50Zi1zdHJpbmctZm9ybWF0XG4gICAgdGhpcy5zdHJpbmcgKz0gZm9ybWF0LnJlcGxhY2UoL3soXFxkKyl9L2csIChtYXRjaDogc3RyaW5nLCBudW06IG51bWJlcikgPT5cbiAgICAgIHR5cGVvZiBhcmdzW251bV0gIT0gXCJ1bmRlZmluZWRcIiA/IGFyZ3NbbnVtXSA6IG1hdGNoXG4gICAgKTtcbiAgfVxuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5zdHJpbmc7XG4gIH1cblxuICBwdWJsaWMgQ2xlYXIoKSB7XG4gICAgdGhpcy5zdHJpbmcgPSBcIlwiO1xuICB9XG59XG4iLCJpbXBvcnQgeyB0aHJvd051bGxFeGNlcHRpb24gfSBmcm9tIFwiLi9OdWxsRXhjZXB0aW9uXCI7XG5pbXBvcnQgeyBTdHJpbmdCdWlsZGVyIH0gZnJvbSBcIi4vU3RyaW5nQnVpbGRlclwiO1xuaW1wb3J0IHsgTGlzdERlZmluaXRpb24gfSBmcm9tIFwiLi9MaXN0RGVmaW5pdGlvblwiO1xuaW1wb3J0IHsgU3RvcnkgfSBmcm9tIFwiLi9TdG9yeVwiO1xuXG5leHBvcnQgY2xhc3MgSW5rTGlzdEl0ZW0gaW1wbGVtZW50cyBJSW5rTGlzdEl0ZW0ge1xuICAvLyBJbmtMaXN0SXRlbSBpcyBhIHN0cnVjdFxuXG4gIHB1YmxpYyByZWFkb25seSBvcmlnaW5OYW1lOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHVibGljIHJlYWRvbmx5IGl0ZW1OYW1lOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihvcmlnaW5OYW1lOiBzdHJpbmcgfCBudWxsLCBpdGVtTmFtZTogc3RyaW5nIHwgbnVsbCk7XG4gIGNvbnN0cnVjdG9yKGZ1bGxOYW1lOiBzdHJpbmcgfCBudWxsKTtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMV0gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGxldCBvcmlnaW5OYW1lID0gYXJndW1lbnRzWzBdIGFzIHN0cmluZyB8IG51bGw7XG4gICAgICBsZXQgaXRlbU5hbWUgPSBhcmd1bWVudHNbMV0gYXMgc3RyaW5nIHwgbnVsbDtcblxuICAgICAgdGhpcy5vcmlnaW5OYW1lID0gb3JpZ2luTmFtZTtcbiAgICAgIHRoaXMuaXRlbU5hbWUgPSBpdGVtTmFtZTtcbiAgICB9IGVsc2UgaWYgKGFyZ3VtZW50c1swXSkge1xuICAgICAgbGV0IGZ1bGxOYW1lID0gYXJndW1lbnRzWzBdIGFzIHN0cmluZztcblxuICAgICAgbGV0IG5hbWVQYXJ0cyA9IGZ1bGxOYW1lLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpO1xuICAgICAgdGhpcy5vcmlnaW5OYW1lID0gbmFtZVBhcnRzWzBdO1xuICAgICAgdGhpcy5pdGVtTmFtZSA9IG5hbWVQYXJ0c1sxXTtcbiAgICB9XG4gIH1cbiAgcHVibGljIHN0YXRpYyBnZXQgTnVsbCgpIHtcbiAgICByZXR1cm4gbmV3IElua0xpc3RJdGVtKG51bGwsIG51bGwpO1xuICB9XG4gIHB1YmxpYyBnZXQgaXNOdWxsKCkge1xuICAgIHJldHVybiB0aGlzLm9yaWdpbk5hbWUgPT0gbnVsbCAmJiB0aGlzLml0ZW1OYW1lID09IG51bGw7XG4gIH1cbiAgZ2V0IGZ1bGxOYW1lKCkge1xuICAgIHJldHVybiAoXG4gICAgICAodGhpcy5vcmlnaW5OYW1lICE9PSBudWxsID8gdGhpcy5vcmlnaW5OYW1lIDogXCI/XCIpICsgXCIuXCIgKyB0aGlzLml0ZW1OYW1lXG4gICAgKTtcbiAgfVxuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5mdWxsTmFtZTtcbiAgfVxuICBwdWJsaWMgRXF1YWxzKG9iajogSW5rTGlzdEl0ZW0pIHtcbiAgICBpZiAob2JqIGluc3RhbmNlb2YgSW5rTGlzdEl0ZW0pIHtcbiAgICAgIGxldCBvdGhlckl0ZW0gPSBvYmo7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBvdGhlckl0ZW0uaXRlbU5hbWUgPT0gdGhpcy5pdGVtTmFtZSAmJlxuICAgICAgICBvdGhlckl0ZW0ub3JpZ2luTmFtZSA9PSB0aGlzLm9yaWdpbk5hbWVcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gVGhlc2UgbWV0aG9kcyBkaWQgbm90IGV4aXN0IGluIHRoZSBvcmlnaW5hbCBDIyBjb2RlLiBUaGVpciBwdXJwb3NlIGlzIHRvXG4gIC8vIG1ha2UgYElua0xpc3RJdGVtYCBtaW1pY3MgdGhlIHZhbHVlLXR5cGUgc2VtYW50aWNzIG9mIHRoZSBvcmlnaW5hbFxuICAvLyBzdHJ1Y3QuIFBsZWFzZSByZWZlciB0byB0aGUgZW5kIG9mIHRoaXMgZmlsZSwgZm9yIGEgbW9yZSBpbi1kZXB0aFxuICAvLyBleHBsYW5hdGlvbi5cblxuICAvKipcbiAgICogUmV0dXJucyBhIHNoYWxsb3cgY2xvbmUgb2YgdGhlIGN1cnJlbnQgaW5zdGFuY2UuXG4gICAqL1xuICBwdWJsaWMgY29weSgpIHtcbiAgICByZXR1cm4gbmV3IElua0xpc3RJdGVtKHRoaXMub3JpZ2luTmFtZSwgdGhpcy5pdGVtTmFtZSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBgU2VyaWFsaXplZElua0xpc3RJdGVtYCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnRcbiAgICogaW5zdGFuY2UuIFRoZSByZXN1bHQgaXMgaW50ZW5kZWQgdG8gYmUgdXNlZCBhcyBhIGtleSBpbnNpZGUgYSBNYXAuXG4gICAqL1xuICBwdWJsaWMgc2VyaWFsaXplZCgpOiBTZXJpYWxpemVkSW5rTGlzdEl0ZW0ge1xuICAgIC8vIFdlIGFyZSBzaW1wbHkgdXNpbmcgYSBKU09OIHJlcHJlc2VudGF0aW9uIGFzIGEgdmFsdWUtdHlwZWQga2V5LlxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICBvcmlnaW5OYW1lOiB0aGlzLm9yaWdpbk5hbWUsXG4gICAgICBpdGVtTmFtZTogdGhpcy5pdGVtTmFtZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWNvbnN0cnVjdHMgYSBgSW5rTGlzdEl0ZW1gIGZyb20gdGhlIGdpdmVuIFNlcmlhbGl6ZWRJbmtMaXN0SXRlbS5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZnJvbVNlcmlhbGl6ZWRLZXkoa2V5OiBTZXJpYWxpemVkSW5rTGlzdEl0ZW0pOiBJbmtMaXN0SXRlbSB7XG4gICAgbGV0IG9iaiA9IEpTT04ucGFyc2Uoa2V5KTtcbiAgICBpZiAoIUlua0xpc3RJdGVtLmlzTGlrZUlua0xpc3RJdGVtKG9iaikpIHJldHVybiBJbmtMaXN0SXRlbS5OdWxsO1xuXG4gICAgbGV0IGlua0xpc3RJdGVtID0gb2JqIGFzIElJbmtMaXN0SXRlbTtcblxuICAgIHJldHVybiBuZXcgSW5rTGlzdEl0ZW0oaW5rTGlzdEl0ZW0ub3JpZ2luTmFtZSwgaW5rTGlzdEl0ZW0uaXRlbU5hbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hldGhlciB0aGUgZ2l2ZW4gaXRlbSBpcyBzdWZmaWNpZW50bHkgYElua0xpc3RJdGVtYC1saWtlXG4gICAqIHRvIGJlIHVzZWQgYXMgYSB0ZW1wbGF0ZSB3aGVuIHJlY29uc3RydWN0aW5nIHRoZSBJbmtMaXN0SXRlbS5cbiAgICovXG4gIHByaXZhdGUgc3RhdGljIGlzTGlrZUlua0xpc3RJdGVtKGl0ZW06IGFueSkge1xuICAgIGlmICh0eXBlb2YgaXRlbSAhPT0gXCJvYmplY3RcIikgcmV0dXJuIGZhbHNlO1xuICAgIGlmICghaXRlbS5oYXNPd25Qcm9wZXJ0eShcIm9yaWdpbk5hbWVcIikgfHwgIWl0ZW0uaGFzT3duUHJvcGVydHkoXCJpdGVtTmFtZVwiKSlcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAodHlwZW9mIGl0ZW0ub3JpZ2luTmFtZSAhPT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgaXRlbS5vcmlnaW5OYW1lICE9PSBudWxsKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmICh0eXBlb2YgaXRlbS5pdGVtTmFtZSAhPT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgaXRlbS5pdGVtTmFtZSAhPT0gbnVsbClcbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBJbmtMaXN0IGV4dGVuZHMgTWFwPFNlcmlhbGl6ZWRJbmtMaXN0SXRlbSwgbnVtYmVyPiB7XG4gIHB1YmxpYyBvcmlnaW5zOiBMaXN0RGVmaW5pdGlvbltdIHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBfb3JpZ2luTmFtZXM6IHN0cmluZ1tdIHwgbnVsbCA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKCk7XG4gIGNvbnN0cnVjdG9yKG90aGVyTGlzdDogSW5rTGlzdCk7XG4gIGNvbnN0cnVjdG9yKHNpbmdsZU9yaWdpbkxpc3ROYW1lOiBzdHJpbmcsIG9yaWdpblN0b3J5OiBTdG9yeSk7XG4gIGNvbnN0cnVjdG9yKHNpbmdsZUVsZW1lbnQ6IEtleVZhbHVlUGFpcjxJbmtMaXN0SXRlbSwgbnVtYmVyPik7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8vIFRyeWluZyB0byBiZSBzbWFydCBoZXJlLCB0aGlzIGVtdWxhdGVzIHRoZSBjb25zdHJ1Y3RvciBpbmhlcml0YW5jZSBmb3VuZFxuICAgIC8vIGluIHRoZSBvcmlnaW5hbCBjb2RlLCBidXQgb25seSBpZiBvdGhlckxpc3QgaXMgYW4gSW5rTGlzdC4gSUlGRSBGVFcuXG4gICAgc3VwZXIoXG4gICAgICAoKCkgPT4ge1xuICAgICAgICBpZiAoYXJndW1lbnRzWzBdIGluc3RhbmNlb2YgSW5rTGlzdCkge1xuICAgICAgICAgIHJldHVybiBhcmd1bWVudHNbMF07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICB9KSgpXG4gICAgKTtcblxuICAgIGlmIChhcmd1bWVudHNbMF0gaW5zdGFuY2VvZiBJbmtMaXN0KSB7XG4gICAgICBsZXQgb3RoZXJMaXN0ID0gYXJndW1lbnRzWzBdIGFzIElua0xpc3Q7XG5cbiAgICAgIGxldCBvdGhlck9yaWdpbk5hbWVzID0gb3RoZXJMaXN0Lm9yaWdpbk5hbWVzIGFzIHN0cmluZ1tdO1xuICAgICAgaWYgKG90aGVyT3JpZ2luTmFtZXMgIT09IG51bGwpXG4gICAgICAgIHRoaXMuX29yaWdpbk5hbWVzID0gb3RoZXJPcmlnaW5OYW1lcy5zbGljZSgpO1xuICAgICAgaWYgKG90aGVyTGlzdC5vcmlnaW5zICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMub3JpZ2lucyA9IG90aGVyTGlzdC5vcmlnaW5zLnNsaWNlKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBsZXQgc2luZ2xlT3JpZ2luTGlzdE5hbWUgPSBhcmd1bWVudHNbMF0gYXMgc3RyaW5nO1xuICAgICAgbGV0IG9yaWdpblN0b3J5ID0gYXJndW1lbnRzWzFdIGFzIFN0b3J5O1xuICAgICAgdGhpcy5TZXRJbml0aWFsT3JpZ2luTmFtZShzaW5nbGVPcmlnaW5MaXN0TmFtZSk7XG5cbiAgICAgIGlmIChvcmlnaW5TdG9yeS5saXN0RGVmaW5pdGlvbnMgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcIm9yaWdpblN0b3J5Lmxpc3REZWZpbml0aW9uc1wiKTtcbiAgICAgIH1cbiAgICAgIGxldCBkZWYgPSBvcmlnaW5TdG9yeS5saXN0RGVmaW5pdGlvbnMuVHJ5TGlzdEdldERlZmluaXRpb24oXG4gICAgICAgIHNpbmdsZU9yaWdpbkxpc3ROYW1lLFxuICAgICAgICBudWxsXG4gICAgICApO1xuICAgICAgaWYgKGRlZi5leGlzdHMpIHtcbiAgICAgICAgLy8gVGhyb3dpbmcgbm93LCBiZWNhdXNlIGlmIHRoZSB2YWx1ZSBpcyBgbnVsbGAgaXQgd2lsbFxuICAgICAgICAvLyBldmVudHVhbGx5IHRocm93IGRvd24gdGhlIGxpbmUuXG4gICAgICAgIGlmIChkZWYucmVzdWx0ID09PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcImRlZi5yZXN1bHRcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vcmlnaW5zID0gW2RlZi5yZXN1bHRdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwiSW5rTGlzdCBvcmlnaW4gY291bGQgbm90IGJlIGZvdW5kIGluIHN0b3J5IHdoZW4gY29uc3RydWN0aW5nIG5ldyBsaXN0OiBcIiArXG4gICAgICAgICAgICBzaW5nbGVPcmlnaW5MaXN0TmFtZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoXG4gICAgICB0eXBlb2YgYXJndW1lbnRzWzBdID09PSBcIm9iamVjdFwiICYmXG4gICAgICBhcmd1bWVudHNbMF0uaGFzT3duUHJvcGVydHkoXCJLZXlcIikgJiZcbiAgICAgIGFyZ3VtZW50c1swXS5oYXNPd25Qcm9wZXJ0eShcIlZhbHVlXCIpXG4gICAgKSB7XG4gICAgICBsZXQgc2luZ2xlRWxlbWVudCA9IGFyZ3VtZW50c1swXSBhcyBLZXlWYWx1ZVBhaXI8SW5rTGlzdEl0ZW0sIG51bWJlcj47XG4gICAgICB0aGlzLkFkZChzaW5nbGVFbGVtZW50LktleSwgc2luZ2xlRWxlbWVudC5WYWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBGcm9tU3RyaW5nKG15TGlzdEl0ZW06IHN0cmluZywgb3JpZ2luU3Rvcnk6IFN0b3J5KSB7XG4gICAgaWYgKG15TGlzdEl0ZW0gPT0gbnVsbCB8fCBteUxpc3RJdGVtID09IFwiXCIpIHJldHVybiBuZXcgSW5rTGlzdCgpO1xuICAgIGxldCBsaXN0VmFsdWUgPVxuICAgICAgb3JpZ2luU3RvcnkubGlzdERlZmluaXRpb25zPy5GaW5kU2luZ2xlSXRlbUxpc3RXaXRoTmFtZShteUxpc3RJdGVtKTtcbiAgICBpZiAobGlzdFZhbHVlKSB7XG4gICAgICBpZiAobGlzdFZhbHVlLnZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJsaXN0VmFsdWUudmFsdWVcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IElua0xpc3QobGlzdFZhbHVlLnZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkNvdWxkIG5vdCBmaW5kIHRoZSBJbmtMaXN0SXRlbSBmcm9tIHRoZSBzdHJpbmcgJ1wiICtcbiAgICAgICAgICBteUxpc3RJdGVtICtcbiAgICAgICAgICBcIicgdG8gY3JlYXRlIGFuIElua0xpc3QgYmVjYXVzZSBpdCBkb2Vzbid0IGV4aXN0IGluIHRoZSBvcmlnaW5hbCBsaXN0IGRlZmluaXRpb24gaW4gaW5rLlwiXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBBZGRJdGVtKFxuICAgIGl0ZW1Pckl0ZW1OYW1lOiBJbmtMaXN0SXRlbSB8IHN0cmluZyB8IG51bGwsXG4gICAgc3RvcnlPYmplY3Q6IFN0b3J5IHwgbnVsbCA9IG51bGxcbiAgKSB7XG4gICAgaWYgKGl0ZW1Pckl0ZW1OYW1lIGluc3RhbmNlb2YgSW5rTGlzdEl0ZW0pIHtcbiAgICAgIGxldCBpdGVtID0gaXRlbU9ySXRlbU5hbWU7XG5cbiAgICAgIGlmIChpdGVtLm9yaWdpbk5hbWUgPT0gbnVsbCkge1xuICAgICAgICB0aGlzLkFkZEl0ZW0oaXRlbS5pdGVtTmFtZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMub3JpZ2lucyA9PT0gbnVsbCkgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcInRoaXMub3JpZ2luc1wiKTtcblxuICAgICAgZm9yIChsZXQgb3JpZ2luIG9mIHRoaXMub3JpZ2lucykge1xuICAgICAgICBpZiAob3JpZ2luLm5hbWUgPT0gaXRlbS5vcmlnaW5OYW1lKSB7XG4gICAgICAgICAgbGV0IGludFZhbCA9IG9yaWdpbi5UcnlHZXRWYWx1ZUZvckl0ZW0oaXRlbSwgMCk7XG4gICAgICAgICAgaWYgKGludFZhbC5leGlzdHMpIHtcbiAgICAgICAgICAgIHRoaXMuQWRkKGl0ZW0sIGludFZhbC5yZXN1bHQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgIFwiQ291bGQgbm90IGFkZCB0aGUgaXRlbSBcIiArXG4gICAgICAgICAgICAgICAgaXRlbSArXG4gICAgICAgICAgICAgICAgXCIgdG8gdGhpcyBsaXN0IGJlY2F1c2UgaXQgZG9lc24ndCBleGlzdCBpbiB0aGUgb3JpZ2luYWwgbGlzdCBkZWZpbml0aW9uIGluIGluay5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkZhaWxlZCB0byBhZGQgaXRlbSB0byBsaXN0IGJlY2F1c2UgdGhlIGl0ZW0gd2FzIGZyb20gYSBuZXcgbGlzdCBkZWZpbml0aW9uIHRoYXQgd2Fzbid0IHByZXZpb3VzbHkga25vd24gdG8gdGhpcyBsaXN0LiBPbmx5IGl0ZW1zIGZyb20gcHJldmlvdXNseSBrbm93biBsaXN0cyBjYW4gYmUgdXNlZCwgc28gdGhhdCB0aGUgaW50IHZhbHVlIGNhbiBiZSBmb3VuZC5cIlxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGl0ZW1Pckl0ZW1OYW1lICE9PSBudWxsKSB7XG4gICAgICAvL2l0ZW1Pckl0ZW1OYW1lIGlzIGEgc3RyaW5nXG4gICAgICBsZXQgaXRlbU5hbWUgPSBpdGVtT3JJdGVtTmFtZSBhcyBzdHJpbmc7XG5cbiAgICAgIGxldCBmb3VuZExpc3REZWY6IExpc3REZWZpbml0aW9uIHwgbnVsbCA9IG51bGw7XG5cbiAgICAgIGlmICh0aGlzLm9yaWdpbnMgPT09IG51bGwpIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJ0aGlzLm9yaWdpbnNcIik7XG5cbiAgICAgIGZvciAobGV0IG9yaWdpbiBvZiB0aGlzLm9yaWdpbnMpIHtcbiAgICAgICAgaWYgKGl0ZW1OYW1lID09PSBudWxsKSByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwiaXRlbU5hbWVcIik7XG5cbiAgICAgICAgaWYgKG9yaWdpbi5Db250YWluc0l0ZW1XaXRoTmFtZShpdGVtTmFtZSkpIHtcbiAgICAgICAgICBpZiAoZm91bmRMaXN0RGVmICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgXCJDb3VsZCBub3QgYWRkIHRoZSBpdGVtIFwiICtcbiAgICAgICAgICAgICAgICBpdGVtTmFtZSArXG4gICAgICAgICAgICAgICAgXCIgdG8gdGhpcyBsaXN0IGJlY2F1c2UgaXQgY291bGQgY29tZSBmcm9tIGVpdGhlciBcIiArXG4gICAgICAgICAgICAgICAgb3JpZ2luLm5hbWUgK1xuICAgICAgICAgICAgICAgIFwiIG9yIFwiICtcbiAgICAgICAgICAgICAgICBmb3VuZExpc3REZWYubmFtZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm91bmRMaXN0RGVmID0gb3JpZ2luO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZm91bmRMaXN0RGVmID09IG51bGwpIHtcbiAgICAgICAgaWYgKHN0b3J5T2JqZWN0ID09IG51bGwpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBcIkNvdWxkIG5vdCBhZGQgdGhlIGl0ZW0gXCIgK1xuICAgICAgICAgICAgICBpdGVtTmFtZSArXG4gICAgICAgICAgICAgIFwiIHRvIHRoaXMgbGlzdCBiZWNhdXNlIGl0IGlzbid0IGtub3duIHRvIGFueSBsaXN0IGRlZmluaXRpb25zIHByZXZpb3VzbHkgYXNzb2NpYXRlZCB3aXRoIHRoaXMgbGlzdC5cIlxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IG5ld0l0ZW0gPSBJbmtMaXN0LkZyb21TdHJpbmcoaXRlbU5hbWUsIHN0b3J5T2JqZWN0KVxuICAgICAgICAgICAgLm9yZGVyZWRJdGVtc1swXTtcbiAgICAgICAgICB0aGlzLkFkZChuZXdJdGVtLktleSwgbmV3SXRlbS5WYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBpdGVtID0gbmV3IElua0xpc3RJdGVtKGZvdW5kTGlzdERlZi5uYW1lLCBpdGVtTmFtZSk7XG4gICAgICAgIGxldCBpdGVtVmFsID0gZm91bmRMaXN0RGVmLlZhbHVlRm9ySXRlbShpdGVtKTtcbiAgICAgICAgdGhpcy5BZGQoaXRlbSwgaXRlbVZhbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHB1YmxpYyBDb250YWluc0l0ZW1OYW1lZChpdGVtTmFtZTogc3RyaW5nIHwgbnVsbCkge1xuICAgIGZvciAobGV0IFtrZXldIG9mIHRoaXMpIHtcbiAgICAgIGxldCBpdGVtID0gSW5rTGlzdEl0ZW0uZnJvbVNlcmlhbGl6ZWRLZXkoa2V5KTtcbiAgICAgIGlmIChpdGVtLml0ZW1OYW1lID09IGl0ZW1OYW1lKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcHVibGljIENvbnRhaW5zS2V5KGtleTogSW5rTGlzdEl0ZW0pIHtcbiAgICByZXR1cm4gdGhpcy5oYXMoa2V5LnNlcmlhbGl6ZWQoKSk7XG4gIH1cbiAgcHVibGljIEFkZChrZXk6IElua0xpc3RJdGVtLCB2YWx1ZTogbnVtYmVyKSB7XG4gICAgbGV0IHNlcmlhbGl6ZWRLZXkgPSBrZXkuc2VyaWFsaXplZCgpO1xuICAgIGlmICh0aGlzLmhhcyhzZXJpYWxpemVkS2V5KSkge1xuICAgICAgLy8gVGhyb3cgYW4gZXhjZXB0aW9uIHRvIG1hdGNoIHRoZSBDIyBiZWhhdmlvci5cbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGhlIE1hcCBhbHJlYWR5IGNvbnRhaW5zIGFuIGVudHJ5IGZvciAke2tleX1gKTtcbiAgICB9XG4gICAgdGhpcy5zZXQoc2VyaWFsaXplZEtleSwgdmFsdWUpO1xuICB9XG4gIHB1YmxpYyBSZW1vdmUoa2V5OiBJbmtMaXN0SXRlbSkge1xuICAgIHJldHVybiB0aGlzLmRlbGV0ZShrZXkuc2VyaWFsaXplZCgpKTtcbiAgfVxuICBnZXQgQ291bnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2l6ZTtcbiAgfVxuICBnZXQgb3JpZ2luT2ZNYXhJdGVtKCk6IExpc3REZWZpbml0aW9uIHwgbnVsbCB7XG4gICAgaWYgKHRoaXMub3JpZ2lucyA9PSBudWxsKSByZXR1cm4gbnVsbDtcblxuICAgIGxldCBtYXhPcmlnaW5OYW1lID0gdGhpcy5tYXhJdGVtLktleS5vcmlnaW5OYW1lO1xuICAgIGxldCByZXN1bHQgPSBudWxsO1xuICAgIHRoaXMub3JpZ2lucy5ldmVyeSgob3JpZ2luKSA9PiB7XG4gICAgICBpZiAob3JpZ2luLm5hbWUgPT0gbWF4T3JpZ2luTmFtZSkge1xuICAgICAgICByZXN1bHQgPSBvcmlnaW47XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgZ2V0IG9yaWdpbk5hbWVzKCk6IHN0cmluZ1tdIHtcbiAgICBpZiAodGhpcy5Db3VudCA+IDApIHtcbiAgICAgIGlmICh0aGlzLl9vcmlnaW5OYW1lcyA9PSBudWxsICYmIHRoaXMuQ291bnQgPiAwKSB0aGlzLl9vcmlnaW5OYW1lcyA9IFtdO1xuICAgICAgZWxzZSB7XG4gICAgICAgIGlmICghdGhpcy5fb3JpZ2luTmFtZXMpIHRoaXMuX29yaWdpbk5hbWVzID0gW107XG4gICAgICAgIHRoaXMuX29yaWdpbk5hbWVzLmxlbmd0aCA9IDA7XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IFtrZXldIG9mIHRoaXMpIHtcbiAgICAgICAgbGV0IGl0ZW0gPSBJbmtMaXN0SXRlbS5mcm9tU2VyaWFsaXplZEtleShrZXkpO1xuICAgICAgICBpZiAoaXRlbS5vcmlnaW5OYW1lID09PSBudWxsKVxuICAgICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJpdGVtLm9yaWdpbk5hbWVcIik7XG4gICAgICAgIHRoaXMuX29yaWdpbk5hbWVzLnB1c2goaXRlbS5vcmlnaW5OYW1lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fb3JpZ2luTmFtZXMgYXMgc3RyaW5nW107XG4gIH1cbiAgcHVibGljIFNldEluaXRpYWxPcmlnaW5OYW1lKGluaXRpYWxPcmlnaW5OYW1lOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9vcmlnaW5OYW1lcyA9IFtpbml0aWFsT3JpZ2luTmFtZV07XG4gIH1cbiAgcHVibGljIFNldEluaXRpYWxPcmlnaW5OYW1lcyhpbml0aWFsT3JpZ2luTmFtZXM6IHN0cmluZ1tdKSB7XG4gICAgaWYgKGluaXRpYWxPcmlnaW5OYW1lcyA9PSBudWxsKSB0aGlzLl9vcmlnaW5OYW1lcyA9IG51bGw7XG4gICAgZWxzZSB0aGlzLl9vcmlnaW5OYW1lcyA9IGluaXRpYWxPcmlnaW5OYW1lcy5zbGljZSgpOyAvLyBzdG9yZSBhIGNvcHlcbiAgfVxuICBnZXQgbWF4SXRlbSgpIHtcbiAgICBsZXQgbWF4OiBLZXlWYWx1ZVBhaXI8SW5rTGlzdEl0ZW0sIG51bWJlcj4gPSB7XG4gICAgICBLZXk6IElua0xpc3RJdGVtLk51bGwsXG4gICAgICBWYWx1ZTogMCxcbiAgICB9O1xuICAgIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiB0aGlzKSB7XG4gICAgICBsZXQgaXRlbSA9IElua0xpc3RJdGVtLmZyb21TZXJpYWxpemVkS2V5KGtleSk7XG4gICAgICBpZiAobWF4LktleS5pc051bGwgfHwgdmFsdWUgPiBtYXguVmFsdWUpXG4gICAgICAgIG1heCA9IHsgS2V5OiBpdGVtLCBWYWx1ZTogdmFsdWUgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWF4O1xuICB9XG4gIGdldCBtaW5JdGVtKCkge1xuICAgIGxldCBtaW46IEtleVZhbHVlUGFpcjxJbmtMaXN0SXRlbSwgbnVtYmVyPiA9IHtcbiAgICAgIEtleTogSW5rTGlzdEl0ZW0uTnVsbCxcbiAgICAgIFZhbHVlOiAwLFxuICAgIH07XG4gICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIHRoaXMpIHtcbiAgICAgIGxldCBpdGVtID0gSW5rTGlzdEl0ZW0uZnJvbVNlcmlhbGl6ZWRLZXkoa2V5KTtcbiAgICAgIGlmIChtaW4uS2V5LmlzTnVsbCB8fCB2YWx1ZSA8IG1pbi5WYWx1ZSkge1xuICAgICAgICBtaW4gPSB7IEtleTogaXRlbSwgVmFsdWU6IHZhbHVlIH07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtaW47XG4gIH1cbiAgZ2V0IGludmVyc2UoKSB7XG4gICAgbGV0IGxpc3QgPSBuZXcgSW5rTGlzdCgpO1xuICAgIGlmICh0aGlzLm9yaWdpbnMgIT0gbnVsbCkge1xuICAgICAgZm9yIChsZXQgb3JpZ2luIG9mIHRoaXMub3JpZ2lucykge1xuICAgICAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2Ygb3JpZ2luLml0ZW1zKSB7XG4gICAgICAgICAgbGV0IGl0ZW0gPSBJbmtMaXN0SXRlbS5mcm9tU2VyaWFsaXplZEtleShrZXkpO1xuICAgICAgICAgIGlmICghdGhpcy5Db250YWluc0tleShpdGVtKSkgbGlzdC5BZGQoaXRlbSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsaXN0O1xuICB9XG4gIGdldCBhbGwoKSB7XG4gICAgbGV0IGxpc3QgPSBuZXcgSW5rTGlzdCgpO1xuICAgIGlmICh0aGlzLm9yaWdpbnMgIT0gbnVsbCkge1xuICAgICAgZm9yIChsZXQgb3JpZ2luIG9mIHRoaXMub3JpZ2lucykge1xuICAgICAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2Ygb3JpZ2luLml0ZW1zKSB7XG4gICAgICAgICAgbGV0IGl0ZW0gPSBJbmtMaXN0SXRlbS5mcm9tU2VyaWFsaXplZEtleShrZXkpO1xuICAgICAgICAgIGxpc3Quc2V0KGl0ZW0uc2VyaWFsaXplZCgpLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxpc3Q7XG4gIH1cbiAgcHVibGljIFVuaW9uKG90aGVyTGlzdDogSW5rTGlzdCkge1xuICAgIGxldCB1bmlvbiA9IG5ldyBJbmtMaXN0KHRoaXMpO1xuICAgIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBvdGhlckxpc3QpIHtcbiAgICAgIHVuaW9uLnNldChrZXksIHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHVuaW9uO1xuICB9XG4gIHB1YmxpYyBJbnRlcnNlY3Qob3RoZXJMaXN0OiBJbmtMaXN0KSB7XG4gICAgbGV0IGludGVyc2VjdGlvbiA9IG5ldyBJbmtMaXN0KCk7XG4gICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIHRoaXMpIHtcbiAgICAgIGlmIChvdGhlckxpc3QuaGFzKGtleSkpIGludGVyc2VjdGlvbi5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGludGVyc2VjdGlvbjtcbiAgfVxuICBwdWJsaWMgSGFzSW50ZXJzZWN0aW9uKG90aGVyTGlzdDogSW5rTGlzdCk6IGJvb2xlYW4ge1xuICAgIGZvciAobGV0IFtrZXldIG9mIHRoaXMpIHtcbiAgICAgIGlmIChvdGhlckxpc3QuaGFzKGtleSkpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcHVibGljIFdpdGhvdXQobGlzdFRvUmVtb3ZlOiBJbmtMaXN0KSB7XG4gICAgbGV0IHJlc3VsdCA9IG5ldyBJbmtMaXN0KHRoaXMpO1xuICAgIGZvciAobGV0IFtrZXldIG9mIGxpc3RUb1JlbW92ZSkge1xuICAgICAgcmVzdWx0LmRlbGV0ZShrZXkpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBwdWJsaWMgQ29udGFpbnMoa2V5OiBzdHJpbmcpOiBib29sZWFuO1xuICBwdWJsaWMgQ29udGFpbnMob3RoZXJMaXN0OiBJbmtMaXN0KTogYm9vbGVhbjtcbiAgcHVibGljIENvbnRhaW5zKHdoYXQ6IHN0cmluZyB8IElua0xpc3QpOiBib29sZWFuIHtcbiAgICBpZiAodHlwZW9mIHdoYXQgPT0gXCJzdHJpbmdcIikgcmV0dXJuIHRoaXMuQ29udGFpbnNJdGVtTmFtZWQod2hhdCk7XG4gICAgY29uc3Qgb3RoZXJMaXN0ID0gd2hhdDtcbiAgICBpZiAob3RoZXJMaXN0LnNpemUgPT0gMCB8fCB0aGlzLnNpemUgPT0gMCkgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAobGV0IFtrZXldIG9mIG90aGVyTGlzdCkge1xuICAgICAgaWYgKCF0aGlzLmhhcyhrZXkpKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcHVibGljIEdyZWF0ZXJUaGFuKG90aGVyTGlzdDogSW5rTGlzdCkge1xuICAgIGlmICh0aGlzLkNvdW50ID09IDApIHJldHVybiBmYWxzZTtcbiAgICBpZiAob3RoZXJMaXN0LkNvdW50ID09IDApIHJldHVybiB0cnVlO1xuXG4gICAgcmV0dXJuIHRoaXMubWluSXRlbS5WYWx1ZSA+IG90aGVyTGlzdC5tYXhJdGVtLlZhbHVlO1xuICB9XG4gIHB1YmxpYyBHcmVhdGVyVGhhbk9yRXF1YWxzKG90aGVyTGlzdDogSW5rTGlzdCkge1xuICAgIGlmICh0aGlzLkNvdW50ID09IDApIHJldHVybiBmYWxzZTtcbiAgICBpZiAob3RoZXJMaXN0LkNvdW50ID09IDApIHJldHVybiB0cnVlO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMubWluSXRlbS5WYWx1ZSA+PSBvdGhlckxpc3QubWluSXRlbS5WYWx1ZSAmJlxuICAgICAgdGhpcy5tYXhJdGVtLlZhbHVlID49IG90aGVyTGlzdC5tYXhJdGVtLlZhbHVlXG4gICAgKTtcbiAgfVxuICBwdWJsaWMgTGVzc1RoYW4ob3RoZXJMaXN0OiBJbmtMaXN0KSB7XG4gICAgaWYgKG90aGVyTGlzdC5Db3VudCA9PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKHRoaXMuQ291bnQgPT0gMCkgcmV0dXJuIHRydWU7XG5cbiAgICByZXR1cm4gdGhpcy5tYXhJdGVtLlZhbHVlIDwgb3RoZXJMaXN0Lm1pbkl0ZW0uVmFsdWU7XG4gIH1cbiAgcHVibGljIExlc3NUaGFuT3JFcXVhbHMob3RoZXJMaXN0OiBJbmtMaXN0KSB7XG4gICAgaWYgKG90aGVyTGlzdC5Db3VudCA9PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKHRoaXMuQ291bnQgPT0gMCkgcmV0dXJuIHRydWU7XG5cbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5tYXhJdGVtLlZhbHVlIDw9IG90aGVyTGlzdC5tYXhJdGVtLlZhbHVlICYmXG4gICAgICB0aGlzLm1pbkl0ZW0uVmFsdWUgPD0gb3RoZXJMaXN0Lm1pbkl0ZW0uVmFsdWVcbiAgICApO1xuICB9XG4gIHB1YmxpYyBNYXhBc0xpc3QoKSB7XG4gICAgaWYgKHRoaXMuQ291bnQgPiAwKSByZXR1cm4gbmV3IElua0xpc3QodGhpcy5tYXhJdGVtKTtcbiAgICBlbHNlIHJldHVybiBuZXcgSW5rTGlzdCgpO1xuICB9XG4gIHB1YmxpYyBNaW5Bc0xpc3QoKSB7XG4gICAgaWYgKHRoaXMuQ291bnQgPiAwKSByZXR1cm4gbmV3IElua0xpc3QodGhpcy5taW5JdGVtKTtcbiAgICBlbHNlIHJldHVybiBuZXcgSW5rTGlzdCgpO1xuICB9XG4gIHB1YmxpYyBMaXN0V2l0aFN1YlJhbmdlKG1pbkJvdW5kOiBhbnksIG1heEJvdW5kOiBhbnkpIHtcbiAgICBpZiAodGhpcy5Db3VudCA9PSAwKSByZXR1cm4gbmV3IElua0xpc3QoKTtcblxuICAgIGxldCBvcmRlcmVkID0gdGhpcy5vcmRlcmVkSXRlbXM7XG5cbiAgICBsZXQgbWluVmFsdWUgPSAwO1xuICAgIGxldCBtYXhWYWx1ZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xuXG4gICAgaWYgKE51bWJlci5pc0ludGVnZXIobWluQm91bmQpKSB7XG4gICAgICBtaW5WYWx1ZSA9IG1pbkJvdW5kO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobWluQm91bmQgaW5zdGFuY2VvZiBJbmtMaXN0ICYmIG1pbkJvdW5kLkNvdW50ID4gMClcbiAgICAgICAgbWluVmFsdWUgPSBtaW5Cb3VuZC5taW5JdGVtLlZhbHVlO1xuICAgIH1cblxuICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKG1heEJvdW5kKSkge1xuICAgICAgbWF4VmFsdWUgPSBtYXhCb3VuZDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKG1heEJvdW5kIGluc3RhbmNlb2YgSW5rTGlzdCAmJiBtYXhCb3VuZC5Db3VudCA+IDApXG4gICAgICAgIG1heFZhbHVlID0gbWF4Qm91bmQubWF4SXRlbS5WYWx1ZTtcbiAgICB9XG5cbiAgICBsZXQgc3ViTGlzdCA9IG5ldyBJbmtMaXN0KCk7XG4gICAgc3ViTGlzdC5TZXRJbml0aWFsT3JpZ2luTmFtZXModGhpcy5vcmlnaW5OYW1lcyk7XG4gICAgZm9yIChsZXQgaXRlbSBvZiBvcmRlcmVkKSB7XG4gICAgICBpZiAoaXRlbS5WYWx1ZSA+PSBtaW5WYWx1ZSAmJiBpdGVtLlZhbHVlIDw9IG1heFZhbHVlKSB7XG4gICAgICAgIHN1Ykxpc3QuQWRkKGl0ZW0uS2V5LCBpdGVtLlZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3ViTGlzdDtcbiAgfVxuICBwdWJsaWMgRXF1YWxzKG90aGVySW5rTGlzdDogSW5rTGlzdCkge1xuICAgIGlmIChvdGhlcklua0xpc3QgaW5zdGFuY2VvZiBJbmtMaXN0ID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChvdGhlcklua0xpc3QuQ291bnQgIT0gdGhpcy5Db3VudCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgZm9yIChsZXQgW2tleV0gb2YgdGhpcykge1xuICAgICAgaWYgKCFvdGhlcklua0xpc3QuaGFzKGtleSkpIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvLyBHZXRIYXNoQ29kZSBub3QgaW1wbGVtZW50ZWRcbiAgZ2V0IG9yZGVyZWRJdGVtcygpIHtcbiAgICAvLyBMaXN0PEtleVZhbHVlUGFpcjxJbmtMaXN0SXRlbSwgaW50Pj5cbiAgICBsZXQgb3JkZXJlZCA9IG5ldyBBcnJheTxLZXlWYWx1ZVBhaXI8SW5rTGlzdEl0ZW0sIG51bWJlcj4+KCk7XG5cbiAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgdGhpcykge1xuICAgICAgbGV0IGl0ZW0gPSBJbmtMaXN0SXRlbS5mcm9tU2VyaWFsaXplZEtleShrZXkpO1xuICAgICAgb3JkZXJlZC5wdXNoKHsgS2V5OiBpdGVtLCBWYWx1ZTogdmFsdWUgfSk7XG4gICAgfVxuXG4gICAgb3JkZXJlZC5zb3J0KCh4LCB5KSA9PiB7XG4gICAgICBpZiAoeC5LZXkub3JpZ2luTmFtZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwieC5LZXkub3JpZ2luTmFtZVwiKTtcbiAgICAgIH1cbiAgICAgIGlmICh5LktleS5vcmlnaW5OYW1lID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJ5LktleS5vcmlnaW5OYW1lXCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoeC5WYWx1ZSA9PSB5LlZhbHVlKSB7XG4gICAgICAgIHJldHVybiB4LktleS5vcmlnaW5OYW1lLmxvY2FsZUNvbXBhcmUoeS5LZXkub3JpZ2luTmFtZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBUT0RPOiByZWZhY3RvciB0aGlzIGJpdCBpbnRvIGEgbnVtYmVyQ29tcGFyZVRvIG1ldGhvZD9cbiAgICAgICAgaWYgKHguVmFsdWUgPCB5LlZhbHVlKSByZXR1cm4gLTE7XG4gICAgICAgIHJldHVybiB4LlZhbHVlID4geS5WYWx1ZSA/IDEgOiAwO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG9yZGVyZWQ7XG4gIH1cblxuICBnZXQgc2luZ2xlSXRlbSgpOiBJbmtMaXN0SXRlbSB8IG51bGwge1xuICAgIGZvciAobGV0IGl0ZW0gb2YgdGhpcy5vcmRlcmVkSXRlbXMpIHtcbiAgICAgIHJldHVybiBpdGVtLktleTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwdWJsaWMgdG9TdHJpbmcoKSB7XG4gICAgbGV0IG9yZGVyZWQgPSB0aGlzLm9yZGVyZWRJdGVtcztcblxuICAgIGxldCBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvcmRlcmVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoaSA+IDApIHNiLkFwcGVuZChcIiwgXCIpO1xuXG4gICAgICBsZXQgaXRlbSA9IG9yZGVyZWRbaV0uS2V5O1xuICAgICAgaWYgKGl0ZW0uaXRlbU5hbWUgPT09IG51bGwpIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJpdGVtLml0ZW1OYW1lXCIpO1xuICAgICAgc2IuQXBwZW5kKGl0ZW0uaXRlbU5hbWUpO1xuICAgIH1cblxuICAgIHJldHVybiBzYi50b1N0cmluZygpO1xuICB9XG4gIC8vIGNhc3RpbmcgYSBJbmtMaXN0IHRvIGEgTnVtYmVyLCBmb3Igc29tZXJlYXNvbiwgYWN0dWFsbHkgZ2l2ZXMgYSBudW1iZXIuXG4gIC8vIFRoaXMgbWVzc2VzIHVwIHRoZSB0eXBlIGRldGVjdGlvbiB3aGVuIGNyZWF0aW5nIGEgVmFsdWUgZnJvbSBhIElua0xpc3QuXG4gIC8vIFJldHVybmluZyBOYU4gaGVyZSBwcmV2ZW50cyB0aGF0LlxuICBwdWJsaWMgdmFsdWVPZigpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG59XG5cbi8qKlxuICogSW4gdGhlIG9yaWdpbmFsIEMjIGNvZGUsIGBJbmtMaXN0SXRlbWAgd2FzIGRlZmluZWQgYXMgdmFsdWUgdHlwZSwgbWVhbmluZ1xuICogdGhhdCB0d28gYElua0xpc3RJdGVtYCB3b3VsZCBiZSBjb25zaWRlcmVkIGVxdWFsIGFzIGxvbmcgYXMgdGhleSBoZWxkIHRoZVxuICogc2FtZSB2YWx1ZXMuIFRoaXMgZG9lc24ndCBob2xkIHRydWUgaW4gSmF2YXNjcmlwdCwgYXMgYElua0xpc3RJdGVtYCBpcyBhXG4gKiByZWZlcmVuY2UgdHlwZSAoSmF2YXNjcmlwdCBkb2Vzbid0IGFsbG93IHRoZSBjcmVhdGlvbiBvZiBjdXN0b20gdmFsdWUgdHlwZXMpLlxuICpcbiAqIFRoZSBrZXkgZXF1YWxpdHkgb2YgTWFwIG9iamVjdHMgaXMgYmFzZWQgb24gdGhlIFwiU2FtZVZhbHVlWmVyb1wiIGFsZ29yaXRobTtcbiAqIHNpbmNlIGBJbmtMaXN0SXRlbWAgaXMgYSB2YWx1ZSB0eXBlLCB0d28ga2V5cyB3aWxsIG9ubHkgYmUgY29uc2lkZXJlZFxuICogZXF1YWwgaWYgdGhleSBhcmUsIGluIGZhY3QsIHRoZSBzYW1lIG9iamVjdC4gQXMgd2UgYXJlIHRyeWluZyB0byBlbXVsYXRlXG4gKiB0aGUgb3JpZ2luYWwgYmVoYXZpb3IgYXMgY2xvc2UgYXMgcG9zc2libGUsIHRoaXMgd2lsbCBsZWFkIHRvIHVuZm9yZXNlZW5cbiAqIHNpZGUgZWZmZWN0cy5cbiAqXG4gKiBJbiBvcmRlciB0byBoYXZlIGEga2V5IGVxdWFsaXR5IGJhc2VkIG9uIHZhbHVlIHNlbWFudGljcywgd2UnbGwgY29udmVydFxuICogYElua0xpc3RJdGVtYCB0byBhIHZhbGlkIHN0cmluZyByZXByZXNlbnRhdGlvbiBhbmQgdXNlIHRoaXMgcmVwcmVzZW50YXRpb25cbiAqIGFzIGEga2V5IChzdHJpbmdzIGFyZSB2YWx1ZSB0eXBlcyBpbiBKYXZhc2NyaXB0KS4gUmF0aGVyIHRoYW4gdXNpbmcgdGhlXG4gKiB0eXBlIGBzdHJpbmdgIGRpcmVjdGx5LCB3ZSdsbCBhbGlhcyBpdCB0byBgU2VyaWFsaXplZElua0xpc3RJdGVtYCBhbmQgdXNlXG4gKiB0aGlzIHR5cGUgYXMgdGhlIGtleSBmb3Igb3VyIE1hcC1iYXNlZCBgSW5rTGlzdGAuXG4gKlxuICogUmVkdWNpbmcgYElua0xpc3RJdGVtYCB0byBhIEpTT04gcmVwcmVzZW50YXRpb24gd291bGQgbm90IGJlIGJ1bGxldHByb29mXG4gKiBpbiB0aGUgZ2VuZXJhbCBjYXNlLCBidXQgZm9yIG91ciBuZWVkcyBpdCB3b3JrcyB3ZWxsLiBUaGUgbWFqb3IgZG93bnNpZGUgb2ZcbiAqIHRoaXMgbWV0aG9kIGlzIHRoYXQgd2Ugd2lsbCBoYXZlIHRvIHRvIHJlY29uc3RydWN0IHRoZSBvcmlnaW5hbCBgSW5rTGlzdEl0ZW1gXG4gKiBldmVyeSB0aW1lIHdlJ2xsIG5lZWQgdG8gYWNjZXNzIGl0cyBwcm9wZXJ0aWVzLlxuICovXG5leHBvcnQgdHlwZSBTZXJpYWxpemVkSW5rTGlzdEl0ZW0gPSBzdHJpbmc7XG5cbi8qKlxuICogQW4gaW50ZXJmYWNlIGluaGVyaXRlZCBieSBgSW5rTGlzdEl0ZW1gLCBkZWZpbmluZyBleHBvc2VkXG4gKiBwcm9wZXJ0aWVzLiBJdCdzIG1haW5seSB1c2VkIHdoZW4gZGVzZXJpYWxpemluZyBhIGBJbmtMaXN0SXRlbWAgZnJvbSBpdHNcbiAqIGtleSAoYFNlcmlhbGl6ZWRJbmtMaXN0SXRlbWApXG4gKi9cbmludGVyZmFjZSBJSW5rTGlzdEl0ZW0ge1xuICByZWFkb25seSBvcmlnaW5OYW1lOiBzdHJpbmcgfCBudWxsO1xuICByZWFkb25seSBpdGVtTmFtZTogc3RyaW5nIHwgbnVsbDtcbn1cbmV4cG9ydCBpbnRlcmZhY2UgS2V5VmFsdWVQYWlyPEssIFY+IHtcbiAgS2V5OiBLO1xuICBWYWx1ZTogVjtcbn1cbiIsImV4cG9ydCBjbGFzcyBTdG9yeUV4Y2VwdGlvbiBleHRlbmRzIEVycm9yIHtcbiAgcHVibGljIHVzZUVuZExpbmVOdW1iZXI6IGJvb2xlYW47XG4gIHB1YmxpYyBtZXNzYWdlOiBzdHJpbmc7XG4gIHB1YmxpYyBuYW1lOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy51c2VFbmRMaW5lTnVtYmVyID0gZmFsc2U7XG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgICB0aGlzLm5hbWUgPSBcIlN0b3J5RXhjZXB0aW9uXCI7XG4gIH1cbn1cbiIsIi8qKlxuICogVGhpcyBpbnRlcmZhY2Ugbm9ybWFsaXplIHRoZSBgVHJ5R2V0YCBiZWhhdmlvciBmb3VuZCBpbiB0aGUgb3JpZ2luYWxcbiAqIEMjIHByb2plY3QuIEFueSBgVHJ5R2V0YCBtZXRob2Qgd2lsbCByZXR1cm4gYSBvYmplY3QgY29uZm9ybWluZyB0byB0aGlzXG4gKiBpbnRlcmZhY2UuXG4gKlxuICogVGhlIG9yaWdpbmFsIGZ1bmN0aW9uIHJldHVybnMgYSBib29sZWFuIGFuZCBoYXMgYSBzZWNvbmQgcGFyYW1ldGVyIGNhbGxlZFxuICogaXRlbSB0aGF0IGlzIGFuIGBvdXRgLiBCb3RoIGFyZSBuZWVkZWQgYW5kIHdlIGNhbid0IGp1c3QgcmV0dXJuIHRoZSBpdGVtXG4gKiBiZWNhdXNlIGl0J2xsIGFsd2F5cyBiZSB0cnV0aHkuIEluc3RlYWQsIHdlIHJldHVybiBhbiBvYmplY3QgY29udGFpbmluZ1xuICogd2hldGhlciB0aGUgcmVzdWx0IGV4aXN0cyAoYGV4aXN0c2ApIGFuZCB0aGUgcmVzdWx0IGl0c2VsZiAoYHJlc3VsdGApLlxuICpcbiAqIEZvciBpbnN0YW5jZSBhIGBUcnlHZXRgIHByb3RvdHlwZSB3b3VsZCBsb29rIGxpa2UgdGhpczpcbmBgYFxuVHJ5R2V0SXRlbVdpdGhWYWx1ZSh2YWw6IG51bWJlciwgaXRlbTogSW5rTGlzdEl0ZW0pOiBUcnlHZXRSZXN1bHQ8SW5rTGlzdEl0ZW0+e1xuYGBgXG4gKlxuICogT24gdGhlIG90aGVyIGhhbmQsIGRlYWxpbmcgd2l0aCB0aGUgcmVzdWx0IGNhbiBiZSBkb25lIGluIHRoZSBmb2xsb3dpbmcgd2F5OlxuYGBgXG52YXIgaXRlbSA9IGl0ZW0uVHJ5R2V0SXRlbVdpdGhWYWx1ZShpbnRWYWwsIElua0xpc3RJdGVtLk51bGwpO1xuaWYgKGl0ZW0uZXhpc3RzKSB7XG5cdGNvbnNvbGUubG9nKGl0ZW0ucmVzdWx0KVxufVxuYGBgXG4gKlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRyeUdldFJlc3VsdDxUPiB7XG4gIHJlc3VsdDogVDtcbiAgZXhpc3RzOiBib29sZWFuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdHJ5R2V0VmFsdWVGcm9tTWFwPEssIFY+KFxuICBtYXA6IE1hcDxLLCBWPiB8IG51bGwsXG4gIGtleTogSyxcbiAgLyogb3V0ICovIHZhbHVlOiBWXG4pOiBUcnlHZXRSZXN1bHQ8Vj4ge1xuICBpZiAobWFwID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHsgcmVzdWx0OiB2YWx1ZSwgZXhpc3RzOiBmYWxzZSB9O1xuICB9XG5cbiAgbGV0IHZhbCA9IG1hcC5nZXQoa2V5KTtcblxuICBpZiAodHlwZW9mIHZhbCA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiB7IHJlc3VsdDogdmFsdWUsIGV4aXN0czogZmFsc2UgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4geyByZXN1bHQ6IHZhbCwgZXhpc3RzOiB0cnVlIH07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRyeVBhcnNlSW50KFxuICB2YWx1ZTogYW55LFxuICAvKiBvdXQgKi8gZGVmYXVsdFZhbHVlOiBudW1iZXIgPSAwXG4pOiBUcnlHZXRSZXN1bHQ8bnVtYmVyPiB7XG4gIGxldCB2YWwgPSBwYXJzZUludCh2YWx1ZSk7XG5cbiAgaWYgKCFOdW1iZXIuaXNOYU4odmFsKSkge1xuICAgIHJldHVybiB7IHJlc3VsdDogdmFsLCBleGlzdHM6IHRydWUgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4geyByZXN1bHQ6IGRlZmF1bHRWYWx1ZSwgZXhpc3RzOiBmYWxzZSB9O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cnlQYXJzZUZsb2F0KFxuICB2YWx1ZTogYW55LFxuICAvKiBvdXQgKi8gZGVmYXVsdFZhbHVlOiBudW1iZXIgPSAwXG4pOiBUcnlHZXRSZXN1bHQ8bnVtYmVyPiB7XG4gIGxldCB2YWwgPSBwYXJzZUZsb2F0KHZhbHVlKTtcblxuICBpZiAoIU51bWJlci5pc05hTih2YWwpKSB7XG4gICAgcmV0dXJuIHsgcmVzdWx0OiB2YWwsIGV4aXN0czogdHJ1ZSB9O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7IHJlc3VsdDogZGVmYXVsdFZhbHVlLCBleGlzdHM6IGZhbHNlIH07XG4gIH1cbn1cbiIsImltcG9ydCB7IElua09iamVjdCB9IGZyb20gXCIuL09iamVjdFwiO1xuaW1wb3J0IHsgQ29udGFpbmVyIH0gZnJvbSBcIi4vQ29udGFpbmVyXCI7XG5cbmV4cG9ydCBjbGFzcyBTZWFyY2hSZXN1bHQge1xuICBwdWJsaWMgb2JqOiBJbmtPYmplY3QgfCBudWxsID0gbnVsbDtcbiAgcHVibGljIGFwcHJveGltYXRlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgZ2V0IGNvcnJlY3RPYmooKSB7XG4gICAgcmV0dXJuIHRoaXMuYXBwcm94aW1hdGUgPyBudWxsIDogdGhpcy5vYmo7XG4gIH1cblxuICBnZXQgY29udGFpbmVyKCkge1xuICAgIHJldHVybiB0aGlzLm9iaiBpbnN0YW5jZW9mIENvbnRhaW5lciA/IHRoaXMub2JqIDogbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBjb3B5KCkge1xuICAgIGxldCBzZWFyY2hSZXN1bHQgPSBuZXcgU2VhcmNoUmVzdWx0KCk7XG4gICAgc2VhcmNoUmVzdWx0Lm9iaiA9IHRoaXMub2JqO1xuICAgIHNlYXJjaFJlc3VsdC5hcHByb3hpbWF0ZSA9IHRoaXMuYXBwcm94aW1hdGU7XG5cbiAgICByZXR1cm4gc2VhcmNoUmVzdWx0O1xuICB9XG59XG4iLCJpbXBvcnQgeyBTdHJpbmdWYWx1ZSB9IGZyb20gXCIuL1ZhbHVlXCI7XG5pbXBvcnQgeyB0aHJvd051bGxFeGNlcHRpb24gfSBmcm9tIFwiLi9OdWxsRXhjZXB0aW9uXCI7XG5pbXBvcnQgeyBTdHJpbmdCdWlsZGVyIH0gZnJvbSBcIi4vU3RyaW5nQnVpbGRlclwiO1xuaW1wb3J0IHsgSU5hbWVkQ29udGVudCB9IGZyb20gXCIuL0lOYW1lZENvbnRlbnRcIjtcbmltcG9ydCB7IElua09iamVjdCB9IGZyb20gXCIuL09iamVjdFwiO1xuaW1wb3J0IHsgU2VhcmNoUmVzdWx0IH0gZnJvbSBcIi4vU2VhcmNoUmVzdWx0XCI7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSBcIi4vUGF0aFwiO1xuaW1wb3J0IHsgRGVidWcgfSBmcm9tIFwiLi9EZWJ1Z1wiO1xuaW1wb3J0IHsgdHJ5R2V0VmFsdWVGcm9tTWFwIH0gZnJvbSBcIi4vVHJ5R2V0UmVzdWx0XCI7XG5pbXBvcnQgeyBhc0lOYW1lZENvbnRlbnRPck51bGwsIGFzT3JOdWxsLCBhc09yVGhyb3dzIH0gZnJvbSBcIi4vVHlwZUFzc2VydGlvblwiO1xuXG5leHBvcnQgY2xhc3MgQ29udGFpbmVyIGV4dGVuZHMgSW5rT2JqZWN0IGltcGxlbWVudHMgSU5hbWVkQ29udGVudCB7XG4gIHB1YmxpYyBuYW1lOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICBwdWJsaWMgX2NvbnRlbnQ6IElua09iamVjdFtdID0gW107XG4gIHB1YmxpYyBuYW1lZENvbnRlbnQ6IE1hcDxzdHJpbmcsIElOYW1lZENvbnRlbnQ+ID0gbmV3IE1hcCgpO1xuXG4gIHB1YmxpYyB2aXNpdHNTaG91bGRCZUNvdW50ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIHR1cm5JbmRleFNob3VsZEJlQ291bnRlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgY291bnRpbmdBdFN0YXJ0T25seTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHB1YmxpYyBfcGF0aFRvRmlyc3RMZWFmQ29udGVudDogUGF0aCB8IG51bGwgPSBudWxsO1xuXG4gIGdldCBoYXNWYWxpZE5hbWUoKSB7XG4gICAgcmV0dXJuIHRoaXMubmFtZSAhPSBudWxsICYmIHRoaXMubmFtZS5sZW5ndGggPiAwO1xuICB9XG4gIGdldCBjb250ZW50KCkge1xuICAgIHJldHVybiB0aGlzLl9jb250ZW50O1xuICB9XG4gIHNldCBjb250ZW50KHZhbHVlOiBJbmtPYmplY3RbXSkge1xuICAgIHRoaXMuQWRkQ29udGVudCh2YWx1ZSk7XG4gIH1cbiAgZ2V0IG5hbWVkT25seUNvbnRlbnQoKSB7XG4gICAgbGV0IG5hbWVkT25seUNvbnRlbnREaWN0OiBNYXA8c3RyaW5nLCBJbmtPYmplY3Q+IHwgbnVsbCA9IG5ldyBNYXAoKTtcblxuICAgIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiB0aGlzLm5hbWVkQ29udGVudCkge1xuICAgICAgbGV0IGlua09iamVjdCA9IGFzT3JUaHJvd3ModmFsdWUsIElua09iamVjdCk7XG4gICAgICBuYW1lZE9ubHlDb250ZW50RGljdC5zZXQoa2V5LCBpbmtPYmplY3QpO1xuICAgIH1cblxuICAgIGZvciAobGV0IGMgb2YgdGhpcy5jb250ZW50KSB7XG4gICAgICBsZXQgbmFtZWQgPSBhc0lOYW1lZENvbnRlbnRPck51bGwoYyk7XG4gICAgICBpZiAobmFtZWQgIT0gbnVsbCAmJiBuYW1lZC5oYXNWYWxpZE5hbWUpIHtcbiAgICAgICAgbmFtZWRPbmx5Q29udGVudERpY3QuZGVsZXRlKG5hbWVkLm5hbWUhKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobmFtZWRPbmx5Q29udGVudERpY3Quc2l6ZSA9PSAwKSBuYW1lZE9ubHlDb250ZW50RGljdCA9IG51bGw7XG5cbiAgICByZXR1cm4gbmFtZWRPbmx5Q29udGVudERpY3Q7XG4gIH1cbiAgc2V0IG5hbWVkT25seUNvbnRlbnQodmFsdWU6IE1hcDxzdHJpbmcsIElua09iamVjdD4gfCBudWxsKSB7XG4gICAgbGV0IGV4aXN0aW5nTmFtZWRPbmx5ID0gdGhpcy5uYW1lZE9ubHlDb250ZW50O1xuICAgIGlmIChleGlzdGluZ05hbWVkT25seSAhPSBudWxsKSB7XG4gICAgICBmb3IgKGxldCBba2V5XSBvZiBleGlzdGluZ05hbWVkT25seSkge1xuICAgICAgICB0aGlzLm5hbWVkQ29udGVudC5kZWxldGUoa2V5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuO1xuXG4gICAgZm9yIChsZXQgWywgdmFsXSBvZiB2YWx1ZSkge1xuICAgICAgbGV0IG5hbWVkID0gYXNJTmFtZWRDb250ZW50T3JOdWxsKHZhbCk7XG4gICAgICBpZiAobmFtZWQgIT0gbnVsbCkgdGhpcy5BZGRUb05hbWVkQ29udGVudE9ubHkobmFtZWQpO1xuICAgIH1cbiAgfVxuICBnZXQgY291bnRGbGFncygpOiBudW1iZXIge1xuICAgIGxldCBmbGFnczogQ29udGFpbmVyLkNvdW50RmxhZ3MgPSAwO1xuICAgIGlmICh0aGlzLnZpc2l0c1Nob3VsZEJlQ291bnRlZCkgZmxhZ3MgfD0gQ29udGFpbmVyLkNvdW50RmxhZ3MuVmlzaXRzO1xuICAgIGlmICh0aGlzLnR1cm5JbmRleFNob3VsZEJlQ291bnRlZCkgZmxhZ3MgfD0gQ29udGFpbmVyLkNvdW50RmxhZ3MuVHVybnM7XG4gICAgaWYgKHRoaXMuY291bnRpbmdBdFN0YXJ0T25seSkgZmxhZ3MgfD0gQ29udGFpbmVyLkNvdW50RmxhZ3MuQ291bnRTdGFydE9ubHk7XG5cbiAgICBpZiAoZmxhZ3MgPT0gQ29udGFpbmVyLkNvdW50RmxhZ3MuQ291bnRTdGFydE9ubHkpIHtcbiAgICAgIGZsYWdzID0gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gZmxhZ3M7XG4gIH1cbiAgc2V0IGNvdW50RmxhZ3ModmFsdWU6IG51bWJlcikge1xuICAgIGxldCBmbGFnOiBDb250YWluZXIuQ291bnRGbGFncyA9IHZhbHVlO1xuICAgIGlmICgoZmxhZyAmIENvbnRhaW5lci5Db3VudEZsYWdzLlZpc2l0cykgPiAwKVxuICAgICAgdGhpcy52aXNpdHNTaG91bGRCZUNvdW50ZWQgPSB0cnVlO1xuICAgIGlmICgoZmxhZyAmIENvbnRhaW5lci5Db3VudEZsYWdzLlR1cm5zKSA+IDApXG4gICAgICB0aGlzLnR1cm5JbmRleFNob3VsZEJlQ291bnRlZCA9IHRydWU7XG4gICAgaWYgKChmbGFnICYgQ29udGFpbmVyLkNvdW50RmxhZ3MuQ291bnRTdGFydE9ubHkpID4gMClcbiAgICAgIHRoaXMuY291bnRpbmdBdFN0YXJ0T25seSA9IHRydWU7XG4gIH1cbiAgZ2V0IHBhdGhUb0ZpcnN0TGVhZkNvbnRlbnQoKSB7XG4gICAgaWYgKHRoaXMuX3BhdGhUb0ZpcnN0TGVhZkNvbnRlbnQgPT0gbnVsbClcbiAgICAgIHRoaXMuX3BhdGhUb0ZpcnN0TGVhZkNvbnRlbnQgPSB0aGlzLnBhdGguUGF0aEJ5QXBwZW5kaW5nUGF0aChcbiAgICAgICAgdGhpcy5pbnRlcm5hbFBhdGhUb0ZpcnN0TGVhZkNvbnRlbnRcbiAgICAgICk7XG5cbiAgICByZXR1cm4gdGhpcy5fcGF0aFRvRmlyc3RMZWFmQ29udGVudDtcbiAgfVxuICBnZXQgaW50ZXJuYWxQYXRoVG9GaXJzdExlYWZDb250ZW50KCkge1xuICAgIGxldCBjb21wb25lbnRzOiBQYXRoLkNvbXBvbmVudFtdID0gW107XG4gICAgbGV0IGNvbnRhaW5lcjogQ29udGFpbmVyID0gdGhpcztcbiAgICB3aGlsZSAoY29udGFpbmVyIGluc3RhbmNlb2YgQ29udGFpbmVyKSB7XG4gICAgICBpZiAoY29udGFpbmVyLmNvbnRlbnQubGVuZ3RoID4gMCkge1xuICAgICAgICBjb21wb25lbnRzLnB1c2gobmV3IFBhdGguQ29tcG9uZW50KDApKTtcbiAgICAgICAgY29udGFpbmVyID0gY29udGFpbmVyLmNvbnRlbnRbMF0gYXMgQ29udGFpbmVyO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IFBhdGgoY29tcG9uZW50cyk7XG4gIH1cblxuICBwdWJsaWMgQWRkQ29udGVudChjb250ZW50T2JqT3JMaXN0OiBJbmtPYmplY3QgfCBJbmtPYmplY3RbXSkge1xuICAgIGlmIChjb250ZW50T2JqT3JMaXN0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgIGxldCBjb250ZW50TGlzdCA9IGNvbnRlbnRPYmpPckxpc3QgYXMgSW5rT2JqZWN0W107XG5cbiAgICAgIGZvciAobGV0IGMgb2YgY29udGVudExpc3QpIHtcbiAgICAgICAgdGhpcy5BZGRDb250ZW50KGMpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgY29udGVudE9iaiA9IGNvbnRlbnRPYmpPckxpc3QgYXMgSW5rT2JqZWN0O1xuXG4gICAgICB0aGlzLl9jb250ZW50LnB1c2goY29udGVudE9iaik7XG5cbiAgICAgIGlmIChjb250ZW50T2JqLnBhcmVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjb250ZW50IGlzIGFscmVhZHkgaW4gXCIgKyBjb250ZW50T2JqLnBhcmVudCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRlbnRPYmoucGFyZW50ID0gdGhpcztcblxuICAgICAgdGhpcy5UcnlBZGROYW1lZENvbnRlbnQoY29udGVudE9iaik7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBUcnlBZGROYW1lZENvbnRlbnQoY29udGVudE9iajogSW5rT2JqZWN0KSB7XG4gICAgbGV0IG5hbWVkQ29udGVudE9iaiA9IGFzSU5hbWVkQ29udGVudE9yTnVsbChjb250ZW50T2JqKTtcbiAgICBpZiAobmFtZWRDb250ZW50T2JqICE9IG51bGwgJiYgbmFtZWRDb250ZW50T2JqLmhhc1ZhbGlkTmFtZSkge1xuICAgICAgdGhpcy5BZGRUb05hbWVkQ29udGVudE9ubHkobmFtZWRDb250ZW50T2JqKTtcbiAgICB9XG4gIH1cbiAgcHVibGljIEFkZFRvTmFtZWRDb250ZW50T25seShuYW1lZENvbnRlbnRPYmo6IElOYW1lZENvbnRlbnQpIHtcbiAgICBEZWJ1Zy5Bc3NlcnRUeXBlKFxuICAgICAgbmFtZWRDb250ZW50T2JqLFxuICAgICAgSW5rT2JqZWN0LFxuICAgICAgXCJDYW4gb25seSBhZGQgUnVudGltZS5PYmplY3RzIHRvIGEgUnVudGltZS5Db250YWluZXJcIlxuICAgICk7XG4gICAgbGV0IHJ1bnRpbWVPYmogPSBhc09yVGhyb3dzKG5hbWVkQ29udGVudE9iaiwgSW5rT2JqZWN0KTtcbiAgICBydW50aW1lT2JqLnBhcmVudCA9IHRoaXM7XG5cbiAgICBpZiAobmFtZWRDb250ZW50T2JqLm5hbWUgPT09IG51bGwpXG4gICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwibmFtZWRDb250ZW50T2JqLm5hbWVcIik7XG4gICAgdGhpcy5uYW1lZENvbnRlbnQuc2V0KG5hbWVkQ29udGVudE9iai5uYW1lISwgbmFtZWRDb250ZW50T2JqKTtcbiAgfVxuICBwdWJsaWMgQ29udGVudEF0UGF0aChcbiAgICBwYXRoOiBQYXRoLFxuICAgIHBhcnRpYWxQYXRoU3RhcnQ6IG51bWJlciA9IDAsXG4gICAgcGFydGlhbFBhdGhMZW5ndGg6IG51bWJlciA9IC0xXG4gICkge1xuICAgIGlmIChwYXJ0aWFsUGF0aExlbmd0aCA9PSAtMSkgcGFydGlhbFBhdGhMZW5ndGggPSBwYXRoLmxlbmd0aDtcblxuICAgIGxldCByZXN1bHQgPSBuZXcgU2VhcmNoUmVzdWx0KCk7XG4gICAgcmVzdWx0LmFwcHJveGltYXRlID0gZmFsc2U7XG5cbiAgICBsZXQgY3VycmVudENvbnRhaW5lcjogQ29udGFpbmVyIHwgbnVsbCA9IHRoaXM7XG4gICAgbGV0IGN1cnJlbnRPYmo6IElua09iamVjdCA9IHRoaXM7XG5cbiAgICBmb3IgKGxldCBpID0gcGFydGlhbFBhdGhTdGFydDsgaSA8IHBhcnRpYWxQYXRoTGVuZ3RoOyArK2kpIHtcbiAgICAgIGxldCBjb21wID0gcGF0aC5HZXRDb21wb25lbnQoaSk7XG4gICAgICBpZiAoY3VycmVudENvbnRhaW5lciA9PSBudWxsKSB7XG4gICAgICAgIHJlc3VsdC5hcHByb3hpbWF0ZSA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBsZXQgZm91bmRPYmo6IElua09iamVjdCB8IG51bGwgPVxuICAgICAgICBjdXJyZW50Q29udGFpbmVyLkNvbnRlbnRXaXRoUGF0aENvbXBvbmVudChjb21wKTtcblxuICAgICAgLy8gQ291bGRuJ3QgcmVzb2x2ZSBlbnRpcmUgcGF0aD9cbiAgICAgIGlmIChmb3VuZE9iaiA9PSBudWxsKSB7XG4gICAgICAgIHJlc3VsdC5hcHByb3hpbWF0ZSA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvLyBBcmUgd2UgYWJvdXQgdG8gbG9vcCBpbnRvIGFub3RoZXIgY29udGFpbmVyP1xuICAgICAgLy8gSXMgdGhlIG9iamVjdCBhIGNvbnRhaW5lciBhcyBleHBlY3RlZD8gSXQgbWlnaHRcbiAgICAgIC8vIG5vIGxvbmdlciBiZSBpZiB0aGUgY29udGVudCBoYXMgc2h1ZmZsZWQgYXJvdW5kLCBzbyB3aGF0XG4gICAgICAvLyB3YXMgb3JpZ2luYWxseSBhIGNvbnRhaW5lciBubyBsb25nZXIgaXMuXG4gICAgICBjb25zdCBuZXh0Q29udGFpbmVyOiBDb250YWluZXIgfCBudWxsID0gYXNPck51bGwoZm91bmRPYmosIENvbnRhaW5lcik7XG4gICAgICBpZiAoaSA8IHBhcnRpYWxQYXRoTGVuZ3RoIC0gMSAmJiBuZXh0Q29udGFpbmVyID09IG51bGwpIHtcbiAgICAgICAgcmVzdWx0LmFwcHJveGltYXRlID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGN1cnJlbnRPYmogPSBmb3VuZE9iajtcbiAgICAgIGN1cnJlbnRDb250YWluZXIgPSBuZXh0Q29udGFpbmVyO1xuICAgIH1cblxuICAgIHJlc3VsdC5vYmogPSBjdXJyZW50T2JqO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBwdWJsaWMgSW5zZXJ0Q29udGVudChjb250ZW50T2JqOiBJbmtPYmplY3QsIGluZGV4OiBudW1iZXIpIHtcbiAgICB0aGlzLmNvbnRlbnQuc3BsaWNlKGluZGV4LCAwLCBjb250ZW50T2JqKTtcblxuICAgIGlmIChjb250ZW50T2JqLnBhcmVudCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY29udGVudCBpcyBhbHJlYWR5IGluIFwiICsgY29udGVudE9iai5wYXJlbnQpO1xuICAgIH1cblxuICAgIGNvbnRlbnRPYmoucGFyZW50ID0gdGhpcztcblxuICAgIHRoaXMuVHJ5QWRkTmFtZWRDb250ZW50KGNvbnRlbnRPYmopO1xuICB9XG4gIHB1YmxpYyBBZGRDb250ZW50c09mQ29udGFpbmVyKG90aGVyQ29udGFpbmVyOiBDb250YWluZXIpIHtcbiAgICB0aGlzLmNvbnRlbnQucHVzaCguLi5vdGhlckNvbnRhaW5lci5jb250ZW50KTtcblxuICAgIGZvciAobGV0IG9iaiBvZiBvdGhlckNvbnRhaW5lci5jb250ZW50KSB7XG4gICAgICBvYmoucGFyZW50ID0gdGhpcztcbiAgICAgIHRoaXMuVHJ5QWRkTmFtZWRDb250ZW50KG9iaik7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBDb250ZW50V2l0aFBhdGhDb21wb25lbnQoY29tcG9uZW50OiBQYXRoLkNvbXBvbmVudCk6IElua09iamVjdCB8IG51bGwge1xuICAgIGlmIChjb21wb25lbnQuaXNJbmRleCkge1xuICAgICAgaWYgKGNvbXBvbmVudC5pbmRleCA+PSAwICYmIGNvbXBvbmVudC5pbmRleCA8IHRoaXMuY29udGVudC5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudFtjb21wb25lbnQuaW5kZXhdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjb21wb25lbnQuaXNQYXJlbnQpIHtcbiAgICAgIHJldHVybiB0aGlzLnBhcmVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGNvbXBvbmVudC5uYW1lID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJjb21wb25lbnQubmFtZVwiKTtcbiAgICAgIH1cbiAgICAgIGxldCBmb3VuZENvbnRlbnQgPSB0cnlHZXRWYWx1ZUZyb21NYXAoXG4gICAgICAgIHRoaXMubmFtZWRDb250ZW50LFxuICAgICAgICBjb21wb25lbnQubmFtZSxcbiAgICAgICAgbnVsbFxuICAgICAgKTtcbiAgICAgIGlmIChmb3VuZENvbnRlbnQuZXhpc3RzKSB7XG4gICAgICAgIHJldHVybiBhc09yVGhyb3dzKGZvdW5kQ29udGVudC5yZXN1bHQsIElua09iamVjdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcHVibGljIEJ1aWxkU3RyaW5nT2ZIaWVyYXJjaHkoKTogc3RyaW5nO1xuICBwdWJsaWMgQnVpbGRTdHJpbmdPZkhpZXJhcmNoeShcbiAgICBzYjogU3RyaW5nQnVpbGRlcixcbiAgICBpbmRlbnRhdGlvbjogbnVtYmVyLFxuICAgIHBvaW50ZWRPYmo6IElua09iamVjdCB8IG51bGxcbiAgKTogc3RyaW5nO1xuICBwdWJsaWMgQnVpbGRTdHJpbmdPZkhpZXJhcmNoeSgpIHtcbiAgICBsZXQgc2I6IFN0cmluZ0J1aWxkZXI7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMCkge1xuICAgICAgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xuICAgICAgdGhpcy5CdWlsZFN0cmluZ09mSGllcmFyY2h5KHNiLCAwLCBudWxsKTtcbiAgICAgIHJldHVybiBzYi50b1N0cmluZygpO1xuICAgIH1cblxuICAgIHNiID0gYXJndW1lbnRzWzBdIGFzIFN0cmluZ0J1aWxkZXI7XG4gICAgbGV0IGluZGVudGF0aW9uID0gYXJndW1lbnRzWzFdIGFzIG51bWJlcjtcbiAgICBsZXQgcG9pbnRlZE9iaiA9IGFyZ3VtZW50c1syXSBhcyBJbmtPYmplY3QgfCBudWxsO1xuXG4gICAgZnVuY3Rpb24gYXBwZW5kSW5kZW50YXRpb24oKSB7XG4gICAgICBjb25zdCBzcGFjZXNQZXJJbmRlbnQgPSA0OyAvLyBUcnVseSBjb25zdCBpbiB0aGUgb3JpZ2luYWwgY29kZVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzcGFjZXNQZXJJbmRlbnQgKiBpbmRlbnRhdGlvbjsgKytpKSB7XG4gICAgICAgIHNiLkFwcGVuZChcIiBcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXBwZW5kSW5kZW50YXRpb24oKTtcbiAgICBzYi5BcHBlbmQoXCJbXCIpO1xuXG4gICAgaWYgKHRoaXMuaGFzVmFsaWROYW1lKSB7XG4gICAgICBzYi5BcHBlbmRGb3JtYXQoXCIgKHswfSlcIiwgdGhpcy5uYW1lKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcyA9PSBwb2ludGVkT2JqKSB7XG4gICAgICBzYi5BcHBlbmQoXCIgIDwtLS1cIik7XG4gICAgfVxuXG4gICAgc2IuQXBwZW5kTGluZSgpO1xuXG4gICAgaW5kZW50YXRpb24rKztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb250ZW50Lmxlbmd0aDsgKytpKSB7XG4gICAgICBsZXQgb2JqID0gdGhpcy5jb250ZW50W2ldO1xuXG4gICAgICBpZiAob2JqIGluc3RhbmNlb2YgQ29udGFpbmVyKSB7XG4gICAgICAgIGxldCBjb250YWluZXIgPSBvYmogYXMgQ29udGFpbmVyO1xuXG4gICAgICAgIGNvbnRhaW5lci5CdWlsZFN0cmluZ09mSGllcmFyY2h5KHNiLCBpbmRlbnRhdGlvbiwgcG9pbnRlZE9iaik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcHBlbmRJbmRlbnRhdGlvbigpO1xuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgU3RyaW5nVmFsdWUpIHtcbiAgICAgICAgICBzYi5BcHBlbmQoJ1wiJyk7XG4gICAgICAgICAgc2IuQXBwZW5kKG9iai50b1N0cmluZygpLnJlcGxhY2UoXCJcXG5cIiwgXCJcXFxcblwiKSk7XG4gICAgICAgICAgc2IuQXBwZW5kKCdcIicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNiLkFwcGVuZChvYmoudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGkgIT0gdGhpcy5jb250ZW50Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgc2IuQXBwZW5kKFwiLFwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCEob2JqIGluc3RhbmNlb2YgQ29udGFpbmVyKSAmJiBvYmogPT0gcG9pbnRlZE9iaikge1xuICAgICAgICBzYi5BcHBlbmQoXCIgIDwtLS1cIik7XG4gICAgICB9XG5cbiAgICAgIHNiLkFwcGVuZExpbmUoKTtcbiAgICB9XG5cbiAgICBsZXQgb25seU5hbWVkOiBNYXA8c3RyaW5nLCBJTmFtZWRDb250ZW50PiA9IG5ldyBNYXAoKTtcblxuICAgIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiB0aGlzLm5hbWVkQ29udGVudCkge1xuICAgICAgaWYgKHRoaXMuY29udGVudC5pbmRleE9mKGFzT3JUaHJvd3ModmFsdWUsIElua09iamVjdCkpID49IDApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvbmx5TmFtZWQuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvbmx5TmFtZWQuc2l6ZSA+IDApIHtcbiAgICAgIGFwcGVuZEluZGVudGF0aW9uKCk7XG4gICAgICBzYi5BcHBlbmRMaW5lKFwiLS0gbmFtZWQ6IC0tXCIpO1xuXG4gICAgICBmb3IgKGxldCBbLCB2YWx1ZV0gb2Ygb25seU5hbWVkKSB7XG4gICAgICAgIERlYnVnLkFzc2VydFR5cGUoXG4gICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgQ29udGFpbmVyLFxuICAgICAgICAgIFwiQ2FuIG9ubHkgcHJpbnQgb3V0IG5hbWVkIENvbnRhaW5lcnNcIlxuICAgICAgICApO1xuICAgICAgICBsZXQgY29udGFpbmVyID0gdmFsdWUgYXMgQ29udGFpbmVyO1xuICAgICAgICBjb250YWluZXIuQnVpbGRTdHJpbmdPZkhpZXJhcmNoeShzYiwgaW5kZW50YXRpb24sIHBvaW50ZWRPYmopO1xuICAgICAgICBzYi5BcHBlbmRMaW5lKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaW5kZW50YXRpb24tLTtcblxuICAgIGFwcGVuZEluZGVudGF0aW9uKCk7XG4gICAgc2IuQXBwZW5kKFwiXVwiKTtcbiAgfVxufVxuXG5leHBvcnQgbmFtZXNwYWNlIENvbnRhaW5lciB7XG4gIGV4cG9ydCBlbnVtIENvdW50RmxhZ3Mge1xuICAgIFN0YXJ0ID0gMCxcbiAgICBWaXNpdHMgPSAxLFxuICAgIFR1cm5zID0gMixcbiAgICBDb3VudFN0YXJ0T25seSA9IDQsXG4gIH1cbn1cbiIsImltcG9ydCB7IElua09iamVjdCB9IGZyb20gXCIuL09iamVjdFwiO1xuXG5leHBvcnQgY2xhc3MgQ29udHJvbENvbW1hbmQgZXh0ZW5kcyBJbmtPYmplY3Qge1xuICBwcml2YXRlIF9jb21tYW5kVHlwZTogQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGU7XG5cbiAgZ2V0IGNvbW1hbmRUeXBlKCk6IENvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlIHtcbiAgICByZXR1cm4gdGhpcy5fY29tbWFuZFR5cGU7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBjb21tYW5kVHlwZTogQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUgPSBDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5Ob3RTZXRcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9jb21tYW5kVHlwZSA9IGNvbW1hbmRUeXBlO1xuICB9XG5cbiAgcHVibGljIENvcHkoKSB7XG4gICAgcmV0dXJuIG5ldyBDb250cm9sQ29tbWFuZCh0aGlzLmNvbW1hbmRUeXBlKTtcbiAgfVxuICBwdWJsaWMgc3RhdGljIEV2YWxTdGFydCgpIHtcbiAgICByZXR1cm4gbmV3IENvbnRyb2xDb21tYW5kKENvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLkV2YWxTdGFydCk7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBFdmFsT3V0cHV0KCkge1xuICAgIHJldHVybiBuZXcgQ29udHJvbENvbW1hbmQoQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuRXZhbE91dHB1dCk7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBFdmFsRW5kKCkge1xuICAgIHJldHVybiBuZXcgQ29udHJvbENvbW1hbmQoQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuRXZhbEVuZCk7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBEdXBsaWNhdGUoKSB7XG4gICAgcmV0dXJuIG5ldyBDb250cm9sQ29tbWFuZChDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5EdXBsaWNhdGUpO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgUG9wRXZhbHVhdGVkVmFsdWUoKSB7XG4gICAgcmV0dXJuIG5ldyBDb250cm9sQ29tbWFuZChDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5Qb3BFdmFsdWF0ZWRWYWx1ZSk7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBQb3BGdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IENvbnRyb2xDb21tYW5kKENvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLlBvcEZ1bmN0aW9uKTtcbiAgfVxuICBwdWJsaWMgc3RhdGljIFBvcFR1bm5lbCgpIHtcbiAgICByZXR1cm4gbmV3IENvbnRyb2xDb21tYW5kKENvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLlBvcFR1bm5lbCk7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBCZWdpblN0cmluZygpIHtcbiAgICByZXR1cm4gbmV3IENvbnRyb2xDb21tYW5kKENvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLkJlZ2luU3RyaW5nKTtcbiAgfVxuICBwdWJsaWMgc3RhdGljIEVuZFN0cmluZygpIHtcbiAgICByZXR1cm4gbmV3IENvbnRyb2xDb21tYW5kKENvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLkVuZFN0cmluZyk7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBOb09wKCkge1xuICAgIHJldHVybiBuZXcgQ29udHJvbENvbW1hbmQoQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuTm9PcCk7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBDaG9pY2VDb3VudCgpIHtcbiAgICByZXR1cm4gbmV3IENvbnRyb2xDb21tYW5kKENvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLkNob2ljZUNvdW50KTtcbiAgfVxuICBwdWJsaWMgc3RhdGljIFR1cm5zKCkge1xuICAgIHJldHVybiBuZXcgQ29udHJvbENvbW1hbmQoQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuVHVybnMpO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgVHVybnNTaW5jZSgpIHtcbiAgICByZXR1cm4gbmV3IENvbnRyb2xDb21tYW5kKENvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLlR1cm5zU2luY2UpO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgUmVhZENvdW50KCkge1xuICAgIHJldHVybiBuZXcgQ29udHJvbENvbW1hbmQoQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuUmVhZENvdW50KTtcbiAgfVxuICBwdWJsaWMgc3RhdGljIFJhbmRvbSgpIHtcbiAgICByZXR1cm4gbmV3IENvbnRyb2xDb21tYW5kKENvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLlJhbmRvbSk7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBTZWVkUmFuZG9tKCkge1xuICAgIHJldHVybiBuZXcgQ29udHJvbENvbW1hbmQoQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuU2VlZFJhbmRvbSk7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBWaXNpdEluZGV4KCkge1xuICAgIHJldHVybiBuZXcgQ29udHJvbENvbW1hbmQoQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuVmlzaXRJbmRleCk7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBTZXF1ZW5jZVNodWZmbGVJbmRleCgpIHtcbiAgICByZXR1cm4gbmV3IENvbnRyb2xDb21tYW5kKENvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLlNlcXVlbmNlU2h1ZmZsZUluZGV4KTtcbiAgfVxuICBwdWJsaWMgc3RhdGljIFN0YXJ0VGhyZWFkKCkge1xuICAgIHJldHVybiBuZXcgQ29udHJvbENvbW1hbmQoQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuU3RhcnRUaHJlYWQpO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgRG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IENvbnRyb2xDb21tYW5kKENvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLkRvbmUpO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgRW5kKCkge1xuICAgIHJldHVybiBuZXcgQ29udHJvbENvbW1hbmQoQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuRW5kKTtcbiAgfVxuICBwdWJsaWMgc3RhdGljIExpc3RGcm9tSW50KCkge1xuICAgIHJldHVybiBuZXcgQ29udHJvbENvbW1hbmQoQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuTGlzdEZyb21JbnQpO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgTGlzdFJhbmdlKCkge1xuICAgIHJldHVybiBuZXcgQ29udHJvbENvbW1hbmQoQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuTGlzdFJhbmdlKTtcbiAgfVxuICBwdWJsaWMgc3RhdGljIExpc3RSYW5kb20oKSB7XG4gICAgcmV0dXJuIG5ldyBDb250cm9sQ29tbWFuZChDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5MaXN0UmFuZG9tKTtcbiAgfVxuICBwdWJsaWMgc3RhdGljIEJlZ2luVGFnKCkge1xuICAgIHJldHVybiBuZXcgQ29udHJvbENvbW1hbmQoQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuQmVnaW5UYWcpO1xuICB9XG4gIHB1YmxpYyBzdGF0aWMgRW5kVGFnKCkge1xuICAgIHJldHVybiBuZXcgQ29udHJvbENvbW1hbmQoQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuRW5kVGFnKTtcbiAgfVxuICBwdWJsaWMgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIFwiQ29udHJvbENvbW1hbmQgXCIgKyB0aGlzLmNvbW1hbmRUeXBlLnRvU3RyaW5nKCk7XG4gIH1cbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDb250cm9sQ29tbWFuZCB7XG4gIGV4cG9ydCBlbnVtIENvbW1hbmRUeXBlIHtcbiAgICBOb3RTZXQgPSAtMSxcbiAgICBFdmFsU3RhcnQsIC8vIDBcbiAgICBFdmFsT3V0cHV0LCAvLyAxXG4gICAgRXZhbEVuZCwgLy8gMlxuICAgIER1cGxpY2F0ZSwgLy8gM1xuICAgIFBvcEV2YWx1YXRlZFZhbHVlLCAvLyA0XG4gICAgUG9wRnVuY3Rpb24sIC8vIDVcbiAgICBQb3BUdW5uZWwsIC8vIDZcbiAgICBCZWdpblN0cmluZywgLy8gN1xuICAgIEVuZFN0cmluZywgLy8gOFxuICAgIE5vT3AsIC8vIDlcbiAgICBDaG9pY2VDb3VudCwgLy8gMTBcbiAgICBUdXJucywgLy8gMTFcbiAgICBUdXJuc1NpbmNlLCAvLyAxMlxuICAgIFJlYWRDb3VudCwgLy8gMTNcbiAgICBSYW5kb20sIC8vIDE0XG4gICAgU2VlZFJhbmRvbSwgLy8gMTVcbiAgICBWaXNpdEluZGV4LCAvLyAxNlxuICAgIFNlcXVlbmNlU2h1ZmZsZUluZGV4LCAvLyAxN1xuICAgIFN0YXJ0VGhyZWFkLCAvLyAxOFxuICAgIERvbmUsIC8vIDE5XG4gICAgRW5kLCAvLyAyMFxuICAgIExpc3RGcm9tSW50LCAvLyAyMVxuICAgIExpc3RSYW5nZSwgLy8gMjJcbiAgICBMaXN0UmFuZG9tLCAvLyAyM1xuICAgIEJlZ2luVGFnLCAvLyAyNFxuICAgIEVuZFRhZywgLy8gMjVcblxuICAgIFRPVEFMX1ZBTFVFUyxcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ29udGFpbmVyIGFzIFJ1bnRpbWVDb250YWluZXIgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL0NvbnRhaW5lclwiO1xuaW1wb3J0IHsgQ29udHJvbENvbW1hbmQgYXMgUnVudGltZUNvbnRyb2xDb21tYW5kIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9Db250cm9sQ29tbWFuZFwiO1xuaW1wb3J0IHsgUGFyc2VkT2JqZWN0IH0gZnJvbSBcIi4uL09iamVjdFwiO1xuaW1wb3J0IHsgSW5rT2JqZWN0IGFzIFJ1bnRpbWVPYmplY3QgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL09iamVjdFwiO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgRXhwcmVzc2lvbiBleHRlbmRzIFBhcnNlZE9iamVjdCB7XG4gIHB1YmxpYyBhYnN0cmFjdCBHZW5lcmF0ZUludG9Db250YWluZXI6IChjb250YWluZXI6IFJ1bnRpbWVDb250YWluZXIpID0+IHZvaWQ7XG5cbiAgcHJpdmF0ZSBfcHJvdG90eXBlUnVudGltZUNvbnN0YW50RXhwcmVzc2lvbjogUnVudGltZUNvbnRhaW5lciB8IG51bGwgPSBudWxsO1xuICBwdWJsaWMgb3V0cHV0V2hlbkNvbXBsZXRlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHVibGljIHJlYWRvbmx5IEdlbmVyYXRlUnVudGltZU9iamVjdCA9ICgpOiBSdW50aW1lT2JqZWN0ID0+IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgUnVudGltZUNvbnRhaW5lcigpO1xuXG4gICAgLy8gVGVsbCBSdW50aW1lIHRvIHN0YXJ0IGV2YWx1YXRpbmcgdGhlIGZvbGxvd2luZyBjb250ZW50IGFzIGFuIGV4cHJlc3Npb25cbiAgICBjb250YWluZXIuQWRkQ29udGVudChSdW50aW1lQ29udHJvbENvbW1hbmQuRXZhbFN0YXJ0KCkpO1xuXG4gICAgdGhpcy5HZW5lcmF0ZUludG9Db250YWluZXIoY29udGFpbmVyKTtcblxuICAgIC8vIFRlbGwgUnVudGltZSB0byBvdXRwdXQgdGhlIHJlc3VsdCBvZiB0aGUgZXhwcmVzc2lvbiBldmFsdWF0aW9uIHRvIHRoZSBvdXRwdXQgc3RyZWFtXG4gICAgaWYgKHRoaXMub3V0cHV0V2hlbkNvbXBsZXRlKSB7XG4gICAgICBjb250YWluZXIuQWRkQ29udGVudChSdW50aW1lQ29udHJvbENvbW1hbmQuRXZhbE91dHB1dCgpKTtcbiAgICB9XG5cbiAgICAvLyBUZWxsIFJ1bnRpbWUgdG8gc3RvcCBldmFsdWF0aW5nIHRoZSBjb250ZW50IGFzIGFuIGV4cHJlc3Npb25cbiAgICBjb250YWluZXIuQWRkQ29udGVudChSdW50aW1lQ29udHJvbENvbW1hbmQuRXZhbEVuZCgpKTtcblxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH07XG5cbiAgLy8gV2hlbiBnZW5lcmF0aW5nIHRoZSB2YWx1ZSBvZiBhIGNvbnN0YW50IGV4cHJlc3Npb24sXG4gIC8vIHdlIGNhbid0IGp1c3Qga2VlcCBnZW5lcmF0aW5nIHRoZSBzYW1lIGNvbnN0YW50IGV4cHJlc3Npb24gaW50b1xuICAvLyBkaWZmZXJlbnQgcGxhY2VzIHdoZXJlIHRoZSBjb25zdGFudCB2YWx1ZSBpcyByZWZlcmVuY2VkLCBzaW5jZSB0aGVuXG4gIC8vIHRoZSBzYW1lIHJ1bnRpbWUgb2JqZWN0cyB3b3VsZCBiZSB1c2VkIGluIG11bHRpcGxlIHBsYWNlcywgd2hpY2hcbiAgLy8gaXMgaW1wb3NzaWJsZSBzaW5jZSBlYWNoIHJ1bnRpbWUgb2JqZWN0IHNob3VsZCBoYXZlIG9uZSBwYXJlbnQuXG4gIC8vIEluc3RlYWQsIHdlIGdlbmVyYXRlIGEgcHJvdG90eXBlIG9mIHRoZSBydW50aW1lIG9iamVjdChzKSwgdGhlblxuICAvLyBjb3B5IHRoZW0gZWFjaCB0aW1lIHRoZXkncmUgdXNlZC5cbiAgcHVibGljIHJlYWRvbmx5IEdlbmVyYXRlQ29uc3RhbnRJbnRvQ29udGFpbmVyID0gKFxuICAgIGNvbnRhaW5lcjogUnVudGltZUNvbnRhaW5lclxuICApOiB2b2lkID0+IHtcbiAgICBpZiAodGhpcy5fcHJvdG90eXBlUnVudGltZUNvbnN0YW50RXhwcmVzc2lvbiA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5fcHJvdG90eXBlUnVudGltZUNvbnN0YW50RXhwcmVzc2lvbiA9IG5ldyBSdW50aW1lQ29udGFpbmVyKCk7XG4gICAgICB0aGlzLkdlbmVyYXRlSW50b0NvbnRhaW5lcih0aGlzLl9wcm90b3R5cGVSdW50aW1lQ29uc3RhbnRFeHByZXNzaW9uKTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHJ1bnRpbWVPYmogb2YgdGhpcy5fcHJvdG90eXBlUnVudGltZUNvbnN0YW50RXhwcmVzc2lvbi5jb250ZW50KSB7XG4gICAgICBjb25zdCBjb3B5ID0gcnVudGltZU9iai5Db3B5KCk7XG4gICAgICBpZiAoY29weSkge1xuICAgICAgICBjb250YWluZXIuQWRkQ29udGVudChjb3B5KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgZ2V0IHR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiRXhwcmVzc2lvblwiO1xuICB9XG5cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICBwdWJsaWMgRXF1YWxzKG9iajogUGFyc2VkT2JqZWN0KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHVibGljIHJlYWRvbmx5IHRvU3RyaW5nID0gKCkgPT4gXCJObyBzdHJpbmcgdmFsdWUgaW4gSmF2YVNjcmlwdC5cIjtcbn1cbiIsImltcG9ydCB7IElua09iamVjdCB9IGZyb20gXCIuL09iamVjdFwiO1xuXG5leHBvcnQgY2xhc3MgVm9pZCBleHRlbmRzIElua09iamVjdCB7XG4gIHB1YmxpYyB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gXCJWb2lkXCI7XG4gIH1cbn1cbiIsImltcG9ydCB7IFZhbHVlLCBWYWx1ZVR5cGUsIEludFZhbHVlLCBMaXN0VmFsdWUsIEJvb2xWYWx1ZSB9IGZyb20gXCIuL1ZhbHVlXCI7XG5pbXBvcnQgeyBTdG9yeUV4Y2VwdGlvbiB9IGZyb20gXCIuL1N0b3J5RXhjZXB0aW9uXCI7XG5pbXBvcnQgeyBWb2lkIH0gZnJvbSBcIi4vVm9pZFwiO1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gXCIuL1BhdGhcIjtcbmltcG9ydCB7IElua0xpc3QsIElua0xpc3RJdGVtIH0gZnJvbSBcIi4vSW5rTGlzdFwiO1xuaW1wb3J0IHsgSW5rT2JqZWN0IH0gZnJvbSBcIi4vT2JqZWN0XCI7XG5pbXBvcnQgeyBhc09yTnVsbCwgYXNPclRocm93cywgYXNCb29sZWFuT3JUaHJvd3MgfSBmcm9tIFwiLi9UeXBlQXNzZXJ0aW9uXCI7XG5pbXBvcnQgeyB0aHJvd051bGxFeGNlcHRpb24gfSBmcm9tIFwiLi9OdWxsRXhjZXB0aW9uXCI7XG5cbnR5cGUgQmluYXJ5T3A8VD4gPSAobGVmdDogVCwgcmlnaHQ6IFQpID0+IGFueTtcbnR5cGUgVW5hcnlPcDxUPiA9ICh2YWw6IFQpID0+IGFueTtcblxuZXhwb3J0IGNsYXNzIE5hdGl2ZUZ1bmN0aW9uQ2FsbCBleHRlbmRzIElua09iamVjdCB7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQWRkOiBzdHJpbmcgPSBcIitcIjtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBTdWJ0cmFjdDogc3RyaW5nID0gXCItXCI7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRGl2aWRlOiBzdHJpbmcgPSBcIi9cIjtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBNdWx0aXBseTogc3RyaW5nID0gXCIqXCI7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTW9kOiBzdHJpbmcgPSBcIiVcIjtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBOZWdhdGU6IHN0cmluZyA9IFwiX1wiO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEVxdWFsOiBzdHJpbmcgPSBcIj09XCI7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgR3JlYXRlcjogc3RyaW5nID0gXCI+XCI7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTGVzczogc3RyaW5nID0gXCI8XCI7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgR3JlYXRlclRoYW5PckVxdWFsczogc3RyaW5nID0gXCI+PVwiO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IExlc3NUaGFuT3JFcXVhbHM6IHN0cmluZyA9IFwiPD1cIjtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBOb3RFcXVhbHM6IHN0cmluZyA9IFwiIT1cIjtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBOb3Q6IHN0cmluZyA9IFwiIVwiO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEFuZDogc3RyaW5nID0gXCImJlwiO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE9yOiBzdHJpbmcgPSBcInx8XCI7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTWluOiBzdHJpbmcgPSBcIk1JTlwiO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE1heDogc3RyaW5nID0gXCJNQVhcIjtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBQb3c6IHN0cmluZyA9IFwiUE9XXCI7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRmxvb3I6IHN0cmluZyA9IFwiRkxPT1JcIjtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBDZWlsaW5nOiBzdHJpbmcgPSBcIkNFSUxJTkdcIjtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBJbnQ6IHN0cmluZyA9IFwiSU5UXCI7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRmxvYXQ6IHN0cmluZyA9IFwiRkxPQVRcIjtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBIYXM6IHN0cmluZyA9IFwiP1wiO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEhhc250OiBzdHJpbmcgPSBcIiE/XCI7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgSW50ZXJzZWN0OiBzdHJpbmcgPSBcIl5cIjtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBMaXN0TWluOiBzdHJpbmcgPSBcIkxJU1RfTUlOXCI7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTGlzdE1heDogc3RyaW5nID0gXCJMSVNUX01BWFwiO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEFsbDogc3RyaW5nID0gXCJMSVNUX0FMTFwiO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IENvdW50OiBzdHJpbmcgPSBcIkxJU1RfQ09VTlRcIjtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBWYWx1ZU9mTGlzdDogc3RyaW5nID0gXCJMSVNUX1ZBTFVFXCI7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgSW52ZXJ0OiBzdHJpbmcgPSBcIkxJU1RfSU5WRVJUXCI7XG5cbiAgcHVibGljIHN0YXRpYyBDYWxsV2l0aE5hbWUoZnVuY3Rpb25OYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gbmV3IE5hdGl2ZUZ1bmN0aW9uQ2FsbChmdW5jdGlvbk5hbWUpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBDYWxsRXhpc3RzV2l0aE5hbWUoZnVuY3Rpb25OYW1lOiBzdHJpbmcpIHtcbiAgICB0aGlzLkdlbmVyYXRlTmF0aXZlRnVuY3Rpb25zSWZOZWNlc3NhcnkoKTtcbiAgICByZXR1cm4gdGhpcy5fbmF0aXZlRnVuY3Rpb25zIS5nZXQoZnVuY3Rpb25OYW1lKTtcbiAgfVxuXG4gIGdldCBuYW1lKCkge1xuICAgIGlmICh0aGlzLl9uYW1lID09PSBudWxsKVxuICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcIk5hdGl2ZUZ1bmN0aW9uQ2FsbC5fbmFtZVwiKTtcbiAgICByZXR1cm4gdGhpcy5fbmFtZTtcbiAgfVxuICBzZXQgbmFtZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5fbmFtZSA9IHZhbHVlO1xuICAgIGlmICghdGhpcy5faXNQcm90b3R5cGUpIHtcbiAgICAgIGlmIChOYXRpdmVGdW5jdGlvbkNhbGwuX25hdGl2ZUZ1bmN0aW9ucyA9PT0gbnVsbClcbiAgICAgICAgdGhyb3dOdWxsRXhjZXB0aW9uKFwiTmF0aXZlRnVuY3Rpb25DYWxsLl9uYXRpdmVGdW5jdGlvbnNcIik7XG4gICAgICBlbHNlXG4gICAgICAgIHRoaXMuX3Byb3RvdHlwZSA9XG4gICAgICAgICAgTmF0aXZlRnVuY3Rpb25DYWxsLl9uYXRpdmVGdW5jdGlvbnMuZ2V0KHRoaXMuX25hbWUpIHx8IG51bGw7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBfbmFtZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgZ2V0IG51bWJlck9mUGFyYW1ldGVycygpIHtcbiAgICBpZiAodGhpcy5fcHJvdG90eXBlKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcHJvdG90eXBlLm51bWJlck9mUGFyYW1ldGVycztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuX251bWJlck9mUGFyYW1ldGVycztcbiAgICB9XG4gIH1cbiAgc2V0IG51bWJlck9mUGFyYW1ldGVycyh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fbnVtYmVyT2ZQYXJhbWV0ZXJzID0gdmFsdWU7XG4gIH1cbiAgcHVibGljIF9udW1iZXJPZlBhcmFtZXRlcnM6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIENhbGwocGFyYW1ldGVyczogSW5rT2JqZWN0W10pOiBJbmtPYmplY3QgfCBudWxsIHtcbiAgICBpZiAodGhpcy5fcHJvdG90eXBlKSB7XG4gICAgICByZXR1cm4gdGhpcy5fcHJvdG90eXBlLkNhbGwocGFyYW1ldGVycyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubnVtYmVyT2ZQYXJhbWV0ZXJzICE9IHBhcmFtZXRlcnMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIG51bWJlciBvZiBwYXJhbWV0ZXJzXCIpO1xuICAgIH1cblxuICAgIGxldCBoYXNMaXN0ID0gZmFsc2U7XG4gICAgZm9yIChsZXQgcCBvZiBwYXJhbWV0ZXJzKSB7XG4gICAgICBpZiAocCBpbnN0YW5jZW9mIFZvaWQpXG4gICAgICAgIHRocm93IG5ldyBTdG9yeUV4Y2VwdGlvbihcbiAgICAgICAgICBcIkF0dGVtcHRpbmcgdG8gcGVyZm9ybSBcIiArXG4gICAgICAgICAgICB0aGlzLm5hbWUgK1xuICAgICAgICAgICAgJyBvbiBhIHZvaWQgdmFsdWUuIERpZCB5b3UgZm9yZ2V0IHRvIFwicmV0dXJuXCIgYSB2YWx1ZSBmcm9tIGEgZnVuY3Rpb24geW91IGNhbGxlZCBoZXJlPydcbiAgICAgICAgKTtcbiAgICAgIGlmIChwIGluc3RhbmNlb2YgTGlzdFZhbHVlKSBoYXNMaXN0ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAocGFyYW1ldGVycy5sZW5ndGggPT0gMiAmJiBoYXNMaXN0KSB7XG4gICAgICByZXR1cm4gdGhpcy5DYWxsQmluYXJ5TGlzdE9wZXJhdGlvbihwYXJhbWV0ZXJzKTtcbiAgICB9XG5cbiAgICBsZXQgY29lcmNlZFBhcmFtcyA9IHRoaXMuQ29lcmNlVmFsdWVzVG9TaW5nbGVUeXBlKHBhcmFtZXRlcnMpO1xuICAgIGxldCBjb2VyY2VkVHlwZSA9IGNvZXJjZWRQYXJhbXNbMF0udmFsdWVUeXBlO1xuXG4gICAgaWYgKGNvZXJjZWRUeXBlID09IFZhbHVlVHlwZS5JbnQpIHtcbiAgICAgIHJldHVybiB0aGlzLkNhbGxUeXBlPG51bWJlcj4oY29lcmNlZFBhcmFtcyk7XG4gICAgfSBlbHNlIGlmIChjb2VyY2VkVHlwZSA9PSBWYWx1ZVR5cGUuRmxvYXQpIHtcbiAgICAgIHJldHVybiB0aGlzLkNhbGxUeXBlPG51bWJlcj4oY29lcmNlZFBhcmFtcyk7XG4gICAgfSBlbHNlIGlmIChjb2VyY2VkVHlwZSA9PSBWYWx1ZVR5cGUuU3RyaW5nKSB7XG4gICAgICByZXR1cm4gdGhpcy5DYWxsVHlwZTxzdHJpbmc+KGNvZXJjZWRQYXJhbXMpO1xuICAgIH0gZWxzZSBpZiAoY29lcmNlZFR5cGUgPT0gVmFsdWVUeXBlLkRpdmVydFRhcmdldCkge1xuICAgICAgcmV0dXJuIHRoaXMuQ2FsbFR5cGU8UGF0aD4oY29lcmNlZFBhcmFtcyk7XG4gICAgfSBlbHNlIGlmIChjb2VyY2VkVHlwZSA9PSBWYWx1ZVR5cGUuTGlzdCkge1xuICAgICAgcmV0dXJuIHRoaXMuQ2FsbFR5cGU8SW5rTGlzdD4oY29lcmNlZFBhcmFtcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwdWJsaWMgQ2FsbFR5cGU8VCBleHRlbmRzIHsgdG9TdHJpbmc6ICgpID0+IHN0cmluZyB9PihcbiAgICBwYXJhbWV0ZXJzT2ZTaW5nbGVUeXBlOiBBcnJheTxWYWx1ZTxUPj5cbiAgKSB7XG4gICAgbGV0IHBhcmFtMSA9IGFzT3JUaHJvd3MocGFyYW1ldGVyc09mU2luZ2xlVHlwZVswXSwgVmFsdWUpO1xuICAgIGxldCB2YWxUeXBlID0gcGFyYW0xLnZhbHVlVHlwZTtcblxuICAgIGxldCB2YWwxID0gcGFyYW0xIGFzIFZhbHVlPFQ+O1xuXG4gICAgbGV0IHBhcmFtQ291bnQgPSBwYXJhbWV0ZXJzT2ZTaW5nbGVUeXBlLmxlbmd0aDtcblxuICAgIGlmIChwYXJhbUNvdW50ID09IDIgfHwgcGFyYW1Db3VudCA9PSAxKSB7XG4gICAgICBpZiAodGhpcy5fb3BlcmF0aW9uRnVuY3MgPT09IG51bGwpXG4gICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJOYXRpdmVGdW5jdGlvbkNhbGwuX29wZXJhdGlvbkZ1bmNzXCIpO1xuICAgICAgbGV0IG9wRm9yVHlwZU9iaiA9IHRoaXMuX29wZXJhdGlvbkZ1bmNzLmdldCh2YWxUeXBlKTtcbiAgICAgIGlmICghb3BGb3JUeXBlT2JqKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IFZhbHVlVHlwZVt2YWxUeXBlXTtcbiAgICAgICAgdGhyb3cgbmV3IFN0b3J5RXhjZXB0aW9uKFxuICAgICAgICAgIFwiQ2Fubm90IHBlcmZvcm0gb3BlcmF0aW9uIFwiICsgdGhpcy5uYW1lICsgXCIgb24gXCIgKyBrZXlcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmFtQ291bnQgPT0gMikge1xuICAgICAgICBsZXQgcGFyYW0yID0gYXNPclRocm93cyhwYXJhbWV0ZXJzT2ZTaW5nbGVUeXBlWzFdLCBWYWx1ZSk7XG5cbiAgICAgICAgbGV0IHZhbDIgPSBwYXJhbTIgYXMgVmFsdWU8VD47XG5cbiAgICAgICAgbGV0IG9wRm9yVHlwZSA9IG9wRm9yVHlwZU9iaiBhcyBCaW5hcnlPcDxUPjtcblxuICAgICAgICBpZiAodmFsMS52YWx1ZSA9PT0gbnVsbCB8fCB2YWwyLnZhbHVlID09PSBudWxsKVxuICAgICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJOYXRpdmVGdW5jdGlvbkNhbGwuQ2FsbCBCaW5hcnlPcCB2YWx1ZXNcIik7XG4gICAgICAgIGxldCByZXN1bHRWYWwgPSBvcEZvclR5cGUodmFsMS52YWx1ZSwgdmFsMi52YWx1ZSk7XG5cbiAgICAgICAgcmV0dXJuIFZhbHVlLkNyZWF0ZShyZXN1bHRWYWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IG9wRm9yVHlwZSA9IG9wRm9yVHlwZU9iaiBhcyBVbmFyeU9wPFQ+O1xuXG4gICAgICAgIGlmICh2YWwxLnZhbHVlID09PSBudWxsKVxuICAgICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJOYXRpdmVGdW5jdGlvbkNhbGwuQ2FsbCBVbmFyeU9wIHZhbHVlXCIpO1xuICAgICAgICBsZXQgcmVzdWx0VmFsID0gb3BGb3JUeXBlKHZhbDEudmFsdWUpO1xuXG4gICAgICAgIC8vIFRoaXMgY29kZSBpcyBkaWZmZXJlbnQgZnJvbSB1cHN0cmVhbS4gU2luY2UgSmF2YVNjcmlwdCB0cmVhdHNcbiAgICAgICAgLy8gaW50ZWdlcnMgYW5kIGZsb2F0cyBhcyB0aGUgc2FtZSBudW1iZXJzLCBpdCdzIGltcG9zc2libGVcbiAgICAgICAgLy8gdG8gZm9yY2UgYW4gbnVtYmVyIHRvIGJlIGVpdGhlciBhbiBpbnRlZ2VyIG9yIGEgZmxvYXQuXG4gICAgICAgIC8vXG4gICAgICAgIC8vIEl0IGNhbiBiZSB1c2VmdWwgdG8gZm9yY2UgYSBzcGVjaWZpYyBudW1iZXIgdHlwZVxuICAgICAgICAvLyAoZXNwZWNpYWxseSBmb3IgZGl2aXNpb25zKSwgc28gdGhlIHJlc3VsdCBvZiBJTlQoKSAmIEZMT0FUKClcbiAgICAgICAgLy8gaXMgY29lcmNlZCB0byB0aGUgdGhlIHByb3BlciB2YWx1ZSB0eXBlLlxuICAgICAgICAvL1xuICAgICAgICAvLyBOb3RlIHRoYXQgd2UgYWxzbyBmb3JjZSBhbGwgb3RoZXIgdW5hcnkgb3BlcmF0aW9uIHRvXG4gICAgICAgIC8vIHJldHVybiB0aGUgc2FtZSB2YWx1ZSB0eXBlLCBhbHRob3VnaCB0aGlzIGlzIG9ubHlcbiAgICAgICAgLy8gbWVhbmluZ2Z1bCBmb3IgbnVtYmVycy4gU2VlIGBWYWx1ZS5DcmVhdGVgLlxuICAgICAgICBpZiAodGhpcy5uYW1lID09PSBOYXRpdmVGdW5jdGlvbkNhbGwuSW50KSB7XG4gICAgICAgICAgcmV0dXJuIFZhbHVlLkNyZWF0ZShyZXN1bHRWYWwsIFZhbHVlVHlwZS5JbnQpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMubmFtZSA9PT0gTmF0aXZlRnVuY3Rpb25DYWxsLkZsb2F0KSB7XG4gICAgICAgICAgcmV0dXJuIFZhbHVlLkNyZWF0ZShyZXN1bHRWYWwsIFZhbHVlVHlwZS5GbG9hdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFZhbHVlLkNyZWF0ZShyZXN1bHRWYWwsIHBhcmFtMS52YWx1ZVR5cGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJVbmV4cGVjdGVkIG51bWJlciBvZiBwYXJhbWV0ZXJzIHRvIE5hdGl2ZUZ1bmN0aW9uQ2FsbDogXCIgK1xuICAgICAgICAgIHBhcmFtZXRlcnNPZlNpbmdsZVR5cGUubGVuZ3RoXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBDYWxsQmluYXJ5TGlzdE9wZXJhdGlvbihwYXJhbWV0ZXJzOiBJbmtPYmplY3RbXSkge1xuICAgIGlmIChcbiAgICAgICh0aGlzLm5hbWUgPT0gXCIrXCIgfHwgdGhpcy5uYW1lID09IFwiLVwiKSAmJlxuICAgICAgcGFyYW1ldGVyc1swXSBpbnN0YW5jZW9mIExpc3RWYWx1ZSAmJlxuICAgICAgcGFyYW1ldGVyc1sxXSBpbnN0YW5jZW9mIEludFZhbHVlXG4gICAgKVxuICAgICAgcmV0dXJuIHRoaXMuQ2FsbExpc3RJbmNyZW1lbnRPcGVyYXRpb24ocGFyYW1ldGVycyk7XG5cbiAgICBsZXQgdjEgPSBhc09yVGhyb3dzKHBhcmFtZXRlcnNbMF0sIFZhbHVlKTtcbiAgICBsZXQgdjIgPSBhc09yVGhyb3dzKHBhcmFtZXRlcnNbMV0sIFZhbHVlKTtcblxuICAgIGlmIChcbiAgICAgICh0aGlzLm5hbWUgPT0gXCImJlwiIHx8IHRoaXMubmFtZSA9PSBcInx8XCIpICYmXG4gICAgICAodjEudmFsdWVUeXBlICE9IFZhbHVlVHlwZS5MaXN0IHx8IHYyLnZhbHVlVHlwZSAhPSBWYWx1ZVR5cGUuTGlzdClcbiAgICApIHtcbiAgICAgIGlmICh0aGlzLl9vcGVyYXRpb25GdW5jcyA9PT0gbnVsbClcbiAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcIk5hdGl2ZUZ1bmN0aW9uQ2FsbC5fb3BlcmF0aW9uRnVuY3NcIik7XG4gICAgICBsZXQgb3AgPSB0aGlzLl9vcGVyYXRpb25GdW5jcy5nZXQoVmFsdWVUeXBlLkludCkgYXMgQmluYXJ5T3A8bnVtYmVyPjtcbiAgICAgIGlmIChvcCA9PT0gbnVsbClcbiAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcbiAgICAgICAgICBcIk5hdGl2ZUZ1bmN0aW9uQ2FsbC5DYWxsQmluYXJ5TGlzdE9wZXJhdGlvbiBvcFwiXG4gICAgICAgICk7XG4gICAgICBsZXQgcmVzdWx0ID0gYXNCb29sZWFuT3JUaHJvd3MoXG4gICAgICAgIG9wKHYxLmlzVHJ1dGh5ID8gMSA6IDAsIHYyLmlzVHJ1dGh5ID8gMSA6IDApXG4gICAgICApO1xuICAgICAgcmV0dXJuIG5ldyBCb29sVmFsdWUocmVzdWx0KTtcbiAgICB9XG5cbiAgICBpZiAodjEudmFsdWVUeXBlID09IFZhbHVlVHlwZS5MaXN0ICYmIHYyLnZhbHVlVHlwZSA9PSBWYWx1ZVR5cGUuTGlzdClcbiAgICAgIHJldHVybiB0aGlzLkNhbGxUeXBlPElua0xpc3Q+KFt2MSwgdjJdKTtcblxuICAgIHRocm93IG5ldyBTdG9yeUV4Y2VwdGlvbihcbiAgICAgIFwiQ2FuIG5vdCBjYWxsIHVzZSBcIiArXG4gICAgICAgIHRoaXMubmFtZSArXG4gICAgICAgIFwiIG9wZXJhdGlvbiBvbiBcIiArXG4gICAgICAgIFZhbHVlVHlwZVt2MS52YWx1ZVR5cGVdICtcbiAgICAgICAgXCIgYW5kIFwiICtcbiAgICAgICAgVmFsdWVUeXBlW3YyLnZhbHVlVHlwZV1cbiAgICApO1xuICB9XG5cbiAgcHVibGljIENhbGxMaXN0SW5jcmVtZW50T3BlcmF0aW9uKGxpc3RJbnRQYXJhbXM6IElua09iamVjdFtdKSB7XG4gICAgbGV0IGxpc3RWYWwgPSBhc09yVGhyb3dzKGxpc3RJbnRQYXJhbXNbMF0sIExpc3RWYWx1ZSk7XG4gICAgbGV0IGludFZhbCA9IGFzT3JUaHJvd3MobGlzdEludFBhcmFtc1sxXSwgSW50VmFsdWUpO1xuXG4gICAgbGV0IHJlc3VsdElua0xpc3QgPSBuZXcgSW5rTGlzdCgpO1xuXG4gICAgaWYgKGxpc3RWYWwudmFsdWUgPT09IG51bGwpXG4gICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFxuICAgICAgICBcIk5hdGl2ZUZ1bmN0aW9uQ2FsbC5DYWxsTGlzdEluY3JlbWVudE9wZXJhdGlvbiBsaXN0VmFsLnZhbHVlXCJcbiAgICAgICk7XG4gICAgZm9yIChsZXQgW2xpc3RJdGVtS2V5LCBsaXN0SXRlbVZhbHVlXSBvZiBsaXN0VmFsLnZhbHVlKSB7XG4gICAgICBsZXQgbGlzdEl0ZW0gPSBJbmtMaXN0SXRlbS5mcm9tU2VyaWFsaXplZEtleShsaXN0SXRlbUtleSk7XG5cbiAgICAgIGlmICh0aGlzLl9vcGVyYXRpb25GdW5jcyA9PT0gbnVsbClcbiAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcIk5hdGl2ZUZ1bmN0aW9uQ2FsbC5fb3BlcmF0aW9uRnVuY3NcIik7XG4gICAgICBsZXQgaW50T3AgPSB0aGlzLl9vcGVyYXRpb25GdW5jcy5nZXQoVmFsdWVUeXBlLkludCkgYXMgQmluYXJ5T3A8bnVtYmVyPjtcblxuICAgICAgaWYgKGludFZhbC52YWx1ZSA9PT0gbnVsbClcbiAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcbiAgICAgICAgICBcIk5hdGl2ZUZ1bmN0aW9uQ2FsbC5DYWxsTGlzdEluY3JlbWVudE9wZXJhdGlvbiBpbnRWYWwudmFsdWVcIlxuICAgICAgICApO1xuICAgICAgbGV0IHRhcmdldEludCA9IGludE9wKGxpc3RJdGVtVmFsdWUsIGludFZhbC52YWx1ZSk7XG5cbiAgICAgIGxldCBpdGVtT3JpZ2luID0gbnVsbDtcbiAgICAgIGlmIChsaXN0VmFsLnZhbHVlLm9yaWdpbnMgPT09IG51bGwpXG4gICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXG4gICAgICAgICAgXCJOYXRpdmVGdW5jdGlvbkNhbGwuQ2FsbExpc3RJbmNyZW1lbnRPcGVyYXRpb24gbGlzdFZhbC52YWx1ZS5vcmlnaW5zXCJcbiAgICAgICAgKTtcbiAgICAgIGZvciAobGV0IG9yaWdpbiBvZiBsaXN0VmFsLnZhbHVlLm9yaWdpbnMpIHtcbiAgICAgICAgaWYgKG9yaWdpbi5uYW1lID09IGxpc3RJdGVtLm9yaWdpbk5hbWUpIHtcbiAgICAgICAgICBpdGVtT3JpZ2luID0gb3JpZ2luO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaXRlbU9yaWdpbiAhPSBudWxsKSB7XG4gICAgICAgIGxldCBpbmNyZW1lbnRlZEl0ZW0gPSBpdGVtT3JpZ2luLlRyeUdldEl0ZW1XaXRoVmFsdWUoXG4gICAgICAgICAgdGFyZ2V0SW50LFxuICAgICAgICAgIElua0xpc3RJdGVtLk51bGxcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKGluY3JlbWVudGVkSXRlbS5leGlzdHMpXG4gICAgICAgICAgcmVzdWx0SW5rTGlzdC5BZGQoaW5jcmVtZW50ZWRJdGVtLnJlc3VsdCwgdGFyZ2V0SW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IExpc3RWYWx1ZShyZXN1bHRJbmtMaXN0KTtcbiAgfVxuXG4gIHB1YmxpYyBDb2VyY2VWYWx1ZXNUb1NpbmdsZVR5cGUocGFyYW1ldGVyc0luOiBJbmtPYmplY3RbXSkge1xuICAgIGxldCB2YWxUeXBlID0gVmFsdWVUeXBlLkludDtcblxuICAgIGxldCBzcGVjaWFsQ2FzZUxpc3Q6IG51bGwgfCBMaXN0VmFsdWUgPSBudWxsO1xuXG4gICAgZm9yIChsZXQgb2JqIG9mIHBhcmFtZXRlcnNJbikge1xuICAgICAgbGV0IHZhbCA9IGFzT3JUaHJvd3Mob2JqLCBWYWx1ZSk7XG4gICAgICBpZiAodmFsLnZhbHVlVHlwZSA+IHZhbFR5cGUpIHtcbiAgICAgICAgdmFsVHlwZSA9IHZhbC52YWx1ZVR5cGU7XG4gICAgICB9XG5cbiAgICAgIGlmICh2YWwudmFsdWVUeXBlID09IFZhbHVlVHlwZS5MaXN0KSB7XG4gICAgICAgIHNwZWNpYWxDYXNlTGlzdCA9IGFzT3JOdWxsKHZhbCwgTGlzdFZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgcGFyYW1ldGVyc091dCA9IFtdO1xuXG4gICAgaWYgKFZhbHVlVHlwZVt2YWxUeXBlXSA9PSBWYWx1ZVR5cGVbVmFsdWVUeXBlLkxpc3RdKSB7XG4gICAgICBmb3IgKGxldCBpbmtPYmplY3RWYWwgb2YgcGFyYW1ldGVyc0luKSB7XG4gICAgICAgIGxldCB2YWwgPSBhc09yVGhyb3dzKGlua09iamVjdFZhbCwgVmFsdWUpO1xuICAgICAgICBpZiAodmFsLnZhbHVlVHlwZSA9PSBWYWx1ZVR5cGUuTGlzdCkge1xuICAgICAgICAgIHBhcmFtZXRlcnNPdXQucHVzaCh2YWwpO1xuICAgICAgICB9IGVsc2UgaWYgKHZhbC52YWx1ZVR5cGUgPT0gVmFsdWVUeXBlLkludCkge1xuICAgICAgICAgIGxldCBpbnRWYWwgPSBwYXJzZUludCh2YWwudmFsdWVPYmplY3QpO1xuXG4gICAgICAgICAgc3BlY2lhbENhc2VMaXN0ID0gYXNPclRocm93cyhzcGVjaWFsQ2FzZUxpc3QsIExpc3RWYWx1ZSk7XG4gICAgICAgICAgaWYgKHNwZWNpYWxDYXNlTGlzdC52YWx1ZSA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXG4gICAgICAgICAgICAgIFwiTmF0aXZlRnVuY3Rpb25DYWxsLkNvZXJjZVZhbHVlc1RvU2luZ2xlVHlwZSBzcGVjaWFsQ2FzZUxpc3QudmFsdWVcIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBsZXQgbGlzdCA9IHNwZWNpYWxDYXNlTGlzdC52YWx1ZS5vcmlnaW5PZk1heEl0ZW07XG5cbiAgICAgICAgICBpZiAobGlzdCA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXG4gICAgICAgICAgICAgIFwiTmF0aXZlRnVuY3Rpb25DYWxsLkNvZXJjZVZhbHVlc1RvU2luZ2xlVHlwZSBsaXN0XCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgbGV0IGl0ZW0gPSBsaXN0LlRyeUdldEl0ZW1XaXRoVmFsdWUoaW50VmFsLCBJbmtMaXN0SXRlbS5OdWxsKTtcbiAgICAgICAgICBpZiAoaXRlbS5leGlzdHMpIHtcbiAgICAgICAgICAgIGxldCBjYXN0ZWRWYWx1ZSA9IG5ldyBMaXN0VmFsdWUoaXRlbS5yZXN1bHQsIGludFZhbCk7XG4gICAgICAgICAgICBwYXJhbWV0ZXJzT3V0LnB1c2goY2FzdGVkVmFsdWUpO1xuICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgdGhyb3cgbmV3IFN0b3J5RXhjZXB0aW9uKFxuICAgICAgICAgICAgICBcIkNvdWxkIG5vdCBmaW5kIExpc3QgaXRlbSB3aXRoIHRoZSB2YWx1ZSBcIiArXG4gICAgICAgICAgICAgICAgaW50VmFsICtcbiAgICAgICAgICAgICAgICBcIiBpbiBcIiArXG4gICAgICAgICAgICAgICAgbGlzdC5uYW1lXG4gICAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGtleSA9IFZhbHVlVHlwZVt2YWwudmFsdWVUeXBlXTtcbiAgICAgICAgICB0aHJvdyBuZXcgU3RvcnlFeGNlcHRpb24oXG4gICAgICAgICAgICBcIkNhbm5vdCBtaXggTGlzdHMgYW5kIFwiICsga2V5ICsgXCIgdmFsdWVzIGluIHRoaXMgb3BlcmF0aW9uXCJcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGlua09iamVjdFZhbCBvZiBwYXJhbWV0ZXJzSW4pIHtcbiAgICAgICAgbGV0IHZhbCA9IGFzT3JUaHJvd3MoaW5rT2JqZWN0VmFsLCBWYWx1ZSk7XG4gICAgICAgIGxldCBjYXN0ZWRWYWx1ZSA9IHZhbC5DYXN0KHZhbFR5cGUpO1xuICAgICAgICBwYXJhbWV0ZXJzT3V0LnB1c2goY2FzdGVkVmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwYXJhbWV0ZXJzT3V0O1xuICB9XG5cbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nKTtcbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBudW1iZXJPZlBhcmFtZXRlcnM6IG51bWJlcik7XG4gIGNvbnN0cnVjdG9yKCk7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgTmF0aXZlRnVuY3Rpb25DYWxsLkdlbmVyYXRlTmF0aXZlRnVuY3Rpb25zSWZOZWNlc3NhcnkoKTtcbiAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGxldCBuYW1lID0gYXJndW1lbnRzWzBdO1xuICAgICAgTmF0aXZlRnVuY3Rpb25DYWxsLkdlbmVyYXRlTmF0aXZlRnVuY3Rpb25zSWZOZWNlc3NhcnkoKTtcbiAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgICBsZXQgbmFtZSA9IGFyZ3VtZW50c1swXTtcbiAgICAgIGxldCBudW1iZXJPZlBhcmFtZXRlcnMgPSBhcmd1bWVudHNbMV07XG5cbiAgICAgIHRoaXMuX2lzUHJvdG90eXBlID0gdHJ1ZTtcbiAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICB0aGlzLm51bWJlck9mUGFyYW1ldGVycyA9IG51bWJlck9mUGFyYW1ldGVycztcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIElkZW50aXR5PFQ+KHQ6IFQpOiBhbnkge1xuICAgIHJldHVybiB0O1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBHZW5lcmF0ZU5hdGl2ZUZ1bmN0aW9uc0lmTmVjZXNzYXJ5KCkge1xuICAgIGlmICh0aGlzLl9uYXRpdmVGdW5jdGlvbnMgPT0gbnVsbCkge1xuICAgICAgdGhpcy5fbmF0aXZlRnVuY3Rpb25zID0gbmV3IE1hcCgpO1xuXG4gICAgICAvLyBJbnQgb3BlcmF0aW9uc1xuICAgICAgdGhpcy5BZGRJbnRCaW5hcnlPcCh0aGlzLkFkZCwgKHgsIHkpID0+IHggKyB5KTtcbiAgICAgIHRoaXMuQWRkSW50QmluYXJ5T3AodGhpcy5TdWJ0cmFjdCwgKHgsIHkpID0+IHggLSB5KTtcbiAgICAgIHRoaXMuQWRkSW50QmluYXJ5T3AodGhpcy5NdWx0aXBseSwgKHgsIHkpID0+IHggKiB5KTtcbiAgICAgIHRoaXMuQWRkSW50QmluYXJ5T3AodGhpcy5EaXZpZGUsICh4LCB5KSA9PiBNYXRoLmZsb29yKHggLyB5KSk7XG4gICAgICB0aGlzLkFkZEludEJpbmFyeU9wKHRoaXMuTW9kLCAoeCwgeSkgPT4geCAlIHkpO1xuICAgICAgdGhpcy5BZGRJbnRVbmFyeU9wKHRoaXMuTmVnYXRlLCAoeCkgPT4gLXgpO1xuXG4gICAgICB0aGlzLkFkZEludEJpbmFyeU9wKHRoaXMuRXF1YWwsICh4LCB5KSA9PiB4ID09IHkpO1xuICAgICAgdGhpcy5BZGRJbnRCaW5hcnlPcCh0aGlzLkdyZWF0ZXIsICh4LCB5KSA9PiB4ID4geSk7XG4gICAgICB0aGlzLkFkZEludEJpbmFyeU9wKHRoaXMuTGVzcywgKHgsIHkpID0+IHggPCB5KTtcbiAgICAgIHRoaXMuQWRkSW50QmluYXJ5T3AodGhpcy5HcmVhdGVyVGhhbk9yRXF1YWxzLCAoeCwgeSkgPT4geCA+PSB5KTtcbiAgICAgIHRoaXMuQWRkSW50QmluYXJ5T3AodGhpcy5MZXNzVGhhbk9yRXF1YWxzLCAoeCwgeSkgPT4geCA8PSB5KTtcbiAgICAgIHRoaXMuQWRkSW50QmluYXJ5T3AodGhpcy5Ob3RFcXVhbHMsICh4LCB5KSA9PiB4ICE9IHkpO1xuICAgICAgdGhpcy5BZGRJbnRVbmFyeU9wKHRoaXMuTm90LCAoeCkgPT4geCA9PSAwKTtcblxuICAgICAgdGhpcy5BZGRJbnRCaW5hcnlPcCh0aGlzLkFuZCwgKHgsIHkpID0+IHggIT0gMCAmJiB5ICE9IDApO1xuICAgICAgdGhpcy5BZGRJbnRCaW5hcnlPcCh0aGlzLk9yLCAoeCwgeSkgPT4geCAhPSAwIHx8IHkgIT0gMCk7XG5cbiAgICAgIHRoaXMuQWRkSW50QmluYXJ5T3AodGhpcy5NYXgsICh4LCB5KSA9PiBNYXRoLm1heCh4LCB5KSk7XG4gICAgICB0aGlzLkFkZEludEJpbmFyeU9wKHRoaXMuTWluLCAoeCwgeSkgPT4gTWF0aC5taW4oeCwgeSkpO1xuXG4gICAgICB0aGlzLkFkZEludEJpbmFyeU9wKHRoaXMuUG93LCAoeCwgeSkgPT4gTWF0aC5wb3coeCwgeSkpO1xuICAgICAgdGhpcy5BZGRJbnRVbmFyeU9wKHRoaXMuRmxvb3IsIE5hdGl2ZUZ1bmN0aW9uQ2FsbC5JZGVudGl0eSk7XG4gICAgICB0aGlzLkFkZEludFVuYXJ5T3AodGhpcy5DZWlsaW5nLCBOYXRpdmVGdW5jdGlvbkNhbGwuSWRlbnRpdHkpO1xuICAgICAgdGhpcy5BZGRJbnRVbmFyeU9wKHRoaXMuSW50LCBOYXRpdmVGdW5jdGlvbkNhbGwuSWRlbnRpdHkpO1xuICAgICAgdGhpcy5BZGRJbnRVbmFyeU9wKHRoaXMuRmxvYXQsICh4KSA9PiB4KTtcblxuICAgICAgLy8gRmxvYXQgb3BlcmF0aW9uc1xuICAgICAgdGhpcy5BZGRGbG9hdEJpbmFyeU9wKHRoaXMuQWRkLCAoeCwgeSkgPT4geCArIHkpO1xuICAgICAgdGhpcy5BZGRGbG9hdEJpbmFyeU9wKHRoaXMuU3VidHJhY3QsICh4LCB5KSA9PiB4IC0geSk7XG4gICAgICB0aGlzLkFkZEZsb2F0QmluYXJ5T3AodGhpcy5NdWx0aXBseSwgKHgsIHkpID0+IHggKiB5KTtcbiAgICAgIHRoaXMuQWRkRmxvYXRCaW5hcnlPcCh0aGlzLkRpdmlkZSwgKHgsIHkpID0+IHggLyB5KTtcbiAgICAgIHRoaXMuQWRkRmxvYXRCaW5hcnlPcCh0aGlzLk1vZCwgKHgsIHkpID0+IHggJSB5KTtcbiAgICAgIHRoaXMuQWRkRmxvYXRVbmFyeU9wKHRoaXMuTmVnYXRlLCAoeCkgPT4gLXgpO1xuXG4gICAgICB0aGlzLkFkZEZsb2F0QmluYXJ5T3AodGhpcy5FcXVhbCwgKHgsIHkpID0+IHggPT0geSk7XG4gICAgICB0aGlzLkFkZEZsb2F0QmluYXJ5T3AodGhpcy5HcmVhdGVyLCAoeCwgeSkgPT4geCA+IHkpO1xuICAgICAgdGhpcy5BZGRGbG9hdEJpbmFyeU9wKHRoaXMuTGVzcywgKHgsIHkpID0+IHggPCB5KTtcbiAgICAgIHRoaXMuQWRkRmxvYXRCaW5hcnlPcCh0aGlzLkdyZWF0ZXJUaGFuT3JFcXVhbHMsICh4LCB5KSA9PiB4ID49IHkpO1xuICAgICAgdGhpcy5BZGRGbG9hdEJpbmFyeU9wKHRoaXMuTGVzc1RoYW5PckVxdWFscywgKHgsIHkpID0+IHggPD0geSk7XG4gICAgICB0aGlzLkFkZEZsb2F0QmluYXJ5T3AodGhpcy5Ob3RFcXVhbHMsICh4LCB5KSA9PiB4ICE9IHkpO1xuICAgICAgdGhpcy5BZGRGbG9hdFVuYXJ5T3AodGhpcy5Ob3QsICh4KSA9PiB4ID09IDAuMCk7XG5cbiAgICAgIHRoaXMuQWRkRmxvYXRCaW5hcnlPcCh0aGlzLkFuZCwgKHgsIHkpID0+IHggIT0gMC4wICYmIHkgIT0gMC4wKTtcbiAgICAgIHRoaXMuQWRkRmxvYXRCaW5hcnlPcCh0aGlzLk9yLCAoeCwgeSkgPT4geCAhPSAwLjAgfHwgeSAhPSAwLjApO1xuXG4gICAgICB0aGlzLkFkZEZsb2F0QmluYXJ5T3AodGhpcy5NYXgsICh4LCB5KSA9PiBNYXRoLm1heCh4LCB5KSk7XG4gICAgICB0aGlzLkFkZEZsb2F0QmluYXJ5T3AodGhpcy5NaW4sICh4LCB5KSA9PiBNYXRoLm1pbih4LCB5KSk7XG5cbiAgICAgIHRoaXMuQWRkRmxvYXRCaW5hcnlPcCh0aGlzLlBvdywgKHgsIHkpID0+IE1hdGgucG93KHgsIHkpKTtcbiAgICAgIHRoaXMuQWRkRmxvYXRVbmFyeU9wKHRoaXMuRmxvb3IsICh4KSA9PiBNYXRoLmZsb29yKHgpKTtcbiAgICAgIHRoaXMuQWRkRmxvYXRVbmFyeU9wKHRoaXMuQ2VpbGluZywgKHgpID0+IE1hdGguY2VpbCh4KSk7XG4gICAgICB0aGlzLkFkZEZsb2F0VW5hcnlPcCh0aGlzLkludCwgKHgpID0+IE1hdGguZmxvb3IoeCkpO1xuICAgICAgdGhpcy5BZGRGbG9hdFVuYXJ5T3AodGhpcy5GbG9hdCwgTmF0aXZlRnVuY3Rpb25DYWxsLklkZW50aXR5KTtcblxuICAgICAgLy8gU3RyaW5nIG9wZXJhdGlvbnNcbiAgICAgIHRoaXMuQWRkU3RyaW5nQmluYXJ5T3AodGhpcy5BZGQsICh4LCB5KSA9PiB4ICsgeSk7IC8vIGNvbmNhdFxuICAgICAgdGhpcy5BZGRTdHJpbmdCaW5hcnlPcCh0aGlzLkVxdWFsLCAoeCwgeSkgPT4geCA9PT0geSk7XG4gICAgICB0aGlzLkFkZFN0cmluZ0JpbmFyeU9wKHRoaXMuTm90RXF1YWxzLCAoeCwgeSkgPT4gISh4ID09PSB5KSk7XG4gICAgICB0aGlzLkFkZFN0cmluZ0JpbmFyeU9wKHRoaXMuSGFzLCAoeCwgeSkgPT4geC5pbmNsdWRlcyh5KSk7XG4gICAgICB0aGlzLkFkZFN0cmluZ0JpbmFyeU9wKHRoaXMuSGFzbnQsICh4LCB5KSA9PiAheC5pbmNsdWRlcyh5KSk7XG5cbiAgICAgIHRoaXMuQWRkTGlzdEJpbmFyeU9wKHRoaXMuQWRkLCAoeCwgeSkgPT4geC5Vbmlvbih5KSk7XG4gICAgICB0aGlzLkFkZExpc3RCaW5hcnlPcCh0aGlzLlN1YnRyYWN0LCAoeCwgeSkgPT4geC5XaXRob3V0KHkpKTtcbiAgICAgIHRoaXMuQWRkTGlzdEJpbmFyeU9wKHRoaXMuSGFzLCAoeCwgeSkgPT4geC5Db250YWlucyh5KSk7XG4gICAgICB0aGlzLkFkZExpc3RCaW5hcnlPcCh0aGlzLkhhc250LCAoeCwgeSkgPT4gIXguQ29udGFpbnMoeSkpO1xuICAgICAgdGhpcy5BZGRMaXN0QmluYXJ5T3AodGhpcy5JbnRlcnNlY3QsICh4LCB5KSA9PiB4LkludGVyc2VjdCh5KSk7XG5cbiAgICAgIHRoaXMuQWRkTGlzdEJpbmFyeU9wKHRoaXMuRXF1YWwsICh4LCB5KSA9PiB4LkVxdWFscyh5KSk7XG4gICAgICB0aGlzLkFkZExpc3RCaW5hcnlPcCh0aGlzLkdyZWF0ZXIsICh4LCB5KSA9PiB4LkdyZWF0ZXJUaGFuKHkpKTtcbiAgICAgIHRoaXMuQWRkTGlzdEJpbmFyeU9wKHRoaXMuTGVzcywgKHgsIHkpID0+IHguTGVzc1RoYW4oeSkpO1xuICAgICAgdGhpcy5BZGRMaXN0QmluYXJ5T3AodGhpcy5HcmVhdGVyVGhhbk9yRXF1YWxzLCAoeCwgeSkgPT5cbiAgICAgICAgeC5HcmVhdGVyVGhhbk9yRXF1YWxzKHkpXG4gICAgICApO1xuICAgICAgdGhpcy5BZGRMaXN0QmluYXJ5T3AodGhpcy5MZXNzVGhhbk9yRXF1YWxzLCAoeCwgeSkgPT5cbiAgICAgICAgeC5MZXNzVGhhbk9yRXF1YWxzKHkpXG4gICAgICApO1xuICAgICAgdGhpcy5BZGRMaXN0QmluYXJ5T3AodGhpcy5Ob3RFcXVhbHMsICh4LCB5KSA9PiAheC5FcXVhbHMoeSkpO1xuXG4gICAgICB0aGlzLkFkZExpc3RCaW5hcnlPcCh0aGlzLkFuZCwgKHgsIHkpID0+IHguQ291bnQgPiAwICYmIHkuQ291bnQgPiAwKTtcbiAgICAgIHRoaXMuQWRkTGlzdEJpbmFyeU9wKHRoaXMuT3IsICh4LCB5KSA9PiB4LkNvdW50ID4gMCB8fCB5LkNvdW50ID4gMCk7XG5cbiAgICAgIHRoaXMuQWRkTGlzdFVuYXJ5T3AodGhpcy5Ob3QsICh4KSA9PiAoeC5Db3VudCA9PSAwID8gMSA6IDApKTtcblxuICAgICAgdGhpcy5BZGRMaXN0VW5hcnlPcCh0aGlzLkludmVydCwgKHgpID0+IHguaW52ZXJzZSk7XG4gICAgICB0aGlzLkFkZExpc3RVbmFyeU9wKHRoaXMuQWxsLCAoeCkgPT4geC5hbGwpO1xuICAgICAgdGhpcy5BZGRMaXN0VW5hcnlPcCh0aGlzLkxpc3RNaW4sICh4KSA9PiB4Lk1pbkFzTGlzdCgpKTtcbiAgICAgIHRoaXMuQWRkTGlzdFVuYXJ5T3AodGhpcy5MaXN0TWF4LCAoeCkgPT4geC5NYXhBc0xpc3QoKSk7XG4gICAgICB0aGlzLkFkZExpc3RVbmFyeU9wKHRoaXMuQ291bnQsICh4KSA9PiB4LkNvdW50KTtcbiAgICAgIHRoaXMuQWRkTGlzdFVuYXJ5T3AodGhpcy5WYWx1ZU9mTGlzdCwgKHgpID0+IHgubWF4SXRlbS5WYWx1ZSk7XG5cbiAgICAgIGxldCBkaXZlcnRUYXJnZXRzRXF1YWwgPSAoZDE6IFBhdGgsIGQyOiBQYXRoKSA9PiBkMS5FcXVhbHMoZDIpO1xuICAgICAgbGV0IGRpdmVydFRhcmdldHNOb3RFcXVhbCA9IChkMTogUGF0aCwgZDI6IFBhdGgpID0+ICFkMS5FcXVhbHMoZDIpO1xuICAgICAgdGhpcy5BZGRPcFRvTmF0aXZlRnVuYyhcbiAgICAgICAgdGhpcy5FcXVhbCxcbiAgICAgICAgMixcbiAgICAgICAgVmFsdWVUeXBlLkRpdmVydFRhcmdldCxcbiAgICAgICAgZGl2ZXJ0VGFyZ2V0c0VxdWFsXG4gICAgICApO1xuICAgICAgdGhpcy5BZGRPcFRvTmF0aXZlRnVuYyhcbiAgICAgICAgdGhpcy5Ob3RFcXVhbHMsXG4gICAgICAgIDIsXG4gICAgICAgIFZhbHVlVHlwZS5EaXZlcnRUYXJnZXQsXG4gICAgICAgIGRpdmVydFRhcmdldHNOb3RFcXVhbFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgQWRkT3BGdW5jRm9yVHlwZShcbiAgICB2YWxUeXBlOiBWYWx1ZVR5cGUsXG4gICAgb3A6IFVuYXJ5T3A8bnVtYmVyIHwgSW5rTGlzdD4gfCBCaW5hcnlPcDxudW1iZXIgfCBzdHJpbmcgfCBJbmtMaXN0IHwgUGF0aD5cbiAgKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX29wZXJhdGlvbkZ1bmNzID09IG51bGwpIHtcbiAgICAgIHRoaXMuX29wZXJhdGlvbkZ1bmNzID0gbmV3IE1hcCgpO1xuICAgIH1cblxuICAgIHRoaXMuX29wZXJhdGlvbkZ1bmNzLnNldCh2YWxUeXBlLCBvcCk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIEFkZE9wVG9OYXRpdmVGdW5jKFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBhcmdzOiBudW1iZXIsXG4gICAgdmFsVHlwZTogVmFsdWVUeXBlLFxuICAgIG9wOiBVbmFyeU9wPGFueT4gfCBCaW5hcnlPcDxhbnk+XG4gICk6IHZvaWQge1xuICAgIGlmICh0aGlzLl9uYXRpdmVGdW5jdGlvbnMgPT09IG51bGwpXG4gICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwiTmF0aXZlRnVuY3Rpb25DYWxsLl9uYXRpdmVGdW5jdGlvbnNcIik7XG4gICAgbGV0IG5hdGl2ZUZ1bmMgPSB0aGlzLl9uYXRpdmVGdW5jdGlvbnMuZ2V0KG5hbWUpO1xuICAgIGlmICghbmF0aXZlRnVuYykge1xuICAgICAgbmF0aXZlRnVuYyA9IG5ldyBOYXRpdmVGdW5jdGlvbkNhbGwobmFtZSwgYXJncyk7XG4gICAgICB0aGlzLl9uYXRpdmVGdW5jdGlvbnMuc2V0KG5hbWUsIG5hdGl2ZUZ1bmMpO1xuICAgIH1cblxuICAgIG5hdGl2ZUZ1bmMuQWRkT3BGdW5jRm9yVHlwZSh2YWxUeXBlLCBvcCk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIEFkZEludEJpbmFyeU9wKG5hbWU6IHN0cmluZywgb3A6IEJpbmFyeU9wPG51bWJlcj4pIHtcbiAgICB0aGlzLkFkZE9wVG9OYXRpdmVGdW5jKG5hbWUsIDIsIFZhbHVlVHlwZS5JbnQsIG9wKTtcbiAgfVxuICBwdWJsaWMgc3RhdGljIEFkZEludFVuYXJ5T3AobmFtZTogc3RyaW5nLCBvcDogVW5hcnlPcDxudW1iZXI+KSB7XG4gICAgdGhpcy5BZGRPcFRvTmF0aXZlRnVuYyhuYW1lLCAxLCBWYWx1ZVR5cGUuSW50LCBvcCk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIEFkZEZsb2F0QmluYXJ5T3AobmFtZTogc3RyaW5nLCBvcDogQmluYXJ5T3A8bnVtYmVyPikge1xuICAgIHRoaXMuQWRkT3BUb05hdGl2ZUZ1bmMobmFtZSwgMiwgVmFsdWVUeXBlLkZsb2F0LCBvcCk7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBBZGRGbG9hdFVuYXJ5T3AobmFtZTogc3RyaW5nLCBvcDogVW5hcnlPcDxudW1iZXI+KSB7XG4gICAgdGhpcy5BZGRPcFRvTmF0aXZlRnVuYyhuYW1lLCAxLCBWYWx1ZVR5cGUuRmxvYXQsIG9wKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgQWRkU3RyaW5nQmluYXJ5T3AobmFtZTogc3RyaW5nLCBvcDogQmluYXJ5T3A8c3RyaW5nPikge1xuICAgIHRoaXMuQWRkT3BUb05hdGl2ZUZ1bmMobmFtZSwgMiwgVmFsdWVUeXBlLlN0cmluZywgb3ApO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBBZGRMaXN0QmluYXJ5T3AobmFtZTogc3RyaW5nLCBvcDogQmluYXJ5T3A8SW5rTGlzdD4pIHtcbiAgICB0aGlzLkFkZE9wVG9OYXRpdmVGdW5jKG5hbWUsIDIsIFZhbHVlVHlwZS5MaXN0LCBvcCk7XG4gIH1cbiAgcHVibGljIHN0YXRpYyBBZGRMaXN0VW5hcnlPcChuYW1lOiBzdHJpbmcsIG9wOiBVbmFyeU9wPElua0xpc3Q+KSB7XG4gICAgdGhpcy5BZGRPcFRvTmF0aXZlRnVuYyhuYW1lLCAxLCBWYWx1ZVR5cGUuTGlzdCwgb3ApO1xuICB9XG5cbiAgcHVibGljIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiAnTmF0aXZlIFwiJyArIHRoaXMubmFtZSArICdcIic7XG4gIH1cblxuICBwdWJsaWMgX3Byb3RvdHlwZTogTmF0aXZlRnVuY3Rpb25DYWxsIHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBfaXNQcm90b3R5cGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIF9vcGVyYXRpb25GdW5jczogTWFwPFZhbHVlVHlwZSwgQmluYXJ5T3A8YW55PiB8IFVuYXJ5T3A8YW55Pj4gfCBudWxsID1cbiAgICBudWxsO1xuICBwdWJsaWMgc3RhdGljIF9uYXRpdmVGdW5jdGlvbnM6IE1hcDxzdHJpbmcsIE5hdGl2ZUZ1bmN0aW9uQ2FsbD4gfCBudWxsID0gbnVsbDtcbn1cbiIsImltcG9ydCB7IENvbnRhaW5lciBhcyBSdW50aW1lQ29udGFpbmVyIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9Db250YWluZXJcIjtcbmltcG9ydCB7IEV4cHJlc3Npb24gfSBmcm9tIFwiLi9FeHByZXNzaW9uXCI7XG5pbXBvcnQgeyBCb29sVmFsdWUsIEZsb2F0VmFsdWUsIEludFZhbHVlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9WYWx1ZVwiO1xuaW1wb3J0IHsgYXNPck51bGwgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL1R5cGVBc3NlcnRpb25cIjtcbmltcG9ydCB7IFBhcnNlZE9iamVjdCB9IGZyb20gXCIuLi9PYmplY3RcIjtcblxuLy8gVGhpcyBjbGFzcyBpcyBuYW1lZCBOdW1iZXIgaW4gdGhlIEMjIGNvZGViYXNlXG4vLyBidXQgdGhpcyBjb25mbGljdCB3aXRoIHRoZSBidWlsdC1pbiBOdW1iZXIgY2xhc3NcbmV4cG9ydCBjbGFzcyBOdW1iZXJFeHByZXNzaW9uIGV4dGVuZHMgRXhwcmVzc2lvbiB7XG4gIHB1YmxpYyB2YWx1ZTogbnVtYmVyIHwgYm9vbGVhbjtcbiAgcHVibGljIHN1YnR5cGU6IFwiaW50XCIgfCBcImZsb2F0XCIgfCBcImJvb2xcIjtcblxuICBjb25zdHJ1Y3Rvcih2YWx1ZTogbnVtYmVyIHwgYm9vbGVhbiwgc3VidHlwZTogXCJpbnRcIiB8IFwiZmxvYXRcIiB8IFwiYm9vbFwiKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGlmIChcbiAgICAgICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgJiYgIU51bWJlci5pc05hTih2YWx1ZSkpIHx8XG4gICAgICB0eXBlb2YgdmFsdWUgPT0gXCJib29sZWFuXCJcbiAgICApIHtcbiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgIHRoaXMuc3VidHlwZSA9IHN1YnR5cGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgb2JqZWN0IHR5cGUgaW4gTnVtYmVyRXhwcmVzc2lvbi5cIik7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiTnVtYmVyXCI7XG4gIH1cblxuICBwdWJsaWMgaXNJbnQgPSAoKTogYm9vbGVhbiA9PiB0aGlzLnN1YnR5cGUgPT0gXCJpbnRcIjtcblxuICBwdWJsaWMgaXNGbG9hdCA9ICgpOiBib29sZWFuID0+IHRoaXMuc3VidHlwZSA9PSBcImZsb2F0XCI7XG5cbiAgcHVibGljIGlzQm9vbCA9ICgpOiBib29sZWFuID0+IHRoaXMuc3VidHlwZSA9PSBcImJvb2xcIjtcblxuICBwdWJsaWMgcmVhZG9ubHkgR2VuZXJhdGVJbnRvQ29udGFpbmVyID0gKFxuICAgIGNvbnRhaW5lcjogUnVudGltZUNvbnRhaW5lclxuICApOiB2b2lkID0+IHtcbiAgICBpZiAodGhpcy5pc0ludCgpKSB7XG4gICAgICBjb250YWluZXIuQWRkQ29udGVudChuZXcgSW50VmFsdWUodGhpcy52YWx1ZSBhcyBudW1iZXIpKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNGbG9hdCgpKSB7XG4gICAgICBjb250YWluZXIuQWRkQ29udGVudChuZXcgRmxvYXRWYWx1ZSh0aGlzLnZhbHVlIGFzIG51bWJlcikpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc0Jvb2woKSkge1xuICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQobmV3IEJvb2xWYWx1ZSh0aGlzLnZhbHVlIGFzIGJvb2xlYW4pKTtcbiAgICB9XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IHRvU3RyaW5nID0gKCk6IHN0cmluZyA9PiBTdHJpbmcodGhpcy52YWx1ZSk7XG5cbiAgcHVibGljIEVxdWFscyhvYmo6IFBhcnNlZE9iamVjdCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG51bWJlckV4cHJlc3Npb24gPSBhc09yTnVsbChvYmosIE51bWJlckV4cHJlc3Npb24pO1xuICAgIGlmICghbnVtYmVyRXhwcmVzc2lvbikgcmV0dXJuIGZhbHNlO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIG51bWJlckV4cHJlc3Npb24uc3VidHlwZSA9PSB0aGlzLnN1YnR5cGUgJiZcbiAgICAgIG51bWJlckV4cHJlc3Npb24udmFsdWUgPT0gdGhpcy52YWx1ZVxuICAgICk7XG4gIH1cbn1cbiIsImltcG9ydCB7IENvbnRhaW5lciBhcyBSdW50aW1lQ29udGFpbmVyIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9Db250YWluZXJcIjtcbmltcG9ydCB7IEV4cHJlc3Npb24gfSBmcm9tIFwiLi9FeHByZXNzaW9uXCI7XG5pbXBvcnQgeyBOYXRpdmVGdW5jdGlvbkNhbGwgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL05hdGl2ZUZ1bmN0aW9uQ2FsbFwiO1xuaW1wb3J0IHsgTnVtYmVyRXhwcmVzc2lvbiB9IGZyb20gXCIuL051bWJlckV4cHJlc3Npb25cIjtcbmltcG9ydCB7IGFzT3JOdWxsIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9UeXBlQXNzZXJ0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBVbmFyeUV4cHJlc3Npb24gZXh0ZW5kcyBFeHByZXNzaW9uIHtcbiAgZ2V0IG5hdGl2ZU5hbWVGb3JPcCgpOiBzdHJpbmcge1xuICAgIC8vIFJlcGxhY2UgXCItXCIgd2l0aCBcIl9cIiB0byBtYWtlIGl0IHVuaXF1ZSAoY29tcGFyZWQgdG8gc3VidHJhY3Rpb24pXG4gICAgaWYgKHRoaXMub3AgPT09IFwiLVwiKSB7XG4gICAgICByZXR1cm4gXCJfXCI7XG4gICAgfSBlbHNlIGlmICh0aGlzLm9wID09PSBcIm5vdFwiKSB7XG4gICAgICByZXR1cm4gXCIhXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMub3A7XG4gIH1cblxuICBwdWJsaWMgaW5uZXJFeHByZXNzaW9uOiBFeHByZXNzaW9uO1xuXG4gIC8vIEF0dGVtcHQgdG8gZmxhdHRlbiBpbm5lciBleHByZXNzaW9uIGltbWVkaWF0ZWx5XG4gIC8vIGUuZy4gY29udmVydCAoLSg1KSkgaW50byAoLTUpXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgV2l0aElubmVyID0gKFxuICAgIGlubmVyOiBFeHByZXNzaW9uLFxuICAgIG9wOiBzdHJpbmdcbiAgKTogRXhwcmVzc2lvbiA9PiB7XG4gICAgY29uc3QgaW5uZXJOdW1iZXIgPSBhc09yTnVsbChpbm5lciwgTnVtYmVyRXhwcmVzc2lvbik7XG5cbiAgICBpZiAoaW5uZXJOdW1iZXIpIHtcbiAgICAgIGlmIChvcCA9PT0gXCItXCIpIHtcbiAgICAgICAgaWYgKGlubmVyTnVtYmVyLmlzSW50KCkpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IE51bWJlckV4cHJlc3Npb24oLWlubmVyTnVtYmVyLnZhbHVlLCBcImludFwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChpbm5lck51bWJlci5pc0Zsb2F0KCkpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IE51bWJlckV4cHJlc3Npb24oLWlubmVyTnVtYmVyLnZhbHVlLCBcImZsb2F0XCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG9wID09IFwiIVwiIHx8IG9wID09IFwibm90XCIpIHtcbiAgICAgICAgaWYgKGlubmVyTnVtYmVyLmlzSW50KCkpIHtcbiAgICAgICAgICByZXR1cm4gbmV3IE51bWJlckV4cHJlc3Npb24oaW5uZXJOdW1iZXIudmFsdWUgPT0gMCwgXCJib29sXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGlubmVyTnVtYmVyLmlzRmxvYXQoKSkge1xuICAgICAgICAgIHJldHVybiBuZXcgTnVtYmVyRXhwcmVzc2lvbihpbm5lck51bWJlci52YWx1ZSA9PSAwLjAsIFwiYm9vbFwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChpbm5lck51bWJlci5pc0Jvb2woKSkge1xuICAgICAgICAgIHJldHVybiBuZXcgTnVtYmVyRXhwcmVzc2lvbighaW5uZXJOdW1iZXIudmFsdWUsIFwiYm9vbFwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIG9wZXJhdGlvbiBvciBudW1iZXIgdHlwZVwiKTtcbiAgICB9XG5cbiAgICAvLyBOb3JtYWwgZmFsbGJhY2tcbiAgICBjb25zdCB1bmFyeSA9IG5ldyBVbmFyeUV4cHJlc3Npb24oaW5uZXIsIG9wKTtcblxuICAgIHJldHVybiB1bmFyeTtcbiAgfTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBpbm5lcjogRXhwcmVzc2lvbixcbiAgICBwdWJsaWMgcmVhZG9ubHkgb3A6IHN0cmluZ1xuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5pbm5lckV4cHJlc3Npb24gPSB0aGlzLkFkZENvbnRlbnQoaW5uZXIpIGFzIEV4cHJlc3Npb247XG4gIH1cblxuICBnZXQgdHlwZU5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJVbmFyeUV4cHJlc3Npb25cIjtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBHZW5lcmF0ZUludG9Db250YWluZXIgPSAoY29udGFpbmVyOiBSdW50aW1lQ29udGFpbmVyKSA9PiB7XG4gICAgdGhpcy5pbm5lckV4cHJlc3Npb24uR2VuZXJhdGVJbnRvQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gICAgY29udGFpbmVyLkFkZENvbnRlbnQoTmF0aXZlRnVuY3Rpb25DYWxsLkNhbGxXaXRoTmFtZSh0aGlzLm5hdGl2ZU5hbWVGb3JPcCkpO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSB0b1N0cmluZyA9ICgpOiBzdHJpbmcgPT5cbiAgICB0aGlzLm5hdGl2ZU5hbWVGb3JPcCArIHRoaXMuaW5uZXJFeHByZXNzaW9uO1xufVxuIiwiaW1wb3J0IHsgQ29udGFpbmVyIGFzIFJ1bnRpbWVDb250YWluZXIgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL0NvbnRhaW5lclwiO1xuaW1wb3J0IHsgRXhwcmVzc2lvbiB9IGZyb20gXCIuL0V4cHJlc3Npb25cIjtcbmltcG9ydCB7IE5hdGl2ZUZ1bmN0aW9uQ2FsbCB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvTmF0aXZlRnVuY3Rpb25DYWxsXCI7XG5pbXBvcnQgeyBTdG9yeSB9IGZyb20gXCIuLi9TdG9yeVwiO1xuaW1wb3J0IHsgVW5hcnlFeHByZXNzaW9uIH0gZnJvbSBcIi4vVW5hcnlFeHByZXNzaW9uXCI7XG5pbXBvcnQgeyBhc09yTnVsbCB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvVHlwZUFzc2VydGlvblwiO1xuXG5leHBvcnQgY2xhc3MgQmluYXJ5RXhwcmVzc2lvbiBleHRlbmRzIEV4cHJlc3Npb24ge1xuICBwdWJsaWMgcmVhZG9ubHkgbGVmdEV4cHJlc3Npb246IEV4cHJlc3Npb247XG4gIHB1YmxpYyByZWFkb25seSByaWdodEV4cHJlc3Npb246IEV4cHJlc3Npb247XG5cbiAgY29uc3RydWN0b3IoXG4gICAgbGVmdDogRXhwcmVzc2lvbixcbiAgICByaWdodDogRXhwcmVzc2lvbixcbiAgICBwdWJsaWMgb3BOYW1lOiBzdHJpbmdcbiAgKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMubGVmdEV4cHJlc3Npb24gPSB0aGlzLkFkZENvbnRlbnQobGVmdCkgYXMgRXhwcmVzc2lvbjtcbiAgICB0aGlzLnJpZ2h0RXhwcmVzc2lvbiA9IHRoaXMuQWRkQ29udGVudChyaWdodCkgYXMgRXhwcmVzc2lvbjtcblxuICAgIHRoaXMub3BOYW1lID0gb3BOYW1lO1xuICB9XG5cbiAgZ2V0IHR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiQmluYXJ5RXhwcmVzc2lvblwiO1xuICB9XG5cbiAgcHVibGljIHJlYWRvbmx5IEdlbmVyYXRlSW50b0NvbnRhaW5lciA9IChjb250YWluZXI6IFJ1bnRpbWVDb250YWluZXIpID0+IHtcbiAgICB0aGlzLmxlZnRFeHByZXNzaW9uLkdlbmVyYXRlSW50b0NvbnRhaW5lcihjb250YWluZXIpO1xuICAgIHRoaXMucmlnaHRFeHByZXNzaW9uLkdlbmVyYXRlSW50b0NvbnRhaW5lcihjb250YWluZXIpO1xuICAgIHRoaXMub3BOYW1lID0gdGhpcy5OYXRpdmVOYW1lRm9yT3AodGhpcy5vcE5hbWUpO1xuICAgIGNvbnRhaW5lci5BZGRDb250ZW50KE5hdGl2ZUZ1bmN0aW9uQ2FsbC5DYWxsV2l0aE5hbWUodGhpcy5vcE5hbWUpKTtcbiAgfTtcblxuICBwdWJsaWMgUmVzb2x2ZVJlZmVyZW5jZXMoY29udGV4dDogU3RvcnkpOiB2b2lkIHtcbiAgICBzdXBlci5SZXNvbHZlUmVmZXJlbmNlcyhjb250ZXh0KTtcblxuICAgIC8vIENoZWNrIGZvciB0aGUgZm9sbG93aW5nIGNhc2U6XG4gICAgLy9cbiAgICAvLyAgICAobm90IEEpID8gQlxuICAgIC8vXG4gICAgLy8gU2luY2UgdGhpcyBlYXN5IHRvIGFjY2lkZW50YWxseSBkbzpcbiAgICAvL1xuICAgIC8vICAgIG5vdCBBID8gQlxuICAgIC8vXG4gICAgLy8gd2hlbiB5b3UgaW50ZW5kOlxuICAgIC8vXG4gICAgLy8gICAgbm90IChBID8gQilcbiAgICBpZiAodGhpcy5OYXRpdmVOYW1lRm9yT3AodGhpcy5vcE5hbWUpID09PSBcIj9cIikge1xuICAgICAgY29uc3QgbGVmdFVuYXJ5ID0gYXNPck51bGwodGhpcy5sZWZ0RXhwcmVzc2lvbiwgVW5hcnlFeHByZXNzaW9uKTtcbiAgICAgIGlmIChcbiAgICAgICAgbGVmdFVuYXJ5ICE9PSBudWxsICYmXG4gICAgICAgIChsZWZ0VW5hcnkub3AgPT09IFwibm90XCIgfHwgbGVmdFVuYXJ5Lm9wID09PSBcIiFcIilcbiAgICAgICkge1xuICAgICAgICB0aGlzLkVycm9yKFxuICAgICAgICAgIGBVc2luZyAnbm90JyBvciAnIScgaGVyZSBuZWdhdGVzICcke2xlZnRVbmFyeS5pbm5lckV4cHJlc3Npb259JyByYXRoZXIgdGhhbiB0aGUgcmVzdWx0IG9mIHRoZSAnPycgb3IgJ2hhcycgb3BlcmF0b3IuIFlvdSBuZWVkIHRvIGFkZCBwYXJlbnRoZXNlcyBhcm91bmQgdGhlIChBID8gQikgZXhwcmVzc2lvbi5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlYWRvbmx5IE5hdGl2ZU5hbWVGb3JPcCA9IChvcE5hbWU6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgaWYgKG9wTmFtZSA9PT0gXCJhbmRcIikge1xuICAgICAgcmV0dXJuIFwiJiZcIjtcbiAgICB9IGVsc2UgaWYgKG9wTmFtZSA9PT0gXCJvclwiKSB7XG4gICAgICByZXR1cm4gXCJ8fFwiO1xuICAgIH0gZWxzZSBpZiAob3BOYW1lID09PSBcIm1vZFwiKSB7XG4gICAgICByZXR1cm4gXCIlXCI7XG4gICAgfSBlbHNlIGlmIChvcE5hbWUgPT09IFwiaGFzXCIpIHtcbiAgICAgIHJldHVybiBcIj9cIjtcbiAgICB9IGVsc2UgaWYgKG9wTmFtZSA9PT0gXCJoYXNudFwiKSB7XG4gICAgICByZXR1cm4gXCIhP1wiO1xuICAgIH1cblxuICAgIHJldHVybiBvcE5hbWU7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IHRvU3RyaW5nID0gKCk6IHN0cmluZyA9PlxuICAgIGAoJHt0aGlzLmxlZnRFeHByZXNzaW9ufSAke3RoaXMub3BOYW1lfSAke3RoaXMucmlnaHRFeHByZXNzaW9ufSlgO1xufVxuIiwiZXhwb3J0IGNsYXNzIENoYXJhY3RlclNldCB7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRnJvbVJhbmdlID0gKFxuICAgIHN0YXJ0OiBzdHJpbmcsXG4gICAgZW5kOiBzdHJpbmdcbiAgKTogQ2hhcmFjdGVyU2V0ID0+IG5ldyBDaGFyYWN0ZXJTZXQoKS5BZGRSYW5nZShzdGFydCwgZW5kKTtcblxuICBwdWJsaWMgc2V0OiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gIGNvbnN0cnVjdG9yKGFyZz86IHN0cmluZyB8IHN0cmluZ1tdIHwgQ2hhcmFjdGVyU2V0KSB7XG4gICAgaWYgKGFyZykge1xuICAgICAgdGhpcy5BZGRDaGFyYWN0ZXJzKGFyZyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlYWRvbmx5IEFkZCA9IChhcmc6IHN0cmluZykgPT4gdGhpcy5zZXQuYWRkKGFyZyk7XG5cbiAgcHVibGljIHJlYWRvbmx5IEFkZFJhbmdlID0gKHN0YXJ0OiBzdHJpbmcsIGVuZDogc3RyaW5nKTogQ2hhcmFjdGVyU2V0ID0+IHtcbiAgICBmb3IgKGxldCBjID0gc3RhcnQuY2hhckNvZGVBdCgwKTsgYyA8PSBlbmQuY2hhckNvZGVBdCgwKTsgKytjKSB7XG4gICAgICB0aGlzLkFkZChTdHJpbmcuZnJvbUNoYXJDb2RlKGMpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgQWRkQ2hhcmFjdGVycyA9IChcbiAgICBjaGFyczogc3RyaW5nIHwgc3RyaW5nW10gfCBDaGFyYWN0ZXJTZXRcbiAgKTogQ2hhcmFjdGVyU2V0ID0+IHtcbiAgICBpZiAodHlwZW9mIGNoYXJzID09PSBcInN0cmluZ1wiIHx8IEFycmF5LmlzQXJyYXkoY2hhcnMpKSB7XG4gICAgICBmb3IgKGNvbnN0IGMgb2YgY2hhcnMpIHtcbiAgICAgICAgdGhpcy5BZGQoYyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoY29uc3QgYyBvZiBjaGFycy5zZXQpIHtcbiAgICAgICAgdGhpcy5BZGQoYyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG59XG4iLCJpbXBvcnQgeyBDaGFyYWN0ZXJTZXQgfSBmcm9tIFwiLi9DaGFyYWN0ZXJTZXRcIjtcblxuLy8vIDxzdW1tYXJ5PlxuLy8vIEEgY2xhc3MgcmVwcmVzZW50aW5nIGEgY2hhcmFjdGVyIHJhbmdlLiBBbGxvd3MgZm9yIGxhenktbG9hZGluZyBhIGNvcnJlc3BvbmRpbmcgPHNlZSBjcmVmPVwiQ2hhcmFjdGVyU2V0XCI+Y2hhcmFjdGVyIHNldDwvc2VlPi5cbi8vLyA8L3N1bW1hcnk+XG5leHBvcnQgY2xhc3MgQ2hhcmFjdGVyUmFuZ2Uge1xuICBwdWJsaWMgc3RhdGljIERlZmluZSA9IChcbiAgICBzdGFydDogc3RyaW5nLFxuICAgIGVuZDogc3RyaW5nLFxuICAgIGV4Y2x1ZGVzOiBzdHJpbmdbXSB8IENoYXJhY3RlclNldCA9IFtdXG4gICk6IENoYXJhY3RlclJhbmdlID0+IG5ldyBDaGFyYWN0ZXJSYW5nZShzdGFydCwgZW5kLCBleGNsdWRlcyk7XG5cbiAgcHJpdmF0ZSBfY29ycmVzcG9uZGluZ0NoYXJTZXQ6IENoYXJhY3RlclNldCA9IG5ldyBDaGFyYWN0ZXJTZXQoKTtcbiAgcHJpdmF0ZSBfZXhjbHVkZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIF9zdGFydDogc3RyaW5nLFxuICAgIHByaXZhdGUgX2VuZDogc3RyaW5nLFxuICAgIGV4Y2x1ZGVzOiBzdHJpbmdbXSB8IENoYXJhY3RlclNldCA9IFtdXG4gICkge1xuICAgIGlmIChleGNsdWRlcyBpbnN0YW5jZW9mIENoYXJhY3RlclNldCkge1xuICAgICAgdGhpcy5fZXhjbHVkZXMgPSBleGNsdWRlcy5zZXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBleGNsdWRlcykge1xuICAgICAgICB0aGlzLl9leGNsdWRlcy5hZGQoaXRlbSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IHN0YXJ0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX3N0YXJ0O1xuICB9XG5cbiAgZ2V0IGVuZCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9lbmQ7XG4gIH1cblxuICAvLy8gPHN1bW1hcnk+XG4gIC8vLyBSZXR1cm5zIGEgPHNlZSBjcmVmPVwiQ2hhcmFjdGVyU2V0XCI+Y2hhcmFjdGVyIHNldDwvc2VlPiBpbnN0YW5jZSBjb3JyZXNwb25kaW5nIHRvIHRoZSBjaGFyYWN0ZXIgcmFuZ2VcbiAgLy8vIHJlcHJlc2VudGVkIGJ5IHRoZSBjdXJyZW50IGluc3RhbmNlLlxuICAvLy8gPC9zdW1tYXJ5PlxuICAvLy8gPHJlbWFya3M+XG4gIC8vLyBUaGUgaW50ZXJuYWwgY2hhcmFjdGVyIHNldCBpcyBjcmVhdGVkIG9uY2UgYW5kIGNhY2hlZCBpbiBtZW1vcnkuXG4gIC8vLyA8L3JlbWFya3M+XG4gIC8vLyA8cmV0dXJucz5UaGUgY2hhciBzZXQuPC9yZXR1cm5zPlxuICBwdWJsaWMgcmVhZG9ubHkgVG9DaGFyYWN0ZXJTZXQgPSAoKTogQ2hhcmFjdGVyU2V0ID0+IHtcbiAgICBpZiAodGhpcy5fY29ycmVzcG9uZGluZ0NoYXJTZXQuc2V0LnNpemUgPT09IDApIHtcbiAgICAgIGZvciAoXG4gICAgICAgIGxldCBpaSA9IHRoaXMuc3RhcnQuY2hhckNvZGVBdCgwKSwgYztcbiAgICAgICAgaWkgPD0gdGhpcy5lbmQuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgaWkgKz0gMVxuICAgICAgKSB7XG4gICAgICAgIGMgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGlpKTtcbiAgICAgICAgaWYgKCF0aGlzLl9leGNsdWRlcy5oYXMoYykpIHtcbiAgICAgICAgICB0aGlzLl9jb3JyZXNwb25kaW5nQ2hhclNldC5BZGRDaGFyYWN0ZXJzKGMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2NvcnJlc3BvbmRpbmdDaGFyU2V0O1xuICB9O1xufVxuIiwiaW1wb3J0IHsgSW5rT2JqZWN0IH0gZnJvbSBcIi4vT2JqZWN0XCI7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSBcIi4vUGF0aFwiO1xuaW1wb3J0IHsgQ29udGFpbmVyIH0gZnJvbSBcIi4vQ29udGFpbmVyXCI7XG5pbXBvcnQgeyB0aHJvd051bGxFeGNlcHRpb24gfSBmcm9tIFwiLi9OdWxsRXhjZXB0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBDaG9pY2VQb2ludCBleHRlbmRzIElua09iamVjdCB7XG4gIHB1YmxpYyBfcGF0aE9uQ2hvaWNlOiBQYXRoIHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBoYXNDb25kaXRpb246IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIGhhc1N0YXJ0Q29udGVudDogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgaGFzQ2hvaWNlT25seUNvbnRlbnQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIGlzSW52aXNpYmxlRGVmYXVsdDogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgb25jZU9ubHk6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKG9uY2VPbmx5OiBib29sZWFuID0gdHJ1ZSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5vbmNlT25seSA9IG9uY2VPbmx5O1xuICB9XG4gIGdldCBwYXRoT25DaG9pY2UoKTogUGF0aCB8IG51bGwge1xuICAgIGlmICh0aGlzLl9wYXRoT25DaG9pY2UgIT0gbnVsbCAmJiB0aGlzLl9wYXRoT25DaG9pY2UuaXNSZWxhdGl2ZSkge1xuICAgICAgbGV0IGNob2ljZVRhcmdldE9iaiA9IHRoaXMuY2hvaWNlVGFyZ2V0O1xuICAgICAgaWYgKGNob2ljZVRhcmdldE9iaikge1xuICAgICAgICB0aGlzLl9wYXRoT25DaG9pY2UgPSBjaG9pY2VUYXJnZXRPYmoucGF0aDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3BhdGhPbkNob2ljZTtcbiAgfVxuICBzZXQgcGF0aE9uQ2hvaWNlKHZhbHVlOiBQYXRoIHwgbnVsbCkge1xuICAgIHRoaXMuX3BhdGhPbkNob2ljZSA9IHZhbHVlO1xuICB9XG4gIGdldCBjaG9pY2VUYXJnZXQoKTogQ29udGFpbmVyIHwgbnVsbCB7XG4gICAgaWYgKHRoaXMuX3BhdGhPbkNob2ljZSA9PT0gbnVsbClcbiAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJDaG9pY2VQb2ludC5fcGF0aE9uQ2hvaWNlXCIpO1xuICAgIHJldHVybiB0aGlzLlJlc29sdmVQYXRoKHRoaXMuX3BhdGhPbkNob2ljZSkuY29udGFpbmVyO1xuICB9XG4gIGdldCBwYXRoU3RyaW5nT25DaG9pY2UoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5wYXRoT25DaG9pY2UgPT09IG51bGwpXG4gICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwiQ2hvaWNlUG9pbnQucGF0aE9uQ2hvaWNlXCIpO1xuICAgIHJldHVybiB0aGlzLkNvbXBhY3RQYXRoU3RyaW5nKHRoaXMucGF0aE9uQ2hvaWNlKTtcbiAgfVxuICBzZXQgcGF0aFN0cmluZ09uQ2hvaWNlKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLnBhdGhPbkNob2ljZSA9IG5ldyBQYXRoKHZhbHVlKTtcbiAgfVxuICBnZXQgZmxhZ3MoKTogbnVtYmVyIHtcbiAgICBsZXQgZmxhZ3MgPSAwO1xuICAgIGlmICh0aGlzLmhhc0NvbmRpdGlvbikgZmxhZ3MgfD0gMTtcbiAgICBpZiAodGhpcy5oYXNTdGFydENvbnRlbnQpIGZsYWdzIHw9IDI7XG4gICAgaWYgKHRoaXMuaGFzQ2hvaWNlT25seUNvbnRlbnQpIGZsYWdzIHw9IDQ7XG4gICAgaWYgKHRoaXMuaXNJbnZpc2libGVEZWZhdWx0KSBmbGFncyB8PSA4O1xuICAgIGlmICh0aGlzLm9uY2VPbmx5KSBmbGFncyB8PSAxNjtcbiAgICByZXR1cm4gZmxhZ3M7XG4gIH1cbiAgc2V0IGZsYWdzKHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLmhhc0NvbmRpdGlvbiA9ICh2YWx1ZSAmIDEpID4gMDtcbiAgICB0aGlzLmhhc1N0YXJ0Q29udGVudCA9ICh2YWx1ZSAmIDIpID4gMDtcbiAgICB0aGlzLmhhc0Nob2ljZU9ubHlDb250ZW50ID0gKHZhbHVlICYgNCkgPiAwO1xuICAgIHRoaXMuaXNJbnZpc2libGVEZWZhdWx0ID0gKHZhbHVlICYgOCkgPiAwO1xuICAgIHRoaXMub25jZU9ubHkgPSAodmFsdWUgJiAxNikgPiAwO1xuICB9XG4gIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLnBhdGhPbkNob2ljZSA9PT0gbnVsbClcbiAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJDaG9pY2VQb2ludC5wYXRoT25DaG9pY2VcIik7XG4gICAgLy8gaW50PyB0YXJnZXRMaW5lTnVtID0gRGVidWdMaW5lTnVtYmVyT2ZQYXRoIChwYXRoT25DaG9pY2UpO1xuICAgIGxldCB0YXJnZXRMaW5lTnVtID0gbnVsbDtcbiAgICBsZXQgdGFyZ2V0U3RyaW5nID0gdGhpcy5wYXRoT25DaG9pY2UudG9TdHJpbmcoKTtcblxuICAgIGlmICh0YXJnZXRMaW5lTnVtICE9IG51bGwpIHtcbiAgICAgIHRhcmdldFN0cmluZyA9IFwiIGxpbmUgXCIgKyB0YXJnZXRMaW5lTnVtICsgXCIoXCIgKyB0YXJnZXRTdHJpbmcgKyBcIilcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gXCJDaG9pY2U6IC0+IFwiICsgdGFyZ2V0U3RyaW5nO1xuICB9XG59XG4iLCJpbXBvcnQgeyBQYXRoIH0gZnJvbSBcIi4vUGF0aFwiO1xuaW1wb3J0IHsgQ29udGFpbmVyIH0gZnJvbSBcIi4vQ29udGFpbmVyXCI7XG5pbXBvcnQgeyBJbmtPYmplY3QgfSBmcm9tIFwiLi9PYmplY3RcIjtcblxuZXhwb3J0IGNsYXNzIFBvaW50ZXIge1xuICBwdWJsaWMgY29udGFpbmVyOiBDb250YWluZXIgfCBudWxsID0gbnVsbDtcbiAgcHVibGljIGluZGV4OiBudW1iZXIgPSAtMTtcblxuICBjb25zdHJ1Y3RvcigpO1xuICBjb25zdHJ1Y3Rvcihjb250YWluZXI6IENvbnRhaW5lciB8IG51bGwsIGluZGV4OiBudW1iZXIpO1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgdGhpcy5jb250YWluZXIgPSBhcmd1bWVudHNbMF07XG4gICAgICB0aGlzLmluZGV4ID0gYXJndW1lbnRzWzFdO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBSZXNvbHZlKCk6IElua09iamVjdCB8IG51bGwge1xuICAgIGlmICh0aGlzLmluZGV4IDwgMCkgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICAgIGlmICh0aGlzLmNvbnRhaW5lciA9PSBudWxsKSByZXR1cm4gbnVsbDtcbiAgICBpZiAodGhpcy5jb250YWluZXIuY29udGVudC5sZW5ndGggPT0gMCkgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICAgIGlmICh0aGlzLmluZGV4ID49IHRoaXMuY29udGFpbmVyLmNvbnRlbnQubGVuZ3RoKSByZXR1cm4gbnVsbDtcblxuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lci5jb250ZW50W3RoaXMuaW5kZXhdO1xuICB9XG5cbiAgZ2V0IGlzTnVsbCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXIgPT0gbnVsbDtcbiAgfVxuXG4gIGdldCBwYXRoKCk6IFBhdGggfCBudWxsIHtcbiAgICBpZiAodGhpcy5pc051bGwpIHJldHVybiBudWxsO1xuXG4gICAgaWYgKHRoaXMuaW5kZXggPj0gMClcbiAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lciEucGF0aC5QYXRoQnlBcHBlbmRpbmdDb21wb25lbnQoXG4gICAgICAgIG5ldyBQYXRoLkNvbXBvbmVudCh0aGlzLmluZGV4KVxuICAgICAgKTtcbiAgICBlbHNlIHJldHVybiB0aGlzLmNvbnRhaW5lciEucGF0aDtcbiAgfVxuXG4gIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIGlmICghdGhpcy5jb250YWluZXIpIHJldHVybiBcIkluayBQb2ludGVyIChudWxsKVwiO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIFwiSW5rIFBvaW50ZXIgLT4gXCIgK1xuICAgICAgdGhpcy5jb250YWluZXIucGF0aC50b1N0cmluZygpICtcbiAgICAgIFwiIC0tIGluZGV4IFwiICtcbiAgICAgIHRoaXMuaW5kZXhcbiAgICApO1xuICB9XG5cbiAgLy8gVGhpcyBtZXRob2QgZG9lcyBub3QgZXhpc3QgaW4gdGhlIG9yaWdpbmFsIEMjIGNvZGUsIGJ1dCBpcyBoZXJlIHRvIG1haW50YWluIHRoZVxuICAvLyB2YWx1ZSBzZW1hbnRpY3Mgb2YgUG9pbnRlci5cbiAgcHVibGljIGNvcHkoKTogUG9pbnRlciB7XG4gICAgcmV0dXJuIG5ldyBQb2ludGVyKHRoaXMuY29udGFpbmVyLCB0aGlzLmluZGV4KTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgU3RhcnRPZihjb250YWluZXI6IENvbnRhaW5lciB8IG51bGwpOiBQb2ludGVyIHtcbiAgICByZXR1cm4gbmV3IFBvaW50ZXIoY29udGFpbmVyLCAwKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0IE51bGwoKTogUG9pbnRlciB7XG4gICAgcmV0dXJuIG5ldyBQb2ludGVyKG51bGwsIC0xKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUGF0aCB9IGZyb20gXCIuL1BhdGhcIjtcbmltcG9ydCB7IFB1c2hQb3BUeXBlIH0gZnJvbSBcIi4vUHVzaFBvcFwiO1xuaW1wb3J0IHsgU3RyaW5nQnVpbGRlciB9IGZyb20gXCIuL1N0cmluZ0J1aWxkZXJcIjtcbmltcG9ydCB7IElua09iamVjdCB9IGZyb20gXCIuL09iamVjdFwiO1xuaW1wb3J0IHsgUG9pbnRlciB9IGZyb20gXCIuL1BvaW50ZXJcIjtcbmltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gXCIuL0NvbnRhaW5lclwiO1xuaW1wb3J0IHsgdGhyb3dOdWxsRXhjZXB0aW9uIH0gZnJvbSBcIi4vTnVsbEV4Y2VwdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgRGl2ZXJ0IGV4dGVuZHMgSW5rT2JqZWN0IHtcbiAgZ2V0IHRhcmdldFBhdGgoKSB7XG4gICAgaWYgKHRoaXMuX3RhcmdldFBhdGggIT0gbnVsbCAmJiB0aGlzLl90YXJnZXRQYXRoLmlzUmVsYXRpdmUpIHtcbiAgICAgIGxldCB0YXJnZXRPYmogPSB0aGlzLnRhcmdldFBvaW50ZXIuUmVzb2x2ZSgpO1xuICAgICAgaWYgKHRhcmdldE9iaikge1xuICAgICAgICB0aGlzLl90YXJnZXRQYXRoID0gdGFyZ2V0T2JqLnBhdGg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldFBhdGg7XG4gIH1cbiAgc2V0IHRhcmdldFBhdGgodmFsdWU6IFBhdGggfCBudWxsKSB7XG4gICAgdGhpcy5fdGFyZ2V0UGF0aCA9IHZhbHVlO1xuICAgIHRoaXMuX3RhcmdldFBvaW50ZXIgPSBQb2ludGVyLk51bGw7XG4gIH1cblxuICBwdWJsaWMgX3RhcmdldFBhdGg6IFBhdGggfCBudWxsID0gbnVsbDtcblxuICBnZXQgdGFyZ2V0UG9pbnRlcigpIHtcbiAgICBpZiAodGhpcy5fdGFyZ2V0UG9pbnRlci5pc051bGwpIHtcbiAgICAgIGxldCB0YXJnZXRPYmogPSB0aGlzLlJlc29sdmVQYXRoKHRoaXMuX3RhcmdldFBhdGgpLm9iajtcblxuICAgICAgaWYgKHRoaXMuX3RhcmdldFBhdGggPT09IG51bGwpXG4gICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJ0aGlzLl90YXJnZXRQYXRoXCIpO1xuICAgICAgaWYgKHRoaXMuX3RhcmdldFBhdGgubGFzdENvbXBvbmVudCA9PT0gbnVsbClcbiAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcInRoaXMuX3RhcmdldFBhdGgubGFzdENvbXBvbmVudFwiKTtcblxuICAgICAgaWYgKHRoaXMuX3RhcmdldFBhdGgubGFzdENvbXBvbmVudC5pc0luZGV4KSB7XG4gICAgICAgIGlmICh0YXJnZXRPYmogPT09IG51bGwpIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJ0YXJnZXRPYmpcIik7XG4gICAgICAgIHRoaXMuX3RhcmdldFBvaW50ZXIuY29udGFpbmVyID1cbiAgICAgICAgICB0YXJnZXRPYmoucGFyZW50IGluc3RhbmNlb2YgQ29udGFpbmVyID8gdGFyZ2V0T2JqLnBhcmVudCA6IG51bGw7XG4gICAgICAgIHRoaXMuX3RhcmdldFBvaW50ZXIuaW5kZXggPSB0aGlzLl90YXJnZXRQYXRoLmxhc3RDb21wb25lbnQuaW5kZXg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl90YXJnZXRQb2ludGVyID0gUG9pbnRlci5TdGFydE9mKFxuICAgICAgICAgIHRhcmdldE9iaiBpbnN0YW5jZW9mIENvbnRhaW5lciA/IHRhcmdldE9iaiA6IG51bGxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0UG9pbnRlci5jb3B5KCk7XG4gIH1cblxuICBwdWJsaWMgX3RhcmdldFBvaW50ZXI6IFBvaW50ZXIgPSBQb2ludGVyLk51bGw7XG5cbiAgZ2V0IHRhcmdldFBhdGhTdHJpbmcoKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0UGF0aCA9PSBudWxsKSByZXR1cm4gbnVsbDtcblxuICAgIHJldHVybiB0aGlzLkNvbXBhY3RQYXRoU3RyaW5nKHRoaXMudGFyZ2V0UGF0aCk7XG4gIH1cbiAgc2V0IHRhcmdldFBhdGhTdHJpbmcodmFsdWU6IHN0cmluZyB8IG51bGwpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgdGhpcy50YXJnZXRQYXRoID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50YXJnZXRQYXRoID0gbmV3IFBhdGgodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB2YXJpYWJsZURpdmVydE5hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBnZXQgaGFzVmFyaWFibGVUYXJnZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMudmFyaWFibGVEaXZlcnROYW1lICE9IG51bGw7XG4gIH1cblxuICBwdWJsaWMgcHVzaGVzVG9TdGFjazogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgc3RhY2tQdXNoVHlwZTogUHVzaFBvcFR5cGUgPSAwO1xuXG4gIHB1YmxpYyBpc0V4dGVybmFsOiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyBleHRlcm5hbEFyZ3M6IG51bWJlciA9IDA7XG5cbiAgcHVibGljIGlzQ29uZGl0aW9uYWw6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihzdGFja1B1c2hUeXBlPzogUHVzaFBvcFR5cGUpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMucHVzaGVzVG9TdGFjayA9IGZhbHNlO1xuXG4gICAgaWYgKHR5cGVvZiBzdGFja1B1c2hUeXBlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB0aGlzLnB1c2hlc1RvU3RhY2sgPSB0cnVlO1xuICAgICAgdGhpcy5zdGFja1B1c2hUeXBlID0gc3RhY2tQdXNoVHlwZTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgRXF1YWxzKG9iajogRGl2ZXJ0IHwgbnVsbCkge1xuICAgIGxldCBvdGhlckRpdmVydCA9IG9iajtcbiAgICBpZiAob3RoZXJEaXZlcnQgaW5zdGFuY2VvZiBEaXZlcnQpIHtcbiAgICAgIGlmICh0aGlzLmhhc1ZhcmlhYmxlVGFyZ2V0ID09IG90aGVyRGl2ZXJ0Lmhhc1ZhcmlhYmxlVGFyZ2V0KSB7XG4gICAgICAgIGlmICh0aGlzLmhhc1ZhcmlhYmxlVGFyZ2V0KSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMudmFyaWFibGVEaXZlcnROYW1lID09IG90aGVyRGl2ZXJ0LnZhcmlhYmxlRGl2ZXJ0TmFtZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy50YXJnZXRQYXRoID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcInRoaXMudGFyZ2V0UGF0aFwiKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy50YXJnZXRQYXRoLkVxdWFscyhvdGhlckRpdmVydC50YXJnZXRQYXRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgdG9TdHJpbmcoKSB7XG4gICAgaWYgKHRoaXMuaGFzVmFyaWFibGVUYXJnZXQpIHtcbiAgICAgIHJldHVybiBcIkRpdmVydCh2YXJpYWJsZTogXCIgKyB0aGlzLnZhcmlhYmxlRGl2ZXJ0TmFtZSArIFwiKVwiO1xuICAgIH0gZWxzZSBpZiAodGhpcy50YXJnZXRQYXRoID09IG51bGwpIHtcbiAgICAgIHJldHVybiBcIkRpdmVydChudWxsKVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xuXG4gICAgICBsZXQgdGFyZ2V0U3RyID0gdGhpcy50YXJnZXRQYXRoLnRvU3RyaW5nKCk7XG4gICAgICAvLyBpbnQ/IHRhcmdldExpbmVOdW0gPSBEZWJ1Z0xpbmVOdW1iZXJPZlBhdGggKHRhcmdldFBhdGgpO1xuICAgICAgbGV0IHRhcmdldExpbmVOdW0gPSBudWxsO1xuICAgICAgaWYgKHRhcmdldExpbmVOdW0gIT0gbnVsbCkge1xuICAgICAgICB0YXJnZXRTdHIgPSBcImxpbmUgXCIgKyB0YXJnZXRMaW5lTnVtO1xuICAgICAgfVxuXG4gICAgICBzYi5BcHBlbmQoXCJEaXZlcnRcIik7XG5cbiAgICAgIGlmICh0aGlzLmlzQ29uZGl0aW9uYWwpIHNiLkFwcGVuZChcIj9cIik7XG5cbiAgICAgIGlmICh0aGlzLnB1c2hlc1RvU3RhY2spIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhY2tQdXNoVHlwZSA9PSBQdXNoUG9wVHlwZS5GdW5jdGlvbikge1xuICAgICAgICAgIHNiLkFwcGVuZChcIiBmdW5jdGlvblwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzYi5BcHBlbmQoXCIgdHVubmVsXCIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHNiLkFwcGVuZChcIiAtPiBcIik7XG4gICAgICBzYi5BcHBlbmQodGhpcy50YXJnZXRQYXRoU3RyaW5nKTtcblxuICAgICAgc2IuQXBwZW5kKFwiIChcIik7XG4gICAgICBzYi5BcHBlbmQodGFyZ2V0U3RyKTtcbiAgICAgIHNiLkFwcGVuZChcIilcIik7XG5cbiAgICAgIHJldHVybiBzYi50b1N0cmluZygpO1xuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGVudW0gU3ltYm9sVHlwZSB7XG4gIEtub3QgPSAwLFxuICBMaXN0ID0gMSxcbiAgTGlzdEl0ZW0gPSAyLFxuICBWYXIgPSAzLFxuICBTdWJGbG93QW5kV2VhdmUgPSA0LFxuICBBcmcgPSA1LFxuICBUZW1wID0gNixcbn1cbiIsImltcG9ydCB7IElua09iamVjdCB9IGZyb20gXCIuL09iamVjdFwiO1xuXG5leHBvcnQgY2xhc3MgVmFyaWFibGVBc3NpZ25tZW50IGV4dGVuZHMgSW5rT2JqZWN0IHtcbiAgcHVibGljIHJlYWRvbmx5IHZhcmlhYmxlTmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgcHVibGljIHJlYWRvbmx5IGlzTmV3RGVjbGFyYXRpb246IGJvb2xlYW47XG4gIHB1YmxpYyBpc0dsb2JhbDogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3Rvcih2YXJpYWJsZU5hbWU6IHN0cmluZyB8IG51bGwsIGlzTmV3RGVjbGFyYXRpb246IGJvb2xlYW4pIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMudmFyaWFibGVOYW1lID0gdmFyaWFibGVOYW1lIHx8IG51bGw7XG4gICAgdGhpcy5pc05ld0RlY2xhcmF0aW9uID0gISFpc05ld0RlY2xhcmF0aW9uO1xuICAgIHRoaXMuaXNHbG9iYWwgPSBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIlZhckFzc2lnbiB0byBcIiArIHRoaXMudmFyaWFibGVOYW1lO1xuICB9XG59XG4iLCJpbXBvcnQgeyBDaG9pY2VQb2ludCB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvQ2hvaWNlUG9pbnRcIjtcbmltcG9ydCB7IENvbnRhaW5lciBhcyBSdW50aW1lQ29udGFpbmVyIH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9Db250YWluZXJcIjtcbmltcG9ydCB7IENvbnRlbnRMaXN0IH0gZnJvbSBcIi4vQ29udGVudExpc3RcIjtcbmltcG9ydCB7IENvbnRyb2xDb21tYW5kIGFzIFJ1bnRpbWVDb250cm9sQ29tbWFuZCB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvQ29udHJvbENvbW1hbmRcIjtcbmltcG9ydCB7IERpdmVydCBhcyBSdW50aW1lRGl2ZXJ0IH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9EaXZlcnRcIjtcbmltcG9ydCB7IERpdmVydFRhcmdldFZhbHVlIH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9WYWx1ZVwiO1xuaW1wb3J0IHsgSU5hbWVkQ29udGVudCB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvSU5hbWVkQ29udGVudFwiO1xuaW1wb3J0IHsgSVdlYXZlUG9pbnQgfSBmcm9tIFwiLi9JV2VhdmVQb2ludFwiO1xuaW1wb3J0IHsgUGFyc2VkT2JqZWN0IH0gZnJvbSBcIi4vT2JqZWN0XCI7XG5pbXBvcnQgeyBJbmtPYmplY3QgYXMgUnVudGltZU9iamVjdCB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvT2JqZWN0XCI7XG5pbXBvcnQgeyBQYXRoIGFzIFJ1bnRpbWVQYXRoIH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9QYXRoXCI7XG5pbXBvcnQgeyBTdG9yeSB9IGZyb20gXCIuL1N0b3J5XCI7XG5pbXBvcnQgeyBTeW1ib2xUeXBlIH0gZnJvbSBcIi4vU3ltYm9sVHlwZVwiO1xuaW1wb3J0IHsgVmFyaWFibGVBc3NpZ25tZW50IGFzIFJ1bnRpbWVWYXJpYWJsZUFzc2lnbm1lbnQgfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL1ZhcmlhYmxlQXNzaWdubWVudFwiO1xuaW1wb3J0IHsgRXhwcmVzc2lvbiB9IGZyb20gXCIuL0V4cHJlc3Npb24vRXhwcmVzc2lvblwiO1xuaW1wb3J0IHsgSWRlbnRpZmllciB9IGZyb20gXCIuL0lkZW50aWZpZXJcIjtcblxuZXhwb3J0IGNsYXNzIENob2ljZSBleHRlbmRzIFBhcnNlZE9iamVjdCBpbXBsZW1lbnRzIElXZWF2ZVBvaW50LCBJTmFtZWRDb250ZW50IHtcbiAgcHJpdmF0ZSBfY29uZGl0aW9uOiBFeHByZXNzaW9uIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgX2lubmVyQ29udGVudENvbnRhaW5lcjogUnVudGltZUNvbnRhaW5lciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIF9vdXRlckNvbnRhaW5lcjogUnVudGltZUNvbnRhaW5lciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIF9ydW50aW1lQ2hvaWNlOiBDaG9pY2VQb2ludCB8IG51bGwgPSBudWxsO1xuICBnZXQgcnVudGltZUNob2ljZSgpOiBDaG9pY2VQb2ludCB7XG4gICAgaWYgKCF0aGlzLl9ydW50aW1lQ2hvaWNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fcnVudGltZUNob2ljZTtcbiAgfVxuXG4gIHByaXZhdGUgX3JldHVyblRvUjE6IERpdmVydFRhcmdldFZhbHVlIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgX3JldHVyblRvUjI6IERpdmVydFRhcmdldFZhbHVlIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgX3IxTGFiZWw6IFJ1bnRpbWVDb250YWluZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBfcjJMYWJlbDogUnVudGltZUNvbnRhaW5lciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIF9kaXZlcnRUb1N0YXJ0Q29udGVudE91dGVyOiBSdW50aW1lRGl2ZXJ0IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgX2RpdmVydFRvU3RhcnRDb250ZW50SW5uZXI6IFJ1bnRpbWVEaXZlcnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBfc3RhcnRDb250ZW50UnVudGltZUNvbnRhaW5lcjogUnVudGltZUNvbnRhaW5lciB8IG51bGwgPSBudWxsO1xuXG4gIHB1YmxpYyBzdGFydENvbnRlbnQ6IENvbnRlbnRMaXN0O1xuICBwdWJsaWMgY2hvaWNlT25seUNvbnRlbnQ6IENvbnRlbnRMaXN0O1xuICBwdWJsaWMgaW5uZXJDb250ZW50OiBDb250ZW50TGlzdDtcbiAgcHVibGljIGlkZW50aWZpZXI/OiBJZGVudGlmaWVyO1xuICBnZXQgbmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pZGVudGlmaWVyPy5uYW1lIHx8IG51bGw7XG4gIH1cbiAgcHVibGljIG9uY2VPbmx5OiBib29sZWFuO1xuICBwdWJsaWMgaXNJbnZpc2libGVEZWZhdWx0OiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyBpbmRlbnRhdGlvbkRlcHRoOiBudW1iZXI7XG4gIHB1YmxpYyBoYXNXZWF2ZVN0eWxlSW5saW5lQnJhY2tldHM6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBnZXQgY29uZGl0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9jb25kaXRpb247XG4gIH1cblxuICBzZXQgY29uZGl0aW9uKHZhbHVlKSB7XG4gICAgdGhpcy5fY29uZGl0aW9uID0gdmFsdWU7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB0aGlzLkFkZENvbnRlbnQodmFsdWUgYXMgUGFyc2VkT2JqZWN0KTtcbiAgICB9XG4gIH1cblxuICAvLyBSZXF1aXJlZCBmb3IgSVdlYXZlUG9pbnQgaW50ZXJmYWNlXG4gIC8vIENob2ljZSdzIHRhcmdldCBjb250YWluZXIuIFVzZWQgYnkgd2VhdmUgdG8gYXBwZW5kIGFueSBleHRyYVxuICAvLyBuZXN0ZWQgd2VhdmUgY29udGVudCBpbnRvLlxuICBnZXQgcnVudGltZUNvbnRhaW5lcigpIHtcbiAgICByZXR1cm4gdGhpcy5faW5uZXJDb250ZW50Q29udGFpbmVyO1xuICB9XG5cbiAgZ2V0IGlubmVyQ29udGVudENvbnRhaW5lcigpIHtcbiAgICByZXR1cm4gdGhpcy5faW5uZXJDb250ZW50Q29udGFpbmVyO1xuICB9XG5cbiAgZ2V0IGNvbnRhaW5lckZvckNvdW50aW5nKCkge1xuICAgIHJldHVybiB0aGlzLl9pbm5lckNvbnRlbnRDb250YWluZXI7XG4gIH1cblxuICAvLyBPdmVycmlkZSBydW50aW1lUGF0aCB0byBwb2ludCB0byB0aGUgQ2hvaWNlJ3MgdGFyZ2V0IGNvbnRlbnQgKGFmdGVyIGl0J3MgY2hvc2VuKSxcbiAgLy8gYXMgb3Bwb3NlZCB0byB0aGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiB3aGljaCB3b3VsZCBwb2ludCB0byB0aGUgY2hvaWNlIGl0c2VsZlxuICAvLyAob3IgaXQncyBvdXRlciBjb250YWluZXIpLCB3aGljaCBpcyB3aGF0IHJ1bnRpbWVPYmplY3QgaXMuXG4gIGdldCBydW50aW1lUGF0aCgpOiBSdW50aW1lUGF0aCB7XG4gICAgaWYgKCF0aGlzLmlubmVyQ29udGVudENvbnRhaW5lciB8fCAhdGhpcy5pbm5lckNvbnRlbnRDb250YWluZXIucGF0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuaW5uZXJDb250ZW50Q29udGFpbmVyLnBhdGg7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBzdGFydENvbnRlbnQ6IENvbnRlbnRMaXN0LFxuICAgIGNob2ljZU9ubHlDb250ZW50OiBDb250ZW50TGlzdCxcbiAgICBpbm5lckNvbnRlbnQ6IENvbnRlbnRMaXN0XG4gICkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLnN0YXJ0Q29udGVudCA9IHN0YXJ0Q29udGVudDtcbiAgICB0aGlzLmNob2ljZU9ubHlDb250ZW50ID0gY2hvaWNlT25seUNvbnRlbnQ7XG4gICAgdGhpcy5pbm5lckNvbnRlbnQgPSBpbm5lckNvbnRlbnQ7XG4gICAgdGhpcy5pbmRlbnRhdGlvbkRlcHRoID0gMTtcblxuICAgIGlmIChzdGFydENvbnRlbnQpIHtcbiAgICAgIHRoaXMuQWRkQ29udGVudCh0aGlzLnN0YXJ0Q29udGVudCk7XG4gICAgfVxuXG4gICAgaWYgKGNob2ljZU9ubHlDb250ZW50KSB7XG4gICAgICB0aGlzLkFkZENvbnRlbnQodGhpcy5jaG9pY2VPbmx5Q29udGVudCk7XG4gICAgfVxuXG4gICAgaWYgKGlubmVyQ29udGVudCkge1xuICAgICAgdGhpcy5BZGRDb250ZW50KHRoaXMuaW5uZXJDb250ZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLm9uY2VPbmx5ID0gdHJ1ZTsgLy8gZGVmYXVsdFxuICB9XG5cbiAgZ2V0IHR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiQ2hvaWNlXCI7XG4gIH1cblxuICBwdWJsaWMgcmVhZG9ubHkgR2VuZXJhdGVSdW50aW1lT2JqZWN0ID0gKCk6IFJ1bnRpbWVPYmplY3QgPT4ge1xuICAgIHRoaXMuX291dGVyQ29udGFpbmVyID0gbmV3IFJ1bnRpbWVDb250YWluZXIoKTtcblxuICAgIC8vIENvbnRlbnQgbmFtZXMgZm9yIGRpZmZlcmVudCB0eXBlcyBvZiBjaG9pY2U6XG4gICAgLy8gICogc3RhcnQgY29udGVudCBbY2hvaWNlIG9ubHkgY29udGVudF0gaW5uZXIgY29udGVudFxuICAgIC8vICAqIHN0YXJ0IGNvbnRlbnQgICAtPiBkaXZlcnRcbiAgICAvLyAgKiBzdGFydCBjb250ZW50XG4gICAgLy8gICogW2Nob2ljZSBvbmx5IGNvbnRlbnRdXG5cbiAgICAvLyBIbW0sIHRoaXMgc3RydWN0dXJlIGhhcyBiZWNvbWUgc2xpZ2h0bHkgaW5zYW5lIVxuICAgIC8vXG4gICAgLy8gW1xuICAgIC8vICAgICBFdmFsU3RhcnRcbiAgICAvLyAgICAgYXNzaWduICRyID0gJHIxICAgLS0gcmV0dXJuIHRhcmdldCA9IHJldHVybiBsYWJlbCAxXG4gICAgLy8gICAgIEJlZ2luU3RyaW5nXG4gICAgLy8gICAgIC0+IHNcbiAgICAvLyAgICAgWyhyMSldICAgICAgICAgICAgLS0gcmV0dXJuIGxhYmVsIDEgKGFmdGVyIHN0YXJ0IGNvbnRlbnQpXG4gICAgLy8gICAgIEVuZFN0cmluZ1xuICAgIC8vICAgICBCZWdpblN0cmluZ1xuICAgIC8vICAgICAuLi4gY2hvaWNlIG9ubHkgY29udGVudFxuICAgIC8vICAgICBFbmRFdmFsXG4gICAgLy8gICAgIENvbmRpdGlvbiBleHByZXNzaW9uXG4gICAgLy8gICAgIGNob2ljZTogLT4gXCJjLTBcIlxuICAgIC8vICAgICAocykgPSBbXG4gICAgLy8gICAgICAgICBzdGFydCBjb250ZW50XG4gICAgLy8gICAgICAgICAtPiByICAgICAgICAgIC0tIGdvdG8gcmV0dXJuIGxhYmVsIDEgb3IgMlxuICAgIC8vICAgICBdXG4gICAgLy8gIF1cbiAgICAvL1xuICAgIC8vICBpbiBwYXJlbnQncyBjb250YWluZXI6ICh0aGUgaW5uZXIgY29udGVudCBmb3IgdGhlIGNob2ljZSlcbiAgICAvL1xuICAgIC8vICAoYy0wKSA9IFtcbiAgICAvLyAgICAgIEV2YWxTdGFydFxuICAgIC8vICAgICAgYXNzaWduICRyID0gJHIyICAgLS0gcmV0dXJuIHRhcmdldCA9IHJldHVybiBsYWJlbCAyXG4gICAgLy8gICAgICBFbmRFdmFsXG4gICAgLy8gICAgICAtPiBzXG4gICAgLy8gICAgICBbKHIyKV0gICAgICAgICAgICAtLSByZXR1cm4gbGFiZWwgMSAoYWZ0ZXIgc3RhcnQgY29udGVudClcbiAgICAvLyAgICAgIGlubmVyIGNvbnRlbnRcbiAgICAvLyAgXVxuICAgIC8vXG5cbiAgICB0aGlzLl9ydW50aW1lQ2hvaWNlID0gbmV3IENob2ljZVBvaW50KHRoaXMub25jZU9ubHkpO1xuICAgIHRoaXMuX3J1bnRpbWVDaG9pY2UuaXNJbnZpc2libGVEZWZhdWx0ID0gdGhpcy5pc0ludmlzaWJsZURlZmF1bHQ7XG5cbiAgICBpZiAodGhpcy5zdGFydENvbnRlbnQgfHwgdGhpcy5jaG9pY2VPbmx5Q29udGVudCB8fCB0aGlzLmNvbmRpdGlvbikge1xuICAgICAgdGhpcy5fb3V0ZXJDb250YWluZXIuQWRkQ29udGVudChSdW50aW1lQ29udHJvbENvbW1hbmQuRXZhbFN0YXJ0KCkpO1xuICAgIH1cblxuICAgIC8vIFN0YXJ0IGNvbnRlbnQgaXMgcHV0IGludG8gYSBuYW1lZCBjb250YWluZXIgdGhhdCdzIHJlZmVyZW5jZWQgYm90aFxuICAgIC8vIHdoZW4gZGlzcGxheWluZyB0aGUgY2hvaWNlIGluaXRpYWxseSwgYW5kIHdoZW4gZ2VuZXJhdGluZyB0aGUgdGV4dFxuICAgIC8vIHdoZW4gdGhlIGNob2ljZSBpcyBjaG9zZW4uXG4gICAgaWYgKHRoaXMuc3RhcnRDb250ZW50KSB7XG4gICAgICAvLyBHZW5lcmF0ZSBzdGFydCBjb250ZW50IGFuZCByZXR1cm5cbiAgICAgIC8vICAtIFdlIGNhbid0IHVzZSBhIGZ1bmN0aW9uIHNpbmNlIGl0IHVzZXMgYSBjYWxsIHN0YWNrIGVsZW1lbnQsIHdoaWNoIHdvdWxkXG4gICAgICAvLyAgICBwdXQgdGVtcG9yYXJ5IHZhbHVlcyBvdXQgb2Ygc2NvcGUuIEluc3RlYWQgd2UgbWFudWFsbHkgZGl2ZXJ0IGFyb3VuZC5cbiAgICAgIC8vICAtICRyIGlzIGEgdmFyaWFibGUgZGl2ZXJ0IHRhcmdldCBjb250YWlucyB0aGUgcmV0dXJuIHBvaW50XG4gICAgICB0aGlzLl9yZXR1cm5Ub1IxID0gbmV3IERpdmVydFRhcmdldFZhbHVlKCk7XG4gICAgICB0aGlzLl9vdXRlckNvbnRhaW5lci5BZGRDb250ZW50KHRoaXMuX3JldHVyblRvUjEpO1xuXG4gICAgICBjb25zdCB2YXJBc3NpZ24gPSBuZXcgUnVudGltZVZhcmlhYmxlQXNzaWdubWVudChcIiRyXCIsIHRydWUpO1xuICAgICAgdGhpcy5fb3V0ZXJDb250YWluZXIuQWRkQ29udGVudCh2YXJBc3NpZ24pO1xuXG4gICAgICAvLyBNYXJrIHRoZSBzdGFydCBvZiB0aGUgY2hvaWNlIHRleHQgZ2VuZXJhdGlvbiwgc28gdGhhdCB0aGUgcnVudGltZVxuICAgICAgLy8ga25vd3Mgd2hlcmUgdG8gcmV3aW5kIHRvIHRvIGV4dHJhY3QgdGhlIGNvbnRlbnQgZnJvbSB0aGUgb3V0cHV0IHN0cmVhbS5cbiAgICAgIHRoaXMuX291dGVyQ29udGFpbmVyLkFkZENvbnRlbnQoUnVudGltZUNvbnRyb2xDb21tYW5kLkJlZ2luU3RyaW5nKCkpO1xuXG4gICAgICB0aGlzLl9kaXZlcnRUb1N0YXJ0Q29udGVudE91dGVyID0gbmV3IFJ1bnRpbWVEaXZlcnQoKTtcbiAgICAgIHRoaXMuX291dGVyQ29udGFpbmVyLkFkZENvbnRlbnQodGhpcy5fZGl2ZXJ0VG9TdGFydENvbnRlbnRPdXRlcik7XG5cbiAgICAgIC8vIFN0YXJ0IGNvbnRlbnQgaXRzZWxmIGluIGEgbmFtZWQgY29udGFpbmVyXG4gICAgICB0aGlzLl9zdGFydENvbnRlbnRSdW50aW1lQ29udGFpbmVyID1cbiAgICAgICAgdGhpcy5zdGFydENvbnRlbnQuR2VuZXJhdGVSdW50aW1lT2JqZWN0KCkgYXMgUnVudGltZUNvbnRhaW5lcjtcbiAgICAgIHRoaXMuX3N0YXJ0Q29udGVudFJ1bnRpbWVDb250YWluZXIubmFtZSA9IFwic1wiO1xuXG4gICAgICAvLyBFZmZlY3RpdmVseSwgdGhlIFwicmV0dXJuXCIgc3RhdGVtZW50IC0gcmV0dXJuIHRvIHRoZSBwb2ludCBzcGVjaWZpZWQgYnkgJHJcbiAgICAgIGNvbnN0IHZhckRpdmVydCA9IG5ldyBSdW50aW1lRGl2ZXJ0KCk7XG4gICAgICB2YXJEaXZlcnQudmFyaWFibGVEaXZlcnROYW1lID0gXCIkclwiO1xuICAgICAgdGhpcy5fc3RhcnRDb250ZW50UnVudGltZUNvbnRhaW5lci5BZGRDb250ZW50KHZhckRpdmVydCk7XG5cbiAgICAgIC8vIEFkZCB0aGUgY29udGFpbmVyXG4gICAgICB0aGlzLl9vdXRlckNvbnRhaW5lci5BZGRUb05hbWVkQ29udGVudE9ubHkoXG4gICAgICAgIHRoaXMuX3N0YXJ0Q29udGVudFJ1bnRpbWVDb250YWluZXJcbiAgICAgICk7XG5cbiAgICAgIC8vIFRoaXMgaXMgdGhlIGxhYmVsIHRvIHJldHVybiB0b1xuICAgICAgdGhpcy5fcjFMYWJlbCA9IG5ldyBSdW50aW1lQ29udGFpbmVyKCk7XG4gICAgICB0aGlzLl9yMUxhYmVsLm5hbWUgPSBcIiRyMVwiO1xuICAgICAgdGhpcy5fb3V0ZXJDb250YWluZXIuQWRkQ29udGVudCh0aGlzLl9yMUxhYmVsKTtcblxuICAgICAgdGhpcy5fb3V0ZXJDb250YWluZXIuQWRkQ29udGVudChSdW50aW1lQ29udHJvbENvbW1hbmQuRW5kU3RyaW5nKCkpO1xuXG4gICAgICB0aGlzLl9ydW50aW1lQ2hvaWNlLmhhc1N0YXJ0Q29udGVudCA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gQ2hvaWNlIG9ubHkgY29udGVudCAtIG1hcmsgdGhlIHN0YXJ0LCB0aGVuIGdlbmVyYXRlIGl0IGRpcmVjdGx5IGludG8gdGhlIG91dGVyIGNvbnRhaW5lclxuICAgIGlmICh0aGlzLmNob2ljZU9ubHlDb250ZW50KSB7XG4gICAgICB0aGlzLl9vdXRlckNvbnRhaW5lci5BZGRDb250ZW50KFJ1bnRpbWVDb250cm9sQ29tbWFuZC5CZWdpblN0cmluZygpKTtcblxuICAgICAgY29uc3QgY2hvaWNlT25seVJ1bnRpbWVDb250ZW50ID1cbiAgICAgICAgdGhpcy5jaG9pY2VPbmx5Q29udGVudC5HZW5lcmF0ZVJ1bnRpbWVPYmplY3QoKSBhcyBSdW50aW1lQ29udGFpbmVyO1xuICAgICAgdGhpcy5fb3V0ZXJDb250YWluZXIuQWRkQ29udGVudHNPZkNvbnRhaW5lcihjaG9pY2VPbmx5UnVudGltZUNvbnRlbnQpO1xuXG4gICAgICB0aGlzLl9vdXRlckNvbnRhaW5lci5BZGRDb250ZW50KFJ1bnRpbWVDb250cm9sQ29tbWFuZC5FbmRTdHJpbmcoKSk7XG5cbiAgICAgIHRoaXMuX3J1bnRpbWVDaG9pY2UuaGFzQ2hvaWNlT25seUNvbnRlbnQgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIEdlbmVyYXRlIGFueSBjb25kaXRpb24gZm9yIHRoaXMgY2hvaWNlXG4gICAgaWYgKHRoaXMuY29uZGl0aW9uKSB7XG4gICAgICB0aGlzLmNvbmRpdGlvbi5HZW5lcmF0ZUludG9Db250YWluZXIodGhpcy5fb3V0ZXJDb250YWluZXIpO1xuICAgICAgdGhpcy5fcnVudGltZUNob2ljZS5oYXNDb25kaXRpb24gPSB0cnVlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXJ0Q29udGVudCB8fCB0aGlzLmNob2ljZU9ubHlDb250ZW50IHx8IHRoaXMuY29uZGl0aW9uKSB7XG4gICAgICB0aGlzLl9vdXRlckNvbnRhaW5lci5BZGRDb250ZW50KFJ1bnRpbWVDb250cm9sQ29tbWFuZC5FdmFsRW5kKCkpO1xuICAgIH1cblxuICAgIC8vIEFkZCBjaG9pY2UgaXRzZWxmXG4gICAgdGhpcy5fb3V0ZXJDb250YWluZXIuQWRkQ29udGVudCh0aGlzLl9ydW50aW1lQ2hvaWNlKTtcblxuICAgIC8vIENvbnRhaW5lciB0aGF0IGNob2ljZSBwb2ludHMgdG8gZm9yIHdoZW4gaXQncyBjaG9zZW5cbiAgICB0aGlzLl9pbm5lckNvbnRlbnRDb250YWluZXIgPSBuZXcgUnVudGltZUNvbnRhaW5lcigpO1xuXG4gICAgLy8gUmVwZWF0IHN0YXJ0IGNvbnRlbnQgYnkgZGl2ZXJ0aW5nIHRvIGl0cyBjb250YWluZXJcbiAgICBpZiAodGhpcy5zdGFydENvbnRlbnQpIHtcbiAgICAgIC8vIFNldCB0aGUgcmV0dXJuIHBvaW50IHdoZW4ganVtcGluZyBiYWNrIGludG8gdGhlIHN0YXJ0IGNvbnRlbnRcbiAgICAgIC8vICAtIEluIHRoaXMgY2FzZSwgaXQncyB0aGUgJHIyIHBvaW50LCB3aXRoaW4gdGhlIGNob2ljZSBjb250ZW50IFwiY1wiLlxuICAgICAgdGhpcy5fcmV0dXJuVG9SMiA9IG5ldyBEaXZlcnRUYXJnZXRWYWx1ZSgpO1xuICAgICAgdGhpcy5faW5uZXJDb250ZW50Q29udGFpbmVyLkFkZENvbnRlbnQoUnVudGltZUNvbnRyb2xDb21tYW5kLkV2YWxTdGFydCgpKTtcbiAgICAgIHRoaXMuX2lubmVyQ29udGVudENvbnRhaW5lci5BZGRDb250ZW50KHRoaXMuX3JldHVyblRvUjIpO1xuICAgICAgdGhpcy5faW5uZXJDb250ZW50Q29udGFpbmVyLkFkZENvbnRlbnQoUnVudGltZUNvbnRyb2xDb21tYW5kLkV2YWxFbmQoKSk7XG4gICAgICBjb25zdCB2YXJBc3NpZ24gPSBuZXcgUnVudGltZVZhcmlhYmxlQXNzaWdubWVudChcIiRyXCIsIHRydWUpO1xuICAgICAgdGhpcy5faW5uZXJDb250ZW50Q29udGFpbmVyLkFkZENvbnRlbnQodmFyQXNzaWduKTtcblxuICAgICAgLy8gTWFpbiBkaXZlcnQgaW50byBzdGFydCBjb250ZW50XG4gICAgICB0aGlzLl9kaXZlcnRUb1N0YXJ0Q29udGVudElubmVyID0gbmV3IFJ1bnRpbWVEaXZlcnQoKTtcbiAgICAgIHRoaXMuX2lubmVyQ29udGVudENvbnRhaW5lci5BZGRDb250ZW50KHRoaXMuX2RpdmVydFRvU3RhcnRDb250ZW50SW5uZXIpO1xuXG4gICAgICAvLyBEZWZpbmUgbGFiZWwgdG8gcmV0dXJuIHRvXG4gICAgICB0aGlzLl9yMkxhYmVsID0gbmV3IFJ1bnRpbWVDb250YWluZXIoKTtcbiAgICAgIHRoaXMuX3IyTGFiZWwubmFtZSA9IFwiJHIyXCI7XG4gICAgICB0aGlzLl9pbm5lckNvbnRlbnRDb250YWluZXIuQWRkQ29udGVudCh0aGlzLl9yMkxhYmVsKTtcbiAgICB9XG5cbiAgICAvLyBDaG9pY2UncyBvd24gaW5uZXIgY29udGVudFxuICAgIGlmICh0aGlzLmlubmVyQ29udGVudCkge1xuICAgICAgY29uc3QgaW5uZXJDaG9pY2VPbmx5Q29udGVudCA9XG4gICAgICAgIHRoaXMuaW5uZXJDb250ZW50LkdlbmVyYXRlUnVudGltZU9iamVjdCgpIGFzIFJ1bnRpbWVDb250YWluZXI7XG4gICAgICB0aGlzLl9pbm5lckNvbnRlbnRDb250YWluZXIuQWRkQ29udGVudHNPZkNvbnRhaW5lcihcbiAgICAgICAgaW5uZXJDaG9pY2VPbmx5Q29udGVudFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdG9yeS5jb3VudEFsbFZpc2l0cykge1xuICAgICAgdGhpcy5faW5uZXJDb250ZW50Q29udGFpbmVyLnZpc2l0c1Nob3VsZEJlQ291bnRlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5faW5uZXJDb250ZW50Q29udGFpbmVyLmNvdW50aW5nQXRTdGFydE9ubHkgPSB0cnVlO1xuXG4gICAgcmV0dXJuIHRoaXMuX291dGVyQ29udGFpbmVyO1xuICB9O1xuXG4gIHB1YmxpYyBSZXNvbHZlUmVmZXJlbmNlcyhjb250ZXh0OiBTdG9yeSk6IHZvaWQge1xuICAgIC8vIFdlYXZlIHN0eWxlIGNob2ljZSAtIHRhcmdldCBvd24gY29udGVudCBjb250YWluZXJcbiAgICBpZiAodGhpcy5faW5uZXJDb250ZW50Q29udGFpbmVyKSB7XG4gICAgICB0aGlzLnJ1bnRpbWVDaG9pY2UucGF0aE9uQ2hvaWNlID0gdGhpcy5faW5uZXJDb250ZW50Q29udGFpbmVyLnBhdGg7XG5cbiAgICAgIGlmICh0aGlzLm9uY2VPbmx5KSB7XG4gICAgICAgIHRoaXMuX2lubmVyQ29udGVudENvbnRhaW5lci52aXNpdHNTaG91bGRCZUNvdW50ZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9yZXR1cm5Ub1IxKSB7XG4gICAgICBpZiAoIXRoaXMuX3IxTGFiZWwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3JldHVyblRvUjEudGFyZ2V0UGF0aCA9IHRoaXMuX3IxTGFiZWwucGF0aDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fcmV0dXJuVG9SMikge1xuICAgICAgaWYgKCF0aGlzLl9yMkxhYmVsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9yZXR1cm5Ub1IyLnRhcmdldFBhdGggPSB0aGlzLl9yMkxhYmVsLnBhdGg7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2RpdmVydFRvU3RhcnRDb250ZW50T3V0ZXIpIHtcbiAgICAgIGlmICghdGhpcy5fc3RhcnRDb250ZW50UnVudGltZUNvbnRhaW5lcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fZGl2ZXJ0VG9TdGFydENvbnRlbnRPdXRlci50YXJnZXRQYXRoID1cbiAgICAgICAgdGhpcy5fc3RhcnRDb250ZW50UnVudGltZUNvbnRhaW5lci5wYXRoO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9kaXZlcnRUb1N0YXJ0Q29udGVudElubmVyKSB7XG4gICAgICBpZiAoIXRoaXMuX3N0YXJ0Q29udGVudFJ1bnRpbWVDb250YWluZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2RpdmVydFRvU3RhcnRDb250ZW50SW5uZXIudGFyZ2V0UGF0aCA9XG4gICAgICAgIHRoaXMuX3N0YXJ0Q29udGVudFJ1bnRpbWVDb250YWluZXIucGF0aDtcbiAgICB9XG5cbiAgICBzdXBlci5SZXNvbHZlUmVmZXJlbmNlcyhjb250ZXh0KTtcblxuICAgIGlmICh0aGlzLmlkZW50aWZpZXIgJiYgKHRoaXMuaWRlbnRpZmllcj8ubmFtZSB8fCBcIlwiKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb250ZXh0LkNoZWNrRm9yTmFtaW5nQ29sbGlzaW9ucyhcbiAgICAgICAgdGhpcyBhcyBQYXJzZWRPYmplY3QsXG4gICAgICAgIHRoaXMuaWRlbnRpZmllcixcbiAgICAgICAgU3ltYm9sVHlwZS5TdWJGbG93QW5kV2VhdmVcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlYWRvbmx5IHRvU3RyaW5nID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLmNob2ljZU9ubHlDb250ZW50ICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gYCogJHt0aGlzLnN0YXJ0Q29udGVudH1bJHt0aGlzLmNob2ljZU9ubHlDb250ZW50fV0uLi5gO1xuICAgIH1cblxuICAgIHJldHVybiBgKiAke3RoaXMuc3RhcnRDb250ZW50fS4uLmA7XG4gIH07XG59XG4iLCJleHBvcnQgY2xhc3MgU3RyaW5nUGFyc2VyRWxlbWVudCB7XG4gIHB1YmxpYyBzdGF0aWMgX3VuaXF1ZUlkQ291bnRlcjogbnVtYmVyID0gMTAwMDtcblxuICBwdWJsaWMgY2hhcmFjdGVySW5kZXg6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBjaGFyYWN0ZXJJbkxpbmVJbmRleDogbnVtYmVyID0gMDtcbiAgcHVibGljIGxpbmVJbmRleDogbnVtYmVyID0gMDtcbiAgcHVibGljIHJlcG9ydGVkRXJyb3JJblNjb3BlOiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyB1bmlxdWVJZDogbnVtYmVyID0gMDtcbiAgcHVibGljIGN1c3RvbUZsYWdzOiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyByZWFkb25seSBDb3B5RnJvbSA9IChmcm9tRWxlbWVudDogU3RyaW5nUGFyc2VyRWxlbWVudCk6IHZvaWQgPT4ge1xuICAgIFN0cmluZ1BhcnNlckVsZW1lbnQuX3VuaXF1ZUlkQ291bnRlcisrO1xuICAgIHRoaXMudW5pcXVlSWQgPSBTdHJpbmdQYXJzZXJFbGVtZW50Ll91bmlxdWVJZENvdW50ZXI7XG4gICAgdGhpcy5jaGFyYWN0ZXJJbmRleCA9IGZyb21FbGVtZW50LmNoYXJhY3RlckluZGV4O1xuICAgIHRoaXMuY2hhcmFjdGVySW5MaW5lSW5kZXggPSBmcm9tRWxlbWVudC5jaGFyYWN0ZXJJbkxpbmVJbmRleDtcbiAgICB0aGlzLmxpbmVJbmRleCA9IGZyb21FbGVtZW50LmxpbmVJbmRleDtcbiAgICB0aGlzLmN1c3RvbUZsYWdzID0gZnJvbUVsZW1lbnQuY3VzdG9tRmxhZ3M7XG4gICAgdGhpcy5yZXBvcnRlZEVycm9ySW5TY29wZSA9IGZhbHNlO1xuICB9O1xuXG4gIC8vIFNxdWFzaCBpcyB1c2VkIHdoZW4gc3VjY2VlZGluZyBmcm9tIGEgcnVsZSxcbiAgLy8gc28gb25seSB0aGUgc3RhdGUgaW5mb3JtYXRpb24gd2Ugd2FudGVkIHRvIGNhcnJ5IGZvcndhcmQgaXNcbiAgLy8gcmV0YWluZWQuIGUuZy4gY2hhcmFjdGVySW5kZXggYW5kIGxpbmVJbmRleCBhcmUgZ2xvYmFsLFxuICAvLyBob3dldmVyIHVuaXF1ZUlkIGlzIHNwZWNpZmljIHRvIHRoZSBpbmRpdmlkdWFsIHJ1bGUsXG4gIC8vIGFuZCBsaWtld2lzZSwgY3VzdG9tIGZsYWdzIGFyZSBkZXNpZ25lZCBmb3IgdGhlIHRlbXBvcmFyeVxuICAvLyBzdGF0ZSBvZiB0aGUgaW5kaXZpZHVhbCBydWxlIHRvby5cbiAgcHVibGljIHJlYWRvbmx5IFNxdWFzaEZyb20gPSAoZnJvbUVsZW1lbnQ6IFN0cmluZ1BhcnNlckVsZW1lbnQpOiB2b2lkID0+IHtcbiAgICB0aGlzLmNoYXJhY3RlckluZGV4ID0gZnJvbUVsZW1lbnQuY2hhcmFjdGVySW5kZXg7XG4gICAgdGhpcy5jaGFyYWN0ZXJJbkxpbmVJbmRleCA9IGZyb21FbGVtZW50LmNoYXJhY3RlckluTGluZUluZGV4O1xuICAgIHRoaXMubGluZUluZGV4ID0gZnJvbUVsZW1lbnQubGluZUluZGV4O1xuICAgIHRoaXMucmVwb3J0ZWRFcnJvckluU2NvcGUgPSBmcm9tRWxlbWVudC5yZXBvcnRlZEVycm9ySW5TY29wZTtcbiAgICB0aGlzLmN1c3RvbUZsYWdzID0gZnJvbUVsZW1lbnQuY3VzdG9tRmxhZ3M7XG4gIH07XG59XG4iLCJpbXBvcnQgeyBTdHJpbmdQYXJzZXJFbGVtZW50IH0gZnJvbSBcIi4vU3RyaW5nUGFyc2VyRWxlbWVudFwiO1xuXG5leHBvcnQgY2xhc3MgU3RyaW5nUGFyc2VyU3RhdGUge1xuICBwcml2YXRlIF9zdGFjazogU3RyaW5nUGFyc2VyRWxlbWVudFtdID0gW107XG4gIHByaXZhdGUgX251bUVsZW1lbnRzOiBudW1iZXIgPSAwO1xuXG4gIGdldCBjdXJyZW50RWxlbWVudCgpOiBTdHJpbmdQYXJzZXJFbGVtZW50IHtcbiAgICByZXR1cm4gdGhpcy5fc3RhY2tbdGhpcy5fbnVtRWxlbWVudHMgLSAxXTtcbiAgfVxuXG4gIGdldCBsaW5lSW5kZXgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50RWxlbWVudC5saW5lSW5kZXg7XG4gIH1cblxuICBzZXQgbGluZUluZGV4KHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLmN1cnJlbnRFbGVtZW50LmxpbmVJbmRleCA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGNoYXJhY3RlckluZGV4KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudEVsZW1lbnQuY2hhcmFjdGVySW5kZXg7XG4gIH1cblxuICBzZXQgY2hhcmFjdGVySW5kZXgodmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMuY3VycmVudEVsZW1lbnQuY2hhcmFjdGVySW5kZXggPSB2YWx1ZTtcbiAgfVxuXG4gIGdldCBjaGFyYWN0ZXJJbkxpbmVJbmRleCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRFbGVtZW50LmNoYXJhY3RlckluTGluZUluZGV4O1xuICB9XG5cbiAgc2V0IGNoYXJhY3RlckluTGluZUluZGV4KHZhbHVlOiBudW1iZXIpIHtcbiAgICB0aGlzLmN1cnJlbnRFbGVtZW50LmNoYXJhY3RlckluTGluZUluZGV4ID0gdmFsdWU7XG4gIH1cblxuICBnZXQgY3VzdG9tRmxhZ3MoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50RWxlbWVudC5jdXN0b21GbGFncztcbiAgfVxuXG4gIHNldCBjdXN0b21GbGFncyh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5jdXJyZW50RWxlbWVudC5jdXN0b21GbGFncyA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGVycm9yUmVwb3J0ZWRBbHJlYWR5SW5TY29wZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50RWxlbWVudC5yZXBvcnRlZEVycm9ySW5TY29wZTtcbiAgfVxuXG4gIGdldCBzdGFja0hlaWdodCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9udW1FbGVtZW50cztcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGtFeHBlY3RlZE1heFN0YWNrRGVwdGggPSAyMDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBrRXhwZWN0ZWRNYXhTdGFja0RlcHRoOyBpKyspIHtcbiAgICAgIHRoaXMuX3N0YWNrW2ldID0gbmV3IFN0cmluZ1BhcnNlckVsZW1lbnQoKTtcbiAgICB9XG4gICAgdGhpcy5fbnVtRWxlbWVudHMgPSAxO1xuICB9XG5cbiAgcHVibGljIHJlYWRvbmx5IFN0cmluZ1BhcnNlclN0YXRlID0gKCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGtFeHBlY3RlZE1heFN0YWNrRGVwdGg6IG51bWJlciA9IDIwMDtcbiAgICB0aGlzLl9zdGFjayA9IG5ldyBBcnJheShrRXhwZWN0ZWRNYXhTdGFja0RlcHRoKTtcblxuICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBrRXhwZWN0ZWRNYXhTdGFja0RlcHRoOyArK2lpKSB7XG4gICAgICB0aGlzLl9zdGFja1tpaV0gPSBuZXcgU3RyaW5nUGFyc2VyRWxlbWVudCgpO1xuICAgIH1cblxuICAgIHRoaXMuX251bUVsZW1lbnRzID0gMTtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgUHVzaCA9ICgpOiBudW1iZXIgPT4ge1xuICAgIGlmICh0aGlzLl9udW1FbGVtZW50cyA+PSB0aGlzLl9zdGFjay5sZW5ndGggJiYgdGhpcy5fbnVtRWxlbWVudHMgPiAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdGFjayBvdmVyZmxvdyBpbiBwYXJzZXIgc3RhdGUuXCIpO1xuICAgIH1cblxuICAgIGNvbnN0IHByZXZFbGVtZW50ID0gdGhpcy5fc3RhY2tbdGhpcy5fbnVtRWxlbWVudHMgLSAxXTtcbiAgICBjb25zdCBuZXdFbGVtZW50ID0gdGhpcy5fc3RhY2tbdGhpcy5fbnVtRWxlbWVudHNdO1xuICAgIHRoaXMuX251bUVsZW1lbnRzKys7XG5cbiAgICBuZXdFbGVtZW50LkNvcHlGcm9tKHByZXZFbGVtZW50KTtcblxuICAgIHJldHVybiBuZXdFbGVtZW50LnVuaXF1ZUlkO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBQb3AgPSAoZXhwZWN0ZWRSdWxlSWQ6IG51bWJlcik6IHZvaWQgPT4ge1xuICAgIGlmICh0aGlzLl9udW1FbGVtZW50cyA9PSAxKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiQXR0ZW1wdGluZyB0byByZW1vdmUgZmluYWwgc3RhY2sgZWxlbWVudCBpcyBpbGxlZ2FsISBNaXNtYXRjaGVkIEJlZ2luL1N1Y2NjZWVkL0ZhaWw/XCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY3VycmVudEVsZW1lbnQudW5pcXVlSWQgIT0gZXhwZWN0ZWRSdWxlSWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJNaXNtYXRjaGVkIHJ1bGUgSURzIHdoaWxlIFBvcGluZyAtIGRvIHlvdSBoYXZlIG1pc21hdGNoZWQgQmVnaW4vU3VjY2VlZC9GYWlsP1wiXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFJlc3RvcmUgc3RhdGVcbiAgICB0aGlzLl9udW1FbGVtZW50cyAtPSAxO1xuICB9O1xuXG4gIHB1YmxpYyBQZWVrID0gKGV4cGVjdGVkUnVsZUlkOiBudW1iZXIpID0+IHtcbiAgICBpZiAodGhpcy5jdXJyZW50RWxlbWVudC51bmlxdWVJZCAhPSBleHBlY3RlZFJ1bGVJZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIk1pc21hdGNoZWQgcnVsZSBJRHMgd2hpbGUgUGVla2luZyAtIGRvIHlvdSBoYXZlIG1pc21hdGNoZWQgQmVnaW4vU3VjY2VlZC9GYWlsP1wiXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9zdGFja1t0aGlzLl9udW1FbGVtZW50cyAtIDFdO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBQZWVrUGVudWx0aW1hdGUgPSAoKTogU3RyaW5nUGFyc2VyRWxlbWVudCB8IG51bGwgPT4ge1xuICAgIGlmICh0aGlzLl9udW1FbGVtZW50cyA+PSAyKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3RhY2tbdGhpcy5fbnVtRWxlbWVudHMgLSAyXTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvLyBSZWR1Y2Ugc3RhY2sgaGVpZ2h0IHdoaWxlIG1haW50YWluaW5nIGN1cnJlbnRFbGVtZW50XG4gIC8vIFJlbW92ZSBzZWNvbmQgbGFzdCBlbGVtZW50OiBpLmUuIFwic3F1YXNoIGxhc3QgdHdvIGVsZW1lbnRzIHRvZ2V0aGVyXCJcbiAgLy8gVXNlZCB3aGVuIHN1Y2NlZWRpbmcgZnJvbSBhIHJ1bGUgKGFuZCBPTkxZIHdoZW4gc3VjY2VlZGluZywgc2luY2VcbiAgLy8gdGhlIHN0YXRlIG9mIHRoZSB0b3AgZWxlbWVudCBpcyByZXRhaW5lZCkuXG4gIHB1YmxpYyByZWFkb25seSBTcXVhc2ggPSAoKTogdm9pZCA9PiB7XG4gICAgaWYgKHRoaXMuX251bUVsZW1lbnRzIDwgMikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkF0dGVtcHRpbmcgdG8gcmVtb3ZlIGZpbmFsIHN0YWNrIGVsZW1lbnQgaXMgaWxsZWdhbCEgTWlzbWF0Y2hlZCBCZWdpbi9TdWNjY2VlZC9GYWlsP1wiXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHBlbnVsdGltYXRlRWwgPSB0aGlzLl9zdGFja1t0aGlzLl9udW1FbGVtZW50cyAtIDJdO1xuICAgIGNvbnN0IGxhc3RFbCA9IHRoaXMuX3N0YWNrW3RoaXMuX251bUVsZW1lbnRzIC0gMV07XG5cbiAgICBwZW51bHRpbWF0ZUVsLlNxdWFzaEZyb20obGFzdEVsKTtcblxuICAgIHRoaXMuX251bUVsZW1lbnRzIC09IDE7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IE5vdGVFcnJvclJlcG9ydGVkID0gKCk6IHZvaWQgPT4ge1xuICAgIGZvciAoY29uc3QgZWwgb2YgdGhpcy5fc3RhY2spIHtcbiAgICAgIGVsLnJlcG9ydGVkRXJyb3JJblNjb3BlID0gdHJ1ZTtcbiAgICB9XG4gIH07XG59XG4iLCJpbXBvcnQgeyBDaGFyYWN0ZXJTZXQgfSBmcm9tIFwiLi4vQ2hhcmFjdGVyU2V0XCI7XG5pbXBvcnQgeyBQYXJzZWRPYmplY3QgfSBmcm9tIFwiLi4vUGFyc2VkSGllcmFyY2h5L09iamVjdFwiO1xuaW1wb3J0IHsgU3RyaW5nUGFyc2VyU3RhdGUgfSBmcm9tIFwiLi9TdHJpbmdQYXJzZXJTdGF0ZVwiO1xuaW1wb3J0IHsgU3RyaW5nUGFyc2VyRWxlbWVudCB9IGZyb20gXCIuL1N0cmluZ1BhcnNlckVsZW1lbnRcIjtcblxuZXhwb3J0IGNvbnN0IFBhcnNlU3VjY2VzcyA9IFN5bWJvbChcIlBhcnNlU3VjY2Vzc1N0cnVjdFwiKTtcblxuZXhwb3J0IHR5cGUgUGFyc2VSdWxlID0gKCkgPT4gUGFyc2VSdWxlUmV0dXJuO1xuXG5leHBvcnQgdHlwZSBQYXJzZVJ1bGVSZXR1cm4gPVxuICB8IG9iamVjdFxuICB8IHN0cmluZ1xuICB8IG51bGxcbiAgfCBudW1iZXJcbiAgfCAodHlwZW9mIFN0cmluZ1BhcnNlcilbXCJQYXJzZVN1Y2Nlc3NcIl07XG5cbmV4cG9ydCB0eXBlIFNwZWNpZmljUGFyc2VSdWxlPFQgZXh0ZW5kcyBQYXJzZVJ1bGU+ID0gVDtcblxuZXhwb3J0IGNsYXNzIFN0cmluZ1BhcnNlciB7XG4gIHB1YmxpYyBQYXJzZVJ1bGU6IFBhcnNlUnVsZSB8IG51bGwgPSBudWxsO1xuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUGFyc2VTdWNjZXNzOiB0eXBlb2YgUGFyc2VTdWNjZXNzID0gUGFyc2VTdWNjZXNzO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IG51bWJlcnNDaGFyYWN0ZXJTZXQgPSBuZXcgQ2hhcmFjdGVyU2V0KFwiMDEyMzQ1Njc4OVwiKTtcblxuICBwcml2YXRlIF9jaGFyczogc3RyaW5nW107XG5cbiAgcHVibGljIGVycm9ySGFuZGxlcjpcbiAgICB8IG51bGxcbiAgICB8ICgoXG4gICAgICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgICAgbGluZUluZGV4PzogbnVtYmVyLFxuICAgICAgICBpc1dhcm5pbmc/OiBib29sZWFuXG4gICAgICApID0+IHZvaWQpID0gbnVsbDtcbiAgcHVibGljIHN0YXRlOiBTdHJpbmdQYXJzZXJTdGF0ZTtcbiAgcHVibGljIGhhZEVycm9yOiBib29sZWFuID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3Ioc3RyOiBzdHJpbmcpIHtcbiAgICBjb25zdCBzdHJQcmVQcm9jID0gdGhpcy5QcmVQcm9jZXNzSW5wdXRTdHJpbmcoc3RyKTtcbiAgICB0aGlzLnN0YXRlID0gbmV3IFN0cmluZ1BhcnNlclN0YXRlKCk7XG5cbiAgICBpZiAoc3RyKSB7XG4gICAgICB0aGlzLl9jaGFycyA9IHN0clByZVByb2Muc3BsaXQoXCJcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2NoYXJzID0gW107XG4gICAgfVxuXG4gICAgdGhpcy5pbnB1dFN0cmluZyA9IHN0clByZVByb2M7XG4gIH1cblxuICBnZXQgY3VycmVudENoYXJhY3RlcigpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLmluZGV4ID49IDAgJiYgdGhpcy5yZW1haW5pbmdMZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5fY2hhcnNbdGhpcy5pbmRleF07XG4gICAgfVxuXG4gICAgcmV0dXJuIFwiMFwiO1xuICB9XG5cbiAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgYnkgZGVmYXVsdCwgYnV0IHByb3ZpZGUgYWJpbGl0eSBmb3Igc3ViY2xhc3Nlc1xuICAvLyB0byBtYW5pcHVsYXRlIHRoZSBzdHJpbmcgYmVmb3JlIGl0J3MgdXNlZCBhcyBpbnB1dCAoY29udmVydGVkIHRvIGEgY2hhciBhcnJheSlcbiAgcHVibGljIFByZVByb2Nlc3NJbnB1dFN0cmluZyhzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHN0cjtcbiAgfVxuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gUGFyc2Ugc3RhdGVcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIHB1YmxpYyByZWFkb25seSBCZWdpblJ1bGUgPSAoKTogbnVtYmVyID0+IHRoaXMuc3RhdGUuUHVzaCgpO1xuXG4gIHB1YmxpYyByZWFkb25seSBGYWlsUnVsZSA9IChleHBlY3RlZFJ1bGVJZDogbnVtYmVyKTogUGFyc2VSdWxlUmV0dXJuID0+IHtcbiAgICB0aGlzLnN0YXRlLlBvcChleHBlY3RlZFJ1bGVJZCk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IENhbmNlbFJ1bGUgPSAoZXhwZWN0ZWRSdWxlSWQ6IG51bWJlcik6IHZvaWQgPT4ge1xuICAgIHRoaXMuc3RhdGUuUG9wKGV4cGVjdGVkUnVsZUlkKTtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgU3VjY2VlZFJ1bGUgPSAoXG4gICAgZXhwZWN0ZWRSdWxlSWQ6IG51bWJlcixcbiAgICByZXN1bHQ6IFBhcnNlUnVsZVJldHVybiA9IG51bGxcbiAgKTogUGFyc2VSdWxlUmV0dXJuID0+IHtcbiAgICAvLyBHZXQgc3RhdGUgYXQgcG9pbnQgd2hlcmUgdGhpcyBydWxlIHN0YXJlZCBldmFsdWF0aW5nXG4gICAgY29uc3Qgc3RhdGVBdFN1Y2NlZWRSdWxlID0gdGhpcy5zdGF0ZS5QZWVrKGV4cGVjdGVkUnVsZUlkKTtcbiAgICBjb25zdCBzdGF0ZUF0QmVnaW5SdWxlID0gdGhpcy5zdGF0ZS5QZWVrUGVudWx0aW1hdGUoKTtcblxuICAgIC8vIEFsbG93IHN1YmNsYXNzIHRvIHJlY2VpdmUgY2FsbGJhY2tcbiAgICBpZiAodGhpcy5SdWxlRGlkU3VjY2VlZCkge1xuICAgICAgdGhpcy5SdWxlRGlkU3VjY2VlZChyZXN1bHQsIHN0YXRlQXRCZWdpblJ1bGUsIHN0YXRlQXRTdWNjZWVkUnVsZSk7XG4gICAgfVxuXG4gICAgLy8gRmxhdHRlbiBzdGF0ZSBzdGFjayBzbyB0aGF0IHdlIG1haW50YWluIHRoZSBzYW1lIHZhbHVlcyxcbiAgICAvLyBidXQgcmVtb3ZlIG9uZSBsZXZlbCBpbiB0aGUgc3RhY2suXG4gICAgdGhpcy5zdGF0ZS5TcXVhc2goKTtcblxuICAgIGxldCBmaW5hbFJlc3VsdDogUGFyc2VSdWxlUmV0dXJuID0gcmVzdWx0O1xuICAgIGlmIChmaW5hbFJlc3VsdCA9PT0gbnVsbCkge1xuICAgICAgZmluYWxSZXN1bHQgPSBTdHJpbmdQYXJzZXIuUGFyc2VTdWNjZXNzO1xuICAgIH1cblxuICAgIHJldHVybiBmaW5hbFJlc3VsdDtcbiAgfTtcblxuICBwdWJsaWMgUnVsZURpZFN1Y2NlZWQ/OiAoXG4gICAgcmVzdWx0OiBQYXJzZVJ1bGVSZXR1cm4sXG4gICAgc3RhcnRTdGF0ZTogU3RyaW5nUGFyc2VyRWxlbWVudCB8IG51bGwsXG4gICAgZW5kU3RhdGU6IFN0cmluZ1BhcnNlckVsZW1lbnRcbiAgKSA9PiB2b2lkO1xuXG4gIHB1YmxpYyByZWFkb25seSBFeHBlY3QgPSAoXG4gICAgcnVsZTogUGFyc2VSdWxlLFxuICAgIG1lc3NhZ2U6IHN0cmluZyB8IG51bGwgPSBudWxsLFxuICAgIHJlY292ZXJ5UnVsZTogUGFyc2VSdWxlIHwgbnVsbCA9IG51bGxcbiAgKTogUGFyc2VSdWxlUmV0dXJuID0+IHtcbiAgICBsZXQgcmVzdWx0OiBQYXJzZVJ1bGVSZXR1cm4gPSB0aGlzLlBhcnNlT2JqZWN0KHJ1bGUpO1xuICAgIGlmIChyZXN1bHQgPT09IG51bGwpIHtcbiAgICAgIGlmIChtZXNzYWdlID09PSBudWxsKSB7XG4gICAgICAgIG1lc3NhZ2UgPSBydWxlLm5hbWU7XG4gICAgICB9XG5cbiAgICAgIGxldCBidXRTYXc6IHN0cmluZztcbiAgICAgIGNvbnN0IGxpbmVSZW1haW5kZXI6IHN0cmluZyA9IHRoaXMuTGluZVJlbWFpbmRlcigpO1xuICAgICAgaWYgKGxpbmVSZW1haW5kZXIgPT09IG51bGwgfHwgbGluZVJlbWFpbmRlci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgYnV0U2F3ID0gXCJlbmQgb2YgbGluZVwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnV0U2F3ID0gYCcke2xpbmVSZW1haW5kZXJ9J2A7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuRXJyb3IoYEV4cGVjdGVkICR7bWVzc2FnZX0gYnV0IHNhdyAke2J1dFNhd31gKTtcblxuICAgICAgaWYgKHJlY292ZXJ5UnVsZSAhPT0gbnVsbCkge1xuICAgICAgICByZXN1bHQgPSByZWNvdmVyeVJ1bGUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHB1YmxpYyBFcnJvciA9IChtZXNzYWdlOiBzdHJpbmcsIGlzV2FybmluZzogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCA9PiB7XG4gICAgdGhpcy5FcnJvck9uTGluZShtZXNzYWdlLCB0aGlzLmxpbmVJbmRleCArIDEsIGlzV2FybmluZyk7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IEVycm9yV2l0aFBhcnNlZE9iamVjdCA9IChcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgcmVzdWx0OiBQYXJzZWRPYmplY3QsXG4gICAgaXNXYXJuaW5nOiBib29sZWFuID0gZmFsc2VcbiAgKTogdm9pZCA9PiB7XG4gICAgdGhpcy5FcnJvck9uTGluZShcbiAgICAgIG1lc3NhZ2UsXG4gICAgICByZXN1bHQuZGVidWdNZXRhZGF0YSA/IHJlc3VsdC5kZWJ1Z01ldGFkYXRhLnN0YXJ0TGluZU51bWJlciA6IC0xLFxuICAgICAgaXNXYXJuaW5nXG4gICAgKTtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgRXJyb3JPbkxpbmUgPSAoXG4gICAgbWVzc2FnZTogc3RyaW5nLFxuICAgIGxpbmVOdW1iZXI6IG51bWJlcixcbiAgICBpc1dhcm5pbmc6IGJvb2xlYW5cbiAgKTogdm9pZCA9PiB7XG4gICAgaWYgKCF0aGlzLnN0YXRlLmVycm9yUmVwb3J0ZWRBbHJlYWR5SW5TY29wZSkge1xuICAgICAgY29uc3QgZXJyb3JUeXBlID0gaXNXYXJuaW5nID8gXCJXYXJuaW5nXCIgOiBcIkVycm9yXCI7XG5cbiAgICAgIGlmICghdGhpcy5lcnJvckhhbmRsZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2Vycm9yVHlwZX0gb24gbGluZSAke2xpbmVOdW1iZXJ9OiAke21lc3NhZ2V9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVycm9ySGFuZGxlcihtZXNzYWdlLCB0aGlzLmluZGV4LCBsaW5lTnVtYmVyIC0gMSwgaXNXYXJuaW5nKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zdGF0ZS5Ob3RlRXJyb3JSZXBvcnRlZCgpO1xuICAgIH1cblxuICAgIGlmICghaXNXYXJuaW5nKSB7XG4gICAgICB0aGlzLmhhZEVycm9yID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IFdhcm5pbmcgPSAobWVzc2FnZTogc3RyaW5nKTogdm9pZCA9PlxuICAgIHRoaXMuRXJyb3IobWVzc2FnZSwgdHJ1ZSk7XG5cbiAgZ2V0IGVuZE9mSW5wdXQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaW5kZXggPj0gdGhpcy5fY2hhcnMubGVuZ3RoO1xuICB9XG5cbiAgZ2V0IHJlbWFpbmluZ1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9jaGFyc1xuICAgICAgLnNsaWNlKHRoaXMuaW5kZXgsIHRoaXMuaW5kZXggKyB0aGlzLnJlbWFpbmluZ0xlbmd0aClcbiAgICAgIC5qb2luKFwiXCIpO1xuICB9XG5cbiAgcHVibGljIHJlYWRvbmx5IExpbmVSZW1haW5kZXIgPSAoKTogc3RyaW5nID0+XG4gICAgdGhpcy5QZWVrKCgpID0+IHRoaXMuUGFyc2VVbnRpbENoYXJhY3RlcnNGcm9tU3RyaW5nKFwiXFxuXFxyXCIpKSBhcyBzdHJpbmc7XG5cbiAgZ2V0IHJlbWFpbmluZ0xlbmd0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5fY2hhcnMubGVuZ3RoIC0gdGhpcy5pbmRleDtcbiAgfVxuXG4gIHB1YmxpYyBpbnB1dFN0cmluZzogc3RyaW5nO1xuXG4gIGdldCBsaW5lSW5kZXgoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUubGluZUluZGV4O1xuICB9XG5cbiAgc2V0IGxpbmVJbmRleCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5zdGF0ZS5saW5lSW5kZXggPSB2YWx1ZTtcbiAgfVxuXG4gIHNldCBjaGFyYWN0ZXJJbkxpbmVJbmRleCh2YWx1ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5zdGF0ZS5jaGFyYWN0ZXJJbkxpbmVJbmRleCA9IHZhbHVlO1xuICB9XG5cbiAgZ2V0IGNoYXJhY3RlckluTGluZUluZGV4KCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLmNoYXJhY3RlckluTGluZUluZGV4O1xuICB9XG5cbiAgZ2V0IGluZGV4KCk6IG51bWJlciB7XG4gICAgLy8gSWYgd2Ugd2FudCBzdWJjbGFzcyBwYXJzZXJzIHRvIGJlIGFibGUgdG8gc2V0IHRoZSBpbmRleCBkaXJlY3RseSxcbiAgICAvLyB0aGVuIHdlIHdvdWxkIG5lZWQgdG8ga25vdyB3aGF0IHRoZSBsaW5lSW5kZXggb2YgdGhlIG5ld1xuICAgIC8vIGluZGV4IHdvdWxkIGJlIC0gd291bGQgd2UgaGF2ZSB0byBzdGVwIHRocm91Z2ggbWFudWFsbHlcbiAgICAvLyBjb3VudGluZyB0aGUgbmV3bGluZXMgdG8gZG8gc28/XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuY2hhcmFjdGVySW5kZXg7XG4gIH1cblxuICBzZXQgaW5kZXgodmFsdWU6IG51bWJlcikge1xuICAgIHRoaXMuc3RhdGUuY2hhcmFjdGVySW5kZXggPSB2YWx1ZTtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBTZXRGbGFnID0gKGZsYWc6IG51bWJlciwgdHJ1ZU9yRmFsc2U6IGJvb2xlYW4pOiB2b2lkID0+IHtcbiAgICBpZiAodHJ1ZU9yRmFsc2UpIHtcbiAgICAgIHRoaXMuc3RhdGUuY3VzdG9tRmxhZ3MgfD0gZmxhZztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdGF0ZS5jdXN0b21GbGFncyAmPSB+ZmxhZztcbiAgICB9XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IEdldEZsYWcgPSAoZmxhZzogbnVtYmVyKTogYm9vbGVhbiA9PlxuICAgIEJvb2xlYW4odGhpcy5zdGF0ZS5jdXN0b21GbGFncyAmIGZsYWcpO1xuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gU3RydWN0dXJpbmdcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIHB1YmxpYyBQYXJzZU9iamVjdCA9IChydWxlOiBQYXJzZVJ1bGUpOiBQYXJzZVJ1bGVSZXR1cm4gPT4ge1xuICAgIGNvbnN0IHJ1bGVJZDogbnVtYmVyID0gdGhpcy5CZWdpblJ1bGUoKTtcbiAgICBjb25zdCBzdGFja0hlaWdodEJlZm9yZSA9IHRoaXMuc3RhdGUuc3RhY2tIZWlnaHQ7XG4gICAgY29uc3QgcmVzdWx0ID0gcnVsZSgpO1xuXG4gICAgaWYgKHN0YWNrSGVpZ2h0QmVmb3JlICE9PSB0aGlzLnN0YXRlLnN0YWNrSGVpZ2h0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNtYXRjaGVkIEJlZ2luL0ZhaWwvU3VjY2VlZCBydWxlc1wiKTtcbiAgICB9XG5cbiAgICBpZiAocmVzdWx0ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5GYWlsUnVsZShydWxlSWQpO1xuICAgIH1cblxuICAgIHRoaXMuU3VjY2VlZFJ1bGUocnVsZUlkLCByZXN1bHQpO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgUGFyc2UgPSA8VCBleHRlbmRzIFBhcnNlUnVsZT4oXG4gICAgcnVsZTogU3BlY2lmaWNQYXJzZVJ1bGU8VD5cbiAgKTogUGFyc2VSdWxlUmV0dXJuID0+IHtcbiAgICBjb25zdCBydWxlSWQ6IG51bWJlciA9IHRoaXMuQmVnaW5SdWxlKCk7XG5cbiAgICBjb25zdCByZXN1bHQ6IFBhcnNlUnVsZVJldHVybiA9IHJ1bGUoKTtcbiAgICBpZiAocmVzdWx0ID09PSBudWxsKSB7XG4gICAgICB0aGlzLkZhaWxSdWxlKHJ1bGVJZCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLlN1Y2NlZWRSdWxlKHJ1bGVJZCwgcmVzdWx0KTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IE9uZU9mID0gKGFycmF5OiBQYXJzZVJ1bGVbXSk6IFBhcnNlUnVsZVJldHVybiA9PiB7XG4gICAgZm9yIChjb25zdCBydWxlIG9mIGFycmF5KSB7XG4gICAgICBjb25zdCByZXN1bHQgPSB0aGlzLlBhcnNlT2JqZWN0KHJ1bGUpO1xuICAgICAgaWYgKHJlc3VsdCAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBPbmVPck1vcmUgPSAocnVsZTogUGFyc2VSdWxlKTogUGFyc2VSdWxlUmV0dXJuW10gfCBudWxsID0+IHtcbiAgICBjb25zdCByZXN1bHRzOiBQYXJzZVJ1bGVSZXR1cm5bXSA9IFtdO1xuICAgIGxldCByZXN1bHQ6IFBhcnNlUnVsZVJldHVybiA9IG51bGw7XG5cbiAgICBkbyB7XG4gICAgICByZXN1bHQgPSB0aGlzLlBhcnNlT2JqZWN0KHJ1bGUpO1xuICAgICAgaWYgKHJlc3VsdCAhPT0gbnVsbCkge1xuICAgICAgICByZXN1bHRzLnB1c2gocmVzdWx0KTtcbiAgICAgIH1cbiAgICB9IHdoaWxlIChyZXN1bHQgIT09IG51bGwpO1xuXG4gICAgaWYgKHJlc3VsdHMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IE9wdGlvbmFsID1cbiAgICAocnVsZTogUGFyc2VSdWxlKTogUGFyc2VSdWxlID0+XG4gICAgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5QYXJzZU9iamVjdChydWxlKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IG51bGwpIHJldHVybiBTdHJpbmdQYXJzZXIuUGFyc2VTdWNjZXNzO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gIC8vIFJldHVybiBQYXJzZVN1Y2Nlc3MgaW5zdGVhZCB0aGUgcmVhbCByZXN1bHQgc28gdGhhdCBpdCBnZXRzIGV4Y2x1ZGVkXG4gIC8vIGZyb20gcmVzdWx0IGFycmF5cyAoZS5nLiBJbnRlcmxlYXZlKVxuICBwdWJsaWMgcmVhZG9ubHkgRXhjbHVkZSA9XG4gICAgKHJ1bGU6IFBhcnNlUnVsZSk6IFBhcnNlUnVsZSA9PlxuICAgICgpID0+XG4gICAgICB0aGlzLlBhcnNlT2JqZWN0KHJ1bGUpICYmIFN0cmluZ1BhcnNlci5QYXJzZVN1Y2Nlc3M7XG5cbiAgLy8gQ29tYmluYXRpb24gb2YgYm90aCBvZiB0aGUgYWJvdmVcbiAgcHVibGljIHJlYWRvbmx5IE9wdGlvbmFsRXhjbHVkZSA9XG4gICAgKHJ1bGU6IFBhcnNlUnVsZSk6IFBhcnNlUnVsZSA9PlxuICAgICgpID0+IHtcbiAgICAgIHRoaXMuUGFyc2VPYmplY3QocnVsZSk7XG4gICAgICByZXR1cm4gU3RyaW5nUGFyc2VyLlBhcnNlU3VjY2VzcztcbiAgICB9O1xuXG4gIC8vIENvbnZlbmllbmNlIG1ldGhvZCBmb3IgY3JlYXRpbmcgbW9yZSByZWFkYWJsZSBQYXJzZVN0cmluZyBydWxlcyB0aGF0IGNhbiBiZSBjb21iaW5lZFxuICAvLyBpbiBvdGhlciBzdHJ1Y3R1cmluZyBydWxlcyAobGlrZSBPbmVPZiBldGMpXG4gIC8vIGUuZy4gT25lT2YoU3RyaW5nKFwib25lXCIpLCBTdHJpbmcoXCJ0d29cIikpXG4gIHB1YmxpYyByZWFkb25seSBTdHJpbmcgPVxuICAgIChzdHI6IHN0cmluZyk6IFBhcnNlUnVsZSA9PlxuICAgICgpID0+XG4gICAgICB0aGlzLlBhcnNlU3RyaW5nKHN0cik7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBUcnlBZGRSZXN1bHRUb0xpc3QgPSA8VD4oXG4gICAgcmVzdWx0OiBQYXJzZVJ1bGVSZXR1cm4sXG4gICAgbGlzdDogVFtdLFxuICAgIGZsYXR0ZW46IGJvb2xlYW4gPSB0cnVlXG4gICk6IHZvaWQgPT4ge1xuICAgIGlmIChyZXN1bHQgPT09IFN0cmluZ1BhcnNlci5QYXJzZVN1Y2Nlc3MpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZmxhdHRlbiAmJiBBcnJheS5pc0FycmF5KHJlc3VsdCkpIHtcbiAgICAgIGNvbnN0IHJlc3VsdENvbGxlY3Rpb24gPSByZXN1bHQgYXMgUGFyc2VSdWxlUmV0dXJuW107XG4gICAgICBpZiAocmVzdWx0Q29sbGVjdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICBmb3IgKGNvbnN0IG9iaiBvZiByZXN1bHRDb2xsZWN0aW9uKSB7XG4gICAgICAgICAgbGlzdC5wdXNoKG9iaiBhcyBhbnkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxpc3QucHVzaChyZXN1bHQgYXMgYW55KTtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgSW50ZXJsZWF2ZSA9IDxUPihcbiAgICBydWxlQTogUGFyc2VSdWxlLFxuICAgIHJ1bGVCOiBQYXJzZVJ1bGUsXG4gICAgdW50aWxUZXJtaW5hdG9yOiBQYXJzZVJ1bGUgfCBudWxsID0gbnVsbCxcbiAgICBmbGF0dGVuOiBib29sZWFuID0gdHJ1ZVxuICApOiBUW10gPT4ge1xuICAgIGNvbnN0IHJ1bGVJZDogbnVtYmVyID0gdGhpcy5CZWdpblJ1bGUoKTtcbiAgICBjb25zdCByZXN1bHRzOiBUW10gPSBbXTtcblxuICAgIC8vIEZpcnN0IG91dGVyIHBhZGRpbmdcbiAgICBjb25zdCBmaXJzdEEgPSB0aGlzLlBhcnNlT2JqZWN0KHJ1bGVBKTtcbiAgICBpZiAoZmlyc3RBID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5GYWlsUnVsZShydWxlSWQpIGFzIGFueTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5UcnlBZGRSZXN1bHRUb0xpc3QoZmlyc3RBLCByZXN1bHRzLCBmbGF0dGVuKTtcbiAgICB9XG5cbiAgICBsZXQgbGFzdE1haW5SZXN1bHQ6IFBhcnNlUnVsZVJldHVybiB8IG51bGwgPSBudWxsO1xuICAgIGxldCBvdXRlclJlc3VsdDogUGFyc2VSdWxlUmV0dXJuIHwgbnVsbCA9IG51bGw7XG4gICAgZG8ge1xuICAgICAgLy8gXCJ1bnRpbFwiIGNvbmRpdGlvbiBoaXQ/XG4gICAgICBpZiAodW50aWxUZXJtaW5hdG9yICE9PSBudWxsICYmIHRoaXMuUGVlayh1bnRpbFRlcm1pbmF0b3IpICE9PSBudWxsKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWluIGlubmVyXG4gICAgICBsYXN0TWFpblJlc3VsdCA9IHRoaXMuUGFyc2VPYmplY3QocnVsZUIpO1xuICAgICAgaWYgKGxhc3RNYWluUmVzdWx0ID09PSBudWxsKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5UcnlBZGRSZXN1bHRUb0xpc3QobGFzdE1haW5SZXN1bHQsIHJlc3VsdHMsIGZsYXR0ZW4pO1xuICAgICAgfVxuXG4gICAgICAvLyBPdXRlciByZXN1bHQgKGkuZS4gbGFzdCBBIGluIEFCQSlcbiAgICAgIG91dGVyUmVzdWx0ID0gbnVsbDtcbiAgICAgIGlmIChsYXN0TWFpblJlc3VsdCAhPT0gbnVsbCkge1xuICAgICAgICBvdXRlclJlc3VsdCA9IHRoaXMuUGFyc2VPYmplY3QocnVsZUEpO1xuXG4gICAgICAgIGlmIChvdXRlclJlc3VsdCA9PT0gbnVsbCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuVHJ5QWRkUmVzdWx0VG9MaXN0KG91dGVyUmVzdWx0LCByZXN1bHRzLCBmbGF0dGVuKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBTdG9wIGlmIHRoZXJlIGFyZSBubyByZXN1bHRzLCBvciBpZiBib3RoIGFyZSB0aGUgcGxhY2Vob2xkZXIgXCJQYXJzZVN1Y2Nlc3NcIiAoaS5lLiBPcHRpb25hbCBzdWNjZXNzIHJhdGhlciB0aGFuIGEgdHJ1ZSB2YWx1ZSlcbiAgICB9IHdoaWxlIChcbiAgICAgIChsYXN0TWFpblJlc3VsdCAhPT0gbnVsbCB8fCBvdXRlclJlc3VsdCAhPT0gbnVsbCkgJiZcbiAgICAgICEoXG4gICAgICAgIChsYXN0TWFpblJlc3VsdCBhcyBhbnkpID09PSBTdHJpbmdQYXJzZXIuUGFyc2VTdWNjZXNzICYmXG4gICAgICAgIG91dGVyUmVzdWx0ID09IFN0cmluZ1BhcnNlci5QYXJzZVN1Y2Nlc3NcbiAgICAgICkgJiZcbiAgICAgIHRoaXMucmVtYWluaW5nTGVuZ3RoID4gMFxuICAgICk7XG5cbiAgICBpZiAocmVzdWx0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0aGlzLkZhaWxSdWxlKHJ1bGVJZCkgYXMgVFtdO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLlN1Y2NlZWRSdWxlKHJ1bGVJZCwgcmVzdWx0cykgYXMgVFtdO1xuICB9O1xuXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gQmFzaWMgc3RyaW5nIHBhcnNpbmdcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIHB1YmxpYyByZWFkb25seSBQYXJzZVN0cmluZyA9IChzdHI6IHN0cmluZyk6IHN0cmluZyB8IG51bGwgPT4ge1xuICAgIGlmIChzdHIubGVuZ3RoID4gdGhpcy5yZW1haW5pbmdMZW5ndGgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHJ1bGVJZDogbnVtYmVyID0gdGhpcy5CZWdpblJ1bGUoKTtcblxuICAgIC8vIE9wdGltaXNhdGlvbiBmcm9tIHByb2ZpbGluZzpcbiAgICAvLyBTdG9yZSBpbiB0ZW1wb3JhcnkgbG9jYWwgdmFyaWFibGVzXG4gICAgLy8gc2luY2UgdGhleSdyZSBwcm9wZXJ0aWVzIHRoYXQgd291bGQgaGF2ZSB0byBhY2Nlc3NcbiAgICAvLyB0aGUgcnVsZSBzdGFjayBldmVyeSB0aW1lIG90aGVyd2lzZS5cbiAgICBsZXQgaTogbnVtYmVyID0gdGhpcy5pbmRleDtcbiAgICBsZXQgY2xpOiBudW1iZXIgPSB0aGlzLmNoYXJhY3RlckluTGluZUluZGV4O1xuICAgIGxldCBsaTogbnVtYmVyID0gdGhpcy5saW5lSW5kZXg7XG5cbiAgICBsZXQgc3VjY2VzczogYm9vbGVhbiA9IHRydWU7XG4gICAgZm9yIChsZXQgdGVtcElkeCA9IDA7IHRlbXBJZHggPCBzdHIubGVuZ3RoOyB0ZW1wSWR4ICs9IDEpIHtcbiAgICAgIGNvbnN0IGMgPSBzdHJbdGVtcElkeF07XG5cbiAgICAgIGlmICh0aGlzLl9jaGFyc1tpXSAhPT0gYykge1xuICAgICAgICBzdWNjZXNzID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKGMgPT09IFwiXFxuXCIpIHtcbiAgICAgICAgbGkrKztcbiAgICAgICAgY2xpID0gLTE7XG4gICAgICB9XG5cbiAgICAgIGkrKztcbiAgICAgIGNsaSsrO1xuICAgIH1cblxuICAgIHRoaXMuaW5kZXggPSBpO1xuICAgIHRoaXMuY2hhcmFjdGVySW5MaW5lSW5kZXggPSBjbGk7XG4gICAgdGhpcy5saW5lSW5kZXggPSBsaTtcblxuICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICByZXR1cm4gdGhpcy5TdWNjZWVkUnVsZShydWxlSWQsIHN0cikgYXMgYW55O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLkZhaWxSdWxlKHJ1bGVJZCkgYXMgYW55O1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBQYXJzZVNpbmdsZUNoYXJhY3RlciA9ICgpOiBzdHJpbmcgPT4ge1xuICAgIGlmICh0aGlzLnJlbWFpbmluZ0xlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGMgPSB0aGlzLl9jaGFyc1t0aGlzLmluZGV4XTtcbiAgICAgIGlmIChjID09PSBcIlxcblwiKSB7XG4gICAgICAgIHRoaXMubGluZUluZGV4ICs9IDE7XG4gICAgICAgIHRoaXMuY2hhcmFjdGVySW5MaW5lSW5kZXggPSAtMTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5pbmRleCArPSAxO1xuICAgICAgdGhpcy5jaGFyYWN0ZXJJbkxpbmVJbmRleCArPSAxO1xuXG4gICAgICByZXR1cm4gYztcbiAgICB9XG5cbiAgICByZXR1cm4gXCIwXCI7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IFBhcnNlVW50aWxDaGFyYWN0ZXJzRnJvbVN0cmluZyA9IChcbiAgICBzdHI6IHN0cmluZyxcbiAgICBtYXhDb3VudDogbnVtYmVyID0gLTFcbiAgKTogc3RyaW5nIHwgbnVsbCA9PiB0aGlzLlBhcnNlQ2hhcmFjdGVyc0Zyb21TdHJpbmcoc3RyLCBmYWxzZSwgbWF4Q291bnQpO1xuXG4gIHB1YmxpYyByZWFkb25seSBQYXJzZVVudGlsQ2hhcmFjdGVyc0Zyb21DaGFyU2V0ID0gKFxuICAgIGNoYXJTZXQ6IENoYXJhY3RlclNldCxcbiAgICBtYXhDb3VudDogbnVtYmVyID0gLTFcbiAgKTogc3RyaW5nIHwgbnVsbCA9PiB0aGlzLlBhcnNlQ2hhcmFjdGVyc0Zyb21DaGFyU2V0KGNoYXJTZXQsIGZhbHNlLCBtYXhDb3VudCk7XG5cbiAgcHVibGljIHJlYWRvbmx5IFBhcnNlQ2hhcmFjdGVyc0Zyb21TdHJpbmcgPSAoXG4gICAgc3RyOiBzdHJpbmcsXG4gICAgbWF4Q291bnRPclNob3VsZEluY2x1ZGVTdHJDaGFyczogYm9vbGVhbiB8IG51bWJlciA9IC0xLFxuICAgIG1heENvdW50OiBudW1iZXIgPSAtMVxuICApOiBzdHJpbmcgfCBudWxsID0+IHtcbiAgICBjb25zdCBjaGFyU2V0ID0gbmV3IENoYXJhY3RlclNldChzdHIpO1xuICAgIGlmICh0eXBlb2YgbWF4Q291bnRPclNob3VsZEluY2x1ZGVTdHJDaGFycyA9PT0gXCJudW1iZXJcIikge1xuICAgICAgcmV0dXJuIHRoaXMuUGFyc2VDaGFyYWN0ZXJzRnJvbUNoYXJTZXQoXG4gICAgICAgIGNoYXJTZXQsXG4gICAgICAgIHRydWUsXG4gICAgICAgIG1heENvdW50T3JTaG91bGRJbmNsdWRlU3RyQ2hhcnNcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuUGFyc2VDaGFyYWN0ZXJzRnJvbUNoYXJTZXQoXG4gICAgICBjaGFyU2V0LFxuICAgICAgbWF4Q291bnRPclNob3VsZEluY2x1ZGVTdHJDaGFycyxcbiAgICAgIG1heENvdW50XG4gICAgKTtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgUGFyc2VDaGFyYWN0ZXJzRnJvbUNoYXJTZXQgPSAoXG4gICAgY2hhclNldDogQ2hhcmFjdGVyU2V0LFxuICAgIHNob3VsZEluY2x1ZGVDaGFyczogYm9vbGVhbiA9IHRydWUsXG4gICAgbWF4Q291bnQ6IG51bWJlciA9IC0xXG4gICk6IHN0cmluZyB8IG51bGwgPT4ge1xuICAgIGlmIChtYXhDb3VudCA9PT0gLTEpIHtcbiAgICAgIG1heENvdW50ID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnRJbmRleDogbnVtYmVyID0gdGhpcy5pbmRleDtcblxuICAgIC8vIE9wdGltaXNhdGlvbiBmcm9tIHByb2ZpbGluZzpcbiAgICAvLyBTdG9yZSBpbiB0ZW1wb3JhcnkgbG9jYWwgdmFyaWFibGVzXG4gICAgLy8gc2luY2UgdGhleSdyZSBwcm9wZXJ0aWVzIHRoYXQgd291bGQgaGF2ZSB0byBhY2Nlc3NcbiAgICAvLyB0aGUgcnVsZSBzdGFjayBldmVyeSB0aW1lIG90aGVyd2lzZS5cbiAgICBsZXQgaWk6IG51bWJlciA9IHRoaXMuaW5kZXg7XG4gICAgbGV0IGNsaTogbnVtYmVyID0gdGhpcy5jaGFyYWN0ZXJJbkxpbmVJbmRleDtcbiAgICBsZXQgbGk6IG51bWJlciA9IHRoaXMubGluZUluZGV4O1xuICAgIGxldCBjb3VudDogbnVtYmVyID0gMDtcbiAgICB3aGlsZSAoXG4gICAgICBpaSA8IHRoaXMuX2NoYXJzLmxlbmd0aCAmJlxuICAgICAgY2hhclNldC5zZXQuaGFzKHRoaXMuX2NoYXJzW2lpXSkgPT09IHNob3VsZEluY2x1ZGVDaGFycyAmJlxuICAgICAgY291bnQgPCBtYXhDb3VudFxuICAgICkge1xuICAgICAgaWYgKHRoaXMuX2NoYXJzW2lpXSA9PT0gXCJcXG5cIikge1xuICAgICAgICBsaSArPSAxO1xuICAgICAgICBjbGkgPSAtMTtcbiAgICAgIH1cblxuICAgICAgaWkgKz0gMTtcbiAgICAgIGNsaSArPSAxO1xuICAgICAgY291bnQgKz0gMTtcbiAgICB9XG5cbiAgICB0aGlzLmluZGV4ID0gaWk7XG4gICAgdGhpcy5jaGFyYWN0ZXJJbkxpbmVJbmRleCA9IGNsaTtcbiAgICB0aGlzLmxpbmVJbmRleCA9IGxpO1xuXG4gICAgY29uc3QgbGFzdENoYXJJbmRleDogbnVtYmVyID0gdGhpcy5pbmRleDtcbiAgICBpZiAobGFzdENoYXJJbmRleCA+IHN0YXJ0SW5kZXgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9jaGFycy5zbGljZShzdGFydEluZGV4LCB0aGlzLmluZGV4KS5qb2luKFwiXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBQZWVrID0gKHJ1bGU6IFBhcnNlUnVsZSk6IFBhcnNlUnVsZVJldHVybiA9PiB7XG4gICAgY29uc3QgcnVsZUlkOiBudW1iZXIgPSB0aGlzLkJlZ2luUnVsZSgpO1xuICAgIGNvbnN0IHJlc3VsdDogUGFyc2VSdWxlUmV0dXJuID0gcnVsZSgpO1xuICAgIHRoaXMuQ2FuY2VsUnVsZShydWxlSWQpO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBwdWJsaWMgUGFyc2VVbnRpbChcbiAgICBzdG9wUnVsZTogUGFyc2VSdWxlLFxuICAgIHBhdXNlQ2hhcmFjdGVyczogQ2hhcmFjdGVyU2V0IHwgbnVsbCA9IG51bGwsXG4gICAgZW5kQ2hhcmFjdGVyczogQ2hhcmFjdGVyU2V0IHwgbnVsbCA9IG51bGxcbiAgKTogc3RyaW5nIHtcbiAgICBjb25zdCBydWxlSWQ6IG51bWJlciA9IHRoaXMuQmVnaW5SdWxlKCk7XG4gICAgY29uc3QgcGF1c2VBbmRFbmQ6IENoYXJhY3RlclNldCA9IG5ldyBDaGFyYWN0ZXJTZXQoKTtcbiAgICBpZiAocGF1c2VDaGFyYWN0ZXJzICE9PSBudWxsKSB7XG4gICAgICBwYXVzZUFuZEVuZC5zZXQgPSBuZXcgU2V0KFtcbiAgICAgICAgLi4ucGF1c2VBbmRFbmQuc2V0LnZhbHVlcygpLFxuICAgICAgICAuLi5wYXVzZUNoYXJhY3RlcnMuc2V0LnZhbHVlcygpLFxuICAgICAgXSk7XG4gICAgfVxuXG4gICAgaWYgKGVuZENoYXJhY3RlcnMgIT09IG51bGwpIHtcbiAgICAgIHBhdXNlQW5kRW5kLnNldCA9IG5ldyBTZXQoW1xuICAgICAgICAuLi5wYXVzZUFuZEVuZC5zZXQudmFsdWVzKCksXG4gICAgICAgIC4uLmVuZENoYXJhY3RlcnMuc2V0LnZhbHVlcygpLFxuICAgICAgXSk7XG4gICAgfVxuXG4gICAgbGV0IHBhcnNlZFN0cmluZyA9IFwiXCI7XG4gICAgbGV0IHJ1bGVSZXN1bHRBdFBhdXNlOiBQYXJzZVJ1bGVSZXR1cm4gfCBudWxsID0gbnVsbDtcblxuICAgIC8vIEtlZXAgYXR0ZW1wdGluZyB0byBwYXJzZSBzdHJpbmdzIHVwIHRvIHRoZSBwYXVzZSAoYW5kIGVuZCkgcG9pbnRzLlxuICAgIC8vICAtIEF0IGVhY2ggb2YgdGhlIHBhdXNlIHBvaW50cywgYXR0ZW1wdCB0byBwYXJzZSBhY2NvcmRpbmcgdG8gdGhlIHJ1bGVcbiAgICAvLyAgLSBXaGVuIHRoZSBlbmQgcG9pbnQgaXMgcmVhY2hlZCAob3IgRU9GKSwgd2UncmUgZG9uZVxuICAgIGRvIHtcbiAgICAgIC8vIFRPRE86IFBlcmhhcHMgaWYgbm8gcGF1c2Ugb3IgZW5kIGNoYXJhY3RlcnMgYXJlIHBhc3NlZCwgd2Ugc2hvdWxkIGNoZWNrICpldmVyeSogY2hhcmFjdGVyIGZvciBzdG9wUnVsZT9cbiAgICAgIGNvbnN0IHBhcnRpYWxQYXJzZWRTdHJpbmc6IHN0cmluZyB8IG51bGwgPVxuICAgICAgICB0aGlzLlBhcnNlVW50aWxDaGFyYWN0ZXJzRnJvbUNoYXJTZXQocGF1c2VBbmRFbmQpO1xuXG4gICAgICBpZiAocGFydGlhbFBhcnNlZFN0cmluZykge1xuICAgICAgICBwYXJzZWRTdHJpbmcgKz0gcGFydGlhbFBhcnNlZFN0cmluZztcbiAgICAgIH1cblxuICAgICAgLy8gQXR0ZW1wdCB0byBydW4gdGhlIHBhcnNlIHJ1bGUgYXQgdGhpcyBwYXVzZSBwb2ludFxuICAgICAgcnVsZVJlc3VsdEF0UGF1c2UgPSB0aGlzLlBlZWsoc3RvcFJ1bGUpO1xuXG4gICAgICAvLyBSdWxlIGNvbXBsZXRlZCAtIHdlJ3JlIGRvbmVcbiAgICAgIGlmIChydWxlUmVzdWx0QXRQYXVzZSAhPT0gbnVsbCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLmVuZE9mSW5wdXQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlYWNoZWQgYSBwYXVzZSBwb2ludCwgYnV0IHJ1bGUgZmFpbGVkLiBTdGVwIHBhc3QgYW5kIGNvbnRpbnVlIHBhcnNpbmcgc3RyaW5nXG4gICAgICAgIGNvbnN0IHBhdXNlQ2hhcmFjdGVyOiBzdHJpbmcgPSB0aGlzLmN1cnJlbnRDaGFyYWN0ZXI7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBwYXVzZUNoYXJhY3RlcnMgIT09IG51bGwgJiZcbiAgICAgICAgICBwYXVzZUNoYXJhY3RlcnMuc2V0LmhhcyhwYXVzZUNoYXJhY3RlcilcbiAgICAgICAgKSB7XG4gICAgICAgICAgcGFyc2VkU3RyaW5nICs9IHBhdXNlQ2hhcmFjdGVyO1xuICAgICAgICAgIGlmIChwYXVzZUNoYXJhY3RlciA9PT0gXCJcXG5cIikge1xuICAgICAgICAgICAgdGhpcy5saW5lSW5kZXggKz0gMTtcbiAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVySW5MaW5lSW5kZXggPSAtMTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmluZGV4ICs9IDE7XG4gICAgICAgICAgdGhpcy5jaGFyYWN0ZXJJbkxpbmVJbmRleCArPSAxO1xuXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IHdoaWxlICh0cnVlKTtcblxuICAgIGlmIChwYXJzZWRTdHJpbmcubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuU3VjY2VlZFJ1bGUocnVsZUlkLCBTdHJpbmcocGFyc2VkU3RyaW5nKSkgYXMgc3RyaW5nO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLkZhaWxSdWxlKHJ1bGVJZCkgYXMgc3RyaW5nO1xuICB9XG5cbiAgLy8gTm8gbmVlZCB0byBCZWdpbi9FbmQgcnVsZSBzaW5jZSB3ZSBuZXZlciBwYXJzZSBhIG5ld2xpbmUsIHNvIGtlZXBpbmcgb2xkSW5kZXggaXMgZ29vZCBlbm91Z2hcbiAgcHVibGljIHJlYWRvbmx5IFBhcnNlSW50ID0gKCk6IG51bWJlciB8IG51bGwgPT4ge1xuICAgIGNvbnN0IG9sZEluZGV4OiBudW1iZXIgPSB0aGlzLmluZGV4O1xuICAgIGNvbnN0IG9sZENoYXJhY3RlckluTGluZUluZGV4OiBudW1iZXIgPSB0aGlzLmNoYXJhY3RlckluTGluZUluZGV4O1xuICAgIGNvbnN0IG5lZ2F0aXZlOiBib29sZWFuID0gdGhpcy5QYXJzZVN0cmluZyhcIi1cIikgIT09IG51bGw7XG5cbiAgICAvLyBPcHRpb25hbCB3aGl0ZXNwYWNlXG4gICAgdGhpcy5QYXJzZUNoYXJhY3RlcnNGcm9tU3RyaW5nKFwiIFxcdFwiKTtcblxuICAgIGNvbnN0IHBhcnNlZFN0cmluZyA9IHRoaXMuUGFyc2VDaGFyYWN0ZXJzRnJvbUNoYXJTZXQoXG4gICAgICBTdHJpbmdQYXJzZXIubnVtYmVyc0NoYXJhY3RlclNldFxuICAgICk7XG4gICAgaWYgKHBhcnNlZFN0cmluZyA9PT0gbnVsbCkge1xuICAgICAgLy8gUm9sbCBiYWNrIGFuZCBmYWlsXG4gICAgICB0aGlzLmluZGV4ID0gb2xkSW5kZXg7XG4gICAgICB0aGlzLmNoYXJhY3RlckluTGluZUluZGV4ID0gb2xkQ2hhcmFjdGVySW5MaW5lSW5kZXg7XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCBwYXJzZWRJbnQ6IG51bWJlcjtcbiAgICBpZiAoIU51bWJlci5pc05hTihOdW1iZXIocGFyc2VkU3RyaW5nKSkpIHtcbiAgICAgIHBhcnNlZEludCA9IE51bWJlcihwYXJzZWRTdHJpbmcpO1xuICAgICAgcmV0dXJuIG5lZ2F0aXZlID8gLXBhcnNlZEludCA6IHBhcnNlZEludDtcbiAgICB9XG5cbiAgICB0aGlzLkVycm9yKFxuICAgICAgXCJGYWlsZWQgdG8gcmVhZCBpbnRlZ2VyIHZhbHVlOiBcIiArXG4gICAgICAgIHBhcnNlZFN0cmluZyArXG4gICAgICAgIFwiLiBQZXJoYXBzIGl0J3Mgb3V0IG9mIHRoZSByYW5nZSBvZiBhY2NlcHRhYmxlIG51bWJlcnMgaW5rIHN1cHBvcnRzPyAoXCIgK1xuICAgICAgICBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUiArXG4gICAgICAgIFwiIHRvIFwiICtcbiAgICAgICAgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgK1xuICAgICAgICBcIilcIlxuICAgICk7XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvLyBObyBuZWVkIHRvIEJlZ2luL0VuZCBydWxlIHNpbmNlIHdlIG5ldmVyIHBhcnNlIGEgbmV3bGluZSwgc28ga2VlcGluZyBvbGRJbmRleCBpcyBnb29kIGVub3VnaFxuICBwdWJsaWMgcmVhZG9ubHkgUGFyc2VGbG9hdCA9ICgpOiBudW1iZXIgfCBudWxsID0+IHtcbiAgICBjb25zdCBvbGRJbmRleDogbnVtYmVyID0gdGhpcy5pbmRleDtcbiAgICBjb25zdCBvbGRDaGFyYWN0ZXJJbkxpbmVJbmRleDogbnVtYmVyID0gdGhpcy5jaGFyYWN0ZXJJbkxpbmVJbmRleDtcblxuICAgIGNvbnN0IGxlYWRpbmdJbnQ6IG51bWJlciB8IG51bGwgPSB0aGlzLlBhcnNlSW50KCk7XG4gICAgaWYgKGxlYWRpbmdJbnQgIT09IG51bGwpIHtcbiAgICAgIGlmICh0aGlzLlBhcnNlU3RyaW5nKFwiLlwiKSAhPT0gbnVsbCkge1xuICAgICAgICBjb25zdCBhZnRlckRlY2ltYWxQb2ludFN0ciA9IHRoaXMuUGFyc2VDaGFyYWN0ZXJzRnJvbUNoYXJTZXQoXG4gICAgICAgICAgU3RyaW5nUGFyc2VyLm51bWJlcnNDaGFyYWN0ZXJTZXRcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gTnVtYmVyKGAke2xlYWRpbmdJbnR9LiR7YWZ0ZXJEZWNpbWFsUG9pbnRTdHJ9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUm9sbCBiYWNrIGFuZCBmYWlsXG4gICAgdGhpcy5pbmRleCA9IG9sZEluZGV4O1xuICAgIHRoaXMuY2hhcmFjdGVySW5MaW5lSW5kZXggPSBvbGRDaGFyYWN0ZXJJbkxpbmVJbmRleDtcblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBQYXJzZU5ld2xpbmUgPSAoKTogc3RyaW5nID0+IHtcbiAgICBjb25zdCBydWxlSWQ6IG51bWJlciA9IHRoaXMuQmVnaW5SdWxlKCk7XG5cbiAgICAvLyBPcHRpb25hbCBcXHIsIGRlZmluaXRlIFxcbiB0byBzdXBwb3J0IFdpbmRvd3MgKFxcclxcbikgYW5kIE1hYy9Vbml4IChcXG4pXG4gICAgLy8gMm5kIE1heSAyMDE2OiBBbHdheXMgY29sbGFwc2UgXFxyXFxuIHRvIGp1c3QgXFxuXG4gICAgdGhpcy5QYXJzZVN0cmluZyhcIlxcclwiKTtcblxuICAgIGlmICh0aGlzLlBhcnNlU3RyaW5nKFwiXFxuXCIpID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5GYWlsUnVsZShydWxlSWQpIGFzIHN0cmluZztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5TdWNjZWVkUnVsZShydWxlSWQsIFwiXFxuXCIpIGFzIHN0cmluZztcbiAgfTtcbn1cbiIsImltcG9ydCB7IENoYXJhY3RlclNldCB9IGZyb20gXCIuL0NoYXJhY3RlclNldFwiO1xuaW1wb3J0IHsgU3RyaW5nUGFyc2VyIH0gZnJvbSBcIi4vU3RyaW5nUGFyc2VyL1N0cmluZ1BhcnNlclwiO1xuXG4vLy8gPHN1bW1hcnk+XG4vLy8gUHJlLXBhc3MgYmVmb3JlIG1haW4gaW5rIHBhcnNlciBydW5zLiBJdCBhY3R1YWxseSBwZXJmb3JtcyB0d28gbWFpbiB0YXNrczpcbi8vLyAgLSBjb21tZW50IGVsaW1pbmF0aW9uIHRvIHNpbXBsaWZ5IHRoZSBwYXJzZSBydWxlcyBpbiB0aGUgbWFpbiBwYXJzZXJcbi8vLyAgLSBDb252ZXJzaW9uIG9mIFdpbmRvd3MgbGluZSBlbmRpbmdzIChcXHJcXG4pIHRvIHRoZSBzaW1wbGVyIFVuaXggc3R5bGUgKFxcbiksIHNvXG4vLy8gICAgd2UgZG9uJ3QgaGF2ZSB0byB3b3JyeSBhYm91dCB0aGVtIGxhdGVyLlxuLy8vIDwvc3VtbWFyeT5cbmV4cG9ydCBjbGFzcyBDb21tZW50RWxpbWluYXRvciBleHRlbmRzIFN0cmluZ1BhcnNlciB7XG4gIHB1YmxpYyBfY29tbWVudE9yTmV3bGluZVN0YXJ0Q2hhcmFjdGVyID0gbmV3IENoYXJhY3RlclNldChcIi9cXHJcXG5cIik7XG4gIHB1YmxpYyBfY29tbWVudEJsb2NrRW5kQ2hhcmFjdGVyID0gbmV3IENoYXJhY3RlclNldChcIipcIik7XG4gIHB1YmxpYyBfbmV3bGluZUNoYXJhY3RlcnMgPSBuZXcgQ2hhcmFjdGVyU2V0KFwiXFxuXFxyXCIpO1xuXG4gIHB1YmxpYyByZWFkb25seSBQcm9jZXNzID0gKCk6IHN0cmluZyA9PiB7XG4gICAgLy8gTWFrZSBib3RoIGNvbW1lbnRzIGFuZCBub24tY29tbWVudHMgb3B0aW9uYWwgdG8gaGFuZGxlIHRyaXZpYWwgZW1wdHkgZmlsZSBjYXNlIChvciAqb25seSogY29tbWVudHMpXG4gICAgY29uc3Qgc3RyaW5nTGlzdDogc3RyaW5nW10gPSB0aGlzLkludGVybGVhdmU8c3RyaW5nPihcbiAgICAgIHRoaXMuT3B0aW9uYWwodGhpcy5Db21tZW50c0FuZE5ld2xpbmVzKSxcbiAgICAgIHRoaXMuT3B0aW9uYWwodGhpcy5NYWluSW5rKVxuICAgICk7XG5cbiAgICBpZiAoc3RyaW5nTGlzdCAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHN0cmluZ0xpc3Quam9pbihcIlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBNYWluSW5rID0gKCkgPT5cbiAgICB0aGlzLlBhcnNlVW50aWwoXG4gICAgICB0aGlzLkNvbW1lbnRzQW5kTmV3bGluZXMsXG4gICAgICB0aGlzLl9jb21tZW50T3JOZXdsaW5lU3RhcnRDaGFyYWN0ZXIsXG4gICAgICBudWxsXG4gICAgKTtcblxuICBwdWJsaWMgcmVhZG9ubHkgQ29tbWVudHNBbmROZXdsaW5lcyA9ICgpID0+IHtcbiAgICBsZXQgbmV3TGluZXM6IHN0cmluZ1tdID0gdGhpcy5JbnRlcmxlYXZlPHN0cmluZz4oXG4gICAgICB0aGlzLk9wdGlvbmFsKHRoaXMuUGFyc2VOZXdsaW5lKSxcbiAgICAgIHRoaXMuT3B0aW9uYWwodGhpcy5QYXJzZVNpbmdsZUNvbW1lbnQpXG4gICAgKTtcblxuICAgIGlmIChuZXdMaW5lcyAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG5ld0xpbmVzLmpvaW4oXCJcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLy8gVmFsaWQgY29tbWVudHMgYWx3YXlzIHJldHVybiBlaXRoZXIgYW4gZW1wdHkgc3RyaW5nIG9yIHB1cmUgbmV3bGluZXMsXG4gIC8vIHdoaWNoIHdlIHdhbnQgdG8ga2VlcCBzbyB0aGF0IGxpbmUgbnVtYmVycyBzdGF5IHRoZSBzYW1lXG4gIHB1YmxpYyByZWFkb25seSBQYXJzZVNpbmdsZUNvbW1lbnQgPSAoKSA9PlxuICAgIHRoaXMuT25lT2YoW3RoaXMuRW5kT2ZMaW5lQ29tbWVudCwgdGhpcy5CbG9ja0NvbW1lbnRdKTtcblxuICBwdWJsaWMgcmVhZG9ubHkgRW5kT2ZMaW5lQ29tbWVudCA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5QYXJzZVN0cmluZyhcIi8vXCIpID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLlBhcnNlVW50aWxDaGFyYWN0ZXJzRnJvbUNoYXJTZXQodGhpcy5fbmV3bGluZUNoYXJhY3RlcnMpO1xuXG4gICAgcmV0dXJuIFwiXCI7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IEJsb2NrQ29tbWVudCA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5QYXJzZVN0cmluZyhcIi8qXCIpID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydExpbmVJbmRleDogbnVtYmVyID0gdGhpcy5saW5lSW5kZXg7XG4gICAgY29uc3QgY29tbWVudFJlc3VsdCA9IHRoaXMuUGFyc2VVbnRpbChcbiAgICAgIHRoaXMuU3RyaW5nKFwiKi9cIiksXG4gICAgICB0aGlzLl9jb21tZW50QmxvY2tFbmRDaGFyYWN0ZXIsXG4gICAgICBudWxsXG4gICAgKTtcblxuICAgIGlmICghdGhpcy5lbmRPZklucHV0KSB7XG4gICAgICB0aGlzLlBhcnNlU3RyaW5nKFwiKi9cIik7XG4gICAgfVxuXG4gICAgLy8gQ291bnQgdGhlIG51bWJlciBvZiBsaW5lcyB0aGF0IHdlcmUgaW5zaWRlIHRoZSBibG9jaywgYW5kIHJlcGxpY2F0ZSB0aGVtIGFzIG5ld2xpbmVzXG4gICAgLy8gc28gdGhhdCB0aGUgbGluZSBpbmRleGluZyBzdGlsbCB3b3JrcyBmcm9tIHRoZSBvcmlnaW5hbCBzb3VyY2VcbiAgICBpZiAoY29tbWVudFJlc3VsdCAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gXCJcXG5cIi5yZXBlYXQodGhpcy5saW5lSW5kZXggLSBzdGFydExpbmVJbmRleCk7XG4gICAgfVxuXG4gICAgLy8gTm8gY29tbWVudCBhdCBhbGxcbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBwdWJsaWMgUHJlUHJvY2Vzc0lucHV0U3RyaW5nKHN0cjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gc3RyO1xuICB9XG59XG4iLCJpbXBvcnQgeyBDb25kaXRpb25hbFNpbmdsZUJyYW5jaCB9IGZyb20gXCIuL0NvbmRpdGlvbmFsU2luZ2xlQnJhbmNoXCI7XG5pbXBvcnQgeyBDb250YWluZXIgYXMgUnVudGltZUNvbnRhaW5lciB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvQ29udGFpbmVyXCI7XG5pbXBvcnQgeyBDb250cm9sQ29tbWFuZCBhcyBSdW50aW1lQ29udHJvbENvbW1hbmQgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL0NvbnRyb2xDb21tYW5kXCI7XG5pbXBvcnQgeyBFeHByZXNzaW9uIH0gZnJvbSBcIi4uL0V4cHJlc3Npb24vRXhwcmVzc2lvblwiO1xuaW1wb3J0IHsgUGFyc2VkT2JqZWN0IH0gZnJvbSBcIi4uL09iamVjdFwiO1xuaW1wb3J0IHsgSW5rT2JqZWN0IGFzIFJ1bnRpbWVPYmplY3QgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL09iamVjdFwiO1xuaW1wb3J0IHsgU3RvcnkgfSBmcm9tIFwiLi4vU3RvcnlcIjtcblxuZXhwb3J0IGNsYXNzIENvbmRpdGlvbmFsIGV4dGVuZHMgUGFyc2VkT2JqZWN0IHtcbiAgcHJpdmF0ZSBfcmVKb2luVGFyZ2V0OiBSdW50aW1lQ29udHJvbENvbW1hbmQgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgaW5pdGlhbENvbmRpdGlvbjogRXhwcmVzc2lvbixcbiAgICBwdWJsaWMgYnJhbmNoZXM6IENvbmRpdGlvbmFsU2luZ2xlQnJhbmNoW11cbiAgKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGlmICh0aGlzLmluaXRpYWxDb25kaXRpb24pIHtcbiAgICAgIHRoaXMuQWRkQ29udGVudCh0aGlzLmluaXRpYWxDb25kaXRpb24pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmJyYW5jaGVzICE9PSBudWxsKSB7XG4gICAgICB0aGlzLkFkZENvbnRlbnQodGhpcy5icmFuY2hlcyk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiQ29uZGl0aW9uYWxcIjtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBHZW5lcmF0ZVJ1bnRpbWVPYmplY3QgPSAoKTogUnVudGltZU9iamVjdCA9PiB7XG4gICAgY29uc3QgY29udGFpbmVyID0gbmV3IFJ1bnRpbWVDb250YWluZXIoKTtcblxuICAgIC8vIEluaXRpYWwgY29uZGl0aW9uXG4gICAgaWYgKHRoaXMuaW5pdGlhbENvbmRpdGlvbikge1xuICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQodGhpcy5pbml0aWFsQ29uZGl0aW9uLnJ1bnRpbWVPYmplY3QpO1xuICAgIH1cblxuICAgIC8vIEluZGl2aWR1YWwgYnJhbmNoZXNcbiAgICBmb3IgKGNvbnN0IGJyYW5jaCBvZiB0aGlzLmJyYW5jaGVzKSB7XG4gICAgICBjb25zdCBicmFuY2hDb250YWluZXIgPSBicmFuY2gucnVudGltZU9iamVjdDtcbiAgICAgIGNvbnRhaW5lci5BZGRDb250ZW50KGJyYW5jaENvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgLy8gSWYgaXQncyBhIHN3aXRjaC1saWtlIGNvbmRpdGlvbmFsLCBlYWNoIGJyYW5jaFxuICAgIC8vIHdpbGwgaGF2ZSBhIFwiZHVwbGljYXRlXCIgb3BlcmF0aW9uIGZvciB0aGUgb3JpZ2luYWxcbiAgICAvLyBzd2l0Y2hlZCB2YWx1ZS4gSWYgdGhlcmUncyBubyBmaW5hbCBlbHNlIGNsYXVzZVxuICAgIC8vIGFuZCB3ZSBmYWxsIGFsbCB0aGUgd2F5IHRocm91Z2gsIHdlIG5lZWQgdG8gY2xlYW4gdXAuXG4gICAgLy8gKEFuIGVsc2UgY2xhdXNlIGRvZXNuJ3QgZHVwIGJ1dCBpdCAqZG9lcyogcG9wKVxuICAgIGlmIChcbiAgICAgIHRoaXMuaW5pdGlhbENvbmRpdGlvbiAhPT0gbnVsbCAmJlxuICAgICAgdGhpcy5icmFuY2hlc1swXS5vd25FeHByZXNzaW9uICE9PSBudWxsICYmXG4gICAgICAhdGhpcy5icmFuY2hlc1t0aGlzLmJyYW5jaGVzLmxlbmd0aCAtIDFdLmlzRWxzZVxuICAgICkge1xuICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQoUnVudGltZUNvbnRyb2xDb21tYW5kLlBvcEV2YWx1YXRlZFZhbHVlKCkpO1xuICAgIH1cblxuICAgIC8vIFRhcmdldCBmb3IgYnJhbmNoZXMgdG8gcmVqb2luIHRvXG4gICAgdGhpcy5fcmVKb2luVGFyZ2V0ID0gUnVudGltZUNvbnRyb2xDb21tYW5kLk5vT3AoKTtcbiAgICBjb250YWluZXIuQWRkQ29udGVudCh0aGlzLl9yZUpvaW5UYXJnZXQpO1xuXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgfTtcblxuICBwdWJsaWMgUmVzb2x2ZVJlZmVyZW5jZXMoY29udGV4dDogU3RvcnkpOiB2b2lkIHtcbiAgICBjb25zdCBwYXRoVG9SZUpvaW4gPSB0aGlzLl9yZUpvaW5UYXJnZXQhLnBhdGg7XG5cbiAgICBmb3IgKGNvbnN0IGJyYW5jaCBvZiB0aGlzLmJyYW5jaGVzKSB7XG4gICAgICBpZiAoIWJyYW5jaC5yZXR1cm5EaXZlcnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICB9XG5cbiAgICAgIGJyYW5jaC5yZXR1cm5EaXZlcnQudGFyZ2V0UGF0aCA9IHBhdGhUb1JlSm9pbjtcbiAgICB9XG5cbiAgICBzdXBlci5SZXNvbHZlUmVmZXJlbmNlcyhjb250ZXh0KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUGFyc2VkT2JqZWN0IH0gZnJvbSBcIi4vT2JqZWN0XCI7XG5pbXBvcnQgeyBJbmtPYmplY3QgYXMgUnVudGltZU9iamVjdCB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvT2JqZWN0XCI7XG5pbXBvcnQgeyBTdHJpbmdWYWx1ZSB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvVmFsdWVcIjtcblxuZXhwb3J0IGNsYXNzIFRleHQgZXh0ZW5kcyBQYXJzZWRPYmplY3Qge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgdGV4dDogc3RyaW5nKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuICBnZXQgdHlwZU5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJUZXh0XCI7XG4gIH1cblxuICBwdWJsaWMgcmVhZG9ubHkgR2VuZXJhdGVSdW50aW1lT2JqZWN0ID0gKCk6IFJ1bnRpbWVPYmplY3QgPT5cbiAgICBuZXcgU3RyaW5nVmFsdWUodGhpcy50ZXh0KTtcblxuICBwdWJsaWMgcmVhZG9ubHkgdG9TdHJpbmcgPSAoKTogc3RyaW5nID0+IHRoaXMudGV4dDtcbn1cbiIsImltcG9ydCB7IEV4cHJlc3Npb24gfSBmcm9tIFwiLi4vRXhwcmVzc2lvbi9FeHByZXNzaW9uXCI7XG5pbXBvcnQgeyBQYXJzZWRPYmplY3QgfSBmcm9tIFwiLi4vT2JqZWN0XCI7XG5pbXBvcnQgeyBJbmtPYmplY3QgYXMgUnVudGltZU9iamVjdCB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvT2JqZWN0XCI7XG5pbXBvcnQgeyBTdG9yeSB9IGZyb20gXCIuLi9TdG9yeVwiO1xuaW1wb3J0IHsgU3ltYm9sVHlwZSB9IGZyb20gXCIuLi9TeW1ib2xUeXBlXCI7XG5pbXBvcnQgeyBJZGVudGlmaWVyIH0gZnJvbSBcIi4uL0lkZW50aWZpZXJcIjtcblxuZXhwb3J0IGNsYXNzIENvbnN0YW50RGVjbGFyYXRpb24gZXh0ZW5kcyBQYXJzZWRPYmplY3Qge1xuICBnZXQgY29uc3RhbnROYW1lKCk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuY29uc3RhbnRJZGVudGlmaWVyPy5uYW1lO1xuICB9XG4gIHB1YmxpYyBjb25zdGFudElkZW50aWZpZXI6IElkZW50aWZpZXI7XG5cbiAgcHJpdmF0ZSBfZXhwcmVzc2lvbjogRXhwcmVzc2lvbiB8IG51bGwgPSBudWxsO1xuXG4gIGdldCBleHByZXNzaW9uKCk6IEV4cHJlc3Npb24ge1xuICAgIGlmICghdGhpcy5fZXhwcmVzc2lvbikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2V4cHJlc3Npb247XG4gIH1cblxuICBjb25zdHJ1Y3RvcihuYW1lOiBJZGVudGlmaWVyLCBhc3NpZ25lZEV4cHJlc3Npb246IEV4cHJlc3Npb24pIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5jb25zdGFudElkZW50aWZpZXIgPSBuYW1lO1xuXG4gICAgLy8gRGVmZW5zaXZlIHByb2dyYW1taW5nIGluIGNhc2UgcGFyc2luZyBvZiBhc3NpZ25lZEV4cHJlc3Npb24gZmFpbGVkXG4gICAgaWYgKGFzc2lnbmVkRXhwcmVzc2lvbikge1xuICAgICAgdGhpcy5fZXhwcmVzc2lvbiA9IHRoaXMuQWRkQ29udGVudChhc3NpZ25lZEV4cHJlc3Npb24pIGFzIEV4cHJlc3Npb247XG4gICAgfVxuICB9XG5cbiAgZ2V0IHR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiQ09OU1RcIjtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBHZW5lcmF0ZVJ1bnRpbWVPYmplY3QgPSAoKTogUnVudGltZU9iamVjdCB8IG51bGwgPT4ge1xuICAgIC8vIEdsb2JhbCBkZWNsYXJhdGlvbnMgZG9uJ3QgZ2VuZXJhdGUgYWN0dWFsIHByb2NlZHVyYWxcbiAgICAvLyBydW50aW1lIG9iamVjdHMsIGJ1dCBpbnN0ZWFkIGFkZCBhIGdsb2JhbCB2YXJpYWJsZSB0byB0aGUgc3RvcnkgaXRzZWxmLlxuICAgIC8vIFRoZSBzdG9yeSB0aGVuIGluaXRpYWxpc2VzIHRoZW0gYWxsIGluIG9uZSBnbyBhdCB0aGUgc3RhcnQgb2YgdGhlIGdhbWUuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgcHVibGljIFJlc29sdmVSZWZlcmVuY2VzKGNvbnRleHQ6IFN0b3J5KSB7XG4gICAgc3VwZXIuUmVzb2x2ZVJlZmVyZW5jZXMoY29udGV4dCk7XG4gICAgY29udGV4dC5DaGVja0Zvck5hbWluZ0NvbGxpc2lvbnMoXG4gICAgICB0aGlzLFxuICAgICAgdGhpcy5jb25zdGFudElkZW50aWZpZXIsXG4gICAgICBTeW1ib2xUeXBlLlZhclxuICAgICk7XG4gIH1cbn1cbiIsImV4cG9ydCBlbnVtIEZsb3dMZXZlbCB7XG4gIFN0b3J5LCAvLyAwXG4gIEtub3QsIC8vIDFcbiAgU3RpdGNoLCAvLyAyXG4gIC8vIG5vdCBhY3R1YWxseSBhIEZsb3dCYXNlLCBidXQgdXNlZCBmb3IgZGl2ZXJ0c1xuICBXZWF2ZVBvaW50LCAvLyAzXG59XG4iLCJpbXBvcnQgeyBDb250YWluZXIgYXMgUnVudGltZUNvbnRhaW5lciB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvQ29udGFpbmVyXCI7XG5pbXBvcnQgeyBJTmFtZWRDb250ZW50IH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9JTmFtZWRDb250ZW50XCI7XG5pbXBvcnQgeyBJV2VhdmVQb2ludCB9IGZyb20gXCIuLi9JV2VhdmVQb2ludFwiO1xuaW1wb3J0IHsgUGFyc2VkT2JqZWN0IH0gZnJvbSBcIi4uL09iamVjdFwiO1xuaW1wb3J0IHsgSW5rT2JqZWN0IGFzIFJ1bnRpbWVPYmplY3QgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL09iamVjdFwiO1xuaW1wb3J0IHsgU3RvcnkgfSBmcm9tIFwiLi4vU3RvcnlcIjtcbmltcG9ydCB7IFN5bWJvbFR5cGUgfSBmcm9tIFwiLi4vU3ltYm9sVHlwZVwiO1xuaW1wb3J0IHsgSWRlbnRpZmllciB9IGZyb20gXCIuLi9JZGVudGlmaWVyXCI7XG5cbmV4cG9ydCBjbGFzcyBHYXRoZXIgZXh0ZW5kcyBQYXJzZWRPYmplY3QgaW1wbGVtZW50cyBJTmFtZWRDb250ZW50LCBJV2VhdmVQb2ludCB7XG4gIGdldCBuYW1lKCk6IHN0cmluZyB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmlkZW50aWZpZXI/Lm5hbWUgfHwgbnVsbDtcbiAgfVxuICBwdWJsaWMgaWRlbnRpZmllcj86IElkZW50aWZpZXI7XG5cbiAgZ2V0IHJ1bnRpbWVDb250YWluZXIoKTogUnVudGltZUNvbnRhaW5lciB7XG4gICAgcmV0dXJuIHRoaXMucnVudGltZU9iamVjdCBhcyBSdW50aW1lQ29udGFpbmVyO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgaWRlbnRpZmllcjogSWRlbnRpZmllciB8IG51bGwsXG4gICAgcHVibGljIHJlYWRvbmx5IGluZGVudGF0aW9uRGVwdGg6IG51bWJlclxuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgaWYgKGlkZW50aWZpZXIpIHRoaXMuaWRlbnRpZmllciA9IGlkZW50aWZpZXI7XG4gIH1cblxuICBnZXQgdHlwZU5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJHYXRoZXJcIjtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBHZW5lcmF0ZVJ1bnRpbWVPYmplY3QgPSAoKTogUnVudGltZU9iamVjdCA9PiB7XG4gICAgY29uc3QgY29udGFpbmVyID0gbmV3IFJ1bnRpbWVDb250YWluZXIoKTtcbiAgICBjb250YWluZXIubmFtZSA9IHRoaXMubmFtZTtcblxuICAgIGlmICh0aGlzLnN0b3J5LmNvdW50QWxsVmlzaXRzKSB7XG4gICAgICBjb250YWluZXIudmlzaXRzU2hvdWxkQmVDb3VudGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb250YWluZXIuY291bnRpbmdBdFN0YXJ0T25seSA9IHRydWU7XG5cbiAgICAvLyBBIGdhdGhlciBjYW4gaGF2ZSBudWxsIGNvbnRlbnQsIGUuZy4gaXQncyBqdXN0IHB1cmVseSBhIGxpbmUgd2l0aCBcIi1cIlxuICAgIGlmICh0aGlzLmNvbnRlbnQpIHtcbiAgICAgIGZvciAoY29uc3QgYyBvZiB0aGlzLmNvbnRlbnQpIHtcbiAgICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQoYy5ydW50aW1lT2JqZWN0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY29udGFpbmVyO1xuICB9O1xuXG4gIHB1YmxpYyBSZXNvbHZlUmVmZXJlbmNlcyhjb250ZXh0OiBTdG9yeSk6IHZvaWQge1xuICAgIHN1cGVyLlJlc29sdmVSZWZlcmVuY2VzKGNvbnRleHQpO1xuXG4gICAgaWYgKHRoaXMuaWRlbnRpZmllciAmJiAodGhpcy5pZGVudGlmaWVyLm5hbWUgfHwgXCJcIikubGVuZ3RoID4gMCkge1xuICAgICAgY29udGV4dC5DaGVja0Zvck5hbWluZ0NvbGxpc2lvbnMoXG4gICAgICAgIHRoaXMsXG4gICAgICAgIHRoaXMuaWRlbnRpZmllcixcbiAgICAgICAgU3ltYm9sVHlwZS5TdWJGbG93QW5kV2VhdmVcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlYWRvbmx5IHRvU3RyaW5nID0gKCk6IHN0cmluZyA9PlxuICAgIGAtICR7dGhpcy5pZGVudGlmaWVyPy5uYW1lID8gXCIoXCIgKyB0aGlzLmlkZW50aWZpZXI/Lm5hbWUgKyBcIilcIiA6IFwiZ2F0aGVyXCJ9YDtcbn1cbiIsImltcG9ydCB7IGFzT3JOdWxsLCBmaWx0ZXJVbmRlZiB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvVHlwZUFzc2VydGlvblwiO1xuaW1wb3J0IHsgRmxvd0Jhc2UgfSBmcm9tIFwiLi9GbG93L0Zsb3dCYXNlXCI7XG5pbXBvcnQgeyBGbG93TGV2ZWwgfSBmcm9tIFwiLi9GbG93L0Zsb3dMZXZlbFwiO1xuaW1wb3J0IHsgSWRlbnRpZmllciB9IGZyb20gXCIuL0lkZW50aWZpZXJcIjtcbmltcG9ydCB7IFBhcnNlZE9iamVjdCB9IGZyb20gXCIuL09iamVjdFwiO1xuaW1wb3J0IHsgV2VhdmUgfSBmcm9tIFwiLi9XZWF2ZVwiO1xuXG5leHBvcnQgY2xhc3MgUGF0aCB7XG4gIHByaXZhdGUgX2Jhc2VUYXJnZXRMZXZlbDogRmxvd0xldmVsIHwgbnVsbDtcbiAgcHJpdmF0ZSBjb21wb25lbnRzOiBJZGVudGlmaWVyW10gfCBudWxsO1xuXG4gIGdldCBiYXNlVGFyZ2V0TGV2ZWwoKSB7XG4gICAgaWYgKHRoaXMuYmFzZUxldmVsSXNBbWJpZ3VvdXMpIHtcbiAgICAgIHJldHVybiBGbG93TGV2ZWwuU3Rvcnk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2Jhc2VUYXJnZXRMZXZlbDtcbiAgfVxuXG4gIGdldCBiYXNlTGV2ZWxJc0FtYmlndW91cygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gIXRoaXMuX2Jhc2VUYXJnZXRMZXZlbDtcbiAgfVxuXG4gIGdldCBmaXJzdENvbXBvbmVudCgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAodGhpcy5jb21wb25lbnRzID09IG51bGwgfHwgIXRoaXMuY29tcG9uZW50cy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNvbXBvbmVudHNbMF0ubmFtZTtcbiAgfVxuXG4gIGdldCBudW1iZXJPZkNvbXBvbmVudHMoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jb21wb25lbnRzID8gdGhpcy5jb21wb25lbnRzLmxlbmd0aCA6IDA7XG4gIH1cblxuICBwcml2YXRlIF9kb3RTZXBhcmF0ZWRDb21wb25lbnRzOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICBnZXQgZG90U2VwYXJhdGVkQ29tcG9uZW50cygpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLl9kb3RTZXBhcmF0ZWRDb21wb25lbnRzID09IG51bGwpIHtcbiAgICAgIHRoaXMuX2RvdFNlcGFyYXRlZENvbXBvbmVudHMgPSAodGhpcy5jb21wb25lbnRzID8gdGhpcy5jb21wb25lbnRzIDogW10pXG4gICAgICAgIC5tYXAoKGMpID0+IGMubmFtZSlcbiAgICAgICAgLmZpbHRlcihmaWx0ZXJVbmRlZilcbiAgICAgICAgLmpvaW4oXCIuXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZG90U2VwYXJhdGVkQ29tcG9uZW50cztcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGFyZ09uZTogRmxvd0xldmVsIHwgSWRlbnRpZmllcltdIHwgSWRlbnRpZmllcixcbiAgICBhcmdUd28/OiBJZGVudGlmaWVyW11cbiAgKSB7XG4gICAgaWYgKE9iamVjdC52YWx1ZXMoRmxvd0xldmVsKS5pbmNsdWRlcyhhcmdPbmUgYXMgRmxvd0xldmVsKSkge1xuICAgICAgdGhpcy5fYmFzZVRhcmdldExldmVsID0gYXJnT25lIGFzIEZsb3dMZXZlbDtcbiAgICAgIHRoaXMuY29tcG9uZW50cyA9IGFyZ1R3byB8fCBbXTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYXJnT25lKSkge1xuICAgICAgdGhpcy5fYmFzZVRhcmdldExldmVsID0gbnVsbDtcbiAgICAgIHRoaXMuY29tcG9uZW50cyA9IGFyZ09uZSB8fCBbXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYmFzZVRhcmdldExldmVsID0gbnVsbDtcbiAgICAgIHRoaXMuY29tcG9uZW50cyA9IFthcmdPbmUgYXMgSWRlbnRpZmllcl07XG4gICAgfVxuICB9XG5cbiAgZ2V0IHR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiUGF0aFwiO1xuICB9XG5cbiAgcHVibGljIHJlYWRvbmx5IHRvU3RyaW5nID0gKCk6IHN0cmluZyA9PiB7XG4gICAgaWYgKHRoaXMuY29tcG9uZW50cyA9PT0gbnVsbCB8fCB0aGlzLmNvbXBvbmVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICBpZiAodGhpcy5iYXNlVGFyZ2V0TGV2ZWwgPT09IEZsb3dMZXZlbC5XZWF2ZVBvaW50KSB7XG4gICAgICAgIHJldHVybiBcIi0+IDxuZXh0IGdhdGhlciBwb2ludD5cIjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFwiPGludmFsaWQgUGF0aD5cIjtcbiAgICB9XG5cbiAgICByZXR1cm4gYC0+ICR7dGhpcy5kb3RTZXBhcmF0ZWRDb21wb25lbnRzfWA7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IFJlc29sdmVGcm9tQ29udGV4dCA9IChcbiAgICBjb250ZXh0OiBQYXJzZWRPYmplY3RcbiAgKTogUGFyc2VkT2JqZWN0IHwgbnVsbCA9PiB7XG4gICAgaWYgKHRoaXMuY29tcG9uZW50cyA9PSBudWxsIHx8IHRoaXMuY29tcG9uZW50cy5sZW5ndGggPT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gRmluZCBiYXNlIHRhcmdldCBvZiBwYXRoIGZyb20gY3VycmVudCBjb250ZXh0LiBlLmcuXG4gICAgLy8gICA9PT4gQkFTRS5zdWIuc3ViXG4gICAgbGV0IGJhc2VUYXJnZXRPYmplY3QgPSB0aGlzLlJlc29sdmVCYXNlVGFyZ2V0KGNvbnRleHQpO1xuICAgIGlmIChiYXNlVGFyZ2V0T2JqZWN0ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBHaXZlbiBiYXNlIG9mIHBhdGgsIHJlc29sdmUgZmluYWwgdGFyZ2V0IGJ5IHdvcmtpbmcgZGVlcGVyIGludG8gaGllcmFyY2h5XG4gICAgLy8gIGUuZy4gPT0+IGJhc2UubWlkLkZJTkFMXG4gICAgaWYgKHRoaXMuY29tcG9uZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICByZXR1cm4gdGhpcy5SZXNvbHZlVGFpbENvbXBvbmVudHMoYmFzZVRhcmdldE9iamVjdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJhc2VUYXJnZXRPYmplY3Q7XG4gIH07XG5cbiAgLy8gRmluZCB0aGUgcm9vdCBvYmplY3QgZnJvbSB0aGUgYmFzZSwgaS5lLiByb290IGZyb206XG4gIC8vICAgIHJvb3Quc3ViMS5zdWIyXG4gIHB1YmxpYyByZWFkb25seSBSZXNvbHZlQmFzZVRhcmdldCA9IChcbiAgICBvcmlnaW5hbENvbnRleHQ6IFBhcnNlZE9iamVjdFxuICApOiBQYXJzZWRPYmplY3QgfCBudWxsID0+IHtcbiAgICBjb25zdCBmaXJzdENvbXAgPSB0aGlzLmZpcnN0Q29tcG9uZW50O1xuXG4gICAgLy8gV29yayB1cCB0aGUgYW5jZXN0cnkgdG8gZmluZCB0aGUgbm9kZSB0aGF0IGhhcyB0aGUgbmFtZWQgb2JqZWN0XG4gICAgbGV0IGFuY2VzdG9yQ29udGV4dDogUGFyc2VkT2JqZWN0IHwgbnVsbCA9IG9yaWdpbmFsQ29udGV4dDtcbiAgICB3aGlsZSAoYW5jZXN0b3JDb250ZXh0KSB7XG4gICAgICAvLyBPbmx5IGFsbG93IGRlZXAgc2VhcmNoIHdoZW4gc2VhcmNoaW5nIGRlZXBlciBmcm9tIG9yaWdpbmFsIGNvbnRleHQuXG4gICAgICAvLyBEb24ndCBhbGxvdyBzZWFyY2ggdXB3YXJkICp0aGVuKiBkb3dud2FyZCwgc2luY2UgdGhhdCdzIHNlYXJjaGluZyAqZXZlcnl3aGVyZSohXG4gICAgICAvLyBBbGxvd2VkIGV4YW1wbGVzOlxuICAgICAgLy8gIC0gRnJvbSBhbiBpbm5lciBnYXRoZXIgb2YgYSBzdGl0Y2gsIHlvdSBzaG91bGQgc2VhcmNoIHVwIHRvIGZpbmQgYSBrbm90IGNhbGxlZCAneCdcbiAgICAgIC8vICAgIGF0IHRoZSByb290IG9mIGEgc3RvcnksIGJ1dCBub3QgYSBzdGl0Y2ggY2FsbGVkICd4JyBpbiB0aGF0IGtub3QuXG4gICAgICAvLyAgLSBIb3dldmVyLCBmcm9tIHdpdGhpbiBhIGtub3QsIHlvdSBzaG91bGQgYmUgYWJsZSB0byBmaW5kIGEgZ2F0aGVyL2Nob2ljZVxuICAgICAgLy8gICAgYW55d2hlcmUgY2FsbGVkICd4J1xuICAgICAgLy8gKHRoYXQgbGF0dGVyIGV4YW1wbGUgaXMgcXVpdGUgbG9vc2UsIGJ1dCB3ZSBhbGxvdyBpdClcbiAgICAgIGNvbnN0IGRlZXBTZWFyY2g6IGJvb2xlYW4gPSBhbmNlc3RvckNvbnRleHQgPT09IG9yaWdpbmFsQ29udGV4dDtcblxuICAgICAgY29uc3QgZm91bmRCYXNlID0gdGhpcy5HZXRDaGlsZEZyb21Db250ZXh0KFxuICAgICAgICBhbmNlc3RvckNvbnRleHQsXG4gICAgICAgIGZpcnN0Q29tcCxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgZGVlcFNlYXJjaFxuICAgICAgKTtcblxuICAgICAgaWYgKGZvdW5kQmFzZSkge1xuICAgICAgICByZXR1cm4gZm91bmRCYXNlO1xuICAgICAgfVxuXG4gICAgICBhbmNlc3RvckNvbnRleHQgPSBhbmNlc3RvckNvbnRleHQucGFyZW50O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIC8vIEZpbmQgdGhlIGZpbmFsIGNoaWxkIGZyb20gcGF0aCBnaXZlbiByb290LCBpLmUuOlxuICAvLyAgIHJvb3Quc3ViLmZpbmFsQ2hpbGRcbiAgcHVibGljIHJlYWRvbmx5IFJlc29sdmVUYWlsQ29tcG9uZW50cyA9IChcbiAgICByb290VGFyZ2V0OiBQYXJzZWRPYmplY3RcbiAgKTogUGFyc2VkT2JqZWN0IHwgbnVsbCA9PiB7XG4gICAgbGV0IGZvdW5kQ29tcG9uZW50OiBQYXJzZWRPYmplY3QgfCBudWxsID0gcm9vdFRhcmdldDtcblxuICAgIGlmICghdGhpcy5jb21wb25lbnRzKSByZXR1cm4gbnVsbDtcblxuICAgIGZvciAobGV0IGlpID0gMTsgaWkgPCB0aGlzLmNvbXBvbmVudHMubGVuZ3RoOyArK2lpKSB7XG4gICAgICBjb25zdCBjb21wTmFtZSA9IHRoaXMuY29tcG9uZW50c1tpaV0ubmFtZTtcblxuICAgICAgbGV0IG1pbmltdW1FeHBlY3RlZExldmVsOiBGbG93TGV2ZWw7XG4gICAgICBsZXQgZm91bmRGbG93ID0gYXNPck51bGwoZm91bmRDb21wb25lbnQsIEZsb3dCYXNlKTtcbiAgICAgIGlmIChmb3VuZEZsb3cgIT09IG51bGwpIHtcbiAgICAgICAgbWluaW11bUV4cGVjdGVkTGV2ZWwgPSAoZm91bmRGbG93LmZsb3dMZXZlbCArIDEpIGFzIEZsb3dMZXZlbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1pbmltdW1FeHBlY3RlZExldmVsID0gRmxvd0xldmVsLldlYXZlUG9pbnQ7XG4gICAgICB9XG5cbiAgICAgIGZvdW5kQ29tcG9uZW50ID0gdGhpcy5HZXRDaGlsZEZyb21Db250ZXh0KFxuICAgICAgICBmb3VuZENvbXBvbmVudCxcbiAgICAgICAgY29tcE5hbWUsXG4gICAgICAgIG1pbmltdW1FeHBlY3RlZExldmVsXG4gICAgICApO1xuXG4gICAgICBpZiAoZm91bmRDb21wb25lbnQgPT09IG51bGwpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZvdW5kQ29tcG9uZW50O1xuICB9O1xuXG4gIC8vIFNlZSB3aGV0aGVyIFwiY29udGV4dFwiIGNvbnRhaW5zIGEgY2hpbGQgd2l0aCBhIGdpdmVuIG5hbWUgYXQgYSBnaXZlbiBmbG93IGxldmVsXG4gIC8vIENhbiBlaXRoZXIgYmUgYSBuYW1lZCBrbm90L3N0aXRjaCAoYSBGbG93QmFzZSkgb3IgYSB3ZWF2ZSBwb2ludCB3aXRoaW4gYSBXZWF2ZSAoQ2hvaWNlIG9yIEdhdGhlcilcbiAgLy8gVGhpcyBmdW5jdGlvbiBhbHNvIGlnbm9yZXMgYW55IG90aGVyIG9iamVjdCB0eXBlcyB0aGF0IGFyZSBuZWl0aGVyIEZsb3dCYXNlIG5vciBXZWF2ZS5cbiAgLy8gQ2FsbGVkIGZyb20gYm90aCBSZXNvbHZlQmFzZSAoZm9yY2UgZGVlcCkgYW5kIFJlc29sdmVUYWlsIGZvciB0aGUgaW5kaXZpZHVhbCBjb21wb25lbnRzLlxuICBwdWJsaWMgcmVhZG9ubHkgR2V0Q2hpbGRGcm9tQ29udGV4dCA9IChcbiAgICBjb250ZXh0OiBQYXJzZWRPYmplY3QsXG4gICAgY2hpbGROYW1lOiBzdHJpbmcgfCBudWxsLFxuICAgIG1pbmltdW1MZXZlbDogRmxvd0xldmVsIHwgbnVsbCxcbiAgICBmb3JjZURlZXBTZWFyY2g6IGJvb2xlYW4gPSBmYWxzZVxuICApOiBQYXJzZWRPYmplY3QgfCBudWxsID0+IHtcbiAgICAvLyBudWxsIGNoaWxkTGV2ZWwgbWVhbnMgdGhhdCB3ZSBkb24ndCBrbm93IHdoZXJlIHRvIGZpbmQgaXRcbiAgICBjb25zdCBhbWJpZ3VvdXNDaGlsZExldmVsOiBib29sZWFuID0gbWluaW11bUxldmVsID09PSBudWxsO1xuXG4gICAgLy8gU2VhcmNoIGZvciBXZWF2ZVBvaW50IHdpdGhpbiBXZWF2ZVxuICAgIGNvbnN0IHdlYXZlQ29udGV4dCA9IGFzT3JOdWxsKGNvbnRleHQsIFdlYXZlKTtcbiAgICBpZiAoXG4gICAgICBjaGlsZE5hbWUgJiZcbiAgICAgIHdlYXZlQ29udGV4dCAhPT0gbnVsbCAmJlxuICAgICAgKGFtYmlndW91c0NoaWxkTGV2ZWwgfHwgbWluaW11bUxldmVsID09PSBGbG93TGV2ZWwuV2VhdmVQb2ludClcbiAgICApIHtcbiAgICAgIHJldHVybiB3ZWF2ZUNvbnRleHQuV2VhdmVQb2ludE5hbWVkKGNoaWxkTmFtZSkgYXMgUGFyc2VkT2JqZWN0O1xuICAgIH1cblxuICAgIC8vIFNlYXJjaCBmb3IgY29udGVudCB3aXRoaW4gRmxvdyAoZWl0aGVyIGEgc3ViLUZsb3cgb3IgYSBXZWF2ZVBvaW50KVxuICAgIGxldCBmbG93Q29udGV4dCA9IGFzT3JOdWxsKGNvbnRleHQsIEZsb3dCYXNlKTtcbiAgICBpZiAoY2hpbGROYW1lICYmIGZsb3dDb250ZXh0ICE9PSBudWxsKSB7XG4gICAgICAvLyBXaGVuIHNlYXJjaGluZyB3aXRoaW4gYSBLbm90LCBhbGxvdyBhIGRlZXAgc2VhcmNoZXMgc28gdGhhdFxuICAgICAgLy8gbmFtZWQgd2VhdmUgcG9pbnRzIChjaG9pY2VzIGFuZCBnYXRoZXJzKSBjYW4gYmUgZm91bmQgd2l0aGluIGFueSBzdGl0Y2hcbiAgICAgIC8vIE90aGVyd2lzZSwgd2UganVzdCBzZWFyY2ggd2l0aGluIHRoZSBpbW1lZGlhdGUgb2JqZWN0LlxuICAgICAgY29uc3Qgc2hvdWxkRGVlcFNlYXJjaCA9XG4gICAgICAgIGZvcmNlRGVlcFNlYXJjaCB8fCBmbG93Q29udGV4dC5mbG93TGV2ZWwgPT09IEZsb3dMZXZlbC5Lbm90O1xuXG4gICAgICByZXR1cm4gZmxvd0NvbnRleHQuQ29udGVudFdpdGhOYW1lQXRMZXZlbChcbiAgICAgICAgY2hpbGROYW1lLFxuICAgICAgICBtaW5pbXVtTGV2ZWwsXG4gICAgICAgIHNob3VsZERlZXBTZWFyY2hcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG59XG4iLCJpbXBvcnQgeyBFeHByZXNzaW9uIH0gZnJvbSBcIi4vRXhwcmVzc2lvbi9FeHByZXNzaW9uXCI7XG5pbXBvcnQgeyBQYXJzZWRPYmplY3QgfSBmcm9tIFwiLi9PYmplY3RcIjtcbmltcG9ydCB7IENvbnRhaW5lciBhcyBSdW50aW1lQ29udGFpbmVyIH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9Db250YWluZXJcIjtcbmltcG9ydCB7IENvbnRyb2xDb21tYW5kIGFzIFJ1bnRpbWVDb250cm9sQ29tbWFuZCB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvQ29udHJvbENvbW1hbmRcIjtcbmltcG9ydCB7IElua09iamVjdCBhcyBSdW50aW1lT2JqZWN0IH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9PYmplY3RcIjtcbmltcG9ydCB7IFZvaWQgfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL1ZvaWRcIjtcblxuZXhwb3J0IGNsYXNzIFJldHVyblR5cGUgZXh0ZW5kcyBQYXJzZWRPYmplY3Qge1xuICBwdWJsaWMgcmV0dXJuZWRFeHByZXNzaW9uOiBFeHByZXNzaW9uIHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IocmV0dXJuZWRFeHByZXNzaW9uOiBFeHByZXNzaW9uIHwgbnVsbCA9IG51bGwpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgaWYgKHJldHVybmVkRXhwcmVzc2lvbikge1xuICAgICAgdGhpcy5yZXR1cm5lZEV4cHJlc3Npb24gPSB0aGlzLkFkZENvbnRlbnQoXG4gICAgICAgIHJldHVybmVkRXhwcmVzc2lvblxuICAgICAgKSBhcyBFeHByZXNzaW9uO1xuICAgIH1cbiAgfVxuXG4gIGdldCB0eXBlTmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIlJldHVyblR5cGVcIjtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBHZW5lcmF0ZVJ1bnRpbWVPYmplY3QgPSAoKTogUnVudGltZU9iamVjdCA9PiB7XG4gICAgY29uc3QgY29udGFpbmVyID0gbmV3IFJ1bnRpbWVDb250YWluZXIoKTtcblxuICAgIGlmICh0aGlzLnJldHVybmVkRXhwcmVzc2lvbikge1xuICAgICAgLy8gRXZhbHVhdGUgZXhwcmVzc2lvblxuICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQodGhpcy5yZXR1cm5lZEV4cHJlc3Npb24ucnVudGltZU9iamVjdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFJldHVybiBSdW50aW1lLlZvaWQgd2hlbiB0aGVyZSdzIG5vIGV4cHJlc3Npb24gdG8gZXZhbHVhdGVcbiAgICAgIC8vIChUaGlzIGV2YWx1YXRpb24gd2lsbCBqdXN0IGFkZCB0aGUgVm9pZCBvYmplY3QgdG8gdGhlIGV2YWx1YXRpb24gc3RhY2spXG4gICAgICBjb250YWluZXIuQWRkQ29udGVudChSdW50aW1lQ29udHJvbENvbW1hbmQuRXZhbFN0YXJ0KCkpO1xuICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQobmV3IFZvaWQoKSk7XG4gICAgICBjb250YWluZXIuQWRkQ29udGVudChSdW50aW1lQ29udHJvbENvbW1hbmQuRXZhbEVuZCgpKTtcbiAgICB9XG5cbiAgICAvLyBUaGVuIHBvcCB0aGUgY2FsbCBzdGFja1xuICAgIC8vICh0aGUgZXZhbHVhdGVkIGV4cHJlc3Npb24gd2lsbCBsZWF2ZSB0aGUgcmV0dXJuIHZhbHVlIG9uIHRoZSBldmFsdWF0aW9uIHN0YWNrKVxuICAgIGNvbnRhaW5lci5BZGRDb250ZW50KFJ1bnRpbWVDb250cm9sQ29tbWFuZC5Qb3BGdW5jdGlvbigpKTtcblxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH07XG59XG4iLCIvLyBpbXBvcnQgeyBGbG93QmFzZSB9IGZyb20gJy4vRmxvd0Jhc2UnO1xuXG5leHBvcnQgZnVuY3Rpb24gQ2xvc2VzdEZsb3dCYXNlKG9iajogYW55KTogYW55IHwgbnVsbCB7XG4gIGxldCBhbmNlc3RvciA9IG9iai5wYXJlbnQ7XG4gIHdoaWxlIChhbmNlc3Rvcikge1xuICAgIGlmIChhbmNlc3Rvci5oYXNPd25Qcm9wZXJ0eShcImlhbUZsb3diYXNlXCIpICYmIGFuY2VzdG9yLmlhbUZsb3diYXNlKCkpIHtcbiAgICAgIHJldHVybiBhbmNlc3RvciBhcyBhbnk7XG4gICAgfVxuXG4gICAgYW5jZXN0b3IgPSBhbmNlc3Rvci5wYXJlbnQ7XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cbiIsImltcG9ydCB7IERlYnVnTWV0YWRhdGEgfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL0RlYnVnTWV0YWRhdGFcIjtcblxuZXhwb3J0IGNsYXNzIElkZW50aWZpZXIge1xuICBwdWJsaWMgbmFtZTogc3RyaW5nO1xuICBwdWJsaWMgZGVidWdNZXRhZGF0YTogRGVidWdNZXRhZGF0YSB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZykge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gIH1cblxuICBnZXQgdHlwZU5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJJZGVudGlmaWVyXCI7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIERvbmUoKTogSWRlbnRpZmllciB7XG4gICAgcmV0dXJuIG5ldyBJZGVudGlmaWVyKFwiRE9ORVwiKTtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSB0b1N0cmluZyA9ICgpOiBzdHJpbmcgPT4gdGhpcy5uYW1lIHx8IFwidW5kZWZpbmVkIGlkZW50aWZlclwiO1xufVxuIiwiaW1wb3J0IHsgQXJndW1lbnQgfSBmcm9tIFwiLi4vQXJndW1lbnRcIjtcbmltcG9ydCB7IENob2ljZSB9IGZyb20gXCIuLi9DaG9pY2VcIjtcbmltcG9ydCB7IERpdmVydCB9IGZyb20gXCIuLi9EaXZlcnQvRGl2ZXJ0XCI7XG5pbXBvcnQgeyBEaXZlcnRUYXJnZXQgfSBmcm9tIFwiLi4vRGl2ZXJ0L0RpdmVydFRhcmdldFwiO1xuaW1wb3J0IHsgRmxvd0xldmVsIH0gZnJvbSBcIi4vRmxvd0xldmVsXCI7XG5pbXBvcnQgeyBHYXRoZXIgfSBmcm9tIFwiLi4vR2F0aGVyL0dhdGhlclwiO1xuaW1wb3J0IHsgSU5hbWVkQ29udGVudCB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvSU5hbWVkQ29udGVudFwiO1xuLy8gaW1wb3J0IHsgS25vdCB9IGZyb20gJy4uL0tub3QnO1xuaW1wb3J0IHsgUGFyc2VkT2JqZWN0IH0gZnJvbSBcIi4uL09iamVjdFwiO1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gXCIuLi9QYXRoXCI7XG5pbXBvcnQgeyBSZXR1cm5UeXBlIH0gZnJvbSBcIi4uL1JldHVyblR5cGVcIjtcbmltcG9ydCB7IENvbnRhaW5lciBhcyBSdW50aW1lQ29udGFpbmVyIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9Db250YWluZXJcIjtcbmltcG9ydCB7IERpdmVydCBhcyBSdW50aW1lRGl2ZXJ0IH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9EaXZlcnRcIjtcbmltcG9ydCB7IElua09iamVjdCBhcyBSdW50aW1lT2JqZWN0IH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9PYmplY3RcIjtcbmltcG9ydCB7IFZhcmlhYmxlQXNzaWdubWVudCBhcyBSdW50aW1lVmFyaWFibGVBc3NpZ25tZW50IH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9WYXJpYWJsZUFzc2lnbm1lbnRcIjtcbi8vaW1wb3J0IHsgU3RvcnkgfSBmcm9tICcuLi9TdG9yeSc7XG5pbXBvcnQgeyBTeW1ib2xUeXBlIH0gZnJvbSBcIi4uL1N5bWJvbFR5cGVcIjtcbmltcG9ydCB7IFZhcmlhYmxlQXNzaWdubWVudCB9IGZyb20gXCIuLi9WYXJpYWJsZS9WYXJpYWJsZUFzc2lnbm1lbnRcIjtcbmltcG9ydCB7IFdlYXZlIH0gZnJvbSBcIi4uL1dlYXZlXCI7XG5pbXBvcnQgeyBDbG9zZXN0Rmxvd0Jhc2UgfSBmcm9tIFwiLi9DbG9zZXN0Rmxvd0Jhc2VcIjtcbmltcG9ydCB7IElkZW50aWZpZXIgfSBmcm9tIFwiLi4vSWRlbnRpZmllclwiO1xuaW1wb3J0IHsgYXNPck51bGwgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL1R5cGVBc3NlcnRpb25cIjtcblxudHlwZSBWYXJpYWJsZVJlc29sdmVSZXN1bHQgPSB7XG4gIGZvdW5kOiBib29sZWFuO1xuICBpc0dsb2JhbDogYm9vbGVhbjtcbiAgaXNBcmd1bWVudDogYm9vbGVhbjtcbiAgaXNUZW1wb3Jhcnk6IGJvb2xlYW47XG4gIG93bmVyRmxvdzogRmxvd0Jhc2U7XG59O1xuXG4vLyBCYXNlIGNsYXNzIGZvciBLbm90cyBhbmQgU3RpdGNoZXNcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBGbG93QmFzZSBleHRlbmRzIFBhcnNlZE9iamVjdCBpbXBsZW1lbnRzIElOYW1lZENvbnRlbnQge1xuICBwdWJsaWMgYWJzdHJhY3QgcmVhZG9ubHkgZmxvd0xldmVsOiBGbG93TGV2ZWw7XG5cbiAgcHVibGljIF9yb290V2VhdmU6IFdlYXZlIHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBfc3ViRmxvd3NCeU5hbWU6IE1hcDxzdHJpbmcsIEZsb3dCYXNlPiA9IG5ldyBNYXAoKTtcbiAgcHVibGljIF9zdGFydGluZ1N1YkZsb3dEaXZlcnQ6IFJ1bnRpbWVEaXZlcnQgfCBudWxsID0gbnVsbDtcbiAgcHVibGljIF9zdGFydGluZ1N1YkZsb3dSdW50aW1lOiBSdW50aW1lT2JqZWN0IHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBfZmlyc3RDaGlsZEZsb3c6IEZsb3dCYXNlIHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyB2YXJpYWJsZURlY2xhcmF0aW9uczogTWFwPHN0cmluZywgVmFyaWFibGVBc3NpZ25tZW50PiA9IG5ldyBNYXAoKTtcblxuICBnZXQgaGFzUGFyYW1ldGVycygpIHtcbiAgICByZXR1cm4gdGhpcy5hcmdzICE9PSBudWxsICYmIHRoaXMuYXJncy5sZW5ndGggPiAwO1xuICB9XG5cbiAgZ2V0IHN1YkZsb3dzQnlOYW1lKCkge1xuICAgIHJldHVybiB0aGlzLl9zdWJGbG93c0J5TmFtZTtcbiAgfVxuXG4gIGdldCB0eXBlTmFtZSgpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLmlzRnVuY3Rpb24pIHtcbiAgICAgIHJldHVybiBcIkZ1bmN0aW9uXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIFN0cmluZyh0aGlzLmZsb3dMZXZlbCk7XG4gIH1cblxuICBnZXQgbmFtZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5pZGVudGlmaWVyPy5uYW1lIHx8IG51bGw7XG4gIH1cblxuICBwdWJsaWMgaWRlbnRpZmllcjogSWRlbnRpZmllciB8IG51bGwgPSBudWxsO1xuICBwdWJsaWMgYXJnczogQXJndW1lbnRbXSB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGlkZW50aWZpZXI6IElkZW50aWZpZXIgfCBudWxsLFxuICAgIHRvcExldmVsT2JqZWN0czogUGFyc2VkT2JqZWN0W10gfCBudWxsID0gbnVsbCxcbiAgICBhcmdzOiBBcmd1bWVudFtdIHwgbnVsbCA9IG51bGwsXG4gICAgcHVibGljIHJlYWRvbmx5IGlzRnVuY3Rpb246IGJvb2xlYW4gPSBmYWxzZSxcbiAgICBpc0luY2x1ZGVkU3Rvcnk6IGJvb2xlYW4gPSBmYWxzZVxuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5pZGVudGlmaWVyID0gaWRlbnRpZmllcjtcbiAgICB0aGlzLmFyZ3MgPSBhcmdzO1xuXG4gICAgaWYgKHRvcExldmVsT2JqZWN0cyA9PT0gbnVsbCkge1xuICAgICAgdG9wTGV2ZWxPYmplY3RzID0gW107XG4gICAgfVxuXG4gICAgLy8gVXNlZCBieSBzdG9yeSB0byBhZGQgaW5jbHVkZXNcbiAgICB0aGlzLlByZVByb2Nlc3NUb3BMZXZlbE9iamVjdHModG9wTGV2ZWxPYmplY3RzKTtcblxuICAgIHRvcExldmVsT2JqZWN0cyA9IHRoaXMuU3BsaXRXZWF2ZUFuZFN1YkZsb3dDb250ZW50KFxuICAgICAgdG9wTGV2ZWxPYmplY3RzLFxuICAgICAgdGhpcy5HZXRUeXBlKCkgPT0gXCJTdG9yeVwiICYmICFpc0luY2x1ZGVkU3RvcnlcbiAgICApO1xuXG4gICAgdGhpcy5BZGRDb250ZW50KHRvcExldmVsT2JqZWN0cyk7XG4gIH1cblxuICBwdWJsaWMgaWFtRmxvd2Jhc2UgPSAoKSA9PiB0cnVlO1xuXG4gIHB1YmxpYyByZWFkb25seSBTcGxpdFdlYXZlQW5kU3ViRmxvd0NvbnRlbnQgPSAoXG4gICAgY29udGVudE9ianM6IFBhcnNlZE9iamVjdFtdLFxuICAgIGlzUm9vdFN0b3J5OiBib29sZWFuXG4gICk6IFBhcnNlZE9iamVjdFtdID0+IHtcbiAgICBjb25zdCB3ZWF2ZU9ianM6IFBhcnNlZE9iamVjdFtdID0gW107XG4gICAgY29uc3Qgc3ViRmxvd09ianM6IFBhcnNlZE9iamVjdFtdID0gW107XG5cbiAgICB0aGlzLl9zdWJGbG93c0J5TmFtZSA9IG5ldyBNYXAoKTtcblxuICAgIGZvciAoY29uc3Qgb2JqIG9mIGNvbnRlbnRPYmpzKSB7XG4gICAgICBjb25zdCBzdWJGbG93ID0gYXNPck51bGwob2JqLCBGbG93QmFzZSk7XG4gICAgICBpZiAoc3ViRmxvdykge1xuICAgICAgICBpZiAodGhpcy5fZmlyc3RDaGlsZEZsb3cgPT09IG51bGwpIHtcbiAgICAgICAgICB0aGlzLl9maXJzdENoaWxkRmxvdyA9IHN1YkZsb3c7XG4gICAgICAgIH1cblxuICAgICAgICBzdWJGbG93T2Jqcy5wdXNoKG9iaik7XG4gICAgICAgIGlmIChzdWJGbG93LmlkZW50aWZpZXI/Lm5hbWUpIHtcbiAgICAgICAgICB0aGlzLl9zdWJGbG93c0J5TmFtZS5zZXQoc3ViRmxvdy5pZGVudGlmaWVyPy5uYW1lLCBzdWJGbG93KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2VhdmVPYmpzLnB1c2gob2JqKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJbXBsaWNpdCBmaW5hbCBnYXRoZXIgaW4gdG9wIGxldmVsIHN0b3J5IGZvciBlbmRpbmcgd2l0aG91dCB3YXJuaW5nIHRoYXQgeW91IHJ1biBvdXQgb2YgY29udGVudFxuICAgIGlmIChpc1Jvb3RTdG9yeSkge1xuICAgICAgd2VhdmVPYmpzLnB1c2goXG4gICAgICAgIG5ldyBHYXRoZXIobnVsbCwgMSksXG4gICAgICAgIG5ldyBEaXZlcnQobmV3IFBhdGgoSWRlbnRpZmllci5Eb25lKCkpKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBmaW5hbENvbnRlbnQ6IFBhcnNlZE9iamVjdFtdID0gW107XG5cbiAgICBpZiAod2VhdmVPYmpzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuX3Jvb3RXZWF2ZSA9IG5ldyBXZWF2ZSh3ZWF2ZU9ianMsIDApO1xuICAgICAgZmluYWxDb250ZW50LnB1c2godGhpcy5fcm9vdFdlYXZlKTtcbiAgICB9XG5cbiAgICBpZiAoc3ViRmxvd09ianMubGVuZ3RoID4gMCkge1xuICAgICAgZmluYWxDb250ZW50LnB1c2goLi4uc3ViRmxvd09ianMpO1xuICAgIH1cbiAgICByZXR1cm4gZmluYWxDb250ZW50O1xuICB9O1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgcHVibGljIFByZVByb2Nlc3NUb3BMZXZlbE9iamVjdHMoXzogUGFyc2VkT2JqZWN0W10pOiB2b2lkIHtcbiAgICAvLyBlbXB0eSBieSBkZWZhdWx0LCB1c2VkIGJ5IFN0b3J5IHRvIHByb2Nlc3MgaW5jbHVkZWQgZmlsZSByZWZlcmVuY2VzXG4gIH1cblxuICBwdWJsaWMgVmFyaWFibGVSZXNvbHZlUmVzdWx0PzogVmFyaWFibGVSZXNvbHZlUmVzdWx0IHwgbnVsbCB8IHVuZGVmaW5lZDtcblxuICBwdWJsaWMgUmVzb2x2ZVZhcmlhYmxlV2l0aE5hbWUgPSAoXG4gICAgdmFyTmFtZTogc3RyaW5nLFxuICAgIGZyb21Ob2RlOiBQYXJzZWRPYmplY3RcbiAgKTogVmFyaWFibGVSZXNvbHZlUmVzdWx0ID0+IHtcbiAgICBjb25zdCByZXN1bHQ6IFZhcmlhYmxlUmVzb2x2ZVJlc3VsdCA9IHt9IGFzIGFueTtcblxuICAgIC8vIFNlYXJjaCBpbiB0aGUgc3RpdGNoIC8ga25vdCB0aGF0IG93bnMgdGhlIG5vZGUgZmlyc3RcbiAgICBjb25zdCBvd25lckZsb3cgPSBmcm9tTm9kZSA9PT0gbnVsbCA/IHRoaXMgOiBDbG9zZXN0Rmxvd0Jhc2UoZnJvbU5vZGUpO1xuXG4gICAgaWYgKG93bmVyRmxvdykge1xuICAgICAgLy8gQXJndW1lbnRcbiAgICAgIGlmIChvd25lckZsb3cuYXJncyAhPT0gbnVsbCkge1xuICAgICAgICBmb3IgKGNvbnN0IGFyZyBvZiBvd25lckZsb3cuYXJncykge1xuICAgICAgICAgIGlmIChhcmcuaWRlbnRpZmllcj8ubmFtZSA9PT0gdmFyTmFtZSkge1xuICAgICAgICAgICAgcmVzdWx0LmZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlc3VsdC5pc0FyZ3VtZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlc3VsdC5vd25lckZsb3cgPSBvd25lckZsb3c7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUZW1wXG4gICAgICBpZiAoXG4gICAgICAgIG93bmVyRmxvdyAhPT0gdGhpcy5zdG9yeSAmJlxuICAgICAgICBvd25lckZsb3cudmFyaWFibGVEZWNsYXJhdGlvbnMuaGFzKHZhck5hbWUpXG4gICAgICApIHtcbiAgICAgICAgcmVzdWx0LmZvdW5kID0gdHJ1ZTtcbiAgICAgICAgcmVzdWx0Lm93bmVyRmxvdyA9IG93bmVyRmxvdztcbiAgICAgICAgcmVzdWx0LmlzVGVtcG9yYXJ5ID0gdHJ1ZTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdsb2JhbFxuICAgIGlmICh0aGlzLnN0b3J5LnZhcmlhYmxlRGVjbGFyYXRpb25zLmhhcyh2YXJOYW1lKSkge1xuICAgICAgcmVzdWx0LmZvdW5kID0gdHJ1ZTtcbiAgICAgIHJlc3VsdC5vd25lckZsb3cgPSB0aGlzLnN0b3J5O1xuICAgICAgcmVzdWx0LmlzR2xvYmFsID0gdHJ1ZTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICByZXN1bHQuZm91bmQgPSBmYWxzZTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgcHVibGljIEFkZE5ld1ZhcmlhYmxlRGVjbGFyYXRpb24gPSAodmFyRGVjbDogVmFyaWFibGVBc3NpZ25tZW50KTogdm9pZCA9PiB7XG4gICAgY29uc3QgdmFyTmFtZSA9IHZhckRlY2wudmFyaWFibGVOYW1lO1xuICAgIGlmICh0aGlzLnZhcmlhYmxlRGVjbGFyYXRpb25zLmhhcyh2YXJOYW1lKSkge1xuICAgICAgY29uc3QgdmFyYWIgPSB0aGlzLnZhcmlhYmxlRGVjbGFyYXRpb25zLmdldCh2YXJOYW1lKSE7XG4gICAgICBsZXQgcHJldkRlY2xFcnJvciA9IFwiXCI7XG4gICAgICBjb25zdCBkZWJ1Z01ldGFkYXRhID0gdmFyYWIuZGVidWdNZXRhZGF0YTtcbiAgICAgIGlmIChkZWJ1Z01ldGFkYXRhKSB7XG4gICAgICAgIHByZXZEZWNsRXJyb3IgPSBgICgke3ZhcmFiLmRlYnVnTWV0YWRhdGF9KWA7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgIGBmb3VuZCBkZWNsYXJhdGlvbiB2YXJpYWJsZSAnJHt2YXJOYW1lfScgdGhhdCB3YXMgYWxyZWFkeSBkZWNsYXJlZCR7cHJldkRlY2xFcnJvcn1gLFxuICAgICAgICB2YXJEZWNsLFxuICAgICAgICBmYWxzZVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMudmFyaWFibGVEZWNsYXJhdGlvbnMuc2V0KHZhckRlY2wudmFyaWFibGVOYW1lLCB2YXJEZWNsKTtcbiAgfTtcblxuICBwdWJsaWMgUmVzb2x2ZVdlYXZlUG9pbnROYW1pbmcgPSAoKTogdm9pZCA9PiB7XG4gICAgLy8gRmluZCBhbGwgd2VhdmUgcG9pbnRzIGFuZCBvcmdhbmlzZSB0aGVtIGJ5IG5hbWUgcmVhZHkgZm9yXG4gICAgLy8gZGl2ZXJ0aW5nLiBBbHNvIGRldGVjdCBuYW1pbmcgY29sbGlzaW9ucy5cbiAgICBpZiAodGhpcy5fcm9vdFdlYXZlKSB7XG4gICAgICB0aGlzLl9yb290V2VhdmUuUmVzb2x2ZVdlYXZlUG9pbnROYW1pbmcoKTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IFssIHZhbHVlXSBvZiB0aGlzLl9zdWJGbG93c0J5TmFtZSkge1xuICAgICAgaWYgKHZhbHVlLmhhc093blByb3BlcnR5KFwiUmVzb2x2ZVdlYXZlUG9pbnROYW1pbmdcIikpIHtcbiAgICAgICAgdmFsdWUuUmVzb2x2ZVdlYXZlUG9pbnROYW1pbmcoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IEdlbmVyYXRlUnVudGltZU9iamVjdCA9ICgpOiBSdW50aW1lT2JqZWN0ID0+IHtcbiAgICBsZXQgZm91bmRSZXR1cm46IFJldHVyblR5cGUgfCBudWxsID0gbnVsbDtcbiAgICBpZiAodGhpcy5pc0Z1bmN0aW9uKSB7XG4gICAgICB0aGlzLkNoZWNrRm9yRGlzYWxsb3dlZEZ1bmN0aW9uRmxvd0NvbnRyb2woKTtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgdGhpcy5mbG93TGV2ZWwgPT09IEZsb3dMZXZlbC5Lbm90IHx8XG4gICAgICB0aGlzLmZsb3dMZXZlbCA9PT0gRmxvd0xldmVsLlN0aXRjaFxuICAgICkge1xuICAgICAgLy8gTm9uLWZ1bmN0b246IE1ha2Ugc3VyZSBrbm90cyBhbmQgc3RpdGNoZXMgZG9uJ3QgYXR0ZW1wdCB0byB1c2UgUmV0dXJuIHN0YXRlbWVudFxuICAgICAgZm91bmRSZXR1cm4gPSB0aGlzLkZpbmQoUmV0dXJuVHlwZSkoKTtcblxuICAgICAgaWYgKGZvdW5kUmV0dXJuICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgICAgYFJldHVybiBzdGF0ZW1lbnRzIGNhbiBvbmx5IGJlIHVzZWQgaW4ga25vdHMgdGhhdCBhcmUgZGVjbGFyZWQgYXMgZnVuY3Rpb25zOiA9PSBmdW5jdGlvbiAke3RoaXMuaWRlbnRpZmllcn0gPT1gLFxuICAgICAgICAgIGZvdW5kUmV0dXJuXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY29udGFpbmVyID0gbmV3IFJ1bnRpbWVDb250YWluZXIoKTtcbiAgICBjb250YWluZXIubmFtZSA9IHRoaXMuaWRlbnRpZmllcj8ubmFtZSBhcyBzdHJpbmc7XG5cbiAgICBpZiAodGhpcy5zdG9yeS5jb3VudEFsbFZpc2l0cykge1xuICAgICAgY29udGFpbmVyLnZpc2l0c1Nob3VsZEJlQ291bnRlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5HZW5lcmF0ZUFyZ3VtZW50VmFyaWFibGVBc3NpZ25tZW50cyhjb250YWluZXIpO1xuXG4gICAgLy8gUnVuIHRocm91Z2ggY29udGVudCBkZWZpbmVkIGZvciB0aGlzIGtub3Qvc3RpdGNoOlxuICAgIC8vICAtIEZpcnN0IG9mIGFsbCwgYW55IGluaXRpYWwgY29udGVudCBiZWZvcmUgYSBzdWItc3RpdGNoXG4gICAgLy8gICAgb3IgYW55IHdlYXZlIGNvbnRlbnQgaXMgYWRkZWQgdG8gdGhlIG1haW4gY29udGVudCBjb250YWluZXJcbiAgICAvLyAgLSBUaGUgZmlyc3QgaW5uZXIga25vdC9zdGl0Y2ggaXMgYXV0b21hdGljYWxseSBlbnRlcmVkLCB3aGlsZVxuICAgIC8vICAgIHRoZSBvdGhlcnMgYXJlIG9ubHkgYWNjZXNzaWJsZSBieSBhbiBleHBsaWNpdCBkaXZlcnRcbiAgICAvLyAgICAgICAtIFRoZSBleGNlcHRpb24gdG8gdGhpcyBydWxlIGlzIGlmIHRoZSBrbm90L3N0aXRjaCB0YWtlc1xuICAgIC8vICAgICAgICAgcGFyYW1ldGVycywgaW4gd2hpY2ggY2FzZSBpdCBjYW4ndCBiZSBhdXRvLWVudGVyZWQuXG4gICAgLy8gIC0gQW55IENob2ljZXMgYW5kIEdhdGhlcnMgKGkuZS4gSVdlYXZlUG9pbnQpIGZvdW5kIGFyZVxuICAgIC8vICAgIHByb2Nlc3NzZWQgYnkgR2VuZXJhdGVGbG93Q29udGVudC5cbiAgICBsZXQgY29udGVudElkeDogbnVtYmVyID0gMDtcbiAgICB3aGlsZSAodGhpcy5jb250ZW50ICE9PSBudWxsICYmIGNvbnRlbnRJZHggPCB0aGlzLmNvbnRlbnQubGVuZ3RoKSB7XG4gICAgICBjb25zdCBvYmo6IFBhcnNlZE9iamVjdCA9IHRoaXMuY29udGVudFtjb250ZW50SWR4XTtcblxuICAgICAgLy8gSW5uZXIga25vdHMgYW5kIHN0aXRjaGVzXG4gICAgICBpZiAob2JqIGluc3RhbmNlb2YgRmxvd0Jhc2UpIHtcbiAgICAgICAgY29uc3QgY2hpbGRGbG93OiBGbG93QmFzZSA9IG9iajtcbiAgICAgICAgY29uc3QgY2hpbGRGbG93UnVudGltZSA9IGNoaWxkRmxvdy5ydW50aW1lT2JqZWN0O1xuXG4gICAgICAgIC8vIEZpcnN0IGlubmVyIHN0aXRjaCAtIGF1dG9tYXRpY2FsbHkgc3RlcCBpbnRvIGl0XG4gICAgICAgIC8vIDIwLzA5LzIwMTYgLSBsZXQncyBub3QgYXV0byBzdGVwIGludG8ga25vdHNcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNvbnRlbnRJZHggPT09IDAgJiZcbiAgICAgICAgICAhY2hpbGRGbG93Lmhhc1BhcmFtZXRlcnMgJiZcbiAgICAgICAgICB0aGlzLmZsb3dMZXZlbCA9PT0gRmxvd0xldmVsLktub3RcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5fc3RhcnRpbmdTdWJGbG93RGl2ZXJ0ID0gbmV3IFJ1bnRpbWVEaXZlcnQoKTtcbiAgICAgICAgICBjb250YWluZXIuQWRkQ29udGVudCh0aGlzLl9zdGFydGluZ1N1YkZsb3dEaXZlcnQpO1xuICAgICAgICAgIHRoaXMuX3N0YXJ0aW5nU3ViRmxvd1J1bnRpbWUgPSBjaGlsZEZsb3dSdW50aW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIGR1cGxpY2F0ZSBrbm90cy9zdGl0Y2hlcyB3aXRoIHNhbWUgbmFtZVxuICAgICAgICBjb25zdCBuYW1lZENoaWxkID0gY2hpbGRGbG93UnVudGltZSBhcyBSdW50aW1lT2JqZWN0ICYgSU5hbWVkQ29udGVudDtcbiAgICAgICAgY29uc3QgZXhpc3RpbmdDaGlsZDogSU5hbWVkQ29udGVudCB8IG51bGwgPVxuICAgICAgICAgIGNvbnRhaW5lci5uYW1lZENvbnRlbnQuZ2V0KG5hbWVkQ2hpbGQubmFtZSEpIHx8IG51bGw7XG5cbiAgICAgICAgaWYgKGV4aXN0aW5nQ2hpbGQpIHtcbiAgICAgICAgICBjb25zdCBlcnJvck1zZyA9IGAke3RoaXMuR2V0VHlwZSgpfSBhbHJlYWR5IGNvbnRhaW5zIGZsb3cgbmFtZWQgJyR7XG4gICAgICAgICAgICBuYW1lZENoaWxkLm5hbWVcbiAgICAgICAgICB9JyAoYXQgJHsoZXhpc3RpbmdDaGlsZCBhcyBhbnkgYXMgUnVudGltZU9iamVjdCkuZGVidWdNZXRhZGF0YX0pYDtcbiAgICAgICAgICB0aGlzLkVycm9yKGVycm9yTXNnLCBjaGlsZEZsb3cpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29udGFpbmVyLkFkZFRvTmFtZWRDb250ZW50T25seShuYW1lZENoaWxkKTtcbiAgICAgIH0gZWxzZSBpZiAob2JqKSB7XG4gICAgICAgIC8vIE90aGVyIGNvbnRlbnQgKGluY2x1ZGluZyBlbnRpcmUgV2VhdmVzIHRoYXQgd2VyZSBncm91cGVkIGluIHRoZSBjb25zdHJ1Y3RvcilcbiAgICAgICAgLy8gQXQgdGhlIHRpbWUgb2Ygd3JpdGluZywgYWxsIEZsb3dCYXNlcyBoYXZlIGEgbWF4aW11bSBvZiBvbmUgcGllY2Ugb2YgXCJvdGhlciBjb250ZW50XCJcbiAgICAgICAgLy8gYW5kIGl0J3MgYWx3YXlzIHRoZSByb290IFdlYXZlXG4gICAgICAgIGNvbnRhaW5lci5BZGRDb250ZW50KG9iai5ydW50aW1lT2JqZWN0KTtcbiAgICAgIH1cblxuICAgICAgY29udGVudElkeCArPSAxO1xuICAgIH1cblxuICAgIC8vIENIRUNLIEZPUiBGSU5BTCBMT09TRSBFTkRTIVxuICAgIC8vIE5vdGVzOlxuICAgIC8vICAtIEZ1bmN0aW9ucyBkb24ndCBuZWVkIHRvIHRlcm1pbmF0ZSAtIHRoZXkganVzdCBpbXBsaWNpdGx5IHJldHVyblxuICAgIC8vICAtIElmIHJldHVybiBzdGF0ZW1lbnQgd2FzIGZvdW5kLCBkb24ndCBjb250aW51ZSBmaW5kaW5nIHdhcm5pbmdzIGZvciBtaXNzaW5nIGNvbnRyb2wgZmxvdyxcbiAgICAvLyBzaW5jZSBpdCdzIGxpa2VseSB0aGF0IGEgcmV0dXJuIHN0YXRlbWVudCBoYXMgYmVlbiB1c2VkIGluc3RlYWQgb2YgYSAtPi0+IG9yIHNvbWV0aGluZyxcbiAgICAvLyBvciB0aGUgd3JpdGVyIGZhaWxlZCB0byBtYXJrIHRoZSBrbm90IGFzIGEgZnVuY3Rpb24uXG4gICAgLy8gIC0gX3Jvb3RXZWF2ZSBtYXkgYmUgbnVsbCBpZiBpdCdzIGEga25vdCB0aGF0IG9ubHkgaGFzIHN0aXRjaGVzXG4gICAgaWYgKFxuICAgICAgdGhpcy5mbG93TGV2ZWwgIT09IEZsb3dMZXZlbC5TdG9yeSAmJlxuICAgICAgIXRoaXMuaXNGdW5jdGlvbiAmJlxuICAgICAgdGhpcy5fcm9vdFdlYXZlICE9PSBudWxsICYmXG4gICAgICBmb3VuZFJldHVybiA9PT0gbnVsbFxuICAgICkge1xuICAgICAgdGhpcy5fcm9vdFdlYXZlLlZhbGlkYXRlVGVybWluYXRpb24odGhpcy5XYXJuaW5nSW5UZXJtaW5hdGlvbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgR2VuZXJhdGVBcmd1bWVudFZhcmlhYmxlQXNzaWdubWVudHMgPSAoXG4gICAgY29udGFpbmVyOiBSdW50aW1lQ29udGFpbmVyXG4gICk6IHZvaWQgPT4ge1xuICAgIGlmICh0aGlzLmFyZ3MgPT09IG51bGwgfHwgdGhpcy5hcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEFzc2lnbiBwYXJhbWV0ZXJzIGluIHJldmVyc2Ugc2luY2UgdGhleSdsbCBiZSBwb3BwZWQgb2ZmIHRoZSBldmFsdWF0aW9uIHN0YWNrXG4gICAgLy8gTm8gbmVlZCB0byBnZW5lcmF0ZSBFdmFsU3RhcnQgYW5kIEV2YWxFbmQgc2luY2UgdGhlcmUncyBub3RoaW5nIGJlaW5nIHB1c2hlZFxuICAgIC8vIGJhY2sgb250byB0aGUgZXZhbHVhdGlvbiBzdGFjay5cbiAgICBmb3IgKGxldCBpaSA9IHRoaXMuYXJncy5sZW5ndGggLSAxOyBpaSA+PSAwOyAtLWlpKSB7XG4gICAgICBjb25zdCBwYXJhbU5hbWUgPSB0aGlzLmFyZ3NbaWldLmlkZW50aWZpZXI/Lm5hbWUgfHwgbnVsbDtcbiAgICAgIGNvbnN0IGFzc2lnbiA9IG5ldyBSdW50aW1lVmFyaWFibGVBc3NpZ25tZW50KHBhcmFtTmFtZSwgdHJ1ZSk7XG4gICAgICBjb250YWluZXIuQWRkQ29udGVudChhc3NpZ24pO1xuICAgIH1cbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgQ29udGVudFdpdGhOYW1lQXRMZXZlbCA9IChcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgbGV2ZWw6IEZsb3dMZXZlbCB8IG51bGwgPSBudWxsLFxuICAgIGRlZXBTZWFyY2g6IGJvb2xlYW4gPSBmYWxzZVxuICApOiBQYXJzZWRPYmplY3QgfCBudWxsID0+IHtcbiAgICAvLyBSZWZlcmVuY2luZyBzZWxmP1xuICAgIGlmIChsZXZlbCA9PT0gdGhpcy5mbG93TGV2ZWwgfHwgbGV2ZWwgPT09IG51bGwpIHtcbiAgICAgIGlmIChuYW1lID09PSB0aGlzLmlkZW50aWZpZXI/Lm5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGxldmVsID09PSBGbG93TGV2ZWwuV2VhdmVQb2ludCB8fCBsZXZlbCA9PT0gbnVsbCkge1xuICAgICAgbGV0IHdlYXZlUG9pbnRSZXN1bHQ6IFBhcnNlZE9iamVjdCB8IG51bGwgPSBudWxsO1xuXG4gICAgICBpZiAodGhpcy5fcm9vdFdlYXZlKSB7XG4gICAgICAgIHdlYXZlUG9pbnRSZXN1bHQgPSB0aGlzLl9yb290V2VhdmUuV2VhdmVQb2ludE5hbWVkKFxuICAgICAgICAgIG5hbWVcbiAgICAgICAgKSBhcyBQYXJzZWRPYmplY3Q7XG4gICAgICAgIGlmICh3ZWF2ZVBvaW50UmVzdWx0KSB7XG4gICAgICAgICAgcmV0dXJuIHdlYXZlUG9pbnRSZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gU3RvcCBub3cgaWYgd2Ugb25seSB3YW50ZWQgYSByZXN1bHQgaWYgaXQncyBhIHdlYXZlIHBvaW50P1xuICAgICAgaWYgKGxldmVsID09PSBGbG93TGV2ZWwuV2VhdmVQb2ludCkge1xuICAgICAgICByZXR1cm4gZGVlcFNlYXJjaCA/IHRoaXMuRGVlcFNlYXJjaEZvckFueUxldmVsQ29udGVudChuYW1lKSA6IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgdGhpcyBmbG93IHdvdWxkIGJlIGluY2FwYWJsZSBvZiBjb250YWluaW5nIHRoZSByZXF1ZXN0ZWQgbGV2ZWwsIGVhcmx5IG91dFxuICAgIC8vIChlLmcuIGFza2luZyBmb3IgYSBLbm90IGZyb20gYSBTdGl0Y2gpXG4gICAgaWYgKGxldmVsICE9PSBudWxsICYmIGxldmVsIDwgdGhpcy5mbG93TGV2ZWwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCBzdWJGbG93OiBGbG93QmFzZSB8IG51bGwgPSB0aGlzLl9zdWJGbG93c0J5TmFtZS5nZXQobmFtZSkgfHwgbnVsbDtcblxuICAgIGlmIChzdWJGbG93ICYmIChsZXZlbCA9PT0gbnVsbCB8fCBsZXZlbCA9PT0gc3ViRmxvdy5mbG93TGV2ZWwpKSB7XG4gICAgICByZXR1cm4gc3ViRmxvdztcbiAgICB9XG5cbiAgICByZXR1cm4gZGVlcFNlYXJjaCA/IHRoaXMuRGVlcFNlYXJjaEZvckFueUxldmVsQ29udGVudChuYW1lKSA6IG51bGw7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IERlZXBTZWFyY2hGb3JBbnlMZXZlbENvbnRlbnQgPSAobmFtZTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3Qgd2VhdmVSZXN1bHRTZWxmID0gdGhpcy5Db250ZW50V2l0aE5hbWVBdExldmVsKFxuICAgICAgbmFtZSxcbiAgICAgIEZsb3dMZXZlbC5XZWF2ZVBvaW50LFxuICAgICAgZmFsc2VcbiAgICApO1xuXG4gICAgaWYgKHdlYXZlUmVzdWx0U2VsZikge1xuICAgICAgcmV0dXJuIHdlYXZlUmVzdWx0U2VsZjtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IFssIHZhbHVlXSBvZiB0aGlzLl9zdWJGbG93c0J5TmFtZSkge1xuICAgICAgY29uc3QgZGVlcFJlc3VsdCA9IHZhbHVlLkNvbnRlbnRXaXRoTmFtZUF0TGV2ZWwobmFtZSwgbnVsbCwgdHJ1ZSk7XG5cbiAgICAgIGlmIChkZWVwUmVzdWx0KSB7XG4gICAgICAgIHJldHVybiBkZWVwUmVzdWx0O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIHB1YmxpYyBSZXNvbHZlUmVmZXJlbmNlcyhjb250ZXh0OiBhbnkpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5fc3RhcnRpbmdTdWJGbG93RGl2ZXJ0KSB7XG4gICAgICBpZiAoIXRoaXMuX3N0YXJ0aW5nU3ViRmxvd1J1bnRpbWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3N0YXJ0aW5nU3ViRmxvd0RpdmVydC50YXJnZXRQYXRoID1cbiAgICAgICAgdGhpcy5fc3RhcnRpbmdTdWJGbG93UnVudGltZS5wYXRoO1xuICAgIH1cblxuICAgIHN1cGVyLlJlc29sdmVSZWZlcmVuY2VzKGNvbnRleHQpO1xuXG4gICAgLy8gQ2hlY2sgdmFsaWRpdHkgb2YgcGFyYW1ldGVyIG5hbWVzXG4gICAgaWYgKHRoaXMuYXJncyAhPT0gbnVsbCkge1xuICAgICAgZm9yIChjb25zdCBhcmcgb2YgdGhpcy5hcmdzKSB7XG4gICAgICAgIGNvbnRleHQuQ2hlY2tGb3JOYW1pbmdDb2xsaXNpb25zKFxuICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgYXJnLmlkZW50aWZpZXIsXG4gICAgICAgICAgU3ltYm9sVHlwZS5BcmcsXG4gICAgICAgICAgXCJhcmd1bWVudFwiXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlcGFyYXRlbHksIGNoZWNrIGZvciBkdXBsaWNhdGUgYXJ1Z21lbnQgbmFtZXMsIHNpbmNlIHRoZXkgYXJlbid0IFBhcnNlZC5PYmplY3RzLFxuICAgICAgLy8gc28gaGF2ZSB0byBiZSBjaGVja2VkIGluZGVwZW5kZW50bHkuXG4gICAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgdGhpcy5hcmdzLmxlbmd0aDsgaWkgKz0gMSkge1xuICAgICAgICBmb3IgKGxldCBqaiA9IGlpICsgMTsgamogPCB0aGlzLmFyZ3MubGVuZ3RoOyBqaiArPSAxKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5hcmdzW2lpXS5pZGVudGlmaWVyPy5uYW1lID09IHRoaXMuYXJnc1tqal0uaWRlbnRpZmllcj8ubmFtZVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYE11bHRpcGxlIGFyZ3VtZW50cyB3aXRoIHRoZSBzYW1lIG5hbWU6ICcke3RoaXMuYXJnc1tpaV0uaWRlbnRpZmllcn0nYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBuYW1pbmcgY29sbGlzaW9ucyBmb3Iga25vdHMgYW5kIHN0aXRjaGVzXG4gICAgaWYgKHRoaXMuZmxvd0xldmVsICE9PSBGbG93TGV2ZWwuU3RvcnkpIHtcbiAgICAgIC8vIFdlYXZlIHBvaW50cyBhcmVuJ3QgRmxvd0Jhc2VzLCBzbyB0aGlzIHdpbGwgb25seSBiZSBrbm90IG9yIHN0aXRjaFxuICAgICAgY29uc3Qgc3ltYm9sVHlwZSA9XG4gICAgICAgIHRoaXMuZmxvd0xldmVsID09PSBGbG93TGV2ZWwuS25vdFxuICAgICAgICAgID8gU3ltYm9sVHlwZS5Lbm90XG4gICAgICAgICAgOiBTeW1ib2xUeXBlLlN1YkZsb3dBbmRXZWF2ZTtcblxuICAgICAgY29udGV4dC5DaGVja0Zvck5hbWluZ0NvbGxpc2lvbnModGhpcywgdGhpcy5pZGVudGlmaWVyLCBzeW1ib2xUeXBlKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVhZG9ubHkgQ2hlY2tGb3JEaXNhbGxvd2VkRnVuY3Rpb25GbG93Q29udHJvbCA9ICgpOiB2b2lkID0+IHtcbiAgICAvLyBpZiAoISh0aGlzIGluc3RhbmNlb2YgS25vdCkpIHsgLy8gY2Fubm9udCB1c2UgS25vdCBoZXJlIGJlY2F1c2Ugb2YgY2lyY3VsYXIgZGVwZW5kYW5jeVxuICAgIGlmICh0aGlzLmZsb3dMZXZlbCAhPT0gRmxvd0xldmVsLktub3QpIHtcbiAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgIFwiRnVuY3Rpb25zIGNhbm5vdCBiZSBzdGl0Y2hlcyAtIGkuZS4gdGhleSBzaG91bGQgYmUgZGVmaW5lZCBhcyAnPT0gZnVuY3Rpb24gbXlGdW5jID09JyByYXRoZXIgdGhhbiBpbnRlcm5hbCB0byBhbm90aGVyIGtub3QuXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gTm90IGFsbG93ZWQgc3ViLWZsb3dzXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgdGhpcy5fc3ViRmxvd3NCeU5hbWUpIHtcbiAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgIGBGdW5jdGlvbnMgbWF5IG5vdCBjb250YWluIHN0aXRjaGVzLCBidXQgc2F3ICcke2tleX0nIHdpdGhpbiB0aGUgZnVuY3Rpb24gJyR7dGhpcy5pZGVudGlmaWVyfSdgLFxuICAgICAgICB2YWx1ZVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuX3Jvb3RXZWF2ZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuXG4gICAgY29uc3QgYWxsRGl2ZXJ0cyA9IHRoaXMuX3Jvb3RXZWF2ZS5GaW5kQWxsPERpdmVydD4oRGl2ZXJ0KSgpO1xuICAgIGZvciAoY29uc3QgZGl2ZXJ0IG9mIGFsbERpdmVydHMpIHtcbiAgICAgIGlmICghZGl2ZXJ0LmlzRnVuY3Rpb25DYWxsICYmICEoZGl2ZXJ0LnBhcmVudCBpbnN0YW5jZW9mIERpdmVydFRhcmdldCkpIHtcbiAgICAgICAgdGhpcy5FcnJvcihcbiAgICAgICAgICBgRnVuY3Rpb25zIG1heSBub3QgY29udGFpbiBkaXZlcnRzLCBidXQgc2F3ICcke2RpdmVydH0nYCxcbiAgICAgICAgICBkaXZlcnRcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhbGxDaG9pY2VzID0gdGhpcy5fcm9vdFdlYXZlLkZpbmRBbGw8Q2hvaWNlPihDaG9pY2UpKCk7XG4gICAgZm9yIChjb25zdCBjaG9pY2Ugb2YgYWxsQ2hvaWNlcykge1xuICAgICAgdGhpcy5FcnJvcihcbiAgICAgICAgYEZ1bmN0aW9ucyBtYXkgbm90IGNvbnRhaW4gY2hvaWNlcywgYnV0IHNhdyAnJHtjaG9pY2V9J2AsXG4gICAgICAgIGNob2ljZVxuICAgICAgKTtcbiAgICB9XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IFdhcm5pbmdJblRlcm1pbmF0aW9uID0gKHRlcm1pbmF0aW5nT2JqZWN0OiBQYXJzZWRPYmplY3QpID0+IHtcbiAgICBsZXQgbWVzc2FnZTogc3RyaW5nID1cbiAgICAgIFwiQXBwYXJlbnQgbG9vc2UgZW5kIGV4aXN0cyB3aGVyZSB0aGUgZmxvdyBydW5zIG91dC4gRG8geW91IG5lZWQgYSAnLT4gRE9ORScgc3RhdGVtZW50LCBjaG9pY2Ugb3IgZGl2ZXJ0P1wiO1xuICAgIGlmICh0ZXJtaW5hdGluZ09iamVjdC5wYXJlbnQgPT09IHRoaXMuX3Jvb3RXZWF2ZSAmJiB0aGlzLl9maXJzdENoaWxkRmxvdykge1xuICAgICAgbWVzc2FnZSA9IGAke21lc3NhZ2V9IE5vdGUgdGhhdCBpZiB5b3UgaW50ZW5kIHRvIGVudGVyICcke3RoaXMuX2ZpcnN0Q2hpbGRGbG93LmlkZW50aWZpZXJ9JyBuZXh0LCB5b3UgbmVlZCB0byBkaXZlcnQgdG8gaXQgZXhwbGljaXRseS5gO1xuICAgIH1cblxuICAgIGNvbnN0IHRlcm1pbmF0aW5nRGl2ZXJ0ID0gYXNPck51bGwodGVybWluYXRpbmdPYmplY3QsIERpdmVydCk7XG4gICAgaWYgKHRlcm1pbmF0aW5nRGl2ZXJ0ICYmIHRlcm1pbmF0aW5nRGl2ZXJ0LmlzVHVubmVsKSB7XG4gICAgICBtZXNzYWdlICs9IGAgV2hlbiBmaW5hbCB0dW5uZWwgdG8gJyR7dGVybWluYXRpbmdEaXZlcnQudGFyZ2V0fSAtPicgcmV0dXJucyBpdCB3b24ndCBoYXZlIGFueXdoZXJlIHRvIGdvLmA7XG4gICAgfVxuXG4gICAgdGhpcy5XYXJuaW5nKG1lc3NhZ2UsIHRlcm1pbmF0aW5nT2JqZWN0KTtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgdG9TdHJpbmcgPSAoKTogc3RyaW5nID0+XG4gICAgYCR7dGhpcy50eXBlTmFtZX0gJyR7dGhpcy5pZGVudGlmaWVyfSdgO1xufVxuIiwiaW1wb3J0IHsgQ29udGFpbmVyIGFzIFJ1bnRpbWVDb250YWluZXIgfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL0NvbnRhaW5lclwiO1xuaW1wb3J0IHsgUGFyc2VkT2JqZWN0IH0gZnJvbSBcIi4vT2JqZWN0XCI7XG5pbXBvcnQgeyBJbmtPYmplY3QgYXMgUnVudGltZU9iamVjdCB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvT2JqZWN0XCI7XG5pbXBvcnQgeyBUZXh0IH0gZnJvbSBcIi4vVGV4dFwiO1xuaW1wb3J0IHsgYXNPck51bGwgfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL1R5cGVBc3NlcnRpb25cIjtcblxuZXhwb3J0IGNsYXNzIENvbnRlbnRMaXN0IGV4dGVuZHMgUGFyc2VkT2JqZWN0IHtcbiAgcHVibGljIGRvbnRGbGF0dGVuOiBib29sZWFuID0gZmFsc2U7XG5cbiAgZ2V0IHJ1bnRpbWVDb250YWluZXIoKTogUnVudGltZUNvbnRhaW5lciB7XG4gICAgcmV0dXJuIHRoaXMucnVudGltZU9iamVjdCBhcyBSdW50aW1lQ29udGFpbmVyO1xuICB9XG5cbiAgY29uc3RydWN0b3Iob2JqZWN0cz86IFBhcnNlZE9iamVjdFtdLCAuLi5tb3JlT2JqZWN0czogUGFyc2VkT2JqZWN0W10pIHtcbiAgICBzdXBlcigpO1xuXG4gICAgaWYgKG9iamVjdHMpIHtcbiAgICAgIHRoaXMuQWRkQ29udGVudChvYmplY3RzKTtcbiAgICB9XG5cbiAgICBpZiAobW9yZU9iamVjdHMpIHtcbiAgICAgIHRoaXMuQWRkQ29udGVudChtb3JlT2JqZWN0cyk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiQ29udGVudExpc3RcIjtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBUcmltVHJhaWxpbmdXaGl0ZXNwYWNlID0gKCk6IHZvaWQgPT4ge1xuICAgIGZvciAobGV0IGlpID0gdGhpcy5jb250ZW50Lmxlbmd0aCAtIDE7IGlpID49IDA7IC0taWkpIHtcbiAgICAgIGNvbnN0IHRleHQgPSBhc09yTnVsbCh0aGlzLmNvbnRlbnRbaWldLCBUZXh0KTtcbiAgICAgIGlmICh0ZXh0ID09PSBudWxsKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICB0ZXh0LnRleHQgPSB0ZXh0LnRleHQucmVwbGFjZShuZXcgUmVnRXhwKC9bIFxcdF0vZyksIFwiXCIpO1xuICAgICAgaWYgKHRleHQudGV4dC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5jb250ZW50LnNwbGljZShpaSwgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IEdlbmVyYXRlUnVudGltZU9iamVjdCA9ICgpOiBSdW50aW1lT2JqZWN0ID0+IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgUnVudGltZUNvbnRhaW5lcigpO1xuICAgIGlmICh0aGlzLmNvbnRlbnQgIT09IG51bGwpIHtcbiAgICAgIGZvciAoY29uc3Qgb2JqIG9mIHRoaXMuY29udGVudCkge1xuICAgICAgICBjb25zdCBjb250ZW50T2JqUnVudGltZSA9IG9iai5ydW50aW1lT2JqZWN0O1xuXG4gICAgICAgIC8vIFNvbWUgb2JqZWN0cyAoZS5nLiBhdXRob3Igd2FybmluZ3MpIGRvbid0IGdlbmVyYXRlIHJ1bnRpbWUgb2JqZWN0c1xuICAgICAgICBpZiAoY29udGVudE9ialJ1bnRpbWUpIHtcbiAgICAgICAgICBjb250YWluZXIuQWRkQ29udGVudChjb250ZW50T2JqUnVudGltZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kb250RmxhdHRlbikge1xuICAgICAgdGhpcy5zdG9yeS5Eb250RmxhdHRlbkNvbnRhaW5lcihjb250YWluZXIpO1xuICAgIH1cblxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH07XG5cbiAgcHVibGljIHRvU3RyaW5nID0gKCk6IHN0cmluZyA9PiBgQ29udGVudExpc3QoJHt0aGlzLmNvbnRlbnQuam9pbihcIiwgXCIpfSlgO1xufVxuIiwiaW1wb3J0IHsgSW5rT2JqZWN0IH0gZnJvbSBcIi4vT2JqZWN0XCI7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSBcIi4vUGF0aFwiO1xuXG5leHBvcnQgY2xhc3MgVmFyaWFibGVSZWZlcmVuY2UgZXh0ZW5kcyBJbmtPYmplY3Qge1xuICBwdWJsaWMgbmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgcHVibGljIHBhdGhGb3JDb3VudDogUGF0aCB8IG51bGwgPSBudWxsO1xuXG4gIGdldCBjb250YWluZXJGb3JDb3VudCgpIHtcbiAgICBpZiAodGhpcy5wYXRoRm9yQ291bnQgPT09IG51bGwpIHJldHVybiBudWxsO1xuICAgIHJldHVybiB0aGlzLlJlc29sdmVQYXRoKHRoaXMucGF0aEZvckNvdW50KS5jb250YWluZXI7XG4gIH1cbiAgZ2V0IHBhdGhTdHJpbmdGb3JDb3VudCgpIHtcbiAgICBpZiAodGhpcy5wYXRoRm9yQ291bnQgPT09IG51bGwpIHJldHVybiBudWxsO1xuXG4gICAgcmV0dXJuIHRoaXMuQ29tcGFjdFBhdGhTdHJpbmcodGhpcy5wYXRoRm9yQ291bnQpO1xuICB9XG4gIHNldCBwYXRoU3RyaW5nRm9yQ291bnQodmFsdWU6IHN0cmluZyB8IG51bGwpIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwpIHRoaXMucGF0aEZvckNvdW50ID0gbnVsbDtcbiAgICBlbHNlIHRoaXMucGF0aEZvckNvdW50ID0gbmV3IFBhdGgodmFsdWUpO1xuICB9XG5cbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nIHwgbnVsbCA9IG51bGwpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gIH1cblxuICBwdWJsaWMgdG9TdHJpbmcoKSB7XG4gICAgaWYgKHRoaXMubmFtZSAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gXCJ2YXIoXCIgKyB0aGlzLm5hbWUgKyBcIilcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHBhdGhTdHIgPSB0aGlzLnBhdGhTdHJpbmdGb3JDb3VudDtcbiAgICAgIHJldHVybiBcInJlYWRfY291bnQoXCIgKyBwYXRoU3RyICsgXCIpXCI7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBDb250YWluZXIgYXMgUnVudGltZUNvbnRhaW5lciB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvQ29udGFpbmVyXCI7XG5pbXBvcnQgeyBDb250ZW50TGlzdCB9IGZyb20gXCIuLi9Db250ZW50TGlzdFwiO1xuaW1wb3J0IHsgRXhwcmVzc2lvbiB9IGZyb20gXCIuLi9FeHByZXNzaW9uL0V4cHJlc3Npb25cIjtcbmltcG9ydCB7IEZsb3dCYXNlIH0gZnJvbSBcIi4uL0Zsb3cvRmxvd0Jhc2VcIjtcbmltcG9ydCB7IFBhcnNlZE9iamVjdCB9IGZyb20gXCIuLi9PYmplY3RcIjtcbmltcG9ydCB7IFBhdGggfSBmcm9tIFwiLi4vUGF0aFwiO1xuaW1wb3J0IHsgU3RvcnkgfSBmcm9tIFwiLi4vU3RvcnlcIjtcbmltcG9ydCB7IFZhcmlhYmxlUmVmZXJlbmNlIGFzIFJ1bnRpbWVWYXJpYWJsZVJlZmVyZW5jZSB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvVmFyaWFibGVSZWZlcmVuY2VcIjtcbmltcG9ydCB7IFdlYXZlIH0gZnJvbSBcIi4uL1dlYXZlXCI7XG5pbXBvcnQgeyBJZGVudGlmaWVyIH0gZnJvbSBcIi4uL0lkZW50aWZpZXJcIjtcbmltcG9ydCB7IGFzT3JOdWxsLCBmaWx0ZXJVbmRlZiB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvVHlwZUFzc2VydGlvblwiO1xuXG5leHBvcnQgY2xhc3MgVmFyaWFibGVSZWZlcmVuY2UgZXh0ZW5kcyBFeHByZXNzaW9uIHtcbiAgcHJpdmF0ZSBfcnVudGltZVZhclJlZjogUnVudGltZVZhcmlhYmxlUmVmZXJlbmNlIHwgbnVsbCA9IG51bGw7XG5cbiAgLy8gLSBOb3JtYWwgdmFyaWFibGVzIGhhdmUgYSBzaW5nbGUgaXRlbSBpbiB0aGVpciBcInBhdGhcIlxuICAvLyAtIEtub3Qvc3RpdGNoIG5hbWVzIGZvciByZWFkIGNvdW50cyBhcmUgYWN0dWFsIGRvdC1zZXBhcmF0ZWQgcGF0aHNcbiAgLy8gICAodGhvdWdoIHRoaXMgaXNuJ3QgYWN0dWFsbHkgdXNlZCBhdCB0aW1lIG9mIHdyaXRpbmcpXG4gIC8vIC0gTGlzdCBuYW1lcyBhcmUgZG90IHNlcGFyYXRlZDogbGlzdE5hbWUuaXRlbU5hbWUgKG9yIGp1c3QgaXRlbU5hbWUpXG4gIGdldCBuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLnBhdGguam9pbihcIi5cIik7XG4gIH1cblxuICBnZXQgcGF0aCgpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHRoaXMucGF0aElkZW50aWZpZXJzLm1hcCgoaWQpID0+IGlkLm5hbWUhKS5maWx0ZXIoZmlsdGVyVW5kZWYpO1xuICB9XG5cbiAgZ2V0IGlkZW50aWZpZXIoKTogSWRlbnRpZmllciB8IG51bGwge1xuICAgIGlmICghdGhpcy5wYXRoSWRlbnRpZmllcnMgfHwgdGhpcy5wYXRoSWRlbnRpZmllcnMubGVuZ3RoID09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBuYW1lID0gdGhpcy5wYXRoLmpvaW4oXCIuXCIpO1xuICAgIGNvbnN0IGlkID0gbmV3IElkZW50aWZpZXIobmFtZSk7XG5cbiAgICByZXR1cm4gaWQ7XG4gIH1cblxuICAvLyBPbmx5IGtub3duIGFmdGVyIEdlbmVyYXRlSW50b0NvbnRhaW5lciBoYXMgcnVuXG4gIHB1YmxpYyBpc0NvbnN0YW50UmVmZXJlbmNlOiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyBpc0xpc3RJdGVtUmVmZXJlbmNlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgZ2V0IHJ1bnRpbWVWYXJSZWYoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3J1bnRpbWVWYXJSZWY7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgcmVhZG9ubHkgcGF0aElkZW50aWZpZXJzOiBJZGVudGlmaWVyW10pIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgZ2V0IHR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwicmVmXCI7XG4gIH1cblxuICBwdWJsaWMgcmVhZG9ubHkgR2VuZXJhdGVJbnRvQ29udGFpbmVyID0gKFxuICAgIGNvbnRhaW5lcjogUnVudGltZUNvbnRhaW5lclxuICApOiB2b2lkID0+IHtcbiAgICBsZXQgY29uc3RhbnRWYWx1ZTogRXhwcmVzc2lvbiB8IG51bGwgfCB1bmRlZmluZWQgPSB0aGlzLnN0b3J5LmNvbnN0YW50cy5nZXQoXG4gICAgICB0aGlzLm5hbWVcbiAgICApO1xuXG4gICAgLy8gSWYgaXQncyBhIGNvbnN0YW50IHJlZmVyZW5jZSwganVzdCBnZW5lcmF0ZSB0aGUgbGl0ZXJhbCBleHByZXNzaW9uIHZhbHVlXG4gICAgLy8gSXQncyBva2F5IHRvIGFjY2VzcyB0aGUgY29uc3RhbnRzIGF0IGNvZGUgZ2VuZXJhdGlvbiB0aW1lLCBzaW5jZSB0aGVcbiAgICAvLyBmaXJzdCB0aGluZyB0aGUgRXhwb3J0UnVudGltZSBmdW5jdGlvbiBkb2VzIGl0IHNlYXJjaCBmb3IgYWxsIHRoZSBjb25zdGFudHNcbiAgICAvLyBpbiB0aGUgc3RvcnkgaGllcmFyY2h5LCBzbyB0aGV5J3JlIGFsbCBhdmFpbGFibGUuXG4gICAgaWYgKGNvbnN0YW50VmFsdWUpIHtcbiAgICAgIGNvbnN0YW50VmFsdWUuR2VuZXJhdGVDb25zdGFudEludG9Db250YWluZXIoY29udGFpbmVyKTtcbiAgICAgIHRoaXMuaXNDb25zdGFudFJlZmVyZW5jZSA9IHRydWU7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9ydW50aW1lVmFyUmVmID0gbmV3IFJ1bnRpbWVWYXJpYWJsZVJlZmVyZW5jZSh0aGlzLm5hbWUpO1xuXG4gICAgLy8gTGlzdCBpdGVtIHJlZmVyZW5jZT9cbiAgICAvLyBQYXRoIG1pZ2h0IGJlIHRvIGEgbGlzdCAobGlzdE5hbWUubGlzdEl0ZW1OYW1lIG9yIGp1c3QgbGlzdEl0ZW1OYW1lKVxuICAgIGlmICh0aGlzLnBhdGgubGVuZ3RoID09PSAxIHx8IHRoaXMucGF0aC5sZW5ndGggPT09IDIpIHtcbiAgICAgIGxldCBsaXN0SXRlbU5hbWU6IHN0cmluZyA9IFwiXCI7XG4gICAgICBsZXQgbGlzdE5hbWU6IHN0cmluZyA9IFwiXCI7XG5cbiAgICAgIGlmICh0aGlzLnBhdGgubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGxpc3RJdGVtTmFtZSA9IHRoaXMucGF0aFswXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpc3ROYW1lID0gdGhpcy5wYXRoWzBdO1xuICAgICAgICBsaXN0SXRlbU5hbWUgPSB0aGlzLnBhdGhbMV07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGxpc3RJdGVtID0gdGhpcy5zdG9yeS5SZXNvbHZlTGlzdEl0ZW0obGlzdE5hbWUsIGxpc3RJdGVtTmFtZSwgdGhpcyk7XG5cbiAgICAgIGlmIChsaXN0SXRlbSkge1xuICAgICAgICB0aGlzLmlzTGlzdEl0ZW1SZWZlcmVuY2UgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnRhaW5lci5BZGRDb250ZW50KHRoaXMuX3J1bnRpbWVWYXJSZWYpO1xuICB9O1xuXG4gIHB1YmxpYyBSZXNvbHZlUmVmZXJlbmNlcyhjb250ZXh0OiBTdG9yeSk6IHZvaWQge1xuICAgIHN1cGVyLlJlc29sdmVSZWZlcmVuY2VzKGNvbnRleHQpO1xuXG4gICAgLy8gV29yayBpcyBhbHJlYWR5IGRvbmUgaWYgaXQncyBhIGNvbnN0YW50IG9yIGxpc3QgaXRlbSByZWZlcmVuY2VcbiAgICBpZiAodGhpcy5pc0NvbnN0YW50UmVmZXJlbmNlIHx8IHRoaXMuaXNMaXN0SXRlbVJlZmVyZW5jZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElzIGl0IGEgcmVhZCBjb3VudD9cbiAgICBjb25zdCBwYXJzZWRQYXRoID0gbmV3IFBhdGgodGhpcy5wYXRoSWRlbnRpZmllcnMpO1xuICAgIGNvbnN0IHRhcmdldEZvckNvdW50OiBQYXJzZWRPYmplY3QgfCBudWxsID1cbiAgICAgIHBhcnNlZFBhdGguUmVzb2x2ZUZyb21Db250ZXh0KHRoaXMpO1xuICAgIGlmICh0YXJnZXRGb3JDb3VudCkge1xuICAgICAgaWYgKCF0YXJnZXRGb3JDb3VudC5jb250YWluZXJGb3JDb3VudGluZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgIH1cblxuICAgICAgdGFyZ2V0Rm9yQ291bnQuY29udGFpbmVyRm9yQ291bnRpbmcudmlzaXRzU2hvdWxkQmVDb3VudGVkID0gdHJ1ZTtcblxuICAgICAgLy8gSWYgdGhpcyBpcyBhbiBhcmd1bWVudCB0byBhIGZ1bmN0aW9uIHRoYXQgd2FudHMgYSB2YXJpYWJsZSB0byBiZVxuICAgICAgLy8gcGFzc2VkIGJ5IHJlZmVyZW5jZSwgdGhlbiB0aGUgUGFyc2VkLkRpdmVydCB3aWxsIGhhdmUgZ2VuZXJhdGVkIGFcbiAgICAgIC8vIFJ1bnRpbWUuVmFyaWFibGVQb2ludGVyVmFsdWUgaW5zdGVhZCBvZiBhbGxvd2luZyB0aGlzIG9iamVjdFxuICAgICAgLy8gdG8gZ2VuZXJhdGUgaXRzIFJ1bnRpbWVWYXJpYWJsZVJlZmVyZW5jZS4gVGhpcyBvbmx5IGhhcHBlbnMgdW5kZXJcbiAgICAgIC8vIGVycm9yIGNvbmRpdGlvbiBzaW5jZSB3ZSBzaG91bGRuJ3QgYmUgcGFzc2luZyBhIHJlYWQgY291bnQgYnlcbiAgICAgIC8vIHJlZmVyZW5jZSwgYnV0IHdlIGRvbid0IHdhbnQgaXQgdG8gY3Jhc2ghXG4gICAgICBpZiAodGhpcy5fcnVudGltZVZhclJlZiA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3J1bnRpbWVWYXJSZWYucGF0aEZvckNvdW50ID0gdGFyZ2V0Rm9yQ291bnQucnVudGltZVBhdGg7XG4gICAgICB0aGlzLl9ydW50aW1lVmFyUmVmLm5hbWUgPSBudWxsO1xuXG4gICAgICAvLyBDaGVjayBmb3IgdmVyeSBzcGVjaWZpYyB3cml0ZXIgZXJyb3I6IGdldHRpbmcgcmVhZCBjb3VudCBhbmRcbiAgICAgIC8vIHByaW50aW5nIGl0IGFzIGNvbnRlbnQgcmF0aGVyIHRoYW4gYXMgYSBwaWVjZSBvZiBsb2dpY1xuICAgICAgLy8gZS5nLiBXcml0aW5nIHtteUZ1bmN9IGluc3RlYWQgb2Yge215RnVuYygpfVxuICAgICAgbGV0IHRhcmdldEZsb3cgPSBhc09yTnVsbCh0YXJnZXRGb3JDb3VudCwgRmxvd0Jhc2UpO1xuICAgICAgaWYgKHRhcmdldEZsb3cgJiYgdGFyZ2V0Rmxvdy5pc0Z1bmN0aW9uKSB7XG4gICAgICAgIC8vIElzIHBhcmVudCBjb250ZXh0IGNvbnRlbnQgcmF0aGVyIHRoYW4gbG9naWM/XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLnBhcmVudCBpbnN0YW5jZW9mIFdlYXZlIHx8XG4gICAgICAgICAgdGhpcy5wYXJlbnQgaW5zdGFuY2VvZiBDb250ZW50TGlzdCB8fFxuICAgICAgICAgIHRoaXMucGFyZW50IGluc3RhbmNlb2YgRmxvd0Jhc2VcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5XYXJuaW5nKFxuICAgICAgICAgICAgYCcke3RhcmdldEZsb3cuaWRlbnRpZmllcn0nIGJlaW5nIHVzZWQgYXMgcmVhZCBjb3VudCByYXRoZXIgdGhhbiBiZWluZyBjYWxsZWQgYXMgZnVuY3Rpb24uIFBlcmhhcHMgeW91IGludGVuZGVkIHRvIHdyaXRlICR7dGFyZ2V0Rmxvdy5pZGVudGlmaWVyfSgpYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENvdWxkbid0IGZpbmQgdGhpcyBtdWx0aS1wYXJ0IHBhdGggYXQgYWxsLCB3aGV0aGVyIGFzIGEgZGl2ZXJ0XG4gICAgLy8gdGFyZ2V0IG9yIGFzIGEgbGlzdCBpdGVtIHJlZmVyZW5jZS5cbiAgICBpZiAodGhpcy5wYXRoLmxlbmd0aCA+IDEpIHtcbiAgICAgIGxldCBlcnJvck1zZyA9IGBDb3VsZCBub3QgZmluZCB0YXJnZXQgZm9yIHJlYWQgY291bnQ6ICR7cGFyc2VkUGF0aH1gO1xuICAgICAgaWYgKHRoaXMucGF0aC5sZW5ndGggPD0gMikge1xuICAgICAgICBlcnJvck1zZyArPSBgLCBvciBjb3VsZG4ndCBmaW5kIGxpc3QgaXRlbSB3aXRoIHRoZSBuYW1lICR7dGhpcy5wYXRoLmpvaW4oXG4gICAgICAgICAgXCIsXCJcbiAgICAgICAgKX1gO1xuICAgICAgfVxuXG4gICAgICB0aGlzLkVycm9yKGVycm9yTXNnKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghY29udGV4dC5SZXNvbHZlVmFyaWFibGVXaXRoTmFtZSh0aGlzLm5hbWUsIHRoaXMpLmZvdW5kKSB7XG4gICAgICB0aGlzLkVycm9yKGBVbnJlc29sdmVkIHZhcmlhYmxlOiAke3RoaXMubmFtZX1gLCB0aGlzKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVhZG9ubHkgdG9TdHJpbmcgPSAoKTogc3RyaW5nID0+IGB7JHt0aGlzLnBhdGguam9pbihcIi5cIil9fWA7XG59XG4iLCJpbXBvcnQgeyBDb250YWluZXIgYXMgUnVudGltZUNvbnRhaW5lciB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvQ29udGFpbmVyXCI7XG5pbXBvcnQgeyBDb250cm9sQ29tbWFuZCBhcyBSdW50aW1lQ29udHJvbENvbW1hbmQgfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL0NvbnRyb2xDb21tYW5kXCI7XG5pbXBvcnQgeyBEaXZlcnQgfSBmcm9tIFwiLi9EaXZlcnQvRGl2ZXJ0XCI7XG5pbXBvcnQgeyBEaXZlcnQgYXMgUnVudGltZURpdmVydCB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvRGl2ZXJ0XCI7XG5pbXBvcnQgeyBEaXZlcnRUYXJnZXQgfSBmcm9tIFwiLi9EaXZlcnQvRGl2ZXJ0VGFyZ2V0XCI7XG5pbXBvcnQgeyBFeHByZXNzaW9uIH0gZnJvbSBcIi4vRXhwcmVzc2lvbi9FeHByZXNzaW9uXCI7XG5pbXBvcnQgeyBJbmtMaXN0IGFzIFJ1bnRpbWVJbmtMaXN0IH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9JbmtMaXN0XCI7XG5pbXBvcnQgeyBMaXN0VmFsdWUgfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL1ZhbHVlXCI7XG5pbXBvcnQgeyBOYXRpdmVGdW5jdGlvbkNhbGwgfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL05hdGl2ZUZ1bmN0aW9uQ2FsbFwiO1xuaW1wb3J0IHsgTnVtYmVyRXhwcmVzc2lvbiB9IGZyb20gXCIuL0V4cHJlc3Npb24vTnVtYmVyRXhwcmVzc2lvblwiO1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gXCIuL1BhdGhcIjtcbmltcG9ydCB7IFN0b3J5IH0gZnJvbSBcIi4vU3RvcnlcIjtcbmltcG9ydCB7IFN0cmluZ1ZhbHVlIH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9WYWx1ZVwiO1xuaW1wb3J0IHsgVmFyaWFibGVSZWZlcmVuY2UgfSBmcm9tIFwiLi9WYXJpYWJsZS9WYXJpYWJsZVJlZmVyZW5jZVwiO1xuaW1wb3J0IHsgSWRlbnRpZmllciB9IGZyb20gXCIuL0lkZW50aWZpZXJcIjtcbmltcG9ydCB7IGFzT3JOdWxsIH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9UeXBlQXNzZXJ0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBGdW5jdGlvbkNhbGwgZXh0ZW5kcyBFeHByZXNzaW9uIHtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBJc0J1aWx0SW4gPSAobmFtZTogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gICAgaWYgKE5hdGl2ZUZ1bmN0aW9uQ2FsbC5DYWxsRXhpc3RzV2l0aE5hbWUobmFtZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICBuYW1lID09PSBcIkNIT0lDRV9DT1VOVFwiIHx8XG4gICAgICBuYW1lID09PSBcIlRVUk5TX1NJTkNFXCIgfHxcbiAgICAgIG5hbWUgPT09IFwiVFVSTlNcIiB8fFxuICAgICAgbmFtZSA9PT0gXCJSQU5ET01cIiB8fFxuICAgICAgbmFtZSA9PT0gXCJTRUVEX1JBTkRPTVwiIHx8XG4gICAgICBuYW1lID09PSBcIkxJU1RfVkFMVUVcIiB8fFxuICAgICAgbmFtZSA9PT0gXCJMSVNUX1JBTkRPTVwiIHx8XG4gICAgICBuYW1lID09PSBcIlJFQURfQ09VTlRcIlxuICAgICk7XG4gIH07XG5cbiAgcHJpdmF0ZSBfcHJveHlEaXZlcnQ6IERpdmVydDtcbiAgZ2V0IHByb3h5RGl2ZXJ0KCk6IERpdmVydCB7XG4gICAgcmV0dXJuIHRoaXMuX3Byb3h5RGl2ZXJ0O1xuICB9XG4gIHByaXZhdGUgX2RpdmVydFRhcmdldFRvQ291bnQ6IERpdmVydFRhcmdldCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIF92YXJpYWJsZVJlZmVyZW5jZVRvQ291bnQ6IFZhcmlhYmxlUmVmZXJlbmNlIHwgbnVsbCA9IG51bGw7XG5cbiAgZ2V0IG5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gKHRoaXMuX3Byb3h5RGl2ZXJ0LnRhcmdldCBhcyBQYXRoKS5maXJzdENvbXBvbmVudCB8fCBcIlwiO1xuICB9XG5cbiAgZ2V0IGFyZ3MoKTogRXhwcmVzc2lvbltdIHtcbiAgICByZXR1cm4gdGhpcy5fcHJveHlEaXZlcnQuYXJncztcbiAgfVxuXG4gIGdldCBydW50aW1lRGl2ZXJ0KCk6IFJ1bnRpbWVEaXZlcnQge1xuICAgIHJldHVybiB0aGlzLl9wcm94eURpdmVydC5ydW50aW1lRGl2ZXJ0O1xuICB9XG5cbiAgZ2V0IGlzQ2hvaWNlQ291bnQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubmFtZSA9PT0gXCJDSE9JQ0VfQ09VTlRcIjtcbiAgfVxuXG4gIGdldCBpc1R1cm5zKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm5hbWUgPT09IFwiVFVSTlNcIjtcbiAgfVxuXG4gIGdldCBpc1R1cm5zU2luY2UoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubmFtZSA9PT0gXCJUVVJOU19TSU5DRVwiO1xuICB9XG5cbiAgZ2V0IGlzUmFuZG9tKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm5hbWUgPT09IFwiUkFORE9NXCI7XG4gIH1cblxuICBnZXQgaXNTZWVkUmFuZG9tKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm5hbWUgPT09IFwiU0VFRF9SQU5ET01cIjtcbiAgfVxuXG4gIGdldCBpc0xpc3RSYW5nZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5uYW1lID09PSBcIkxJU1RfUkFOR0VcIjtcbiAgfVxuXG4gIGdldCBpc0xpc3RSYW5kb20oKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubmFtZSA9PT0gXCJMSVNUX1JBTkRPTVwiO1xuICB9XG5cbiAgZ2V0IGlzUmVhZENvdW50KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm5hbWUgPT09IFwiUkVBRF9DT1VOVFwiO1xuICB9XG5cbiAgcHVibGljIHNob3VsZFBvcFJldHVybmVkVmFsdWU6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihmdW5jdGlvbk5hbWU6IElkZW50aWZpZXIsIGFyZ3M6IEV4cHJlc3Npb25bXSkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9wcm94eURpdmVydCA9IG5ldyBEaXZlcnQobmV3IFBhdGgoZnVuY3Rpb25OYW1lKSwgYXJncyk7XG4gICAgdGhpcy5fcHJveHlEaXZlcnQuaXNGdW5jdGlvbkNhbGwgPSB0cnVlO1xuICAgIHRoaXMuQWRkQ29udGVudCh0aGlzLl9wcm94eURpdmVydCk7XG4gIH1cblxuICBnZXQgdHlwZU5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJGdW5jdGlvbkNhbGxcIjtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBHZW5lcmF0ZUludG9Db250YWluZXIgPSAoXG4gICAgY29udGFpbmVyOiBSdW50aW1lQ29udGFpbmVyXG4gICk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IGZvdW5kTGlzdCA9IHRoaXMuc3RvcnkuUmVzb2x2ZUxpc3QodGhpcy5uYW1lKTtcblxuICAgIGxldCB1c2luZ1Byb3h5RGl2ZXJ0OiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy5pc0Nob2ljZUNvdW50KSB7XG4gICAgICBpZiAodGhpcy5hcmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5FcnJvcihcIlRoZSBDSE9JQ0VfQ09VTlQoKSBmdW5jdGlvbiBzaG91bGRuJ3QgdGFrZSBhbnkgYXJndW1lbnRzXCIpO1xuICAgICAgfVxuXG4gICAgICBjb250YWluZXIuQWRkQ29udGVudChSdW50aW1lQ29udHJvbENvbW1hbmQuQ2hvaWNlQ291bnQoKSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzVHVybnMpIHtcbiAgICAgIGlmICh0aGlzLmFyZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLkVycm9yKFwiVGhlIFRVUk5TKCkgZnVuY3Rpb24gc2hvdWxkbid0IHRha2UgYW55IGFyZ3VtZW50c1wiKTtcbiAgICAgIH1cblxuICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQoUnVudGltZUNvbnRyb2xDb21tYW5kLlR1cm5zKCkpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc1R1cm5zU2luY2UgfHwgdGhpcy5pc1JlYWRDb3VudCkge1xuICAgICAgY29uc3QgZGl2ZXJ0VGFyZ2V0ID0gYXNPck51bGwodGhpcy5hcmdzWzBdLCBEaXZlcnRUYXJnZXQpO1xuICAgICAgY29uc3QgdmFyaWFibGVEaXZlcnRUYXJnZXQgPSBhc09yTnVsbCh0aGlzLmFyZ3NbMF0sIFZhcmlhYmxlUmVmZXJlbmNlKTtcblxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmFyZ3MubGVuZ3RoICE9PSAxIHx8XG4gICAgICAgIChkaXZlcnRUYXJnZXQgPT09IG51bGwgJiYgdmFyaWFibGVEaXZlcnRUYXJnZXQgPT09IG51bGwpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5FcnJvcihcbiAgICAgICAgICBgVGhlICR7dGhpcy5uYW1lfSgpIGZ1bmN0aW9uIHNob3VsZCB0YWtlIG9uZSBhcmd1bWVudDogYSBkaXZlcnQgdGFyZ2V0IHRvIHRoZSB0YXJnZXQga25vdCwgc3RpdGNoLCBnYXRoZXIgb3IgY2hvaWNlIHlvdSB3YW50IHRvIGNoZWNrLiBlLmcuIFRVUk5TX1NJTkNFKC0+IG15S25vdClgXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGRpdmVydFRhcmdldCkge1xuICAgICAgICB0aGlzLl9kaXZlcnRUYXJnZXRUb0NvdW50ID0gZGl2ZXJ0VGFyZ2V0O1xuICAgICAgICB0aGlzLkFkZENvbnRlbnQodGhpcy5fZGl2ZXJ0VGFyZ2V0VG9Db3VudCk7XG5cbiAgICAgICAgdGhpcy5fZGl2ZXJ0VGFyZ2V0VG9Db3VudC5HZW5lcmF0ZUludG9Db250YWluZXIoY29udGFpbmVyKTtcbiAgICAgIH0gZWxzZSBpZiAodmFyaWFibGVEaXZlcnRUYXJnZXQpIHtcbiAgICAgICAgdGhpcy5fdmFyaWFibGVSZWZlcmVuY2VUb0NvdW50ID0gdmFyaWFibGVEaXZlcnRUYXJnZXQ7XG4gICAgICAgIHRoaXMuQWRkQ29udGVudCh0aGlzLl92YXJpYWJsZVJlZmVyZW5jZVRvQ291bnQpO1xuXG4gICAgICAgIHRoaXMuX3ZhcmlhYmxlUmVmZXJlbmNlVG9Db3VudC5HZW5lcmF0ZUludG9Db250YWluZXIoY29udGFpbmVyKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuaXNUdXJuc1NpbmNlKSB7XG4gICAgICAgIGNvbnRhaW5lci5BZGRDb250ZW50KFJ1bnRpbWVDb250cm9sQ29tbWFuZC5UdXJuc1NpbmNlKCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQoUnVudGltZUNvbnRyb2xDb21tYW5kLlJlYWRDb3VudCgpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNSYW5kb20pIHtcbiAgICAgIGlmICh0aGlzLmFyZ3MubGVuZ3RoICE9PSAyKSB7XG4gICAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgICAgXCJSQU5ET00gc2hvdWxkIHRha2UgMiBwYXJhbWV0ZXJzOiBhIG1pbmltdW0gYW5kIGEgbWF4aW11bSBpbnRlZ2VyXCJcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gV2UgY2FuIHR5cGUgY2hlY2sgc2luZ2xlIHZhbHVlcywgYnV0IG5vdCBjb21wbGV4IGV4cHJlc3Npb25zXG4gICAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgdGhpcy5hcmdzLmxlbmd0aDsgaWkgKz0gMSkge1xuICAgICAgICBjb25zdCBudW0gPSBhc09yTnVsbCh0aGlzLmFyZ3NbaWldLCBOdW1iZXJFeHByZXNzaW9uKTtcbiAgICAgICAgaWYgKG51bSAmJiAhbnVtLmlzSW50KCkpIHtcbiAgICAgICAgICBjb25zdCBwYXJhbU5hbWU6IHN0cmluZyA9IGlpID09PSAwID8gXCJtaW5pbXVtXCIgOiBcIm1heGltdW1cIjtcbiAgICAgICAgICB0aGlzLkVycm9yKGBSQU5ET00ncyAke3BhcmFtTmFtZX0gcGFyYW1ldGVyIHNob3VsZCBiZSBhbiBpbnRlZ2VyYCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmFyZ3NbaWldLkdlbmVyYXRlSW50b0NvbnRhaW5lcihjb250YWluZXIpO1xuICAgICAgfVxuXG4gICAgICBjb250YWluZXIuQWRkQ29udGVudChSdW50aW1lQ29udHJvbENvbW1hbmQuUmFuZG9tKCkpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc1NlZWRSYW5kb20pIHtcbiAgICAgIGlmICh0aGlzLmFyZ3MubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgIHRoaXMuRXJyb3IoXCJTRUVEX1JBTkRPTSBzaG91bGQgdGFrZSAxIHBhcmFtZXRlciAtIGFuIGludGVnZXIgc2VlZFwiKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbnVtID0gYXNPck51bGwodGhpcy5hcmdzWzBdLCBOdW1iZXJFeHByZXNzaW9uKTtcbiAgICAgIGlmIChudW0gJiYgIW51bS5pc0ludCgpKSB7XG4gICAgICAgIHRoaXMuRXJyb3IoXCJTRUVEX1JBTkRPTSdzIHBhcmFtZXRlciBzaG91bGQgYmUgYW4gaW50ZWdlciBzZWVkXCIpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmFyZ3NbMF0uR2VuZXJhdGVJbnRvQ29udGFpbmVyKGNvbnRhaW5lcik7XG5cbiAgICAgIGNvbnRhaW5lci5BZGRDb250ZW50KFJ1bnRpbWVDb250cm9sQ29tbWFuZC5TZWVkUmFuZG9tKCkpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc0xpc3RSYW5nZSkge1xuICAgICAgaWYgKHRoaXMuYXJncy5sZW5ndGggIT09IDMpIHtcbiAgICAgICAgdGhpcy5FcnJvcihcbiAgICAgICAgICBcIkxJU1RfUkFOR0Ugc2hvdWxkIHRha2UgMyBwYXJhbWV0ZXJzIC0gYSBsaXN0LCBhIG1pbiBhbmQgYSBtYXhcIlxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgdGhpcy5hcmdzLmxlbmd0aDsgaWkgKz0gMSkge1xuICAgICAgICB0aGlzLmFyZ3NbaWldLkdlbmVyYXRlSW50b0NvbnRhaW5lcihjb250YWluZXIpO1xuICAgICAgfVxuXG4gICAgICBjb250YWluZXIuQWRkQ29udGVudChSdW50aW1lQ29udHJvbENvbW1hbmQuTGlzdFJhbmdlKCkpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc0xpc3RSYW5kb20pIHtcbiAgICAgIGlmICh0aGlzLmFyZ3MubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgIHRoaXMuRXJyb3IoXCJMSVNUX1JBTkRPTSBzaG91bGQgdGFrZSAxIHBhcmFtZXRlciAtIGEgbGlzdFwiKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5hcmdzWzBdLkdlbmVyYXRlSW50b0NvbnRhaW5lcihjb250YWluZXIpO1xuXG4gICAgICBjb250YWluZXIuQWRkQ29udGVudChSdW50aW1lQ29udHJvbENvbW1hbmQuTGlzdFJhbmRvbSgpKTtcbiAgICB9IGVsc2UgaWYgKE5hdGl2ZUZ1bmN0aW9uQ2FsbC5DYWxsRXhpc3RzV2l0aE5hbWUodGhpcy5uYW1lKSkge1xuICAgICAgY29uc3QgbmF0aXZlQ2FsbCA9IE5hdGl2ZUZ1bmN0aW9uQ2FsbC5DYWxsV2l0aE5hbWUodGhpcy5uYW1lKTtcbiAgICAgIGlmIChuYXRpdmVDYWxsLm51bWJlck9mUGFyYW1ldGVycyAhPT0gdGhpcy5hcmdzLmxlbmd0aCkge1xuICAgICAgICBsZXQgbXNnID0gYCR7RnVuY3Rpb25DYWxsLm5hbWV9IHNob3VsZCB0YWtlICR7bmF0aXZlQ2FsbC5udW1iZXJPZlBhcmFtZXRlcnN9IHBhcmFtZXRlcmA7XG4gICAgICAgIGlmIChuYXRpdmVDYWxsLm51bWJlck9mUGFyYW1ldGVycyA+IDEpIHtcbiAgICAgICAgICBtc2cgKz0gXCJzXCI7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLkVycm9yKG1zZyk7XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCB0aGlzLmFyZ3MubGVuZ3RoOyBpaSArPSAxKSB7XG4gICAgICAgIHRoaXMuYXJnc1tpaV0uR2VuZXJhdGVJbnRvQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gICAgICB9XG5cbiAgICAgIGNvbnRhaW5lci5BZGRDb250ZW50KE5hdGl2ZUZ1bmN0aW9uQ2FsbC5DYWxsV2l0aE5hbWUodGhpcy5uYW1lKSk7XG4gICAgfSBlbHNlIGlmIChmb3VuZExpc3QgIT09IG51bGwpIHtcbiAgICAgIGlmICh0aGlzLmFyZ3MubGVuZ3RoID4gMSkge1xuICAgICAgICB0aGlzLkVycm9yKFxuICAgICAgICAgIFwiQ2FuIGN1cnJlbnRseSBvbmx5IGNvbnN0cnVjdCBhIGxpc3QgZnJvbSBvbmUgaW50ZWdlciAob3IgYW4gZW1wdHkgbGlzdCBmcm9tIGEgZ2l2ZW4gbGlzdCBkZWZpbml0aW9uKVwiXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIC8vIExpc3QgaXRlbSBmcm9tIGdpdmVuIGludFxuICAgICAgaWYgKHRoaXMuYXJncy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQobmV3IFN0cmluZ1ZhbHVlKHRoaXMubmFtZSkpO1xuICAgICAgICB0aGlzLmFyZ3NbMF0uR2VuZXJhdGVJbnRvQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gICAgICAgIGNvbnRhaW5lci5BZGRDb250ZW50KFJ1bnRpbWVDb250cm9sQ29tbWFuZC5MaXN0RnJvbUludCgpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEVtcHR5IGxpc3Qgd2l0aCBnaXZlbiBvcmlnaW4uXG4gICAgICAgIGNvbnN0IGxpc3QgPSBuZXcgUnVudGltZUlua0xpc3QoKTtcbiAgICAgICAgbGlzdC5TZXRJbml0aWFsT3JpZ2luTmFtZSh0aGlzLm5hbWUpO1xuICAgICAgICBjb250YWluZXIuQWRkQ29udGVudChuZXcgTGlzdFZhbHVlKGxpc3QpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm9ybWFsIGZ1bmN0aW9uIGNhbGxcbiAgICAgIGNvbnRhaW5lci5BZGRDb250ZW50KHRoaXMuX3Byb3h5RGl2ZXJ0LnJ1bnRpbWVPYmplY3QpO1xuICAgICAgdXNpbmdQcm94eURpdmVydCA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gRG9uJ3QgYXR0ZW1wdCB0byByZXNvbHZlIGFzIGEgZGl2ZXJ0IGlmIHdlJ3JlIG5vdCBkb2luZyBhIG5vcm1hbCBmdW5jdGlvbiBjYWxsXG4gICAgaWYgKCF1c2luZ1Byb3h5RGl2ZXJ0KSB7XG4gICAgICB0aGlzLmNvbnRlbnQuc3BsaWNlKHRoaXMuY29udGVudC5pbmRleE9mKHRoaXMuX3Byb3h5RGl2ZXJ0KSwgMSk7XG4gICAgfVxuXG4gICAgLy8gRnVuY3Rpb24gY2FsbHMgdGhhdCBhcmUgdXNlZCBhbG9uZSBvbiBhIHRpbGRhLWJhc2VkIGxpbmU6XG4gICAgLy8gIH4gZnVuYygpXG4gICAgLy8gU2hvdWxkIHRpZHkgdXAgYW55IHJldHVybmVkIHZhbHVlIGZyb20gdGhlIGV2YWx1YXRpb24gc3RhY2ssXG4gICAgLy8gc2luY2UgaXQncyB1bnVzZWQuXG4gICAgaWYgKHRoaXMuc2hvdWxkUG9wUmV0dXJuZWRWYWx1ZSkge1xuICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQoUnVudGltZUNvbnRyb2xDb21tYW5kLlBvcEV2YWx1YXRlZFZhbHVlKCkpO1xuICAgIH1cbiAgfTtcblxuICBwdWJsaWMgUmVzb2x2ZVJlZmVyZW5jZXMoY29udGV4dDogU3RvcnkpOiB2b2lkIHtcbiAgICBzdXBlci5SZXNvbHZlUmVmZXJlbmNlcyhjb250ZXh0KTtcblxuICAgIC8vIElmIHdlIGFyZW4ndCB1c2luZyB0aGUgcHJveHkgZGl2ZXJ0IGFmdGVyIGFsbCAoZS5nLiBpZlxuICAgIC8vIGl0J3MgYSBuYXRpdmUgZnVuY3Rpb24gY2FsbCksIGJ1dCB3ZSBzdGlsbCBoYXZlIGFyZ3VtZW50cyxcbiAgICAvLyB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGV5IGdldCByZXNvbHZlZCBzaW5jZSB0aGUgcHJveHkgZGl2ZXJ0XG4gICAgLy8gaXMgbm8gbG9uZ2VyIGluIHRoZSBjb250ZW50IGFycmF5LlxuICAgIGlmICghdGhpcy5jb250ZW50LmluY2x1ZGVzKHRoaXMuX3Byb3h5RGl2ZXJ0KSAmJiB0aGlzLmFyZ3MgIT09IG51bGwpIHtcbiAgICAgIGZvciAoY29uc3QgYXJnIG9mIHRoaXMuYXJncykge1xuICAgICAgICBhcmcuUmVzb2x2ZVJlZmVyZW5jZXMoY29udGV4dCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2RpdmVydFRhcmdldFRvQ291bnQpIHtcbiAgICAgIGNvbnN0IGRpdmVydCA9IHRoaXMuX2RpdmVydFRhcmdldFRvQ291bnQuZGl2ZXJ0O1xuICAgICAgY29uc3QgYXR0ZW1wdGluZ1R1cm5Db3VudE9mVmFyaWFibGVUYXJnZXQgPVxuICAgICAgICBkaXZlcnQucnVudGltZURpdmVydC52YXJpYWJsZURpdmVydE5hbWUgIT0gbnVsbDtcblxuICAgICAgaWYgKGF0dGVtcHRpbmdUdXJuQ291bnRPZlZhcmlhYmxlVGFyZ2V0KSB7XG4gICAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgICAgYFdoZW4gZ2V0dGluZyB0aGUgVFVSTlNfU0lOQ0UoKSBvZiBhIHZhcmlhYmxlIHRhcmdldCwgcmVtb3ZlIHRoZSAnLT4nIC0gaS5lLiBpdCBzaG91bGQganVzdCBiZSBUVVJOU19TSU5DRSgke2RpdmVydC5ydW50aW1lRGl2ZXJ0LnZhcmlhYmxlRGl2ZXJ0TmFtZX0pYFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgY29uc3QgdGFyZ2V0T2JqZWN0ID0gZGl2ZXJ0LnRhcmdldENvbnRlbnQ7XG4gICAgICBpZiAodGFyZ2V0T2JqZWN0ID09PSBudWxsKSB7XG4gICAgICAgIGlmICghYXR0ZW1wdGluZ1R1cm5Db3VudE9mVmFyaWFibGVUYXJnZXQpIHtcbiAgICAgICAgICB0aGlzLkVycm9yKFxuICAgICAgICAgICAgYEZhaWxlZCB0byBmaW5kIHRhcmdldCBmb3IgVFVSTlNfU0lOQ0U6ICcke2RpdmVydC50YXJnZXR9J2BcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXRhcmdldE9iamVjdC5jb250YWluZXJGb3JDb3VudGluZykge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFyZ2V0T2JqZWN0LmNvbnRhaW5lckZvckNvdW50aW5nLnR1cm5JbmRleFNob3VsZEJlQ291bnRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLl92YXJpYWJsZVJlZmVyZW5jZVRvQ291bnQpIHtcbiAgICAgIGNvbnN0IHJ1bnRpbWVWYXJSZWYgPSB0aGlzLl92YXJpYWJsZVJlZmVyZW5jZVRvQ291bnQucnVudGltZVZhclJlZjtcbiAgICAgIGlmICghcnVudGltZVZhclJlZikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJ1bnRpbWVWYXJSZWYucGF0aEZvckNvdW50ICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgICAgYFNob3VsZCBiZSAnJHtGdW5jdGlvbkNhbGwubmFtZX0nKC0+ICcke3RoaXMuX3ZhcmlhYmxlUmVmZXJlbmNlVG9Db3VudC5uYW1lfSkuIFVzYWdlIHdpdGhvdXQgdGhlICctPicgb25seSBtYWtlcyBzZW5zZSBmb3IgdmFyaWFibGUgdGFyZ2V0cy5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlYWRvbmx5IHRvU3RyaW5nID0gKCk6IHN0cmluZyA9PiB7XG4gICAgY29uc3Qgc3RyQXJncyA9IHRoaXMuYXJncy5qb2luKFwiLCBcIik7XG4gICAgcmV0dXJuIGAke3RoaXMubmFtZX0oJHtzdHJBcmdzfSlgO1xuICB9O1xufVxuIiwiaW1wb3J0IHsgQ29udGFpbmVyIGFzIFJ1bnRpbWVDb250YWluZXIgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL0NvbnRhaW5lclwiO1xuaW1wb3J0IHsgRXhwcmVzc2lvbiB9IGZyb20gXCIuL0V4cHJlc3Npb25cIjtcbmltcG9ydCB7IE5hdGl2ZUZ1bmN0aW9uQ2FsbCB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvTmF0aXZlRnVuY3Rpb25DYWxsXCI7XG5cbmV4cG9ydCBjbGFzcyBNdWx0aXBsZUNvbmRpdGlvbkV4cHJlc3Npb24gZXh0ZW5kcyBFeHByZXNzaW9uIHtcbiAgZ2V0IHN1YkV4cHJlc3Npb25zKCk6IEV4cHJlc3Npb25bXSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGVudCBhcyBFeHByZXNzaW9uW107XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihjb25kaXRpb25FeHByZXNzaW9uczogRXhwcmVzc2lvbltdKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIHRoaXMuQWRkQ29udGVudChjb25kaXRpb25FeHByZXNzaW9ucyk7XG4gIH1cblxuICBnZXQgdHlwZU5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJNdWx0aXBsZUNvbmRpdGlvbkV4cHJlc3Npb25cIjtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBHZW5lcmF0ZUludG9Db250YWluZXIgPSAoXG4gICAgY29udGFpbmVyOiBSdW50aW1lQ29udGFpbmVyXG4gICk6IHZvaWQgPT4ge1xuICAgIC8vICAgIEEgJiYgQiAmJiBDICYmIERcbiAgICAvLyA9PiAoKChBIEIgJiYpIEMgJiYpIEQgJiYpIGV0Y1xuICAgIGxldCBpc0ZpcnN0OiBib29sZWFuID0gdHJ1ZTtcbiAgICBmb3IgKGNvbnN0IGNvbmRpdGlvbkV4cHIgb2YgdGhpcy5zdWJFeHByZXNzaW9ucykge1xuICAgICAgY29uZGl0aW9uRXhwci5HZW5lcmF0ZUludG9Db250YWluZXIoY29udGFpbmVyKTtcblxuICAgICAgaWYgKCFpc0ZpcnN0KSB7XG4gICAgICAgIGNvbnRhaW5lci5BZGRDb250ZW50KE5hdGl2ZUZ1bmN0aW9uQ2FsbC5DYWxsV2l0aE5hbWUoXCImJlwiKSk7XG4gICAgICB9XG5cbiAgICAgIGlzRmlyc3QgPSBmYWxzZTtcbiAgICB9XG4gIH07XG59XG4iLCJpbXBvcnQgeyBCaW5hcnlFeHByZXNzaW9uIH0gZnJvbSBcIi4uL0V4cHJlc3Npb24vQmluYXJ5RXhwcmVzc2lvblwiO1xuaW1wb3J0IHsgQ2hvaWNlIH0gZnJvbSBcIi4uL0Nob2ljZVwiO1xuaW1wb3J0IHsgQ29uZGl0aW9uYWwgfSBmcm9tIFwiLi4vQ29uZGl0aW9uYWwvQ29uZGl0aW9uYWxcIjtcbmltcG9ydCB7IENvbmRpdGlvbmFsU2luZ2xlQnJhbmNoIH0gZnJvbSBcIi4uL0NvbmRpdGlvbmFsL0NvbmRpdGlvbmFsU2luZ2xlQnJhbmNoXCI7XG5pbXBvcnQgeyBDb250YWluZXIgYXMgUnVudGltZUNvbnRhaW5lciB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvQ29udGFpbmVyXCI7XG5pbXBvcnQgeyBQYXJzZWRPYmplY3QgfSBmcm9tIFwiLi4vT2JqZWN0XCI7XG5pbXBvcnQgeyBEaXZlcnQgfSBmcm9tIFwiLi9EaXZlcnRcIjtcbmltcG9ydCB7IERpdmVydCBhcyBSdW50aW1lRGl2ZXJ0IH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9EaXZlcnRcIjtcbmltcG9ydCB7IERpdmVydFRhcmdldFZhbHVlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9WYWx1ZVwiO1xuaW1wb3J0IHsgRXhwcmVzc2lvbiB9IGZyb20gXCIuLi9FeHByZXNzaW9uL0V4cHJlc3Npb25cIjtcbmltcG9ydCB7IEZsb3dCYXNlIH0gZnJvbSBcIi4uL0Zsb3cvRmxvd0Jhc2VcIjtcbmltcG9ydCB7IEZ1bmN0aW9uQ2FsbCB9IGZyb20gXCIuLi9GdW5jdGlvbkNhbGxcIjtcbmltcG9ydCB7IE11bHRpcGxlQ29uZGl0aW9uRXhwcmVzc2lvbiB9IGZyb20gXCIuLi9FeHByZXNzaW9uL011bHRpcGxlQ29uZGl0aW9uRXhwcmVzc2lvblwiO1xuaW1wb3J0IHsgU3RvcnkgfSBmcm9tIFwiLi4vU3RvcnlcIjtcbmltcG9ydCB7IFZhcmlhYmxlUmVmZXJlbmNlIH0gZnJvbSBcIi4uL1ZhcmlhYmxlL1ZhcmlhYmxlUmVmZXJlbmNlXCI7XG5pbXBvcnQgeyBhc09yTnVsbCB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvVHlwZUFzc2VydGlvblwiO1xuXG5leHBvcnQgY2xhc3MgRGl2ZXJ0VGFyZ2V0IGV4dGVuZHMgRXhwcmVzc2lvbiB7XG4gIHByaXZhdGUgX3J1bnRpbWVEaXZlcnQ6IFJ1bnRpbWVEaXZlcnQgfCBudWxsID0gbnVsbDtcbiAgZ2V0IHJ1bnRpbWVEaXZlcnQoKTogUnVudGltZURpdmVydCB7XG4gICAgaWYgKCF0aGlzLl9ydW50aW1lRGl2ZXJ0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fcnVudGltZURpdmVydDtcbiAgfVxuXG4gIHByaXZhdGUgX3J1bnRpbWVEaXZlcnRUYXJnZXRWYWx1ZTogRGl2ZXJ0VGFyZ2V0VmFsdWUgfCBudWxsID0gbnVsbDtcbiAgZ2V0IHJ1bnRpbWVEaXZlcnRUYXJnZXRWYWx1ZSgpOiBEaXZlcnRUYXJnZXRWYWx1ZSB7XG4gICAgaWYgKCF0aGlzLl9ydW50aW1lRGl2ZXJ0VGFyZ2V0VmFsdWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9ydW50aW1lRGl2ZXJ0VGFyZ2V0VmFsdWU7XG4gIH1cblxuICBwdWJsaWMgZGl2ZXJ0OiBEaXZlcnQ7XG5cbiAgY29uc3RydWN0b3IoZGl2ZXJ0OiBEaXZlcnQpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5kaXZlcnQgPSB0aGlzLkFkZENvbnRlbnQoZGl2ZXJ0KSBhcyBEaXZlcnQ7XG4gIH1cblxuICBnZXQgdHlwZU5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJEaXZlcnRUYXJnZXRcIjtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBHZW5lcmF0ZUludG9Db250YWluZXIgPSAoXG4gICAgY29udGFpbmVyOiBSdW50aW1lQ29udGFpbmVyXG4gICk6IHZvaWQgPT4ge1xuICAgIHRoaXMuZGl2ZXJ0LkdlbmVyYXRlUnVudGltZU9iamVjdCgpO1xuXG4gICAgdGhpcy5fcnVudGltZURpdmVydCA9IHRoaXMuZGl2ZXJ0LnJ1bnRpbWVEaXZlcnQgYXMgUnVudGltZURpdmVydDtcbiAgICB0aGlzLl9ydW50aW1lRGl2ZXJ0VGFyZ2V0VmFsdWUgPSBuZXcgRGl2ZXJ0VGFyZ2V0VmFsdWUoKTtcblxuICAgIGNvbnRhaW5lci5BZGRDb250ZW50KHRoaXMucnVudGltZURpdmVydFRhcmdldFZhbHVlKTtcbiAgfTtcblxuICBwdWJsaWMgUmVzb2x2ZVJlZmVyZW5jZXMoY29udGV4dDogU3RvcnkpOiB2b2lkIHtcbiAgICBzdXBlci5SZXNvbHZlUmVmZXJlbmNlcyhjb250ZXh0KTtcblxuICAgIGlmICh0aGlzLmRpdmVydC5pc0RvbmUgfHwgdGhpcy5kaXZlcnQuaXNFbmQpIHtcbiAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgIGBDYW4ndCB1c2UgLT4gRE9ORSBvciAtPiBFTkQgYXMgdmFyaWFibGUgZGl2ZXJ0IHRhcmdldHNgLFxuICAgICAgICB0aGlzXG4gICAgICApO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHVzYWdlQ29udGV4dDogUGFyc2VkT2JqZWN0IHwgbnVsbCA9IHRoaXM7XG4gICAgd2hpbGUgKHVzYWdlQ29udGV4dCAmJiB1c2FnZUNvbnRleHQgaW5zdGFuY2VvZiBFeHByZXNzaW9uKSB7XG4gICAgICBsZXQgYmFkVXNhZ2U6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICAgIGxldCBmb3VuZFVzYWdlOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAgIGNvbnN0IHVzYWdlUGFyZW50OiBhbnkgPSAodXNhZ2VDb250ZXh0IGFzIEV4cHJlc3Npb24pLnBhcmVudDtcbiAgICAgIGlmICh1c2FnZVBhcmVudCBpbnN0YW5jZW9mIEJpbmFyeUV4cHJlc3Npb24pIHtcbiAgICAgICAgLy8gT25seSBhbGxvd2VkIHRvIGNvbXBhcmUgZm9yIGVxdWFsaXR5XG5cbiAgICAgICAgY29uc3QgYmluYXJ5RXhwclBhcmVudCA9IHVzYWdlUGFyZW50O1xuICAgICAgICBpZiAoXG4gICAgICAgICAgYmluYXJ5RXhwclBhcmVudC5vcE5hbWUgIT09IFwiPT1cIiAmJlxuICAgICAgICAgIGJpbmFyeUV4cHJQYXJlbnQub3BOYW1lICE9PSBcIiE9XCJcbiAgICAgICAgKSB7XG4gICAgICAgICAgYmFkVXNhZ2UgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICEoXG4gICAgICAgICAgICAgIGJpbmFyeUV4cHJQYXJlbnQubGVmdEV4cHJlc3Npb24gaW5zdGFuY2VvZiBEaXZlcnRUYXJnZXQgfHxcbiAgICAgICAgICAgICAgYmluYXJ5RXhwclBhcmVudC5sZWZ0RXhwcmVzc2lvbiBpbnN0YW5jZW9mIFZhcmlhYmxlUmVmZXJlbmNlXG4gICAgICAgICAgICApXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBiYWRVc2FnZSA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICEoXG4gICAgICAgICAgICAgIGJpbmFyeUV4cHJQYXJlbnQucmlnaHRFeHByZXNzaW9uIGluc3RhbmNlb2YgRGl2ZXJ0VGFyZ2V0IHx8XG4gICAgICAgICAgICAgIGJpbmFyeUV4cHJQYXJlbnQucmlnaHRFeHByZXNzaW9uIGluc3RhbmNlb2YgVmFyaWFibGVSZWZlcmVuY2VcbiAgICAgICAgICAgIClcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGJhZFVzYWdlID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3VuZFVzYWdlID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAodXNhZ2VQYXJlbnQgaW5zdGFuY2VvZiBGdW5jdGlvbkNhbGwpIHtcbiAgICAgICAgY29uc3QgZnVuY0NhbGwgPSB1c2FnZVBhcmVudDtcbiAgICAgICAgaWYgKCFmdW5jQ2FsbC5pc1R1cm5zU2luY2UgJiYgIWZ1bmNDYWxsLmlzUmVhZENvdW50KSB7XG4gICAgICAgICAgYmFkVXNhZ2UgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZm91bmRVc2FnZSA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHVzYWdlUGFyZW50IGluc3RhbmNlb2YgRXhwcmVzc2lvbikge1xuICAgICAgICBiYWRVc2FnZSA9IHRydWU7XG4gICAgICAgIGZvdW5kVXNhZ2UgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmICh1c2FnZVBhcmVudCBpbnN0YW5jZW9mIE11bHRpcGxlQ29uZGl0aW9uRXhwcmVzc2lvbikge1xuICAgICAgICBiYWRVc2FnZSA9IHRydWU7XG4gICAgICAgIGZvdW5kVXNhZ2UgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgdXNhZ2VQYXJlbnQgaW5zdGFuY2VvZiBDaG9pY2UgJiZcbiAgICAgICAgKHVzYWdlUGFyZW50IGFzIENob2ljZSkuY29uZGl0aW9uID09PSB1c2FnZUNvbnRleHRcbiAgICAgICkge1xuICAgICAgICBiYWRVc2FnZSA9IHRydWU7XG4gICAgICAgIGZvdW5kVXNhZ2UgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgdXNhZ2VQYXJlbnQgaW5zdGFuY2VvZiBDb25kaXRpb25hbCB8fFxuICAgICAgICB1c2FnZVBhcmVudCBpbnN0YW5jZW9mIENvbmRpdGlvbmFsU2luZ2xlQnJhbmNoXG4gICAgICApIHtcbiAgICAgICAgYmFkVXNhZ2UgPSB0cnVlO1xuICAgICAgICBmb3VuZFVzYWdlID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGJhZFVzYWdlKSB7XG4gICAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgICAgYENhbid0IHVzZSBhIGRpdmVydCB0YXJnZXQgbGlrZSB0aGF0LiBEaWQgeW91IGludGVuZCB0byBjYWxsICcke3RoaXMuZGl2ZXJ0LnRhcmdldH0nIGFzIGEgZnVuY3Rpb246IGxpa2VUaGlzKCksIG9yIGNoZWNrIHRoZSByZWFkIGNvdW50OiBsaWtlVGhpcywgd2l0aCBubyBhcnJvd3M/YCxcbiAgICAgICAgICB0aGlzXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmb3VuZFVzYWdlKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICB1c2FnZUNvbnRleHQgPSB1c2FnZVBhcmVudDtcbiAgICB9XG5cbiAgICAvLyBFeGFtcGxlIGluayBmb3IgdGhpcyBjYXNlOlxuICAgIC8vXG4gICAgLy8gICAgIFZBUiB4ID0gLT4gYmxhaFxuICAgIC8vXG4gICAgLy8gLi4ud2hpY2ggbWVhbnMgdGhhdCBcImJsYWhcIiBpcyBleHBlY3RlZCB0byBiZSBhIGxpdGVyYWwgc3RpdGNoIHRhcmdldCByYXRoZXJcbiAgICAvLyB0aGFuIGEgdmFyaWFibGUgbmFtZS4gV2UgY2FuJ3QgcmVhbGx5IGludGVsbGlnZW50bHkgcmVjb3ZlciBmcm9tIHRoaXMgKGUuZy4gaWYgYmxhaCBoYXBwZW5zIHRvXG4gICAgLy8gY29udGFpbiBhIGRpdmVydCB0YXJnZXQgaXRzZWxmKSBzaW5jZSByZWFsbHkgd2Ugc2hvdWxkIGJlIGdlbmVyYXRpbmcgYSB2YXJpYWJsZSByZWZlcmVuY2VcbiAgICAvLyByYXRoZXIgdGhhbiBhIGNvbmNyZXRlIERpdmVydFRhcmdldCwgc28gd2UgbGlzdCBpdCBhcyBhbiBlcnJvci5cbiAgICBpZiAodGhpcy5ydW50aW1lRGl2ZXJ0Lmhhc1ZhcmlhYmxlVGFyZ2V0KSB7XG4gICAgICBpZiAoIXRoaXMuZGl2ZXJ0LnRhcmdldCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5FcnJvcihcbiAgICAgICAgYFNpbmNlICcke3RoaXMuZGl2ZXJ0LnRhcmdldC5kb3RTZXBhcmF0ZWRDb21wb25lbnRzfScgaXMgYSB2YXJpYWJsZSwgaXQgc2hvdWxkbid0IGJlIHByZWNlZGVkIGJ5ICctPicgaGVyZS5gXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIE1haW4gcmVzb2x2ZVxuICAgIHRoaXMucnVudGltZURpdmVydC50YXJnZXRQYXRoICYmXG4gICAgICAodGhpcy5ydW50aW1lRGl2ZXJ0VGFyZ2V0VmFsdWUudGFyZ2V0UGF0aCA9XG4gICAgICAgIHRoaXMucnVudGltZURpdmVydC50YXJnZXRQYXRoKTtcblxuICAgIC8vIFRlbGwgaGFyZCBjb2RlZCAoeWV0IHZhcmlhYmxlKSBkaXZlcnQgdGFyZ2V0cyB0aGF0IHRoZXkgYWxzbyBuZWVkIHRvIGJlIGNvdW50ZWRcbiAgICAvLyBUT0RPOiBPbmx5IGRldGVjdCBEaXZlcnRUYXJnZXRzIHRoYXQgYXJlIHZhbHVlcyByYXRoZXIgdGhhbiBiZWluZyB1c2VkIGRpcmVjdGx5IGZvclxuICAgIC8vIHJlYWQgb3IgdHVybiBjb3VudHMuIFNob3VsZCBiZSBhYmxlIHRvIGRldGVjdCB0aGlzIGJ5IGxvb2tpbmcgZm9yIG90aGVyIHVzZXMgb2YgY29udGFpbmVyRm9yQ291bnRpbmdcbiAgICBsZXQgdGFyZ2V0Q29udGVudCA9IHRoaXMuZGl2ZXJ0LnRhcmdldENvbnRlbnQ7XG4gICAgaWYgKHRhcmdldENvbnRlbnQgIT09IG51bGwpIHtcbiAgICAgIGxldCB0YXJnZXQgPSB0YXJnZXRDb250ZW50LmNvbnRhaW5lckZvckNvdW50aW5nO1xuICAgICAgaWYgKHRhcmdldCAhPT0gbnVsbCkge1xuICAgICAgICAvLyBQdXJwb3NlIGlzIGtub3duOiB1c2VkIGRpcmVjdGx5IGluIFRVUk5TX1NJTkNFKC0+IGRpdlRhcmcpXG4gICAgICAgIGNvbnN0IHBhcmVudEZ1bmMgPSBhc09yTnVsbCh0aGlzLnBhcmVudCwgRnVuY3Rpb25DYWxsKTtcbiAgICAgICAgaWYgKHBhcmVudEZ1bmMgJiYgcGFyZW50RnVuYy5pc1R1cm5zU2luY2UpIHtcbiAgICAgICAgICB0YXJnZXQudHVybkluZGV4U2hvdWxkQmVDb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBVbmtub3duIHB1cnBvc2UsIGNvdW50IGV2ZXJ5dGhpbmdcbiAgICAgICAgICB0YXJnZXQudmlzaXRzU2hvdWxkQmVDb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgICB0YXJnZXQudHVybkluZGV4U2hvdWxkQmVDb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBVbmZvcnR1bmF0ZWx5IG5vdCBwb3NzaWJsZTpcbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9pbmtsZS9pbmsvaXNzdWVzLzUzOFxuICAgICAgLy9cbiAgICAgIC8vIFZBUiBmdW5jID0gLT4gZG91YmxlXG4gICAgICAvL1xuICAgICAgLy8gPT09IGZ1bmN0aW9uIGRvdWJsZShyZWYgeClcbiAgICAgIC8vICAgIH4geCA9IHggKiAyXG4gICAgICAvL1xuICAgICAgLy8gQmVjYXVzZSB3aGVuIGdlbmVyYXRpbmcgdGhlIHBhcmFtZXRlcnMgZm9yIGEgZnVuY3Rpb25cbiAgICAgIC8vIHRvIGJlIGNhbGxlZCwgaXQgbmVlZHMgdG8ga25vdyBhaGVhZCBvZiB0aW1lIHdoZW5cbiAgICAgIC8vIGNvbXBpbGluZyB3aGV0aGVyIHRvIHBhc3MgYSB2YXJpYWJsZSByZWZlcmVuY2Ugb3IgdmFsdWUuXG4gICAgICAvL1xuICAgICAgbGV0IHRhcmdldEZsb3cgPSBhc09yTnVsbCh0YXJnZXRDb250ZW50LCBGbG93QmFzZSk7XG4gICAgICBpZiAodGFyZ2V0RmxvdyAhPSBudWxsICYmIHRhcmdldEZsb3cuYXJncyAhPT0gbnVsbCkge1xuICAgICAgICBmb3IgKGNvbnN0IGFyZyBvZiB0YXJnZXRGbG93LmFyZ3MpIHtcbiAgICAgICAgICBpZiAoYXJnLmlzQnlSZWZlcmVuY2UpIHtcbiAgICAgICAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBDYW4ndCBzdG9yZSBhIGRpdmVydCB0YXJnZXQgdG8gYSBrbm90IG9yIGZ1bmN0aW9uIHRoYXQgaGFzIGJ5LXJlZmVyZW5jZSBhcmd1bWVudHMgKCcke3RhcmdldEZsb3cuaWRlbnRpZmllcn0nIGhhcyAncmVmICR7YXJnLmlkZW50aWZpZXJ9JykuYFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBFcXVhbHMgb3ZlcnJpZGUgbmVjZXNzYXJ5IGluIG9yZGVyIHRvIGNoZWNrIGZvciBDT05TVCBtdWx0aXBsZSBkZWZpbml0aW9uIGVxdWFsaXR5XG4gIHB1YmxpYyByZWFkb25seSBFcXVhbHMgPSAob2JqOiBQYXJzZWRPYmplY3QpOiBib29sZWFuID0+IHtcbiAgICBjb25zdCBvdGhlckRpdlRhcmdldCA9IGFzT3JOdWxsKG9iaiwgRGl2ZXJ0VGFyZ2V0KTtcbiAgICBpZiAoXG4gICAgICAhb3RoZXJEaXZUYXJnZXQgfHxcbiAgICAgICF0aGlzLmRpdmVydC50YXJnZXQgfHxcbiAgICAgICFvdGhlckRpdlRhcmdldC5kaXZlcnQudGFyZ2V0XG4gICAgKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgdGFyZ2V0U3RyID0gdGhpcy5kaXZlcnQudGFyZ2V0LmRvdFNlcGFyYXRlZENvbXBvbmVudHM7XG4gICAgY29uc3Qgb3RoZXJUYXJnZXRTdHIgPSBvdGhlckRpdlRhcmdldC5kaXZlcnQudGFyZ2V0LmRvdFNlcGFyYXRlZENvbXBvbmVudHM7XG5cbiAgICByZXR1cm4gdGFyZ2V0U3RyID09PSBvdGhlclRhcmdldFN0cjtcbiAgfTtcbn1cbiIsImltcG9ydCB7IEFyZ3VtZW50IH0gZnJvbSBcIi4uL0FyZ3VtZW50XCI7XG5pbXBvcnQgeyBDb250YWluZXIgYXMgUnVudGltZUNvbnRhaW5lciB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvQ29udGFpbmVyXCI7XG5pbXBvcnQgeyBDb250cm9sQ29tbWFuZCBhcyBSdW50aW1lQ29udHJvbENvbW1hbmQgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL0NvbnRyb2xDb21tYW5kXCI7XG5pbXBvcnQgeyBEaXZlcnQgYXMgUnVudGltZURpdmVydCB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvRGl2ZXJ0XCI7XG5pbXBvcnQgeyBEaXZlcnRUYXJnZXQgfSBmcm9tIFwiLi9EaXZlcnRUYXJnZXRcIjtcbmltcG9ydCB7IEV4cHJlc3Npb24gfSBmcm9tIFwiLi4vRXhwcmVzc2lvbi9FeHByZXNzaW9uXCI7XG5pbXBvcnQgeyBGbG93QmFzZSB9IGZyb20gXCIuLi9GbG93L0Zsb3dCYXNlXCI7XG5pbXBvcnQgeyBGdW5jdGlvbkNhbGwgfSBmcm9tIFwiLi4vRnVuY3Rpb25DYWxsXCI7XG5pbXBvcnQgeyBQYXJzZWRPYmplY3QgfSBmcm9tIFwiLi4vT2JqZWN0XCI7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSBcIi4uL1BhdGhcIjtcbmltcG9ydCB7IFBhdGggYXMgUnVudGltZVBhdGggfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL1BhdGhcIjtcbmltcG9ydCB7IFB1c2hQb3BUeXBlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9QdXNoUG9wXCI7XG5pbXBvcnQgeyBTdG9yeSB9IGZyb20gXCIuLi9TdG9yeVwiO1xuaW1wb3J0IHsgVmFyaWFibGVQb2ludGVyVmFsdWUgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL1ZhbHVlXCI7XG5pbXBvcnQgeyBWYXJpYWJsZVJlZmVyZW5jZSB9IGZyb20gXCIuLi9WYXJpYWJsZS9WYXJpYWJsZVJlZmVyZW5jZVwiO1xuaW1wb3J0IHsgQ2xvc2VzdEZsb3dCYXNlIH0gZnJvbSBcIi4uL0Zsb3cvQ2xvc2VzdEZsb3dCYXNlXCI7XG5pbXBvcnQgeyBhc09yTnVsbCB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvVHlwZUFzc2VydGlvblwiO1xuXG5leHBvcnQgY2xhc3MgRGl2ZXJ0IGV4dGVuZHMgUGFyc2VkT2JqZWN0IHtcbiAgcHVibGljIHJlYWRvbmx5IGFyZ3M6IEV4cHJlc3Npb25bXSA9IFtdO1xuXG4gIHB1YmxpYyByZWFkb25seSB0YXJnZXQ6IFBhdGggfCBudWxsID0gbnVsbDtcbiAgcHVibGljIHRhcmdldENvbnRlbnQ6IFBhcnNlZE9iamVjdCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIF9ydW50aW1lRGl2ZXJ0OiBSdW50aW1lRGl2ZXJ0IHwgbnVsbCA9IG51bGw7XG4gIGdldCBydW50aW1lRGl2ZXJ0KCk6IFJ1bnRpbWVEaXZlcnQge1xuICAgIGlmICghdGhpcy5fcnVudGltZURpdmVydCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3J1bnRpbWVEaXZlcnQ7XG4gIH1cblxuICBzZXQgcnVudGltZURpdmVydCh2YWx1ZTogUnVudGltZURpdmVydCkge1xuICAgIHRoaXMuX3J1bnRpbWVEaXZlcnQgPSB2YWx1ZTtcbiAgfVxuXG4gIHB1YmxpYyBpc0Z1bmN0aW9uQ2FsbDogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgaXNFbXB0eTogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgaXNUdW5uZWw6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIGlzVGhyZWFkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgZ2V0IGlzRW5kKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBCb29sZWFuKHRoaXMudGFyZ2V0ICYmIHRoaXMudGFyZ2V0LmRvdFNlcGFyYXRlZENvbXBvbmVudHMgPT09IFwiRU5EXCIpO1xuICB9XG5cbiAgZ2V0IGlzRG9uZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gQm9vbGVhbihcbiAgICAgIHRoaXMudGFyZ2V0ICYmIHRoaXMudGFyZ2V0LmRvdFNlcGFyYXRlZENvbXBvbmVudHMgPT09IFwiRE9ORVwiXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHRhcmdldD86IFBhdGggfCBudWxsIHwgdW5kZWZpbmVkLCBhcmdzPzogRXhwcmVzc2lvbltdKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgIH1cblxuICAgIGlmIChhcmdzKSB7XG4gICAgICB0aGlzLmFyZ3MgPSBhcmdzO1xuICAgICAgdGhpcy5BZGRDb250ZW50KGFyZ3MpO1xuICAgIH1cbiAgfVxuXG4gIGdldCB0eXBlTmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIkRpdmVydFwiO1xuICB9XG5cbiAgcHVibGljIHJlYWRvbmx5IEdlbmVyYXRlUnVudGltZU9iamVjdCA9ICgpID0+IHtcbiAgICAvLyBFbmQgPSBlbmQgZmxvdyBpbW1lZGlhdGVseVxuICAgIC8vIERvbmUgPSByZXR1cm4gZnJvbSB0aHJlYWQgb3IgaW5zdHJ1Y3QgdGhlIGZsb3cgdGhhdCBpdCdzIHNhZmUgdG8gZXhpdFxuICAgIGlmICh0aGlzLmlzRW5kKSB7XG4gICAgICByZXR1cm4gUnVudGltZUNvbnRyb2xDb21tYW5kLkVuZCgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc0RvbmUpIHtcbiAgICAgIHJldHVybiBSdW50aW1lQ29udHJvbENvbW1hbmQuRG9uZSgpO1xuICAgIH1cblxuICAgIHRoaXMucnVudGltZURpdmVydCA9IG5ldyBSdW50aW1lRGl2ZXJ0KCk7XG5cbiAgICAvLyBOb3JtYWxseSB3ZSByZXNvbHZlIHRoZSB0YXJnZXQgY29udGVudCBkdXJpbmcgdGhlXG4gICAgLy8gUmVzb2x2ZSBwaGFzZSwgc2luY2Ugd2UgZXhwZWN0IGFsbCBydW50aW1lIG9iamVjdHMgdG9cbiAgICAvLyBiZSBhdmFpbGFibGUgaW4gb3JkZXIgdG8gZmluZCB0aGUgZmluYWwgcnVudGltZSBwYXRoIGZvclxuICAgIC8vIHRoZSBkZXN0aW5hdGlvbi4gSG93ZXZlciwgd2UgbmVlZCB0byByZXNvbHZlIHRoZSB0YXJnZXRcbiAgICAvLyAoYWxiZWl0IHdpdGhvdXQgdGhlIHJ1bnRpbWUgdGFyZ2V0KSBlYXJseSBzbyB0aGF0XG4gICAgLy8gd2UgY2FuIGdldCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgYXJndW1lbnRzIC0gd2hldGhlclxuICAgIC8vIHRoZXkncmUgYnkgcmVmZXJlbmNlIC0gc2luY2UgaXQgYWZmZWN0cyB0aGUgY29kZSB3ZVxuICAgIC8vIGdlbmVyYXRlIGhlcmUuXG4gICAgdGhpcy5SZXNvbHZlVGFyZ2V0Q29udGVudCgpO1xuXG4gICAgdGhpcy5DaGVja0FyZ3VtZW50VmFsaWRpdHkoKTtcblxuICAgIC8vIFBhc3NpbmcgYXJndW1lbnRzIHRvIHRoZSBrbm90XG4gICAgY29uc3QgcmVxdWlyZXNBcmdDb2RlR2VuID0gdGhpcy5hcmdzICE9PSBudWxsICYmIHRoaXMuYXJncy5sZW5ndGggPiAwO1xuICAgIGlmIChcbiAgICAgIHJlcXVpcmVzQXJnQ29kZUdlbiB8fFxuICAgICAgdGhpcy5pc0Z1bmN0aW9uQ2FsbCB8fFxuICAgICAgdGhpcy5pc1R1bm5lbCB8fFxuICAgICAgdGhpcy5pc1RocmVhZFxuICAgICkge1xuICAgICAgY29uc3QgY29udGFpbmVyID0gbmV3IFJ1bnRpbWVDb250YWluZXIoKTtcblxuICAgICAgLy8gR2VuZXJhdGUgY29kZSBmb3IgYXJndW1lbnQgZXZhbHVhdGlvblxuICAgICAgLy8gVGhpcyBhcmd1bWVudCBnZW5lcmF0aW9uIGlzIGNvZGVkIGRlZmVuc2l2ZWx5IC0gaXQgc2hvdWxkXG4gICAgICAvLyBhdHRlbXB0IHRvIGdlbmVyYXRlIHRoZSBjb2RlIGZvciBhbGwgdGhlIHBhcmFtZXRlcnMsIGV2ZW4gaWZcbiAgICAgIC8vIHRoZXkgZG9uJ3QgbWF0Y2ggdGhlIGV4cGVjdGVkIGFyZ3VtZW50cy4gVGhpcyBpcyBzbyB0aGF0IHRoZVxuICAgICAgLy8gcGFyYW1ldGVyIG9iamVjdHMgdGhlbXNlbHZlcyBhcmUgZ2VuZXJhdGVkIGNvcnJlY3RseSBhbmQgZG9uJ3RcbiAgICAgIC8vIGdldCBpbnRvIGEgc3RhdGUgb2YgYXR0ZW1wdGluZyB0byByZXNvbHZlIHJlZmVyZW5jZXMgZXRjXG4gICAgICAvLyB3aXRob3V0IGJlaW5nIGdlbmVyYXRlZC5cbiAgICAgIGlmIChyZXF1aXJlc0FyZ0NvZGVHZW4pIHtcbiAgICAgICAgLy8gRnVuY3Rpb24gY2FsbHMgYWxyZWFkeSBpbiBhbiBldmFsdWF0aW9uIGNvbnRleHRcbiAgICAgICAgaWYgKCF0aGlzLmlzRnVuY3Rpb25DYWxsKSB7XG4gICAgICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQoUnVudGltZUNvbnRyb2xDb21tYW5kLkV2YWxTdGFydCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0YXJnZXRBcmd1bWVudHM6IEFyZ3VtZW50W10gfCBudWxsID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0Q29udGVudCkge1xuICAgICAgICAgIHRhcmdldEFyZ3VtZW50cyA9ICh0aGlzLnRhcmdldENvbnRlbnQgYXMgRmxvd0Jhc2UpLmFyZ3M7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgdGhpcy5hcmdzLmxlbmd0aDsgKytpaSkge1xuICAgICAgICAgIGNvbnN0IGFyZ1RvUGFzczogRXhwcmVzc2lvbiA9IHRoaXMuYXJnc1tpaV07XG4gICAgICAgICAgbGV0IGFyZ0V4cGVjdGVkOiBBcmd1bWVudCB8IG51bGwgPSBudWxsO1xuICAgICAgICAgIGlmICh0YXJnZXRBcmd1bWVudHMgJiYgaWkgPCB0YXJnZXRBcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBhcmdFeHBlY3RlZCA9IHRhcmdldEFyZ3VtZW50c1tpaV07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gUGFzcyBieSByZWZlcmVuY2U6IGFyZ3VtZW50IG5lZWRzIHRvIGJlIGEgdmFyaWFibGUgcmVmZXJlbmNlXG4gICAgICAgICAgaWYgKGFyZ0V4cGVjdGVkICYmIGFyZ0V4cGVjdGVkLmlzQnlSZWZlcmVuY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHZhclJlZiA9IGFzT3JOdWxsKGFyZ1RvUGFzcywgVmFyaWFibGVSZWZlcmVuY2UpO1xuICAgICAgICAgICAgaWYgKCF2YXJSZWYpIHtcbiAgICAgICAgICAgICAgdGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgICBgRXhwZWN0ZWQgdmFyaWFibGUgbmFtZSB0byBwYXNzIGJ5IHJlZmVyZW5jZSB0byAncmVmICR7YXJnRXhwZWN0ZWQuaWRlbnRpZmllcn0nIGJ1dCBzYXcgJHthcmdUb1Bhc3N9YFxuICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDaGVjayB0aGF0IHdlJ3JlIG5vdCBhdHRlbXB0aW5nIHRvIHBhc3MgYSByZWFkIGNvdW50IGJ5IHJlZmVyZW5jZVxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0UGF0aCA9IG5ldyBQYXRoKHZhclJlZi5wYXRoSWRlbnRpZmllcnMpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0Rm9yQ291bnQ6IFBhcnNlZE9iamVjdCB8IG51bGwgPVxuICAgICAgICAgICAgICB0YXJnZXRQYXRoLlJlc29sdmVGcm9tQ29udGV4dCh0aGlzKTtcbiAgICAgICAgICAgIGlmICh0YXJnZXRGb3JDb3VudCkge1xuICAgICAgICAgICAgICB0aGlzLkVycm9yKFxuICAgICAgICAgICAgICAgIGBjYW4ndCBwYXNzIGEgcmVhZCBjb3VudCBieSByZWZlcmVuY2UuICcke1xuICAgICAgICAgICAgICAgICAgdGFyZ2V0UGF0aC5kb3RTZXBhcmF0ZWRDb21wb25lbnRzXG4gICAgICAgICAgICAgICAgfScgaXMgYSBrbm90L3N0aXRjaC9sYWJlbCwgYnV0ICcke1xuICAgICAgICAgICAgICAgICAgdGhpcy50YXJnZXQhLmRvdFNlcGFyYXRlZENvbXBvbmVudHNcbiAgICAgICAgICAgICAgICB9JyByZXF1aXJlcyB0aGUgbmFtZSBvZiBhIFZBUiB0byBiZSBwYXNzZWQuYFxuICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCB2YXJQb2ludGVyID0gbmV3IFZhcmlhYmxlUG9pbnRlclZhbHVlKHZhclJlZi5uYW1lKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5BZGRDb250ZW50KHZhclBvaW50ZXIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBOb3JtYWwgdmFsdWUgYmVpbmcgcGFzc2VkOiBldmFsdWF0ZSBpdCBhcyBub3JtYWxcbiAgICAgICAgICAgIGFyZ1RvUGFzcy5HZW5lcmF0ZUludG9Db250YWluZXIoY29udGFpbmVyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBGdW5jdGlvbiBjYWxscyB3ZXJlIGFscmVhZHkgaW4gYW4gZXZhbHVhdGlvbiBjb250ZXh0XG4gICAgICAgIGlmICghdGhpcy5pc0Z1bmN0aW9uQ2FsbCkge1xuICAgICAgICAgIGNvbnRhaW5lci5BZGRDb250ZW50KFJ1bnRpbWVDb250cm9sQ29tbWFuZC5FdmFsRW5kKCkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFN0YXJ0aW5nIGEgdGhyZWFkPyBBIGJpdCBsaWtlIGEgcHVzaCB0byB0aGUgY2FsbCBzdGFjayBiZWxvdy4uLiBidXQgbm90LlxuICAgICAgLy8gSXQgc29ydCBvZiBwdXRzIHRoZSBjYWxsIHN0YWNrIG9uIGEgdGhyZWFkIHN0YWNrIChhcmdoISkgLSBmb3JrcyB0aGUgZnVsbCBmbG93LlxuICAgICAgaWYgKHRoaXMuaXNUaHJlYWQpIHtcbiAgICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQoUnVudGltZUNvbnRyb2xDb21tYW5kLlN0YXJ0VGhyZWFkKCkpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLmlzRnVuY3Rpb25DYWxsIHx8IHRoaXMuaXNUdW5uZWwpIHtcbiAgICAgICAgLy8gSWYgdGhpcyBkaXZlcnQgaXMgYSBmdW5jdGlvbiBjYWxsLCB0dW5uZWwsIHdlIHB1c2ggdG8gdGhlIGNhbGwgc3RhY2tcbiAgICAgICAgLy8gc28gd2UgY2FuIHJldHVybiBhZ2FpblxuICAgICAgICB0aGlzLnJ1bnRpbWVEaXZlcnQucHVzaGVzVG9TdGFjayA9IHRydWU7XG4gICAgICAgIHRoaXMucnVudGltZURpdmVydC5zdGFja1B1c2hUeXBlID0gdGhpcy5pc0Z1bmN0aW9uQ2FsbFxuICAgICAgICAgID8gUHVzaFBvcFR5cGUuRnVuY3Rpb25cbiAgICAgICAgICA6IFB1c2hQb3BUeXBlLlR1bm5lbDtcbiAgICAgIH1cblxuICAgICAgLy8gSnVtcCBpbnRvIHRoZSBcImZ1bmN0aW9uXCIgKGtub3Qvc3RpdGNoKVxuICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQodGhpcy5ydW50aW1lRGl2ZXJ0KTtcblxuICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICAvLyBTaW1wbGUgZGl2ZXJ0XG4gICAgcmV0dXJuIHRoaXMucnVudGltZURpdmVydDtcbiAgfTtcblxuICAvLyBXaGVuIHRoZSBkaXZlcnQgaXMgdG8gYSB0YXJnZXQgdGhhdCdzIGFjdHVhbGx5IGEgdmFyaWFibGUgbmFtZVxuICAvLyByYXRoZXIgdGhhbiBhbiBleHBsaWNpdCBrbm90L3N0aXRjaCBuYW1lLCB0cnkgaW50ZXJwcmV0dGluZyBpdFxuICAvLyBhcyBzdWNoIGJ5IGdldHRpbmcgdGhlIHZhcmlhYmxlIG5hbWUuXG4gIHB1YmxpYyByZWFkb25seSBQYXRoQXNWYXJpYWJsZU5hbWUgPSAoKSA9PlxuICAgIHRoaXMudGFyZ2V0ID8gdGhpcy50YXJnZXQuZmlyc3RDb21wb25lbnQgOiBudWxsO1xuXG4gIHB1YmxpYyByZWFkb25seSBSZXNvbHZlVGFyZ2V0Q29udGVudCA9ICgpOiB2b2lkID0+IHtcbiAgICBpZiAodGhpcy5pc0VtcHR5IHx8IHRoaXMuaXNFbmQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy50YXJnZXRDb250ZW50ID09PSBudWxsKSB7XG4gICAgICAvLyBJcyB0YXJnZXQgb2YgdGhpcyBkaXZlcnQgYSB2YXJpYWJsZSBuYW1lIHRoYXQgd2lsbCBiZSBkZS1yZWZlcmVuY2VkXG4gICAgICAvLyBhdCBydW50aW1lPyBJZiBzbywgdGhlcmUgd29uJ3QgYmUgYW55IGZ1cnRoZXIgcmVmZXJlbmNlIHJlc29sdXRpb25cbiAgICAgIC8vIHdlIGNhbiBkbyBhdCB0aGlzIHBvaW50LlxuICAgICAgbGV0IHZhcmlhYmxlVGFyZ2V0TmFtZSA9IHRoaXMuUGF0aEFzVmFyaWFibGVOYW1lKCk7XG4gICAgICBpZiAodmFyaWFibGVUYXJnZXROYW1lICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGZsb3dCYXNlU2NvcGUgPSBhc09yTnVsbChDbG9zZXN0Rmxvd0Jhc2UodGhpcyksIEZsb3dCYXNlKTtcbiAgICAgICAgaWYgKGZsb3dCYXNlU2NvcGUpIHtcbiAgICAgICAgICBjb25zdCByZXNvbHZlUmVzdWx0ID0gZmxvd0Jhc2VTY29wZS5SZXNvbHZlVmFyaWFibGVXaXRoTmFtZShcbiAgICAgICAgICAgIHZhcmlhYmxlVGFyZ2V0TmFtZSxcbiAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgaWYgKHJlc29sdmVSZXN1bHQuZm91bmQpIHtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBmbG93IHdhcyB0eXBlZCBjb3JyZWN0bHksIGdpdmVuIHRoYXQgd2Uga25vdyB0aGF0IHRoaXNcbiAgICAgICAgICAgIC8vIGlzIG1lYW50IHRvIGJlIGEgZGl2ZXJ0IHRhcmdldFxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICByZXNvbHZlUmVzdWx0LmlzQXJndW1lbnQgJiZcbiAgICAgICAgICAgICAgcmVzb2x2ZVJlc3VsdC5vd25lckZsb3cgJiZcbiAgICAgICAgICAgICAgcmVzb2x2ZVJlc3VsdC5vd25lckZsb3cuYXJnc1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGxldCBhcmd1bWVudCA9IHJlc29sdmVSZXN1bHQub3duZXJGbG93LmFyZ3MuZmluZChcbiAgICAgICAgICAgICAgICAoYSkgPT4gYS5pZGVudGlmaWVyPy5uYW1lID09IHZhcmlhYmxlVGFyZ2V0TmFtZVxuICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgIGlmIChhcmd1bWVudCAmJiAhYXJndW1lbnQuaXNEaXZlcnRUYXJnZXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLkVycm9yKFxuICAgICAgICAgICAgICAgICAgYFNpbmNlICcke2FyZ3VtZW50LmlkZW50aWZpZXJ9JyBpcyB1c2VkIGFzIGEgdmFyaWFibGUgZGl2ZXJ0IHRhcmdldCAob24gJHt0aGlzLmRlYnVnTWV0YWRhdGF9KSwgaXQgc2hvdWxkIGJlIG1hcmtlZCBhczogLT4gJHthcmd1bWVudC5pZGVudGlmaWVyfWAsXG4gICAgICAgICAgICAgICAgICByZXNvbHZlUmVzdWx0Lm93bmVyRmxvd1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5ydW50aW1lRGl2ZXJ0LnZhcmlhYmxlRGl2ZXJ0TmFtZSA9IHZhcmlhYmxlVGFyZ2V0TmFtZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLnRhcmdldCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy50YXJnZXRDb250ZW50ID0gdGhpcy50YXJnZXQuUmVzb2x2ZUZyb21Db250ZXh0KHRoaXMpO1xuICAgIH1cbiAgfTtcblxuICBwdWJsaWMgUmVzb2x2ZVJlZmVyZW5jZXMoY29udGV4dDogU3RvcnkpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5pc0VtcHR5IHx8IHRoaXMuaXNFbmQgfHwgdGhpcy5pc0RvbmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnJ1bnRpbWVEaXZlcnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnRhcmdldENvbnRlbnQpIHtcbiAgICAgIHRoaXMucnVudGltZURpdmVydC50YXJnZXRQYXRoID0gdGhpcy50YXJnZXRDb250ZW50LnJ1bnRpbWVQYXRoO1xuICAgIH1cblxuICAgIC8vIFJlc29sdmUgY2hpbGRyZW4gKHRoZSBhcmd1bWVudHMpXG4gICAgc3VwZXIuUmVzb2x2ZVJlZmVyZW5jZXMoY29udGV4dCk7XG5cbiAgICAvLyBNYXkgYmUgbnVsbCBpZiBpdCdzIGEgYnVpbHQgaW4gZnVuY3Rpb24gKGUuZy4gVFVSTlNfU0lOQ0UpXG4gICAgLy8gb3IgaWYgaXQncyBhIHZhcmlhYmxlIHRhcmdldC5cbiAgICBsZXQgdGFyZ2V0RmxvdyA9IGFzT3JOdWxsKHRoaXMudGFyZ2V0Q29udGVudCwgRmxvd0Jhc2UpO1xuICAgIGlmICh0YXJnZXRGbG93KSB7XG4gICAgICBpZiAoIXRhcmdldEZsb3cuaXNGdW5jdGlvbiAmJiB0aGlzLmlzRnVuY3Rpb25DYWxsKSB7XG4gICAgICAgIHN1cGVyLkVycm9yKFxuICAgICAgICAgIGAke3RhcmdldEZsb3cuaWRlbnRpZmllcn0gaGFzbid0IGJlZW4gbWFya2VkIGFzIGEgZnVuY3Rpb24sIGJ1dCBpdCdzIGJlaW5nIGNhbGxlZCBhcyBvbmUuIERvIHlvdSBuZWVkIHRvIGRlY2xhcmUgdGhlIGtub3QgYXMgJz09IGZ1bmN0aW9uICR7dGFyZ2V0Rmxvdy5pZGVudGlmaWVyfSA9PSc/YFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgdGFyZ2V0Rmxvdy5pc0Z1bmN0aW9uICYmXG4gICAgICAgICF0aGlzLmlzRnVuY3Rpb25DYWxsICYmXG4gICAgICAgICEodGhpcy5wYXJlbnQgaW5zdGFuY2VvZiBEaXZlcnRUYXJnZXQpXG4gICAgICApIHtcbiAgICAgICAgc3VwZXIuRXJyb3IoXG4gICAgICAgICAgdGFyZ2V0Rmxvdy5pZGVudGlmaWVyICtcbiAgICAgICAgICAgIFwiIGNhbid0IGJlIGRpdmVydGVkIHRvLiBJdCBjYW4gb25seSBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbiBzaW5jZSBpdCdzIGJlZW4gbWFya2VkIGFzIHN1Y2g6ICdcIiArXG4gICAgICAgICAgICB0YXJnZXRGbG93LmlkZW50aWZpZXIgK1xuICAgICAgICAgICAgXCIoLi4uKSdcIlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoZWNrIHZhbGlkaXR5IG9mIHRhcmdldCBjb250ZW50XG4gICAgY29uc3QgdGFyZ2V0V2FzRm91bmQgPSB0aGlzLnRhcmdldENvbnRlbnQgIT09IG51bGw7XG4gICAgbGV0IGlzQnVpbHRJbjogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGxldCBpc0V4dGVybmFsOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBpZiAoIXRoaXMudGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMudGFyZ2V0Lm51bWJlck9mQ29tcG9uZW50cyA9PT0gMSkge1xuICAgICAgaWYgKCF0aGlzLnRhcmdldC5maXJzdENvbXBvbmVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgIH1cblxuICAgICAgLy8gQnVpbHRJbiBtZWFucyBUVVJOU19TSU5DRSwgQ0hPSUNFX0NPVU5ULCBSQU5ET00gb3IgU0VFRF9SQU5ET01cbiAgICAgIGlzQnVpbHRJbiA9IEZ1bmN0aW9uQ2FsbC5Jc0J1aWx0SW4odGhpcy50YXJnZXQuZmlyc3RDb21wb25lbnQpO1xuXG4gICAgICAvLyBDbGllbnQtYm91bmQgZnVuY3Rpb24/XG4gICAgICBpc0V4dGVybmFsID0gY29udGV4dC5Jc0V4dGVybmFsKHRoaXMudGFyZ2V0LmZpcnN0Q29tcG9uZW50KTtcblxuICAgICAgaWYgKGlzQnVpbHRJbiB8fCBpc0V4dGVybmFsKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0Z1bmN0aW9uQ2FsbCkge1xuICAgICAgICAgIHN1cGVyLkVycm9yKFxuICAgICAgICAgICAgYCR7dGhpcy50YXJnZXQuZmlyc3RDb21wb25lbnR9IG11c3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb246IH4gJHt0aGlzLnRhcmdldC5maXJzdENvbXBvbmVudH0oKWBcbiAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzRXh0ZXJuYWwpIHtcbiAgICAgICAgICB0aGlzLnJ1bnRpbWVEaXZlcnQuaXNFeHRlcm5hbCA9IHRydWU7XG4gICAgICAgICAgaWYgKHRoaXMuYXJncyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5ydW50aW1lRGl2ZXJ0LmV4dGVybmFsQXJncyA9IHRoaXMuYXJncy5sZW5ndGg7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5ydW50aW1lRGl2ZXJ0LnB1c2hlc1RvU3RhY2sgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLnJ1bnRpbWVEaXZlcnQudGFyZ2V0UGF0aCA9IG5ldyBSdW50aW1lUGF0aChcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LmZpcnN0Q29tcG9uZW50XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIHRoaXMuQ2hlY2tFeHRlcm5hbEFyZ3VtZW50VmFsaWRpdHkoY29udGV4dCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVmFyaWFibGUgdGFyZ2V0P1xuICAgIGlmICh0aGlzLnJ1bnRpbWVEaXZlcnQudmFyaWFibGVEaXZlcnROYW1lICE9IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRhcmdldFdhc0ZvdW5kICYmICFpc0J1aWx0SW4gJiYgIWlzRXh0ZXJuYWwpIHtcbiAgICAgIHRoaXMuRXJyb3IoYHRhcmdldCBub3QgZm91bmQ6ICcke3RoaXMudGFyZ2V0fSdgKTtcbiAgICB9XG4gIH1cblxuICAvLyBSZXR1cm5zIGZhbHNlIGlmIHRoZXJlJ3MgYW4gZXJyb3JcbiAgcHVibGljIHJlYWRvbmx5IENoZWNrQXJndW1lbnRWYWxpZGl0eSA9ICgpOiB2b2lkID0+IHtcbiAgICBpZiAodGhpcy5pc0VtcHR5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQXJndW1lbnQgcGFzc2luZzogQ2hlY2sgZm9yIGVycm9ycyBpbiBudW1iZXIgb2YgYXJndW1lbnRzXG4gICAgbGV0IG51bUFyZ3MgPSAwO1xuICAgIGlmICh0aGlzLmFyZ3MgIT09IG51bGwgJiYgdGhpcy5hcmdzLmxlbmd0aCA+IDApIHtcbiAgICAgIG51bUFyZ3MgPSB0aGlzLmFyZ3MubGVuZ3RoO1xuICAgIH1cblxuICAgIC8vIE1pc3NpbmcgY29udGVudD9cbiAgICAvLyBDYW4ndCBjaGVjayBhcmd1bWVudHMgcHJvcGVybHkuIEl0J2xsIGJlIGR1ZSB0byBzb21lXG4gICAgLy8gb3RoZXIgZXJyb3IgdGhvdWdoLCBzbyBhbHRob3VnaCB0aGVyZSdzIGEgcHJvYmxlbSBhbmRcbiAgICAvLyB3ZSByZXBvcnQgZmFsc2UsIHdlIGRvbid0IG5lZWQgdG8gcmVwb3J0IGEgc3BlY2lmaWMgZXJyb3IuXG4gICAgLy8gSXQgbWF5IGFsc28gYmUgYmVjYXVzZSBpdCdzIGEgdmFsaWQgY2FsbCB0byBhbiBleHRlcm5hbFxuICAgIC8vIGZ1bmN0aW9uLCB0aGF0IHdlIGNoZWNrIGF0IHRoZSByZXNvbHZlIHN0YWdlLlxuICAgIGlmICh0aGlzLnRhcmdldENvbnRlbnQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0YXJnZXRGbG93ID0gYXNPck51bGwodGhpcy50YXJnZXRDb250ZW50LCBGbG93QmFzZSk7XG5cbiAgICAvLyBObyBlcnJvciwgY3Jpa2V5IVxuICAgIGlmIChudW1BcmdzID09PSAwICYmICh0YXJnZXRGbG93ID09PSBudWxsIHx8ICF0YXJnZXRGbG93Lmhhc1BhcmFtZXRlcnMpKSB7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmICh0YXJnZXRGbG93ID09PSBudWxsICYmIG51bUFyZ3MgPiAwKSB7XG4gICAgICB0aGlzLkVycm9yKFxuICAgICAgICBcInRhcmdldCBuZWVkcyB0byBiZSBhIGtub3Qgb3Igc3RpdGNoIGluIG9yZGVyIHRvIHBhc3MgYXJndW1lbnRzXCJcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIHRhcmdldEZsb3cgIT09IG51bGwgJiZcbiAgICAgICh0YXJnZXRGbG93LmFyZ3MgPT09IG51bGwgfHwgKCF0YXJnZXRGbG93LmFyZ3MgJiYgbnVtQXJncyA+IDApKVxuICAgICkge1xuICAgICAgdGhpcy5FcnJvcihgdGFyZ2V0ICgke3RhcmdldEZsb3cubmFtZX0pIGRvZXNuJ3QgdGFrZSBwYXJhbWV0ZXJzYCk7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmICh0aGlzLnBhcmVudCBpbnN0YW5jZW9mIERpdmVydFRhcmdldCkge1xuICAgICAgaWYgKG51bUFyZ3MgPiAwKSB7XG4gICAgICAgIHRoaXMuRXJyb3IoYGNhbid0IHN0b3JlIGFyZ3VtZW50cyBpbiBhIGRpdmVydCB0YXJnZXQgdmFyaWFibGVgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBhcmFtQ291bnQgPSB0YXJnZXRGbG93IS5hcmdzIS5sZW5ndGg7XG4gICAgaWYgKHBhcmFtQ291bnQgIT09IG51bUFyZ3MpIHtcbiAgICAgIGxldCBidXRDbGF1c2U6IHN0cmluZztcbiAgICAgIGlmIChudW1BcmdzID09PSAwKSB7XG4gICAgICAgIGJ1dENsYXVzZSA9IFwiYnV0IHRoZXJlIHdlcmVuJ3QgYW55IHBhc3NlZCB0byBpdFwiO1xuICAgICAgfSBlbHNlIGlmIChudW1BcmdzIDwgcGFyYW1Db3VudCkge1xuICAgICAgICBidXRDbGF1c2UgPSBgYnV0IG9ubHkgZ290ICR7bnVtQXJnc31gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnV0Q2xhdXNlID0gYGJ1dCBnb3QgJHtudW1BcmdzfWA7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgIGB0byAnJHtcbiAgICAgICAgICB0YXJnZXRGbG93IS5pZGVudGlmaWVyXG4gICAgICAgIH0nIHJlcXVpcmVzICR7cGFyYW1Db3VudH0gYXJndW1lbnRzLCAke2J1dENsYXVzZX1gXG4gICAgICApO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTGlnaHQgdHlwZS1jaGVja2luZyBmb3IgZGl2ZXJ0IHRhcmdldCBhcmd1bWVudHNcbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgcGFyYW1Db3VudDsgKytpaSkge1xuICAgICAgY29uc3QgZmxvd0FyZzogQXJndW1lbnQgPSB0YXJnZXRGbG93IS5hcmdzIVtpaV07XG4gICAgICBjb25zdCBkaXZBcmdFeHByOiBFeHByZXNzaW9uID0gdGhpcy5hcmdzW2lpXTtcblxuICAgICAgLy8gRXhwZWN0aW5nIGEgZGl2ZXJ0IHRhcmdldCBhcyBhbiBhcmd1bWVudCwgbGV0J3MgZG8gc29tZSBiYXNpYyB0eXBlIGNoZWNraW5nXG4gICAgICBpZiAoZmxvd0FyZy5pc0RpdmVydFRhcmdldCkge1xuICAgICAgICAvLyBOb3QgcGFzc2luZyBhIGRpdmVydCB0YXJnZXQgb3IgYW55IGtpbmQgb2YgdmFyaWFibGUgcmVmZXJlbmNlP1xuICAgICAgICBsZXQgdmFyUmVmID0gYXNPck51bGwoZGl2QXJnRXhwciwgVmFyaWFibGVSZWZlcmVuY2UpO1xuICAgICAgICBpZiAoIShkaXZBcmdFeHByIGluc3RhbmNlb2YgRGl2ZXJ0VGFyZ2V0KSAmJiB2YXJSZWYgPT09IG51bGwpIHtcbiAgICAgICAgICB0aGlzLkVycm9yKFxuICAgICAgICAgICAgYFRhcmdldCAnJHtcbiAgICAgICAgICAgICAgdGFyZ2V0RmxvdyEuaWRlbnRpZmllclxuICAgICAgICAgICAgfScgZXhwZWN0cyBhIGRpdmVydCB0YXJnZXQgZm9yIHRoZSBwYXJhbWV0ZXIgbmFtZWQgLT4gJHtcbiAgICAgICAgICAgICAgZmxvd0FyZy5pZGVudGlmaWVyXG4gICAgICAgICAgICB9IGJ1dCBzYXcgJHtkaXZBcmdFeHByfWAsXG4gICAgICAgICAgICBkaXZBcmdFeHByXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmICh2YXJSZWYpIHtcbiAgICAgICAgICAvLyBQYXNzaW5nICdhJyBpbnN0ZWFkIG9mICctPiBhJz9cbiAgICAgICAgICAvLyBpLmUuIHJlYWQgY291bnQgaW5zdGVhZCBvZiBkaXZlcnQgdGFyZ2V0XG4gICAgICAgICAgLy8gVW5mb3J0dW5hdGVseSBoYXZlIHRvIG1hbnVhbGx5IHJlc29sdmUgaGVyZSBzaW5jZSB3ZSdyZSBzdGlsbCBpbiBjb2RlIGdlblxuICAgICAgICAgIGNvbnN0IGtub3RDb3VudFBhdGggPSBuZXcgUGF0aCh2YXJSZWYucGF0aElkZW50aWZpZXJzKTtcbiAgICAgICAgICBjb25zdCB0YXJnZXRGb3JDb3VudDogUGFyc2VkT2JqZWN0IHwgbnVsbCA9XG4gICAgICAgICAgICBrbm90Q291bnRQYXRoLlJlc29sdmVGcm9tQ29udGV4dCh2YXJSZWYpO1xuICAgICAgICAgIGlmICh0YXJnZXRGb3JDb3VudCkge1xuICAgICAgICAgICAgdGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgYFBhc3NpbmcgcmVhZCBjb3VudCBvZiAnJHtrbm90Q291bnRQYXRoLmRvdFNlcGFyYXRlZENvbXBvbmVudHN9JyBpbnN0ZWFkIG9mIGEgZGl2ZXJ0IHRhcmdldC4gWW91IHByb2JhYmx5IG1lYW50ICcke2tub3RDb3VudFBhdGh9J2BcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRhcmdldEZsb3cgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgIFwiQ2FuJ3QgY2FsbCBhcyBhIGZ1bmN0aW9uIG9yIHdpdGggYXJndW1lbnRzIHVubGVzcyBpdCdzIGEga25vdCBvciBzdGl0Y2hcIlxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm47XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IENoZWNrRXh0ZXJuYWxBcmd1bWVudFZhbGlkaXR5ID0gKGNvbnRleHQ6IFN0b3J5KTogdm9pZCA9PiB7XG4gICAgY29uc3QgZXh0ZXJuYWxOYW1lOiBzdHJpbmcgfCBudWxsID0gdGhpcy50YXJnZXRcbiAgICAgID8gdGhpcy50YXJnZXQuZmlyc3RDb21wb25lbnRcbiAgICAgIDogbnVsbDtcbiAgICBjb25zdCBleHRlcm5hbCA9IGNvbnRleHQuZXh0ZXJuYWxzLmdldChleHRlcm5hbE5hbWUgYXMgc3RyaW5nKTtcbiAgICBpZiAoIWV4dGVybmFsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJleHRlcm5hbCBub3QgZm91bmRcIik7XG4gICAgfVxuXG4gICAgY29uc3QgZXh0ZXJuYWxBcmdDb3VudDogbnVtYmVyID0gZXh0ZXJuYWwuYXJndW1lbnROYW1lcy5sZW5ndGg7XG4gICAgbGV0IG93bkFyZ0NvdW50ID0gMDtcbiAgICBpZiAodGhpcy5hcmdzKSB7XG4gICAgICBvd25BcmdDb3VudCA9IHRoaXMuYXJncy5sZW5ndGg7XG4gICAgfVxuXG4gICAgaWYgKG93bkFyZ0NvdW50ICE9PSBleHRlcm5hbEFyZ0NvdW50KSB7XG4gICAgICB0aGlzLkVycm9yKFxuICAgICAgICBgaW5jb3JyZWN0IG51bWJlciBvZiBhcmd1bWVudHMgc2VudCB0byBleHRlcm5hbCBmdW5jdGlvbiAnJHtleHRlcm5hbE5hbWV9Jy4gRXhwZWN0ZWQgJHtleHRlcm5hbEFyZ0NvdW50fSBidXQgZ290ICR7b3duQXJnQ291bnR9YFxuICAgICAgKTtcbiAgICB9XG4gIH07XG5cbiAgcHVibGljIEVycm9yKFxuICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBzb3VyY2U6IFBhcnNlZE9iamVjdCB8IG51bGwgPSBudWxsLFxuICAgIGlzV2FybmluZzogYm9vbGVhbiA9IGZhbHNlXG4gICk6IHZvaWQge1xuICAgIC8vIENvdWxkIGJlIGdldHRpbmcgYW4gZXJyb3IgZnJvbSBhIG5lc3RlZCBEaXZlcnRcbiAgICBpZiAoc291cmNlICE9PSB0aGlzICYmIHNvdXJjZSkge1xuICAgICAgc3VwZXIuRXJyb3IobWVzc2FnZSwgc291cmNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc0Z1bmN0aW9uQ2FsbCkge1xuICAgICAgc3VwZXIuRXJyb3IoYEZ1bmN0aW9uIGNhbGwgJHttZXNzYWdlfWAsIHNvdXJjZSwgaXNXYXJuaW5nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VwZXIuRXJyb3IoYERpdmVydCAke21lc3NhZ2V9YCwgc291cmNlLCBpc1dhcm5pbmcpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB0b1N0cmluZyA9ICgpOiBzdHJpbmcgPT4ge1xuICAgIGxldCByZXR1cm5TdHJpbmcgPSBcIlwiO1xuICAgIGlmICh0aGlzLnRhcmdldCAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuU3RyaW5nICs9IHRoaXMudGFyZ2V0LnRvU3RyaW5nKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBcIi0+IDxlbXB0eSBkaXZlcnQ+XCI7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNUdW5uZWwpIHtcbiAgICAgIHJldHVyblN0cmluZyArPSBcIiAtPlwiO1xuICAgIH1cbiAgICBpZiAodGhpcy5pc0Z1bmN0aW9uQ2FsbCkge1xuICAgICAgcmV0dXJuU3RyaW5nICs9IFwiICgpXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldHVyblN0cmluZztcbiAgfTtcbn1cbiIsImltcG9ydCB7IERpdmVydCBhcyBSdW50aW1lRGl2ZXJ0IH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9EaXZlcnRcIjtcbmltcG9ydCB7IElua09iamVjdCBhcyBSdW50aW1lT2JqZWN0IH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9PYmplY3RcIjtcblxuZXhwb3J0IGNsYXNzIEdhdGhlclBvaW50VG9SZXNvbHZlIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGRpdmVydDogUnVudGltZURpdmVydCxcbiAgICBwdWJsaWMgdGFyZ2V0UnVudGltZU9iajogUnVudGltZU9iamVjdFxuICApIHt9XG59XG4iLCJpbXBvcnQgeyBEaXZlcnQgYXMgUnVudGltZURpdmVydCB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvRGl2ZXJ0XCI7XG5pbXBvcnQgeyBJbmtPYmplY3QgYXMgUnVudGltZU9iamVjdCB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvT2JqZWN0XCI7XG5cbmV4cG9ydCBjbGFzcyBTZXF1ZW5jZURpdmVydFRvUmVzb2x2ZSB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBkaXZlcnQ6IFJ1bnRpbWVEaXZlcnQsXG4gICAgcHVibGljIHRhcmdldENvbnRlbnQ6IFJ1bnRpbWVPYmplY3RcbiAgKSB7fVxufVxuIiwiZXhwb3J0IGVudW0gU2VxdWVuY2VUeXBlIHtcbiAgU3RvcHBpbmcgPSAxLCAvLyBkZWZhdWx0XG4gIEN5Y2xlID0gMixcbiAgU2h1ZmZsZSA9IDQsXG4gIE9uY2UgPSA4LFxufVxuIiwiaW1wb3J0IHsgQ29udGVudExpc3QgfSBmcm9tIFwiLi4vQ29udGVudExpc3RcIjtcbmltcG9ydCB7IENvbnRhaW5lciBhcyBSdW50aW1lQ29udGFpbmVyIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9Db250YWluZXJcIjtcbmltcG9ydCB7IENvbnRyb2xDb21tYW5kIGFzIFJ1bnRpbWVDb250cm9sQ29tbWFuZCB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvQ29udHJvbENvbW1hbmRcIjtcbmltcG9ydCB7IERpdmVydCBhcyBSdW50aW1lRGl2ZXJ0IH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9EaXZlcnRcIjtcbmltcG9ydCB7IEludFZhbHVlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9WYWx1ZVwiO1xuaW1wb3J0IHsgTmF0aXZlRnVuY3Rpb25DYWxsIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9OYXRpdmVGdW5jdGlvbkNhbGxcIjtcbmltcG9ydCB7IFBhcnNlZE9iamVjdCB9IGZyb20gXCIuLi9PYmplY3RcIjtcbmltcG9ydCB7IElua09iamVjdCBhcyBSdW50aW1lT2JqZWN0IH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9PYmplY3RcIjtcbmltcG9ydCB7IFNlcXVlbmNlRGl2ZXJ0VG9SZXNvbHZlIH0gZnJvbSBcIi4vU2VxdWVuY2VEaXZlcnRUb1Jlc29sdmVcIjtcbmltcG9ydCB7IFNlcXVlbmNlVHlwZSB9IGZyb20gXCIuL1NlcXVlbmNlVHlwZVwiO1xuaW1wb3J0IHsgU3RvcnkgfSBmcm9tIFwiLi4vU3RvcnlcIjtcbmltcG9ydCB7IFdlYXZlIH0gZnJvbSBcIi4uL1dlYXZlXCI7XG5cbmV4cG9ydCBjbGFzcyBTZXF1ZW5jZSBleHRlbmRzIFBhcnNlZE9iamVjdCB7XG4gIHByaXZhdGUgX3NlcXVlbmNlRGl2ZXJ0c1RvUmVzb2x2ZTogU2VxdWVuY2VEaXZlcnRUb1Jlc29sdmVbXSA9IFtdO1xuXG4gIHB1YmxpYyBzZXF1ZW5jZUVsZW1lbnRzOiBQYXJzZWRPYmplY3RbXTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBlbGVtZW50Q29udGVudExpc3RzOiBDb250ZW50TGlzdFtdLFxuICAgIHB1YmxpYyByZWFkb25seSBzZXF1ZW5jZVR5cGU6IFNlcXVlbmNlVHlwZVxuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5zZXF1ZW5jZVR5cGUgPSBzZXF1ZW5jZVR5cGU7XG4gICAgdGhpcy5zZXF1ZW5jZUVsZW1lbnRzID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGVsZW1lbnRDb250ZW50TGlzdCBvZiBlbGVtZW50Q29udGVudExpc3RzKSB7XG4gICAgICBjb25zdCBjb250ZW50T2JqcyA9IGVsZW1lbnRDb250ZW50TGlzdC5jb250ZW50O1xuICAgICAgbGV0IHNlcUVsT2JqZWN0OiBQYXJzZWRPYmplY3QgfCBudWxsID0gbnVsbDtcblxuICAgICAgLy8gRG9uJ3QgYXR0ZW1wdCB0byBjcmVhdGUgYSB3ZWF2ZSBmb3IgdGhlIHNlcXVlbmNlIGVsZW1lbnRcbiAgICAgIC8vIGlmIHRoZSBjb250ZW50IGxpc3QgaXMgZW1wdHkuIFdlYXZlcyBkb24ndCBsaWtlIGl0IVxuICAgICAgaWYgKGNvbnRlbnRPYmpzID09PSBudWxsIHx8IGNvbnRlbnRPYmpzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBzZXFFbE9iamVjdCA9IGVsZW1lbnRDb250ZW50TGlzdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlcUVsT2JqZWN0ID0gbmV3IFdlYXZlKGNvbnRlbnRPYmpzKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXF1ZW5jZUVsZW1lbnRzLnB1c2goc2VxRWxPYmplY3QpO1xuICAgICAgdGhpcy5BZGRDb250ZW50KHNlcUVsT2JqZWN0KTtcbiAgICB9XG4gIH1cblxuICBnZXQgdHlwZU5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJTZXF1ZW5jZVwiO1xuICB9XG5cbiAgLy8gR2VuZXJhdGUgcnVudGltZSBjb2RlIHRoYXQgbG9va3MgbGlrZTpcbiAgLy9cbiAgLy8gICBjaG9zZW5JbmRleCA9IE1JTihzZXF1ZW5jZSBjb3VudGVyLCBudW0gZWxlbWVudHMpIGUuZy4gZm9yIFwiU3RvcHBpbmdcIlxuICAvLyAgIGlmIGNob3NlbkluZGV4ID09IDAsIGRpdmVydCB0byBzMFxuICAvLyAgIGlmIGNob3NlbkluZGV4ID09IDEsIGRpdmVydCB0byBzMSAgW2V0Y11cbiAgLy9cbiAgLy8gICAtIHMwOlxuICAvLyAgICAgIDxjb250ZW50IGZvciBzZXF1ZW5jZSBlbGVtZW50PlxuICAvLyAgICAgIGRpdmVydCB0byBuby1vcFxuICAvLyAgIC0gczE6XG4gIC8vICAgICAgPGNvbnRlbnQgZm9yIHNlcXVlbmNlIGVsZW1lbnQ+XG4gIC8vICAgICAgZGl2ZXJ0IHRvIG5vLW9wXG4gIC8vICAgLSBzMjpcbiAgLy8gICAgICBlbXB0eSBicmFuY2ggaWYgdXNpbmcgXCJvbmNlXCJcbiAgLy8gICAgICBkaXZlcnQgdG8gbm8tb3BcbiAgLy9cbiAgLy8gICAgbm8tb3BcbiAgLy9cbiAgcHVibGljIHJlYWRvbmx5IEdlbmVyYXRlUnVudGltZU9iamVjdCA9ICgpOiBSdW50aW1lT2JqZWN0ID0+IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgUnVudGltZUNvbnRhaW5lcigpO1xuICAgIGNvbnRhaW5lci52aXNpdHNTaG91bGRCZUNvdW50ZWQgPSB0cnVlO1xuICAgIGNvbnRhaW5lci5jb3VudGluZ0F0U3RhcnRPbmx5ID0gdHJ1ZTtcblxuICAgIHRoaXMuX3NlcXVlbmNlRGl2ZXJ0c1RvUmVzb2x2ZSA9IFtdO1xuXG4gICAgLy8gR2V0IHNlcXVlbmNlIHJlYWQgY291bnRcbiAgICBjb250YWluZXIuQWRkQ29udGVudChSdW50aW1lQ29udHJvbENvbW1hbmQuRXZhbFN0YXJ0KCkpO1xuICAgIGNvbnRhaW5lci5BZGRDb250ZW50KFJ1bnRpbWVDb250cm9sQ29tbWFuZC5WaXNpdEluZGV4KCkpO1xuXG4gICAgY29uc3Qgb25jZTogYm9vbGVhbiA9ICh0aGlzLnNlcXVlbmNlVHlwZSAmIFNlcXVlbmNlVHlwZS5PbmNlKSA+IDA7XG4gICAgY29uc3QgY3ljbGU6IGJvb2xlYW4gPSAodGhpcy5zZXF1ZW5jZVR5cGUgJiBTZXF1ZW5jZVR5cGUuQ3ljbGUpID4gMDtcbiAgICBjb25zdCBzdG9wcGluZzogYm9vbGVhbiA9ICh0aGlzLnNlcXVlbmNlVHlwZSAmIFNlcXVlbmNlVHlwZS5TdG9wcGluZykgPiAwO1xuICAgIGNvbnN0IHNodWZmbGU6IGJvb2xlYW4gPSAodGhpcy5zZXF1ZW5jZVR5cGUgJiBTZXF1ZW5jZVR5cGUuU2h1ZmZsZSkgPiAwO1xuXG4gICAgbGV0IHNlcUJyYW5jaENvdW50ID0gdGhpcy5zZXF1ZW5jZUVsZW1lbnRzLmxlbmd0aDtcbiAgICBpZiAob25jZSkge1xuICAgICAgc2VxQnJhbmNoQ291bnQgKz0gMTtcbiAgICB9XG5cbiAgICAvLyBDaG9zZW4gc2VxdWVuY2UgaW5kZXg6XG4gICAgLy8gIC0gU3RvcHBpbmc6IHRha2UgdGhlIE1JTihyZWFkIGNvdW50LCBudW0gZWxlbWVudHMgLSAxKVxuICAgIC8vICAtIE9uY2U6IHRha2UgdGhlIE1JTihyZWFkIGNvdW50LCBudW0gZWxlbWVudHMpXG4gICAgLy8gICAgKHRoZSBsYXN0IG9uZSBiZWluZyBlbXB0eSlcbiAgICBpZiAoc3RvcHBpbmcgfHwgb25jZSkge1xuICAgICAgLy92YXIgbGltaXQgPSBzdG9wcGluZyA/IHNlcUJyYW5jaENvdW50LTEgOiBzZXFCcmFuY2hDb3VudDtcbiAgICAgIGNvbnRhaW5lci5BZGRDb250ZW50KG5ldyBJbnRWYWx1ZShzZXFCcmFuY2hDb3VudCAtIDEpKTtcbiAgICAgIGNvbnRhaW5lci5BZGRDb250ZW50KE5hdGl2ZUZ1bmN0aW9uQ2FsbC5DYWxsV2l0aE5hbWUoXCJNSU5cIikpO1xuICAgIH0gZWxzZSBpZiAoY3ljbGUpIHtcbiAgICAgIC8vIC0gQ3ljbGU6IHRha2UgKHJlYWQgY291bnQgJSBudW0gZWxlbWVudHMpXG4gICAgICBjb250YWluZXIuQWRkQ29udGVudChuZXcgSW50VmFsdWUodGhpcy5zZXF1ZW5jZUVsZW1lbnRzLmxlbmd0aCkpO1xuICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQoTmF0aXZlRnVuY3Rpb25DYWxsLkNhbGxXaXRoTmFtZShcIiVcIikpO1xuICAgIH1cblxuICAgIC8vIFNodWZmbGVcbiAgICBpZiAoc2h1ZmZsZSkge1xuICAgICAgLy8gQ3JlYXRlIHBvaW50IHRvIHJldHVybiB0byB3aGVuIHNlcXVlbmNlIGlzIGNvbXBsZXRlXG4gICAgICBjb25zdCBwb3N0U2h1ZmZsZU5vT3AgPSBSdW50aW1lQ29udHJvbENvbW1hbmQuTm9PcCgpO1xuXG4gICAgICAvLyBXaGVuIHZpc2l0SW5kZXggPT0gbGFzdElkeCwgd2Ugc2tpcCB0aGUgc2h1ZmZsZVxuICAgICAgaWYgKG9uY2UgfHwgc3RvcHBpbmcpIHtcbiAgICAgICAgLy8gaWYoIHZpc2l0SW5kZXggPT0gbGFzdElkeCApIC0+IHNraXBTaHVmZmxlXG4gICAgICAgIGNvbnN0IGxhc3RJZHggPSBzdG9wcGluZ1xuICAgICAgICAgID8gdGhpcy5zZXF1ZW5jZUVsZW1lbnRzLmxlbmd0aCAtIDFcbiAgICAgICAgICA6IHRoaXMuc2VxdWVuY2VFbGVtZW50cy5sZW5ndGg7XG5cbiAgICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQoUnVudGltZUNvbnRyb2xDb21tYW5kLkR1cGxpY2F0ZSgpKTtcbiAgICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQobmV3IEludFZhbHVlKGxhc3RJZHgpKTtcbiAgICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQoTmF0aXZlRnVuY3Rpb25DYWxsLkNhbGxXaXRoTmFtZShcIj09XCIpKTtcblxuICAgICAgICBjb25zdCBza2lwU2h1ZmZsZURpdmVydCA9IG5ldyBSdW50aW1lRGl2ZXJ0KCk7XG4gICAgICAgIHNraXBTaHVmZmxlRGl2ZXJ0LmlzQ29uZGl0aW9uYWwgPSB0cnVlO1xuICAgICAgICBjb250YWluZXIuQWRkQ29udGVudChza2lwU2h1ZmZsZURpdmVydCk7XG5cbiAgICAgICAgdGhpcy5BZGREaXZlcnRUb1Jlc29sdmUoc2tpcFNodWZmbGVEaXZlcnQsIHBvc3RTaHVmZmxlTm9PcCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFRoaXMgb25lJ3MgYSBiaXQgbW9yZSBjb21wbGV4ISBDaG9vc2UgdGhlIGluZGV4IGF0IHJ1bnRpbWUuXG4gICAgICBsZXQgZWxlbWVudENvdW50VG9TaHVmZmxlID0gdGhpcy5zZXF1ZW5jZUVsZW1lbnRzLmxlbmd0aDtcbiAgICAgIGlmIChzdG9wcGluZykge1xuICAgICAgICBlbGVtZW50Q291bnRUb1NodWZmbGUgLT0gMTtcbiAgICAgIH1cblxuICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQobmV3IEludFZhbHVlKGVsZW1lbnRDb3VudFRvU2h1ZmZsZSkpO1xuICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQoUnVudGltZUNvbnRyb2xDb21tYW5kLlNlcXVlbmNlU2h1ZmZsZUluZGV4KCkpO1xuICAgICAgaWYgKG9uY2UgfHwgc3RvcHBpbmcpIHtcbiAgICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQocG9zdFNodWZmbGVOb09wKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb250YWluZXIuQWRkQ29udGVudChSdW50aW1lQ29udHJvbENvbW1hbmQuRXZhbEVuZCgpKTtcblxuICAgIC8vIENyZWF0ZSBwb2ludCB0byByZXR1cm4gdG8gd2hlbiBzZXF1ZW5jZSBpcyBjb21wbGV0ZVxuICAgIGNvbnN0IHBvc3RTZXF1ZW5jZU5vT3AgPSBSdW50aW1lQ29udHJvbENvbW1hbmQuTm9PcCgpO1xuXG4gICAgLy8gRWFjaCBvZiB0aGUgbWFpbiBzZXF1ZW5jZSBicmFuY2hlcywgYW5kIG9uZSBleHRyYSBlbXB0eSBicmFuY2ggaWZcbiAgICAvLyB3ZSBoYXZlIGEgXCJvbmNlXCIgc2VxdWVuY2UuXG4gICAgZm9yIChsZXQgZWxJbmRleCA9IDA7IGVsSW5kZXggPCBzZXFCcmFuY2hDb3VudDsgZWxJbmRleCArPSAxKSB7XG4gICAgICAvLyBUaGlzIHNlcXVlbmNlIGVsZW1lbnQ6XG4gICAgICAvLyAgaWYoIGNob3NlbkluZGV4ID09IHRoaXMgaW5kZXggKSBkaXZlcnQgdG8gdGhpcyBzZXF1ZW5jZSBlbGVtZW50XG4gICAgICAvLyBkdXBsaWNhdGUgY2hvc2VuIHNlcXVlbmNlIGluZGV4LCBzaW5jZSBpdCdsbCBiZSBjb25zdW1lZCBieSBcIj09XCJcbiAgICAgIGNvbnRhaW5lci5BZGRDb250ZW50KFJ1bnRpbWVDb250cm9sQ29tbWFuZC5FdmFsU3RhcnQoKSk7XG4gICAgICBjb250YWluZXIuQWRkQ29udGVudChSdW50aW1lQ29udHJvbENvbW1hbmQuRHVwbGljYXRlKCkpO1xuICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQobmV3IEludFZhbHVlKGVsSW5kZXgpKTtcbiAgICAgIGNvbnRhaW5lci5BZGRDb250ZW50KE5hdGl2ZUZ1bmN0aW9uQ2FsbC5DYWxsV2l0aE5hbWUoXCI9PVwiKSk7XG4gICAgICBjb250YWluZXIuQWRkQ29udGVudChSdW50aW1lQ29udHJvbENvbW1hbmQuRXZhbEVuZCgpKTtcblxuICAgICAgLy8gRGl2ZXJ0IGJyYW5jaCBmb3IgdGhpcyBzZXF1ZW5jZSBlbGVtZW50XG4gICAgICBjb25zdCBzZXF1ZW5jZURpdmVydCA9IG5ldyBSdW50aW1lRGl2ZXJ0KCk7XG4gICAgICBzZXF1ZW5jZURpdmVydC5pc0NvbmRpdGlvbmFsID0gdHJ1ZTtcbiAgICAgIGNvbnRhaW5lci5BZGRDb250ZW50KHNlcXVlbmNlRGl2ZXJ0KTtcblxuICAgICAgbGV0IGNvbnRlbnRDb250YWluZXJGb3JTZXF1ZW5jZUJyYW5jaDogUnVudGltZUNvbnRhaW5lcjtcblxuICAgICAgLy8gR2VuZXJhdGUgY29udGVudCBmb3IgdGhpcyBzZXF1ZW5jZSBlbGVtZW50XG4gICAgICBpZiAoZWxJbmRleCA8IHRoaXMuc2VxdWVuY2VFbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgZWwgPSB0aGlzLnNlcXVlbmNlRWxlbWVudHNbZWxJbmRleF07XG4gICAgICAgIGNvbnRlbnRDb250YWluZXJGb3JTZXF1ZW5jZUJyYW5jaCA9XG4gICAgICAgICAgZWwucnVudGltZU9iamVjdCBhcyBSdW50aW1lQ29udGFpbmVyO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmluYWwgZW1wdHkgYnJhbmNoIGZvciBcIm9uY2VcIiBzZXF1ZW5jZXNcbiAgICAgICAgY29udGVudENvbnRhaW5lckZvclNlcXVlbmNlQnJhbmNoID0gbmV3IFJ1bnRpbWVDb250YWluZXIoKTtcbiAgICAgIH1cblxuICAgICAgY29udGVudENvbnRhaW5lckZvclNlcXVlbmNlQnJhbmNoLm5hbWUgPSBgcyR7ZWxJbmRleH1gO1xuICAgICAgY29udGVudENvbnRhaW5lckZvclNlcXVlbmNlQnJhbmNoLkluc2VydENvbnRlbnQoXG4gICAgICAgIFJ1bnRpbWVDb250cm9sQ29tbWFuZC5Qb3BFdmFsdWF0ZWRWYWx1ZSgpLFxuICAgICAgICAwXG4gICAgICApO1xuXG4gICAgICAvLyBXaGVuIHNlcXVlbmNlIGVsZW1lbnQgaXMgY29tcGxldGUsIGRpdmVydCBiYWNrIHRvIGVuZCBvZiBzZXF1ZW5jZVxuICAgICAgY29uc3Qgc2VxQnJhbmNoQ29tcGxldGVEaXZlcnQgPSBuZXcgUnVudGltZURpdmVydCgpO1xuICAgICAgY29udGVudENvbnRhaW5lckZvclNlcXVlbmNlQnJhbmNoLkFkZENvbnRlbnQoc2VxQnJhbmNoQ29tcGxldGVEaXZlcnQpO1xuICAgICAgY29udGFpbmVyLkFkZFRvTmFtZWRDb250ZW50T25seShjb250ZW50Q29udGFpbmVyRm9yU2VxdWVuY2VCcmFuY2gpO1xuXG4gICAgICAvLyBTYXZlIHRoZSBkaXZlcnRzIGZvciByZWZlcmVuY2UgcmVzb2x1dGlvbiBsYXRlciAoaW4gUmVzb2x2ZVJlZmVyZW5jZXMpXG4gICAgICB0aGlzLkFkZERpdmVydFRvUmVzb2x2ZShcbiAgICAgICAgc2VxdWVuY2VEaXZlcnQsXG4gICAgICAgIGNvbnRlbnRDb250YWluZXJGb3JTZXF1ZW5jZUJyYW5jaFxuICAgICAgKTtcbiAgICAgIHRoaXMuQWRkRGl2ZXJ0VG9SZXNvbHZlKHNlcUJyYW5jaENvbXBsZXRlRGl2ZXJ0LCBwb3N0U2VxdWVuY2VOb09wKTtcbiAgICB9XG5cbiAgICBjb250YWluZXIuQWRkQ29udGVudChwb3N0U2VxdWVuY2VOb09wKTtcblxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IEFkZERpdmVydFRvUmVzb2x2ZSA9IChcbiAgICBkaXZlcnQ6IFJ1bnRpbWVEaXZlcnQsXG4gICAgdGFyZ2V0Q29udGVudDogUnVudGltZU9iamVjdFxuICApID0+IHtcbiAgICB0aGlzLl9zZXF1ZW5jZURpdmVydHNUb1Jlc29sdmUucHVzaChcbiAgICAgIG5ldyBTZXF1ZW5jZURpdmVydFRvUmVzb2x2ZShkaXZlcnQsIHRhcmdldENvbnRlbnQpXG4gICAgKTtcbiAgfTtcblxuICBwdWJsaWMgUmVzb2x2ZVJlZmVyZW5jZXMoY29udGV4dDogU3RvcnkpOiB2b2lkIHtcbiAgICBzdXBlci5SZXNvbHZlUmVmZXJlbmNlcyhjb250ZXh0KTtcblxuICAgIGZvciAoY29uc3QgdG9SZXNvbHZlIG9mIHRoaXMuX3NlcXVlbmNlRGl2ZXJ0c1RvUmVzb2x2ZSkge1xuICAgICAgdG9SZXNvbHZlLmRpdmVydC50YXJnZXRQYXRoID0gdG9SZXNvbHZlLnRhcmdldENvbnRlbnQucGF0aDtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IENvbnRhaW5lciBhcyBSdW50aW1lQ29udGFpbmVyIH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9Db250YWluZXJcIjtcbmltcG9ydCB7IENvbnRyb2xDb21tYW5kIGFzIFJ1bnRpbWVDb250cm9sQ29tbWFuZCB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvQ29udHJvbENvbW1hbmRcIjtcbmltcG9ydCB7IERpdmVydCB9IGZyb20gXCIuL0RpdmVydC9EaXZlcnRcIjtcbmltcG9ydCB7IERpdmVydCBhcyBSdW50aW1lRGl2ZXJ0IH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9EaXZlcnRcIjtcbmltcG9ydCB7IERpdmVydFRhcmdldFZhbHVlIH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9WYWx1ZVwiO1xuaW1wb3J0IHsgUGFyc2VkT2JqZWN0IH0gZnJvbSBcIi4vT2JqZWN0XCI7XG5pbXBvcnQgeyBJbmtPYmplY3QgYXMgUnVudGltZU9iamVjdCB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvT2JqZWN0XCI7XG5pbXBvcnQgeyBTdG9yeSB9IGZyb20gXCIuL1N0b3J5XCI7XG5pbXBvcnQgeyBWb2lkIH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9Wb2lkXCI7XG5pbXBvcnQgeyBhc09yTnVsbCB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvVHlwZUFzc2VydGlvblwiO1xuaW1wb3J0IHsgVmFyaWFibGVSZWZlcmVuY2UgfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL1ZhcmlhYmxlUmVmZXJlbmNlXCI7XG5cbmV4cG9ydCBjbGFzcyBUdW5uZWxPbndhcmRzIGV4dGVuZHMgUGFyc2VkT2JqZWN0IHtcbiAgcHJpdmF0ZSBfb3ZlcnJpZGVEaXZlcnRUYXJnZXQ6IERpdmVydFRhcmdldFZhbHVlIHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBfZGl2ZXJ0QWZ0ZXI6IERpdmVydCB8IG51bGwgPSBudWxsO1xuICBnZXQgZGl2ZXJ0QWZ0ZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RpdmVydEFmdGVyO1xuICB9XG5cbiAgc2V0IGRpdmVydEFmdGVyKHZhbHVlKSB7XG4gICAgdGhpcy5fZGl2ZXJ0QWZ0ZXIgPSB2YWx1ZTtcbiAgICBpZiAodGhpcy5fZGl2ZXJ0QWZ0ZXIpIHtcbiAgICAgIHRoaXMuQWRkQ29udGVudCh0aGlzLl9kaXZlcnRBZnRlcik7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiVHVubmVsT253YXJkc1wiO1xuICB9XG5cbiAgcHVibGljIHJlYWRvbmx5IEdlbmVyYXRlUnVudGltZU9iamVjdCA9ICgpOiBSdW50aW1lT2JqZWN0ID0+IHtcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgUnVudGltZUNvbnRhaW5lcigpO1xuXG4gICAgLy8gU2V0IG92ZXJyaWRlIHBhdGggZm9yIHR1bm5lbCBvbndhcmRzIChvciBub3RoaW5nKVxuICAgIGNvbnRhaW5lci5BZGRDb250ZW50KFJ1bnRpbWVDb250cm9sQ29tbWFuZC5FdmFsU3RhcnQoKSk7XG5cbiAgICBpZiAodGhpcy5kaXZlcnRBZnRlcikge1xuICAgICAgLy8gR2VuZXJhdGUgcnVudGltZSBvYmplY3QncyBnZW5lcmF0ZWQgY29kZSBhbmQgc3RlYWwgdGhlIGFyZ3VtZW50cyBydW50aW1lIGNvZGVcbiAgICAgIGNvbnN0IHJldHVyblJ1bnRpbWVPYmogPSB0aGlzLmRpdmVydEFmdGVyLkdlbmVyYXRlUnVudGltZU9iamVjdCgpO1xuICAgICAgY29uc3QgcmV0dXJuUnVudGltZUNvbnRhaW5lciA9IHJldHVyblJ1bnRpbWVPYmogYXMgUnVudGltZUNvbnRhaW5lcjtcbiAgICAgIGlmIChyZXR1cm5SdW50aW1lQ29udGFpbmVyKSB7XG4gICAgICAgIC8vIFN0ZWFsIGFsbCBjb2RlIGZvciBnZW5lcmF0aW5nIGFyZ3VtZW50cyBmcm9tIHRoZSBkaXZlcnRcbiAgICAgICAgY29uc3QgYXJncyA9IHRoaXMuZGl2ZXJ0QWZ0ZXIuYXJncztcbiAgICAgICAgaWYgKGFyZ3MgIT09IG51bGwgJiYgYXJncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gU3RlYWwgZXZlcnl0aGluZyBiZXR3ZW4gZXZhbCBzdGFydCBhbmQgZXZhbCBlbmRcbiAgICAgICAgICBsZXQgZXZhbFN0YXJ0ID0gLTE7XG4gICAgICAgICAgbGV0IGV2YWxFbmQgPSAtMTtcbiAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgbGV0IGlpID0gMDtcbiAgICAgICAgICAgIGlpIDwgcmV0dXJuUnVudGltZUNvbnRhaW5lci5jb250ZW50Lmxlbmd0aDtcbiAgICAgICAgICAgIGlpICs9IDFcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IGNtZCA9IHJldHVyblJ1bnRpbWVDb250YWluZXIuY29udGVudFtcbiAgICAgICAgICAgICAgaWlcbiAgICAgICAgICAgIF0gYXMgUnVudGltZUNvbnRyb2xDb21tYW5kO1xuICAgICAgICAgICAgaWYgKGNtZCkge1xuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZXZhbFN0YXJ0ID09IC0xICYmXG4gICAgICAgICAgICAgICAgY21kLmNvbW1hbmRUeXBlID09PSBSdW50aW1lQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuRXZhbFN0YXJ0XG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGV2YWxTdGFydCA9IGlpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICAgIGNtZC5jb21tYW5kVHlwZSA9PT0gUnVudGltZUNvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLkV2YWxFbmRcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZXZhbEVuZCA9IGlpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm9yIChsZXQgaWkgPSBldmFsU3RhcnQgKyAxOyBpaSA8IGV2YWxFbmQ7IGlpICs9IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IG9iaiA9IHJldHVyblJ1bnRpbWVDb250YWluZXIuY29udGVudFtpaV07XG4gICAgICAgICAgICBvYmoucGFyZW50ID0gbnVsbDsgLy8gcHJldmVudCBlcnJvciBvZiBiZWluZyBtb3ZlZCBiZXR3ZWVuIG93bmVyc1xuICAgICAgICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQocmV0dXJuUnVudGltZUNvbnRhaW5lci5jb250ZW50W2lpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBTdXBwbHkgdGhlIGRpdmVydCB0YXJnZXQgZm9yIHRoZSB0dW5uZWwgb253YXJkcyB0YXJnZXQsIGVpdGhlciB2YXJpYWJsZSBvciBtb3JlIGNvbW1vbmx5LCB0aGUgZXhwbGljaXQgbmFtZVxuICAgICAgLy8gdmFyIHJldHVybkRpdmVydE9iaiA9IHJldHVyblJ1bnRpbWVPYmogYXMgUnVudGltZS5EaXZlcnQ7XG4gICAgICBsZXQgcmV0dXJuRGl2ZXJ0T2JqID0gYXNPck51bGwocmV0dXJuUnVudGltZU9iaiwgUnVudGltZURpdmVydCk7XG4gICAgICBpZiAocmV0dXJuRGl2ZXJ0T2JqICE9IG51bGwgJiYgcmV0dXJuRGl2ZXJ0T2JqLmhhc1ZhcmlhYmxlVGFyZ2V0KSB7XG4gICAgICAgIGxldCBydW50aW1lVmFyUmVmID0gbmV3IFZhcmlhYmxlUmVmZXJlbmNlKFxuICAgICAgICAgIHJldHVybkRpdmVydE9iai52YXJpYWJsZURpdmVydE5hbWVcbiAgICAgICAgKTtcbiAgICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQocnVudGltZVZhclJlZik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9vdmVycmlkZURpdmVydFRhcmdldCA9IG5ldyBEaXZlcnRUYXJnZXRWYWx1ZSgpO1xuICAgICAgICBjb250YWluZXIuQWRkQ29udGVudCh0aGlzLl9vdmVycmlkZURpdmVydFRhcmdldCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5vIGRpdmVydCBhZnRlciB0dW5uZWwgb253YXJkc1xuICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQobmV3IFZvaWQoKSk7XG4gICAgfVxuXG4gICAgY29udGFpbmVyLkFkZENvbnRlbnQoUnVudGltZUNvbnRyb2xDb21tYW5kLkV2YWxFbmQoKSk7XG4gICAgY29udGFpbmVyLkFkZENvbnRlbnQoUnVudGltZUNvbnRyb2xDb21tYW5kLlBvcFR1bm5lbCgpKTtcblxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH07XG5cbiAgcHVibGljIFJlc29sdmVSZWZlcmVuY2VzKGNvbnRleHQ6IFN0b3J5KTogdm9pZCB7XG4gICAgc3VwZXIuUmVzb2x2ZVJlZmVyZW5jZXMoY29udGV4dCk7XG5cbiAgICBpZiAodGhpcy5kaXZlcnRBZnRlciAmJiB0aGlzLmRpdmVydEFmdGVyLnRhcmdldENvbnRlbnQpIHtcbiAgICAgIHRoaXMuX292ZXJyaWRlRGl2ZXJ0VGFyZ2V0IS50YXJnZXRQYXRoID1cbiAgICAgICAgdGhpcy5kaXZlcnRBZnRlci50YXJnZXRDb250ZW50LnJ1bnRpbWVQYXRoO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB0b1N0cmluZyA9ICgpOiBzdHJpbmcgPT4ge1xuICAgIHJldHVybiBgIC0+ICR7dGhpcy5fZGl2ZXJ0QWZ0ZXJ9YDtcbiAgfTtcbn1cbiIsImltcG9ydCB7IElua0xpc3RJdGVtLCBTZXJpYWxpemVkSW5rTGlzdEl0ZW0gfSBmcm9tIFwiLi9JbmtMaXN0XCI7XG5pbXBvcnQgeyBUcnlHZXRSZXN1bHQgfSBmcm9tIFwiLi9UcnlHZXRSZXN1bHRcIjtcblxuZXhwb3J0IGNsYXNzIExpc3REZWZpbml0aW9uIHtcbiAgcHVibGljIF9uYW1lOiBzdHJpbmc7XG4gIHB1YmxpYyBfaXRlbXM6IE1hcDxTZXJpYWxpemVkSW5rTGlzdEl0ZW0sIG51bWJlcj4gfCBudWxsO1xuICBwdWJsaWMgX2l0ZW1OYW1lVG9WYWx1ZXM6IE1hcDxzdHJpbmcsIG51bWJlcj47XG5cbiAgY29uc3RydWN0b3IobmFtZTogc3RyaW5nLCBpdGVtczogTWFwPHN0cmluZywgbnVtYmVyPiB8IG51bGwpIHtcbiAgICB0aGlzLl9uYW1lID0gbmFtZSB8fCBcIlwiO1xuICAgIHRoaXMuX2l0ZW1zID0gbnVsbDtcbiAgICB0aGlzLl9pdGVtTmFtZVRvVmFsdWVzID0gaXRlbXMgfHwgbmV3IE1hcCgpO1xuICB9XG4gIGdldCBuYW1lKCkge1xuICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICB9XG4gIGdldCBpdGVtcygpIHtcbiAgICBpZiAodGhpcy5faXRlbXMgPT0gbnVsbCkge1xuICAgICAgdGhpcy5faXRlbXMgPSBuZXcgTWFwKCk7XG4gICAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgdGhpcy5faXRlbU5hbWVUb1ZhbHVlcykge1xuICAgICAgICBsZXQgaXRlbSA9IG5ldyBJbmtMaXN0SXRlbSh0aGlzLm5hbWUsIGtleSk7XG4gICAgICAgIHRoaXMuX2l0ZW1zLnNldChpdGVtLnNlcmlhbGl6ZWQoKSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9pdGVtcztcbiAgfVxuXG4gIHB1YmxpYyBWYWx1ZUZvckl0ZW0oaXRlbTogSW5rTGlzdEl0ZW0pIHtcbiAgICBpZiAoIWl0ZW0uaXRlbU5hbWUpIHJldHVybiAwO1xuXG4gICAgbGV0IGludFZhbCA9IHRoaXMuX2l0ZW1OYW1lVG9WYWx1ZXMuZ2V0KGl0ZW0uaXRlbU5hbWUpO1xuICAgIGlmICh0eXBlb2YgaW50VmFsICE9PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gaW50VmFsO1xuICAgIGVsc2UgcmV0dXJuIDA7XG4gIH1cbiAgcHVibGljIENvbnRhaW5zSXRlbShpdGVtOiBJbmtMaXN0SXRlbSkge1xuICAgIGlmICghaXRlbS5pdGVtTmFtZSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChpdGVtLm9yaWdpbk5hbWUgIT0gdGhpcy5uYW1lKSByZXR1cm4gZmFsc2U7XG5cbiAgICByZXR1cm4gdGhpcy5faXRlbU5hbWVUb1ZhbHVlcy5oYXMoaXRlbS5pdGVtTmFtZSk7XG4gIH1cbiAgcHVibGljIENvbnRhaW5zSXRlbVdpdGhOYW1lKGl0ZW1OYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5faXRlbU5hbWVUb1ZhbHVlcy5oYXMoaXRlbU5hbWUpO1xuICB9XG4gIHB1YmxpYyBUcnlHZXRJdGVtV2l0aFZhbHVlKFxuICAgIHZhbDogbnVtYmVyLFxuICAgIC8qIG91dCAqLyBpdGVtOiBJbmtMaXN0SXRlbVxuICApOiBUcnlHZXRSZXN1bHQ8SW5rTGlzdEl0ZW0+IHtcbiAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgdGhpcy5faXRlbU5hbWVUb1ZhbHVlcykge1xuICAgICAgaWYgKHZhbHVlID09IHZhbCkge1xuICAgICAgICBpdGVtID0gbmV3IElua0xpc3RJdGVtKHRoaXMubmFtZSwga2V5KTtcbiAgICAgICAgcmV0dXJuIHsgcmVzdWx0OiBpdGVtLCBleGlzdHM6IHRydWUgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpdGVtID0gSW5rTGlzdEl0ZW0uTnVsbDtcbiAgICByZXR1cm4geyByZXN1bHQ6IGl0ZW0sIGV4aXN0czogZmFsc2UgfTtcbiAgfVxuXG4gIHB1YmxpYyBUcnlHZXRWYWx1ZUZvckl0ZW0oXG4gICAgaXRlbTogSW5rTGlzdEl0ZW0sXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgIC8qIG91dCAqLyBpbnRWYWw6IG51bWJlclxuICApOiBUcnlHZXRSZXN1bHQ8bnVtYmVyPiB7XG4gICAgaWYgKCFpdGVtLml0ZW1OYW1lKSByZXR1cm4geyByZXN1bHQ6IDAsIGV4aXN0czogZmFsc2UgfTtcbiAgICBsZXQgdmFsdWUgPSB0aGlzLl9pdGVtTmFtZVRvVmFsdWVzLmdldChpdGVtLml0ZW1OYW1lKTtcblxuICAgIGlmICghdmFsdWUpIHJldHVybiB7IHJlc3VsdDogMCwgZXhpc3RzOiBmYWxzZSB9O1xuICAgIHJldHVybiB7IHJlc3VsdDogdmFsdWUsIGV4aXN0czogdHJ1ZSB9O1xuICB9XG59XG4iLCJpbXBvcnQgeyBJbmtMaXN0IGFzIFJ1bnRpbWVJbmtMaXN0IH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9JbmtMaXN0XCI7XG5pbXBvcnQgeyBJbmtMaXN0SXRlbSBhcyBSdW50aW1lSW5rTGlzdEl0ZW0gfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL0lua0xpc3RcIjtcbmltcG9ydCB7IExpc3REZWZpbml0aW9uIGFzIFJ1bnRpbWVMaXN0RGVmaW5pdGlvbiB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvTGlzdERlZmluaXRpb25cIjtcbmltcG9ydCB7IExpc3RFbGVtZW50RGVmaW5pdGlvbiB9IGZyb20gXCIuL0xpc3RFbGVtZW50RGVmaW5pdGlvblwiO1xuaW1wb3J0IHsgTGlzdFZhbHVlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9WYWx1ZVwiO1xuaW1wb3J0IHsgUGFyc2VkT2JqZWN0IH0gZnJvbSBcIi4uL09iamVjdFwiO1xuaW1wb3J0IHsgU3RvcnkgfSBmcm9tIFwiLi4vU3RvcnlcIjtcbmltcG9ydCB7IFN5bWJvbFR5cGUgfSBmcm9tIFwiLi4vU3ltYm9sVHlwZVwiO1xuaW1wb3J0IHsgVmFyaWFibGVBc3NpZ25tZW50IH0gZnJvbSBcIi4uL1ZhcmlhYmxlL1ZhcmlhYmxlQXNzaWdubWVudFwiO1xuaW1wb3J0IHsgSWRlbnRpZmllciB9IGZyb20gXCIuLi9JZGVudGlmaWVyXCI7XG5cbmV4cG9ydCBjbGFzcyBMaXN0RGVmaW5pdGlvbiBleHRlbmRzIFBhcnNlZE9iamVjdCB7XG4gIHB1YmxpYyBpZGVudGlmaWVyOiBJZGVudGlmaWVyIHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyB2YXJpYWJsZUFzc2lnbm1lbnQ6IFZhcmlhYmxlQXNzaWdubWVudCB8IG51bGwgPSBudWxsO1xuXG4gIGdldCB0eXBlTmFtZSgpIHtcbiAgICByZXR1cm4gXCJMaXN0RGVmaW5pdGlvblwiO1xuICB9XG5cbiAgcHJpdmF0ZSBfZWxlbWVudHNCeU5hbWU6IE1hcDxzdHJpbmcsIExpc3RFbGVtZW50RGVmaW5pdGlvbj4gfCBudWxsID0gbnVsbDtcblxuICBnZXQgcnVudGltZUxpc3REZWZpbml0aW9uKCk6IFJ1bnRpbWVMaXN0RGVmaW5pdGlvbiB7XG4gICAgY29uc3QgYWxsSXRlbXM6IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBuZXcgTWFwKCk7XG4gICAgZm9yIChjb25zdCBlIG9mIHRoaXMuaXRlbURlZmluaXRpb25zKSB7XG4gICAgICBpZiAoIWFsbEl0ZW1zLmhhcyhlLm5hbWUhKSkge1xuICAgICAgICBhbGxJdGVtcy5zZXQoZS5uYW1lISwgZS5zZXJpZXNWYWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLkVycm9yKFxuICAgICAgICAgIGBMaXN0ICcke3RoaXMuaWRlbnRpZmllcn0nIGNvbnRhaW5zIGR1cGxpY2F0ZSBpdGVtcyBjYWxsZWQgJyR7ZS5uYW1lfSdgXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBSdW50aW1lTGlzdERlZmluaXRpb24odGhpcy5pZGVudGlmaWVyPy5uYW1lIHx8IFwiXCIsIGFsbEl0ZW1zKTtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBJdGVtTmFtZWQgPSAoXG4gICAgaXRlbU5hbWU6IHN0cmluZ1xuICApOiBMaXN0RWxlbWVudERlZmluaXRpb24gfCBudWxsID0+IHtcbiAgICBpZiAodGhpcy5fZWxlbWVudHNCeU5hbWUgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnRzQnlOYW1lID0gbmV3IE1hcCgpO1xuXG4gICAgICBmb3IgKGNvbnN0IGVsIG9mIHRoaXMuaXRlbURlZmluaXRpb25zKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnRzQnlOYW1lLnNldChlbC5uYW1lISwgZWwpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGZvdW5kRWxlbWVudCA9IHRoaXMuX2VsZW1lbnRzQnlOYW1lLmdldChpdGVtTmFtZSkgfHwgbnVsbDtcblxuICAgIHJldHVybiBmb3VuZEVsZW1lbnQ7XG4gIH07XG5cbiAgY29uc3RydWN0b3IocHVibGljIGl0ZW1EZWZpbml0aW9uczogTGlzdEVsZW1lbnREZWZpbml0aW9uW10pIHtcbiAgICBzdXBlcigpO1xuXG4gICAgbGV0IGN1cnJlbnRWYWx1ZSA9IDE7XG4gICAgZm9yIChjb25zdCBlIG9mIHRoaXMuaXRlbURlZmluaXRpb25zKSB7XG4gICAgICBpZiAoZS5leHBsaWNpdFZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgIGN1cnJlbnRWYWx1ZSA9IGUuZXhwbGljaXRWYWx1ZTtcbiAgICAgIH1cblxuICAgICAgZS5zZXJpZXNWYWx1ZSA9IGN1cnJlbnRWYWx1ZTtcblxuICAgICAgY3VycmVudFZhbHVlICs9IDE7XG4gICAgfVxuXG4gICAgdGhpcy5BZGRDb250ZW50KGl0ZW1EZWZpbml0aW9ucyBhcyBhbnkpO1xuICB9XG5cbiAgcHVibGljIHJlYWRvbmx5IEdlbmVyYXRlUnVudGltZU9iamVjdCA9ICgpOiBMaXN0VmFsdWUgPT4ge1xuICAgIGNvbnN0IGluaXRpYWxWYWx1ZXMgPSBuZXcgUnVudGltZUlua0xpc3QoKTtcbiAgICBmb3IgKGNvbnN0IGl0ZW1EZWYgb2YgdGhpcy5pdGVtRGVmaW5pdGlvbnMpIHtcbiAgICAgIGlmIChpdGVtRGVmLmluSW5pdGlhbExpc3QpIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IG5ldyBSdW50aW1lSW5rTGlzdEl0ZW0oXG4gICAgICAgICAgdGhpcy5pZGVudGlmaWVyPy5uYW1lIHx8IG51bGwsXG4gICAgICAgICAgaXRlbURlZi5uYW1lIHx8IG51bGxcbiAgICAgICAgKTtcbiAgICAgICAgaW5pdGlhbFZhbHVlcy5BZGQoaXRlbSwgaXRlbURlZi5zZXJpZXNWYWx1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2V0IG9yaWdpbiBuYW1lLCBzb1xuICAgIGluaXRpYWxWYWx1ZXMuU2V0SW5pdGlhbE9yaWdpbk5hbWUodGhpcy5pZGVudGlmaWVyPy5uYW1lIHx8IFwiXCIpO1xuXG4gICAgcmV0dXJuIG5ldyBMaXN0VmFsdWUoaW5pdGlhbFZhbHVlcyk7XG4gIH07XG5cbiAgcHVibGljIFJlc29sdmVSZWZlcmVuY2VzKGNvbnRleHQ6IFN0b3J5KTogdm9pZCB7XG4gICAgc3VwZXIuUmVzb2x2ZVJlZmVyZW5jZXMoY29udGV4dCk7XG4gICAgY29udGV4dC5DaGVja0Zvck5hbWluZ0NvbGxpc2lvbnModGhpcywgdGhpcy5pZGVudGlmaWVyISwgU3ltYm9sVHlwZS5MaXN0KTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ29udGFpbmVyIGFzIFJ1bnRpbWVDb250YWluZXIgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL0NvbnRhaW5lclwiO1xuaW1wb3J0IHsgRXhwcmVzc2lvbiB9IGZyb20gXCIuLi9FeHByZXNzaW9uL0V4cHJlc3Npb25cIjtcbmltcG9ydCB7IEZsb3dCYXNlIH0gZnJvbSBcIi4uL0Zsb3cvRmxvd0Jhc2VcIjtcbmltcG9ydCB7IENsb3Nlc3RGbG93QmFzZSB9IGZyb20gXCIuLi9GbG93L0Nsb3Nlc3RGbG93QmFzZVwiO1xuaW1wb3J0IHsgTGlzdERlZmluaXRpb24gfSBmcm9tIFwiLi4vTGlzdC9MaXN0RGVmaW5pdGlvblwiO1xuaW1wb3J0IHsgUGFyc2VkT2JqZWN0IH0gZnJvbSBcIi4uL09iamVjdFwiO1xuaW1wb3J0IHsgSW5rT2JqZWN0IGFzIFJ1bnRpbWVPYmplY3QgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL09iamVjdFwiO1xuaW1wb3J0IHsgU3RvcnkgfSBmcm9tIFwiLi4vU3RvcnlcIjtcbmltcG9ydCB7IFN5bWJvbFR5cGUgfSBmcm9tIFwiLi4vU3ltYm9sVHlwZVwiO1xuaW1wb3J0IHsgVmFyaWFibGVBc3NpZ25tZW50IGFzIFJ1bnRpbWVWYXJpYWJsZUFzc2lnbm1lbnQgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL1ZhcmlhYmxlQXNzaWdubWVudFwiO1xuaW1wb3J0IHsgVmFyaWFibGVSZWZlcmVuY2UgfSBmcm9tIFwiLi9WYXJpYWJsZVJlZmVyZW5jZVwiO1xuaW1wb3J0IHsgSWRlbnRpZmllciB9IGZyb20gXCIuLi9JZGVudGlmaWVyXCI7XG5pbXBvcnQgeyBhc09yTnVsbCB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvVHlwZUFzc2VydGlvblwiO1xuXG5leHBvcnQgY2xhc3MgVmFyaWFibGVBc3NpZ25tZW50IGV4dGVuZHMgUGFyc2VkT2JqZWN0IHtcbiAgcHJpdmF0ZSBfcnVudGltZUFzc2lnbm1lbnQ6IFJ1bnRpbWVWYXJpYWJsZUFzc2lnbm1lbnQgfCBudWxsID0gbnVsbDtcblxuICBnZXQgdmFyaWFibGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMudmFyaWFibGVJZGVudGlmaWVyLm5hbWUhO1xuICB9XG4gIHB1YmxpYyByZWFkb25seSB2YXJpYWJsZUlkZW50aWZpZXI6IElkZW50aWZpZXI7XG4gIHB1YmxpYyByZWFkb25seSBleHByZXNzaW9uOiBFeHByZXNzaW9uIHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyByZWFkb25seSBsaXN0RGVmaW5pdGlvbjogTGlzdERlZmluaXRpb24gfCBudWxsID0gbnVsbDtcbiAgcHVibGljIHJlYWRvbmx5IGlzR2xvYmFsRGVjbGFyYXRpb246IGJvb2xlYW47XG4gIHB1YmxpYyByZWFkb25seSBpc05ld1RlbXBvcmFyeURlY2xhcmF0aW9uOiBib29sZWFuO1xuXG4gIGdldCB0eXBlTmFtZSgpIHtcbiAgICBpZiAodGhpcy5pc05ld1RlbXBvcmFyeURlY2xhcmF0aW9uKSB7XG4gICAgICByZXR1cm4gXCJ0ZW1wXCI7XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzR2xvYmFsRGVjbGFyYXRpb24pIHtcbiAgICAgIGlmICh0aGlzLmxpc3REZWZpbml0aW9uICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBcIkxJU1RcIjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBcIlZBUlwiO1xuICAgIH1cblxuICAgIHJldHVybiBcInZhcmlhYmxlIGFzc2lnbm1lbnRcIjtcbiAgfVxuXG4gIGdldCBpc0RlY2xhcmF0aW9uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmlzR2xvYmFsRGVjbGFyYXRpb24gfHwgdGhpcy5pc05ld1RlbXBvcmFyeURlY2xhcmF0aW9uO1xuICB9XG5cbiAgY29uc3RydWN0b3Ioe1xuICAgIGFzc2lnbmVkRXhwcmVzc2lvbixcbiAgICBpc0dsb2JhbERlY2xhcmF0aW9uLFxuICAgIGlzVGVtcG9yYXJ5TmV3RGVjbGFyYXRpb24sXG4gICAgbGlzdERlZixcbiAgICB2YXJpYWJsZUlkZW50aWZpZXIsXG4gIH06IHtcbiAgICByZWFkb25seSBhc3NpZ25lZEV4cHJlc3Npb24/OiBFeHByZXNzaW9uO1xuICAgIHJlYWRvbmx5IGlzR2xvYmFsRGVjbGFyYXRpb24/OiBib29sZWFuO1xuICAgIHJlYWRvbmx5IGlzVGVtcG9yYXJ5TmV3RGVjbGFyYXRpb24/OiBib29sZWFuO1xuICAgIHJlYWRvbmx5IGxpc3REZWY/OiBMaXN0RGVmaW5pdGlvbjtcbiAgICByZWFkb25seSB2YXJpYWJsZUlkZW50aWZpZXI6IElkZW50aWZpZXI7XG4gIH0pIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy52YXJpYWJsZUlkZW50aWZpZXIgPSB2YXJpYWJsZUlkZW50aWZpZXI7XG4gICAgdGhpcy5pc0dsb2JhbERlY2xhcmF0aW9uID0gQm9vbGVhbihpc0dsb2JhbERlY2xhcmF0aW9uKTtcbiAgICB0aGlzLmlzTmV3VGVtcG9yYXJ5RGVjbGFyYXRpb24gPSBCb29sZWFuKGlzVGVtcG9yYXJ5TmV3RGVjbGFyYXRpb24pO1xuXG4gICAgLy8gRGVmZW5zaXZlIHByb2dyYW1taW5nIGluIGNhc2UgcGFyc2luZyBvZiBhc3NpZ25lZEV4cHJlc3Npb24gZmFpbGVkXG4gICAgaWYgKGxpc3REZWYgaW5zdGFuY2VvZiBMaXN0RGVmaW5pdGlvbikge1xuICAgICAgdGhpcy5saXN0RGVmaW5pdGlvbiA9IHRoaXMuQWRkQ29udGVudChsaXN0RGVmKSBhcyBMaXN0RGVmaW5pdGlvbjtcbiAgICAgIHRoaXMubGlzdERlZmluaXRpb24udmFyaWFibGVBc3NpZ25tZW50ID0gdGhpcztcblxuICAgICAgLy8gTGlzdCBkZWZpbml0aW9ucyBhcmUgYWx3YXlzIGdsb2JhbFxuICAgICAgdGhpcy5pc0dsb2JhbERlY2xhcmF0aW9uID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGFzc2lnbmVkRXhwcmVzc2lvbikge1xuICAgICAgdGhpcy5leHByZXNzaW9uID0gdGhpcy5BZGRDb250ZW50KGFzc2lnbmVkRXhwcmVzc2lvbikgYXMgRXhwcmVzc2lvbjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVhZG9ubHkgR2VuZXJhdGVSdW50aW1lT2JqZWN0ID0gKCk6IFJ1bnRpbWVPYmplY3QgfCBudWxsID0+IHtcbiAgICBsZXQgbmV3RGVjbFNjb3BlOiBGbG93QmFzZSB8IG51bGwgfCB1bmRlZmluZWQgPSBudWxsO1xuICAgIGlmICh0aGlzLmlzR2xvYmFsRGVjbGFyYXRpb24pIHtcbiAgICAgIG5ld0RlY2xTY29wZSA9IHRoaXMuc3Rvcnk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzTmV3VGVtcG9yYXJ5RGVjbGFyYXRpb24pIHtcbiAgICAgIG5ld0RlY2xTY29wZSA9IENsb3Nlc3RGbG93QmFzZSh0aGlzKTtcbiAgICB9XG5cbiAgICBpZiAobmV3RGVjbFNjb3BlKSB7XG4gICAgICBuZXdEZWNsU2NvcGUuQWRkTmV3VmFyaWFibGVEZWNsYXJhdGlvbih0aGlzKTtcbiAgICB9XG5cbiAgICAvLyBHbG9iYWwgZGVjbGFyYXRpb25zIGRvbid0IGdlbmVyYXRlIGFjdHVhbCBwcm9jZWR1cmFsXG4gICAgLy8gcnVudGltZSBvYmplY3RzLCBidXQgaW5zdGVhZCBhZGQgYSBnbG9iYWwgdmFyaWFibGUgdG8gdGhlIHN0b3J5IGl0c2VsZi5cbiAgICAvLyBUaGUgc3RvcnkgdGhlbiBpbml0aWFsaXNlcyB0aGVtIGFsbCBpbiBvbmUgZ28gYXQgdGhlIHN0YXJ0IG9mIHRoZSBnYW1lLlxuICAgIGlmICh0aGlzLmlzR2xvYmFsRGVjbGFyYXRpb24pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRhaW5lciA9IG5ldyBSdW50aW1lQ29udGFpbmVyKCk7XG5cbiAgICAvLyBUaGUgZXhwcmVzc2lvbidzIHJ1bnRpbWVPYmplY3QgaXMgYWN0dWFsbHkgYW5vdGhlciBuZXN0ZWQgY29udGFpbmVyXG4gICAgaWYgKHRoaXMuZXhwcmVzc2lvbikge1xuICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQodGhpcy5leHByZXNzaW9uLnJ1bnRpbWVPYmplY3QpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5saXN0RGVmaW5pdGlvbikge1xuICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQodGhpcy5saXN0RGVmaW5pdGlvbi5ydW50aW1lT2JqZWN0KTtcbiAgICB9XG5cbiAgICB0aGlzLl9ydW50aW1lQXNzaWdubWVudCA9IG5ldyBSdW50aW1lVmFyaWFibGVBc3NpZ25tZW50KFxuICAgICAgdGhpcy52YXJpYWJsZU5hbWUsXG4gICAgICB0aGlzLmlzTmV3VGVtcG9yYXJ5RGVjbGFyYXRpb25cbiAgICApO1xuXG4gICAgY29udGFpbmVyLkFkZENvbnRlbnQodGhpcy5fcnVudGltZUFzc2lnbm1lbnQpO1xuXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgfTtcblxuICBwdWJsaWMgUmVzb2x2ZVJlZmVyZW5jZXMoY29udGV4dDogU3RvcnkpOiB2b2lkIHtcbiAgICBzdXBlci5SZXNvbHZlUmVmZXJlbmNlcyhjb250ZXh0KTtcblxuICAgIC8vIExpc3QgZGVmaW5pdGlvbnMgYXJlIGNoZWNrZWQgZm9yIGNvbmZsaWN0cyBzZXBhcmF0ZWx5XG4gICAgaWYgKHRoaXMuaXNEZWNsYXJhdGlvbiAmJiB0aGlzLmxpc3REZWZpbml0aW9uID09PSBudWxsKSB7XG4gICAgICBjb250ZXh0LkNoZWNrRm9yTmFtaW5nQ29sbGlzaW9ucyhcbiAgICAgICAgdGhpcyxcbiAgICAgICAgdGhpcy52YXJpYWJsZUlkZW50aWZpZXIsXG4gICAgICAgIHRoaXMuaXNHbG9iYWxEZWNsYXJhdGlvbiA/IFN5bWJvbFR5cGUuVmFyIDogU3ltYm9sVHlwZS5UZW1wXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEluaXRpYWwgVkFSIHggPSBbaW50aWFsVmFsdWVdIGRlY2xhcmF0aW9uLCBub3QgcmUtYXNzaWdubWVudFxuICAgIGlmICh0aGlzLmlzR2xvYmFsRGVjbGFyYXRpb24pIHtcbiAgICAgIGNvbnN0IHZhcmlhYmxlUmVmZXJlbmNlID0gYXNPck51bGwodGhpcy5leHByZXNzaW9uLCBWYXJpYWJsZVJlZmVyZW5jZSk7XG4gICAgICBpZiAoXG4gICAgICAgIHZhcmlhYmxlUmVmZXJlbmNlICYmXG4gICAgICAgICF2YXJpYWJsZVJlZmVyZW5jZS5pc0NvbnN0YW50UmVmZXJlbmNlICYmXG4gICAgICAgICF2YXJpYWJsZVJlZmVyZW5jZS5pc0xpc3RJdGVtUmVmZXJlbmNlXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5FcnJvcihcbiAgICAgICAgICBcImdsb2JhbCB2YXJpYWJsZSBhc3NpZ25tZW50cyBjYW5ub3QgcmVmZXIgdG8gb3RoZXIgdmFyaWFibGVzLCBvbmx5IGxpdGVyYWwgdmFsdWVzLCBjb25zdGFudHMgYW5kIGxpc3QgaXRlbXNcIlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghdGhpcy5pc05ld1RlbXBvcmFyeURlY2xhcmF0aW9uKSB7XG4gICAgICBjb25zdCByZXNvbHZlZFZhckFzc2lnbm1lbnQgPSBjb250ZXh0LlJlc29sdmVWYXJpYWJsZVdpdGhOYW1lKFxuICAgICAgICB0aGlzLnZhcmlhYmxlTmFtZSxcbiAgICAgICAgdGhpc1xuICAgICAgKTtcblxuICAgICAgaWYgKCFyZXNvbHZlZFZhckFzc2lnbm1lbnQuZm91bmQpIHtcbiAgICAgICAgaWYgKHRoaXMudmFyaWFibGVOYW1lIGluIHRoaXMuc3RvcnkuY29uc3RhbnRzKSB7XG4gICAgICAgICAgdGhpcy5FcnJvcihcbiAgICAgICAgICAgIGBDYW4ndCByZS1hc3NpZ24gdG8gYSBjb25zdGFudCAoZG8geW91IG5lZWQgdG8gdXNlIFZBUiB3aGVuIGRlY2xhcmluZyAnJHt0aGlzLnZhcmlhYmxlTmFtZX0nPylgLFxuICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5FcnJvcihcbiAgICAgICAgICAgIGBWYXJpYWJsZSBjb3VsZCBub3QgYmUgZm91bmQgdG8gYXNzaWduIHRvOiAnJHt0aGlzLnZhcmlhYmxlTmFtZX0nYCxcbiAgICAgICAgICAgIHRoaXNcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEEgcnVudGltZSBhc3NpZ25tZW50IG1heSBub3QgaGF2ZSBiZWVuIGdlbmVyYXRlZCBpZiBpdCdzIHRoZSBpbml0aWFsIGdsb2JhbCBkZWNsYXJhdGlvbixcbiAgICAgIC8vIHNpbmNlIHRoZXNlIGFyZSBob2lzdGVkIG91dCBhbmQgaGFuZGxlZCBzcGVjaWFsbHkgaW4gU3RvcnkuRXhwb3J0UnVudGltZS5cbiAgICAgIGlmICh0aGlzLl9ydW50aW1lQXNzaWdubWVudCkge1xuICAgICAgICB0aGlzLl9ydW50aW1lQXNzaWdubWVudC5pc0dsb2JhbCA9IHJlc29sdmVkVmFyQXNzaWdubWVudC5pc0dsb2JhbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVhZG9ubHkgdG9TdHJpbmcgPSAoKTogc3RyaW5nID0+XG4gICAgYCR7XG4gICAgICB0aGlzLmlzR2xvYmFsRGVjbGFyYXRpb25cbiAgICAgICAgPyBcIlZBUlwiXG4gICAgICAgIDogdGhpcy5pc05ld1RlbXBvcmFyeURlY2xhcmF0aW9uXG4gICAgICAgICAgPyBcIn4gdGVtcFwiXG4gICAgICAgICAgOiBcIlwiXG4gICAgfSAke3RoaXMudmFyaWFibGVOYW1lfWA7XG59XG4iLCJpbXBvcnQgeyBBdXRob3JXYXJuaW5nIH0gZnJvbSBcIi4vQXV0aG9yV2FybmluZ1wiO1xuaW1wb3J0IHsgQ2hvaWNlIH0gZnJvbSBcIi4vQ2hvaWNlXCI7XG5pbXBvcnQgeyBDb25kaXRpb25hbCB9IGZyb20gXCIuL0NvbmRpdGlvbmFsL0NvbmRpdGlvbmFsXCI7XG5pbXBvcnQgeyBDb25zdGFudERlY2xhcmF0aW9uIH0gZnJvbSBcIi4vRGVjbGFyYXRpb24vQ29uc3RhbnREZWNsYXJhdGlvblwiO1xuaW1wb3J0IHsgQ29udGFpbmVyIGFzIFJ1bnRpbWVDb250YWluZXIgfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL0NvbnRhaW5lclwiO1xuaW1wb3J0IHsgRGl2ZXJ0IH0gZnJvbSBcIi4vRGl2ZXJ0L0RpdmVydFwiO1xuaW1wb3J0IHsgRGl2ZXJ0IGFzIFJ1bnRpbWVEaXZlcnQgfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL0RpdmVydFwiO1xuaW1wb3J0IHsgRGl2ZXJ0VGFyZ2V0IH0gZnJvbSBcIi4vRGl2ZXJ0L0RpdmVydFRhcmdldFwiO1xuaW1wb3J0IHsgRmxvd0Jhc2UgfSBmcm9tIFwiLi9GbG93L0Zsb3dCYXNlXCI7XG5pbXBvcnQgeyBHYXRoZXIgfSBmcm9tIFwiLi9HYXRoZXIvR2F0aGVyXCI7XG5pbXBvcnQgeyBHYXRoZXJQb2ludFRvUmVzb2x2ZSB9IGZyb20gXCIuL0dhdGhlci9HYXRoZXJQb2ludFRvUmVzb2x2ZVwiO1xuaW1wb3J0IHsgSVdlYXZlUG9pbnQgfSBmcm9tIFwiLi9JV2VhdmVQb2ludFwiO1xuaW1wb3J0IHsgUGFyc2VkT2JqZWN0IH0gZnJvbSBcIi4vT2JqZWN0XCI7XG5pbXBvcnQgeyBJbmtPYmplY3QgYXMgUnVudGltZU9iamVjdCB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvT2JqZWN0XCI7XG5pbXBvcnQgeyBTZXF1ZW5jZSB9IGZyb20gXCIuL1NlcXVlbmNlL1NlcXVlbmNlXCI7XG5pbXBvcnQgeyBTdG9yeSB9IGZyb20gXCIuL1N0b3J5XCI7XG5pbXBvcnQgeyBUZXh0IH0gZnJvbSBcIi4vVGV4dFwiO1xuaW1wb3J0IHsgVHVubmVsT253YXJkcyB9IGZyb20gXCIuL1R1bm5lbE9ud2FyZHNcIjtcbmltcG9ydCB7IFZhcmlhYmxlQXNzaWdubWVudCB9IGZyb20gXCIuL1ZhcmlhYmxlL1ZhcmlhYmxlQXNzaWdubWVudFwiO1xuaW1wb3J0IHsgYXNPck51bGwgfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL1R5cGVBc3NlcnRpb25cIjtcblxudHlwZSBCYWRUZXJtaW5hdGlvbkhhbmRsZXIgPSAodGVybWluYXRpbmdPYmo6IFBhcnNlZE9iamVjdCkgPT4gdm9pZDtcblxuLy8gVXNlZCBieSB0aGUgRmxvd0Jhc2Ugd2hlbiBjb25zdHJ1Y3RpbmcgdGhlIHdlYXZlIGZsb3cgZnJvbVxuLy8gYSBmbGF0IGxpc3Qgb2YgY29udGVudCBvYmplY3RzLlxuZXhwb3J0IGNsYXNzIFdlYXZlIGV4dGVuZHMgUGFyc2VkT2JqZWN0IHtcbiAgLy8gQ29udGFpbmVycyBjYW4gYmUgY2hhaW5lZCBhcyBtdWx0aXBsZSBnYXRoZXIgcG9pbnRzXG4gIC8vIGdldCBjcmVhdGVkIGFzIHRoZSBzYW1lIGluZGVudGF0aW9uIGxldmVsLlxuICAvLyByb290Q29udGFpbmVyIGlzIGFsd2F5cyB0aGUgZmlyc3QgaW4gdGhlIGNoYWluLCB3aGlsZVxuICAvLyBjdXJyZW50Q29udGFpbmVyIGlzIHRoZSBsYXRlc3QuXG4gIGdldCByb290Q29udGFpbmVyKCk6IFJ1bnRpbWVDb250YWluZXIge1xuICAgIGlmICghdGhpcy5fcm9vdENvbnRhaW5lcikge1xuICAgICAgdGhpcy5fcm9vdENvbnRhaW5lciA9IHRoaXMuR2VuZXJhdGVSdW50aW1lT2JqZWN0KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3Jvb3RDb250YWluZXI7XG4gIH1cblxuICAvLyBLZWVwIHRyYWNrIG9mIHByZXZpb3VzIHdlYXZlIHBvaW50IChDaG9pY2Ugb3IgR2F0aGVyKVxuICAvLyBhdCB0aGUgY3VycmVudCBpbmRlbnRhdGlvbiBsZXZlbDpcbiAgLy8gIC0gdG8gYWRkIG9yZGluYXJ5IGNvbnRlbnQgdG8gYmUgbmVzdGVkIHVuZGVyIGl0XG4gIC8vICAtIHRvIGFkZCBuZXN0ZWQgY29udGVudCB1bmRlciBpdCB3aGVuIGl0J3MgaW5kZW50ZWRcbiAgLy8gIC0gdG8gcmVtb3ZlIGl0IGZyb20gdGhlIGxpc3Qgb2YgbG9vc2UgZW5kcyB3aGVuXG4gIC8vICAgICAtIGl0IGhhcyBpbmRlbnRlZCBjb250ZW50IHNpbmNlIGl0J3Mgbm8gbG9uZ2VyIGEgbG9vc2UgZW5kXG4gIC8vICAgICAtIGl0J3MgYSBnYXRoZXIgYW5kIGl0IGhhcyBhIGNob2ljZSBhZGRlZCB0byBpdFxuICBwdWJsaWMgcHJldmlvdXNXZWF2ZVBvaW50OiBJV2VhdmVQb2ludCB8IG51bGwgPSBudWxsO1xuICBwdWJsaWMgYWRkQ29udGVudFRvUHJldmlvdXNXZWF2ZVBvaW50OiBib29sZWFuID0gZmFsc2U7XG5cbiAgLy8gVXNlZCBmb3IgZGV0ZXJtaW5pbmcgd2hldGhlciB0aGUgbmV4dCBHYXRoZXIgc2hvdWxkIGF1dG8tZW50ZXJcbiAgcHVibGljIGhhc1NlZW5DaG9pY2VJblNlY3Rpb246IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwdWJsaWMgY3VycmVudENvbnRhaW5lcjogUnVudGltZUNvbnRhaW5lciB8IG51bGwgPSBudWxsO1xuICBwdWJsaWMgYmFzZUluZGVudEluZGV4OiBudW1iZXI7XG5cbiAgcHJpdmF0ZSBfdW5uYW1lZEdhdGhlckNvdW50OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF9jaG9pY2VDb3VudDogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBfcm9vdENvbnRhaW5lcjogUnVudGltZUNvbnRhaW5lciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIF9uYW1lZFdlYXZlUG9pbnRzOiBNYXA8c3RyaW5nLCBJV2VhdmVQb2ludD4gPSBuZXcgTWFwKCk7XG4gIGdldCBuYW1lZFdlYXZlUG9pbnRzKCkge1xuICAgIHJldHVybiB0aGlzLl9uYW1lZFdlYXZlUG9pbnRzO1xuICB9XG5cbiAgLy8gTG9vc2UgZW5kcyBhcmU6XG4gIC8vICAtIENob2ljZXMgb3IgR2F0aGVycyB0aGF0IG5lZWQgdG8gYmUgam9pbmVkIHVwXG4gIC8vICAtIEV4cGxpY2l0IERpdmVydCB0byBnYXRoZXIgcG9pbnRzIChpLmUuIFwiLT5cIiB3aXRob3V0IGEgdGFyZ2V0KVxuICBwdWJsaWMgbG9vc2VFbmRzOiBJV2VhdmVQb2ludFtdID0gW107XG5cbiAgcHVibGljIGdhdGhlclBvaW50c1RvUmVzb2x2ZTogR2F0aGVyUG9pbnRUb1Jlc29sdmVbXSA9IFtdO1xuXG4gIGdldCBsYXN0UGFyc2VkU2lnbmlmaWNhbnRPYmplY3QoKTogUGFyc2VkT2JqZWN0IHwgbnVsbCB7XG4gICAgaWYgKHRoaXMuY29udGVudC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIERvbid0IGNvdW50IGV4dHJhbmVvdXMgbmV3bGluZXMgb3IgVkFSL0NPTlNUIGRlY2xhcmF0aW9ucyxcbiAgICAvLyBzaW5jZSB0aGV5J3JlIFwiZW1wdHlcIiBzdGF0ZW1lbnRzIG91dHNpZGUgb2YgdGhlIG1haW4gZmxvdy5cbiAgICBsZXQgbGFzdE9iamVjdDogUGFyc2VkT2JqZWN0IHwgbnVsbCA9IG51bGw7XG4gICAgZm9yIChsZXQgaWkgPSB0aGlzLmNvbnRlbnQubGVuZ3RoIC0gMTsgaWkgPj0gMDsgLS1paSkge1xuICAgICAgbGFzdE9iamVjdCA9IHRoaXMuY29udGVudFtpaV07XG5cbiAgICAgIGxldCBsYXN0VGV4dCA9IGFzT3JOdWxsKGxhc3RPYmplY3QsIFRleHQpO1xuICAgICAgaWYgKGxhc3RUZXh0ICYmIGxhc3RUZXh0LnRleHQgPT09IFwiXFxuXCIpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLklzR2xvYmFsRGVjbGFyYXRpb24obGFzdE9iamVjdCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGNvbnN0IGxhc3RXZWF2ZSA9IGFzT3JOdWxsKGxhc3RPYmplY3QsIFdlYXZlKTtcbiAgICBpZiAobGFzdFdlYXZlKSB7XG4gICAgICBsYXN0T2JqZWN0ID0gbGFzdFdlYXZlLmxhc3RQYXJzZWRTaWduaWZpY2FudE9iamVjdDtcbiAgICB9XG5cbiAgICByZXR1cm4gbGFzdE9iamVjdDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGNvbnQ6IFBhcnNlZE9iamVjdFtdLCBpbmRlbnRJbmRleDogbnVtYmVyID0gLTEpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgaWYgKGluZGVudEluZGV4ID09IC0xKSB7XG4gICAgICB0aGlzLmJhc2VJbmRlbnRJbmRleCA9IHRoaXMuRGV0ZXJtaW5lQmFzZUluZGVudGF0aW9uRnJvbUNvbnRlbnQoY29udCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYmFzZUluZGVudEluZGV4ID0gaW5kZW50SW5kZXg7XG4gICAgfVxuXG4gICAgdGhpcy5BZGRDb250ZW50KGNvbnQpO1xuXG4gICAgdGhpcy5Db25zdHJ1Y3RXZWF2ZUhpZXJhcmNoeUZyb21JbmRlbnRhdGlvbigpO1xuICB9XG5cbiAgZ2V0IHR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiV2VhdmVcIjtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBSZXNvbHZlV2VhdmVQb2ludE5hbWluZyA9ICgpOiB2b2lkID0+IHtcbiAgICBjb25zdCBuYW1lZFdlYXZlUG9pbnRzID0gW1xuICAgICAgLi4udGhpcy5GaW5kQWxsPElXZWF2ZVBvaW50PihHYXRoZXIpKFxuICAgICAgICAodykgPT4gISh3Lm5hbWUgPT09IG51bGwgfHwgdy5uYW1lID09PSB1bmRlZmluZWQpXG4gICAgICApLFxuICAgICAgLi4udGhpcy5GaW5kQWxsPElXZWF2ZVBvaW50PihDaG9pY2UpKFxuICAgICAgICAodykgPT4gISh3Lm5hbWUgPT09IG51bGwgfHwgdy5uYW1lID09PSB1bmRlZmluZWQpXG4gICAgICApLFxuICAgIF07XG4gICAgdGhpcy5fbmFtZWRXZWF2ZVBvaW50cyA9IG5ldyBNYXAoKTtcblxuICAgIGZvciAoY29uc3Qgd2VhdmVQb2ludCBvZiBuYW1lZFdlYXZlUG9pbnRzKSB7XG4gICAgICAvLyBDaGVjayBmb3Igd2VhdmUgcG9pbnQgbmFtaW5nIGNvbGxpc2lvbnNcbiAgICAgIGNvbnN0IGV4aXN0aW5nV2VhdmVQb2ludDogSVdlYXZlUG9pbnQgfCBudWxsIHwgdW5kZWZpbmVkID1cbiAgICAgICAgdGhpcy5uYW1lZFdlYXZlUG9pbnRzLmdldCh3ZWF2ZVBvaW50LmlkZW50aWZpZXI/Lm5hbWUgfHwgXCJcIik7XG5cbiAgICAgIGlmIChleGlzdGluZ1dlYXZlUG9pbnQpIHtcbiAgICAgICAgY29uc3QgdHlwZU5hbWUgPVxuICAgICAgICAgIGV4aXN0aW5nV2VhdmVQb2ludCBpbnN0YW5jZW9mIEdhdGhlciA/IFwiZ2F0aGVyXCIgOiBcImNob2ljZVwiO1xuICAgICAgICBjb25zdCBleGlzdGluZ09iajogUGFyc2VkT2JqZWN0ID0gZXhpc3RpbmdXZWF2ZVBvaW50O1xuXG4gICAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgICAgYEEgJHt0eXBlTmFtZX0gd2l0aCB0aGUgc2FtZSBsYWJlbCBuYW1lICcke1xuICAgICAgICAgICAgd2VhdmVQb2ludC5uYW1lXG4gICAgICAgICAgfScgYWxyZWFkeSBleGlzdHMgaW4gdGhpcyBjb250ZXh0IG9uIGxpbmUgJHtcbiAgICAgICAgICAgIGV4aXN0aW5nT2JqLmRlYnVnTWV0YWRhdGFcbiAgICAgICAgICAgICAgPyBleGlzdGluZ09iai5kZWJ1Z01ldGFkYXRhLnN0YXJ0TGluZU51bWJlclxuICAgICAgICAgICAgICA6IFwiTk8gREVCVUcgTUVUQURBVEEgQVZBSUxBQkxFXCJcbiAgICAgICAgICB9YCxcbiAgICAgICAgICB3ZWF2ZVBvaW50IGFzIFBhcnNlZE9iamVjdFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHdlYXZlUG9pbnQuaWRlbnRpZmllcj8ubmFtZSkge1xuICAgICAgICB0aGlzLm5hbWVkV2VhdmVQb2ludHMuc2V0KHdlYXZlUG9pbnQuaWRlbnRpZmllcj8ubmFtZSwgd2VhdmVQb2ludCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBDb25zdHJ1Y3RXZWF2ZUhpZXJhcmNoeUZyb21JbmRlbnRhdGlvbiA9ICgpOiB2b2lkID0+IHtcbiAgICAvLyBGaW5kIG5lc3RlZCBpbmRlbnRhdGlvbiBhbmQgY29udmVydCB0byBhIHByb3BlciBvYmplY3QgaGllcmFyY2h5XG4gICAgLy8gKGkuZS4gaW5kZW50ZWQgY29udGVudCBpcyByZXBsYWNlZCB3aXRoIGEgV2VhdmUgb2JqZWN0IHRoYXQgY29udGFpbnNcbiAgICAvLyB0aGF0IG5lc3RlZCBjb250ZW50KVxuICAgIGxldCBjb250ZW50SWR4ID0gMDtcbiAgICB3aGlsZSAoY29udGVudElkeCA8IHRoaXMuY29udGVudC5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IG9iajogUGFyc2VkT2JqZWN0ID0gdGhpcy5jb250ZW50W2NvbnRlbnRJZHhdO1xuXG4gICAgICAvLyBDaG9pY2Ugb3IgR2F0aGVyXG4gICAgICBpZiAob2JqIGluc3RhbmNlb2YgQ2hvaWNlIHx8IG9iaiBpbnN0YW5jZW9mIEdhdGhlcikge1xuICAgICAgICBjb25zdCB3ZWF2ZVBvaW50OiBJV2VhdmVQb2ludCA9IG9iajtcbiAgICAgICAgY29uc3Qgd2VhdmVJbmRlbnRJZHggPSB3ZWF2ZVBvaW50LmluZGVudGF0aW9uRGVwdGggLSAxO1xuXG4gICAgICAgIC8vIElubmVyIGxldmVsIGluZGVudGF0aW9uIC0gcmVjdXJzZVxuICAgICAgICBpZiAod2VhdmVJbmRlbnRJZHggPiB0aGlzLmJhc2VJbmRlbnRJbmRleCkge1xuICAgICAgICAgIC8vIFN0ZXAgdGhyb3VnaCBjb250ZW50IHVudGlsIGluZGVudCBqdW1wcyBvdXQgYWdhaW5cbiAgICAgICAgICBsZXQgaW5uZXJXZWF2ZVN0YXJ0SWR4ID0gY29udGVudElkeDtcbiAgICAgICAgICB3aGlsZSAoY29udGVudElkeCA8IHRoaXMuY29udGVudC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGlubmVyV2VhdmVPYmogPVxuICAgICAgICAgICAgICBhc09yTnVsbCh0aGlzLmNvbnRlbnRbY29udGVudElkeF0sIENob2ljZSkgfHxcbiAgICAgICAgICAgICAgYXNPck51bGwodGhpcy5jb250ZW50W2NvbnRlbnRJZHhdLCBHYXRoZXIpO1xuICAgICAgICAgICAgaWYgKGlubmVyV2VhdmVPYmogIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgY29uc3QgaW5uZXJJbmRlbnRJZHggPSBpbm5lcldlYXZlT2JqLmluZGVudGF0aW9uRGVwdGggLSAxO1xuICAgICAgICAgICAgICBpZiAoaW5uZXJJbmRlbnRJZHggPD0gdGhpcy5iYXNlSW5kZW50SW5kZXgpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb250ZW50SWR4ICs9IDE7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3Qgd2VhdmVDb250ZW50Q291bnQgPSBjb250ZW50SWR4IC0gaW5uZXJXZWF2ZVN0YXJ0SWR4O1xuICAgICAgICAgIGNvbnN0IHdlYXZlQ29udGVudCA9IHRoaXMuY29udGVudC5zbGljZShcbiAgICAgICAgICAgIGlubmVyV2VhdmVTdGFydElkeCxcbiAgICAgICAgICAgIGlubmVyV2VhdmVTdGFydElkeCArIHdlYXZlQ29udGVudENvdW50XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIHRoaXMuY29udGVudC5zcGxpY2UoaW5uZXJXZWF2ZVN0YXJ0SWR4LCB3ZWF2ZUNvbnRlbnRDb3VudCk7XG5cbiAgICAgICAgICBjb25zdCB3ZWF2ZSA9IG5ldyBXZWF2ZSh3ZWF2ZUNvbnRlbnQsIHdlYXZlSW5kZW50SWR4KTtcbiAgICAgICAgICB0aGlzLkluc2VydENvbnRlbnQoaW5uZXJXZWF2ZVN0YXJ0SWR4LCB3ZWF2ZSk7XG5cbiAgICAgICAgICAvLyBDb250aW51ZSBpdGVyYXRpb24gZnJvbSB0aGlzIHBvaW50XG4gICAgICAgICAgY29udGVudElkeCA9IGlubmVyV2VhdmVTdGFydElkeDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb250ZW50SWR4ICs9IDE7XG4gICAgfVxuICB9O1xuXG4gIC8vIFdoZW4gdGhlIGluZGVudGF0aW9uIHdhc24ndCB0b2xkIHRvIHVzIGF0IGNvbnN0cnVjdGlvbiB0aW1lIHVzaW5nXG4gIC8vIGEgY2hvaWNlIHBvaW50IHdpdGggYSBrbm93biBpbmRlbnRhdGlvbiBsZXZlbCwgd2UgbWF5IGJlIHRvbGQgdG9cbiAgLy8gZGV0ZXJtaW5lIHRoZSBpbmRlbnRhdGlvbiBsZXZlbCBieSBpbmNyZW1lbnRpbmcgZnJvbSBvdXIgY2xvc2VzdCBhbmNlc3Rvci5cbiAgcHVibGljIHJlYWRvbmx5IERldGVybWluZUJhc2VJbmRlbnRhdGlvbkZyb21Db250ZW50ID0gKFxuICAgIGNvbnRlbnRMaXN0OiBQYXJzZWRPYmplY3RbXVxuICApOiBudW1iZXIgPT4ge1xuICAgIGZvciAoY29uc3Qgb2JqIG9mIGNvbnRlbnRMaXN0KSB7XG4gICAgICBpZiAob2JqIGluc3RhbmNlb2YgQ2hvaWNlIHx8IG9iaiBpbnN0YW5jZW9mIEdhdGhlcikge1xuICAgICAgICByZXR1cm4gb2JqLmluZGVudGF0aW9uRGVwdGggLSAxO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE5vIHdlYXZlIHBvaW50cywgc28gaXQgZG9lc24ndCBtYXR0ZXJcbiAgICByZXR1cm4gMDtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgR2VuZXJhdGVSdW50aW1lT2JqZWN0ID0gKCk6IFJ1bnRpbWVDb250YWluZXIgPT4ge1xuICAgIHRoaXMuX3Jvb3RDb250YWluZXIgPSBuZXcgUnVudGltZUNvbnRhaW5lcigpO1xuICAgIHRoaXMuY3VycmVudENvbnRhaW5lciA9IHRoaXMuX3Jvb3RDb250YWluZXI7XG4gICAgdGhpcy5sb29zZUVuZHMgPSBbXTtcbiAgICB0aGlzLmdhdGhlclBvaW50c1RvUmVzb2x2ZSA9IFtdO1xuXG4gICAgLy8gSXRlcmF0ZSB0aHJvdWdoIGNvbnRlbnQgZm9yIHRoZSBibG9jayBhdCB0aGlzIGxldmVsIG9mIGluZGVudGF0aW9uXG4gICAgLy8gIC0gTm9ybWFsIGNvbnRlbnQgaXMgbmVzdGVkIHVuZGVyIENob2ljZXMgYW5kIEdhdGhlcnNcbiAgICAvLyAgLSBCbG9ja3MgdGhhdCBhcmUgZnVydGhlciBpbmRlbnRlZCBjYXVzZSByZWN1cnNpb25cbiAgICAvLyAgLSBLZWVwIHRyYWNrIG9mIGxvb3NlIGVuZHMgc28gdGhhdCB0aGV5IGNhbiBiZSBkaXZlcnRlZCB0byBHYXRoZXJzXG4gICAgZm9yIChjb25zdCBvYmogb2YgdGhpcy5jb250ZW50KSB7XG4gICAgICAvLyBDaG9pY2Ugb3IgR2F0aGVyXG4gICAgICBpZiAob2JqIGluc3RhbmNlb2YgQ2hvaWNlIHx8IG9iaiBpbnN0YW5jZW9mIEdhdGhlcikge1xuICAgICAgICB0aGlzLkFkZFJ1bnRpbWVGb3JXZWF2ZVBvaW50KG9iaiBhcyBJV2VhdmVQb2ludCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBOb24td2VhdmUgcG9pbnRcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIFdlYXZlKSB7XG4gICAgICAgICAgLy8gTmVzdGVkIHdlYXZlXG4gICAgICAgICAgY29uc3Qgd2VhdmUgPSBvYmo7XG4gICAgICAgICAgdGhpcy5BZGRSdW50aW1lRm9yTmVzdGVkV2VhdmUod2VhdmUpO1xuICAgICAgICAgIHRoaXMuZ2F0aGVyUG9pbnRzVG9SZXNvbHZlLnNwbGljZShcbiAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAwLFxuICAgICAgICAgICAgLi4ud2VhdmUuZ2F0aGVyUG9pbnRzVG9SZXNvbHZlXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBPdGhlciBvYmplY3RcbiAgICAgICAgICAvLyBNYXkgYmUgY29tcGxleCBvYmplY3QgdGhhdCBjb250YWlucyBzdGF0ZW1lbnRzIC0gZS5nLiBhIG11bHRpLWxpbmUgY29uZGl0aW9uYWxcbiAgICAgICAgICB0aGlzLkFkZEdlbmVyYWxSdW50aW1lQ29udGVudChvYmoucnVudGltZU9iamVjdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQYXNzIGFueSBsb29zZSBlbmRzIHVwIHRoZSBoaWVyYXJoY3lcbiAgICB0aGlzLlBhc3NMb29zZUVuZHNUb0FuY2VzdG9ycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX3Jvb3RDb250YWluZXI7XG4gIH07XG5cbiAgLy8gRm91bmQgZ2F0aGVyIHBvaW50OlxuICAvLyAgLSBnYXRoZXIgYW55IGxvb3NlIGVuZHNcbiAgLy8gIC0gc2V0IHRoZSBnYXRoZXIgYXMgdGhlIG1haW4gY29udGFpbmVyIHRvIGR1bXAgbmV3IGNvbnRlbnQgaW5cbiAgcHVibGljIHJlYWRvbmx5IEFkZFJ1bnRpbWVGb3JHYXRoZXIgPSAoZ2F0aGVyOiBHYXRoZXIpOiB2b2lkID0+IHtcbiAgICAvLyBEZXRlcm1pbmUgd2hldGhlciB0aGlzIEdhdGhlciBzaG91bGQgYmUgYXV0by1lbnRlcmVkOlxuICAgIC8vICAtIEl0IGlzIGF1dG8tZW50ZXJlZCBpZiB0aGVyZSB3ZXJlIG5vIGNob2ljZXMgaW4gdGhlIGxhc3Qgc2VjdGlvblxuICAgIC8vICAtIEEgc2VjdGlvbiBpcyBcInNpbmNlIHRoZSBwcmV2aW91cyBnYXRoZXJcIiAtIHNvIHJlc2V0IG5vd1xuICAgIGNvbnN0IGF1dG9FbnRlciA9ICF0aGlzLmhhc1NlZW5DaG9pY2VJblNlY3Rpb247XG4gICAgdGhpcy5oYXNTZWVuQ2hvaWNlSW5TZWN0aW9uID0gZmFsc2U7XG5cbiAgICBjb25zdCBnYXRoZXJDb250YWluZXIgPSBnYXRoZXIucnVudGltZUNvbnRhaW5lcjtcblxuICAgIGlmICghZ2F0aGVyLm5hbWUpIHtcbiAgICAgIC8vIFVzZSBkaXNhbGxvd2VkIGNoYXJhY3RlciBzbyBpdCdzIGltcG9zc2libGUgdG8gaGF2ZSBhIG5hbWUgY29sbGlzaW9uXG4gICAgICBnYXRoZXJDb250YWluZXIubmFtZSA9IGBnLSR7dGhpcy5fdW5uYW1lZEdhdGhlckNvdW50fWA7XG4gICAgICB0aGlzLl91bm5hbWVkR2F0aGVyQ291bnQgKz0gMTtcbiAgICB9XG5cbiAgICBpZiAoYXV0b0VudGVyKSB7XG4gICAgICBpZiAoIXRoaXMuY3VycmVudENvbnRhaW5lcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgIH1cblxuICAgICAgLy8gQXV0by1lbnRlcjogaW5jbHVkZSBpbiBtYWluIGNvbnRlbnRcbiAgICAgIHRoaXMuY3VycmVudENvbnRhaW5lci5BZGRDb250ZW50KGdhdGhlckNvbnRhaW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERvbid0IGF1dG8tZW50ZXI6XG4gICAgICAvLyBBZGQgdGhpcyBnYXRoZXIgdG8gdGhlIG1haW4gY29udGVudCwgYnV0IG9ubHkgYWNjZXNzaWJsZVxuICAgICAgLy8gYnkgbmFtZSBzbyB0aGF0IGl0IGlzbid0IHN0ZXBwZWQgaW50byBhdXRvbWF0aWNhbGx5LCBidXQgb25seSB2aWFcbiAgICAgIC8vIGEgZGl2ZXJ0IGZyb20gYSBsb29zZSBlbmQuXG4gICAgICB0aGlzLnJvb3RDb250YWluZXIuQWRkVG9OYW1lZENvbnRlbnRPbmx5KGdhdGhlckNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgLy8gQ29uc3VtZSBsb29zZSBlbmRzOiBkaXZlcnQgdGhlbSB0byB0aGlzIGdhdGhlclxuICAgIGZvciAoY29uc3QgbG9vc2VFbmRXZWF2ZVBvaW50IG9mIHRoaXMubG9vc2VFbmRzKSB7XG4gICAgICBjb25zdCBsb29zZUVuZCA9IGxvb3NlRW5kV2VhdmVQb2ludCBhcyBQYXJzZWRPYmplY3Q7XG5cbiAgICAgIC8vIFNraXAgZ2F0aGVyIGxvb3NlIGVuZHMgdGhhdCBhcmUgYXQgdGhlIHNhbWUgbGV2ZWxcbiAgICAgIC8vIHNpbmNlIHRoZXknbGwgYmUgaGFuZGxlZCBieSB0aGUgYXV0by1lbnRlciBjb2RlIGJlbG93XG4gICAgICAvLyB0aGF0IG9ubHkganVtcHMgaW50byB0aGUgZ2F0aGVyIGlmIChjdXJyZW50IHJ1bnRpbWUgY2hvaWNlcyA9PSAwKVxuICAgICAgaWYgKGxvb3NlRW5kIGluc3RhbmNlb2YgR2F0aGVyKSB7XG4gICAgICAgIGNvbnN0IHByZXZHYXRoZXIgPSBsb29zZUVuZDtcbiAgICAgICAgaWYgKHByZXZHYXRoZXIuaW5kZW50YXRpb25EZXB0aCA9PSBnYXRoZXIuaW5kZW50YXRpb25EZXB0aCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCBkaXZlcnQ6IFJ1bnRpbWVEaXZlcnQgfCBudWxsID0gbnVsbDtcbiAgICAgIGlmIChsb29zZUVuZCBpbnN0YW5jZW9mIERpdmVydCkge1xuICAgICAgICBkaXZlcnQgPSBsb29zZUVuZC5ydW50aW1lT2JqZWN0IGFzIFJ1bnRpbWVEaXZlcnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkaXZlcnQgPSBuZXcgUnVudGltZURpdmVydCgpO1xuICAgICAgICBjb25zdCBsb29zZVdlYXZlUG9pbnQgPSBsb29zZUVuZCBhcyBJV2VhdmVQb2ludDtcbiAgICAgICAgaWYgKCFsb29zZVdlYXZlUG9pbnQucnVudGltZUNvbnRhaW5lcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgbG9vc2VXZWF2ZVBvaW50LnJ1bnRpbWVDb250YWluZXIuQWRkQ29udGVudChkaXZlcnQpO1xuICAgICAgfVxuXG4gICAgICAvLyBQYXNzIGJhY2sga25vd2xlZGdlIG9mIHRoaXMgbG9vc2UgZW5kIGJlaW5nIGRpdmVydGVkXG4gICAgICAvLyB0byB0aGUgRmxvd0Jhc2Ugc28gdGhhdCBpdCBjYW4gbWFpbnRhaW4gYSBsaXN0IG9mIHRoZW0sXG4gICAgICAvLyBhbmQgcmVzb2x2ZSB0aGUgZGl2ZXJ0IHJlZmVyZW5jZXMgbGF0ZXJcbiAgICAgIHRoaXMuZ2F0aGVyUG9pbnRzVG9SZXNvbHZlLnB1c2goXG4gICAgICAgIG5ldyBHYXRoZXJQb2ludFRvUmVzb2x2ZShkaXZlcnQsIGdhdGhlckNvbnRhaW5lcilcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5sb29zZUVuZHMgPSBbXTtcblxuICAgIC8vIFJlcGxhY2UgdGhlIGN1cnJlbnQgY29udGFpbmVyIGl0c2VsZlxuICAgIHRoaXMuY3VycmVudENvbnRhaW5lciA9IGdhdGhlckNvbnRhaW5lcjtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgQWRkUnVudGltZUZvcldlYXZlUG9pbnQgPSAod2VhdmVQb2ludDogSVdlYXZlUG9pbnQpOiB2b2lkID0+IHtcbiAgICAvLyBDdXJyZW50IGxldmVsIEdhdGhlclxuICAgIGlmICh3ZWF2ZVBvaW50IGluc3RhbmNlb2YgR2F0aGVyKSB7XG4gICAgICB0aGlzLkFkZFJ1bnRpbWVGb3JHYXRoZXIod2VhdmVQb2ludCk7XG4gICAgfVxuXG4gICAgLy8gQ3VycmVudCBsZXZlbCBjaG9pY2VcbiAgICBlbHNlIGlmICh3ZWF2ZVBvaW50IGluc3RhbmNlb2YgQ2hvaWNlKSB7XG4gICAgICBpZiAoIXRoaXMuY3VycmVudENvbnRhaW5lcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgIH1cblxuICAgICAgLy8gR2F0aGVycyB0aGF0IGNvbnRhaW4gY2hvaWNlcyBhcmUgbm8gbG9uZ2VyIGxvb3NlIGVuZHNcbiAgICAgIC8vIChzYW1lIGFzIHdoZW4gd2VhdmUgcG9pbnRzIGdldCBuZXN0ZWQgY29udGVudClcbiAgICAgIGlmICh0aGlzLnByZXZpb3VzV2VhdmVQb2ludCBpbnN0YW5jZW9mIEdhdGhlcikge1xuICAgICAgICB0aGlzLmxvb3NlRW5kcy5zcGxpY2UoXG4gICAgICAgICAgdGhpcy5sb29zZUVuZHMuaW5kZXhPZih0aGlzLnByZXZpb3VzV2VhdmVQb2ludCksXG4gICAgICAgICAgMVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGQgY2hvaWNlIHBvaW50IGNvbnRlbnRcbiAgICAgIGNvbnN0IGNob2ljZSA9IHdlYXZlUG9pbnQ7IC8vLCBDaG9pY2UpO1xuXG4gICAgICB0aGlzLmN1cnJlbnRDb250YWluZXIuQWRkQ29udGVudChjaG9pY2UucnVudGltZU9iamVjdCk7XG4gICAgICBpZiAoIWNob2ljZS5pbm5lckNvbnRlbnRDb250YWluZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICB9IC8vZ3VhcmFudGVlZCBub3QgdG8gaGFwcGVuXG5cbiAgICAgIC8vIEFkZCBjaG9pY2UncyBpbm5lciBjb250ZW50IHRvIHNlbGZcbiAgICAgIGNob2ljZS5pbm5lckNvbnRlbnRDb250YWluZXIubmFtZSA9IGBjLSR7dGhpcy5fY2hvaWNlQ291bnR9YDtcbiAgICAgIHRoaXMuY3VycmVudENvbnRhaW5lci5BZGRUb05hbWVkQ29udGVudE9ubHkoY2hvaWNlLmlubmVyQ29udGVudENvbnRhaW5lcik7XG4gICAgICB0aGlzLl9jaG9pY2VDb3VudCArPSAxO1xuXG4gICAgICB0aGlzLmhhc1NlZW5DaG9pY2VJblNlY3Rpb24gPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIEtlZXAgdHJhY2sgb2YgbG9vc2UgZW5kc1xuICAgIHRoaXMuYWRkQ29udGVudFRvUHJldmlvdXNXZWF2ZVBvaW50ID0gZmFsc2U7IC8vIGRlZmF1bHRcbiAgICBpZiAodGhpcy5XZWF2ZVBvaW50SGFzTG9vc2VFbmQod2VhdmVQb2ludCkpIHtcbiAgICAgIHRoaXMubG9vc2VFbmRzLnB1c2god2VhdmVQb2ludCk7XG5cbiAgICAgIGNvbnN0IGxvb3NlQ2hvaWNlID0gYXNPck51bGwod2VhdmVQb2ludCwgQ2hvaWNlKTtcbiAgICAgIGlmIChsb29zZUNob2ljZSkge1xuICAgICAgICB0aGlzLmFkZENvbnRlbnRUb1ByZXZpb3VzV2VhdmVQb2ludCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5wcmV2aW91c1dlYXZlUG9pbnQgPSB3ZWF2ZVBvaW50O1xuICB9O1xuXG4gIC8vIEFkZCBuZXN0ZWQgYmxvY2sgYXQgYSBncmVhdGVyIGluZGVudGF0aW9uIGxldmVsXG4gIHB1YmxpYyByZWFkb25seSBBZGRSdW50aW1lRm9yTmVzdGVkV2VhdmUgPSAobmVzdGVkUmVzdWx0OiBXZWF2ZSk6IHZvaWQgPT4ge1xuICAgIC8vIEFkZCB0aGlzIGlubmVyIGJsb2NrIHRvIGN1cnJlbnQgY29udGFpbmVyXG4gICAgLy8gKGkuZS4gd2l0aGluIHRoZSBtYWluIGNvbnRhaW5lciwgb3Igd2l0aGluIHRoZSBsYXN0IGRlZmluZWQgQ2hvaWNlL0dhdGhlcilcbiAgICB0aGlzLkFkZEdlbmVyYWxSdW50aW1lQ29udGVudChuZXN0ZWRSZXN1bHQucm9vdENvbnRhaW5lcik7XG5cbiAgICAvLyBOb3cgdGhlcmUncyBhIGRlZXBlciBpbmRlbnRhdGlvbiBsZXZlbCwgdGhlIHByZXZpb3VzIHdlYXZlIHBvaW50IGRvZXNuJ3RcbiAgICAvLyBjb3VudCBhcyBhIGxvb3NlIGVuZCAoc2luY2UgaXQgd2lsbCBoYXZlIGNvbnRlbnQgdG8gZ28gdG8pXG4gICAgaWYgKHRoaXMucHJldmlvdXNXZWF2ZVBvaW50ICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmxvb3NlRW5kcy5zcGxpY2UodGhpcy5sb29zZUVuZHMuaW5kZXhPZih0aGlzLnByZXZpb3VzV2VhdmVQb2ludCksIDEpO1xuXG4gICAgICB0aGlzLmFkZENvbnRlbnRUb1ByZXZpb3VzV2VhdmVQb2ludCA9IGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICAvLyBOb3JtYWwgY29udGVudCBnZXRzIGFkZGVkIGludG8gdGhlIGxhdGVzdCBDaG9pY2Ugb3IgR2F0aGVyIGJ5IGRlZmF1bHQsXG4gIC8vIHVubGVzcyB0aGVyZSBoYXNuJ3QgYmVlbiBvbmUgeWV0LlxuICBwdWJsaWMgcmVhZG9ubHkgQWRkR2VuZXJhbFJ1bnRpbWVDb250ZW50ID0gKGNvbnRlbnQ6IFJ1bnRpbWVPYmplY3QpOiB2b2lkID0+IHtcbiAgICAvLyBDb250ZW50IGlzIGFsbG93ZWQgdG8gZXZhbHVhdGUgcnVudGltZU9iamVjdCB0byBudWxsXG4gICAgLy8gKGUuZy4gQXV0aG9yV2FybmluZywgd2hpY2ggZG9lc24ndCBtYWtlIGl0IGludG8gdGhlIHJ1bnRpbWUpXG4gICAgaWYgKGNvbnRlbnQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hZGRDb250ZW50VG9QcmV2aW91c1dlYXZlUG9pbnQpIHtcbiAgICAgIGlmIChcbiAgICAgICAgIXRoaXMucHJldmlvdXNXZWF2ZVBvaW50IHx8XG4gICAgICAgICF0aGlzLnByZXZpb3VzV2VhdmVQb2ludC5ydW50aW1lQ29udGFpbmVyXG4gICAgICApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucHJldmlvdXNXZWF2ZVBvaW50LnJ1bnRpbWVDb250YWluZXIuQWRkQ29udGVudChjb250ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCF0aGlzLmN1cnJlbnRDb250YWluZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY3VycmVudENvbnRhaW5lci5BZGRDb250ZW50KGNvbnRlbnQpO1xuICAgIH1cbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgUGFzc0xvb3NlRW5kc1RvQW5jZXN0b3JzID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLmxvb3NlRW5kcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTZWFyY2ggZm9yIFdlYXZlIGFuY2VzdG9yIHRvIHBhc3MgbG9vc2UgZW5kcyB0byBmb3IgZ2F0aGVyaW5nLlxuICAgIC8vIFRoZXJlIGFyZSB0d28gdHlwZXMgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGN1cnJlbnQgd2VhdmVcbiAgICAvLyBpcyBzZXBhcmF0ZWQgYnkgYSBjb25kaXRpb25hbCBvciBzZXF1ZW5jZS5cbiAgICAvLyAgLSBBbiBcImlubmVyXCIgd2VhdmUgaXMgb25lIHRoYXQgaXMgZGlyZWN0bHkgY29ubmVjdGVkIHRvIHRoZSBjdXJyZW50XG4gICAgLy8gICAgd2VhdmUgLSBpLmUuIHlvdSBkb24ndCBoYXZlIHRvIHBhc3MgdGhyb3VnaCBhIGNvbmRpdGlvbmFsIG9yXG4gICAgLy8gICAgc2VxdWVuY2UgdG8gZ2V0IHRvIGl0LiBXZSdyZSBhbGxvd2VkIHRvIHBhc3MgYWxsIGxvb3NlIGVuZHMgdG9cbiAgICAvLyAgICBvbmUgb2YgdGhlc2UuXG4gICAgLy8gIC0gQW4gXCJvdXRlclwiIHdlYXZlIGlzIG9uZSB0aGF0IGlzIG91dHNpZGUgb2YgYSBjb25kaXRpb25hbC9zZXF1ZW5jZVxuICAgIC8vICAgIHRoYXQgdGhlIGN1cnJlbnQgd2VhdmUgaXMgbmVzdGVkIHdpdGhpbi4gV2UncmUgb25seSBhbGxvd2VkIHRvXG4gICAgLy8gICAgcGFzcyBnYXRoZXJzIChpLmUuICdub3JtYWwgZmxvdycpIGxvb3NlIGVuZHMgdXAgdGhlcmUsIG5vdCBub3JtYWxcbiAgICAvLyAgICBjaG9pY2VzLiBUaGUgcnVsZSBpcyB0aGF0IGNob2ljZXMgaGF2ZSB0byBiZSBkaXZlcnRlZCBleHBsaWNpdGx5XG4gICAgLy8gICAgYnkgdGhlIGF1dGhvciBzaW5jZSBpdCdzIGFtYmlndW91cyB3aGVyZSBmbG93IHNob3VsZCBnbyBvdGhlcndpc2UuXG4gICAgLy9cbiAgICAvLyBlLmcuOlxuICAgIC8vXG4gICAgLy8gICAtIHRvcCAgICAgICAgICAgICAgICAgICAgICAgPC0gZS5nLiBvdXRlciB3ZWF2ZVxuICAgIC8vICAge3RydWU6XG4gICAgLy8gICAgICAgKiBjaG9pY2UgICAgICAgICAgICAgICAgPC0gZS5nLiBpbm5lciB3ZWF2ZVxuICAgIC8vICAgICAgICAgKiAqIGNob2ljZSAyXG4gICAgLy8gICAgICAgICAgICAgbW9yZSBjb250ZW50ICAgICAgPC0gZS5nLiBjdXJyZW50IHdlYXZlXG4gICAgLy8gICAgICAgKiBjaG9pY2UgMlxuICAgIC8vICAgfVxuICAgIC8vICAgLSBtb3JlIG9mIG91dGVyIHdlYXZlXG4gICAgLy9cbiAgICBsZXQgY2xvc2VzdElubmVyV2VhdmVBbmNlc3RvcjogV2VhdmUgfCBudWxsID0gbnVsbDtcbiAgICBsZXQgY2xvc2VzdE91dGVyV2VhdmVBbmNlc3RvcjogV2VhdmUgfCBudWxsID0gbnVsbDtcblxuICAgIC8vIEZpbmQgaW5uZXIgYW5kIG91dGVyIGFuY2VzdG9yIHdlYXZlcyBhcyBkZWZpbmVkIGFib3ZlLlxuICAgIGxldCBuZXN0ZWQgPSBmYWxzZTtcbiAgICBmb3IgKFxuICAgICAgbGV0IGFuY2VzdG9yID0gdGhpcy5wYXJlbnQ7XG4gICAgICBhbmNlc3RvciAhPT0gbnVsbDtcbiAgICAgIGFuY2VzdG9yID0gYW5jZXN0b3IucGFyZW50XG4gICAgKSB7XG4gICAgICAvLyBGb3VuZCBhbmNlc3Rvcj9cbiAgICAgIGNvbnN0IHdlYXZlQW5jZXN0b3IgPSBhc09yTnVsbChhbmNlc3RvciwgV2VhdmUpO1xuICAgICAgaWYgKHdlYXZlQW5jZXN0b3IpIHtcbiAgICAgICAgaWYgKCFuZXN0ZWQgJiYgY2xvc2VzdElubmVyV2VhdmVBbmNlc3RvciA9PT0gbnVsbCkge1xuICAgICAgICAgIGNsb3Nlc3RJbm5lcldlYXZlQW5jZXN0b3IgPSB3ZWF2ZUFuY2VzdG9yO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5lc3RlZCAmJiBjbG9zZXN0T3V0ZXJXZWF2ZUFuY2VzdG9yID09PSBudWxsKSB7XG4gICAgICAgICAgY2xvc2VzdE91dGVyV2VhdmVBbmNlc3RvciA9IHdlYXZlQW5jZXN0b3I7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gV2VhdmVzIG5lc3RlZCB3aXRoaW4gU2VxdWVuY2VzIG9yIENvbmRpdGlvbmFscyBhcmVcbiAgICAgIC8vIFwic2VhbGVkXCIgLSBhbnkgbG9vc2UgZW5kcyByZXF1aXJlIGV4cGxpY2l0IGRpdmVydHMuXG4gICAgICBpZiAoYW5jZXN0b3IgaW5zdGFuY2VvZiBTZXF1ZW5jZSB8fCBhbmNlc3RvciBpbnN0YW5jZW9mIENvbmRpdGlvbmFsKSB7XG4gICAgICAgIG5lc3RlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTm8gd2VhdmUgdG8gcGFzcyBsb29zZSBlbmRzIHRvIGF0IGFsbD9cbiAgICBpZiAoXG4gICAgICBjbG9zZXN0SW5uZXJXZWF2ZUFuY2VzdG9yID09PSBudWxsICYmXG4gICAgICBjbG9zZXN0T3V0ZXJXZWF2ZUFuY2VzdG9yID09PSBudWxsXG4gICAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRm9sbG93IGxvb3NlIGVuZCBwYXNzaW5nIGxvZ2ljIGFzIGRlZmluZWQgYWJvdmVcbiAgICBmb3IgKGxldCBpaSA9IHRoaXMubG9vc2VFbmRzLmxlbmd0aCAtIDE7IGlpID49IDA7IGlpIC09IDEpIHtcbiAgICAgIGNvbnN0IGxvb3NlRW5kID0gdGhpcy5sb29zZUVuZHNbaWldO1xuICAgICAgbGV0IHJlY2VpdmVkID0gZmFsc2U7XG5cbiAgICAgIGlmIChuZXN0ZWQpIHtcbiAgICAgICAgLy8gVGhpcyB3ZWF2ZSBpcyBuZXN0ZWQgd2l0aGluIGEgY29uZGl0aW9uYWwgb3Igc2VxdWVuY2U6XG4gICAgICAgIC8vICAtIGNob2ljZXMgY2FuIG9ubHkgYmUgcGFzc2VkIHVwIHRvIGRpcmVjdCBhbmNlc3RvciAoXCJpbm5lclwiKSB3ZWF2ZXNcbiAgICAgICAgLy8gIC0gZ2F0aGVycyBjYW4gYmUgcGFzc2VkIHVwIHRvIGVpdGhlciwgYnV0IGZhdm91ciB0aGUgY2xvc2VyIChpbm5lcikgd2VhdmVcbiAgICAgICAgLy8gICAgaWYgdGhlcmUgaXMgb25lXG4gICAgICAgIGlmIChsb29zZUVuZCBpbnN0YW5jZW9mIENob2ljZSAmJiBjbG9zZXN0SW5uZXJXZWF2ZUFuY2VzdG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgY2xvc2VzdElubmVyV2VhdmVBbmNlc3Rvci5SZWNlaXZlTG9vc2VFbmQobG9vc2VFbmQpO1xuICAgICAgICAgIHJlY2VpdmVkID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICghKGxvb3NlRW5kIGluc3RhbmNlb2YgQ2hvaWNlKSkge1xuICAgICAgICAgIGNvbnN0IHJlY2VpdmluZ1dlYXZlID1cbiAgICAgICAgICAgIGNsb3Nlc3RJbm5lcldlYXZlQW5jZXN0b3IgfHwgY2xvc2VzdE91dGVyV2VhdmVBbmNlc3RvcjtcbiAgICAgICAgICBpZiAocmVjZWl2aW5nV2VhdmUgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHJlY2VpdmluZ1dlYXZlLlJlY2VpdmVMb29zZUVuZChsb29zZUVuZCk7XG4gICAgICAgICAgICByZWNlaXZlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBObyBuZXN0aW5nLCBhbGwgbG9vc2UgZW5kcyBjYW4gYmUgc2FmZWx5IHBhc3NlZCB1cFxuICAgICAgICBpZiAoY2xvc2VzdElubmVyV2VhdmVBbmNlc3Rvcj8uaGFzT3duUHJvcGVydHkoXCJSZWNlaXZlTG9vc2VFbmRcIikpIHtcbiAgICAgICAgICBjbG9zZXN0SW5uZXJXZWF2ZUFuY2VzdG9yIS5SZWNlaXZlTG9vc2VFbmQobG9vc2VFbmQpO1xuICAgICAgICB9XG4gICAgICAgIHJlY2VpdmVkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlY2VpdmVkKSB7XG4gICAgICAgIHRoaXMubG9vc2VFbmRzLnNwbGljZShpaSwgMSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBSZWNlaXZlTG9vc2VFbmQgPSAoY2hpbGRXZWF2ZUxvb3NlRW5kOiBJV2VhdmVQb2ludCk6IHZvaWQgPT4ge1xuICAgIHRoaXMubG9vc2VFbmRzLnB1c2goY2hpbGRXZWF2ZUxvb3NlRW5kKTtcbiAgfTtcblxuICBwdWJsaWMgUmVzb2x2ZVJlZmVyZW5jZXMoY29udGV4dDogU3RvcnkpOiB2b2lkIHtcbiAgICBzdXBlci5SZXNvbHZlUmVmZXJlbmNlcyhjb250ZXh0KTtcblxuICAgIC8vIENoZWNrIHRoYXQgY2hvaWNlcyBuZXN0ZWQgd2l0aGluIGNvbmRpdGlvbmFscyBhbmQgc2VxdWVuY2VzIGFyZSB0ZXJtaW5hdGVkXG4gICAgaWYgKHRoaXMubG9vc2VFbmRzICE9PSBudWxsICYmIHRoaXMubG9vc2VFbmRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGxldCBpc05lc3RlZFdlYXZlID0gZmFsc2U7XG4gICAgICBmb3IgKFxuICAgICAgICBsZXQgYW5jZXN0b3IgPSB0aGlzLnBhcmVudDtcbiAgICAgICAgYW5jZXN0b3IgIT09IG51bGw7XG4gICAgICAgIGFuY2VzdG9yID0gYW5jZXN0b3IucGFyZW50XG4gICAgICApIHtcbiAgICAgICAgaWYgKGFuY2VzdG9yIGluc3RhbmNlb2YgU2VxdWVuY2UgfHwgYW5jZXN0b3IgaW5zdGFuY2VvZiBDb25kaXRpb25hbCkge1xuICAgICAgICAgIGlzTmVzdGVkV2VhdmUgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChpc05lc3RlZFdlYXZlKSB7XG4gICAgICAgIHRoaXMuVmFsaWRhdGVUZXJtaW5hdGlvbih0aGlzLkJhZE5lc3RlZFRlcm1pbmF0aW9uSGFuZGxlcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBnYXRoZXJQb2ludCBvZiB0aGlzLmdhdGhlclBvaW50c1RvUmVzb2x2ZSkge1xuICAgICAgZ2F0aGVyUG9pbnQuZGl2ZXJ0LnRhcmdldFBhdGggPSBnYXRoZXJQb2ludC50YXJnZXRSdW50aW1lT2JqLnBhdGg7XG4gICAgfVxuXG4gICAgdGhpcy5DaGVja0ZvcldlYXZlUG9pbnROYW1pbmdDb2xsaXNpb25zKCk7XG4gIH1cblxuICBwdWJsaWMgcmVhZG9ubHkgV2VhdmVQb2ludE5hbWVkID0gKG5hbWU6IHN0cmluZyk6IElXZWF2ZVBvaW50IHwgbnVsbCA9PiB7XG4gICAgaWYgKCF0aGlzLm5hbWVkV2VhdmVQb2ludHMpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCB3ZWF2ZVBvaW50UmVzdWx0OiBJV2VhdmVQb2ludCB8IG51bGwgfCB1bmRlZmluZWQgPVxuICAgICAgdGhpcy5uYW1lZFdlYXZlUG9pbnRzLmdldChuYW1lKTtcbiAgICBpZiAod2VhdmVQb2ludFJlc3VsdCkge1xuICAgICAgcmV0dXJuIHdlYXZlUG9pbnRSZXN1bHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLy8gR2xvYmFsIFZBUnMgYW5kIENPTlNUcyBhcmUgdHJlYXRlZCBhcyBcIm91dHNpZGUgb2YgdGhlIGZsb3dcIlxuICAvLyB3aGVuIGl0ZXJhdGluZyBvdmVyIGNvbnRlbnQgdGhhdCBmb2xsb3dzIGxvb3NlIGVuZHNcbiAgcHVibGljIHJlYWRvbmx5IElzR2xvYmFsRGVjbGFyYXRpb24gPSAob2JqOiBQYXJzZWRPYmplY3QpID0+IHtcbiAgICBjb25zdCB2YXJBc3MgPSBhc09yTnVsbChvYmosIFZhcmlhYmxlQXNzaWdubWVudCk7XG4gICAgaWYgKHZhckFzcyAmJiB2YXJBc3MuaXNHbG9iYWxEZWNsYXJhdGlvbiAmJiB2YXJBc3MuaXNEZWNsYXJhdGlvbikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY29uc3QgY29uc3REZWNsID0gYXNPck51bGwob2JqLCBDb25zdGFudERlY2xhcmF0aW9uKTtcbiAgICBpZiAoY29uc3REZWNsKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgLy8gV2hpbGUgYW5hbHlzaW5nIGZpbmFsIGxvb3NlIGVuZHMsIHdlIGxvb2sgdG8gc2VlIHdoZXRoZXIgdGhlcmVcbiAgLy8gYXJlIGFueSBkaXZlcnRzIGV0YyB3aGljaCBjaG9pY2VzIGV0YyBkaXZlcnQgZnJvbVxuICBwdWJsaWMgcmVhZG9ubHkgQ29udGVudFRoYXRGb2xsb3dzV2VhdmVQb2ludCA9IChcbiAgICB3ZWF2ZVBvaW50OiBJV2VhdmVQb2ludFxuICApOiBQYXJzZWRPYmplY3RbXSA9PiB7XG4gICAgY29uc3QgcmV0dXJuZWQgPSBbXTtcbiAgICBjb25zdCBvYmogPSB3ZWF2ZVBvaW50IGFzIFBhcnNlZE9iamVjdDtcblxuICAgIC8vIElubmVyIGNvbnRlbnQgZmlyc3QgKGUuZy4gZm9yIGEgY2hvaWNlKVxuICAgIGlmIChvYmouY29udGVudCAhPT0gbnVsbCkge1xuICAgICAgZm9yIChjb25zdCBjb250ZW50T2JqIG9mIG9iai5jb250ZW50KSB7XG4gICAgICAgIC8vIEdsb2JhbCBWQVJzIGFuZCBDT05TVHMgYXJlIHRyZWF0ZWQgYXMgXCJvdXRzaWRlIG9mIHRoZSBmbG93XCJcbiAgICAgICAgaWYgKHRoaXMuSXNHbG9iYWxEZWNsYXJhdGlvbihjb250ZW50T2JqKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuZWQucHVzaChjb250ZW50T2JqKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBwYXJlbnRXZWF2ZSA9IGFzT3JOdWxsKG9iai5wYXJlbnQsIFdlYXZlKTtcbiAgICBpZiAocGFyZW50V2VhdmUgPT09IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkIHdlYXZlIHBvaW50IHBhcmVudCB0byBiZSB3ZWF2ZT9cIik7XG4gICAgfVxuXG4gICAgY29uc3Qgd2VhdmVQb2ludElkeCA9IHBhcmVudFdlYXZlLmNvbnRlbnQuaW5kZXhPZihvYmopO1xuICAgIGZvciAobGV0IGlpID0gd2VhdmVQb2ludElkeCArIDE7IGlpIDwgcGFyZW50V2VhdmUuY29udGVudC5sZW5ndGg7IGlpICs9IDEpIHtcbiAgICAgIGNvbnN0IGxhdGVyT2JqID0gcGFyZW50V2VhdmUuY29udGVudFtpaV07XG5cbiAgICAgIC8vIEdsb2JhbCBWQVJzIGFuZCBDT05TVHMgYXJlIHRyZWF0ZWQgYXMgXCJvdXRzaWRlIG9mIHRoZSBmbG93XCJcbiAgICAgIGlmICh0aGlzLklzR2xvYmFsRGVjbGFyYXRpb24obGF0ZXJPYmopKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBFbmQgb2YgdGhlIGN1cnJlbnQgZmxvd1xuICAgICAgLy8gaWYgKGxhdGVyT2JqIGluc3RhbmNlb2YgSVdlYXZlUG9pbnQpIC8vIGNhbm5vdCB0ZXN0IG9uIGludGVyZmFjZSBpbiB0c1xuICAgICAgaWYgKGxhdGVyT2JqIGluc3RhbmNlb2YgQ2hvaWNlIHx8IGxhdGVyT2JqIGluc3RhbmNlb2YgR2F0aGVyKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICAvLyBPdGhlciB3ZWF2ZXMgd2lsbCBiZSBoYXZlIHRoZWlyIG93biBsb29zZSBlbmRzXG4gICAgICBpZiAobGF0ZXJPYmogaW5zdGFuY2VvZiBXZWF2ZSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuZWQucHVzaChsYXRlck9iaik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldHVybmVkO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBWYWxpZGF0ZVRlcm1pbmF0aW9uID0gKFxuICAgIGJhZFRlcm1pbmF0aW9uSGFuZGxlcjogQmFkVGVybWluYXRpb25IYW5kbGVyXG4gICk6IHZvaWQgPT4ge1xuICAgIC8vIERvbid0IHdvcnJ5IGlmIHRoZSBsYXN0IG9iamVjdCBpbiB0aGUgZmxvdyBpcyBhIFwiVE9ET1wiLFxuICAgIC8vIGV2ZW4gaWYgdGhlcmUgYXJlIG90aGVyIGxvb3NlIGVuZHMgaW4gb3RoZXIgcGxhY2VzXG4gICAgaWYgKHRoaXMubGFzdFBhcnNlZFNpZ25pZmljYW50T2JqZWN0IGluc3RhbmNlb2YgQXV0aG9yV2FybmluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEJ5IG5vdywgYW55IHN1Yi13ZWF2ZXMgd2lsbCBoYXZlIHBhc3NlZCBsb29zZSBlbmRzIHVwIHRvIHRoZSByb290IHdlYXZlICh0aGlzKS5cbiAgICAvLyBTbyB0aGVyZSBhcmUgMiBwb3NzaWJsZSBzaXR1YXRpb25zOlxuICAgIC8vICAtIFRoZXJlIGFyZSBsb29zZSBlbmRzIGZyb20gc29tZXdoZXJlIGluIHRoZSBmbG93LlxuICAgIC8vICAgIFRoZXNlIGFyZW4ndCBuZWNlc3NhcmlseSBcInJlYWxcIiBsb29zZSBlbmRzIC0gdGhleSdyZSB3ZWF2ZSBwb2ludHNcbiAgICAvLyAgICB0aGF0IGRvbid0IGNvbm5lY3QgdG8gYW55IGxvd2VyIHdlYXZlIHBvaW50cywgc28gd2UganVzdFxuICAgIC8vICAgIGhhdmUgdG8gY2hlY2sgdGhhdCB0aGV5IHRlcm1pbmF0ZSBwcm9wZXJseS5cbiAgICAvLyAgLSBUaGlzIHdlYXZlIGlzIGp1c3QgYSBsaXN0IG9mIGNvbnRlbnQgd2l0aCBubyBhY3R1YWwgd2VhdmUgcG9pbnRzLFxuICAgIC8vICAgIHNvIHdlIGp1c3QgbmVlZCB0byBjaGVjayB0aGF0IHRoZSBsaXN0IG9mIGNvbnRlbnQgdGVybWluYXRlcy5cblxuICAgIGNvbnN0IGhhc0xvb3NlRW5kczogYm9vbGVhbiA9XG4gICAgICB0aGlzLmxvb3NlRW5kcyAhPT0gbnVsbCAmJiB0aGlzLmxvb3NlRW5kcy5sZW5ndGggPiAwO1xuXG4gICAgaWYgKGhhc0xvb3NlRW5kcykge1xuICAgICAgZm9yIChjb25zdCBsb29zZUVuZCBvZiB0aGlzLmxvb3NlRW5kcykge1xuICAgICAgICBjb25zdCBsb29zZUVuZEZsb3cgPSB0aGlzLkNvbnRlbnRUaGF0Rm9sbG93c1dlYXZlUG9pbnQobG9vc2VFbmQpO1xuICAgICAgICB0aGlzLlZhbGlkYXRlRmxvd09mT2JqZWN0c1Rlcm1pbmF0ZXMoXG4gICAgICAgICAgbG9vc2VFbmRGbG93LFxuICAgICAgICAgIGxvb3NlRW5kIGFzIFBhcnNlZE9iamVjdCxcbiAgICAgICAgICBiYWRUZXJtaW5hdGlvbkhhbmRsZXJcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm8gbG9vc2UgZW5kcy4uLiBpcyB0aGVyZSBhbnkgaW5uZXIgd2VhdmluZyBhdCBhbGw/XG4gICAgICAvLyBJZiBub3QsIG1ha2Ugc3VyZSB0aGUgc2luZ2xlIGNvbnRlbnQgc3RyZWFtIGlzIHRlcm1pbmF0ZWQgY29ycmVjdGx5XG4gICAgICAvL1xuICAgICAgLy8gSWYgdGhlcmUncyBhbnkgYWN0dWFsIHdlYXZpbmcsIGFzc3VtZSB0aGF0IGNvbnRlbnQgaXNcbiAgICAgIC8vIHRlcm1pbmF0ZWQgY29ycmVjdGx5IHNpbmNlIHdlIHdvdWxkJ3ZlIGhhZCBhIGxvb3NlIGVuZCBvdGhlcndpc2VcbiAgICAgIGZvciAoY29uc3Qgb2JqIG9mIHRoaXMuY29udGVudCkge1xuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgQ2hvaWNlIHx8IG9iaiBpbnN0YW5jZW9mIERpdmVydCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBTdHJhaWdodCBsaW5lYXIgZmxvdz8gQ2hlY2sgaXQgdGVybWluYXRlc1xuICAgICAgdGhpcy5WYWxpZGF0ZUZsb3dPZk9iamVjdHNUZXJtaW5hdGVzKFxuICAgICAgICB0aGlzLmNvbnRlbnQsXG4gICAgICAgIHRoaXMsXG4gICAgICAgIGJhZFRlcm1pbmF0aW9uSGFuZGxlclxuICAgICAgKTtcbiAgICB9XG4gIH07XG5cbiAgcmVhZG9ubHkgQmFkTmVzdGVkVGVybWluYXRpb25IYW5kbGVyOiBCYWRUZXJtaW5hdGlvbkhhbmRsZXIgPSAoXG4gICAgdGVybWluYXRpbmdPYmpcbiAgKSA9PiB7XG4gICAgbGV0IGNvbmRpdGlvbmFsOiBDb25kaXRpb25hbCB8IG51bGwgPSBudWxsO1xuICAgIGZvciAoXG4gICAgICBsZXQgYW5jZXN0b3IgPSB0ZXJtaW5hdGluZ09iai5wYXJlbnQ7XG4gICAgICBhbmNlc3RvciAhPT0gbnVsbDtcbiAgICAgIGFuY2VzdG9yID0gYW5jZXN0b3IucGFyZW50XG4gICAgKSB7XG4gICAgICBpZiAoYW5jZXN0b3IgaW5zdGFuY2VvZiBTZXF1ZW5jZSB8fCBhbmNlc3RvciBpbnN0YW5jZW9mIENvbmRpdGlvbmFsKSB7XG4gICAgICAgIGNvbmRpdGlvbmFsID0gYXNPck51bGwoYW5jZXN0b3IsIENvbmRpdGlvbmFsKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGVycm9yTXNnID1cbiAgICAgIFwiQ2hvaWNlcyBuZXN0ZWQgaW4gY29uZGl0aW9uYWxzIG9yIHNlcXVlbmNlcyBuZWVkIHRvIGV4cGxpY2l0bHkgZGl2ZXJ0IGFmdGVyd2FyZHMuXCI7XG5cbiAgICAvLyBUdXRvcmlhbGlzZSBwcm9wZXIgY2hvaWNlIHN5bnRheCBpZiB0aGlzIGxvb2tzIGxpa2UgYSBzaW5nbGUgY2hvaWNlIHdpdGhpbiBhIGNvbmRpdGlvbiwgZS5nLlxuICAgIC8vIHsgY29uZGl0aW9uOlxuICAgIC8vICAgICAgKiBjaG9pY2VcbiAgICAvLyB9XG4gICAgaWYgKGNvbmRpdGlvbmFsICE9PSBudWxsKSB7XG4gICAgICBsZXQgbnVtQ2hvaWNlcyA9IGNvbmRpdGlvbmFsLkZpbmRBbGw8Q2hvaWNlPihDaG9pY2UpKCkubGVuZ3RoO1xuICAgICAgaWYgKG51bUNob2ljZXMgPT09IDEpIHtcbiAgICAgICAgZXJyb3JNc2cgPSBgQ2hvaWNlcyB3aXRoIGNvbmRpdGlvbnMgc2hvdWxkIGJlIHdyaXR0ZW46ICcqIHtjb25kaXRpb259IGNob2ljZScuIE90aGVyd2lzZSwgJHtlcnJvck1zZy50b0xvd2VyQ2FzZSgpfWA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5FcnJvcihlcnJvck1zZywgdGVybWluYXRpbmdPYmopO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBWYWxpZGF0ZUZsb3dPZk9iamVjdHNUZXJtaW5hdGVzID0gKFxuICAgIG9iakZsb3c6IFBhcnNlZE9iamVjdFtdLFxuICAgIGRlZmF1bHRPYmo6IFBhcnNlZE9iamVjdCxcbiAgICBiYWRUZXJtaW5hdGlvbkhhbmRsZXI6IEJhZFRlcm1pbmF0aW9uSGFuZGxlclxuICApID0+IHtcbiAgICBsZXQgdGVybWluYXRlZCA9IGZhbHNlO1xuICAgIGxldCB0ZXJtaW5hdGluZ09iajogUGFyc2VkT2JqZWN0ID0gZGVmYXVsdE9iajtcbiAgICBmb3IgKGNvbnN0IGZsb3dPYmogb2Ygb2JqRmxvdykge1xuICAgICAgY29uc3QgZGl2ZXJ0ID0gZmxvd09iai5GaW5kKERpdmVydCkoXG4gICAgICAgIChkKSA9PlxuICAgICAgICAgICFkLmlzVGhyZWFkICYmXG4gICAgICAgICAgIWQuaXNUdW5uZWwgJiZcbiAgICAgICAgICAhZC5pc0Z1bmN0aW9uQ2FsbCAmJlxuICAgICAgICAgICEoZC5wYXJlbnQgaW5zdGFuY2VvZiBEaXZlcnRUYXJnZXQpXG4gICAgICApO1xuXG4gICAgICBpZiAoZGl2ZXJ0ICE9PSBudWxsKSB7XG4gICAgICAgIHRlcm1pbmF0ZWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoZmxvd09iai5GaW5kKFR1bm5lbE9ud2FyZHMpKCkgIT0gbnVsbCkge1xuICAgICAgICB0ZXJtaW5hdGVkID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHRlcm1pbmF0aW5nT2JqID0gZmxvd09iajtcbiAgICB9XG5cbiAgICBpZiAoIXRlcm1pbmF0ZWQpIHtcbiAgICAgIC8vIEF1dGhvciBoYXMgbGVmdCBhIG5vdGUgdG8gc2VsZiBoZXJlIC0gY2xlYXJseSB3ZSBkb24ndCBuZWVkXG4gICAgICAvLyB0byBsZWF2ZSB0aGVtIHdpdGggYW5vdGhlciB3YXJuaW5nIHNpbmNlIHRoZXkga25vdyB3aGF0IHRoZXkncmUgZG9pbmcuXG4gICAgICBpZiAodGVybWluYXRpbmdPYmogaW5zdGFuY2VvZiBBdXRob3JXYXJuaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgYmFkVGVybWluYXRpb25IYW5kbGVyKHRlcm1pbmF0aW5nT2JqKTtcbiAgICB9XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IFdlYXZlUG9pbnRIYXNMb29zZUVuZCA9IChcbiAgICB3ZWF2ZVBvaW50OiBJV2VhdmVQb2ludFxuICApOiBib29sZWFuID0+IHtcbiAgICAvLyBObyBjb250ZW50LCBtdXN0IGJlIGEgbG9vc2UgZW5kLlxuICAgIGlmICh3ZWF2ZVBvaW50LmNvbnRlbnQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIElmIGEgd2VhdmUgcG9pbnQgaXMgZGl2ZXJ0ZWQgZnJvbSwgaXQgZG9lc24ndCBoYXZlIGEgbG9vc2UgZW5kLlxuICAgIC8vIERldGVjdCBhIGRpdmVydCBvYmplY3Qgd2l0aGluIGEgd2VhdmVQb2ludCdzIG1haW4gY29udGVudFxuICAgIC8vIFdvcmsgYmFja3dhcmRzIHNpbmNlIHdlJ3JlIHJlYWxseSBpbnRlcmVzdGVkIGluIHRoZSBlbmQsXG4gICAgLy8gYWx0aG91Z2ggaXQgZG9lc24ndCBhY3R1YWxseSBtYWtlIGEgZGlmZmVyZW5jZSFcbiAgICAvLyAoY29udGVudCBhZnRlciBhIGRpdmVydCB3aWxsIHNpbXBseSBiZSBpbmFjY2Vzc2libGUpXG4gICAgZm9yIChsZXQgaWkgPSB3ZWF2ZVBvaW50LmNvbnRlbnQubGVuZ3RoIC0gMTsgaWkgPj0gMDsgLS1paSkge1xuICAgICAgbGV0IGlubmVyRGl2ZXJ0ID0gYXNPck51bGwod2VhdmVQb2ludC5jb250ZW50W2lpXSwgRGl2ZXJ0KTtcbiAgICAgIGlmIChpbm5lckRpdmVydCkge1xuICAgICAgICBjb25zdCB3aWxsUmV0dXJuID1cbiAgICAgICAgICBpbm5lckRpdmVydC5pc1RocmVhZCB8fFxuICAgICAgICAgIGlubmVyRGl2ZXJ0LmlzVHVubmVsIHx8XG4gICAgICAgICAgaW5uZXJEaXZlcnQuaXNGdW5jdGlvbkNhbGw7XG4gICAgICAgIGlmICghd2lsbFJldHVybikge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8vIEVuZm9yY2UgcnVsZSB0aGF0IHdlYXZlIHBvaW50cyBtdXN0IG5vdCBoYXZlIHRoZSBzYW1lXG4gIC8vIG5hbWUgYXMgYW55IHN0aXRjaGVzIG9yIGtub3RzIHVwd2FyZHMgaW4gdGhlIGhpZXJhcmNoeVxuICBwdWJsaWMgcmVhZG9ubHkgQ2hlY2tGb3JXZWF2ZVBvaW50TmFtaW5nQ29sbGlzaW9ucyA9ICgpOiB2b2lkID0+IHtcbiAgICBpZiAoIXRoaXMubmFtZWRXZWF2ZVBvaW50cykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGFuY2VzdG9yRmxvd3MgPSBbXTtcbiAgICBmb3IgKGNvbnN0IG9iaiBvZiB0aGlzLmFuY2VzdHJ5KSB7XG4gICAgICBjb25zdCBmbG93ID0gYXNPck51bGwob2JqLCBGbG93QmFzZSk7XG4gICAgICBpZiAoZmxvdykge1xuICAgICAgICBhbmNlc3RvckZsb3dzLnB1c2goZmxvdyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IFt3ZWF2ZVBvaW50TmFtZSwgd2VhdmVQb2ludF0gb2YgdGhpcy5uYW1lZFdlYXZlUG9pbnRzKSB7XG4gICAgICBmb3IgKGNvbnN0IGZsb3cgb2YgYW5jZXN0b3JGbG93cykge1xuICAgICAgICAvLyBTaGFsbG93IHNlYXJjaFxuICAgICAgICBjb25zdCBvdGhlckNvbnRlbnRXaXRoTmFtZSA9XG4gICAgICAgICAgZmxvdy5Db250ZW50V2l0aE5hbWVBdExldmVsKHdlYXZlUG9pbnROYW1lKTtcbiAgICAgICAgaWYgKG90aGVyQ29udGVudFdpdGhOYW1lICYmIG90aGVyQ29udGVudFdpdGhOYW1lICE9PSB3ZWF2ZVBvaW50KSB7XG4gICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBgJHt3ZWF2ZVBvaW50LkdldFR5cGUoKX0gJyR7d2VhdmVQb2ludE5hbWV9JyBoYXMgdGhlIHNhbWUgbGFiZWwgbmFtZSBhcyBhICR7b3RoZXJDb250ZW50V2l0aE5hbWUuR2V0VHlwZSgpfSAob24gJHtcbiAgICAgICAgICAgIG90aGVyQ29udGVudFdpdGhOYW1lLmRlYnVnTWV0YWRhdGFcbiAgICAgICAgICB9KWA7XG4gICAgICAgICAgdGhpcy5FcnJvcihlcnJvck1zZywgd2VhdmVQb2ludCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG4iLCJpbXBvcnQgeyBDb250YWluZXIgYXMgUnVudGltZUNvbnRhaW5lciB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvQ29udGFpbmVyXCI7XG5pbXBvcnQgeyBDb250cm9sQ29tbWFuZCBhcyBSdW50aW1lQ29udHJvbENvbW1hbmQgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL0NvbnRyb2xDb21tYW5kXCI7XG5pbXBvcnQgeyBEaXZlcnQgYXMgUnVudGltZURpdmVydCB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvRGl2ZXJ0XCI7XG5pbXBvcnQgeyBFeHByZXNzaW9uIH0gZnJvbSBcIi4uL0V4cHJlc3Npb24vRXhwcmVzc2lvblwiO1xuaW1wb3J0IHsgUGFyc2VkT2JqZWN0IH0gZnJvbSBcIi4uL09iamVjdFwiO1xuaW1wb3J0IHsgSW5rT2JqZWN0IGFzIFJ1bnRpbWVPYmplY3QgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL09iamVjdFwiO1xuaW1wb3J0IHsgTmF0aXZlRnVuY3Rpb25DYWxsIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9OYXRpdmVGdW5jdGlvbkNhbGxcIjtcbmltcG9ydCB7IFN0cmluZ1ZhbHVlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9WYWx1ZVwiO1xuaW1wb3J0IHsgU3RvcnkgfSBmcm9tIFwiLi4vU3RvcnlcIjtcbmltcG9ydCB7IFRleHQgfSBmcm9tIFwiLi4vVGV4dFwiO1xuaW1wb3J0IHsgV2VhdmUgfSBmcm9tIFwiLi4vV2VhdmVcIjtcbmltcG9ydCB7IGFzT3JOdWxsIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9UeXBlQXNzZXJ0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBDb25kaXRpb25hbFNpbmdsZUJyYW5jaCBleHRlbmRzIFBhcnNlZE9iamVjdCB7XG4gIHB1YmxpYyBfY29udGVudENvbnRhaW5lcjogUnVudGltZUNvbnRhaW5lciB8IG51bGwgPSBudWxsO1xuICBwdWJsaWMgX2NvbmRpdGlvbmFsRGl2ZXJ0OiBSdW50aW1lRGl2ZXJ0IHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBfb3duRXhwcmVzc2lvbjogRXhwcmVzc2lvbiB8IG51bGwgPSBudWxsO1xuICBwdWJsaWMgX2lubmVyV2VhdmU6IFdlYXZlIHwgbnVsbCA9IG51bGw7XG4gIC8vIGJvb2wgY29uZGl0aW9uLCBlLmcuOlxuICAvLyB7IDUgPT0gNDpcbiAgLy8gICAtIHRoZSB0cnVlIGJyYW5jaFxuICAvLyAgIC0gdGhlIGZhbHNlIGJyYW5jaFxuICAvLyB9XG4gIHB1YmxpYyBpc1RydWVCcmFuY2g6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAvLyBXaGVuIGVhY2ggYnJhbmNoIGhhcyBpdHMgb3duIGV4cHJlc3Npb24gbGlrZSBhIHN3aXRjaCBzdGF0ZW1lbnQsXG4gIC8vIHRoaXMgaXMgbm9uLW51bGwuIGUuZy5cbiAgLy8geyB4OlxuICAvLyAgICAtIDQ6IHRoZSB2YWx1ZSBvZiB4IGlzIGZvdXIgKG93bkV4cHJlc3Npb24gaXMgdGhlIHZhbHVlIDQpXG4gIC8vICAgIC0gMzogdGhlIHZhbHVlIG9mIHggaXMgdGhyZWVcbiAgLy8gfVxuICBnZXQgb3duRXhwcmVzc2lvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fb3duRXhwcmVzc2lvbjtcbiAgfVxuXG4gIHNldCBvd25FeHByZXNzaW9uKHZhbHVlKSB7XG4gICAgdGhpcy5fb3duRXhwcmVzc2lvbiA9IHZhbHVlO1xuICAgIGlmICh0aGlzLl9vd25FeHByZXNzaW9uKSB7XG4gICAgICB0aGlzLkFkZENvbnRlbnQodGhpcy5fb3duRXhwcmVzc2lvbik7XG4gICAgfVxuICB9XG5cbiAgLy8gSW4gdGhlIGFib3ZlIGV4YW1wbGUsIG1hdGNoIGVxdWFsaXR5IG9mIHggd2l0aCA0IGZvciB0aGUgZmlyc3QgYnJhbmNoLlxuICAvLyBUaGlzIGlzIGFzIG9wcG9zZWQgdG8gc2ltcGx5IGV2YWx1YXRpbmcgYm9vbGVhbiBlcXVhbGl0eSBmb3IgZWFjaCBicmFuY2gsXG4gIC8vIGV4YW1wbGUgd2hlbiBzaG91bGRNYXRjaEVxdWFsaXR5IGlzIEZBTFNFOlxuICAvLyB7XG4gIC8vICAgIDMgPiAyOiAgVGhpcyB3aWxsIGhhcHBlblxuICAvLyAgICAyID4gMzogIFRoaXMgd29uJ3QgaGFwcGVuXG4gIC8vIH1cbiAgcHVibGljIG1hdGNoaW5nRXF1YWxpdHk6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwdWJsaWMgaXNFbHNlOiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyBpc0lubGluZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHB1YmxpYyByZXR1cm5EaXZlcnQ6IFJ1bnRpbWVEaXZlcnQgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3Rvcihjb250ZW50PzogUGFyc2VkT2JqZWN0W10gfCBudWxsIHwgdW5kZWZpbmVkKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8vIEJyYW5jaGVzIGFyZSBhbGxvd2VkIHRvIGJlIGVtcHR5XG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgIHRoaXMuX2lubmVyV2VhdmUgPSBuZXcgV2VhdmUoY29udGVudCk7XG4gICAgICB0aGlzLkFkZENvbnRlbnQodGhpcy5faW5uZXJXZWF2ZSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IHR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiQ29uZGl0aW9uYWxTaW5nbGVCcmFuY2hcIjtcbiAgfVxuXG4gIC8vIFJ1bnRpbWUgY29udGVudCBjYW4gYmUgc3VtbWFyaXNlZCBhcyBmb2xsb3dzOlxuICAvLyAgLSBFdmFsdWF0ZSBhbiBleHByZXNzaW9uIGlmIG5lY2Vzc2FyeSB0byBicmFuY2ggb25cbiAgLy8gIC0gQnJhbmNoIHRvIGEgbmFtZWQgY29udGFpbmVyIGlmIHRydWVcbiAgLy8gICAgICAgLSBEaXZlcnQgYmFjayB0byBtYWluIGZsb3dcbiAgLy8gICAgICAgICAob3duZXIgQ29uZGl0aW9uYWwgaXMgaW4gY29udHJvbCBvZiB0aGlzIHRhcmdldCBwb2ludClcbiAgcHVibGljIHJlYWRvbmx5IEdlbmVyYXRlUnVudGltZU9iamVjdCA9ICgpOiBSdW50aW1lT2JqZWN0ID0+IHtcbiAgICAvLyBDaGVjayBmb3IgY29tbW9uIG1pc3Rha2UsIG9mIHB1dHRpbmcgXCJlbHNlOlwiIGluc3RlYWQgb2YgXCItIGVsc2U6XCJcbiAgICBpZiAodGhpcy5faW5uZXJXZWF2ZSkge1xuICAgICAgZm9yIChjb25zdCBjIG9mIHRoaXMuX2lubmVyV2VhdmUuY29udGVudCkge1xuICAgICAgICBjb25zdCB0ZXh0ID0gYXNPck51bGwoYywgVGV4dCk7XG4gICAgICAgIGlmICh0ZXh0KSB7XG4gICAgICAgICAgLy8gRG9uJ3QgbmVlZCB0byB0cmltIGF0IHRoZSBzdGFydCBzaW5jZSB0aGUgcGFyc2VyIGhhbmRsZXMgdGhhdCBhbHJlYWR5XG4gICAgICAgICAgaWYgKHRleHQudGV4dC5zdGFydHNXaXRoKFwiZWxzZTpcIikpIHtcbiAgICAgICAgICAgIHRoaXMuV2FybmluZyhcbiAgICAgICAgICAgICAgXCJTYXcgdGhlIHRleHQgJ2Vsc2U6JyB3aGljaCBpcyBiZWluZyB0cmVhdGVkIGFzIGNvbnRlbnQuIERpZCB5b3UgbWVhbiAnLSBlbHNlOic/XCIsXG4gICAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY29udGFpbmVyID0gbmV3IFJ1bnRpbWVDb250YWluZXIoKTtcblxuICAgIC8vIEFyZSB3ZSB0ZXN0aW5nIGFnYWluc3QgYSBjb25kaXRpb24gdGhhdCdzIHVzZWQgZm9yIG1vcmUgdGhhbiBqdXN0IHRoaXNcbiAgICAvLyBicmFuY2g/IElmIHNvLCB0aGUgZmlyc3QgdGhpbmcgd2UgbmVlZCB0byBkbyBpcyByZXBsaWNhdGUgdGhlIHZhbHVlIHRoYXQnc1xuICAgIC8vIG9uIHRoZSBldmFsdWF0aW9uIHN0YWNrIHNvIHRoYXQgd2UgZG9uJ3QgZnVsbHkgY29uc3VtZSBpdCwgaW4gY2FzZSBvdGhlclxuICAgIC8vIGJyYW5jaGVzIG5lZWQgdG8gdXNlIGl0LlxuICAgIGNvbnN0IGR1cGxpY2F0ZXNTdGFja1ZhbHVlOiBib29sZWFuID0gdGhpcy5tYXRjaGluZ0VxdWFsaXR5ICYmICF0aGlzLmlzRWxzZTtcblxuICAgIGlmIChkdXBsaWNhdGVzU3RhY2tWYWx1ZSkge1xuICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQoUnVudGltZUNvbnRyb2xDb21tYW5kLkR1cGxpY2F0ZSgpKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb25kaXRpb25hbERpdmVydCA9IG5ldyBSdW50aW1lRGl2ZXJ0KCk7XG5cbiAgICAvLyBlbHNlIGNsYXVzZSBpcyB1bmNvbmRpdGlvbmFsIGNhdGNoLWFsbCwgb3RoZXJ3aXNlIHRoZSBkaXZlcnQgaXMgY29uZGl0aW9uYWxcbiAgICB0aGlzLl9jb25kaXRpb25hbERpdmVydC5pc0NvbmRpdGlvbmFsID0gIXRoaXMuaXNFbHNlO1xuXG4gICAgLy8gTmVlZCBleHRyYSBldmFsdWF0aW9uP1xuICAgIGlmICghdGhpcy5pc1RydWVCcmFuY2ggJiYgIXRoaXMuaXNFbHNlKSB7XG4gICAgICBjb25zdCBuZWVkc0V2YWw6IGJvb2xlYW4gPSB0aGlzLm93bkV4cHJlc3Npb24gIT09IG51bGw7XG4gICAgICBpZiAobmVlZHNFdmFsKSB7XG4gICAgICAgIGNvbnRhaW5lci5BZGRDb250ZW50KFJ1bnRpbWVDb250cm9sQ29tbWFuZC5FdmFsU3RhcnQoKSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm93bkV4cHJlc3Npb24pIHtcbiAgICAgICAgdGhpcy5vd25FeHByZXNzaW9uLkdlbmVyYXRlSW50b0NvbnRhaW5lcihjb250YWluZXIpO1xuICAgICAgfVxuXG4gICAgICAvLyBVc2VzIGV4aXN0aW5nIGR1cGxpY2F0ZWQgdmFsdWVcbiAgICAgIGlmICh0aGlzLm1hdGNoaW5nRXF1YWxpdHkpIHtcbiAgICAgICAgY29udGFpbmVyLkFkZENvbnRlbnQoTmF0aXZlRnVuY3Rpb25DYWxsLkNhbGxXaXRoTmFtZShcIj09XCIpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKG5lZWRzRXZhbCkge1xuICAgICAgICBjb250YWluZXIuQWRkQ29udGVudChSdW50aW1lQ29udHJvbENvbW1hbmQuRXZhbEVuZCgpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXaWxsIHBvcCBmcm9tIHN0YWNrIGlmIGNvbmRpdGlvbmFsXG4gICAgY29udGFpbmVyLkFkZENvbnRlbnQodGhpcy5fY29uZGl0aW9uYWxEaXZlcnQpO1xuXG4gICAgdGhpcy5fY29udGVudENvbnRhaW5lciA9IHRoaXMuR2VuZXJhdGVSdW50aW1lRm9yQ29udGVudCgpO1xuICAgIHRoaXMuX2NvbnRlbnRDb250YWluZXIubmFtZSA9IFwiYlwiO1xuXG4gICAgLy8gTXVsdGktbGluZSBjb25kaXRpb25hbHMgZ2V0IGEgbmV3bGluZSBhdCB0aGUgc3RhcnQgb2YgZWFjaCBicmFuY2hcbiAgICAvLyAoYXMgb3Bwb3NlZCB0byB0aGUgc3RhcnQgb2YgdGhlIG11bHRpLWxpbmUgY29uZGl0aW9uYWwgc2luY2UgdGhlIGNvbmRpdGlvblxuICAgIC8vICBtYXkgZXZhbHVhdGUgdG8gZmFsc2UuKVxuICAgIGlmICghdGhpcy5pc0lubGluZSkge1xuICAgICAgdGhpcy5fY29udGVudENvbnRhaW5lci5JbnNlcnRDb250ZW50KG5ldyBTdHJpbmdWYWx1ZShcIlxcblwiKSwgMCk7XG4gICAgfVxuXG4gICAgaWYgKGR1cGxpY2F0ZXNTdGFja1ZhbHVlIHx8ICh0aGlzLmlzRWxzZSAmJiB0aGlzLm1hdGNoaW5nRXF1YWxpdHkpKSB7XG4gICAgICB0aGlzLl9jb250ZW50Q29udGFpbmVyLkluc2VydENvbnRlbnQoXG4gICAgICAgIFJ1bnRpbWVDb250cm9sQ29tbWFuZC5Qb3BFdmFsdWF0ZWRWYWx1ZSgpLFxuICAgICAgICAwXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnRhaW5lci5BZGRUb05hbWVkQ29udGVudE9ubHkodGhpcy5fY29udGVudENvbnRhaW5lcik7XG5cbiAgICB0aGlzLnJldHVybkRpdmVydCA9IG5ldyBSdW50aW1lRGl2ZXJ0KCk7XG4gICAgdGhpcy5fY29udGVudENvbnRhaW5lci5BZGRDb250ZW50KHRoaXMucmV0dXJuRGl2ZXJ0KTtcblxuICAgIHJldHVybiBjb250YWluZXI7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IEdlbmVyYXRlUnVudGltZUZvckNvbnRlbnQgPSAoKTogUnVudGltZUNvbnRhaW5lciA9PiB7XG4gICAgLy8gRW1wdHkgYnJhbmNoIC0gY3JlYXRlIGVtcHR5IGNvbnRhaW5lclxuICAgIGlmICh0aGlzLl9pbm5lcldlYXZlID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbmV3IFJ1bnRpbWVDb250YWluZXIoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5faW5uZXJXZWF2ZS5yb290Q29udGFpbmVyO1xuICB9O1xuXG4gIHB1YmxpYyBSZXNvbHZlUmVmZXJlbmNlcyhjb250ZXh0OiBTdG9yeSk6IHZvaWQge1xuICAgIGlmICghdGhpcy5fY29uZGl0aW9uYWxEaXZlcnQgfHwgIXRoaXMuX2NvbnRlbnRDb250YWluZXIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cblxuICAgIHRoaXMuX2NvbmRpdGlvbmFsRGl2ZXJ0LnRhcmdldFBhdGggPSB0aGlzLl9jb250ZW50Q29udGFpbmVyLnBhdGg7XG4gICAgc3VwZXIuUmVzb2x2ZVJlZmVyZW5jZXMoY29udGV4dCk7XG4gIH1cbn1cbiIsImV4cG9ydCBlbnVtIEN1c3RvbUZsYWdzIHtcbiAgUGFyc2luZ1N0cmluZyA9IDB4MSxcbiAgVGFnQWN0aXZlID0gMHgyLFxufVxuIiwiZXhwb3J0IGNsYXNzIERlYnVnTWV0YWRhdGEge1xuICBwdWJsaWMgc3RhcnRMaW5lTnVtYmVyOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgZW5kTGluZU51bWJlcjogbnVtYmVyID0gMDtcbiAgcHVibGljIHN0YXJ0Q2hhcmFjdGVyTnVtYmVyOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgZW5kQ2hhcmFjdGVyTnVtYmVyOiBudW1iZXIgPSAwO1xuICBwdWJsaWMgZmlsZU5hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwdWJsaWMgc291cmNlTmFtZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgcHVibGljIE1lcmdlKGRtOiBEZWJ1Z01ldGFkYXRhKSB7XG4gICAgbGV0IG5ld0RlYnVnTWV0YWRhdGEgPSBuZXcgRGVidWdNZXRhZGF0YSgpO1xuXG4gICAgbmV3RGVidWdNZXRhZGF0YS5maWxlTmFtZSA9IHRoaXMuZmlsZU5hbWU7XG4gICAgbmV3RGVidWdNZXRhZGF0YS5zb3VyY2VOYW1lID0gdGhpcy5zb3VyY2VOYW1lO1xuXG4gICAgaWYgKHRoaXMuc3RhcnRMaW5lTnVtYmVyIDwgZG0uc3RhcnRMaW5lTnVtYmVyKSB7XG4gICAgICBuZXdEZWJ1Z01ldGFkYXRhLnN0YXJ0TGluZU51bWJlciA9IHRoaXMuc3RhcnRMaW5lTnVtYmVyO1xuICAgICAgbmV3RGVidWdNZXRhZGF0YS5zdGFydENoYXJhY3Rlck51bWJlciA9IHRoaXMuc3RhcnRDaGFyYWN0ZXJOdW1iZXI7XG4gICAgfSBlbHNlIGlmICh0aGlzLnN0YXJ0TGluZU51bWJlciA+IGRtLnN0YXJ0TGluZU51bWJlcikge1xuICAgICAgbmV3RGVidWdNZXRhZGF0YS5zdGFydExpbmVOdW1iZXIgPSBkbS5zdGFydExpbmVOdW1iZXI7XG4gICAgICBuZXdEZWJ1Z01ldGFkYXRhLnN0YXJ0Q2hhcmFjdGVyTnVtYmVyID0gZG0uc3RhcnRDaGFyYWN0ZXJOdW1iZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld0RlYnVnTWV0YWRhdGEuc3RhcnRMaW5lTnVtYmVyID0gdGhpcy5zdGFydExpbmVOdW1iZXI7XG4gICAgICBuZXdEZWJ1Z01ldGFkYXRhLnN0YXJ0Q2hhcmFjdGVyTnVtYmVyID0gTWF0aC5taW4oXG4gICAgICAgIHRoaXMuc3RhcnRDaGFyYWN0ZXJOdW1iZXIsXG4gICAgICAgIGRtLnN0YXJ0Q2hhcmFjdGVyTnVtYmVyXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmVuZExpbmVOdW1iZXIgPiBkbS5lbmRMaW5lTnVtYmVyKSB7XG4gICAgICBuZXdEZWJ1Z01ldGFkYXRhLmVuZExpbmVOdW1iZXIgPSB0aGlzLmVuZExpbmVOdW1iZXI7XG4gICAgICBuZXdEZWJ1Z01ldGFkYXRhLmVuZENoYXJhY3Rlck51bWJlciA9IHRoaXMuZW5kQ2hhcmFjdGVyTnVtYmVyO1xuICAgIH0gZWxzZSBpZiAodGhpcy5lbmRMaW5lTnVtYmVyIDwgZG0uZW5kTGluZU51bWJlcikge1xuICAgICAgbmV3RGVidWdNZXRhZGF0YS5lbmRMaW5lTnVtYmVyID0gZG0uZW5kTGluZU51bWJlcjtcbiAgICAgIG5ld0RlYnVnTWV0YWRhdGEuZW5kQ2hhcmFjdGVyTnVtYmVyID0gZG0uZW5kQ2hhcmFjdGVyTnVtYmVyO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXdEZWJ1Z01ldGFkYXRhLmVuZExpbmVOdW1iZXIgPSB0aGlzLmVuZExpbmVOdW1iZXI7XG4gICAgICBuZXdEZWJ1Z01ldGFkYXRhLmVuZENoYXJhY3Rlck51bWJlciA9IE1hdGgubWF4KFxuICAgICAgICB0aGlzLmVuZENoYXJhY3Rlck51bWJlcixcbiAgICAgICAgZG0uZW5kQ2hhcmFjdGVyTnVtYmVyXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdEZWJ1Z01ldGFkYXRhO1xuICB9XG5cbiAgcHVibGljIHRvU3RyaW5nKCkge1xuICAgIGlmICh0aGlzLmZpbGVOYW1lICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gYGxpbmUgJHt0aGlzLnN0YXJ0TGluZU51bWJlcn0gb2YgJHt0aGlzLmZpbGVOYW1lfVwiYDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFwibGluZSBcIiArIHRoaXMuc3RhcnRMaW5lTnVtYmVyO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgSU5hbWVkQ29udGVudCB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvSU5hbWVkQ29udGVudFwiO1xuaW1wb3J0IHsgUGFyc2VkT2JqZWN0IH0gZnJvbSBcIi4uL09iamVjdFwiO1xuaW1wb3J0IHsgSW5rT2JqZWN0IGFzIFJ1bnRpbWVPYmplY3QgfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL09iamVjdFwiO1xuaW1wb3J0IHsgSWRlbnRpZmllciB9IGZyb20gXCIuLi9JZGVudGlmaWVyXCI7XG5cbmV4cG9ydCBjbGFzcyBFeHRlcm5hbERlY2xhcmF0aW9uIGV4dGVuZHMgUGFyc2VkT2JqZWN0IGltcGxlbWVudHMgSU5hbWVkQ29udGVudCB7XG4gIHB1YmxpYyBnZXQgbmFtZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5pZGVudGlmaWVyPy5uYW1lIHx8IG51bGw7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgcmVhZG9ubHkgaWRlbnRpZmllcjogSWRlbnRpZmllcixcbiAgICBwdWJsaWMgcmVhZG9ubHkgYXJndW1lbnROYW1lczogc3RyaW5nW11cbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIGdldCB0eXBlTmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIkVYVEVSTkFMXCI7XG4gIH1cblxuICBwdWJsaWMgcmVhZG9ubHkgR2VuZXJhdGVSdW50aW1lT2JqZWN0ID0gKCk6IFJ1bnRpbWVPYmplY3QgfCBudWxsID0+IHtcbiAgICB0aGlzLnN0b3J5LkFkZEV4dGVybmFsKHRoaXMpO1xuXG4gICAgLy8gTm8gcnVudGltZSBjb2RlIGV4aXN0cyBmb3IgYW4gZXh0ZXJuYWwsIG9ubHkgbWV0YWRhdGFcbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYEVYVEVSTkFMICR7dGhpcy5pZGVudGlmaWVyPy5uYW1lfWA7XG4gIH1cbn1cbiIsImltcG9ydCB7IEFyZ3VtZW50IH0gZnJvbSBcIi4vUGFyc2VkSGllcmFyY2h5L0FyZ3VtZW50XCI7XG5pbXBvcnQgeyBJZGVudGlmaWVyIH0gZnJvbSBcIi4vUGFyc2VkSGllcmFyY2h5L0lkZW50aWZpZXJcIjtcblxuZXhwb3J0IGNsYXNzIEZsb3dEZWNsIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHJlYWRvbmx5IG5hbWU6IElkZW50aWZpZXIsXG4gICAgcHVibGljIHJlYWRvbmx5IGFyZ3M6IEFyZ3VtZW50W10sXG4gICAgcHVibGljIHJlYWRvbmx5IGlzRnVuY3Rpb246IGJvb2xlYW5cbiAgKSB7fVxufVxuIiwiaW1wb3J0IHsgUGFyc2VkT2JqZWN0IH0gZnJvbSBcIi4vT2JqZWN0XCI7XG5pbXBvcnQgeyBJbmtPYmplY3QgYXMgUnVudGltZU9iamVjdCB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvT2JqZWN0XCI7XG5cbmV4cG9ydCBjbGFzcyBXcmFwPFQgZXh0ZW5kcyBSdW50aW1lT2JqZWN0PiBleHRlbmRzIFBhcnNlZE9iamVjdCB7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX29ialRvV3JhcDogVCkge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBwdWJsaWMgcmVhZG9ubHkgR2VuZXJhdGVSdW50aW1lT2JqZWN0ID0gKCk6IFJ1bnRpbWVPYmplY3QgPT4gdGhpcy5fb2JqVG9XcmFwO1xufVxuIiwiaW1wb3J0IHsgR2x1ZSBhcyBSdW50aW1lR2x1ZSB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvR2x1ZVwiO1xuaW1wb3J0IHsgV3JhcCB9IGZyb20gXCIuL1dyYXBcIjtcblxuZXhwb3J0IGNsYXNzIEdsdWUgZXh0ZW5kcyBXcmFwPFJ1bnRpbWVHbHVlPiB7XG4gIGNvbnN0cnVjdG9yKGdsdWU6IFJ1bnRpbWVHbHVlKSB7XG4gICAgc3VwZXIoZ2x1ZSk7XG4gIH1cblxuICBnZXQgdHlwZU5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJHbHVlXCI7XG4gIH1cbn1cbiIsImltcG9ydCB7IElua09iamVjdCB9IGZyb20gXCIuL09iamVjdFwiO1xuXG5leHBvcnQgY2xhc3MgR2x1ZSBleHRlbmRzIElua09iamVjdCB7XG4gIHB1YmxpYyB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gXCJHbHVlXCI7XG4gIH1cbn1cbiIsImltcG9ydCB7IENvbnRhaW5lciBhcyBSdW50aW1lQ29udGFpbmVyIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9Db250YWluZXJcIjtcbmltcG9ydCB7IENvbnRlbnRMaXN0IH0gZnJvbSBcIi4uL0NvbnRlbnRMaXN0XCI7XG5pbXBvcnQgeyBFeHByZXNzaW9uIH0gZnJvbSBcIi4vRXhwcmVzc2lvblwiO1xuaW1wb3J0IHsgRmxvd0Jhc2UgfSBmcm9tIFwiLi4vRmxvdy9GbG93QmFzZVwiO1xuaW1wb3J0IHsgTmF0aXZlRnVuY3Rpb25DYWxsIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9OYXRpdmVGdW5jdGlvbkNhbGxcIjtcbmltcG9ydCB7IEludFZhbHVlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9WYWx1ZVwiO1xuaW1wb3J0IHsgU3RvcnkgfSBmcm9tIFwiLi4vU3RvcnlcIjtcbmltcG9ydCB7IFZhcmlhYmxlQXNzaWdubWVudCBhcyBSdW50aW1lVmFyaWFibGVBc3NpZ25tZW50IH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9WYXJpYWJsZUFzc2lnbm1lbnRcIjtcbmltcG9ydCB7IFZhcmlhYmxlUmVmZXJlbmNlIGFzIFJ1bnRpbWVWYXJpYWJsZVJlZmVyZW5jZSB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvVmFyaWFibGVSZWZlcmVuY2VcIjtcbmltcG9ydCB7IFdlYXZlIH0gZnJvbSBcIi4uL1dlYXZlXCI7XG5pbXBvcnQgeyBJZGVudGlmaWVyIH0gZnJvbSBcIi4uL0lkZW50aWZpZXJcIjtcblxuZXhwb3J0IGNsYXNzIEluY0RlY0V4cHJlc3Npb24gZXh0ZW5kcyBFeHByZXNzaW9uIHtcbiAgcHJpdmF0ZSBfcnVudGltZUFzc2lnbm1lbnQ6IFJ1bnRpbWVWYXJpYWJsZUFzc2lnbm1lbnQgfCBudWxsID0gbnVsbDtcblxuICBwdWJsaWMgaXNJbmM6IGJvb2xlYW47XG4gIHB1YmxpYyBleHByZXNzaW9uOiBFeHByZXNzaW9uIHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHJlYWRvbmx5IHZhcklkZW50aWZpZXI6IElkZW50aWZpZXIgfCBudWxsLFxuICAgIGlzSW5jT3JFeHByZXNzaW9uOiBib29sZWFuIHwgRXhwcmVzc2lvbixcbiAgICBpc0luYz86IGJvb2xlYW5cbiAgKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGlmIChpc0luY09yRXhwcmVzc2lvbiBpbnN0YW5jZW9mIEV4cHJlc3Npb24pIHtcbiAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGlzSW5jT3JFeHByZXNzaW9uO1xuICAgICAgdGhpcy5BZGRDb250ZW50KHRoaXMuZXhwcmVzc2lvbik7XG4gICAgICB0aGlzLmlzSW5jID0gQm9vbGVhbihpc0luYyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaXNJbmMgPSBpc0luY09yRXhwcmVzc2lvbiBhcyBib29sZWFuO1xuICAgIH1cbiAgfVxuXG4gIGdldCB0eXBlTmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIkluY0RlY0V4cHJlc3Npb25cIjtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBHZW5lcmF0ZUludG9Db250YWluZXIgPSAoXG4gICAgY29udGFpbmVyOiBSdW50aW1lQ29udGFpbmVyXG4gICk6IHZvaWQgPT4ge1xuICAgIC8vIHggPSB4ICsgeVxuICAgIC8vIF5eXiBeIF4gXlxuICAgIC8vICA0ICAxIDMgMlxuICAgIC8vIFJldmVyc2UgcG9saXNoIG5vdGF0aW9uOiAoeCAxICspIChhc3NpZ24gdG8geClcblxuICAgIC8vIDEuXG4gICAgY29udGFpbmVyLkFkZENvbnRlbnQoXG4gICAgICBuZXcgUnVudGltZVZhcmlhYmxlUmVmZXJlbmNlKHRoaXMudmFySWRlbnRpZmllcj8ubmFtZSB8fCBudWxsKVxuICAgICk7XG5cbiAgICAvLyAyLlxuICAgIC8vIC0gRXhwcmVzc2lvbiB1c2VkIGluIHRoZSBmb3JtIH4geCArPSB5XG4gICAgLy8gLSBTaW1wbGUgdmVyc2lvbjogfiB4KytcbiAgICBpZiAodGhpcy5leHByZXNzaW9uKSB7XG4gICAgICB0aGlzLmV4cHJlc3Npb24uR2VuZXJhdGVJbnRvQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRhaW5lci5BZGRDb250ZW50KG5ldyBJbnRWYWx1ZSgxKSk7XG4gICAgfVxuXG4gICAgLy8gMy5cbiAgICBjb250YWluZXIuQWRkQ29udGVudChcbiAgICAgIE5hdGl2ZUZ1bmN0aW9uQ2FsbC5DYWxsV2l0aE5hbWUodGhpcy5pc0luYyA/IFwiK1wiIDogXCItXCIpXG4gICAgKTtcblxuICAgIC8vIDQuXG4gICAgdGhpcy5fcnVudGltZUFzc2lnbm1lbnQgPSBuZXcgUnVudGltZVZhcmlhYmxlQXNzaWdubWVudChcbiAgICAgIHRoaXMudmFySWRlbnRpZmllcj8ubmFtZSB8fCBudWxsLFxuICAgICAgZmFsc2VcbiAgICApO1xuICAgIGNvbnRhaW5lci5BZGRDb250ZW50KHRoaXMuX3J1bnRpbWVBc3NpZ25tZW50KTtcbiAgfTtcblxuICBwdWJsaWMgUmVzb2x2ZVJlZmVyZW5jZXMoY29udGV4dDogU3RvcnkpOiB2b2lkIHtcbiAgICBzdXBlci5SZXNvbHZlUmVmZXJlbmNlcyhjb250ZXh0KTtcblxuICAgIGNvbnN0IHZhclJlc29sdmVSZXN1bHQgPSBjb250ZXh0LlJlc29sdmVWYXJpYWJsZVdpdGhOYW1lKFxuICAgICAgdGhpcy52YXJJZGVudGlmaWVyPy5uYW1lIHx8IFwiXCIsXG4gICAgICB0aGlzXG4gICAgKTtcblxuICAgIGlmICghdmFyUmVzb2x2ZVJlc3VsdC5mb3VuZCkge1xuICAgICAgdGhpcy5FcnJvcihcbiAgICAgICAgYHZhcmlhYmxlIGZvciAke3RoaXMuaW5jcmVtZW50RGVjcmVtZW50V29yZH0gY291bGQgbm90IGJlIGZvdW5kOiAnJHt0aGlzLnZhcklkZW50aWZpZXJ9JyBhZnRlciBzZWFyY2hpbmc6IHt0aGlzLmRlc2NyaXB0aW9uT2ZTY29wZX1gXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fcnVudGltZUFzc2lnbm1lbnQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cblxuICAgIHRoaXMuX3J1bnRpbWVBc3NpZ25tZW50LmlzR2xvYmFsID0gdmFyUmVzb2x2ZVJlc3VsdC5pc0dsb2JhbDtcblxuICAgIGlmIChcbiAgICAgICEodGhpcy5wYXJlbnQgaW5zdGFuY2VvZiBXZWF2ZSkgJiZcbiAgICAgICEodGhpcy5wYXJlbnQgaW5zdGFuY2VvZiBGbG93QmFzZSkgJiZcbiAgICAgICEodGhpcy5wYXJlbnQgaW5zdGFuY2VvZiBDb250ZW50TGlzdClcbiAgICApIHtcbiAgICAgIHRoaXMuRXJyb3IoYENhbid0IHVzZSAke3RoaXMuaW5jcmVtZW50RGVjcmVtZW50V29yZH0gYXMgc3ViLWV4cHJlc3Npb25gKTtcbiAgICB9XG4gIH1cblxuICBnZXQgaW5jcmVtZW50RGVjcmVtZW50V29yZCgpOiBcImluY3JlbWVudFwiIHwgXCJkZWNyZW1lbnRcIiB7XG4gICAgaWYgKHRoaXMuaXNJbmMpIHtcbiAgICAgIHJldHVybiBcImluY3JlbWVudFwiO1xuICAgIH1cblxuICAgIHJldHVybiBcImRlY3JlbWVudFwiO1xuICB9XG5cbiAgcHVibGljIHJlYWRvbmx5IHRvU3RyaW5nID0gKCk6IHN0cmluZyA9PiB7XG4gICAgaWYgKHRoaXMuZXhwcmVzc2lvbikge1xuICAgICAgcmV0dXJuIGAke3RoaXMudmFySWRlbnRpZmllcj8ubmFtZX0ke3RoaXMuaXNJbmMgPyBcIiArPSBcIiA6IFwiIC09IFwifSR7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvblxuICAgICAgfWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGAke3RoaXMudmFySWRlbnRpZmllcj8ubmFtZX1gICsgKHRoaXMuaXNJbmMgPyBcIisrXCIgOiBcIi0tXCIpO1xuICB9O1xufVxuIiwiaW1wb3J0IHsgUGFyc2VkT2JqZWN0IH0gZnJvbSBcIi4vT2JqZWN0XCI7XG5pbXBvcnQgeyBJbmtPYmplY3QgYXMgUnVudGltZU9iamVjdCB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvT2JqZWN0XCI7XG5pbXBvcnQgeyBTdG9yeSB9IGZyb20gXCIuL1N0b3J5XCI7XG5cbmV4cG9ydCBjbGFzcyBJbmNsdWRlZEZpbGUgZXh0ZW5kcyBQYXJzZWRPYmplY3Qge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgcmVhZG9ubHkgaW5jbHVkZWRTdG9yeTogU3RvcnkgfCBudWxsKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBHZW5lcmF0ZVJ1bnRpbWVPYmplY3QgPSAoKTogUnVudGltZU9iamVjdCB8IG51bGwgPT4ge1xuICAgIC8vIExlZnQgdG8gdGhlIG1haW4gc3RvcnkgdG8gcHJvY2Vzc1xuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIGdldCB0eXBlTmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIkluY2x1ZGVkRmlsZVwiO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgSW5maXhPcGVyYXRvciB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyByZWFkb25seSB0eXBlOiBzdHJpbmcsXG4gICAgcHVibGljIHJlYWRvbmx5IHByZWNlZGVuY2U6IG51bWJlcixcbiAgICBwdWJsaWMgcmVhZG9ubHkgcmVxdWlyZVdoaXRlc3BhY2U6IGJvb2xlYW5cbiAgKSB7fVxuXG4gIHB1YmxpYyByZWFkb25seSB0b1N0cmluZyA9ICgpOiBzdHJpbmcgPT4gdGhpcy50eXBlO1xufVxuIiwiaW1wb3J0IHsgQXJndW1lbnQgfSBmcm9tIFwiLi9Bcmd1bWVudFwiO1xuaW1wb3J0IHsgRmxvd0Jhc2UgfSBmcm9tIFwiLi9GbG93L0Zsb3dCYXNlXCI7XG5pbXBvcnQgeyBGbG93TGV2ZWwgfSBmcm9tIFwiLi9GbG93L0Zsb3dMZXZlbFwiO1xuaW1wb3J0IHsgSWRlbnRpZmllciB9IGZyb20gXCIuL0lkZW50aWZpZXJcIjtcbmltcG9ydCB7IFBhcnNlZE9iamVjdCB9IGZyb20gXCIuL09iamVjdFwiO1xuaW1wb3J0IHsgU3RvcnkgfSBmcm9tIFwiLi9TdG9yeVwiO1xuXG5leHBvcnQgY2xhc3MgS25vdCBleHRlbmRzIEZsb3dCYXNlIHtcbiAgZ2V0IGZsb3dMZXZlbCgpOiBGbG93TGV2ZWwge1xuICAgIHJldHVybiBGbG93TGV2ZWwuS25vdDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIG5hbWU6IElkZW50aWZpZXIsXG4gICAgdG9wTGV2ZWxPYmplY3RzOiBQYXJzZWRPYmplY3RbXSxcbiAgICBhcmdzOiBBcmd1bWVudFtdLFxuICAgIGlzRnVuY3Rpb246IGJvb2xlYW5cbiAgKSB7XG4gICAgc3VwZXIobmFtZSwgdG9wTGV2ZWxPYmplY3RzLCBhcmdzLCBpc0Z1bmN0aW9uKTtcbiAgfVxuXG4gIGdldCB0eXBlTmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmlzRnVuY3Rpb24gPyBcIkZ1bmN0aW9uXCIgOiBcIktub3RcIjtcbiAgfVxuXG4gIHB1YmxpYyBSZXNvbHZlUmVmZXJlbmNlcyhjb250ZXh0OiBTdG9yeSk6IHZvaWQge1xuICAgIHN1cGVyLlJlc29sdmVSZWZlcmVuY2VzKGNvbnRleHQpO1xuXG4gICAgbGV0IHBhcmVudFN0b3J5ID0gdGhpcy5zdG9yeTtcblxuICAgIC8vIEVuZm9yY2UgcnVsZSB0aGF0IHN0aXRjaGVzIG11c3Qgbm90IGhhdmUgdGhlIHNhbWVcbiAgICAvLyBuYW1lIGFzIGFueSBrbm90cyB0aGF0IGV4aXN0IGluIHRoZSBzdG9yeVxuICAgIGZvciAoY29uc3Qgc3RpdGNoTmFtZSBpbiB0aGlzLnN1YkZsb3dzQnlOYW1lKSB7XG4gICAgICBjb25zdCBrbm90V2l0aFN0aXRjaE5hbWUgPSBwYXJlbnRTdG9yeS5Db250ZW50V2l0aE5hbWVBdExldmVsKFxuICAgICAgICBzdGl0Y2hOYW1lLFxuICAgICAgICBGbG93TGV2ZWwuS25vdCxcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG5cbiAgICAgIGlmIChrbm90V2l0aFN0aXRjaE5hbWUpIHtcbiAgICAgICAgY29uc3Qgc3RpdGNoID0gdGhpcy5zdWJGbG93c0J5TmFtZS5nZXQoc3RpdGNoTmFtZSk7XG4gICAgICAgIGNvbnN0IGVycm9yTXNnID0gYFN0aXRjaCAnJHtcbiAgICAgICAgICBzdGl0Y2ggPyBzdGl0Y2gubmFtZSA6IFwiTk8gU1RJVENIIEZPVU5EXCJcbiAgICAgICAgfScgaGFzIHRoZSBzYW1lIG5hbWUgYXMgYSBrbm90IChvbiAke1xuICAgICAgICAgIGtub3RXaXRoU3RpdGNoTmFtZS5kZWJ1Z01ldGFkYXRhXG4gICAgICAgIH0pYDtcbiAgICAgICAgdGhpcy5FcnJvcihlcnJvck1zZywgc3RpdGNoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IENvbnRhaW5lciBhcyBSdW50aW1lQ29udGFpbmVyIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9Db250YWluZXJcIjtcbmltcG9ydCB7IEV4cHJlc3Npb24gfSBmcm9tIFwiLi4vRXhwcmVzc2lvbi9FeHByZXNzaW9uXCI7XG5pbXBvcnQgeyBJbmtMaXN0IGFzIFJ1bnRpbWVJbmtMaXN0IH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9JbmtMaXN0XCI7XG5pbXBvcnQgeyBJbmtMaXN0SXRlbSBhcyBSdW50aW1lSW5rTGlzdEl0ZW0gfSBmcm9tIFwiLi4vLi4vLi4vLi4vZW5naW5lL0lua0xpc3RcIjtcbmltcG9ydCB7IExpc3RFbGVtZW50RGVmaW5pdGlvbiB9IGZyb20gXCIuL0xpc3RFbGVtZW50RGVmaW5pdGlvblwiO1xuaW1wb3J0IHsgTGlzdFZhbHVlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9WYWx1ZVwiO1xuaW1wb3J0IHsgSWRlbnRpZmllciB9IGZyb20gXCIuLi9JZGVudGlmaWVyXCI7XG5cbmV4cG9ydCBjbGFzcyBMaXN0IGV4dGVuZHMgRXhwcmVzc2lvbiB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSBpdGVtSWRlbnRpZmllckxpc3Q6IElkZW50aWZpZXJbXSkge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBnZXQgdHlwZU5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJMaXN0XCI7XG4gIH1cblxuICBwdWJsaWMgcmVhZG9ubHkgR2VuZXJhdGVJbnRvQ29udGFpbmVyID0gKFxuICAgIGNvbnRhaW5lcjogUnVudGltZUNvbnRhaW5lclxuICApOiB2b2lkID0+IHtcbiAgICBjb25zdCBydW50aW1lUmF3TGlzdCA9IG5ldyBSdW50aW1lSW5rTGlzdCgpO1xuXG4gICAgaWYgKHRoaXMuaXRlbUlkZW50aWZpZXJMaXN0ICE9IG51bGwpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbUlkZW50aWZpZXIgb2YgdGhpcy5pdGVtSWRlbnRpZmllckxpc3QpIHtcbiAgICAgICAgY29uc3QgbmFtZVBhcnRzID0gaXRlbUlkZW50aWZpZXI/Lm5hbWU/LnNwbGl0KFwiLlwiKSB8fCBbXTtcblxuICAgICAgICBsZXQgbGlzdE5hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgICAgICBsZXQgbGlzdEl0ZW1OYW1lOiBzdHJpbmcgPSBcIlwiO1xuICAgICAgICBpZiAobmFtZVBhcnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICBsaXN0TmFtZSA9IG5hbWVQYXJ0c1swXTtcbiAgICAgICAgICBsaXN0SXRlbU5hbWUgPSBuYW1lUGFydHNbMV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGlzdEl0ZW1OYW1lID0gbmFtZVBhcnRzWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbGlzdEl0ZW0gPSB0aGlzLnN0b3J5LlJlc29sdmVMaXN0SXRlbShcbiAgICAgICAgICBsaXN0TmFtZSxcbiAgICAgICAgICBsaXN0SXRlbU5hbWUsXG4gICAgICAgICAgdGhpc1xuICAgICAgICApIGFzIExpc3RFbGVtZW50RGVmaW5pdGlvbjtcblxuICAgICAgICBpZiAobGlzdEl0ZW0gPT09IG51bGwpIHtcbiAgICAgICAgICBpZiAobGlzdE5hbWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBDb3VsZCBub3QgZmluZCBsaXN0IGRlZmluaXRpb24gdGhhdCBjb250YWlucyBpdGVtICcke2l0ZW1JZGVudGlmaWVyfSdgXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLkVycm9yKGBDb3VsZCBub3QgZmluZCBsaXN0IGl0ZW0gJHtpdGVtSWRlbnRpZmllcn1gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGxpc3RJdGVtLnBhcmVudCA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLkVycm9yKFxuICAgICAgICAgICAgICBgQ291bGQgbm90IGZpbmQgbGlzdCBkZWZpbml0aW9uIGZvciBpdGVtICR7aXRlbUlkZW50aWZpZXJ9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFsaXN0TmFtZSkge1xuICAgICAgICAgICAgbGlzdE5hbWUgPSBsaXN0SXRlbS5wYXJlbnQuaWRlbnRpZmllcj8ubmFtZSB8fCBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGl0ZW0gPSBuZXcgUnVudGltZUlua0xpc3RJdGVtKGxpc3ROYW1lLCBsaXN0SXRlbS5uYW1lIHx8IG51bGwpO1xuXG4gICAgICAgICAgaWYgKHJ1bnRpbWVSYXdMaXN0LmhhcyhpdGVtLnNlcmlhbGl6ZWQoKSkpIHtcbiAgICAgICAgICAgIHRoaXMuV2FybmluZyhgRHVwbGljYXRlIG9mIGl0ZW0gJyR7aXRlbUlkZW50aWZpZXJ9JyBpbiBsaXN0LmApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBydW50aW1lUmF3TGlzdC5BZGQoaXRlbSwgbGlzdEl0ZW0uc2VyaWVzVmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnRhaW5lci5BZGRDb250ZW50KG5ldyBMaXN0VmFsdWUocnVudGltZVJhd0xpc3QpKTtcbiAgfTtcbn1cbiIsImltcG9ydCB7IExpc3REZWZpbml0aW9uIH0gZnJvbSBcIi4vTGlzdERlZmluaXRpb25cIjtcbmltcG9ydCB7IFBhcnNlZE9iamVjdCB9IGZyb20gXCIuLi9PYmplY3RcIjtcbmltcG9ydCB7IElua09iamVjdCBhcyBSdW50aW1lT2JqZWN0IH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9PYmplY3RcIjtcbmltcG9ydCB7IFN0b3J5IH0gZnJvbSBcIi4uL1N0b3J5XCI7XG5pbXBvcnQgeyBTeW1ib2xUeXBlIH0gZnJvbSBcIi4uL1N5bWJvbFR5cGVcIjtcbmltcG9ydCB7IElkZW50aWZpZXIgfSBmcm9tIFwiLi4vSWRlbnRpZmllclwiO1xuXG5leHBvcnQgY2xhc3MgTGlzdEVsZW1lbnREZWZpbml0aW9uIGV4dGVuZHMgUGFyc2VkT2JqZWN0IHtcbiAgcHVibGljIHNlcmllc1ZhbHVlOiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBwYXJlbnQ6IExpc3REZWZpbml0aW9uIHwgbnVsbCA9IG51bGw7XG5cbiAgZ2V0IGZ1bGxOYW1lKCk6IHN0cmluZyB7XG4gICAgY29uc3QgcGFyZW50TGlzdCA9IHRoaXMucGFyZW50O1xuICAgIGlmIChwYXJlbnRMaXN0ID09PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBnZXQgZnVsbCBuYW1lIHdpdGhvdXQgYSBwYXJlbnQgbGlzdC5cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGAke3BhcmVudExpc3QuaWRlbnRpZmllcj8ubmFtZX0uJHt0aGlzLm5hbWV9YDtcbiAgfVxuXG4gIGdldCB0eXBlTmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIkxpc3RFbGVtZW50XCI7XG4gIH1cblxuICBnZXQgbmFtZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5pbmRlbnRpZmllcj8ubmFtZSB8fCBudWxsO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHJlYWRvbmx5IGluZGVudGlmaWVyOiBJZGVudGlmaWVyLFxuICAgIHB1YmxpYyByZWFkb25seSBpbkluaXRpYWxMaXN0OiBib29sZWFuLFxuICAgIHB1YmxpYyByZWFkb25seSBleHBsaWNpdFZhbHVlOiBudW1iZXIgfCBudWxsID0gbnVsbFxuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMucGFyZW50ID0gdGhpcy5wYXJlbnQgYXMgTGlzdERlZmluaXRpb247XG4gIH1cblxuICBwdWJsaWMgcmVhZG9ubHkgR2VuZXJhdGVSdW50aW1lT2JqZWN0ID0gKCk6IFJ1bnRpbWVPYmplY3QgPT4ge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZC5cIik7XG4gIH07XG5cbiAgcHVibGljIFJlc29sdmVSZWZlcmVuY2VzKGNvbnRleHQ6IFN0b3J5KTogdm9pZCB7XG4gICAgc3VwZXIuUmVzb2x2ZVJlZmVyZW5jZXMoY29udGV4dCk7XG4gICAgY29udGV4dC5DaGVja0Zvck5hbWluZ0NvbGxpc2lvbnMoXG4gICAgICB0aGlzLFxuICAgICAgdGhpcy5pbmRlbnRpZmllcixcbiAgICAgIFN5bWJvbFR5cGUuTGlzdEl0ZW1cbiAgICApO1xuICB9XG5cbiAgcHVibGljIHJlYWRvbmx5IHRvU3RyaW5nID0gKCk6IHN0cmluZyA9PiB0aGlzLmZ1bGxOYW1lO1xufVxuIiwiZXhwb3J0IGVudW0gU3RhdGVtZW50TGV2ZWwge1xuICBJbm5lckJsb2NrLFxuICBTdGl0Y2gsXG4gIEtub3QsXG4gIFRvcCxcbn1cbiIsImltcG9ydCB7IEFyZ3VtZW50IH0gZnJvbSBcIi4vQXJndW1lbnRcIjtcbmltcG9ydCB7IEZsb3dCYXNlIH0gZnJvbSBcIi4vRmxvdy9GbG93QmFzZVwiO1xuaW1wb3J0IHsgRmxvd0xldmVsIH0gZnJvbSBcIi4vRmxvdy9GbG93TGV2ZWxcIjtcbmltcG9ydCB7IElkZW50aWZpZXIgfSBmcm9tIFwiLi9JZGVudGlmaWVyXCI7XG5pbXBvcnQgeyBQYXJzZWRPYmplY3QgfSBmcm9tIFwiLi9PYmplY3RcIjtcblxuZXhwb3J0IGNsYXNzIFN0aXRjaCBleHRlbmRzIEZsb3dCYXNlIHtcbiAgZ2V0IGZsb3dMZXZlbCgpOiBGbG93TGV2ZWwge1xuICAgIHJldHVybiBGbG93TGV2ZWwuU3RpdGNoO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgbmFtZTogSWRlbnRpZmllcixcbiAgICB0b3BMZXZlbE9iamVjdHM6IFBhcnNlZE9iamVjdFtdLFxuICAgIGFyZ3M6IEFyZ3VtZW50W10sXG4gICAgaXNGdW5jdGlvbjogYm9vbGVhblxuICApIHtcbiAgICBzdXBlcihuYW1lLCB0b3BMZXZlbE9iamVjdHMsIGFyZ3MsIGlzRnVuY3Rpb24pO1xuICB9XG5cbiAgZ2V0IHR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiU3RpdGNoXCI7XG4gIH1cblxuICAvLyBGaXhlcyBUUyBpc3N1ZSB3aXRoIG5vdCBiZWluZyBhYmxlIHRvIGFjY2VzcyB0aGUgcHJvdG90eXBlIHZpYSBgc3VwZXJgIGluIGZ1bmN0aW9uc1xuICAvLyBhdHRhY2hlZCB0byB0aGUgY2xhc3MgYXMgcHJvcGVydGllcy5cbiAgcHJpdmF0ZSBiYXNlVG9TdHJpbmcgPSB0aGlzLnRvU3RyaW5nO1xuXG4gIHB1YmxpYyB0b1N0cmluZyA9ICgpOiBzdHJpbmcgPT4ge1xuICAgIHJldHVybiBgJHtcbiAgICAgIHRoaXMucGFyZW50ICE9PSBudWxsID8gdGhpcy5wYXJlbnQgKyBcIiA+IFwiIDogXCJcIlxuICAgIH0ke3RoaXMuYmFzZVRvU3RyaW5nKCl9YDtcbiAgfTtcbn1cbiIsImltcG9ydCB7IElua09iamVjdCB9IGZyb20gXCIuL09iamVjdFwiO1xuXG4vLyBOZXcgdmVyc2lvbiBvZiB0YWdzIGlzIGR5bmFtaWMgLSBpdCBjb25zdHJ1Y3RzIHRoZSB0YWdzXG4vLyBhdCBydW50aW1lIGJhc2VkIG9uIEJlZ2luVGFnIGFuZCBFbmRUYWcgY29udHJvbCBjb21tYW5kcy5cbi8vIFBsYWluIHRleHQgdGhhdCdzIGluIHRoZSBvdXRwdXQgc3RyZWFtIGlzIHR1cm5lZCBpbnRvIHRhZ3Ncbi8vIHdoZW4geW91IGRvIHN0b3J5LmN1cnJlbnRUYWdzLlxuLy8gVGhlIG9ubHkgcGxhY2UgdGhpcyBpcyB1c2VkIGlzIHdoZW4gZmxhdHRlbmluZyB0YWdzIGRvd25cbi8vIHRvIHN0cmluZyBpbiBhZHZhbmNlLCBkdXJpbmcgZHluYW1pYyBzdHJpbmcgZ2VuZXJhdGlvbiBpZlxuLy8gdGhlcmUncyBhIHRhZyBlbWJlZGRlZCBpbiBpdC4gU2VlIGhvdyBDb250cm9sQ29tbWFuZC5FbmRTdHJpbmdcbi8vIGlzIGltcGxlbWVudGVkIGluIFN0b3J5LmNzIGZvciBtb3JlIGRldGFpbHMgKyBjb21tZW50XG5leHBvcnQgY2xhc3MgVGFnIGV4dGVuZHMgSW5rT2JqZWN0IHtcbiAgcHVibGljIHJlYWRvbmx5IHRleHQ6IHN0cmluZztcblxuICBjb25zdHJ1Y3Rvcih0YWdUZXh0OiBzdHJpbmcpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMudGV4dCA9IHRhZ1RleHQudG9TdHJpbmcoKSB8fCBcIlwiO1xuICB9XG5cbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiIyBcIiArIHRoaXMudGV4dDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUGF0aCB9IGZyb20gXCIuL1BhdGhcIjtcbmltcG9ydCB7IENhbGxTdGFjayB9IGZyb20gXCIuL0NhbGxTdGFja1wiO1xuaW1wb3J0IHsgdGhyb3dOdWxsRXhjZXB0aW9uIH0gZnJvbSBcIi4vTnVsbEV4Y2VwdGlvblwiO1xuaW1wb3J0IHsgSW5rT2JqZWN0IH0gZnJvbSBcIi4vT2JqZWN0XCI7XG5cbmV4cG9ydCBjbGFzcyBDaG9pY2UgZXh0ZW5kcyBJbmtPYmplY3Qge1xuICBwdWJsaWMgdGV4dDogc3RyaW5nID0gXCJcIjtcbiAgcHVibGljIGluZGV4OiBudW1iZXIgPSAwO1xuICBwdWJsaWMgdGhyZWFkQXRHZW5lcmF0aW9uOiBDYWxsU3RhY2suVGhyZWFkIHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBzb3VyY2VQYXRoOiBzdHJpbmcgPSBcIlwiO1xuICBwdWJsaWMgdGFyZ2V0UGF0aDogUGF0aCB8IG51bGwgPSBudWxsO1xuICBwdWJsaWMgaXNJbnZpc2libGVEZWZhdWx0OiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyB0YWdzOiBzdHJpbmdbXSB8IG51bGwgPSBudWxsO1xuICBwdWJsaWMgb3JpZ2luYWxUaHJlYWRJbmRleDogbnVtYmVyID0gMDtcblxuICBnZXQgcGF0aFN0cmluZ09uQ2hvaWNlKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMudGFyZ2V0UGF0aCA9PT0gbnVsbClcbiAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJDaG9pY2UudGFyZ2V0UGF0aFwiKTtcbiAgICByZXR1cm4gdGhpcy50YXJnZXRQYXRoLnRvU3RyaW5nKCk7XG4gIH1cbiAgc2V0IHBhdGhTdHJpbmdPbkNob2ljZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy50YXJnZXRQYXRoID0gbmV3IFBhdGgodmFsdWUpO1xuICB9XG5cbiAgcHVibGljIENsb25lKCkge1xuICAgIGxldCBjb3B5ID0gbmV3IENob2ljZSgpO1xuICAgIGNvcHkudGV4dCA9IHRoaXMudGV4dDtcbiAgICBjb3B5LnNvdXJjZVBhdGggPSB0aGlzLnNvdXJjZVBhdGg7XG4gICAgY29weS5pbmRleCA9IHRoaXMuaW5kZXg7XG4gICAgY29weS50YXJnZXRQYXRoID0gdGhpcy50YXJnZXRQYXRoO1xuICAgIGNvcHkub3JpZ2luYWxUaHJlYWRJbmRleCA9IHRoaXMub3JpZ2luYWxUaHJlYWRJbmRleDtcbiAgICBjb3B5LmlzSW52aXNpYmxlRGVmYXVsdCA9IHRoaXMuaXNJbnZpc2libGVEZWZhdWx0O1xuICAgIGlmICh0aGlzLnRocmVhZEF0R2VuZXJhdGlvbiAhPT0gbnVsbClcbiAgICAgIGNvcHkudGhyZWFkQXRHZW5lcmF0aW9uID0gdGhpcy50aHJlYWRBdEdlbmVyYXRpb24uQ29weSgpO1xuXG4gICAgcmV0dXJuIGNvcHk7XG4gIH1cbn1cbiIsImltcG9ydCB7IElua0xpc3RJdGVtIH0gZnJvbSBcIi4vSW5rTGlzdFwiO1xuaW1wb3J0IHsgTGlzdFZhbHVlIH0gZnJvbSBcIi4vVmFsdWVcIjtcbmltcG9ydCB7IExpc3REZWZpbml0aW9uIH0gZnJvbSBcIi4vTGlzdERlZmluaXRpb25cIjtcbmltcG9ydCB7IFRyeUdldFJlc3VsdCB9IGZyb20gXCIuL1RyeUdldFJlc3VsdFwiO1xuaW1wb3J0IHsgdGhyb3dOdWxsRXhjZXB0aW9uIH0gZnJvbSBcIi4vTnVsbEV4Y2VwdGlvblwiO1xuXG5leHBvcnQgY2xhc3MgTGlzdERlZmluaXRpb25zT3JpZ2luIHtcbiAgcHJvdGVjdGVkIF9saXN0czogTWFwPHN0cmluZywgTGlzdERlZmluaXRpb24+O1xuICBwcm90ZWN0ZWQgX2FsbFVuYW1iaWd1b3VzTGlzdFZhbHVlQ2FjaGU6IE1hcDxzdHJpbmcsIExpc3RWYWx1ZT47XG5cbiAgY29uc3RydWN0b3IobGlzdHM6IExpc3REZWZpbml0aW9uW10pIHtcbiAgICB0aGlzLl9saXN0cyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLl9hbGxVbmFtYmlndW91c0xpc3RWYWx1ZUNhY2hlID0gbmV3IE1hcCgpO1xuXG4gICAgZm9yIChsZXQgbGlzdCBvZiBsaXN0cykge1xuICAgICAgdGhpcy5fbGlzdHMuc2V0KGxpc3QubmFtZSwgbGlzdCk7XG5cbiAgICAgIGZvciAobGV0IFtrZXksIHZhbF0gb2YgbGlzdC5pdGVtcykge1xuICAgICAgICBsZXQgaXRlbSA9IElua0xpc3RJdGVtLmZyb21TZXJpYWxpemVkS2V5KGtleSk7XG4gICAgICAgIGxldCBsaXN0VmFsdWUgPSBuZXcgTGlzdFZhbHVlKGl0ZW0sIHZhbCk7XG5cbiAgICAgICAgaWYgKCFpdGVtLml0ZW1OYW1lKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaXRlbS5pdGVtTmFtZSBpcyBudWxsIG9yIHVuZGVmaW5lZC5cIik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9hbGxVbmFtYmlndW91c0xpc3RWYWx1ZUNhY2hlLnNldChpdGVtLml0ZW1OYW1lLCBsaXN0VmFsdWUpO1xuICAgICAgICB0aGlzLl9hbGxVbmFtYmlndW91c0xpc3RWYWx1ZUNhY2hlLnNldChpdGVtLmZ1bGxOYW1lLCBsaXN0VmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBnZXQgbGlzdHMoKTogTGlzdERlZmluaXRpb25bXSB7XG4gICAgbGV0IGxpc3RPZkxpc3RzOiBMaXN0RGVmaW5pdGlvbltdID0gW107XG5cbiAgICBmb3IgKGxldCBbLCB2YWx1ZV0gb2YgdGhpcy5fbGlzdHMpIHtcbiAgICAgIGxpc3RPZkxpc3RzLnB1c2godmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiBsaXN0T2ZMaXN0cztcbiAgfVxuICBwdWJsaWMgVHJ5TGlzdEdldERlZmluaXRpb24oXG4gICAgbmFtZTogc3RyaW5nIHwgbnVsbCxcbiAgICAvKiBvdXQgKi8gZGVmOiBMaXN0RGVmaW5pdGlvbiB8IG51bGxcbiAgKTogVHJ5R2V0UmVzdWx0PExpc3REZWZpbml0aW9uIHwgbnVsbD4ge1xuICAgIGlmIChuYW1lID09PSBudWxsKSB7XG4gICAgICByZXR1cm4geyByZXN1bHQ6IGRlZiwgZXhpc3RzOiBmYWxzZSB9O1xuICAgIH1cbiAgICAvLyBpbml0aWFsbHksIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIGJvb2xlYW4gYW5kIHRoZSBzZWNvbmQgcGFyYW1ldGVyIGlzIGFuIG91dC5cbiAgICBsZXQgZGVmaW5pdGlvbiA9IHRoaXMuX2xpc3RzLmdldChuYW1lKTtcbiAgICBpZiAoIWRlZmluaXRpb24pIHJldHVybiB7IHJlc3VsdDogZGVmLCBleGlzdHM6IGZhbHNlIH07XG5cbiAgICByZXR1cm4geyByZXN1bHQ6IGRlZmluaXRpb24sIGV4aXN0czogdHJ1ZSB9O1xuICB9XG4gIHB1YmxpYyBGaW5kU2luZ2xlSXRlbUxpc3RXaXRoTmFtZShuYW1lOiBzdHJpbmcgfCBudWxsKSB7XG4gICAgaWYgKG5hbWUgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJuYW1lXCIpO1xuICAgIH1cbiAgICBsZXQgdmFsID0gdGhpcy5fYWxsVW5hbWJpZ3VvdXNMaXN0VmFsdWVDYWNoZS5nZXQobmFtZSk7XG5cbiAgICBpZiAodHlwZW9mIHZhbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ29udGFpbmVyIH0gZnJvbSBcIi4vQ29udGFpbmVyXCI7XG5pbXBvcnQge1xuICBWYWx1ZSxcbiAgSW50VmFsdWUsXG4gIEZsb2F0VmFsdWUsXG4gIFN0cmluZ1ZhbHVlLFxuICBEaXZlcnRUYXJnZXRWYWx1ZSxcbiAgVmFyaWFibGVQb2ludGVyVmFsdWUsXG4gIExpc3RWYWx1ZSxcbiAgQm9vbFZhbHVlLFxufSBmcm9tIFwiLi9WYWx1ZVwiO1xuaW1wb3J0IHsgR2x1ZSB9IGZyb20gXCIuL0dsdWVcIjtcbmltcG9ydCB7IENvbnRyb2xDb21tYW5kIH0gZnJvbSBcIi4vQ29udHJvbENvbW1hbmRcIjtcbmltcG9ydCB7IFB1c2hQb3BUeXBlIH0gZnJvbSBcIi4vUHVzaFBvcFwiO1xuaW1wb3J0IHsgRGl2ZXJ0IH0gZnJvbSBcIi4vRGl2ZXJ0XCI7XG5pbXBvcnQgeyBDaG9pY2VQb2ludCB9IGZyb20gXCIuL0Nob2ljZVBvaW50XCI7XG5pbXBvcnQgeyBWYXJpYWJsZVJlZmVyZW5jZSB9IGZyb20gXCIuL1ZhcmlhYmxlUmVmZXJlbmNlXCI7XG5pbXBvcnQgeyBWYXJpYWJsZUFzc2lnbm1lbnQgfSBmcm9tIFwiLi9WYXJpYWJsZUFzc2lnbm1lbnRcIjtcbmltcG9ydCB7IE5hdGl2ZUZ1bmN0aW9uQ2FsbCB9IGZyb20gXCIuL05hdGl2ZUZ1bmN0aW9uQ2FsbFwiO1xuaW1wb3J0IHsgVm9pZCB9IGZyb20gXCIuL1ZvaWRcIjtcbmltcG9ydCB7IFRhZyB9IGZyb20gXCIuL1RhZ1wiO1xuaW1wb3J0IHsgUGF0aCB9IGZyb20gXCIuL1BhdGhcIjtcbmltcG9ydCB7IENob2ljZSB9IGZyb20gXCIuL0Nob2ljZVwiO1xuaW1wb3J0IHsgTGlzdERlZmluaXRpb24gfSBmcm9tIFwiLi9MaXN0RGVmaW5pdGlvblwiO1xuaW1wb3J0IHsgTGlzdERlZmluaXRpb25zT3JpZ2luIH0gZnJvbSBcIi4vTGlzdERlZmluaXRpb25zT3JpZ2luXCI7XG5pbXBvcnQgeyBJbmtMaXN0SXRlbSwgSW5rTGlzdCB9IGZyb20gXCIuL0lua0xpc3RcIjtcbmltcG9ydCB7IElua09iamVjdCB9IGZyb20gXCIuL09iamVjdFwiO1xuaW1wb3J0IHsgYXNPck51bGwgfSBmcm9tIFwiLi9UeXBlQXNzZXJ0aW9uXCI7XG5pbXBvcnQgeyB0aHJvd051bGxFeGNlcHRpb24gfSBmcm9tIFwiLi9OdWxsRXhjZXB0aW9uXCI7XG5pbXBvcnQgeyBTaW1wbGVKc29uIH0gZnJvbSBcIi4vU2ltcGxlSnNvblwiO1xuXG5leHBvcnQgY2xhc3MgSnNvblNlcmlhbGlzYXRpb24ge1xuICBwdWJsaWMgc3RhdGljIEpBcnJheVRvUnVudGltZU9iakxpc3QoXG4gICAgakFycmF5OiBhbnlbXSxcbiAgICBza2lwTGFzdDogYm9vbGVhbiA9IGZhbHNlXG4gICkge1xuICAgIGxldCBjb3VudCA9IGpBcnJheS5sZW5ndGg7XG4gICAgaWYgKHNraXBMYXN0KSBjb3VudC0tO1xuXG4gICAgbGV0IGxpc3Q6IElua09iamVjdFtdID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHtcbiAgICAgIGxldCBqVG9rID0gakFycmF5W2ldO1xuICAgICAgbGV0IHJ1bnRpbWVPYmogPSB0aGlzLkpUb2tlblRvUnVudGltZU9iamVjdChqVG9rKTtcbiAgICAgIGlmIChydW50aW1lT2JqID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJydW50aW1lT2JqXCIpO1xuICAgICAgfVxuICAgICAgbGlzdC5wdXNoKHJ1bnRpbWVPYmopO1xuICAgIH1cblxuICAgIHJldHVybiBsaXN0O1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBXcml0ZURpY3Rpb25hcnlSdW50aW1lT2JqcyhcbiAgICB3cml0ZXI6IFNpbXBsZUpzb24uV3JpdGVyLFxuICAgIGRpY3Rpb25hcnk6IE1hcDxzdHJpbmcsIElua09iamVjdD5cbiAgKSB7XG4gICAgd3JpdGVyLldyaXRlT2JqZWN0U3RhcnQoKTtcbiAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgZGljdGlvbmFyeSkge1xuICAgICAgd3JpdGVyLldyaXRlUHJvcGVydHlTdGFydChrZXkpO1xuICAgICAgdGhpcy5Xcml0ZVJ1bnRpbWVPYmplY3Qod3JpdGVyLCB2YWx1ZSk7XG4gICAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eUVuZCgpO1xuICAgIH1cbiAgICB3cml0ZXIuV3JpdGVPYmplY3RFbmQoKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgV3JpdGVMaXN0UnVudGltZU9ianMoXG4gICAgd3JpdGVyOiBTaW1wbGVKc29uLldyaXRlcixcbiAgICBsaXN0OiBJbmtPYmplY3RbXVxuICApIHtcbiAgICB3cml0ZXIuV3JpdGVBcnJheVN0YXJ0KCk7XG4gICAgZm9yIChsZXQgdmFsdWUgb2YgbGlzdCkge1xuICAgICAgdGhpcy5Xcml0ZVJ1bnRpbWVPYmplY3Qod3JpdGVyLCB2YWx1ZSk7XG4gICAgfVxuICAgIHdyaXRlci5Xcml0ZUFycmF5RW5kKCk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIFdyaXRlSW50RGljdGlvbmFyeShcbiAgICB3cml0ZXI6IFNpbXBsZUpzb24uV3JpdGVyLFxuICAgIGRpY3Q6IE1hcDxzdHJpbmcsIG51bWJlcj5cbiAgKSB7XG4gICAgd3JpdGVyLldyaXRlT2JqZWN0U3RhcnQoKTtcbiAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgZGljdCkge1xuICAgICAgd3JpdGVyLldyaXRlSW50UHJvcGVydHkoa2V5LCB2YWx1ZSk7XG4gICAgfVxuICAgIHdyaXRlci5Xcml0ZU9iamVjdEVuZCgpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBXcml0ZVJ1bnRpbWVPYmplY3QoXG4gICAgd3JpdGVyOiBTaW1wbGVKc29uLldyaXRlcixcbiAgICBvYmo6IElua09iamVjdFxuICApOiB2b2lkIHtcbiAgICBsZXQgY29udGFpbmVyID0gYXNPck51bGwob2JqLCBDb250YWluZXIpO1xuICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgIHRoaXMuV3JpdGVSdW50aW1lQ29udGFpbmVyKHdyaXRlciwgY29udGFpbmVyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgZGl2ZXJ0ID0gYXNPck51bGwob2JqLCBEaXZlcnQpO1xuICAgIGlmIChkaXZlcnQpIHtcbiAgICAgIGxldCBkaXZUeXBlS2V5ID0gXCItPlwiO1xuICAgICAgaWYgKGRpdmVydC5pc0V4dGVybmFsKSB7XG4gICAgICAgIGRpdlR5cGVLZXkgPSBcIngoKVwiO1xuICAgICAgfSBlbHNlIGlmIChkaXZlcnQucHVzaGVzVG9TdGFjaykge1xuICAgICAgICBpZiAoZGl2ZXJ0LnN0YWNrUHVzaFR5cGUgPT0gUHVzaFBvcFR5cGUuRnVuY3Rpb24pIHtcbiAgICAgICAgICBkaXZUeXBlS2V5ID0gXCJmKClcIjtcbiAgICAgICAgfSBlbHNlIGlmIChkaXZlcnQuc3RhY2tQdXNoVHlwZSA9PSBQdXNoUG9wVHlwZS5UdW5uZWwpIHtcbiAgICAgICAgICBkaXZUeXBlS2V5ID0gXCItPnQtPlwiO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCB0YXJnZXRTdHI7XG4gICAgICBpZiAoZGl2ZXJ0Lmhhc1ZhcmlhYmxlVGFyZ2V0KSB7XG4gICAgICAgIHRhcmdldFN0ciA9IGRpdmVydC52YXJpYWJsZURpdmVydE5hbWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRTdHIgPSBkaXZlcnQudGFyZ2V0UGF0aFN0cmluZztcbiAgICAgIH1cblxuICAgICAgd3JpdGVyLldyaXRlT2JqZWN0U3RhcnQoKTtcbiAgICAgIHdyaXRlci5Xcml0ZVByb3BlcnR5KGRpdlR5cGVLZXksIHRhcmdldFN0cik7XG5cbiAgICAgIGlmIChkaXZlcnQuaGFzVmFyaWFibGVUYXJnZXQpIHtcbiAgICAgICAgd3JpdGVyLldyaXRlUHJvcGVydHkoXCJ2YXJcIiwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkaXZlcnQuaXNDb25kaXRpb25hbCkge1xuICAgICAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eShcImNcIiwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkaXZlcnQuZXh0ZXJuYWxBcmdzID4gMCkge1xuICAgICAgICB3cml0ZXIuV3JpdGVJbnRQcm9wZXJ0eShcImV4QXJnc1wiLCBkaXZlcnQuZXh0ZXJuYWxBcmdzKTtcbiAgICAgIH1cblxuICAgICAgd3JpdGVyLldyaXRlT2JqZWN0RW5kKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGNob2ljZVBvaW50ID0gYXNPck51bGwob2JqLCBDaG9pY2VQb2ludCk7XG4gICAgaWYgKGNob2ljZVBvaW50KSB7XG4gICAgICB3cml0ZXIuV3JpdGVPYmplY3RTdGFydCgpO1xuICAgICAgd3JpdGVyLldyaXRlUHJvcGVydHkoXCIqXCIsIGNob2ljZVBvaW50LnBhdGhTdHJpbmdPbkNob2ljZSk7XG4gICAgICB3cml0ZXIuV3JpdGVJbnRQcm9wZXJ0eShcImZsZ1wiLCBjaG9pY2VQb2ludC5mbGFncyk7XG4gICAgICB3cml0ZXIuV3JpdGVPYmplY3RFbmQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgYm9vbFZhbCA9IGFzT3JOdWxsKG9iaiwgQm9vbFZhbHVlKTtcbiAgICBpZiAoYm9vbFZhbCkge1xuICAgICAgd3JpdGVyLldyaXRlQm9vbChib29sVmFsLnZhbHVlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgaW50VmFsID0gYXNPck51bGwob2JqLCBJbnRWYWx1ZSk7XG4gICAgaWYgKGludFZhbCkge1xuICAgICAgd3JpdGVyLldyaXRlSW50KGludFZhbC52YWx1ZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGZsb2F0VmFsID0gYXNPck51bGwob2JqLCBGbG9hdFZhbHVlKTtcbiAgICBpZiAoZmxvYXRWYWwpIHtcbiAgICAgIHdyaXRlci5Xcml0ZUZsb2F0KGZsb2F0VmFsLnZhbHVlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgc3RyVmFsID0gYXNPck51bGwob2JqLCBTdHJpbmdWYWx1ZSk7XG4gICAgaWYgKHN0clZhbCkge1xuICAgICAgaWYgKHN0clZhbC5pc05ld2xpbmUpIHtcbiAgICAgICAgd3JpdGVyLldyaXRlKFwiXFxuXCIsIGZhbHNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdyaXRlci5Xcml0ZVN0cmluZ1N0YXJ0KCk7XG4gICAgICAgIHdyaXRlci5Xcml0ZVN0cmluZ0lubmVyKFwiXlwiKTtcbiAgICAgICAgd3JpdGVyLldyaXRlU3RyaW5nSW5uZXIoc3RyVmFsLnZhbHVlKTtcbiAgICAgICAgd3JpdGVyLldyaXRlU3RyaW5nRW5kKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGxpc3RWYWwgPSBhc09yTnVsbChvYmosIExpc3RWYWx1ZSk7XG4gICAgaWYgKGxpc3RWYWwpIHtcbiAgICAgIHRoaXMuV3JpdGVJbmtMaXN0KHdyaXRlciwgbGlzdFZhbCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGRpdlRhcmdldFZhbCA9IGFzT3JOdWxsKG9iaiwgRGl2ZXJ0VGFyZ2V0VmFsdWUpO1xuICAgIGlmIChkaXZUYXJnZXRWYWwpIHtcbiAgICAgIHdyaXRlci5Xcml0ZU9iamVjdFN0YXJ0KCk7XG4gICAgICBpZiAoZGl2VGFyZ2V0VmFsLnZhbHVlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJkaXZUYXJnZXRWYWwudmFsdWVcIik7XG4gICAgICB9XG4gICAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eShcIl4tPlwiLCBkaXZUYXJnZXRWYWwudmFsdWUuY29tcG9uZW50c1N0cmluZyk7XG4gICAgICB3cml0ZXIuV3JpdGVPYmplY3RFbmQoKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCB2YXJQdHJWYWwgPSBhc09yTnVsbChvYmosIFZhcmlhYmxlUG9pbnRlclZhbHVlKTtcbiAgICBpZiAodmFyUHRyVmFsKSB7XG4gICAgICB3cml0ZXIuV3JpdGVPYmplY3RTdGFydCgpO1xuICAgICAgd3JpdGVyLldyaXRlUHJvcGVydHkoXCJedmFyXCIsIHZhclB0clZhbC52YWx1ZSk7XG4gICAgICB3cml0ZXIuV3JpdGVJbnRQcm9wZXJ0eShcImNpXCIsIHZhclB0clZhbC5jb250ZXh0SW5kZXgpO1xuICAgICAgd3JpdGVyLldyaXRlT2JqZWN0RW5kKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGdsdWUgPSBhc09yTnVsbChvYmosIEdsdWUpO1xuICAgIGlmIChnbHVlKSB7XG4gICAgICB3cml0ZXIuV3JpdGUoXCI8PlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgY29udHJvbENtZCA9IGFzT3JOdWxsKG9iaiwgQ29udHJvbENvbW1hbmQpO1xuICAgIGlmIChjb250cm9sQ21kKSB7XG4gICAgICB3cml0ZXIuV3JpdGUoXG4gICAgICAgIEpzb25TZXJpYWxpc2F0aW9uLl9jb250cm9sQ29tbWFuZE5hbWVzW2NvbnRyb2xDbWQuY29tbWFuZFR5cGVdXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBuYXRpdmVGdW5jID0gYXNPck51bGwob2JqLCBOYXRpdmVGdW5jdGlvbkNhbGwpO1xuICAgIGlmIChuYXRpdmVGdW5jKSB7XG4gICAgICBsZXQgbmFtZSA9IG5hdGl2ZUZ1bmMubmFtZTtcblxuICAgICAgaWYgKG5hbWUgPT0gXCJeXCIpIG5hbWUgPSBcIkxeXCI7XG5cbiAgICAgIHdyaXRlci5Xcml0ZShuYW1lKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgdmFyUmVmID0gYXNPck51bGwob2JqLCBWYXJpYWJsZVJlZmVyZW5jZSk7XG4gICAgaWYgKHZhclJlZikge1xuICAgICAgd3JpdGVyLldyaXRlT2JqZWN0U3RhcnQoKTtcbiAgICAgIGxldCByZWFkQ291bnRQYXRoID0gdmFyUmVmLnBhdGhTdHJpbmdGb3JDb3VudDtcbiAgICAgIGlmIChyZWFkQ291bnRQYXRoICE9IG51bGwpIHtcbiAgICAgICAgd3JpdGVyLldyaXRlUHJvcGVydHkoXCJDTlQ/XCIsIHJlYWRDb3VudFBhdGgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd3JpdGVyLldyaXRlUHJvcGVydHkoXCJWQVI/XCIsIHZhclJlZi5uYW1lKTtcbiAgICAgIH1cblxuICAgICAgd3JpdGVyLldyaXRlT2JqZWN0RW5kKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IHZhckFzcyA9IGFzT3JOdWxsKG9iaiwgVmFyaWFibGVBc3NpZ25tZW50KTtcbiAgICBpZiAodmFyQXNzKSB7XG4gICAgICB3cml0ZXIuV3JpdGVPYmplY3RTdGFydCgpO1xuXG4gICAgICBsZXQga2V5ID0gdmFyQXNzLmlzR2xvYmFsID8gXCJWQVI9XCIgOiBcInRlbXA9XCI7XG4gICAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eShrZXksIHZhckFzcy52YXJpYWJsZU5hbWUpO1xuXG4gICAgICAvLyBSZWFzc2lnbm1lbnQ/XG4gICAgICBpZiAoIXZhckFzcy5pc05ld0RlY2xhcmF0aW9uKSB3cml0ZXIuV3JpdGVQcm9wZXJ0eShcInJlXCIsIHRydWUpO1xuXG4gICAgICB3cml0ZXIuV3JpdGVPYmplY3RFbmQoKTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCB2b2lkT2JqID0gYXNPck51bGwob2JqLCBWb2lkKTtcbiAgICBpZiAodm9pZE9iaikge1xuICAgICAgd3JpdGVyLldyaXRlKFwidm9pZFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgdGFnID0gYXNPck51bGwob2JqLCBUYWcpO1xuICAgIGlmICh0YWcpIHtcbiAgICAgIHdyaXRlci5Xcml0ZU9iamVjdFN0YXJ0KCk7XG4gICAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eShcIiNcIiwgdGFnLnRleHQpO1xuICAgICAgd3JpdGVyLldyaXRlT2JqZWN0RW5kKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGNob2ljZSA9IGFzT3JOdWxsKG9iaiwgQ2hvaWNlKTtcbiAgICBpZiAoY2hvaWNlKSB7XG4gICAgICB0aGlzLldyaXRlQ2hvaWNlKHdyaXRlciwgY2hvaWNlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gY29udmVydCBydW50aW1lIG9iamVjdCB0byBKc29uIHRva2VuOiBcIiArIG9iaik7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIEpPYmplY3RUb0RpY3Rpb25hcnlSdW50aW1lT2JqcyhqT2JqZWN0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSB7XG4gICAgbGV0IGRpY3Q6IE1hcDxzdHJpbmcsIElua09iamVjdD4gPSBuZXcgTWFwKCk7XG5cbiAgICBmb3IgKGxldCBrZXkgaW4gak9iamVjdCkge1xuICAgICAgaWYgKGpPYmplY3QuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBsZXQgaW5rT2JqZWN0ID0gdGhpcy5KVG9rZW5Ub1J1bnRpbWVPYmplY3Qoak9iamVjdFtrZXldKTtcbiAgICAgICAgaWYgKGlua09iamVjdCA9PT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJpbmtPYmplY3RcIik7XG4gICAgICAgIH1cbiAgICAgICAgZGljdC5zZXQoa2V5LCBpbmtPYmplY3QpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBkaWN0O1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBKT2JqZWN0VG9JbnREaWN0aW9uYXJ5KGpPYmplY3Q6IFJlY29yZDxzdHJpbmcsIGFueT4pIHtcbiAgICBsZXQgZGljdDogTWFwPHN0cmluZywgbnVtYmVyPiA9IG5ldyBNYXAoKTtcbiAgICBmb3IgKGxldCBrZXkgaW4gak9iamVjdCkge1xuICAgICAgaWYgKGpPYmplY3QuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBkaWN0LnNldChrZXksIHBhcnNlSW50KGpPYmplY3Rba2V5XSkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGljdDtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgSlRva2VuVG9SdW50aW1lT2JqZWN0KHRva2VuOiBhbnkpOiBJbmtPYmplY3QgfCBudWxsIHtcbiAgICBpZiAoXG4gICAgICAodHlwZW9mIHRva2VuID09PSBcIm51bWJlclwiICYmICFpc05hTih0b2tlbikpIHx8XG4gICAgICB0eXBlb2YgdG9rZW4gPT09IFwiYm9vbGVhblwiXG4gICAgKSB7XG4gICAgICByZXR1cm4gVmFsdWUuQ3JlYXRlKHRva2VuKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRva2VuID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBsZXQgc3RyID0gdG9rZW4udG9TdHJpbmcoKTtcblxuICAgICAgLy8gU3RyaW5nIHZhbHVlXG4gICAgICBsZXQgZmlyc3RDaGFyID0gc3RyWzBdO1xuICAgICAgaWYgKGZpcnN0Q2hhciA9PSBcIl5cIikgcmV0dXJuIG5ldyBTdHJpbmdWYWx1ZShzdHIuc3Vic3RyaW5nKDEpKTtcbiAgICAgIGVsc2UgaWYgKGZpcnN0Q2hhciA9PSBcIlxcblwiICYmIHN0ci5sZW5ndGggPT0gMSlcbiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdWYWx1ZShcIlxcblwiKTtcblxuICAgICAgLy8gR2x1ZVxuICAgICAgaWYgKHN0ciA9PSBcIjw+XCIpIHJldHVybiBuZXcgR2x1ZSgpO1xuXG4gICAgICAvLyBDb250cm9sIGNvbW1hbmRzICh3b3VsZCBsb29raW5nIHVwIGluIGEgaGFzaCBzZXQgYmUgZmFzdGVyPylcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgSnNvblNlcmlhbGlzYXRpb24uX2NvbnRyb2xDb21tYW5kTmFtZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgbGV0IGNtZE5hbWUgPSBKc29uU2VyaWFsaXNhdGlvbi5fY29udHJvbENvbW1hbmROYW1lc1tpXTtcbiAgICAgICAgaWYgKHN0ciA9PSBjbWROYW1lKSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBDb250cm9sQ29tbWFuZChpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBOYXRpdmUgZnVuY3Rpb25zXG4gICAgICBpZiAoc3RyID09IFwiTF5cIikgc3RyID0gXCJeXCI7XG4gICAgICBpZiAoTmF0aXZlRnVuY3Rpb25DYWxsLkNhbGxFeGlzdHNXaXRoTmFtZShzdHIpKVxuICAgICAgICByZXR1cm4gTmF0aXZlRnVuY3Rpb25DYWxsLkNhbGxXaXRoTmFtZShzdHIpO1xuXG4gICAgICAvLyBQb3BcbiAgICAgIGlmIChzdHIgPT0gXCItPi0+XCIpIHJldHVybiBDb250cm9sQ29tbWFuZC5Qb3BUdW5uZWwoKTtcbiAgICAgIGVsc2UgaWYgKHN0ciA9PSBcIn5yZXRcIikgcmV0dXJuIENvbnRyb2xDb21tYW5kLlBvcEZ1bmN0aW9uKCk7XG5cbiAgICAgIC8vIFZvaWRcbiAgICAgIGlmIChzdHIgPT0gXCJ2b2lkXCIpIHJldHVybiBuZXcgVm9pZCgpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdG9rZW4gPT09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkodG9rZW4pKSB7XG4gICAgICBsZXQgb2JqID0gdG9rZW4gYXMgUmVjb3JkPHN0cmluZywgYW55PjtcbiAgICAgIGxldCBwcm9wVmFsdWU7XG5cbiAgICAgIC8vIERpdmVydCB0YXJnZXQgdmFsdWUgdG8gcGF0aFxuICAgICAgaWYgKG9ialtcIl4tPlwiXSkge1xuICAgICAgICBwcm9wVmFsdWUgPSBvYmpbXCJeLT5cIl07XG4gICAgICAgIHJldHVybiBuZXcgRGl2ZXJ0VGFyZ2V0VmFsdWUobmV3IFBhdGgocHJvcFZhbHVlLnRvU3RyaW5nKCkpKTtcbiAgICAgIH1cblxuICAgICAgLy8gVmFyaWFibGVQb2ludGVyVmFsdWVcbiAgICAgIGlmIChvYmpbXCJedmFyXCJdKSB7XG4gICAgICAgIHByb3BWYWx1ZSA9IG9ialtcIl52YXJcIl07XG4gICAgICAgIGxldCB2YXJQdHIgPSBuZXcgVmFyaWFibGVQb2ludGVyVmFsdWUocHJvcFZhbHVlLnRvU3RyaW5nKCkpO1xuICAgICAgICBpZiAoXCJjaVwiIGluIG9iaikge1xuICAgICAgICAgIHByb3BWYWx1ZSA9IG9ialtcImNpXCJdO1xuICAgICAgICAgIHZhclB0ci5jb250ZXh0SW5kZXggPSBwYXJzZUludChwcm9wVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YXJQdHI7XG4gICAgICB9XG5cbiAgICAgIC8vIERpdmVydFxuICAgICAgbGV0IGlzRGl2ZXJ0ID0gZmFsc2U7XG4gICAgICBsZXQgcHVzaGVzVG9TdGFjayA9IGZhbHNlO1xuICAgICAgbGV0IGRpdlB1c2hUeXBlID0gUHVzaFBvcFR5cGUuRnVuY3Rpb247XG4gICAgICBsZXQgZXh0ZXJuYWwgPSBmYWxzZTtcbiAgICAgIGlmICgocHJvcFZhbHVlID0gb2JqW1wiLT5cIl0pKSB7XG4gICAgICAgIGlzRGl2ZXJ0ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAoKHByb3BWYWx1ZSA9IG9ialtcImYoKVwiXSkpIHtcbiAgICAgICAgaXNEaXZlcnQgPSB0cnVlO1xuICAgICAgICBwdXNoZXNUb1N0YWNrID0gdHJ1ZTtcbiAgICAgICAgZGl2UHVzaFR5cGUgPSBQdXNoUG9wVHlwZS5GdW5jdGlvbjtcbiAgICAgIH0gZWxzZSBpZiAoKHByb3BWYWx1ZSA9IG9ialtcIi0+dC0+XCJdKSkge1xuICAgICAgICBpc0RpdmVydCA9IHRydWU7XG4gICAgICAgIHB1c2hlc1RvU3RhY2sgPSB0cnVlO1xuICAgICAgICBkaXZQdXNoVHlwZSA9IFB1c2hQb3BUeXBlLlR1bm5lbDtcbiAgICAgIH0gZWxzZSBpZiAoKHByb3BWYWx1ZSA9IG9ialtcIngoKVwiXSkpIHtcbiAgICAgICAgaXNEaXZlcnQgPSB0cnVlO1xuICAgICAgICBleHRlcm5hbCA9IHRydWU7XG4gICAgICAgIHB1c2hlc1RvU3RhY2sgPSBmYWxzZTtcbiAgICAgICAgZGl2UHVzaFR5cGUgPSBQdXNoUG9wVHlwZS5GdW5jdGlvbjtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzRGl2ZXJ0KSB7XG4gICAgICAgIGxldCBkaXZlcnQgPSBuZXcgRGl2ZXJ0KCk7XG4gICAgICAgIGRpdmVydC5wdXNoZXNUb1N0YWNrID0gcHVzaGVzVG9TdGFjaztcbiAgICAgICAgZGl2ZXJ0LnN0YWNrUHVzaFR5cGUgPSBkaXZQdXNoVHlwZTtcbiAgICAgICAgZGl2ZXJ0LmlzRXh0ZXJuYWwgPSBleHRlcm5hbDtcblxuICAgICAgICBsZXQgdGFyZ2V0ID0gcHJvcFZhbHVlLnRvU3RyaW5nKCk7XG5cbiAgICAgICAgaWYgKChwcm9wVmFsdWUgPSBvYmpbXCJ2YXJcIl0pKSBkaXZlcnQudmFyaWFibGVEaXZlcnROYW1lID0gdGFyZ2V0O1xuICAgICAgICBlbHNlIGRpdmVydC50YXJnZXRQYXRoU3RyaW5nID0gdGFyZ2V0O1xuXG4gICAgICAgIGRpdmVydC5pc0NvbmRpdGlvbmFsID0gISFvYmpbXCJjXCJdO1xuXG4gICAgICAgIGlmIChleHRlcm5hbCkge1xuICAgICAgICAgIGlmICgocHJvcFZhbHVlID0gb2JqW1wiZXhBcmdzXCJdKSlcbiAgICAgICAgICAgIGRpdmVydC5leHRlcm5hbEFyZ3MgPSBwYXJzZUludChwcm9wVmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGRpdmVydDtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hvaWNlXG4gICAgICBpZiAoKHByb3BWYWx1ZSA9IG9ialtcIipcIl0pKSB7XG4gICAgICAgIGxldCBjaG9pY2UgPSBuZXcgQ2hvaWNlUG9pbnQoKTtcbiAgICAgICAgY2hvaWNlLnBhdGhTdHJpbmdPbkNob2ljZSA9IHByb3BWYWx1ZS50b1N0cmluZygpO1xuXG4gICAgICAgIGlmICgocHJvcFZhbHVlID0gb2JqW1wiZmxnXCJdKSkgY2hvaWNlLmZsYWdzID0gcGFyc2VJbnQocHJvcFZhbHVlKTtcblxuICAgICAgICByZXR1cm4gY2hvaWNlO1xuICAgICAgfVxuXG4gICAgICAvLyBWYXJpYWJsZSByZWZlcmVuY2VcbiAgICAgIGlmICgocHJvcFZhbHVlID0gb2JqW1wiVkFSP1wiXSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWYXJpYWJsZVJlZmVyZW5jZShwcm9wVmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICB9IGVsc2UgaWYgKChwcm9wVmFsdWUgPSBvYmpbXCJDTlQ/XCJdKSkge1xuICAgICAgICBsZXQgcmVhZENvdW50VmFyUmVmID0gbmV3IFZhcmlhYmxlUmVmZXJlbmNlKCk7XG4gICAgICAgIHJlYWRDb3VudFZhclJlZi5wYXRoU3RyaW5nRm9yQ291bnQgPSBwcm9wVmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIHJlYWRDb3VudFZhclJlZjtcbiAgICAgIH1cblxuICAgICAgLy8gVmFyaWFibGUgYXNzaWdubWVudFxuICAgICAgbGV0IGlzVmFyQXNzID0gZmFsc2U7XG4gICAgICBsZXQgaXNHbG9iYWxWYXIgPSBmYWxzZTtcbiAgICAgIGlmICgocHJvcFZhbHVlID0gb2JqW1wiVkFSPVwiXSkpIHtcbiAgICAgICAgaXNWYXJBc3MgPSB0cnVlO1xuICAgICAgICBpc0dsb2JhbFZhciA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKChwcm9wVmFsdWUgPSBvYmpbXCJ0ZW1wPVwiXSkpIHtcbiAgICAgICAgaXNWYXJBc3MgPSB0cnVlO1xuICAgICAgICBpc0dsb2JhbFZhciA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKGlzVmFyQXNzKSB7XG4gICAgICAgIGxldCB2YXJOYW1lID0gcHJvcFZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgIGxldCBpc05ld0RlY2wgPSAhb2JqW1wicmVcIl07XG4gICAgICAgIGxldCB2YXJBc3MgPSBuZXcgVmFyaWFibGVBc3NpZ25tZW50KHZhck5hbWUsIGlzTmV3RGVjbCk7XG4gICAgICAgIHZhckFzcy5pc0dsb2JhbCA9IGlzR2xvYmFsVmFyO1xuICAgICAgICByZXR1cm4gdmFyQXNzO1xuICAgICAgfVxuICAgICAgaWYgKG9ialtcIiNcIl0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwcm9wVmFsdWUgPSBvYmpbXCIjXCJdO1xuICAgICAgICByZXR1cm4gbmV3IFRhZyhwcm9wVmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIExpc3QgdmFsdWVcbiAgICAgIGlmICgocHJvcFZhbHVlID0gb2JqW1wibGlzdFwiXSkpIHtcbiAgICAgICAgLy8gdmFyIGxpc3RDb250ZW50ID0gKERpY3Rpb25hcnk8c3RyaW5nLCBvYmplY3Q+KXByb3BWYWx1ZTtcbiAgICAgICAgbGV0IGxpc3RDb250ZW50ID0gcHJvcFZhbHVlIGFzIFJlY29yZDxzdHJpbmcsIGFueT47XG4gICAgICAgIGxldCByYXdMaXN0ID0gbmV3IElua0xpc3QoKTtcbiAgICAgICAgaWYgKChwcm9wVmFsdWUgPSBvYmpbXCJvcmlnaW5zXCJdKSkge1xuICAgICAgICAgIC8vIHZhciBuYW1lc0FzT2JqcyA9IChMaXN0PG9iamVjdD4pcHJvcFZhbHVlO1xuICAgICAgICAgIGxldCBuYW1lc0FzT2JqcyA9IHByb3BWYWx1ZSBhcyBzdHJpbmdbXTtcbiAgICAgICAgICAvLyByYXdMaXN0LlNldEluaXRpYWxPcmlnaW5OYW1lcyhuYW1lc0FzT2Jqcy5DYXN0PHN0cmluZz4oKS5Ub0xpc3QoKSk7XG4gICAgICAgICAgcmF3TGlzdC5TZXRJbml0aWFsT3JpZ2luTmFtZXMobmFtZXNBc09ianMpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQga2V5IGluIGxpc3RDb250ZW50KSB7XG4gICAgICAgICAgaWYgKGxpc3RDb250ZW50Lmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIGxldCBuYW1lVG9WYWwgPSBsaXN0Q29udGVudFtrZXldO1xuICAgICAgICAgICAgbGV0IGl0ZW0gPSBuZXcgSW5rTGlzdEl0ZW0oa2V5KTtcbiAgICAgICAgICAgIGxldCB2YWwgPSBwYXJzZUludChuYW1lVG9WYWwpO1xuICAgICAgICAgICAgcmF3TGlzdC5BZGQoaXRlbSwgdmFsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IExpc3RWYWx1ZShyYXdMaXN0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9ialtcIm9yaWdpbmFsQ2hvaWNlUGF0aFwiXSAhPSBudWxsKSByZXR1cm4gdGhpcy5KT2JqZWN0VG9DaG9pY2Uob2JqKTtcbiAgICB9XG5cbiAgICAvLyBBcnJheSBpcyBhbHdheXMgYSBSdW50aW1lLkNvbnRhaW5lclxuICAgIGlmIChBcnJheS5pc0FycmF5KHRva2VuKSkge1xuICAgICAgcmV0dXJuIHRoaXMuSkFycmF5VG9Db250YWluZXIodG9rZW4pO1xuICAgIH1cblxuICAgIGlmICh0b2tlbiA9PT0gbnVsbCB8fCB0b2tlbiA9PT0gdW5kZWZpbmVkKSByZXR1cm4gbnVsbDtcblxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiRmFpbGVkIHRvIGNvbnZlcnQgdG9rZW4gdG8gcnVudGltZSBvYmplY3Q6IFwiICtcbiAgICAgICAgdGhpcy50b0pzb24odG9rZW4sIFtcInBhcmVudFwiXSlcbiAgICApO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyB0b0pzb248VD4oXG4gICAgbWU6IFQsXG4gICAgcmVtb3Zlcz86IChrZXlvZiBUKVtdLFxuICAgIHNwYWNlPzogbnVtYmVyXG4gICk6IHN0cmluZyB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KFxuICAgICAgbWUsXG4gICAgICAoaywgdikgPT4gKHJlbW92ZXM/LnNvbWUoKHIpID0+IHIgPT09IGspID8gdW5kZWZpbmVkIDogdiksXG4gICAgICBzcGFjZVxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIFdyaXRlUnVudGltZUNvbnRhaW5lcihcbiAgICB3cml0ZXI6IFNpbXBsZUpzb24uV3JpdGVyLFxuICAgIGNvbnRhaW5lcjogQ29udGFpbmVyIHwgbnVsbCxcbiAgICB3aXRob3V0TmFtZTogYm9vbGVhbiA9IGZhbHNlXG4gICkge1xuICAgIHdyaXRlci5Xcml0ZUFycmF5U3RhcnQoKTtcbiAgICBpZiAoY29udGFpbmVyID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwiY29udGFpbmVyXCIpO1xuICAgIH1cbiAgICBmb3IgKGxldCBjIG9mIGNvbnRhaW5lci5jb250ZW50KSB0aGlzLldyaXRlUnVudGltZU9iamVjdCh3cml0ZXIsIGMpO1xuXG4gICAgbGV0IG5hbWVkT25seUNvbnRlbnQgPSBjb250YWluZXIubmFtZWRPbmx5Q29udGVudDtcbiAgICBsZXQgY291bnRGbGFncyA9IGNvbnRhaW5lci5jb3VudEZsYWdzO1xuICAgIGxldCBoYXNOYW1lUHJvcGVydHkgPSBjb250YWluZXIubmFtZSAhPSBudWxsICYmICF3aXRob3V0TmFtZTtcblxuICAgIGxldCBoYXNUZXJtaW5hdG9yID1cbiAgICAgIG5hbWVkT25seUNvbnRlbnQgIT0gbnVsbCB8fCBjb3VudEZsYWdzID4gMCB8fCBoYXNOYW1lUHJvcGVydHk7XG4gICAgaWYgKGhhc1Rlcm1pbmF0b3IpIHtcbiAgICAgIHdyaXRlci5Xcml0ZU9iamVjdFN0YXJ0KCk7XG4gICAgfVxuXG4gICAgaWYgKG5hbWVkT25seUNvbnRlbnQgIT0gbnVsbCkge1xuICAgICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIG5hbWVkT25seUNvbnRlbnQpIHtcbiAgICAgICAgbGV0IG5hbWUgPSBrZXk7XG4gICAgICAgIGxldCBuYW1lZENvbnRhaW5lciA9IGFzT3JOdWxsKHZhbHVlLCBDb250YWluZXIpO1xuICAgICAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eVN0YXJ0KG5hbWUpO1xuICAgICAgICB0aGlzLldyaXRlUnVudGltZUNvbnRhaW5lcih3cml0ZXIsIG5hbWVkQ29udGFpbmVyLCB0cnVlKTtcbiAgICAgICAgd3JpdGVyLldyaXRlUHJvcGVydHlFbmQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY291bnRGbGFncyA+IDApIHdyaXRlci5Xcml0ZUludFByb3BlcnR5KFwiI2ZcIiwgY291bnRGbGFncyk7XG5cbiAgICBpZiAoaGFzTmFtZVByb3BlcnR5KSB3cml0ZXIuV3JpdGVQcm9wZXJ0eShcIiNuXCIsIGNvbnRhaW5lci5uYW1lKTtcblxuICAgIGlmIChoYXNUZXJtaW5hdG9yKSB3cml0ZXIuV3JpdGVPYmplY3RFbmQoKTtcbiAgICBlbHNlIHdyaXRlci5Xcml0ZU51bGwoKTtcblxuICAgIHdyaXRlci5Xcml0ZUFycmF5RW5kKCk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIEpBcnJheVRvQ29udGFpbmVyKGpBcnJheTogYW55W10pIHtcbiAgICBsZXQgY29udGFpbmVyID0gbmV3IENvbnRhaW5lcigpO1xuICAgIGNvbnRhaW5lci5jb250ZW50ID0gdGhpcy5KQXJyYXlUb1J1bnRpbWVPYmpMaXN0KGpBcnJheSwgdHJ1ZSk7XG5cbiAgICBsZXQgdGVybWluYXRpbmdPYmogPSBqQXJyYXlbakFycmF5Lmxlbmd0aCAtIDFdIGFzIFJlY29yZDxzdHJpbmcsIGFueT47XG4gICAgaWYgKHRlcm1pbmF0aW5nT2JqICE9IG51bGwpIHtcbiAgICAgIGxldCBuYW1lZE9ubHlDb250ZW50ID0gbmV3IE1hcCgpO1xuXG4gICAgICBmb3IgKGxldCBrZXkgaW4gdGVybWluYXRpbmdPYmopIHtcbiAgICAgICAgaWYgKGtleSA9PSBcIiNmXCIpIHtcbiAgICAgICAgICBjb250YWluZXIuY291bnRGbGFncyA9IHBhcnNlSW50KHRlcm1pbmF0aW5nT2JqW2tleV0pO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PSBcIiNuXCIpIHtcbiAgICAgICAgICBjb250YWluZXIubmFtZSA9IHRlcm1pbmF0aW5nT2JqW2tleV0udG9TdHJpbmcoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgbmFtZWRDb250ZW50SXRlbSA9IHRoaXMuSlRva2VuVG9SdW50aW1lT2JqZWN0KFxuICAgICAgICAgICAgdGVybWluYXRpbmdPYmpba2V5XVxuICAgICAgICAgICk7XG4gICAgICAgICAgLy8gdmFyIG5hbWVkU3ViQ29udGFpbmVyID0gbmFtZWRDb250ZW50SXRlbSBhcyBDb250YWluZXI7XG4gICAgICAgICAgbGV0IG5hbWVkU3ViQ29udGFpbmVyID0gYXNPck51bGwobmFtZWRDb250ZW50SXRlbSwgQ29udGFpbmVyKTtcbiAgICAgICAgICBpZiAobmFtZWRTdWJDb250YWluZXIpIG5hbWVkU3ViQ29udGFpbmVyLm5hbWUgPSBrZXk7XG4gICAgICAgICAgbmFtZWRPbmx5Q29udGVudC5zZXQoa2V5LCBuYW1lZENvbnRlbnRJdGVtKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb250YWluZXIubmFtZWRPbmx5Q29udGVudCA9IG5hbWVkT25seUNvbnRlbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgSk9iamVjdFRvQ2hvaWNlKGpPYmo6IFJlY29yZDxzdHJpbmcsIGFueT4pIHtcbiAgICBsZXQgY2hvaWNlID0gbmV3IENob2ljZSgpO1xuICAgIGNob2ljZS50ZXh0ID0gak9ialtcInRleHRcIl0udG9TdHJpbmcoKTtcbiAgICBjaG9pY2UuaW5kZXggPSBwYXJzZUludChqT2JqW1wiaW5kZXhcIl0pO1xuICAgIGNob2ljZS5zb3VyY2VQYXRoID0gak9ialtcIm9yaWdpbmFsQ2hvaWNlUGF0aFwiXS50b1N0cmluZygpO1xuICAgIGNob2ljZS5vcmlnaW5hbFRocmVhZEluZGV4ID0gcGFyc2VJbnQoak9ialtcIm9yaWdpbmFsVGhyZWFkSW5kZXhcIl0pO1xuICAgIGNob2ljZS5wYXRoU3RyaW5nT25DaG9pY2UgPSBqT2JqW1widGFyZ2V0UGF0aFwiXS50b1N0cmluZygpO1xuICAgIGNob2ljZS50YWdzID0gdGhpcy5KQXJyYXlUb1RhZ3Moak9iaik7XG4gICAgcmV0dXJuIGNob2ljZTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgSkFycmF5VG9UYWdzKGpPYmo6IFJlY29yZDxzdHJpbmcsIGFueT4pIHtcbiAgICBpZiAoak9ialtcInRhZ3NcIl0pIHtcbiAgICAgIHJldHVybiBqT2JqW1widGFnc1wiXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBXcml0ZUNob2ljZSh3cml0ZXI6IFNpbXBsZUpzb24uV3JpdGVyLCBjaG9pY2U6IENob2ljZSkge1xuICAgIHdyaXRlci5Xcml0ZU9iamVjdFN0YXJ0KCk7XG4gICAgd3JpdGVyLldyaXRlUHJvcGVydHkoXCJ0ZXh0XCIsIGNob2ljZS50ZXh0KTtcbiAgICB3cml0ZXIuV3JpdGVJbnRQcm9wZXJ0eShcImluZGV4XCIsIGNob2ljZS5pbmRleCk7XG4gICAgd3JpdGVyLldyaXRlUHJvcGVydHkoXCJvcmlnaW5hbENob2ljZVBhdGhcIiwgY2hvaWNlLnNvdXJjZVBhdGgpO1xuICAgIHdyaXRlci5Xcml0ZUludFByb3BlcnR5KFwib3JpZ2luYWxUaHJlYWRJbmRleFwiLCBjaG9pY2Uub3JpZ2luYWxUaHJlYWRJbmRleCk7XG4gICAgd3JpdGVyLldyaXRlUHJvcGVydHkoXCJ0YXJnZXRQYXRoXCIsIGNob2ljZS5wYXRoU3RyaW5nT25DaG9pY2UpO1xuICAgIHRoaXMuV3JpdGVDaG9pY2VUYWdzKHdyaXRlciwgY2hvaWNlKTtcbiAgICB3cml0ZXIuV3JpdGVPYmplY3RFbmQoKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgV3JpdGVDaG9pY2VUYWdzKHdyaXRlcjogU2ltcGxlSnNvbi5Xcml0ZXIsIGNob2ljZTogQ2hvaWNlKSB7XG4gICAgaWYgKGNob2ljZS50YWdzICYmIGNob2ljZS50YWdzLmxlbmd0aCA+IDApIHtcbiAgICAgIHdyaXRlci5Xcml0ZVByb3BlcnR5U3RhcnQoXCJ0YWdzXCIpO1xuICAgICAgd3JpdGVyLldyaXRlQXJyYXlTdGFydCgpO1xuICAgICAgZm9yIChjb25zdCB0YWcgb2YgY2hvaWNlLnRhZ3MhKSB7XG4gICAgICAgIHdyaXRlci5Xcml0ZSh0YWcpO1xuICAgICAgfVxuICAgICAgd3JpdGVyLldyaXRlQXJyYXlFbmQoKTtcbiAgICAgIHdyaXRlci5Xcml0ZVByb3BlcnR5RW5kKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBXcml0ZUlua0xpc3Qod3JpdGVyOiBTaW1wbGVKc29uLldyaXRlciwgbGlzdFZhbDogTGlzdFZhbHVlKSB7XG4gICAgbGV0IHJhd0xpc3QgPSBsaXN0VmFsLnZhbHVlO1xuICAgIGlmIChyYXdMaXN0ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwicmF3TGlzdFwiKTtcbiAgICB9XG5cbiAgICB3cml0ZXIuV3JpdGVPYmplY3RTdGFydCgpO1xuICAgIHdyaXRlci5Xcml0ZVByb3BlcnR5U3RhcnQoXCJsaXN0XCIpO1xuICAgIHdyaXRlci5Xcml0ZU9iamVjdFN0YXJ0KCk7XG5cbiAgICBmb3IgKGxldCBba2V5LCB2YWxdIG9mIHJhd0xpc3QpIHtcbiAgICAgIGxldCBpdGVtID0gSW5rTGlzdEl0ZW0uZnJvbVNlcmlhbGl6ZWRLZXkoa2V5KTtcbiAgICAgIGxldCBpdGVtVmFsID0gdmFsO1xuXG4gICAgICBpZiAoaXRlbS5pdGVtTmFtZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwiaXRlbS5pdGVtTmFtZVwiKTtcbiAgICAgIH1cblxuICAgICAgd3JpdGVyLldyaXRlUHJvcGVydHlOYW1lU3RhcnQoKTtcbiAgICAgIHdyaXRlci5Xcml0ZVByb3BlcnR5TmFtZUlubmVyKGl0ZW0ub3JpZ2luTmFtZSA/IGl0ZW0ub3JpZ2luTmFtZSA6IFwiP1wiKTtcbiAgICAgIHdyaXRlci5Xcml0ZVByb3BlcnR5TmFtZUlubmVyKFwiLlwiKTtcbiAgICAgIHdyaXRlci5Xcml0ZVByb3BlcnR5TmFtZUlubmVyKGl0ZW0uaXRlbU5hbWUpO1xuICAgICAgd3JpdGVyLldyaXRlUHJvcGVydHlOYW1lRW5kKCk7XG5cbiAgICAgIHdyaXRlci5Xcml0ZShpdGVtVmFsKTtcblxuICAgICAgd3JpdGVyLldyaXRlUHJvcGVydHlFbmQoKTtcbiAgICB9XG5cbiAgICB3cml0ZXIuV3JpdGVPYmplY3RFbmQoKTtcblxuICAgIHdyaXRlci5Xcml0ZVByb3BlcnR5RW5kKCk7XG5cbiAgICBpZiAoXG4gICAgICByYXdMaXN0LkNvdW50ID09IDAgJiZcbiAgICAgIHJhd0xpc3Qub3JpZ2luTmFtZXMgIT0gbnVsbCAmJlxuICAgICAgcmF3TGlzdC5vcmlnaW5OYW1lcy5sZW5ndGggPiAwXG4gICAgKSB7XG4gICAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eVN0YXJ0KFwib3JpZ2luc1wiKTtcbiAgICAgIHdyaXRlci5Xcml0ZUFycmF5U3RhcnQoKTtcbiAgICAgIGZvciAobGV0IG5hbWUgb2YgcmF3TGlzdC5vcmlnaW5OYW1lcykgd3JpdGVyLldyaXRlKG5hbWUpO1xuICAgICAgd3JpdGVyLldyaXRlQXJyYXlFbmQoKTtcbiAgICAgIHdyaXRlci5Xcml0ZVByb3BlcnR5RW5kKCk7XG4gICAgfVxuXG4gICAgd3JpdGVyLldyaXRlT2JqZWN0RW5kKCk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIExpc3REZWZpbml0aW9uc1RvSlRva2VuKG9yaWdpbjogTGlzdERlZmluaXRpb25zT3JpZ2luKSB7XG4gICAgbGV0IHJlc3VsdDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXG4gICAgZm9yIChsZXQgZGVmIG9mIG9yaWdpbi5saXN0cykge1xuICAgICAgbGV0IGxpc3REZWZKc29uOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG5cbiAgICAgIGZvciAobGV0IFtrZXksIHZhbF0gb2YgZGVmLml0ZW1zKSB7XG4gICAgICAgIGxldCBpdGVtID0gSW5rTGlzdEl0ZW0uZnJvbVNlcmlhbGl6ZWRLZXkoa2V5KTtcbiAgICAgICAgaWYgKGl0ZW0uaXRlbU5hbWUgPT09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwiaXRlbS5pdGVtTmFtZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBsaXN0RGVmSnNvbltpdGVtLml0ZW1OYW1lXSA9IHZhbDtcbiAgICAgIH1cblxuICAgICAgcmVzdWx0W2RlZi5uYW1lXSA9IGxpc3REZWZKc29uO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIEpUb2tlblRvTGlzdERlZmluaXRpb25zKG9iajogUmVjb3JkPHN0cmluZywgYW55Pikge1xuICAgIC8vIHZhciBkZWZzT2JqID0gKERpY3Rpb25hcnk8c3RyaW5nLCBvYmplY3Q+KW9iajtcbiAgICBsZXQgZGVmc09iaiA9IG9iajtcblxuICAgIGxldCBhbGxEZWZzOiBMaXN0RGVmaW5pdGlvbltdID0gW107XG5cbiAgICBmb3IgKGxldCBrZXkgaW4gZGVmc09iaikge1xuICAgICAgaWYgKGRlZnNPYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBsZXQgbmFtZSA9IGtleS50b1N0cmluZygpO1xuICAgICAgICAvLyB2YXIgbGlzdERlZkpzb24gPSAoRGljdGlvbmFyeTxzdHJpbmcsIG9iamVjdD4pa3YuVmFsdWU7XG4gICAgICAgIGxldCBsaXN0RGVmSnNvbiA9IGRlZnNPYmpba2V5XSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuXG4gICAgICAgIC8vIENhc3QgKHN0cmluZywgb2JqZWN0KSB0byAoc3RyaW5nLCBpbnQpIGZvciBpdGVtc1xuICAgICAgICBsZXQgaXRlbXM6IE1hcDxzdHJpbmcsIG51bWJlcj4gPSBuZXcgTWFwKCk7XG5cbiAgICAgICAgZm9yIChsZXQgbmFtZVZhbHVlS2V5IGluIGxpc3REZWZKc29uKSB7XG4gICAgICAgICAgaWYgKGRlZnNPYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgbGV0IG5hbWVWYWx1ZSA9IGxpc3REZWZKc29uW25hbWVWYWx1ZUtleV07XG4gICAgICAgICAgICBpdGVtcy5zZXQobmFtZVZhbHVlS2V5LCBwYXJzZUludChuYW1lVmFsdWUpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZGVmID0gbmV3IExpc3REZWZpbml0aW9uKG5hbWUsIGl0ZW1zKTtcbiAgICAgICAgYWxsRGVmcy5wdXNoKGRlZik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBMaXN0RGVmaW5pdGlvbnNPcmlnaW4oYWxsRGVmcyk7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBfY29udHJvbENvbW1hbmROYW1lcyA9ICgoKSA9PiB7XG4gICAgbGV0IF9jb250cm9sQ29tbWFuZE5hbWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgX2NvbnRyb2xDb21tYW5kTmFtZXNbQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuRXZhbFN0YXJ0XSA9IFwiZXZcIjtcbiAgICBfY29udHJvbENvbW1hbmROYW1lc1tDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5FdmFsT3V0cHV0XSA9IFwib3V0XCI7XG4gICAgX2NvbnRyb2xDb21tYW5kTmFtZXNbQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuRXZhbEVuZF0gPSBcIi9ldlwiO1xuICAgIF9jb250cm9sQ29tbWFuZE5hbWVzW0NvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLkR1cGxpY2F0ZV0gPSBcImR1XCI7XG4gICAgX2NvbnRyb2xDb21tYW5kTmFtZXNbQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuUG9wRXZhbHVhdGVkVmFsdWVdID0gXCJwb3BcIjtcbiAgICBfY29udHJvbENvbW1hbmROYW1lc1tDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5Qb3BGdW5jdGlvbl0gPSBcIn5yZXRcIjtcbiAgICBfY29udHJvbENvbW1hbmROYW1lc1tDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5Qb3BUdW5uZWxdID0gXCItPi0+XCI7XG4gICAgX2NvbnRyb2xDb21tYW5kTmFtZXNbQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuQmVnaW5TdHJpbmddID0gXCJzdHJcIjtcbiAgICBfY29udHJvbENvbW1hbmROYW1lc1tDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5FbmRTdHJpbmddID0gXCIvc3RyXCI7XG4gICAgX2NvbnRyb2xDb21tYW5kTmFtZXNbQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuTm9PcF0gPSBcIm5vcFwiO1xuICAgIF9jb250cm9sQ29tbWFuZE5hbWVzW0NvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLkNob2ljZUNvdW50XSA9IFwiY2hvaWNlQ250XCI7XG4gICAgX2NvbnRyb2xDb21tYW5kTmFtZXNbQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuVHVybnNdID0gXCJ0dXJuXCI7XG4gICAgX2NvbnRyb2xDb21tYW5kTmFtZXNbQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuVHVybnNTaW5jZV0gPSBcInR1cm5zXCI7XG4gICAgX2NvbnRyb2xDb21tYW5kTmFtZXNbQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuUmVhZENvdW50XSA9IFwicmVhZGNcIjtcbiAgICBfY29udHJvbENvbW1hbmROYW1lc1tDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5SYW5kb21dID0gXCJybmRcIjtcbiAgICBfY29udHJvbENvbW1hbmROYW1lc1tDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5TZWVkUmFuZG9tXSA9IFwic3JuZFwiO1xuICAgIF9jb250cm9sQ29tbWFuZE5hbWVzW0NvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLlZpc2l0SW5kZXhdID0gXCJ2aXNpdFwiO1xuICAgIF9jb250cm9sQ29tbWFuZE5hbWVzW0NvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLlNlcXVlbmNlU2h1ZmZsZUluZGV4XSA9XG4gICAgICBcInNlcVwiO1xuICAgIF9jb250cm9sQ29tbWFuZE5hbWVzW0NvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLlN0YXJ0VGhyZWFkXSA9IFwidGhyZWFkXCI7XG4gICAgX2NvbnRyb2xDb21tYW5kTmFtZXNbQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuRG9uZV0gPSBcImRvbmVcIjtcbiAgICBfY29udHJvbENvbW1hbmROYW1lc1tDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5FbmRdID0gXCJlbmRcIjtcbiAgICBfY29udHJvbENvbW1hbmROYW1lc1tDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5MaXN0RnJvbUludF0gPSBcImxpc3RJbnRcIjtcbiAgICBfY29udHJvbENvbW1hbmROYW1lc1tDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5MaXN0UmFuZ2VdID0gXCJyYW5nZVwiO1xuICAgIF9jb250cm9sQ29tbWFuZE5hbWVzW0NvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLkxpc3RSYW5kb21dID0gXCJscm5kXCI7XG4gICAgX2NvbnRyb2xDb21tYW5kTmFtZXNbQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuQmVnaW5UYWddID0gXCIjXCI7XG4gICAgX2NvbnRyb2xDb21tYW5kTmFtZXNbQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuRW5kVGFnXSA9IFwiLyNcIjtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuVE9UQUxfVkFMVUVTOyArK2kpIHtcbiAgICAgIGlmIChfY29udHJvbENvbW1hbmROYW1lc1tpXSA9PSBudWxsKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb250cm9sIGNvbW1hbmQgbm90IGFjY291bnRlZCBmb3IgaW4gc2VyaWFsaXNhdGlvblwiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gX2NvbnRyb2xDb21tYW5kTmFtZXM7XG4gIH0pKCk7XG59XG4iLCJpbXBvcnQgeyBQdXNoUG9wVHlwZSB9IGZyb20gXCIuL1B1c2hQb3BcIjtcbmltcG9ydCB7IFBhdGggfSBmcm9tIFwiLi9QYXRoXCI7XG5pbXBvcnQgeyBTdG9yeSB9IGZyb20gXCIuL1N0b3J5XCI7XG5pbXBvcnQgeyBKc29uU2VyaWFsaXNhdGlvbiB9IGZyb20gXCIuL0pzb25TZXJpYWxpc2F0aW9uXCI7XG5pbXBvcnQgeyBMaXN0VmFsdWUgfSBmcm9tIFwiLi9WYWx1ZVwiO1xuaW1wb3J0IHsgU3RyaW5nQnVpbGRlciB9IGZyb20gXCIuL1N0cmluZ0J1aWxkZXJcIjtcbmltcG9ydCB7IFBvaW50ZXIgfSBmcm9tIFwiLi9Qb2ludGVyXCI7XG5pbXBvcnQgeyBJbmtPYmplY3QgfSBmcm9tIFwiLi9PYmplY3RcIjtcbmltcG9ydCB7IERlYnVnIH0gZnJvbSBcIi4vRGVidWdcIjtcbmltcG9ydCB7IHRyeUdldFZhbHVlRnJvbU1hcCB9IGZyb20gXCIuL1RyeUdldFJlc3VsdFwiO1xuaW1wb3J0IHsgdGhyb3dOdWxsRXhjZXB0aW9uIH0gZnJvbSBcIi4vTnVsbEV4Y2VwdGlvblwiO1xuaW1wb3J0IHsgU2ltcGxlSnNvbiB9IGZyb20gXCIuL1NpbXBsZUpzb25cIjtcblxuZXhwb3J0IGNsYXNzIENhbGxTdGFjayB7XG4gIGdldCBlbGVtZW50cygpIHtcbiAgICByZXR1cm4gdGhpcy5jYWxsU3RhY2s7XG4gIH1cblxuICBnZXQgZGVwdGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudHMubGVuZ3RoO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRFbGVtZW50KCkge1xuICAgIGxldCB0aHJlYWQgPSB0aGlzLl90aHJlYWRzW3RoaXMuX3RocmVhZHMubGVuZ3RoIC0gMV07XG4gICAgbGV0IGNzID0gdGhyZWFkLmNhbGxzdGFjaztcbiAgICByZXR1cm4gY3NbY3MubGVuZ3RoIC0gMV07XG4gIH1cblxuICBnZXQgY3VycmVudEVsZW1lbnRJbmRleCgpIHtcbiAgICByZXR1cm4gdGhpcy5jYWxsU3RhY2subGVuZ3RoIC0gMTtcbiAgfVxuXG4gIGdldCBjdXJyZW50VGhyZWFkKCk6IENhbGxTdGFjay5UaHJlYWQge1xuICAgIHJldHVybiB0aGlzLl90aHJlYWRzW3RoaXMuX3RocmVhZHMubGVuZ3RoIC0gMV07XG4gIH1cbiAgc2V0IGN1cnJlbnRUaHJlYWQodmFsdWU6IENhbGxTdGFjay5UaHJlYWQpIHtcbiAgICBEZWJ1Zy5Bc3NlcnQoXG4gICAgICB0aGlzLl90aHJlYWRzLmxlbmd0aCA9PSAxLFxuICAgICAgXCJTaG91bGRuJ3QgYmUgZGlyZWN0bHkgc2V0dGluZyB0aGUgY3VycmVudCB0aHJlYWQgd2hlbiB3ZSBoYXZlIGEgc3RhY2sgb2YgdGhlbVwiXG4gICAgKTtcblxuICAgIHRoaXMuX3RocmVhZHMubGVuZ3RoID0gMDtcbiAgICB0aGlzLl90aHJlYWRzLnB1c2godmFsdWUpO1xuICB9XG5cbiAgZ2V0IGNhblBvcCgpIHtcbiAgICByZXR1cm4gdGhpcy5jYWxsU3RhY2subGVuZ3RoID4gMTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHN0b3J5Q29udGV4dDogU3RvcnkpO1xuICBjb25zdHJ1Y3Rvcih0b0NvcHk6IENhbGxTdGFjayk7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGlmIChhcmd1bWVudHNbMF0gaW5zdGFuY2VvZiBTdG9yeSkge1xuICAgICAgbGV0IHN0b3J5Q29udGV4dCA9IGFyZ3VtZW50c1swXSBhcyBTdG9yeTtcblxuICAgICAgdGhpcy5fc3RhcnRPZlJvb3QgPSBQb2ludGVyLlN0YXJ0T2Yoc3RvcnlDb250ZXh0LnJvb3RDb250ZW50Q29udGFpbmVyKTtcbiAgICAgIHRoaXMuUmVzZXQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHRvQ29weSA9IGFyZ3VtZW50c1swXSBhcyBDYWxsU3RhY2s7XG5cbiAgICAgIHRoaXMuX3RocmVhZHMgPSBbXTtcbiAgICAgIGZvciAobGV0IG90aGVyVGhyZWFkIG9mIHRvQ29weS5fdGhyZWFkcykge1xuICAgICAgICB0aGlzLl90aHJlYWRzLnB1c2gob3RoZXJUaHJlYWQuQ29weSgpKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3RocmVhZENvdW50ZXIgPSB0b0NvcHkuX3RocmVhZENvdW50ZXI7XG4gICAgICB0aGlzLl9zdGFydE9mUm9vdCA9IHRvQ29weS5fc3RhcnRPZlJvb3QuY29weSgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBSZXNldCgpIHtcbiAgICB0aGlzLl90aHJlYWRzID0gW107XG4gICAgdGhpcy5fdGhyZWFkcy5wdXNoKG5ldyBDYWxsU3RhY2suVGhyZWFkKCkpO1xuXG4gICAgdGhpcy5fdGhyZWFkc1swXS5jYWxsc3RhY2sucHVzaChcbiAgICAgIG5ldyBDYWxsU3RhY2suRWxlbWVudChQdXNoUG9wVHlwZS5UdW5uZWwsIHRoaXMuX3N0YXJ0T2ZSb290KVxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgU2V0SnNvblRva2VuKGpPYmplY3Q6IFJlY29yZDxzdHJpbmcsIGFueT4sIHN0b3J5Q29udGV4dDogU3RvcnkpIHtcbiAgICB0aGlzLl90aHJlYWRzLmxlbmd0aCA9IDA7XG5cbiAgICAvLyBUT0RPOiAoTGlzdDxvYmplY3Q+KSBqT2JqZWN0IFtcInRocmVhZHNcIl07XG4gICAgbGV0IGpUaHJlYWRzOiBhbnlbXSA9IGpPYmplY3RbXCJ0aHJlYWRzXCJdO1xuXG4gICAgZm9yIChsZXQgalRocmVhZFRvayBvZiBqVGhyZWFkcykge1xuICAgICAgLy8gVE9ETzogdmFyIGpUaHJlYWRPYmogPSAoRGljdGlvbmFyeTxzdHJpbmcsIG9iamVjdD4palRocmVhZFRvaztcbiAgICAgIGxldCBqVGhyZWFkT2JqID0galRocmVhZFRvaztcbiAgICAgIGxldCB0aHJlYWQgPSBuZXcgQ2FsbFN0YWNrLlRocmVhZChqVGhyZWFkT2JqLCBzdG9yeUNvbnRleHQpO1xuICAgICAgdGhpcy5fdGhyZWFkcy5wdXNoKHRocmVhZCk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogKGludClqT2JqZWN0IFtcInRocmVhZENvdW50ZXJcIl07XG4gICAgdGhpcy5fdGhyZWFkQ291bnRlciA9IHBhcnNlSW50KGpPYmplY3RbXCJ0aHJlYWRDb3VudGVyXCJdKTtcbiAgICB0aGlzLl9zdGFydE9mUm9vdCA9IFBvaW50ZXIuU3RhcnRPZihzdG9yeUNvbnRleHQucm9vdENvbnRlbnRDb250YWluZXIpO1xuICB9XG4gIHB1YmxpYyBXcml0ZUpzb24odzogU2ltcGxlSnNvbi5Xcml0ZXIpIHtcbiAgICB3LldyaXRlT2JqZWN0KCh3cml0ZXIpID0+IHtcbiAgICAgIHdyaXRlci5Xcml0ZVByb3BlcnR5U3RhcnQoXCJ0aHJlYWRzXCIpO1xuICAgICAgd3JpdGVyLldyaXRlQXJyYXlTdGFydCgpO1xuXG4gICAgICBmb3IgKGxldCB0aHJlYWQgb2YgdGhpcy5fdGhyZWFkcykge1xuICAgICAgICB0aHJlYWQuV3JpdGVKc29uKHdyaXRlcik7XG4gICAgICB9XG5cbiAgICAgIHdyaXRlci5Xcml0ZUFycmF5RW5kKCk7XG4gICAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eUVuZCgpO1xuXG4gICAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eVN0YXJ0KFwidGhyZWFkQ291bnRlclwiKTtcbiAgICAgIHdyaXRlci5Xcml0ZUludCh0aGlzLl90aHJlYWRDb3VudGVyKTtcbiAgICAgIHdyaXRlci5Xcml0ZVByb3BlcnR5RW5kKCk7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgUHVzaFRocmVhZCgpIHtcbiAgICBsZXQgbmV3VGhyZWFkID0gdGhpcy5jdXJyZW50VGhyZWFkLkNvcHkoKTtcbiAgICB0aGlzLl90aHJlYWRDb3VudGVyKys7XG4gICAgbmV3VGhyZWFkLnRocmVhZEluZGV4ID0gdGhpcy5fdGhyZWFkQ291bnRlcjtcbiAgICB0aGlzLl90aHJlYWRzLnB1c2gobmV3VGhyZWFkKTtcbiAgfVxuXG4gIHB1YmxpYyBGb3JrVGhyZWFkKCkge1xuICAgIGxldCBmb3JrZWRUaHJlYWQgPSB0aGlzLmN1cnJlbnRUaHJlYWQuQ29weSgpO1xuICAgIHRoaXMuX3RocmVhZENvdW50ZXIrKztcbiAgICBmb3JrZWRUaHJlYWQudGhyZWFkSW5kZXggPSB0aGlzLl90aHJlYWRDb3VudGVyO1xuICAgIHJldHVybiBmb3JrZWRUaHJlYWQ7XG4gIH1cblxuICBwdWJsaWMgUG9wVGhyZWFkKCkge1xuICAgIGlmICh0aGlzLmNhblBvcFRocmVhZCkge1xuICAgICAgdGhpcy5fdGhyZWFkcy5zcGxpY2UodGhpcy5fdGhyZWFkcy5pbmRleE9mKHRoaXMuY3VycmVudFRocmVhZCksIDEpOyAvLyBzaG91bGQgYmUgZXF1aXZhbGVudCB0byBhIHBvcCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbid0IHBvcCB0aHJlYWRcIik7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGNhblBvcFRocmVhZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdGhyZWFkcy5sZW5ndGggPiAxICYmICF0aGlzLmVsZW1lbnRJc0V2YWx1YXRlRnJvbUdhbWU7XG4gIH1cblxuICBnZXQgZWxlbWVudElzRXZhbHVhdGVGcm9tR2FtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50RWxlbWVudC50eXBlID09IFB1c2hQb3BUeXBlLkZ1bmN0aW9uRXZhbHVhdGlvbkZyb21HYW1lO1xuICB9XG5cbiAgcHVibGljIFB1c2goXG4gICAgdHlwZTogUHVzaFBvcFR5cGUsXG4gICAgZXh0ZXJuYWxFdmFsdWF0aW9uU3RhY2tIZWlnaHQ6IG51bWJlciA9IDAsXG4gICAgb3V0cHV0U3RyZWFtTGVuZ3RoV2l0aFB1c2hlZDogbnVtYmVyID0gMFxuICApIHtcbiAgICBsZXQgZWxlbWVudCA9IG5ldyBDYWxsU3RhY2suRWxlbWVudChcbiAgICAgIHR5cGUsXG4gICAgICB0aGlzLmN1cnJlbnRFbGVtZW50LmN1cnJlbnRQb2ludGVyLFxuICAgICAgZmFsc2VcbiAgICApO1xuXG4gICAgZWxlbWVudC5ldmFsdWF0aW9uU3RhY2tIZWlnaHRXaGVuUHVzaGVkID0gZXh0ZXJuYWxFdmFsdWF0aW9uU3RhY2tIZWlnaHQ7XG4gICAgZWxlbWVudC5mdW5jdGlvblN0YXJ0SW5PdXRwdXRTdHJlYW0gPSBvdXRwdXRTdHJlYW1MZW5ndGhXaXRoUHVzaGVkO1xuXG4gICAgdGhpcy5jYWxsU3RhY2sucHVzaChlbGVtZW50KTtcbiAgfVxuXG4gIHB1YmxpYyBDYW5Qb3AodHlwZTogUHVzaFBvcFR5cGUgfCBudWxsID0gbnVsbCkge1xuICAgIGlmICghdGhpcy5jYW5Qb3ApIHJldHVybiBmYWxzZTtcblxuICAgIGlmICh0eXBlID09IG51bGwpIHJldHVybiB0cnVlO1xuXG4gICAgcmV0dXJuIHRoaXMuY3VycmVudEVsZW1lbnQudHlwZSA9PSB0eXBlO1xuICB9XG5cbiAgcHVibGljIFBvcCh0eXBlOiBQdXNoUG9wVHlwZSB8IG51bGwgPSBudWxsKSB7XG4gICAgaWYgKHRoaXMuQ2FuUG9wKHR5cGUpKSB7XG4gICAgICB0aGlzLmNhbGxTdGFjay5wb3AoKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWlzbWF0Y2hlZCBwdXNoL3BvcCBpbiBDYWxsc3RhY2tcIik7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIEdldFRlbXBvcmFyeVZhcmlhYmxlV2l0aE5hbWUoXG4gICAgbmFtZTogc3RyaW5nIHwgbnVsbCxcbiAgICBjb250ZXh0SW5kZXg6IG51bWJlciA9IC0xXG4gICkge1xuICAgIC8vIGNvbnRleHRJbmRleCAwIG1lYW5zIGdsb2JhbCwgc28gaW5kZXggaXMgYWN0dWFsbHkgMS1iYXNlZFxuICAgIGlmIChjb250ZXh0SW5kZXggPT0gLTEpIGNvbnRleHRJbmRleCA9IHRoaXMuY3VycmVudEVsZW1lbnRJbmRleCArIDE7XG5cbiAgICBsZXQgY29udGV4dEVsZW1lbnQgPSB0aGlzLmNhbGxTdGFja1tjb250ZXh0SW5kZXggLSAxXTtcblxuICAgIGxldCB2YXJWYWx1ZSA9IHRyeUdldFZhbHVlRnJvbU1hcChcbiAgICAgIGNvbnRleHRFbGVtZW50LnRlbXBvcmFyeVZhcmlhYmxlcyxcbiAgICAgIG5hbWUsXG4gICAgICBudWxsXG4gICAgKTtcbiAgICBpZiAodmFyVmFsdWUuZXhpc3RzKSB7XG4gICAgICByZXR1cm4gdmFyVmFsdWUucmVzdWx0O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgU2V0VGVtcG9yYXJ5VmFyaWFibGUoXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIHZhbHVlOiBhbnksXG4gICAgZGVjbGFyZU5ldzogYm9vbGVhbixcbiAgICBjb250ZXh0SW5kZXg6IG51bWJlciA9IC0xXG4gICkge1xuICAgIGlmIChjb250ZXh0SW5kZXggPT0gLTEpIGNvbnRleHRJbmRleCA9IHRoaXMuY3VycmVudEVsZW1lbnRJbmRleCArIDE7XG5cbiAgICBsZXQgY29udGV4dEVsZW1lbnQgPSB0aGlzLmNhbGxTdGFja1tjb250ZXh0SW5kZXggLSAxXTtcblxuICAgIGlmICghZGVjbGFyZU5ldyAmJiAhY29udGV4dEVsZW1lbnQudGVtcG9yYXJ5VmFyaWFibGVzLmdldChuYW1lKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGZpbmQgdGVtcG9yYXJ5IHZhcmlhYmxlIHRvIHNldDogXCIgKyBuYW1lKTtcbiAgICB9XG5cbiAgICBsZXQgb2xkVmFsdWUgPSB0cnlHZXRWYWx1ZUZyb21NYXAoXG4gICAgICBjb250ZXh0RWxlbWVudC50ZW1wb3JhcnlWYXJpYWJsZXMsXG4gICAgICBuYW1lLFxuICAgICAgbnVsbFxuICAgICk7XG4gICAgaWYgKG9sZFZhbHVlLmV4aXN0cylcbiAgICAgIExpc3RWYWx1ZS5SZXRhaW5MaXN0T3JpZ2luc0ZvckFzc2lnbm1lbnQob2xkVmFsdWUucmVzdWx0LCB2YWx1ZSk7XG5cbiAgICBjb250ZXh0RWxlbWVudC50ZW1wb3JhcnlWYXJpYWJsZXMuc2V0KG5hbWUsIHZhbHVlKTtcbiAgfVxuXG4gIHB1YmxpYyBDb250ZXh0Rm9yVmFyaWFibGVOYW1lZChuYW1lOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5jdXJyZW50RWxlbWVudC50ZW1wb3JhcnlWYXJpYWJsZXMuZ2V0KG5hbWUpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jdXJyZW50RWxlbWVudEluZGV4ICsgMTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFRocmVhZFdpdGhJbmRleChpbmRleDogbnVtYmVyKSB7XG4gICAgbGV0IGZpbHRlcmVkID0gdGhpcy5fdGhyZWFkcy5maWx0ZXIoKHQpID0+IHtcbiAgICAgIGlmICh0LnRocmVhZEluZGV4ID09IGluZGV4KSByZXR1cm4gdDtcbiAgICB9KTtcblxuICAgIHJldHVybiBmaWx0ZXJlZC5sZW5ndGggPiAwID8gZmlsdGVyZWRbMF0gOiBudWxsO1xuICB9XG5cbiAgZ2V0IGNhbGxTdGFjaygpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50VGhyZWFkLmNhbGxzdGFjaztcbiAgfVxuXG4gIGdldCBjYWxsU3RhY2tUcmFjZSgpIHtcbiAgICBsZXQgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xuXG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLl90aHJlYWRzLmxlbmd0aDsgdCsrKSB7XG4gICAgICBsZXQgdGhyZWFkID0gdGhpcy5fdGhyZWFkc1t0XTtcbiAgICAgIGxldCBpc0N1cnJlbnQgPSB0ID09IHRoaXMuX3RocmVhZHMubGVuZ3RoIC0gMTtcbiAgICAgIHNiLkFwcGVuZEZvcm1hdChcbiAgICAgICAgXCI9PT0gVEhSRUFEIHswfS97MX0gezJ9PT09XFxuXCIsXG4gICAgICAgIHQgKyAxLFxuICAgICAgICB0aGlzLl90aHJlYWRzLmxlbmd0aCxcbiAgICAgICAgaXNDdXJyZW50ID8gXCIoY3VycmVudCkgXCIgOiBcIlwiXG4gICAgICApO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRocmVhZC5jYWxsc3RhY2subGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHRocmVhZC5jYWxsc3RhY2tbaV0udHlwZSA9PSBQdXNoUG9wVHlwZS5GdW5jdGlvbilcbiAgICAgICAgICBzYi5BcHBlbmQoXCIgIFtGVU5DVElPTl0gXCIpO1xuICAgICAgICBlbHNlIHNiLkFwcGVuZChcIiAgW1RVTk5FTF0gXCIpO1xuXG4gICAgICAgIGxldCBwb2ludGVyID0gdGhyZWFkLmNhbGxzdGFja1tpXS5jdXJyZW50UG9pbnRlcjtcbiAgICAgICAgaWYgKCFwb2ludGVyLmlzTnVsbCkge1xuICAgICAgICAgIHNiLkFwcGVuZChcIjxTT01FV0hFUkUgSU4gXCIpO1xuICAgICAgICAgIGlmIChwb2ludGVyLmNvbnRhaW5lciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcInBvaW50ZXIuY29udGFpbmVyXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzYi5BcHBlbmQocG9pbnRlci5jb250YWluZXIucGF0aC50b1N0cmluZygpKTtcbiAgICAgICAgICBzYi5BcHBlbmRMaW5lKFwiPlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzYi50b1N0cmluZygpO1xuICB9XG5cbiAgcHVibGljIF90aHJlYWRzITogQ2FsbFN0YWNrLlRocmVhZFtdOyAvLyBCYW5nZWQgYmVjYXVzZSBpdCdzIGluaXRpYWxpemVkIGluIFJlc2V0KCkuXG4gIHB1YmxpYyBfdGhyZWFkQ291bnRlcjogbnVtYmVyID0gMDtcbiAgcHVibGljIF9zdGFydE9mUm9vdDogUG9pbnRlciA9IFBvaW50ZXIuTnVsbDtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDYWxsU3RhY2sge1xuICBleHBvcnQgY2xhc3MgRWxlbWVudCB7XG4gICAgcHVibGljIGN1cnJlbnRQb2ludGVyOiBQb2ludGVyO1xuICAgIHB1YmxpYyBpbkV4cHJlc3Npb25FdmFsdWF0aW9uOiBib29sZWFuO1xuICAgIHB1YmxpYyB0ZW1wb3JhcnlWYXJpYWJsZXM6IE1hcDxzdHJpbmcsIElua09iamVjdD47XG4gICAgcHVibGljIHR5cGU6IFB1c2hQb3BUeXBlO1xuXG4gICAgcHVibGljIGV2YWx1YXRpb25TdGFja0hlaWdodFdoZW5QdXNoZWQ6IG51bWJlciA9IDA7XG4gICAgcHVibGljIGZ1bmN0aW9uU3RhcnRJbk91dHB1dFN0cmVhbTogbnVtYmVyID0gMDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgdHlwZTogUHVzaFBvcFR5cGUsXG4gICAgICBwb2ludGVyOiBQb2ludGVyLFxuICAgICAgaW5FeHByZXNzaW9uRXZhbHVhdGlvbjogYm9vbGVhbiA9IGZhbHNlXG4gICAgKSB7XG4gICAgICB0aGlzLmN1cnJlbnRQb2ludGVyID0gcG9pbnRlci5jb3B5KCk7XG4gICAgICB0aGlzLmluRXhwcmVzc2lvbkV2YWx1YXRpb24gPSBpbkV4cHJlc3Npb25FdmFsdWF0aW9uO1xuICAgICAgdGhpcy50ZW1wb3JhcnlWYXJpYWJsZXMgPSBuZXcgTWFwKCk7XG4gICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIH1cblxuICAgIHB1YmxpYyBDb3B5KCkge1xuICAgICAgbGV0IGNvcHkgPSBuZXcgRWxlbWVudChcbiAgICAgICAgdGhpcy50eXBlLFxuICAgICAgICB0aGlzLmN1cnJlbnRQb2ludGVyLFxuICAgICAgICB0aGlzLmluRXhwcmVzc2lvbkV2YWx1YXRpb25cbiAgICAgICk7XG4gICAgICBjb3B5LnRlbXBvcmFyeVZhcmlhYmxlcyA9IG5ldyBNYXAodGhpcy50ZW1wb3JhcnlWYXJpYWJsZXMpO1xuICAgICAgY29weS5ldmFsdWF0aW9uU3RhY2tIZWlnaHRXaGVuUHVzaGVkID1cbiAgICAgICAgdGhpcy5ldmFsdWF0aW9uU3RhY2tIZWlnaHRXaGVuUHVzaGVkO1xuICAgICAgY29weS5mdW5jdGlvblN0YXJ0SW5PdXRwdXRTdHJlYW0gPSB0aGlzLmZ1bmN0aW9uU3RhcnRJbk91dHB1dFN0cmVhbTtcbiAgICAgIHJldHVybiBjb3B5O1xuICAgIH1cbiAgfVxuXG4gIGV4cG9ydCBjbGFzcyBUaHJlYWQge1xuICAgIHB1YmxpYyBjYWxsc3RhY2s6IEVsZW1lbnRbXTtcbiAgICBwdWJsaWMgdGhyZWFkSW5kZXg6IG51bWJlciA9IDA7XG4gICAgcHVibGljIHByZXZpb3VzUG9pbnRlcjogUG9pbnRlciA9IFBvaW50ZXIuTnVsbDtcblxuICAgIGNvbnN0cnVjdG9yKCk7XG4gICAgY29uc3RydWN0b3IoalRocmVhZE9iajogYW55LCBzdG9yeUNvbnRleHQ6IFN0b3J5KTtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgIHRoaXMuY2FsbHN0YWNrID0gW107XG5cbiAgICAgIGlmIChhcmd1bWVudHNbMF0gJiYgYXJndW1lbnRzWzFdKSB7XG4gICAgICAgIGxldCBqVGhyZWFkT2JqID0gYXJndW1lbnRzWzBdO1xuICAgICAgICBsZXQgc3RvcnlDb250ZXh0ID0gYXJndW1lbnRzWzFdO1xuXG4gICAgICAgIC8vIFRPRE86IChpbnQpIGpUaHJlYWRPYmpbJ3RocmVhZEluZGV4J10gY2FuIHJhaXNlO1xuICAgICAgICB0aGlzLnRocmVhZEluZGV4ID0gcGFyc2VJbnQoalRocmVhZE9ialtcInRocmVhZEluZGV4XCJdKTtcblxuICAgICAgICBsZXQgalRocmVhZENhbGxzdGFjayA9IGpUaHJlYWRPYmpbXCJjYWxsc3RhY2tcIl07XG5cbiAgICAgICAgZm9yIChsZXQgakVsVG9rIG9mIGpUaHJlYWRDYWxsc3RhY2spIHtcbiAgICAgICAgICBsZXQgakVsZW1lbnRPYmogPSBqRWxUb2s7XG5cbiAgICAgICAgICAvLyBUT0RPOiAoaW50KSBqRWxlbWVudE9ialsndHlwZSddIGNhbiByYWlzZTtcbiAgICAgICAgICBsZXQgcHVzaFBvcFR5cGU6IFB1c2hQb3BUeXBlID0gcGFyc2VJbnQoakVsZW1lbnRPYmpbXCJ0eXBlXCJdKTtcblxuICAgICAgICAgIGxldCBwb2ludGVyID0gUG9pbnRlci5OdWxsO1xuXG4gICAgICAgICAgbGV0IGN1cnJlbnRDb250YWluZXJQYXRoU3RyOiBzdHJpbmc7XG4gICAgICAgICAgLy8gVE9ETzogakVsZW1lbnRPYmouVHJ5R2V0VmFsdWUgKFwiY1BhdGhcIiwgb3V0IGN1cnJlbnRDb250YWluZXJQYXRoU3RyVG9rZW4pO1xuICAgICAgICAgIGxldCBjdXJyZW50Q29udGFpbmVyUGF0aFN0clRva2VuID0gakVsZW1lbnRPYmpbXCJjUGF0aFwiXTtcbiAgICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnRDb250YWluZXJQYXRoU3RyVG9rZW4gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIGN1cnJlbnRDb250YWluZXJQYXRoU3RyID0gY3VycmVudENvbnRhaW5lclBhdGhTdHJUb2tlbi50b1N0cmluZygpO1xuXG4gICAgICAgICAgICBsZXQgdGhyZWFkUG9pbnRlclJlc3VsdCA9IHN0b3J5Q29udGV4dC5Db250ZW50QXRQYXRoKFxuICAgICAgICAgICAgICBuZXcgUGF0aChjdXJyZW50Q29udGFpbmVyUGF0aFN0cilcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBwb2ludGVyLmNvbnRhaW5lciA9IHRocmVhZFBvaW50ZXJSZXN1bHQuY29udGFpbmVyO1xuICAgICAgICAgICAgcG9pbnRlci5pbmRleCA9IHBhcnNlSW50KGpFbGVtZW50T2JqW1wiaWR4XCJdKTtcblxuICAgICAgICAgICAgaWYgKHRocmVhZFBvaW50ZXJSZXN1bHQub2JqID09IG51bGwpXG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBcIldoZW4gbG9hZGluZyBzdGF0ZSwgaW50ZXJuYWwgc3RvcnkgbG9jYXRpb24gY291bGRuJ3QgYmUgZm91bmQ6IFwiICtcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRDb250YWluZXJQYXRoU3RyICtcbiAgICAgICAgICAgICAgICAgIFwiLiBIYXMgdGhlIHN0b3J5IGNoYW5nZWQgc2luY2UgdGhpcyBzYXZlIGRhdGEgd2FzIGNyZWF0ZWQ/XCJcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKHRocmVhZFBvaW50ZXJSZXN1bHQuYXBwcm94aW1hdGUpIHtcbiAgICAgICAgICAgICAgaWYgKHBvaW50ZXIuY29udGFpbmVyICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgc3RvcnlDb250ZXh0Lldhcm5pbmcoXG4gICAgICAgICAgICAgICAgICBcIldoZW4gbG9hZGluZyBzdGF0ZSwgZXhhY3QgaW50ZXJuYWwgc3RvcnkgbG9jYXRpb24gY291bGRuJ3QgYmUgZm91bmQ6ICdcIiArXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDb250YWluZXJQYXRoU3RyICtcbiAgICAgICAgICAgICAgICAgICAgXCInLCBzbyBpdCB3YXMgYXBwcm94aW1hdGVkIHRvICdcIiArXG4gICAgICAgICAgICAgICAgICAgIHBvaW50ZXIuY29udGFpbmVyLnBhdGgudG9TdHJpbmcoKSArXG4gICAgICAgICAgICAgICAgICAgIFwiJyB0byByZWNvdmVyLiBIYXMgdGhlIHN0b3J5IGNoYW5nZWQgc2luY2UgdGhpcyBzYXZlIGRhdGEgd2FzIGNyZWF0ZWQ/XCJcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0b3J5Q29udGV4dC5XYXJuaW5nKFxuICAgICAgICAgICAgICAgICAgXCJXaGVuIGxvYWRpbmcgc3RhdGUsIGV4YWN0IGludGVybmFsIHN0b3J5IGxvY2F0aW9uIGNvdWxkbid0IGJlIGZvdW5kOiAnXCIgK1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50Q29udGFpbmVyUGF0aFN0ciArXG4gICAgICAgICAgICAgICAgICAgIFwiJyBhbmQgaXQgbWF5IG5vdCBiZSByZWNvdmVyYWJsZS4gSGFzIHRoZSBzdG9yeSBjaGFuZ2VkIHNpbmNlIHRoaXMgc2F2ZSBkYXRhIHdhcyBjcmVhdGVkP1wiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGxldCBpbkV4cHJlc3Npb25FdmFsdWF0aW9uID0gISFqRWxlbWVudE9ialtcImV4cFwiXTtcblxuICAgICAgICAgIGxldCBlbCA9IG5ldyBFbGVtZW50KHB1c2hQb3BUeXBlLCBwb2ludGVyLCBpbkV4cHJlc3Npb25FdmFsdWF0aW9uKTtcblxuICAgICAgICAgIGxldCB0ZW1wcyA9IGpFbGVtZW50T2JqW1widGVtcFwiXTtcbiAgICAgICAgICBpZiAodHlwZW9mIHRlbXBzICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICBlbC50ZW1wb3JhcnlWYXJpYWJsZXMgPVxuICAgICAgICAgICAgICBKc29uU2VyaWFsaXNhdGlvbi5KT2JqZWN0VG9EaWN0aW9uYXJ5UnVudGltZU9ianModGVtcHMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbC50ZW1wb3JhcnlWYXJpYWJsZXMuY2xlYXIoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmNhbGxzdGFjay5wdXNoKGVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBwcmV2Q29udGVudE9ialBhdGggPSBqVGhyZWFkT2JqW1wicHJldmlvdXNDb250ZW50T2JqZWN0XCJdO1xuICAgICAgICBpZiAodHlwZW9mIHByZXZDb250ZW50T2JqUGF0aCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGxldCBwcmV2UGF0aCA9IG5ldyBQYXRoKHByZXZDb250ZW50T2JqUGF0aC50b1N0cmluZygpKTtcbiAgICAgICAgICB0aGlzLnByZXZpb3VzUG9pbnRlciA9IHN0b3J5Q29udGV4dC5Qb2ludGVyQXRQYXRoKHByZXZQYXRoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBDb3B5KCkge1xuICAgICAgbGV0IGNvcHkgPSBuZXcgVGhyZWFkKCk7XG4gICAgICBjb3B5LnRocmVhZEluZGV4ID0gdGhpcy50aHJlYWRJbmRleDtcbiAgICAgIGZvciAobGV0IGUgb2YgdGhpcy5jYWxsc3RhY2spIHtcbiAgICAgICAgY29weS5jYWxsc3RhY2sucHVzaChlLkNvcHkoKSk7XG4gICAgICB9XG4gICAgICBjb3B5LnByZXZpb3VzUG9pbnRlciA9IHRoaXMucHJldmlvdXNQb2ludGVyLmNvcHkoKTtcbiAgICAgIHJldHVybiBjb3B5O1xuICAgIH1cblxuICAgIHB1YmxpYyBXcml0ZUpzb24od3JpdGVyOiBTaW1wbGVKc29uLldyaXRlcikge1xuICAgICAgd3JpdGVyLldyaXRlT2JqZWN0U3RhcnQoKTtcblxuICAgICAgd3JpdGVyLldyaXRlUHJvcGVydHlTdGFydChcImNhbGxzdGFja1wiKTtcbiAgICAgIHdyaXRlci5Xcml0ZUFycmF5U3RhcnQoKTtcbiAgICAgIGZvciAobGV0IGVsIG9mIHRoaXMuY2FsbHN0YWNrKSB7XG4gICAgICAgIHdyaXRlci5Xcml0ZU9iamVjdFN0YXJ0KCk7XG4gICAgICAgIGlmICghZWwuY3VycmVudFBvaW50ZXIuaXNOdWxsKSB7XG4gICAgICAgICAgaWYgKGVsLmN1cnJlbnRQb2ludGVyLmNvbnRhaW5lciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcImVsLmN1cnJlbnRQb2ludGVyLmNvbnRhaW5lclwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgd3JpdGVyLldyaXRlUHJvcGVydHkoXG4gICAgICAgICAgICBcImNQYXRoXCIsXG4gICAgICAgICAgICBlbC5jdXJyZW50UG9pbnRlci5jb250YWluZXIucGF0aC5jb21wb25lbnRzU3RyaW5nXG4gICAgICAgICAgKTtcbiAgICAgICAgICB3cml0ZXIuV3JpdGVJbnRQcm9wZXJ0eShcImlkeFwiLCBlbC5jdXJyZW50UG9pbnRlci5pbmRleCk7XG4gICAgICAgIH1cblxuICAgICAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eShcImV4cFwiLCBlbC5pbkV4cHJlc3Npb25FdmFsdWF0aW9uKTtcbiAgICAgICAgd3JpdGVyLldyaXRlSW50UHJvcGVydHkoXCJ0eXBlXCIsIGVsLnR5cGUpO1xuXG4gICAgICAgIGlmIChlbC50ZW1wb3JhcnlWYXJpYWJsZXMuc2l6ZSA+IDApIHtcbiAgICAgICAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eVN0YXJ0KFwidGVtcFwiKTtcbiAgICAgICAgICBKc29uU2VyaWFsaXNhdGlvbi5Xcml0ZURpY3Rpb25hcnlSdW50aW1lT2JqcyhcbiAgICAgICAgICAgIHdyaXRlcixcbiAgICAgICAgICAgIGVsLnRlbXBvcmFyeVZhcmlhYmxlc1xuICAgICAgICAgICk7XG4gICAgICAgICAgd3JpdGVyLldyaXRlUHJvcGVydHlFbmQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdyaXRlci5Xcml0ZU9iamVjdEVuZCgpO1xuICAgICAgfVxuICAgICAgd3JpdGVyLldyaXRlQXJyYXlFbmQoKTtcbiAgICAgIHdyaXRlci5Xcml0ZVByb3BlcnR5RW5kKCk7XG5cbiAgICAgIHdyaXRlci5Xcml0ZUludFByb3BlcnR5KFwidGhyZWFkSW5kZXhcIiwgdGhpcy50aHJlYWRJbmRleCk7XG5cbiAgICAgIGlmICghdGhpcy5wcmV2aW91c1BvaW50ZXIuaXNOdWxsKSB7XG4gICAgICAgIGxldCByZXNvbHZlZFBvaW50ZXIgPSB0aGlzLnByZXZpb3VzUG9pbnRlci5SZXNvbHZlKCk7XG4gICAgICAgIGlmIChyZXNvbHZlZFBvaW50ZXIgPT09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwidGhpcy5wcmV2aW91c1BvaW50ZXIuUmVzb2x2ZSgpXCIpO1xuICAgICAgICB9XG4gICAgICAgIHdyaXRlci5Xcml0ZVByb3BlcnR5KFxuICAgICAgICAgIFwicHJldmlvdXNDb250ZW50T2JqZWN0XCIsXG4gICAgICAgICAgcmVzb2x2ZWRQb2ludGVyLnBhdGgudG9TdHJpbmcoKVxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICB3cml0ZXIuV3JpdGVPYmplY3RFbmQoKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7XG4gIEFic3RyYWN0VmFsdWUsXG4gIFZhbHVlLFxuICBWYXJpYWJsZVBvaW50ZXJWYWx1ZSxcbiAgTGlzdFZhbHVlLFxuICBJbnRWYWx1ZSxcbiAgRmxvYXRWYWx1ZSxcbiAgQm9vbFZhbHVlLFxufSBmcm9tIFwiLi9WYWx1ZVwiO1xuaW1wb3J0IHsgVmFyaWFibGVBc3NpZ25tZW50IH0gZnJvbSBcIi4vVmFyaWFibGVBc3NpZ25tZW50XCI7XG5pbXBvcnQgeyBJbmtPYmplY3QgfSBmcm9tIFwiLi9PYmplY3RcIjtcbmltcG9ydCB7IExpc3REZWZpbml0aW9uc09yaWdpbiB9IGZyb20gXCIuL0xpc3REZWZpbml0aW9uc09yaWdpblwiO1xuaW1wb3J0IHsgU3RvcnlFeGNlcHRpb24gfSBmcm9tIFwiLi9TdG9yeUV4Y2VwdGlvblwiO1xuaW1wb3J0IHsgSnNvblNlcmlhbGlzYXRpb24gfSBmcm9tIFwiLi9Kc29uU2VyaWFsaXNhdGlvblwiO1xuaW1wb3J0IHsgYXNPclRocm93cywgYXNPck51bGwsIGlzRXF1YXRhYmxlIH0gZnJvbSBcIi4vVHlwZUFzc2VydGlvblwiO1xuaW1wb3J0IHsgdHJ5R2V0VmFsdWVGcm9tTWFwIH0gZnJvbSBcIi4vVHJ5R2V0UmVzdWx0XCI7XG5pbXBvcnQgeyB0aHJvd051bGxFeGNlcHRpb24gfSBmcm9tIFwiLi9OdWxsRXhjZXB0aW9uXCI7XG5pbXBvcnQgeyBDYWxsU3RhY2sgfSBmcm9tIFwiLi9DYWxsU3RhY2tcIjtcbmltcG9ydCB7IFN0YXRlUGF0Y2ggfSBmcm9tIFwiLi9TdGF0ZVBhdGNoXCI7XG5pbXBvcnQgeyBTaW1wbGVKc29uIH0gZnJvbSBcIi4vU2ltcGxlSnNvblwiO1xuaW1wb3J0IHsgSW5rTGlzdCB9IGZyb20gXCIuL1N0b3J5XCI7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSBcIi4vUGF0aFwiO1xuXG4vLyBGYWtlIGNsYXNzIHdyYXBwZXIgYXJvdW5kIFZhcmlhYmxlU3RhdGUgdG8gaGF2ZSBjb3JyZWN0IHR5cGluZ1xuLy8gd2hlbiB1c2luZyB0aGUgUHJveHkgc3ludGF4IGluIHR5cGVzY3JpcHRcbmZ1bmN0aW9uIFZhcmlhYmxlc1N0YXRlQWNjZXNzb3I8VD4oKTogbmV3ICgpID0+IFBpY2s8VCwga2V5b2YgVD4ge1xuICByZXR1cm4gY2xhc3Mge30gYXMgYW55O1xufVxuXG50eXBlIFZhcmlhYmxlU3RhdGVWYWx1ZSA9IGJvb2xlYW4gfCBzdHJpbmcgfCBudW1iZXIgfCBJbmtMaXN0IHwgUGF0aCB8IG51bGw7XG5cbmV4cG9ydCBjbGFzcyBWYXJpYWJsZXNTdGF0ZSBleHRlbmRzIFZhcmlhYmxlc1N0YXRlQWNjZXNzb3I8XG4gIFJlY29yZDxzdHJpbmcsIGFueT5cbj4oKSB7XG4gIC8vIFRoZSB3YXkgdmFyaWFibGVDaGFuZ2VkRXZlbnQgaXMgYSBiaXQgZGlmZmVyZW50IHRoYW4gdGhlIHJlZmVyZW5jZSBpbXBsZW1lbnRhdGlvbi5cbiAgLy8gT3JpZ2luYWxseSBpdCB1c2VzIHRoZSBDIyArPSBvcGVyYXRvciB0byBhZGQgZGVsZWdhdGVzLCBidXQgaW4ganMgd2UgbmVlZCB0byBtYWludGFpblxuICAvLyBhbiBhY3R1YWwgY29sbGVjdGlvbiBvZiBkZWxlZ2F0ZXMgKGllLiBjYWxsYmFja3MpIHRvIHJlZ2lzdGVyIGEgbmV3IG9uZSwgdGhlcmUgaXMgYVxuICAvLyBzcGVjaWFsIE9ic2VydmVWYXJpYWJsZUNoYW5nZSBtZXRob2QgYmVsb3cuXG4gIHB1YmxpYyB2YXJpYWJsZUNoYW5nZWRFdmVudENhbGxiYWNrczogQXJyYXk8XG4gICAgKHZhcmlhYmxlTmFtZTogc3RyaW5nLCBuZXdWYWx1ZTogSW5rT2JqZWN0KSA9PiB2b2lkXG4gID4gPSBbXTtcbiAgcHVibGljIHZhcmlhYmxlQ2hhbmdlZEV2ZW50KHZhcmlhYmxlTmFtZTogc3RyaW5nLCBuZXdWYWx1ZTogSW5rT2JqZWN0KTogdm9pZCB7XG4gICAgZm9yIChsZXQgY2FsbGJhY2sgb2YgdGhpcy52YXJpYWJsZUNoYW5nZWRFdmVudENhbGxiYWNrcykge1xuICAgICAgY2FsbGJhY2sodmFyaWFibGVOYW1lLCBuZXdWYWx1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHBhdGNoOiBTdGF0ZVBhdGNoIHwgbnVsbCA9IG51bGw7XG5cbiAgcHVibGljIFN0YXJ0VmFyaWFibGVPYnNlcnZhdGlvbigpIHtcbiAgICB0aGlzLl9iYXRjaE9ic2VydmluZ1ZhcmlhYmxlQ2hhbmdlcyA9IHRydWU7XG4gICAgdGhpcy5fY2hhbmdlZFZhcmlhYmxlc0ZvckJhdGNoT2JzID0gbmV3IFNldCgpO1xuICB9XG5cbiAgcHVibGljIENvbXBsZXRlVmFyaWFibGVPYnNlcnZhdGlvbigpOiBNYXA8c3RyaW5nLCBhbnk+IHtcbiAgICB0aGlzLl9iYXRjaE9ic2VydmluZ1ZhcmlhYmxlQ2hhbmdlcyA9IGZhbHNlO1xuICAgIGxldCBjaGFuZ2VkVmFycyA9IG5ldyBNYXA8c3RyaW5nLCBhbnk+KCk7XG4gICAgaWYgKHRoaXMuX2NoYW5nZWRWYXJpYWJsZXNGb3JCYXRjaE9icyAhPSBudWxsKSB7XG4gICAgICBmb3IgKGxldCB2YXJpYWJsZU5hbWUgb2YgdGhpcy5fY2hhbmdlZFZhcmlhYmxlc0ZvckJhdGNoT2JzKSB7XG4gICAgICAgIGxldCBjdXJyZW50VmFsdWUgPSB0aGlzLl9nbG9iYWxWYXJpYWJsZXMuZ2V0KHZhcmlhYmxlTmFtZSkgYXMgSW5rT2JqZWN0O1xuICAgICAgICB0aGlzLnZhcmlhYmxlQ2hhbmdlZEV2ZW50KHZhcmlhYmxlTmFtZSwgY3VycmVudFZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gUGF0Y2ggbWF5IHN0aWxsIGJlIGFjdGl2ZSAtIGUuZy4gaWYgd2Ugd2VyZSBpbiB0aGUgbWlkZGxlIG9mIGEgYmFja2dyb3VuZCBzYXZlXG4gICAgaWYgKHRoaXMucGF0Y2ggIT0gbnVsbCkge1xuICAgICAgZm9yIChsZXQgdmFyaWFibGVOYW1lIG9mIHRoaXMucGF0Y2guY2hhbmdlZFZhcmlhYmxlcykge1xuICAgICAgICBsZXQgcGF0Y2hlZFZhbCA9IHRoaXMucGF0Y2guVHJ5R2V0R2xvYmFsKHZhcmlhYmxlTmFtZSwgbnVsbCk7XG4gICAgICAgIGlmIChwYXRjaGVkVmFsLmV4aXN0cykgY2hhbmdlZFZhcnMuc2V0KHZhcmlhYmxlTmFtZSwgcGF0Y2hlZFZhbCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX2NoYW5nZWRWYXJpYWJsZXNGb3JCYXRjaE9icyA9IG51bGw7XG4gICAgcmV0dXJuIGNoYW5nZWRWYXJzO1xuICB9XG5cbiAgcHVibGljIE5vdGlmeU9ic2VydmVycyhjaGFuZ2VkVmFyczogTWFwPHN0cmluZywgYW55Pikge1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIGNoYW5nZWRWYXJzKSB7XG4gICAgICB0aGlzLnZhcmlhYmxlQ2hhbmdlZEV2ZW50KGtleSwgdmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIGdldCBjYWxsU3RhY2soKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhbGxTdGFjaztcbiAgfVxuICBzZXQgY2FsbFN0YWNrKGNhbGxTdGFjaykge1xuICAgIHRoaXMuX2NhbGxTdGFjayA9IGNhbGxTdGFjaztcbiAgfVxuXG4gIC8vIHRoZSBvcmlnaW5hbCBjb2RlIHVzZXMgYSBtYWdpYyBnZXR0ZXIgYW5kIHNldHRlciBmb3IgZ2xvYmFsIHZhcmlhYmxlcyxcbiAgLy8gYWxsb3dpbmcgdGhpbmdzIGxpa2UgdmFyaWFibGVTdGF0ZVsndmFybmFtZV0uIFRoaXMgaXMgbm90IHF1aXRlIHBvc3NpYmxlXG4gIC8vIGluIGpzIHdpdGhvdXQgYSBQcm94eSwgc28gaXQgaXMgcmVwbGFjZWQgd2l0aCB0aGlzICQgZnVuY3Rpb24uXG4gIHB1YmxpYyAkKHZhcmlhYmxlTmFtZTogc3RyaW5nKTogVmFyaWFibGVTdGF0ZVZhbHVlO1xuICBwdWJsaWMgJCh2YXJpYWJsZU5hbWU6IHN0cmluZywgdmFsdWU6IFZhcmlhYmxlU3RhdGVWYWx1ZSk6IHZvaWQ7XG4gIHB1YmxpYyAkKHZhcmlhYmxlTmFtZTogc3RyaW5nLCB2YWx1ZT86IGFueSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGxldCB2YXJDb250ZW50cyA9IG51bGw7XG5cbiAgICAgIGlmICh0aGlzLnBhdGNoICE9PSBudWxsKSB7XG4gICAgICAgIHZhckNvbnRlbnRzID0gdGhpcy5wYXRjaC5UcnlHZXRHbG9iYWwodmFyaWFibGVOYW1lLCBudWxsKTtcbiAgICAgICAgaWYgKHZhckNvbnRlbnRzLmV4aXN0cylcbiAgICAgICAgICByZXR1cm4gKHZhckNvbnRlbnRzLnJlc3VsdCBhcyBBYnN0cmFjdFZhbHVlKS52YWx1ZU9iamVjdDtcbiAgICAgIH1cblxuICAgICAgdmFyQ29udGVudHMgPSB0aGlzLl9nbG9iYWxWYXJpYWJsZXMuZ2V0KHZhcmlhYmxlTmFtZSk7XG5cbiAgICAgIGlmICh0eXBlb2YgdmFyQ29udGVudHMgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgdmFyQ29udGVudHMgPSB0aGlzLl9kZWZhdWx0R2xvYmFsVmFyaWFibGVzLmdldCh2YXJpYWJsZU5hbWUpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHZhckNvbnRlbnRzICE9PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICByZXR1cm4gKHZhckNvbnRlbnRzIGFzIEFic3RyYWN0VmFsdWUpLnZhbHVlT2JqZWN0O1xuICAgICAgZWxzZSByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLl9kZWZhdWx0R2xvYmFsVmFyaWFibGVzLmdldCh2YXJpYWJsZU5hbWUpID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICB0aHJvdyBuZXcgU3RvcnlFeGNlcHRpb24oXG4gICAgICAgICAgXCJDYW5ub3QgYXNzaWduIHRvIGEgdmFyaWFibGUgKFwiICtcbiAgICAgICAgICAgIHZhcmlhYmxlTmFtZSArXG4gICAgICAgICAgICBcIikgdGhhdCBoYXNuJ3QgYmVlbiBkZWNsYXJlZCBpbiB0aGUgc3RvcnlcIlxuICAgICAgICApO1xuXG4gICAgICBsZXQgdmFsID0gVmFsdWUuQ3JlYXRlKHZhbHVlKTtcbiAgICAgIGlmICh2YWwgPT0gbnVsbCkge1xuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBwYXNzIG51bGwgdG8gVmFyaWFibGVTdGF0ZVwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBcIkludmFsaWQgdmFsdWUgcGFzc2VkIHRvIFZhcmlhYmxlU3RhdGU6IFwiICsgdmFsdWUudG9TdHJpbmcoKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5TZXRHbG9iYWwodmFyaWFibGVOYW1lLCB2YWwpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGNhbGxTdGFjazogQ2FsbFN0YWNrLFxuICAgIGxpc3REZWZzT3JpZ2luOiBMaXN0RGVmaW5pdGlvbnNPcmlnaW4gfCBudWxsXG4gICkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fZ2xvYmFsVmFyaWFibGVzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuX2NhbGxTdGFjayA9IGNhbGxTdGFjaztcbiAgICB0aGlzLl9saXN0RGVmc09yaWdpbiA9IGxpc3REZWZzT3JpZ2luO1xuXG4gICAgLy8gaWYgZXM2IHByb3hpZXMgYXJlIGF2YWlsYWJsZSwgdXNlIHRoZW0uXG4gICAgdHJ5IHtcbiAgICAgIC8vIHRoZSBwcm94eSBpcyB1c2VkIHRvIGFsbG93IGRpcmVjdCBtYW5pcHVsYXRpb24gb2YgZ2xvYmFsIHZhcmlhYmxlcy5cbiAgICAgIC8vIEl0IGZpcnN0IHRyaWVzIHRvIGFjY2VzcyB0aGUgb2JqZWN0cyBvd24gcHJvcGVydHksIGFuZCBpZiBub25lIGlzXG4gICAgICAvLyBmb3VuZCBpdCBkZWxlZ2F0ZXMgdGhlIGNhbGwgdG8gdGhlICQgbWV0aG9kLCBkZWZpbmVkIGJlbG93XG4gICAgICBsZXQgcCA9IG5ldyBQcm94eSh0aGlzLCB7XG4gICAgICAgIGdldCh0YXJnZXQ6IGFueSwgbmFtZSkge1xuICAgICAgICAgIHJldHVybiBuYW1lIGluIHRhcmdldCA/IHRhcmdldFtuYW1lXSA6IHRhcmdldC4kKG5hbWUpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQodGFyZ2V0OiBhbnksIG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgaWYgKG5hbWUgaW4gdGFyZ2V0KSB0YXJnZXRbbmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgICBlbHNlIHRhcmdldC4kKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gcmV0dXJuaW5nIGEgZmFsc3kgdmFsdWUgbWFrZSB0aGUgdHJhcCBmYWlsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHA7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gdGhlIHByb3h5IG9iamVjdCBpcyBub3QgYXZhaWxhYmxlIGluIHRoaXMgY29udGV4dC4gd2Ugc2hvdWxkIHdhcm4gdGhlXG4gICAgICAvLyBkZXYgYnV0IHdyaXRpbmcgdG8gdGhlIGNvbnNvbGUgZmVlbHMgYSBiaXQgaW50cnVzaXZlLlxuICAgICAgLy8gY29uc29sZS5sb2coXCJFUzYgUHJveHkgbm90IGF2YWlsYWJsZSAtIGRpcmVjdCBtYW5pcHVsYXRpb24gb2YgZ2xvYmFsIHZhcmlhYmxlcyBjYW4ndCB3b3JrLCB1c2UgJCgpIGluc3RlYWQuXCIpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBBcHBseVBhdGNoKCkge1xuICAgIGlmICh0aGlzLnBhdGNoID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwidGhpcy5wYXRjaFwiKTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBbbmFtZWRWYXJLZXksIG5hbWVkVmFyVmFsdWVdIG9mIHRoaXMucGF0Y2guZ2xvYmFscykge1xuICAgICAgdGhpcy5fZ2xvYmFsVmFyaWFibGVzLnNldChuYW1lZFZhcktleSwgbmFtZWRWYXJWYWx1ZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2NoYW5nZWRWYXJpYWJsZXNGb3JCYXRjaE9icyAhPT0gbnVsbCkge1xuICAgICAgZm9yIChsZXQgbmFtZSBvZiB0aGlzLnBhdGNoLmNoYW5nZWRWYXJpYWJsZXMpIHtcbiAgICAgICAgdGhpcy5fY2hhbmdlZFZhcmlhYmxlc0ZvckJhdGNoT2JzLmFkZChuYW1lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnBhdGNoID0gbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBTZXRKc29uVG9rZW4oalRva2VuOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSB7XG4gICAgdGhpcy5fZ2xvYmFsVmFyaWFibGVzLmNsZWFyKCk7XG5cbiAgICBmb3IgKGxldCBbdmFyVmFsS2V5LCB2YXJWYWxWYWx1ZV0gb2YgdGhpcy5fZGVmYXVsdEdsb2JhbFZhcmlhYmxlcykge1xuICAgICAgbGV0IGxvYWRlZFRva2VuID0galRva2VuW3ZhclZhbEtleV07XG4gICAgICBpZiAodHlwZW9mIGxvYWRlZFRva2VuICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGxldCB0b2tlbklua09iamVjdCA9XG4gICAgICAgICAgSnNvblNlcmlhbGlzYXRpb24uSlRva2VuVG9SdW50aW1lT2JqZWN0KGxvYWRlZFRva2VuKTtcbiAgICAgICAgaWYgKHRva2VuSW5rT2JqZWN0ID09PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcInRva2VuSW5rT2JqZWN0XCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2dsb2JhbFZhcmlhYmxlcy5zZXQodmFyVmFsS2V5LCB0b2tlbklua09iamVjdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9nbG9iYWxWYXJpYWJsZXMuc2V0KHZhclZhbEtleSwgdmFyVmFsVmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZG9udFNhdmVEZWZhdWx0VmFsdWVzOiBib29sZWFuID0gdHJ1ZTtcblxuICBwdWJsaWMgV3JpdGVKc29uKHdyaXRlcjogU2ltcGxlSnNvbi5Xcml0ZXIpIHtcbiAgICB3cml0ZXIuV3JpdGVPYmplY3RTdGFydCgpO1xuICAgIGZvciAobGV0IFtrZXlWYWxLZXksIGtleVZhbFZhbHVlXSBvZiB0aGlzLl9nbG9iYWxWYXJpYWJsZXMpIHtcbiAgICAgIGxldCBuYW1lID0ga2V5VmFsS2V5O1xuICAgICAgbGV0IHZhbCA9IGtleVZhbFZhbHVlO1xuXG4gICAgICBpZiAoVmFyaWFibGVzU3RhdGUuZG9udFNhdmVEZWZhdWx0VmFsdWVzKSB7XG4gICAgICAgIGlmICh0aGlzLl9kZWZhdWx0R2xvYmFsVmFyaWFibGVzLmhhcyhuYW1lKSkge1xuICAgICAgICAgIGxldCBkZWZhdWx0VmFsID0gdGhpcy5fZGVmYXVsdEdsb2JhbFZhcmlhYmxlcy5nZXQobmFtZSkhO1xuICAgICAgICAgIGlmICh0aGlzLlJ1bnRpbWVPYmplY3RzRXF1YWwodmFsLCBkZWZhdWx0VmFsKSkgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgd3JpdGVyLldyaXRlUHJvcGVydHlTdGFydChuYW1lKTtcbiAgICAgIEpzb25TZXJpYWxpc2F0aW9uLldyaXRlUnVudGltZU9iamVjdCh3cml0ZXIsIHZhbCk7XG4gICAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eUVuZCgpO1xuICAgIH1cbiAgICB3cml0ZXIuV3JpdGVPYmplY3RFbmQoKTtcbiAgfVxuXG4gIHB1YmxpYyBSdW50aW1lT2JqZWN0c0VxdWFsKFxuICAgIG9iajE6IElua09iamVjdCB8IG51bGwsXG4gICAgb2JqMjogSW5rT2JqZWN0IHwgbnVsbFxuICApOiBib29sZWFuIHtcbiAgICBpZiAob2JqMSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcIm9iajFcIik7XG4gICAgfVxuICAgIGlmIChvYmoyID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwib2JqMlwiKTtcbiAgICB9XG5cbiAgICBpZiAob2JqMS5jb25zdHJ1Y3RvciAhPT0gb2JqMi5jb25zdHJ1Y3RvcikgcmV0dXJuIGZhbHNlO1xuXG4gICAgbGV0IGJvb2xWYWwgPSBhc09yTnVsbChvYmoxLCBCb29sVmFsdWUpO1xuICAgIGlmIChib29sVmFsICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gYm9vbFZhbC52YWx1ZSA9PT0gYXNPclRocm93cyhvYmoyLCBCb29sVmFsdWUpLnZhbHVlO1xuICAgIH1cblxuICAgIGxldCBpbnRWYWwgPSBhc09yTnVsbChvYmoxLCBJbnRWYWx1ZSk7XG4gICAgaWYgKGludFZhbCAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGludFZhbC52YWx1ZSA9PT0gYXNPclRocm93cyhvYmoyLCBJbnRWYWx1ZSkudmFsdWU7XG4gICAgfVxuXG4gICAgbGV0IGZsb2F0VmFsID0gYXNPck51bGwob2JqMSwgRmxvYXRWYWx1ZSk7XG4gICAgaWYgKGZsb2F0VmFsICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gZmxvYXRWYWwudmFsdWUgPT09IGFzT3JUaHJvd3Mob2JqMiwgRmxvYXRWYWx1ZSkudmFsdWU7XG4gICAgfVxuXG4gICAgbGV0IHZhbDEgPSBhc09yTnVsbChvYmoxLCBWYWx1ZSk7XG4gICAgbGV0IHZhbDIgPSBhc09yTnVsbChvYmoyLCBWYWx1ZSk7XG4gICAgaWYgKHZhbDEgIT09IG51bGwgJiYgdmFsMiAhPT0gbnVsbCkge1xuICAgICAgaWYgKGlzRXF1YXRhYmxlKHZhbDEudmFsdWVPYmplY3QpICYmIGlzRXF1YXRhYmxlKHZhbDIudmFsdWVPYmplY3QpKSB7XG4gICAgICAgIHJldHVybiB2YWwxLnZhbHVlT2JqZWN0LkVxdWFscyh2YWwyLnZhbHVlT2JqZWN0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB2YWwxLnZhbHVlT2JqZWN0ID09PSB2YWwyLnZhbHVlT2JqZWN0O1xuICAgICAgfVxuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiRmFzdFJvdWdoRGVmaW5pdGVseUVxdWFsczogVW5zdXBwb3J0ZWQgcnVudGltZSBvYmplY3QgdHlwZTogXCIgK1xuICAgICAgICBvYmoxLmNvbnN0cnVjdG9yLm5hbWVcbiAgICApO1xuICB9XG5cbiAgcHVibGljIEdldFZhcmlhYmxlV2l0aE5hbWUoXG4gICAgbmFtZTogc3RyaW5nIHwgbnVsbCxcbiAgICBjb250ZXh0SW5kZXg6IG51bWJlciA9IC0xXG4gICk6IElua09iamVjdCB8IG51bGwge1xuICAgIGxldCB2YXJWYWx1ZSA9IHRoaXMuR2V0UmF3VmFyaWFibGVXaXRoTmFtZShuYW1lLCBjb250ZXh0SW5kZXgpO1xuXG4gICAgLy8gdmFyIHZhclBvaW50ZXIgPSB2YXJWYWx1ZSBhcyBWYXJpYWJsZVBvaW50ZXJWYWx1ZTtcbiAgICBsZXQgdmFyUG9pbnRlciA9IGFzT3JOdWxsKHZhclZhbHVlLCBWYXJpYWJsZVBvaW50ZXJWYWx1ZSk7XG4gICAgaWYgKHZhclBvaW50ZXIgIT09IG51bGwpIHtcbiAgICAgIHZhclZhbHVlID0gdGhpcy5WYWx1ZUF0VmFyaWFibGVQb2ludGVyKHZhclBvaW50ZXIpO1xuICAgIH1cblxuICAgIHJldHVybiB2YXJWYWx1ZTtcbiAgfVxuXG4gIHB1YmxpYyBUcnlHZXREZWZhdWx0VmFyaWFibGVWYWx1ZShuYW1lOiBzdHJpbmcgfCBudWxsKTogSW5rT2JqZWN0IHwgbnVsbCB7XG4gICAgbGV0IHZhbCA9IHRyeUdldFZhbHVlRnJvbU1hcCh0aGlzLl9kZWZhdWx0R2xvYmFsVmFyaWFibGVzLCBuYW1lLCBudWxsKTtcbiAgICByZXR1cm4gdmFsLmV4aXN0cyA/IHZhbC5yZXN1bHQgOiBudWxsO1xuICB9XG5cbiAgcHVibGljIEdsb2JhbFZhcmlhYmxlRXhpc3RzV2l0aE5hbWUobmFtZTogc3RyaW5nKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuX2dsb2JhbFZhcmlhYmxlcy5oYXMobmFtZSkgfHxcbiAgICAgICh0aGlzLl9kZWZhdWx0R2xvYmFsVmFyaWFibGVzICE9PSBudWxsICYmXG4gICAgICAgIHRoaXMuX2RlZmF1bHRHbG9iYWxWYXJpYWJsZXMuaGFzKG5hbWUpKVxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgR2V0UmF3VmFyaWFibGVXaXRoTmFtZShuYW1lOiBzdHJpbmcgfCBudWxsLCBjb250ZXh0SW5kZXg6IG51bWJlcikge1xuICAgIGxldCB2YXJWYWx1ZTogSW5rT2JqZWN0IHwgbnVsbCA9IG51bGw7XG5cbiAgICBpZiAoY29udGV4dEluZGV4ID09IDAgfHwgY29udGV4dEluZGV4ID09IC0xKSB7XG4gICAgICBsZXQgdmFyaWFibGVWYWx1ZSA9IG51bGw7XG4gICAgICBpZiAodGhpcy5wYXRjaCAhPT0gbnVsbCkge1xuICAgICAgICB2YXJpYWJsZVZhbHVlID0gdGhpcy5wYXRjaC5UcnlHZXRHbG9iYWwobmFtZSwgbnVsbCk7XG4gICAgICAgIGlmICh2YXJpYWJsZVZhbHVlLmV4aXN0cykgcmV0dXJuIHZhcmlhYmxlVmFsdWUucmVzdWx0ITtcbiAgICAgIH1cblxuICAgICAgLy8gdGhpcyBpcyBhIGNvbmRpdGlvbmFsIGFzc2lnbm1lbnRcbiAgICAgIHZhcmlhYmxlVmFsdWUgPSB0cnlHZXRWYWx1ZUZyb21NYXAodGhpcy5fZ2xvYmFsVmFyaWFibGVzLCBuYW1lLCBudWxsKTtcbiAgICAgIGlmICh2YXJpYWJsZVZhbHVlLmV4aXN0cykgcmV0dXJuIHZhcmlhYmxlVmFsdWUucmVzdWx0O1xuXG4gICAgICBpZiAodGhpcy5fZGVmYXVsdEdsb2JhbFZhcmlhYmxlcyAhPT0gbnVsbCkge1xuICAgICAgICB2YXJpYWJsZVZhbHVlID0gdHJ5R2V0VmFsdWVGcm9tTWFwKFxuICAgICAgICAgIHRoaXMuX2RlZmF1bHRHbG9iYWxWYXJpYWJsZXMsXG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICBudWxsXG4gICAgICAgICk7XG4gICAgICAgIGlmICh2YXJpYWJsZVZhbHVlLmV4aXN0cykgcmV0dXJuIHZhcmlhYmxlVmFsdWUucmVzdWx0O1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fbGlzdERlZnNPcmlnaW4gPT09IG51bGwpXG4gICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJWYXJpYWJsZXNTdGF0ZS5fbGlzdERlZnNPcmlnaW5cIik7XG4gICAgICBsZXQgbGlzdEl0ZW1WYWx1ZSA9IHRoaXMuX2xpc3REZWZzT3JpZ2luLkZpbmRTaW5nbGVJdGVtTGlzdFdpdGhOYW1lKG5hbWUpO1xuICAgICAgaWYgKGxpc3RJdGVtVmFsdWUpIHJldHVybiBsaXN0SXRlbVZhbHVlO1xuICAgIH1cblxuICAgIHZhclZhbHVlID0gdGhpcy5fY2FsbFN0YWNrLkdldFRlbXBvcmFyeVZhcmlhYmxlV2l0aE5hbWUobmFtZSwgY29udGV4dEluZGV4KTtcblxuICAgIHJldHVybiB2YXJWYWx1ZTtcbiAgfVxuXG4gIHB1YmxpYyBWYWx1ZUF0VmFyaWFibGVQb2ludGVyKHBvaW50ZXI6IFZhcmlhYmxlUG9pbnRlclZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuR2V0VmFyaWFibGVXaXRoTmFtZShwb2ludGVyLnZhcmlhYmxlTmFtZSwgcG9pbnRlci5jb250ZXh0SW5kZXgpO1xuICB9XG5cbiAgcHVibGljIEFzc2lnbih2YXJBc3M6IFZhcmlhYmxlQXNzaWdubWVudCwgdmFsdWU6IElua09iamVjdCkge1xuICAgIGxldCBuYW1lID0gdmFyQXNzLnZhcmlhYmxlTmFtZTtcbiAgICBpZiAobmFtZSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcIm5hbWVcIik7XG4gICAgfVxuICAgIGxldCBjb250ZXh0SW5kZXggPSAtMTtcblxuICAgIGxldCBzZXRHbG9iYWwgPSBmYWxzZTtcbiAgICBpZiAodmFyQXNzLmlzTmV3RGVjbGFyYXRpb24pIHtcbiAgICAgIHNldEdsb2JhbCA9IHZhckFzcy5pc0dsb2JhbDtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0R2xvYmFsID0gdGhpcy5HbG9iYWxWYXJpYWJsZUV4aXN0c1dpdGhOYW1lKG5hbWUpO1xuICAgIH1cblxuICAgIGlmICh2YXJBc3MuaXNOZXdEZWNsYXJhdGlvbikge1xuICAgICAgLy8gdmFyIHZhclBvaW50ZXIgPSB2YWx1ZSBhcyBWYXJpYWJsZVBvaW50ZXJWYWx1ZTtcbiAgICAgIGxldCB2YXJQb2ludGVyID0gYXNPck51bGwodmFsdWUsIFZhcmlhYmxlUG9pbnRlclZhbHVlKTtcbiAgICAgIGlmICh2YXJQb2ludGVyICE9PSBudWxsKSB7XG4gICAgICAgIGxldCBmdWxseVJlc29sdmVkVmFyaWFibGVQb2ludGVyID1cbiAgICAgICAgICB0aGlzLlJlc29sdmVWYXJpYWJsZVBvaW50ZXIodmFyUG9pbnRlcik7XG4gICAgICAgIHZhbHVlID0gZnVsbHlSZXNvbHZlZFZhcmlhYmxlUG9pbnRlcjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGV4aXN0aW5nUG9pbnRlciA9IG51bGw7XG4gICAgICBkbyB7XG4gICAgICAgIC8vIGV4aXN0aW5nUG9pbnRlciA9IEdldFJhd1ZhcmlhYmxlV2l0aE5hbWUgKG5hbWUsIGNvbnRleHRJbmRleCkgYXMgVmFyaWFibGVQb2ludGVyVmFsdWU7XG4gICAgICAgIGV4aXN0aW5nUG9pbnRlciA9IGFzT3JOdWxsKFxuICAgICAgICAgIHRoaXMuR2V0UmF3VmFyaWFibGVXaXRoTmFtZShuYW1lLCBjb250ZXh0SW5kZXgpLFxuICAgICAgICAgIFZhcmlhYmxlUG9pbnRlclZhbHVlXG4gICAgICAgICk7XG4gICAgICAgIGlmIChleGlzdGluZ1BvaW50ZXIgIT0gbnVsbCkge1xuICAgICAgICAgIG5hbWUgPSBleGlzdGluZ1BvaW50ZXIudmFyaWFibGVOYW1lO1xuICAgICAgICAgIGNvbnRleHRJbmRleCA9IGV4aXN0aW5nUG9pbnRlci5jb250ZXh0SW5kZXg7XG4gICAgICAgICAgc2V0R2xvYmFsID0gY29udGV4dEluZGV4ID09IDA7XG4gICAgICAgIH1cbiAgICAgIH0gd2hpbGUgKGV4aXN0aW5nUG9pbnRlciAhPSBudWxsKTtcbiAgICB9XG5cbiAgICBpZiAoc2V0R2xvYmFsKSB7XG4gICAgICB0aGlzLlNldEdsb2JhbChuYW1lLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2NhbGxTdGFjay5TZXRUZW1wb3JhcnlWYXJpYWJsZShcbiAgICAgICAgbmFtZSxcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIHZhckFzcy5pc05ld0RlY2xhcmF0aW9uLFxuICAgICAgICBjb250ZXh0SW5kZXhcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFNuYXBzaG90RGVmYXVsdEdsb2JhbHMoKSB7XG4gICAgdGhpcy5fZGVmYXVsdEdsb2JhbFZhcmlhYmxlcyA9IG5ldyBNYXAodGhpcy5fZ2xvYmFsVmFyaWFibGVzKTtcbiAgfVxuXG4gIHB1YmxpYyBSZXRhaW5MaXN0T3JpZ2luc0ZvckFzc2lnbm1lbnQoXG4gICAgb2xkVmFsdWU6IElua09iamVjdCxcbiAgICBuZXdWYWx1ZTogSW5rT2JqZWN0XG4gICkge1xuICAgIGxldCBvbGRMaXN0ID0gYXNPclRocm93cyhvbGRWYWx1ZSwgTGlzdFZhbHVlKTtcbiAgICBsZXQgbmV3TGlzdCA9IGFzT3JUaHJvd3MobmV3VmFsdWUsIExpc3RWYWx1ZSk7XG5cbiAgICBpZiAob2xkTGlzdC52YWx1ZSAmJiBuZXdMaXN0LnZhbHVlICYmIG5ld0xpc3QudmFsdWUuQ291bnQgPT0gMCkge1xuICAgICAgbmV3TGlzdC52YWx1ZS5TZXRJbml0aWFsT3JpZ2luTmFtZXMob2xkTGlzdC52YWx1ZS5vcmlnaW5OYW1lcyk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFNldEdsb2JhbCh2YXJpYWJsZU5hbWU6IHN0cmluZyB8IG51bGwsIHZhbHVlOiBJbmtPYmplY3QpIHtcbiAgICBsZXQgb2xkVmFsdWUgPSBudWxsO1xuXG4gICAgaWYgKHRoaXMucGF0Y2ggPT09IG51bGwpIHtcbiAgICAgIG9sZFZhbHVlID0gdHJ5R2V0VmFsdWVGcm9tTWFwKHRoaXMuX2dsb2JhbFZhcmlhYmxlcywgdmFyaWFibGVOYW1lLCBudWxsKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wYXRjaCAhPT0gbnVsbCkge1xuICAgICAgb2xkVmFsdWUgPSB0aGlzLnBhdGNoLlRyeUdldEdsb2JhbCh2YXJpYWJsZU5hbWUsIG51bGwpO1xuICAgICAgaWYgKCFvbGRWYWx1ZS5leGlzdHMpIHtcbiAgICAgICAgb2xkVmFsdWUgPSB0cnlHZXRWYWx1ZUZyb21NYXAoXG4gICAgICAgICAgdGhpcy5fZ2xvYmFsVmFyaWFibGVzLFxuICAgICAgICAgIHZhcmlhYmxlTmFtZSxcbiAgICAgICAgICBudWxsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgTGlzdFZhbHVlLlJldGFpbkxpc3RPcmlnaW5zRm9yQXNzaWdubWVudChvbGRWYWx1ZSEucmVzdWx0ISwgdmFsdWUpO1xuXG4gICAgaWYgKHZhcmlhYmxlTmFtZSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcInZhcmlhYmxlTmFtZVwiKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wYXRjaCAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5wYXRjaC5TZXRHbG9iYWwodmFyaWFibGVOYW1lLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2dsb2JhbFZhcmlhYmxlcy5zZXQodmFyaWFibGVOYW1lLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogTm90IHN1cmUgIT09IGlzIGVxdWl2YWxlbnQgdG8gIXZhbHVlLkVxdWFscyhvbGRWYWx1ZSlcbiAgICBpZiAoXG4gICAgICB0aGlzLnZhcmlhYmxlQ2hhbmdlZEV2ZW50ICE9PSBudWxsICYmXG4gICAgICBvbGRWYWx1ZSAhPT0gbnVsbCAmJlxuICAgICAgdmFsdWUgIT09IG9sZFZhbHVlLnJlc3VsdFxuICAgICkge1xuICAgICAgaWYgKHRoaXMuX2JhdGNoT2JzZXJ2aW5nVmFyaWFibGVDaGFuZ2VzKSB7XG4gICAgICAgIGlmICh0aGlzLl9jaGFuZ2VkVmFyaWFibGVzRm9yQmF0Y2hPYnMgPT09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwidGhpcy5fY2hhbmdlZFZhcmlhYmxlc0ZvckJhdGNoT2JzXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucGF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICB0aGlzLnBhdGNoLkFkZENoYW5nZWRWYXJpYWJsZSh2YXJpYWJsZU5hbWUpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2NoYW5nZWRWYXJpYWJsZXNGb3JCYXRjaE9icyAhPT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMuX2NoYW5nZWRWYXJpYWJsZXNGb3JCYXRjaE9icy5hZGQodmFyaWFibGVOYW1lKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy52YXJpYWJsZUNoYW5nZWRFdmVudCh2YXJpYWJsZU5hbWUsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgUmVzb2x2ZVZhcmlhYmxlUG9pbnRlcih2YXJQb2ludGVyOiBWYXJpYWJsZVBvaW50ZXJWYWx1ZSkge1xuICAgIGxldCBjb250ZXh0SW5kZXggPSB2YXJQb2ludGVyLmNvbnRleHRJbmRleDtcblxuICAgIGlmIChjb250ZXh0SW5kZXggPT0gLTEpXG4gICAgICBjb250ZXh0SW5kZXggPSB0aGlzLkdldENvbnRleHRJbmRleE9mVmFyaWFibGVOYW1lZChcbiAgICAgICAgdmFyUG9pbnRlci52YXJpYWJsZU5hbWVcbiAgICAgICk7XG5cbiAgICBsZXQgdmFsdWVPZlZhcmlhYmxlUG9pbnRlZFRvID0gdGhpcy5HZXRSYXdWYXJpYWJsZVdpdGhOYW1lKFxuICAgICAgdmFyUG9pbnRlci52YXJpYWJsZU5hbWUsXG4gICAgICBjb250ZXh0SW5kZXhcbiAgICApO1xuXG4gICAgLy8gdmFyIGRvdWJsZVJlZGlyZWN0aW9uUG9pbnRlciA9IHZhbHVlT2ZWYXJpYWJsZVBvaW50ZWRUbyBhcyBWYXJpYWJsZVBvaW50ZXJWYWx1ZTtcbiAgICBsZXQgZG91YmxlUmVkaXJlY3Rpb25Qb2ludGVyID0gYXNPck51bGwoXG4gICAgICB2YWx1ZU9mVmFyaWFibGVQb2ludGVkVG8sXG4gICAgICBWYXJpYWJsZVBvaW50ZXJWYWx1ZVxuICAgICk7XG4gICAgaWYgKGRvdWJsZVJlZGlyZWN0aW9uUG9pbnRlciAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gZG91YmxlUmVkaXJlY3Rpb25Qb2ludGVyO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbmV3IFZhcmlhYmxlUG9pbnRlclZhbHVlKHZhclBvaW50ZXIudmFyaWFibGVOYW1lLCBjb250ZXh0SW5kZXgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBHZXRDb250ZXh0SW5kZXhPZlZhcmlhYmxlTmFtZWQodmFyTmFtZTogc3RyaW5nKSB7XG4gICAgaWYgKHRoaXMuR2xvYmFsVmFyaWFibGVFeGlzdHNXaXRoTmFtZSh2YXJOYW1lKSkgcmV0dXJuIDA7XG5cbiAgICByZXR1cm4gdGhpcy5fY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50SW5kZXg7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiBpcyBzcGVjaWZpYyB0byB0aGUganMgdmVyc2lvbiBvZiBpbmsuIEl0IGFsbG93cyB0byByZWdpc3RlciBhXG4gICAqIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiBhIHZhcmlhYmxlIGNoYW5nZXMuIFRoZSBvcmlnaW5hbCBjb2RlIHVzZXNcbiAgICogYHN0YXRlLnZhcmlhYmxlQ2hhbmdlZEV2ZW50ICs9IGNhbGxiYWNrYCBpbnN0ZWFkLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFja1xuICAgKi9cbiAgcHVibGljIE9ic2VydmVWYXJpYWJsZUNoYW5nZShcbiAgICBjYWxsYmFjazogKHZhcmlhYmxlTmFtZTogc3RyaW5nLCBuZXdWYWx1ZTogSW5rT2JqZWN0KSA9PiB2b2lkXG4gICkge1xuICAgIHRoaXMudmFyaWFibGVDaGFuZ2VkRXZlbnRDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gIH1cblxuICBwcml2YXRlIF9nbG9iYWxWYXJpYWJsZXM6IE1hcDxzdHJpbmcsIElua09iamVjdD47XG4gIHByaXZhdGUgX2RlZmF1bHRHbG9iYWxWYXJpYWJsZXM6IE1hcDxzdHJpbmcsIElua09iamVjdD4gPSBuZXcgTWFwKCk7XG5cbiAgcHJpdmF0ZSBfY2FsbFN0YWNrOiBDYWxsU3RhY2s7XG4gIHByaXZhdGUgX2NoYW5nZWRWYXJpYWJsZXNGb3JCYXRjaE9iczogU2V0PHN0cmluZz4gfCBudWxsID0gbmV3IFNldCgpO1xuICBwcml2YXRlIF9saXN0RGVmc09yaWdpbjogTGlzdERlZmluaXRpb25zT3JpZ2luIHwgbnVsbDtcblxuICBwcml2YXRlIF9iYXRjaE9ic2VydmluZ1ZhcmlhYmxlQ2hhbmdlczogYm9vbGVhbiA9IGZhbHNlO1xufVxuIiwiLy8gVGFrZW4gZnJvbSBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9ibGl4dC9mMTdiNDdjNjI1MDhiZTU5OTg3YlxuLy8gSW5rIHVzZXMgYSBzZWVkYWJsZSBQUk5HIG9mIHdoaWNoIHRoZXJlIGlzIG5vbmUgaW4gbmF0aXZlIGphdmFzY3JpcHQuXG5leHBvcnQgY2xhc3MgUFJORyB7XG4gIHByaXZhdGUgc2VlZDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHNlZWQ6IG51bWJlcikge1xuICAgIHRoaXMuc2VlZCA9IHNlZWQgJSAyMTQ3NDgzNjQ3O1xuICAgIGlmICh0aGlzLnNlZWQgPD0gMCkgdGhpcy5zZWVkICs9IDIxNDc0ODM2NDY7XG4gIH1cbiAgcHVibGljIG5leHQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKHRoaXMuc2VlZCA9ICh0aGlzLnNlZWQgKiA0ODI3MSkgJSAyMTQ3NDgzNjQ3KTtcbiAgfVxuICBwdWJsaWMgbmV4dEZsb2F0KCk6IG51bWJlciB7XG4gICAgcmV0dXJuICh0aGlzLm5leHQoKSAtIDEpIC8gMjE0NzQ4MzY0NjtcbiAgfVxufVxuIiwiaW1wb3J0IHsgSW5rT2JqZWN0IH0gZnJvbSBcIi4vT2JqZWN0XCI7XG5pbXBvcnQgeyBDb250YWluZXIgfSBmcm9tIFwiLi9Db250YWluZXJcIjtcblxuZXhwb3J0IGNsYXNzIFN0YXRlUGF0Y2gge1xuICBnZXQgZ2xvYmFscygpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2xvYmFscztcbiAgfVxuICBnZXQgY2hhbmdlZFZhcmlhYmxlcygpIHtcbiAgICByZXR1cm4gdGhpcy5fY2hhbmdlZFZhcmlhYmxlcztcbiAgfVxuICBnZXQgdmlzaXRDb3VudHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Zpc2l0Q291bnRzO1xuICB9XG4gIGdldCB0dXJuSW5kaWNlcygpIHtcbiAgICByZXR1cm4gdGhpcy5fdHVybkluZGljZXM7XG4gIH1cblxuICBjb25zdHJ1Y3RvcigpO1xuICBjb25zdHJ1Y3Rvcih0b0NvcHk6IFN0YXRlUGF0Y2ggfCBudWxsKTtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEgJiYgYXJndW1lbnRzWzBdICE9PSBudWxsKSB7XG4gICAgICBsZXQgdG9Db3B5ID0gYXJndW1lbnRzWzBdIGFzIFN0YXRlUGF0Y2g7XG4gICAgICB0aGlzLl9nbG9iYWxzID0gbmV3IE1hcCh0b0NvcHkuX2dsb2JhbHMpO1xuICAgICAgdGhpcy5fY2hhbmdlZFZhcmlhYmxlcyA9IG5ldyBTZXQodG9Db3B5Ll9jaGFuZ2VkVmFyaWFibGVzKTtcbiAgICAgIHRoaXMuX3Zpc2l0Q291bnRzID0gbmV3IE1hcCh0b0NvcHkuX3Zpc2l0Q291bnRzKTtcbiAgICAgIHRoaXMuX3R1cm5JbmRpY2VzID0gbmV3IE1hcCh0b0NvcHkuX3R1cm5JbmRpY2VzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZ2xvYmFscyA9IG5ldyBNYXAoKTtcbiAgICAgIHRoaXMuX2NoYW5nZWRWYXJpYWJsZXMgPSBuZXcgU2V0KCk7XG4gICAgICB0aGlzLl92aXNpdENvdW50cyA9IG5ldyBNYXAoKTtcbiAgICAgIHRoaXMuX3R1cm5JbmRpY2VzID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBUcnlHZXRHbG9iYWwobmFtZTogc3RyaW5nIHwgbnVsbCwgLyogb3V0ICovIHZhbHVlOiBJbmtPYmplY3QgfCBudWxsKSB7XG4gICAgaWYgKG5hbWUgIT09IG51bGwgJiYgdGhpcy5fZ2xvYmFscy5oYXMobmFtZSkpIHtcbiAgICAgIHJldHVybiB7IHJlc3VsdDogdGhpcy5fZ2xvYmFscy5nZXQobmFtZSksIGV4aXN0czogdHJ1ZSB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHJlc3VsdDogdmFsdWUsIGV4aXN0czogZmFsc2UgfTtcbiAgfVxuXG4gIHB1YmxpYyBTZXRHbG9iYWwobmFtZTogc3RyaW5nLCB2YWx1ZTogSW5rT2JqZWN0KSB7XG4gICAgdGhpcy5fZ2xvYmFscy5zZXQobmFtZSwgdmFsdWUpO1xuICB9XG5cbiAgcHVibGljIEFkZENoYW5nZWRWYXJpYWJsZShuYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5fY2hhbmdlZFZhcmlhYmxlcy5hZGQobmFtZSk7XG4gIH1cblxuICBwdWJsaWMgVHJ5R2V0VmlzaXRDb3VudChjb250YWluZXI6IENvbnRhaW5lciwgLyogb3V0ICovIGNvdW50OiBudW1iZXIpIHtcbiAgICBpZiAodGhpcy5fdmlzaXRDb3VudHMuaGFzKGNvbnRhaW5lcikpIHtcbiAgICAgIHJldHVybiB7IHJlc3VsdDogdGhpcy5fdmlzaXRDb3VudHMuZ2V0KGNvbnRhaW5lciksIGV4aXN0czogdHJ1ZSB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IHJlc3VsdDogY291bnQsIGV4aXN0czogZmFsc2UgfTtcbiAgfVxuXG4gIHB1YmxpYyBTZXRWaXNpdENvdW50KGNvbnRhaW5lcjogQ29udGFpbmVyLCBjb3VudDogbnVtYmVyKSB7XG4gICAgdGhpcy5fdmlzaXRDb3VudHMuc2V0KGNvbnRhaW5lciwgY291bnQpO1xuICB9XG5cbiAgcHVibGljIFNldFR1cm5JbmRleChjb250YWluZXI6IENvbnRhaW5lciwgaW5kZXg6IG51bWJlcikge1xuICAgIHRoaXMuX3R1cm5JbmRpY2VzLnNldChjb250YWluZXIsIGluZGV4KTtcbiAgfVxuXG4gIHB1YmxpYyBUcnlHZXRUdXJuSW5kZXgoY29udGFpbmVyOiBDb250YWluZXIsIC8qIG91dCAqLyBpbmRleDogbnVtYmVyKSB7XG4gICAgaWYgKHRoaXMuX3R1cm5JbmRpY2VzLmhhcyhjb250YWluZXIpKSB7XG4gICAgICByZXR1cm4geyByZXN1bHQ6IHRoaXMuX3R1cm5JbmRpY2VzLmdldChjb250YWluZXIpLCBleGlzdHM6IHRydWUgfTtcbiAgICB9XG5cbiAgICByZXR1cm4geyByZXN1bHQ6IGluZGV4LCBleGlzdHM6IGZhbHNlIH07XG4gIH1cblxuICBwcml2YXRlIF9nbG9iYWxzOiBNYXA8c3RyaW5nLCBJbmtPYmplY3Q+O1xuICBwcml2YXRlIF9jaGFuZ2VkVmFyaWFibGVzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcbiAgcHJpdmF0ZSBfdmlzaXRDb3VudHM6IE1hcDxDb250YWluZXIsIG51bWJlcj4gPSBuZXcgTWFwKCk7XG4gIHByaXZhdGUgX3R1cm5JbmRpY2VzOiBNYXA8Q29udGFpbmVyLCBudW1iZXI+ID0gbmV3IE1hcCgpO1xufVxuIiwiZXhwb3J0IGNsYXNzIFNpbXBsZUpzb24ge1xuICBwdWJsaWMgc3RhdGljIFRleHRUb0RpY3Rpb25hcnkodGV4dDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIG5ldyBTaW1wbGVKc29uLlJlYWRlcih0ZXh0KS5Ub0RpY3Rpb25hcnkoKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgVGV4dFRvQXJyYXkodGV4dDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIG5ldyBTaW1wbGVKc29uLlJlYWRlcih0ZXh0KS5Ub0FycmF5KCk7XG4gIH1cbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBTaW1wbGVKc29uIHtcbiAgZXhwb3J0IGNsYXNzIFJlYWRlciB7XG4gICAgY29uc3RydWN0b3IodGV4dDogc3RyaW5nKSB7XG4gICAgICB0aGlzLl9yb290T2JqZWN0ID0gSlNPTi5wYXJzZSh0ZXh0KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgVG9EaWN0aW9uYXJ5KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Jvb3RPYmplY3QgYXMgUmVjb3JkPHN0cmluZywgYW55PjtcbiAgICB9XG5cbiAgICBwdWJsaWMgVG9BcnJheSgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9yb290T2JqZWN0IGFzIGFueVtdO1xuICAgIH1cblxuICAgIHByaXZhdGUgX3Jvb3RPYmplY3Q6IGFueVtdIHwgUmVjb3JkPHN0cmluZywgYW55PjtcbiAgfVxuXG4gIC8vIEluIEMjLCB0aGlzIGNsYXNzIHdyaXRlcyBqc29uIHRva2VucyBkaXJlY3RseSB0byBhIFN0cmluZ1dyaXRlciBvclxuICAvLyBhbm90aGVyIHN0cmVhbS4gSGVyZSwgYSB0ZW1wb3JhcnkgaGllcmFyY2h5IGlzIGNyZWF0ZWQgaW4gdGhlIGZvcm1cbiAgLy8gb2YgYSBqYXZhc2NyaXB0IG9iamVjdCwgd2hpY2ggaXMgc2VyaWFsaXNlZCBpbiB0aGUgYHRvU3RyaW5nYCBtZXRob2QuXG4gIC8vIFNlZSBpbmRpdmlkdWFsIG1ldGhvZHMgYW5kIHByb3BlcnRpZXMgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gIGV4cG9ydCBjbGFzcyBXcml0ZXIge1xuICAgIHB1YmxpYyBXcml0ZU9iamVjdChpbm5lcjogKHc6IFdyaXRlcikgPT4gdm9pZCkge1xuICAgICAgdGhpcy5Xcml0ZU9iamVjdFN0YXJ0KCk7XG4gICAgICBpbm5lcih0aGlzKTtcbiAgICAgIHRoaXMuV3JpdGVPYmplY3RFbmQoKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgYSBuZXcgb2JqZWN0LlxuICAgIHB1YmxpYyBXcml0ZU9iamVjdFN0YXJ0KCkge1xuICAgICAgdGhpcy5TdGFydE5ld09iamVjdCh0cnVlKTtcblxuICAgICAgbGV0IG5ld09iamVjdDogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXG4gICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gU2ltcGxlSnNvbi5Xcml0ZXIuU3RhdGUuUHJvcGVydHkpIHtcbiAgICAgICAgLy8gVGhpcyBvYmplY3QgaXMgY3JlYXRlZCBhcyB0aGUgdmFsdWUgb2YgYSBwcm9wZXJ0eSxcbiAgICAgICAgLy8gaW5zaWRlIGFuIG90aGVyIG9iamVjdC5cbiAgICAgICAgdGhpcy5Bc3NlcnQodGhpcy5jdXJyZW50Q29sbGVjdGlvbiAhPT0gbnVsbCk7XG4gICAgICAgIHRoaXMuQXNzZXJ0KHRoaXMuY3VycmVudFByb3BlcnR5TmFtZSAhPT0gbnVsbCk7XG5cbiAgICAgICAgbGV0IHByb3BlcnR5TmFtZSA9IHRoaXMuX3Byb3BlcnR5TmFtZVN0YWNrLnBvcCgpO1xuICAgICAgICB0aGlzLmN1cnJlbnRDb2xsZWN0aW9uIVtwcm9wZXJ0eU5hbWUhXSA9IG5ld09iamVjdDtcbiAgICAgICAgdGhpcy5fY29sbGVjdGlvblN0YWNrLnB1c2gobmV3T2JqZWN0KTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zdGF0ZSA9PT0gU2ltcGxlSnNvbi5Xcml0ZXIuU3RhdGUuQXJyYXkpIHtcbiAgICAgICAgLy8gVGhpcyBvYmplY3QgaXMgY3JlYXRlZCBhcyB0aGUgY2hpbGQgb2YgYW4gYXJyYXkuXG4gICAgICAgIHRoaXMuQXNzZXJ0KHRoaXMuY3VycmVudENvbGxlY3Rpb24gIT09IG51bGwpO1xuXG4gICAgICAgIHRoaXMuY3VycmVudENvbGxlY3Rpb24hLnB1c2gobmV3T2JqZWN0KTtcbiAgICAgICAgdGhpcy5fY29sbGVjdGlvblN0YWNrLnB1c2gobmV3T2JqZWN0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFRoaXMgb2JqZWN0IGlzIHRoZSByb290IG9iamVjdC5cbiAgICAgICAgdGhpcy5Bc3NlcnQodGhpcy5zdGF0ZSA9PT0gU2ltcGxlSnNvbi5Xcml0ZXIuU3RhdGUuTm9uZSk7XG4gICAgICAgIHRoaXMuX2pzb25PYmplY3QgPSBuZXdPYmplY3Q7XG4gICAgICAgIHRoaXMuX2NvbGxlY3Rpb25TdGFjay5wdXNoKG5ld09iamVjdCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3N0YXRlU3RhY2sucHVzaChcbiAgICAgICAgbmV3IFNpbXBsZUpzb24uV3JpdGVyLlN0YXRlRWxlbWVudChTaW1wbGVKc29uLldyaXRlci5TdGF0ZS5PYmplY3QpXG4gICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBXcml0ZU9iamVjdEVuZCgpIHtcbiAgICAgIHRoaXMuQXNzZXJ0KHRoaXMuc3RhdGUgPT09IFNpbXBsZUpzb24uV3JpdGVyLlN0YXRlLk9iamVjdCk7XG4gICAgICB0aGlzLl9jb2xsZWN0aW9uU3RhY2sucG9wKCk7XG4gICAgICB0aGlzLl9zdGF0ZVN0YWNrLnBvcCgpO1xuICAgIH1cblxuICAgIC8vIFdyaXRlIGEgcHJvcGVydHkgbmFtZSAvIHZhbHVlIHBhaXIgdG8gdGhlIGN1cnJlbnQgb2JqZWN0LlxuICAgIHB1YmxpYyBXcml0ZVByb3BlcnR5KFxuICAgICAgbmFtZTogYW55LFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgICAgaW5uZXJPckNvbnRlbnQ6ICgodzogV3JpdGVyKSA9PiB2b2lkKSB8IHN0cmluZyB8IGJvb2xlYW4gfCBudWxsXG4gICAgKSB7XG4gICAgICB0aGlzLldyaXRlUHJvcGVydHlTdGFydChuYW1lKTtcbiAgICAgIGlmIChhcmd1bWVudHNbMV0gaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICBsZXQgaW5uZXIgPSBhcmd1bWVudHNbMV07XG4gICAgICAgIGlubmVyKHRoaXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGNvbnRlbnQ6IHN0cmluZyB8IGJvb2xlYW4gfCBudWxsID0gYXJndW1lbnRzWzFdO1xuICAgICAgICB0aGlzLldyaXRlKGNvbnRlbnQpO1xuICAgICAgfVxuICAgICAgdGhpcy5Xcml0ZVByb3BlcnR5RW5kKCk7XG4gICAgfVxuXG4gICAgLy8gSW50IGFuZCBGbG9hdCBhcmUgc2VwYXJhdGUgY2FsbHMsIHNpbmNlIHRoZXJlIGJvdGggYXJlXG4gICAgLy8gbnVtYmVycyBpbiBKYXZhU2NyaXB0LCBidXQgbmVlZCB0byBiZSBoYW5kbGVkIGRpZmZlcmVudGx5LlxuXG4gICAgcHVibGljIFdyaXRlSW50UHJvcGVydHkobmFtZTogYW55LCBjb250ZW50OiBudW1iZXIpIHtcbiAgICAgIHRoaXMuV3JpdGVQcm9wZXJ0eVN0YXJ0KG5hbWUpO1xuICAgICAgdGhpcy5Xcml0ZUludChjb250ZW50KTtcbiAgICAgIHRoaXMuV3JpdGVQcm9wZXJ0eUVuZCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBXcml0ZUZsb2F0UHJvcGVydHkobmFtZTogYW55LCBjb250ZW50OiBudW1iZXIpIHtcbiAgICAgIHRoaXMuV3JpdGVQcm9wZXJ0eVN0YXJ0KG5hbWUpO1xuICAgICAgdGhpcy5Xcml0ZUZsb2F0KGNvbnRlbnQpO1xuICAgICAgdGhpcy5Xcml0ZVByb3BlcnR5RW5kKCk7XG4gICAgfVxuXG4gICAgLy8gUHJlcGFyZSBhIG5ldyBwcm9wZXJ0eSBuYW1lLCB3aGljaCB3aWxsIGJlIHVzZSB0byBhZGQgdGhlXG4gICAgLy8gbmV3IG9iamVjdCB3aGVuIGNhbGxpbmcgX2FkZFRvQ3VycmVudE9iamVjdCgpIGZyb20gYSBXcml0ZVxuICAgIC8vIG1ldGhvZC5cbiAgICBwdWJsaWMgV3JpdGVQcm9wZXJ0eVN0YXJ0KG5hbWU6IGFueSkge1xuICAgICAgdGhpcy5Bc3NlcnQodGhpcy5zdGF0ZSA9PT0gU2ltcGxlSnNvbi5Xcml0ZXIuU3RhdGUuT2JqZWN0KTtcbiAgICAgIHRoaXMuX3Byb3BlcnR5TmFtZVN0YWNrLnB1c2gobmFtZSk7XG5cbiAgICAgIHRoaXMuSW5jcmVtZW50Q2hpbGRDb3VudCgpO1xuXG4gICAgICB0aGlzLl9zdGF0ZVN0YWNrLnB1c2goXG4gICAgICAgIG5ldyBTaW1wbGVKc29uLldyaXRlci5TdGF0ZUVsZW1lbnQoU2ltcGxlSnNvbi5Xcml0ZXIuU3RhdGUuUHJvcGVydHkpXG4gICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBXcml0ZVByb3BlcnR5RW5kKCkge1xuICAgICAgdGhpcy5Bc3NlcnQodGhpcy5zdGF0ZSA9PT0gU2ltcGxlSnNvbi5Xcml0ZXIuU3RhdGUuUHJvcGVydHkpO1xuICAgICAgdGhpcy5Bc3NlcnQodGhpcy5jaGlsZENvdW50ID09PSAxKTtcbiAgICAgIHRoaXMuX3N0YXRlU3RhY2sucG9wKCk7XG4gICAgfVxuXG4gICAgLy8gUHJlcGFyZSBhIG5ldyBwcm9wZXJ0eSBuYW1lLCBleGNlcHQgdGhpcyB0aW1lLCB0aGUgcHJvcGVydHkgbmFtZVxuICAgIC8vIHdpbGwgYmUgY3JlYXRlZCBieSBjb25jYXRlbmF0aW5nIGFsbCB0aGUgc3RyaW5ncyBwYXNzZWQgdG9cbiAgICAvLyBXcml0ZVByb3BlcnR5TmFtZUlubmVyLlxuICAgIHB1YmxpYyBXcml0ZVByb3BlcnR5TmFtZVN0YXJ0KCkge1xuICAgICAgdGhpcy5Bc3NlcnQodGhpcy5zdGF0ZSA9PT0gU2ltcGxlSnNvbi5Xcml0ZXIuU3RhdGUuT2JqZWN0KTtcbiAgICAgIHRoaXMuSW5jcmVtZW50Q2hpbGRDb3VudCgpO1xuXG4gICAgICB0aGlzLl9jdXJyZW50UHJvcGVydHlOYW1lID0gXCJcIjtcblxuICAgICAgdGhpcy5fc3RhdGVTdGFjay5wdXNoKFxuICAgICAgICBuZXcgU2ltcGxlSnNvbi5Xcml0ZXIuU3RhdGVFbGVtZW50KFNpbXBsZUpzb24uV3JpdGVyLlN0YXRlLlByb3BlcnR5KVxuICAgICAgKTtcbiAgICAgIHRoaXMuX3N0YXRlU3RhY2sucHVzaChcbiAgICAgICAgbmV3IFNpbXBsZUpzb24uV3JpdGVyLlN0YXRlRWxlbWVudChTaW1wbGVKc29uLldyaXRlci5TdGF0ZS5Qcm9wZXJ0eU5hbWUpXG4gICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBXcml0ZVByb3BlcnR5TmFtZUVuZCgpIHtcbiAgICAgIHRoaXMuQXNzZXJ0KHRoaXMuc3RhdGUgPT09IFNpbXBsZUpzb24uV3JpdGVyLlN0YXRlLlByb3BlcnR5TmFtZSk7XG4gICAgICB0aGlzLkFzc2VydCh0aGlzLl9jdXJyZW50UHJvcGVydHlOYW1lICE9PSBudWxsKTtcbiAgICAgIHRoaXMuX3Byb3BlcnR5TmFtZVN0YWNrLnB1c2godGhpcy5fY3VycmVudFByb3BlcnR5TmFtZSEpO1xuICAgICAgdGhpcy5fY3VycmVudFByb3BlcnR5TmFtZSA9IG51bGw7XG4gICAgICB0aGlzLl9zdGF0ZVN0YWNrLnBvcCgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBXcml0ZVByb3BlcnR5TmFtZUlubmVyKHN0cjogc3RyaW5nKSB7XG4gICAgICB0aGlzLkFzc2VydCh0aGlzLnN0YXRlID09PSBTaW1wbGVKc29uLldyaXRlci5TdGF0ZS5Qcm9wZXJ0eU5hbWUpO1xuICAgICAgdGhpcy5Bc3NlcnQodGhpcy5fY3VycmVudFByb3BlcnR5TmFtZSAhPT0gbnVsbCk7XG4gICAgICB0aGlzLl9jdXJyZW50UHJvcGVydHlOYW1lICs9IHN0cjtcbiAgICB9XG5cbiAgICAvLyBBZGQgYSBuZXcgYXJyYXkuXG4gICAgcHVibGljIFdyaXRlQXJyYXlTdGFydCgpIHtcbiAgICAgIHRoaXMuU3RhcnROZXdPYmplY3QodHJ1ZSk7XG5cbiAgICAgIGxldCBuZXdPYmplY3Q6IGFueVtdID0gW107XG5cbiAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTaW1wbGVKc29uLldyaXRlci5TdGF0ZS5Qcm9wZXJ0eSkge1xuICAgICAgICAvLyBUaGlzIGFycmF5IGlzIGNyZWF0ZWQgYXMgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHksXG4gICAgICAgIC8vIGluc2lkZSBhbiBvYmplY3QuXG4gICAgICAgIHRoaXMuQXNzZXJ0KHRoaXMuY3VycmVudENvbGxlY3Rpb24gIT09IG51bGwpO1xuICAgICAgICB0aGlzLkFzc2VydCh0aGlzLmN1cnJlbnRQcm9wZXJ0eU5hbWUgIT09IG51bGwpO1xuXG4gICAgICAgIGxldCBwcm9wZXJ0eU5hbWUgPSB0aGlzLl9wcm9wZXJ0eU5hbWVTdGFjay5wb3AoKTtcbiAgICAgICAgdGhpcy5jdXJyZW50Q29sbGVjdGlvbiFbcHJvcGVydHlOYW1lIV0gPSBuZXdPYmplY3Q7XG4gICAgICAgIHRoaXMuX2NvbGxlY3Rpb25TdGFjay5wdXNoKG5ld09iamVjdCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUgPT09IFNpbXBsZUpzb24uV3JpdGVyLlN0YXRlLkFycmF5KSB7XG4gICAgICAgIC8vIFRoaXMgYXJyYXkgaXMgY3JlYXRlZCBhcyB0aGUgY2hpbGQgb2YgYW5vdGhlciBhcnJheS5cbiAgICAgICAgdGhpcy5Bc3NlcnQodGhpcy5jdXJyZW50Q29sbGVjdGlvbiAhPT0gbnVsbCk7XG5cbiAgICAgICAgdGhpcy5jdXJyZW50Q29sbGVjdGlvbiEucHVzaChuZXdPYmplY3QpO1xuICAgICAgICB0aGlzLl9jb2xsZWN0aW9uU3RhY2sucHVzaChuZXdPYmplY3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVGhpcyBhcnJheSBpcyB0aGUgcm9vdCBvYmplY3QuXG4gICAgICAgIHRoaXMuQXNzZXJ0KHRoaXMuc3RhdGUgPT09IFNpbXBsZUpzb24uV3JpdGVyLlN0YXRlLk5vbmUpO1xuICAgICAgICB0aGlzLl9qc29uT2JqZWN0ID0gbmV3T2JqZWN0O1xuICAgICAgICB0aGlzLl9jb2xsZWN0aW9uU3RhY2sucHVzaChuZXdPYmplY3QpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9zdGF0ZVN0YWNrLnB1c2goXG4gICAgICAgIG5ldyBTaW1wbGVKc29uLldyaXRlci5TdGF0ZUVsZW1lbnQoU2ltcGxlSnNvbi5Xcml0ZXIuU3RhdGUuQXJyYXkpXG4gICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBXcml0ZUFycmF5RW5kKCkge1xuICAgICAgdGhpcy5Bc3NlcnQodGhpcy5zdGF0ZSA9PT0gU2ltcGxlSnNvbi5Xcml0ZXIuU3RhdGUuQXJyYXkpO1xuICAgICAgdGhpcy5fY29sbGVjdGlvblN0YWNrLnBvcCgpO1xuICAgICAgdGhpcy5fc3RhdGVTdGFjay5wb3AoKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGhlIHZhbHVlIHRvIHRoZSBhcHByb3ByaWF0ZSBjb2xsZWN0aW9uIChhcnJheSAvIG9iamVjdCksIGdpdmVuIHRoZSBjdXJyZW50XG4gICAgLy8gY29udGV4dC5cbiAgICBwdWJsaWMgV3JpdGUoXG4gICAgICB2YWx1ZTogbnVtYmVyIHwgc3RyaW5nIHwgYm9vbGVhbiB8IG51bGwsXG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgICBlc2NhcGU6IGJvb2xlYW4gPSB0cnVlXG4gICAgKSB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIldhcm5pbmc6IHRyeWluZyB0byB3cml0ZSBhIG51bGwgdmFsdWVcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5TdGFydE5ld09iamVjdChmYWxzZSk7XG4gICAgICB0aGlzLl9hZGRUb0N1cnJlbnRPYmplY3QodmFsdWUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBXcml0ZUJvb2wodmFsdWU6IGJvb2xlYW4gfCBudWxsKSB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLlN0YXJ0TmV3T2JqZWN0KGZhbHNlKTtcbiAgICAgIHRoaXMuX2FkZFRvQ3VycmVudE9iamVjdCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIFdyaXRlSW50KHZhbHVlOiBudW1iZXIgfCBudWxsKSB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLlN0YXJ0TmV3T2JqZWN0KGZhbHNlKTtcblxuICAgICAgLy8gTWF0aC5mbG9vciBpcyB1c2VkIGFzIGEgcHJlY2F1dGlvbjpcbiAgICAgIC8vICAgICAxLiB0byBlbnN1cmUgdGhhdCB0aGUgdmFsdWUgaXMgd3JpdHRlbiBhcyBhbiBpbnRlZ2VyXG4gICAgICAvLyAgICAgICAgKHdpdGhvdXQgYSBmcmFjdGlvbmFsIHBhcnQgLT4gMSBpbnN0ZWFkIG9mIDEuMCksIGV2ZW5cbiAgICAgIC8vICAgICAgICB0aG91Z2ggaXQgc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGJlaGF2aW91ciBvZlxuICAgICAgLy8gICAgICAgIEpTT04uc2VyaWFsaXplO1xuICAgICAgLy8gICAgIDIuIHRvIGVuc3VyZSB0aGF0IGlmIGEgZmxvYXRpbmcgbnVtYmVyIGlzIHBhc3NlZFxuICAgICAgLy8gICAgICAgIGFjY2lkZW50YWxseSwgaXQncyBjb252ZXJ0ZWQgdG8gYW4gaW50ZWdlci5cbiAgICAgIC8vXG4gICAgICAvLyBUaGlzIGd1YXJhbnRlZXMgc2F2ZWdhbWUgY29tcGF0aWJpbGl0eSB3aXRoIHRoZSByZWZlcmVuY2VcbiAgICAgIC8vIGltcGxlbWVudGF0aW9uLlxuICAgICAgdGhpcy5fYWRkVG9DdXJyZW50T2JqZWN0KE1hdGguZmxvb3IodmFsdWUpKTtcbiAgICB9XG5cbiAgICAvLyBTaW5jZSBKU09OIGRvZXNuJ3Qgc3VwcG9ydCBOYU4gYW5kIEluZmluaXR5LCB0aGVzZSB2YWx1ZXNcbiAgICAvLyBhcmUgY29udmVydGVkIGhlcmUuXG4gICAgcHVibGljIFdyaXRlRmxvYXQodmFsdWU6IG51bWJlciB8IG51bGwpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRoaXMuU3RhcnROZXdPYmplY3QoZmFsc2UpO1xuICAgICAgaWYgKHZhbHVlID09IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSkge1xuICAgICAgICB0aGlzLl9hZGRUb0N1cnJlbnRPYmplY3QoMy40ZTM4KTtcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZKSB7XG4gICAgICAgIHRoaXMuX2FkZFRvQ3VycmVudE9iamVjdCgtMy40ZTM4KTtcbiAgICAgIH0gZWxzZSBpZiAoaXNOYU4odmFsdWUpKSB7XG4gICAgICAgIHRoaXMuX2FkZFRvQ3VycmVudE9iamVjdCgwLjApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYWRkVG9DdXJyZW50T2JqZWN0KHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgV3JpdGVOdWxsKCkge1xuICAgICAgdGhpcy5TdGFydE5ld09iamVjdChmYWxzZSk7XG4gICAgICB0aGlzLl9hZGRUb0N1cnJlbnRPYmplY3QobnVsbCk7XG4gICAgfVxuXG4gICAgLy8gUHJlcGFyZSBhIHN0cmluZyBiZWZvcmUgYWRkaW5nIGl0IHRvIHRoZSBjdXJyZW50IGNvbGxlY3Rpb24gaW5cbiAgICAvLyBXcml0ZVN0cmluZ0VuZCgpLiBUaGUgc3RyaW5nIHdpbGwgYmUgYSBjb25jYXRlbmF0aW9uIG9mIGFsbCB0aGVcbiAgICAvLyBzdHJpbmdzIHBhc3NlZCB0byBXcml0ZVN0cmluZ0lubmVyLlxuICAgIHB1YmxpYyBXcml0ZVN0cmluZ1N0YXJ0KCkge1xuICAgICAgdGhpcy5TdGFydE5ld09iamVjdChmYWxzZSk7XG4gICAgICB0aGlzLl9jdXJyZW50U3RyaW5nID0gXCJcIjtcbiAgICAgIHRoaXMuX3N0YXRlU3RhY2sucHVzaChcbiAgICAgICAgbmV3IFNpbXBsZUpzb24uV3JpdGVyLlN0YXRlRWxlbWVudChTaW1wbGVKc29uLldyaXRlci5TdGF0ZS5TdHJpbmcpXG4gICAgICApO1xuICAgIH1cblxuICAgIHB1YmxpYyBXcml0ZVN0cmluZ0VuZCgpIHtcbiAgICAgIHRoaXMuQXNzZXJ0KHRoaXMuc3RhdGUgPT0gU2ltcGxlSnNvbi5Xcml0ZXIuU3RhdGUuU3RyaW5nKTtcbiAgICAgIHRoaXMuX3N0YXRlU3RhY2sucG9wKCk7XG4gICAgICB0aGlzLl9hZGRUb0N1cnJlbnRPYmplY3QodGhpcy5fY3VycmVudFN0cmluZyk7XG4gICAgICB0aGlzLl9jdXJyZW50U3RyaW5nID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG4gICAgcHVibGljIFdyaXRlU3RyaW5nSW5uZXIoc3RyOiBzdHJpbmcgfCBudWxsLCBlc2NhcGU6IGJvb2xlYW4gPSB0cnVlKSB7XG4gICAgICB0aGlzLkFzc2VydCh0aGlzLnN0YXRlID09PSBTaW1wbGVKc29uLldyaXRlci5TdGF0ZS5TdHJpbmcpO1xuXG4gICAgICBpZiAoc3RyID09PSBudWxsKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJXYXJuaW5nOiB0cnlpbmcgdG8gd3JpdGUgYSBudWxsIHN0cmluZ1wiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9jdXJyZW50U3RyaW5nICs9IHN0cjtcbiAgICB9XG5cbiAgICAvLyBTZXJpYWxpc2UgdGhlIHJvb3Qgb2JqZWN0IGludG8gYSBKU09OIHN0cmluZy5cbiAgICBwdWJsaWMgdG9TdHJpbmcoKSB7XG4gICAgICBpZiAodGhpcy5fanNvbk9iamVjdCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMuX2pzb25PYmplY3QpO1xuICAgIH1cblxuICAgIC8vIFByZXBhcmUgdGhlIHN0YXRlIHN0YWNrIHdoZW4gYWRkaW5nIG5ldyBvYmplY3RzIC8gdmFsdWVzLlxuICAgIHByaXZhdGUgU3RhcnROZXdPYmplY3QoY29udGFpbmVyOiBib29sZWFuKSB7XG4gICAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuQXNzZXJ0KFxuICAgICAgICAgIHRoaXMuc3RhdGUgPT09IFNpbXBsZUpzb24uV3JpdGVyLlN0YXRlLk5vbmUgfHxcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPT09IFNpbXBsZUpzb24uV3JpdGVyLlN0YXRlLlByb3BlcnR5IHx8XG4gICAgICAgICAgICB0aGlzLnN0YXRlID09PSBTaW1wbGVKc29uLldyaXRlci5TdGF0ZS5BcnJheVxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5Bc3NlcnQoXG4gICAgICAgICAgdGhpcy5zdGF0ZSA9PT0gU2ltcGxlSnNvbi5Xcml0ZXIuU3RhdGUuUHJvcGVydHkgfHxcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPT09IFNpbXBsZUpzb24uV3JpdGVyLlN0YXRlLkFycmF5XG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTaW1wbGVKc29uLldyaXRlci5TdGF0ZS5Qcm9wZXJ0eSkge1xuICAgICAgICB0aGlzLkFzc2VydCh0aGlzLmNoaWxkQ291bnQgPT09IDApO1xuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuc3RhdGUgPT09IFNpbXBsZUpzb24uV3JpdGVyLlN0YXRlLkFycmF5IHx8XG4gICAgICAgIHRoaXMuc3RhdGUgPT09IFNpbXBsZUpzb24uV3JpdGVyLlN0YXRlLlByb3BlcnR5XG4gICAgICApIHtcbiAgICAgICAgdGhpcy5JbmNyZW1lbnRDaGlsZENvdW50KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVGhlc2UgZ2V0dGVycyBwZWVrIGFsbCB0aGUgZGlmZmVyZW50IHN0YWNrcy5cblxuICAgIHByaXZhdGUgZ2V0IHN0YXRlKCkge1xuICAgICAgaWYgKHRoaXMuX3N0YXRlU3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RhdGVTdGFja1t0aGlzLl9zdGF0ZVN0YWNrLmxlbmd0aCAtIDFdLnR5cGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gU2ltcGxlSnNvbi5Xcml0ZXIuU3RhdGUuTm9uZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBjaGlsZENvdW50KCkge1xuICAgICAgaWYgKHRoaXMuX3N0YXRlU3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RhdGVTdGFja1t0aGlzLl9zdGF0ZVN0YWNrLmxlbmd0aCAtIDFdLmNoaWxkQ291bnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBjdXJyZW50Q29sbGVjdGlvbigpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgbnVsbCB7XG4gICAgICBpZiAodGhpcy5fY29sbGVjdGlvblN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbGxlY3Rpb25TdGFja1t0aGlzLl9jb2xsZWN0aW9uU3RhY2subGVuZ3RoIC0gMV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIGdldCBjdXJyZW50UHJvcGVydHlOYW1lKCkge1xuICAgICAgaWYgKHRoaXMuX3Byb3BlcnR5TmFtZVN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb3BlcnR5TmFtZVN0YWNrW3RoaXMuX3Byb3BlcnR5TmFtZVN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBJbmNyZW1lbnRDaGlsZENvdW50KCkge1xuICAgICAgdGhpcy5Bc3NlcnQodGhpcy5fc3RhdGVTdGFjay5sZW5ndGggPiAwKTtcbiAgICAgIGxldCBjdXJyRWwgPSB0aGlzLl9zdGF0ZVN0YWNrLnBvcCgpITtcbiAgICAgIGN1cnJFbC5jaGlsZENvdW50Kys7XG4gICAgICB0aGlzLl9zdGF0ZVN0YWNrLnB1c2goY3VyckVsKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIEFzc2VydChjb25kaXRpb246IGJvb2xlYW4pIHtcbiAgICAgIGlmICghY29uZGl0aW9uKSB0aHJvdyBFcnJvcihcIkFzc2VydCBmYWlsZWQgd2hpbGUgd3JpdGluZyBKU09OXCIpO1xuICAgIH1cblxuICAgIC8vIFRoaXMgbWV0aG9kIGRpZCBub3QgZXhpc3QgaW4gdGhlIG9yaWdpbmFsIEMjIGNvZGUuIEl0IGFkZHNcbiAgICAvLyB0aGUgZ2l2ZW4gdmFsdWUgdG8gdGhlIGN1cnJlbnQgY29sbGVjdGlvbiAodXNlZCBieSBXcml0ZSBtZXRob2RzKS5cbiAgICBwcml2YXRlIF9hZGRUb0N1cnJlbnRPYmplY3QodmFsdWU6IG51bWJlciB8IHN0cmluZyB8IGJvb2xlYW4gfCBudWxsKSB7XG4gICAgICB0aGlzLkFzc2VydCh0aGlzLmN1cnJlbnRDb2xsZWN0aW9uICE9PSBudWxsKTtcbiAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTaW1wbGVKc29uLldyaXRlci5TdGF0ZS5BcnJheSkge1xuICAgICAgICB0aGlzLkFzc2VydChBcnJheS5pc0FycmF5KHRoaXMuY3VycmVudENvbGxlY3Rpb24pKTtcbiAgICAgICAgKHRoaXMuY3VycmVudENvbGxlY3Rpb24gYXMgYW55W10pLnB1c2godmFsdWUpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlID09PSBTaW1wbGVKc29uLldyaXRlci5TdGF0ZS5Qcm9wZXJ0eSkge1xuICAgICAgICB0aGlzLkFzc2VydCghQXJyYXkuaXNBcnJheSh0aGlzLmN1cnJlbnRDb2xsZWN0aW9uKSk7XG4gICAgICAgIHRoaXMuQXNzZXJ0KHRoaXMuY3VycmVudFByb3BlcnR5TmFtZSAhPT0gbnVsbCk7XG4gICAgICAgICh0aGlzLmN1cnJlbnRDb2xsZWN0aW9uIGFzIFJlY29yZDxzdHJpbmcsIGFueT4pW1xuICAgICAgICAgIHRoaXMuY3VycmVudFByb3BlcnR5TmFtZSFcbiAgICAgICAgXSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9wcm9wZXJ0eU5hbWVTdGFjay5wb3AoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJbiBhZGRpdGlvbiB0byBgX3N0YXRlU3RhY2tgIHByZXNlbnQgaW4gdGhlIG9yaWdpbmFsIGNvZGUsXG4gICAgLy8gdGhpcyBpbXBsZW1lbnRhdGlvbiBvZiBTaW1wbGVKc29uIHVzZSB0d28gb3RoZXIgc3RhY2tzIGFuZCB0d29cbiAgICAvLyB0ZW1wb3JhcnkgdmFyaWFibGVzIGhvbGRpbmcgdGhlIGN1cnJlbnQgY29udGV4dC5cblxuICAgIC8vIFVzZWQgdG8ga2VlcCB0cmFjayBvZiB0aGUgY3VycmVudCBwcm9wZXJ0eSBuYW1lIGJlaW5nIGJ1aWx0XG4gICAgLy8gd2l0aCBgV3JpdGVQcm9wZXJ0eU5hbWVTdGFydGAsIGBXcml0ZVByb3BlcnR5TmFtZUlubmVyYCBhbmRcbiAgICAvLyBgV3JpdGVQcm9wZXJ0eU5hbWVFbmRgLlxuICAgIHByaXZhdGUgX2N1cnJlbnRQcm9wZXJ0eU5hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gICAgLy8gVXNlZCB0byBrZWVwIHRyYWNrIG9mIHRoZSBjdXJyZW50IHN0cmluZyB2YWx1ZSBiZWluZyBidWlsdFxuICAgIC8vIHdpdGggYFdyaXRlU3RyaW5nU3RhcnRgLCBgV3JpdGVTdHJpbmdJbm5lcmAgYW5kXG4gICAgLy8gYFdyaXRlU3RyaW5nRW5kYC5cbiAgICBwcml2YXRlIF9jdXJyZW50U3RyaW5nOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAgIHByaXZhdGUgX3N0YXRlU3RhY2s6IFNpbXBsZUpzb24uV3JpdGVyLlN0YXRlRWxlbWVudFtdID0gW107XG5cbiAgICAvLyBLZWVwIHRyYWNrIG9mIHRoZSBjdXJyZW50IGNvbGxlY3Rpb24gYmVpbmcgYnVpbHQgKGVpdGhlciBhbiBhcnJheVxuICAgIC8vIG9yIGFuIG9iamVjdCkuIEZvciBpbnN0YW5jZSwgYXQgdGhlICc/JyBzdGVwIGR1cmluZyB0aGUgaGlhcmNoeVxuICAgIC8vIGNyZWF0aW9uLCB0aGlzIGhpZXJhcmNoeTpcbiAgICAvLyBbMywge2E6IFtiLCA/XX1dIHdpbGwgaGF2ZSB0aGlzIGNvcnJlc3BvbmRpbmcgc3RhY2s6XG4gICAgLy8gKGJvdHRvbSkgW0FycmF5LCBPYmplY3QsIEFycmF5XSAodG9wKVxuICAgIHByaXZhdGUgX2NvbGxlY3Rpb25TdGFjazogQXJyYXk8YW55W10gfCBSZWNvcmQ8c3RyaW5nLCBhbnk+PiA9IFtdO1xuXG4gICAgLy8gS2VlcCB0cmFjayBvZiB0aGUgY3VycmVudCBwcm9wZXJ0eSBiZWluZyBhc3NpZ25lZC4gRm9yIGluc3RhbmNlLCBhdFxuICAgIC8vIHRoZSAnPycgc3RlcCBkdXJpbmcgdGhlIGhpYXJjaHkgY3JlYXRpb24sIHRoaXMgaGllcmFyY2h5OlxuICAgIC8vIFszLCB7YTogW2IsIHtjOiA/fV19XSB3aWxsIGhhdmUgdGhpcyBjb3JyZXNwb25kaW5nIHN0YWNrOlxuICAgIC8vIChib3R0b20pIFthLCBjXSAodG9wKVxuICAgIHByaXZhdGUgX3Byb3BlcnR5TmFtZVN0YWNrOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gT2JqZWN0IGNvbnRhaW5pbmcgdGhlIGVudGlyZSBoaWVhcmNoeS5cbiAgICBwcml2YXRlIF9qc29uT2JqZWN0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgYW55W10gfCBudWxsID0gbnVsbDtcbiAgfVxuXG4gIGV4cG9ydCBuYW1lc3BhY2UgV3JpdGVyIHtcbiAgICBleHBvcnQgZW51bSBTdGF0ZSB7XG4gICAgICBOb25lLFxuICAgICAgT2JqZWN0LFxuICAgICAgQXJyYXksXG4gICAgICBQcm9wZXJ0eSxcbiAgICAgIFByb3BlcnR5TmFtZSxcbiAgICAgIFN0cmluZyxcbiAgICB9XG5cbiAgICBleHBvcnQgY2xhc3MgU3RhdGVFbGVtZW50IHtcbiAgICAgIHB1YmxpYyB0eXBlOiBTaW1wbGVKc29uLldyaXRlci5TdGF0ZSA9IFNpbXBsZUpzb24uV3JpdGVyLlN0YXRlLk5vbmU7XG4gICAgICBwdWJsaWMgY2hpbGRDb3VudDogbnVtYmVyID0gMDtcblxuICAgICAgY29uc3RydWN0b3IodHlwZTogU2ltcGxlSnNvbi5Xcml0ZXIuU3RhdGUpIHtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IENhbGxTdGFjayB9IGZyb20gXCIuL0NhbGxTdGFja1wiO1xuaW1wb3J0IHsgQ2hvaWNlIH0gZnJvbSBcIi4vQ2hvaWNlXCI7XG5pbXBvcnQgeyBKc29uU2VyaWFsaXNhdGlvbiB9IGZyb20gXCIuL0pzb25TZXJpYWxpc2F0aW9uXCI7XG5pbXBvcnQgeyBJbmtPYmplY3QgfSBmcm9tIFwiLi9PYmplY3RcIjtcbmltcG9ydCB7IFNpbXBsZUpzb24gfSBmcm9tIFwiLi9TaW1wbGVKc29uXCI7XG5pbXBvcnQgeyBTdG9yeSB9IGZyb20gXCIuL1N0b3J5XCI7XG5pbXBvcnQgeyB0aHJvd051bGxFeGNlcHRpb24gfSBmcm9tIFwiLi9OdWxsRXhjZXB0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBGbG93IHtcbiAgcHVibGljIG5hbWU6IHN0cmluZztcbiAgcHVibGljIGNhbGxTdGFjazogQ2FsbFN0YWNrO1xuICBwdWJsaWMgb3V0cHV0U3RyZWFtOiBJbmtPYmplY3RbXTtcbiAgcHVibGljIGN1cnJlbnRDaG9pY2VzOiBDaG9pY2VbXTtcblxuICBjb25zdHJ1Y3RvcihuYW1lOiBTdHJpbmcsIHN0b3J5OiBTdG9yeSk7XG4gIGNvbnN0cnVjdG9yKG5hbWU6IFN0cmluZywgc3Rvcnk6IFN0b3J5LCBqT2JqZWN0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgbGV0IG5hbWUgPSBhcmd1bWVudHNbMF0gYXMgc3RyaW5nO1xuICAgIGxldCBzdG9yeSA9IGFyZ3VtZW50c1sxXSBhcyBTdG9yeTtcblxuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5jYWxsU3RhY2sgPSBuZXcgQ2FsbFN0YWNrKHN0b3J5KTtcblxuICAgIGlmIChhcmd1bWVudHNbMl0pIHtcbiAgICAgIGxldCBqT2JqZWN0ID0gYXJndW1lbnRzWzJdIGFzIFJlY29yZDxzdHJpbmcsIGFueT47XG5cbiAgICAgIHRoaXMuY2FsbFN0YWNrLlNldEpzb25Ub2tlbihqT2JqZWN0W1wiY2FsbHN0YWNrXCJdLCBzdG9yeSk7XG4gICAgICB0aGlzLm91dHB1dFN0cmVhbSA9IEpzb25TZXJpYWxpc2F0aW9uLkpBcnJheVRvUnVudGltZU9iakxpc3QoXG4gICAgICAgIGpPYmplY3RbXCJvdXRwdXRTdHJlYW1cIl1cbiAgICAgICk7XG4gICAgICB0aGlzLmN1cnJlbnRDaG9pY2VzID0gSnNvblNlcmlhbGlzYXRpb24uSkFycmF5VG9SdW50aW1lT2JqTGlzdChcbiAgICAgICAgak9iamVjdFtcImN1cnJlbnRDaG9pY2VzXCJdXG4gICAgICApIGFzIENob2ljZVtdO1xuXG4gICAgICBsZXQgakNob2ljZVRocmVhZHNPYmogPSBqT2JqZWN0W1wiY2hvaWNlVGhyZWFkc1wiXTtcbiAgICAgIGlmICh0eXBlb2YgakNob2ljZVRocmVhZHNPYmogIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgdGhpcy5Mb2FkRmxvd0Nob2ljZVRocmVhZHMoakNob2ljZVRocmVhZHNPYmosIHN0b3J5KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vdXRwdXRTdHJlYW0gPSBbXTtcbiAgICAgIHRoaXMuY3VycmVudENob2ljZXMgPSBbXTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgV3JpdGVKc29uKHdyaXRlcjogU2ltcGxlSnNvbi5Xcml0ZXIpIHtcbiAgICB3cml0ZXIuV3JpdGVPYmplY3RTdGFydCgpO1xuXG4gICAgd3JpdGVyLldyaXRlUHJvcGVydHkoXCJjYWxsc3RhY2tcIiwgKHcpID0+IHRoaXMuY2FsbFN0YWNrLldyaXRlSnNvbih3KSk7XG4gICAgd3JpdGVyLldyaXRlUHJvcGVydHkoXCJvdXRwdXRTdHJlYW1cIiwgKHcpID0+XG4gICAgICBKc29uU2VyaWFsaXNhdGlvbi5Xcml0ZUxpc3RSdW50aW1lT2Jqcyh3LCB0aGlzLm91dHB1dFN0cmVhbSlcbiAgICApO1xuXG4gICAgbGV0IGhhc0Nob2ljZVRocmVhZHMgPSBmYWxzZTtcbiAgICBmb3IgKGxldCBjIG9mIHRoaXMuY3VycmVudENob2ljZXMpIHtcbiAgICAgIGlmIChjLnRocmVhZEF0R2VuZXJhdGlvbiA9PT0gbnVsbClcbiAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcImMudGhyZWFkQXRHZW5lcmF0aW9uXCIpO1xuXG4gICAgICBjLm9yaWdpbmFsVGhyZWFkSW5kZXggPSBjLnRocmVhZEF0R2VuZXJhdGlvbi50aHJlYWRJbmRleDtcblxuICAgICAgaWYgKHRoaXMuY2FsbFN0YWNrLlRocmVhZFdpdGhJbmRleChjLm9yaWdpbmFsVGhyZWFkSW5kZXgpID09PSBudWxsKSB7XG4gICAgICAgIGlmICghaGFzQ2hvaWNlVGhyZWFkcykge1xuICAgICAgICAgIGhhc0Nob2ljZVRocmVhZHMgPSB0cnVlO1xuICAgICAgICAgIHdyaXRlci5Xcml0ZVByb3BlcnR5U3RhcnQoXCJjaG9pY2VUaHJlYWRzXCIpO1xuICAgICAgICAgIHdyaXRlci5Xcml0ZU9iamVjdFN0YXJ0KCk7XG4gICAgICAgIH1cblxuICAgICAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eVN0YXJ0KGMub3JpZ2luYWxUaHJlYWRJbmRleCk7XG4gICAgICAgIGMudGhyZWFkQXRHZW5lcmF0aW9uLldyaXRlSnNvbih3cml0ZXIpO1xuICAgICAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eUVuZCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChoYXNDaG9pY2VUaHJlYWRzKSB7XG4gICAgICB3cml0ZXIuV3JpdGVPYmplY3RFbmQoKTtcbiAgICAgIHdyaXRlci5Xcml0ZVByb3BlcnR5RW5kKCk7XG4gICAgfVxuXG4gICAgd3JpdGVyLldyaXRlUHJvcGVydHkoXCJjdXJyZW50Q2hvaWNlc1wiLCAodykgPT4ge1xuICAgICAgdy5Xcml0ZUFycmF5U3RhcnQoKTtcbiAgICAgIGZvciAobGV0IGMgb2YgdGhpcy5jdXJyZW50Q2hvaWNlcykge1xuICAgICAgICBKc29uU2VyaWFsaXNhdGlvbi5Xcml0ZUNob2ljZSh3LCBjKTtcbiAgICAgIH1cbiAgICAgIHcuV3JpdGVBcnJheUVuZCgpO1xuICAgIH0pO1xuXG4gICAgd3JpdGVyLldyaXRlT2JqZWN0RW5kKCk7XG4gIH1cblxuICBwdWJsaWMgTG9hZEZsb3dDaG9pY2VUaHJlYWRzKFxuICAgIGpDaG9pY2VUaHJlYWRzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICAgIHN0b3J5OiBTdG9yeVxuICApIHtcbiAgICBmb3IgKGxldCBjaG9pY2Ugb2YgdGhpcy5jdXJyZW50Q2hvaWNlcykge1xuICAgICAgbGV0IGZvdW5kQWN0aXZlVGhyZWFkID0gdGhpcy5jYWxsU3RhY2suVGhyZWFkV2l0aEluZGV4KFxuICAgICAgICBjaG9pY2Uub3JpZ2luYWxUaHJlYWRJbmRleFxuICAgICAgKTtcbiAgICAgIGlmIChmb3VuZEFjdGl2ZVRocmVhZCAhPT0gbnVsbCkge1xuICAgICAgICBjaG9pY2UudGhyZWFkQXRHZW5lcmF0aW9uID0gZm91bmRBY3RpdmVUaHJlYWQuQ29weSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGpTYXZlZENob2ljZVRocmVhZCA9XG4gICAgICAgICAgakNob2ljZVRocmVhZHNbYCR7Y2hvaWNlLm9yaWdpbmFsVGhyZWFkSW5kZXh9YF07XG4gICAgICAgIGNob2ljZS50aHJlYWRBdEdlbmVyYXRpb24gPSBuZXcgQ2FsbFN0YWNrLlRocmVhZChcbiAgICAgICAgICBqU2F2ZWRDaG9pY2VUaHJlYWQsXG4gICAgICAgICAgc3RvcnlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IENhbGxTdGFjayB9IGZyb20gXCIuL0NhbGxTdGFja1wiO1xuaW1wb3J0IHsgVmFyaWFibGVzU3RhdGUgfSBmcm9tIFwiLi9WYXJpYWJsZXNTdGF0ZVwiO1xuaW1wb3J0IHsgVmFsdWVUeXBlLCBWYWx1ZSwgU3RyaW5nVmFsdWUsIExpc3RWYWx1ZSB9IGZyb20gXCIuL1ZhbHVlXCI7XG5pbXBvcnQgeyBQdXNoUG9wVHlwZSB9IGZyb20gXCIuL1B1c2hQb3BcIjtcbmltcG9ydCB7IFRhZyB9IGZyb20gXCIuL1RhZ1wiO1xuaW1wb3J0IHsgR2x1ZSB9IGZyb20gXCIuL0dsdWVcIjtcbmltcG9ydCB7IFBhdGggfSBmcm9tIFwiLi9QYXRoXCI7XG5pbXBvcnQgeyBDb250cm9sQ29tbWFuZCB9IGZyb20gXCIuL0NvbnRyb2xDb21tYW5kXCI7XG5pbXBvcnQgeyBTdHJpbmdCdWlsZGVyIH0gZnJvbSBcIi4vU3RyaW5nQnVpbGRlclwiO1xuaW1wb3J0IHsgSnNvblNlcmlhbGlzYXRpb24gfSBmcm9tIFwiLi9Kc29uU2VyaWFsaXNhdGlvblwiO1xuaW1wb3J0IHsgUFJORyB9IGZyb20gXCIuL1BSTkdcIjtcbmltcG9ydCB7IFZvaWQgfSBmcm9tIFwiLi9Wb2lkXCI7XG5pbXBvcnQgeyBQb2ludGVyIH0gZnJvbSBcIi4vUG9pbnRlclwiO1xuaW1wb3J0IHsgdHJ5R2V0VmFsdWVGcm9tTWFwIH0gZnJvbSBcIi4vVHJ5R2V0UmVzdWx0XCI7XG5pbXBvcnQgeyBDaG9pY2UgfSBmcm9tIFwiLi9DaG9pY2VcIjtcbmltcG9ydCB7IGFzT3JOdWxsLCBhc09yVGhyb3dzLCBudWxsSWZVbmRlZmluZWQgfSBmcm9tIFwiLi9UeXBlQXNzZXJ0aW9uXCI7XG5pbXBvcnQgeyBEZWJ1ZyB9IGZyb20gXCIuL0RlYnVnXCI7XG5pbXBvcnQgeyBDb250YWluZXIgfSBmcm9tIFwiLi9Db250YWluZXJcIjtcbmltcG9ydCB7IElua09iamVjdCB9IGZyb20gXCIuL09iamVjdFwiO1xuaW1wb3J0IHsgdGhyb3dOdWxsRXhjZXB0aW9uIH0gZnJvbSBcIi4vTnVsbEV4Y2VwdGlvblwiO1xuaW1wb3J0IHsgU3RvcnkgfSBmcm9tIFwiLi9TdG9yeVwiO1xuaW1wb3J0IHsgU3RhdGVQYXRjaCB9IGZyb20gXCIuL1N0YXRlUGF0Y2hcIjtcbmltcG9ydCB7IFNpbXBsZUpzb24gfSBmcm9tIFwiLi9TaW1wbGVKc29uXCI7XG5pbXBvcnQgeyBGbG93IH0gZnJvbSBcIi4vRmxvd1wiO1xuaW1wb3J0IHsgSW5rTGlzdCB9IGZyb20gXCIuL0lua0xpc3RcIjtcblxuZXhwb3J0IGNsYXNzIFN0b3J5U3RhdGUge1xuICAvLyBCYWNrd2FyZCBjb21wYXRpYmxlIGNoYW5nZXMgc2luY2Ugdjg6XG4gIC8vIHYxMDogZHluYW1pYyB0YWdzXG4gIC8vIHY5OiAgbXVsdGktZmxvd3NcbiAgcHVibGljIHJlYWRvbmx5IGtJbmtTYXZlU3RhdGVWZXJzaW9uID0gMTA7XG4gIHB1YmxpYyByZWFkb25seSBrTWluQ29tcGF0aWJsZUxvYWRWZXJzaW9uID0gODtcblxuICBwdWJsaWMgb25EaWRMb2FkU3RhdGU6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnNcbiAgcHVibGljIFRvSnNvbihpbmRlbnRlZDogYm9vbGVhbiA9IGZhbHNlKSB7XG4gICAgbGV0IHdyaXRlciA9IG5ldyBTaW1wbGVKc29uLldyaXRlcigpO1xuICAgIHRoaXMuV3JpdGVKc29uKHdyaXRlcik7XG4gICAgcmV0dXJuIHdyaXRlci50b1N0cmluZygpO1xuICB9XG4gIHB1YmxpYyB0b0pzb24oaW5kZW50ZWQ6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIHJldHVybiB0aGlzLlRvSnNvbihpbmRlbnRlZCk7XG4gIH1cblxuICBwdWJsaWMgTG9hZEpzb24oanNvbjogc3RyaW5nKSB7XG4gICAgbGV0IGpPYmplY3QgPSBTaW1wbGVKc29uLlRleHRUb0RpY3Rpb25hcnkoanNvbik7XG4gICAgdGhpcy5Mb2FkSnNvbk9iaihqT2JqZWN0KTtcbiAgICBpZiAodGhpcy5vbkRpZExvYWRTdGF0ZSAhPT0gbnVsbCkgdGhpcy5vbkRpZExvYWRTdGF0ZSgpO1xuICB9XG5cbiAgcHVibGljIFZpc2l0Q291bnRBdFBhdGhTdHJpbmcocGF0aFN0cmluZzogc3RyaW5nKSB7XG4gICAgbGV0IHZpc2l0Q291bnRPdXQ7XG5cbiAgICBpZiAodGhpcy5fcGF0Y2ggIT09IG51bGwpIHtcbiAgICAgIGxldCBjb250YWluZXIgPSB0aGlzLnN0b3J5LkNvbnRlbnRBdFBhdGgobmV3IFBhdGgocGF0aFN0cmluZykpLmNvbnRhaW5lcjtcbiAgICAgIGlmIChjb250YWluZXIgPT09IG51bGwpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbnRlbnQgYXQgcGF0aCBub3QgZm91bmQ6IFwiICsgcGF0aFN0cmluZyk7XG5cbiAgICAgIHZpc2l0Q291bnRPdXQgPSB0aGlzLl9wYXRjaC5UcnlHZXRWaXNpdENvdW50KGNvbnRhaW5lciwgMCk7XG4gICAgICBpZiAodmlzaXRDb3VudE91dC5leGlzdHMpIHJldHVybiB2aXNpdENvdW50T3V0LnJlc3VsdDtcbiAgICB9XG5cbiAgICB2aXNpdENvdW50T3V0ID0gdHJ5R2V0VmFsdWVGcm9tTWFwKHRoaXMuX3Zpc2l0Q291bnRzLCBwYXRoU3RyaW5nLCBudWxsKTtcbiAgICBpZiAodmlzaXRDb3VudE91dC5leGlzdHMpIHJldHVybiB2aXNpdENvdW50T3V0LnJlc3VsdDtcblxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcHVibGljIFZpc2l0Q291bnRGb3JDb250YWluZXIoY29udGFpbmVyOiBDb250YWluZXIgfCBudWxsKTogbnVtYmVyIHtcbiAgICBpZiAoY29udGFpbmVyID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwiY29udGFpbmVyXCIpO1xuICAgIH1cbiAgICBpZiAoIWNvbnRhaW5lci52aXNpdHNTaG91bGRCZUNvdW50ZWQpIHtcbiAgICAgIHRoaXMuc3RvcnkuRXJyb3IoXG4gICAgICAgIFwiUmVhZCBjb3VudCBmb3IgdGFyZ2V0IChcIiArXG4gICAgICAgICAgY29udGFpbmVyLm5hbWUgK1xuICAgICAgICAgIFwiIC0gb24gXCIgK1xuICAgICAgICAgIGNvbnRhaW5lci5kZWJ1Z01ldGFkYXRhICtcbiAgICAgICAgICBcIikgdW5rbm93bi4gVGhlIHN0b3J5IG1heSBuZWVkIHRvIGJlIGNvbXBpbGVkIHdpdGggY291bnRBbGxWaXNpdHMgZmxhZyAoLWMpLlwiXG4gICAgICApO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3BhdGNoICE9PSBudWxsKSB7XG4gICAgICBsZXQgY291bnQgPSB0aGlzLl9wYXRjaC5UcnlHZXRWaXNpdENvdW50KGNvbnRhaW5lciwgMCk7XG4gICAgICBpZiAoY291bnQuZXhpc3RzKSB7XG4gICAgICAgIHJldHVybiBjb3VudC5yZXN1bHQhO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBjb250YWluZXJQYXRoU3RyID0gY29udGFpbmVyLnBhdGgudG9TdHJpbmcoKTtcbiAgICBsZXQgY291bnQyID0gdHJ5R2V0VmFsdWVGcm9tTWFwKHRoaXMuX3Zpc2l0Q291bnRzLCBjb250YWluZXJQYXRoU3RyLCBudWxsKTtcbiAgICBpZiAoY291bnQyLmV4aXN0cykge1xuICAgICAgcmV0dXJuIGNvdW50Mi5yZXN1bHQhO1xuICAgIH1cblxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcHVibGljIEluY3JlbWVudFZpc2l0Q291bnRGb3JDb250YWluZXIoY29udGFpbmVyOiBDb250YWluZXIpIHtcbiAgICBpZiAodGhpcy5fcGF0Y2ggIT09IG51bGwpIHtcbiAgICAgIGxldCBjdXJyQ291bnQgPSB0aGlzLlZpc2l0Q291bnRGb3JDb250YWluZXIoY29udGFpbmVyKTtcbiAgICAgIGN1cnJDb3VudCsrO1xuICAgICAgdGhpcy5fcGF0Y2guU2V0VmlzaXRDb3VudChjb250YWluZXIsIGN1cnJDb3VudCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGNvbnRhaW5lclBhdGhTdHIgPSBjb250YWluZXIucGF0aC50b1N0cmluZygpO1xuICAgIGxldCBjb3VudCA9IHRyeUdldFZhbHVlRnJvbU1hcCh0aGlzLl92aXNpdENvdW50cywgY29udGFpbmVyUGF0aFN0ciwgbnVsbCk7XG4gICAgaWYgKGNvdW50LmV4aXN0cykge1xuICAgICAgdGhpcy5fdmlzaXRDb3VudHMuc2V0KGNvbnRhaW5lclBhdGhTdHIsIGNvdW50LnJlc3VsdCEgKyAxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fdmlzaXRDb3VudHMuc2V0KGNvbnRhaW5lclBhdGhTdHIsIDEpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBSZWNvcmRUdXJuSW5kZXhWaXNpdFRvQ29udGFpbmVyKGNvbnRhaW5lcjogQ29udGFpbmVyKSB7XG4gICAgaWYgKHRoaXMuX3BhdGNoICE9PSBudWxsKSB7XG4gICAgICB0aGlzLl9wYXRjaC5TZXRUdXJuSW5kZXgoY29udGFpbmVyLCB0aGlzLmN1cnJlbnRUdXJuSW5kZXgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBjb250YWluZXJQYXRoU3RyID0gY29udGFpbmVyLnBhdGgudG9TdHJpbmcoKTtcbiAgICB0aGlzLl90dXJuSW5kaWNlcy5zZXQoY29udGFpbmVyUGF0aFN0ciwgdGhpcy5jdXJyZW50VHVybkluZGV4KTtcbiAgfVxuXG4gIHB1YmxpYyBUdXJuc1NpbmNlRm9yQ29udGFpbmVyKGNvbnRhaW5lcjogQ29udGFpbmVyKSB7XG4gICAgaWYgKCFjb250YWluZXIudHVybkluZGV4U2hvdWxkQmVDb3VudGVkKSB7XG4gICAgICB0aGlzLnN0b3J5LkVycm9yKFxuICAgICAgICBcIlRVUk5TX1NJTkNFKCkgZm9yIHRhcmdldCAoXCIgK1xuICAgICAgICAgIGNvbnRhaW5lci5uYW1lICtcbiAgICAgICAgICBcIiAtIG9uIFwiICtcbiAgICAgICAgICBjb250YWluZXIuZGVidWdNZXRhZGF0YSArXG4gICAgICAgICAgXCIpIHVua25vd24uIFRoZSBzdG9yeSBtYXkgbmVlZCB0byBiZSBjb21waWxlZCB3aXRoIGNvdW50QWxsVmlzaXRzIGZsYWcgKC1jKS5cIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fcGF0Y2ggIT09IG51bGwpIHtcbiAgICAgIGxldCBpbmRleCA9IHRoaXMuX3BhdGNoLlRyeUdldFR1cm5JbmRleChjb250YWluZXIsIDApO1xuICAgICAgaWYgKGluZGV4LmV4aXN0cykge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VHVybkluZGV4IC0gaW5kZXgucmVzdWx0ITtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgY29udGFpbmVyUGF0aFN0ciA9IGNvbnRhaW5lci5wYXRoLnRvU3RyaW5nKCk7XG4gICAgbGV0IGluZGV4MiA9IHRyeUdldFZhbHVlRnJvbU1hcCh0aGlzLl90dXJuSW5kaWNlcywgY29udGFpbmVyUGF0aFN0ciwgMCk7XG4gICAgaWYgKGluZGV4Mi5leGlzdHMpIHtcbiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRUdXJuSW5kZXggLSBpbmRleDIucmVzdWx0ITtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgfVxuXG4gIGdldCBjYWxsc3RhY2tEZXB0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5jYWxsU3RhY2suZGVwdGg7XG4gIH1cblxuICBnZXQgb3V0cHV0U3RyZWFtKCkge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50Rmxvdy5vdXRwdXRTdHJlYW07XG4gIH1cblxuICBnZXQgY3VycmVudENob2ljZXMoKSB7XG4gICAgLy8gSWYgd2UgY2FuIGNvbnRpbnVlIGdlbmVyYXRpbmcgdGV4dCBjb250ZW50IHJhdGhlciB0aGFuIGNob2ljZXMsXG4gICAgLy8gdGhlbiB3ZSByZWZsZWN0IHRoZSBjaG9pY2UgbGlzdCBhcyBiZWluZyBlbXB0eSwgc2luY2UgY2hvaWNlc1xuICAgIC8vIHNob3VsZCBhbHdheXMgY29tZSBhdCB0aGUgZW5kLlxuICAgIGlmICh0aGlzLmNhbkNvbnRpbnVlKSByZXR1cm4gW107XG4gICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRGbG93LmN1cnJlbnRDaG9pY2VzO1xuICB9XG5cbiAgZ2V0IGdlbmVyYXRlZENob2ljZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRGbG93LmN1cnJlbnRDaG9pY2VzO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRFcnJvcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRFcnJvcnM7XG4gIH1cbiAgcHJpdmF0ZSBfY3VycmVudEVycm9yczogc3RyaW5nW10gfCBudWxsID0gbnVsbDtcblxuICBnZXQgY3VycmVudFdhcm5pbmdzKCkge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50V2FybmluZ3M7XG4gIH1cbiAgcHJpdmF0ZSBfY3VycmVudFdhcm5pbmdzOiBzdHJpbmdbXSB8IG51bGwgPSBudWxsO1xuXG4gIGdldCB2YXJpYWJsZXNTdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdmFyaWFibGVzU3RhdGU7XG4gIH1cbiAgc2V0IHZhcmlhYmxlc1N0YXRlKHZhbHVlKSB7XG4gICAgdGhpcy5fdmFyaWFibGVzU3RhdGUgPSB2YWx1ZTtcbiAgfVxuICBwcml2YXRlIF92YXJpYWJsZXNTdGF0ZTogVmFyaWFibGVzU3RhdGU7XG5cbiAgZ2V0IGNhbGxTdGFjaygpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudEZsb3cuY2FsbFN0YWNrO1xuICB9XG5cbiAgZ2V0IGV2YWx1YXRpb25TdGFjaygpIHtcbiAgICByZXR1cm4gdGhpcy5fZXZhbHVhdGlvblN0YWNrO1xuICB9XG4gIHByaXZhdGUgX2V2YWx1YXRpb25TdGFjazogSW5rT2JqZWN0W107XG5cbiAgcHVibGljIGRpdmVydGVkUG9pbnRlcjogUG9pbnRlciA9IFBvaW50ZXIuTnVsbDtcblxuICBnZXQgY3VycmVudFR1cm5JbmRleCgpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudFR1cm5JbmRleDtcbiAgfVxuICBzZXQgY3VycmVudFR1cm5JbmRleCh2YWx1ZSkge1xuICAgIHRoaXMuX2N1cnJlbnRUdXJuSW5kZXggPSB2YWx1ZTtcbiAgfVxuICBwcml2YXRlIF9jdXJyZW50VHVybkluZGV4OiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyBzdG9yeVNlZWQ6IG51bWJlciA9IDA7XG4gIHB1YmxpYyBwcmV2aW91c1JhbmRvbTogbnVtYmVyID0gMDtcbiAgcHVibGljIGRpZFNhZmVFeGl0OiBib29sZWFuID0gZmFsc2U7XG5cbiAgcHVibGljIHN0b3J5OiBTdG9yeTtcblxuICBnZXQgY3VycmVudFBhdGhTdHJpbmcoKSB7XG4gICAgbGV0IHBvaW50ZXIgPSB0aGlzLmN1cnJlbnRQb2ludGVyO1xuICAgIGlmIChwb2ludGVyLmlzTnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwb2ludGVyLnBhdGggPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcInBvaW50ZXIucGF0aFwiKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwb2ludGVyLnBhdGgudG9TdHJpbmcoKTtcbiAgICB9XG4gIH1cblxuICBnZXQgcHJldmlvdXNQYXRoU3RyaW5nKCkge1xuICAgIGxldCBwb2ludGVyID0gdGhpcy5wcmV2aW91c1BvaW50ZXI7XG4gICAgaWYgKHBvaW50ZXIuaXNOdWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHBvaW50ZXIucGF0aCA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwicHJldmlvdXNQb2ludGVyLnBhdGhcIik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcG9pbnRlci5wYXRoLnRvU3RyaW5nKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGN1cnJlbnRQb2ludGVyKCkge1xuICAgIHJldHVybiB0aGlzLmNhbGxTdGFjay5jdXJyZW50RWxlbWVudC5jdXJyZW50UG9pbnRlci5jb3B5KCk7XG4gIH1cblxuICBzZXQgY3VycmVudFBvaW50ZXIodmFsdWUpIHtcbiAgICB0aGlzLmNhbGxTdGFjay5jdXJyZW50RWxlbWVudC5jdXJyZW50UG9pbnRlciA9IHZhbHVlLmNvcHkoKTtcbiAgfVxuXG4gIGdldCBwcmV2aW91c1BvaW50ZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FsbFN0YWNrLmN1cnJlbnRUaHJlYWQucHJldmlvdXNQb2ludGVyLmNvcHkoKTtcbiAgfVxuXG4gIHNldCBwcmV2aW91c1BvaW50ZXIodmFsdWUpIHtcbiAgICB0aGlzLmNhbGxTdGFjay5jdXJyZW50VGhyZWFkLnByZXZpb3VzUG9pbnRlciA9IHZhbHVlLmNvcHkoKTtcbiAgfVxuXG4gIGdldCBjYW5Db250aW51ZSgpIHtcbiAgICByZXR1cm4gIXRoaXMuY3VycmVudFBvaW50ZXIuaXNOdWxsICYmICF0aGlzLmhhc0Vycm9yO1xuICB9XG5cbiAgZ2V0IGhhc0Vycm9yKCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRFcnJvcnMgIT0gbnVsbCAmJiB0aGlzLmN1cnJlbnRFcnJvcnMubGVuZ3RoID4gMDtcbiAgfVxuXG4gIGdldCBoYXNXYXJuaW5nKCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRXYXJuaW5ncyAhPSBudWxsICYmIHRoaXMuY3VycmVudFdhcm5pbmdzLmxlbmd0aCA+IDA7XG4gIH1cblxuICBnZXQgY3VycmVudFRleHQoKSB7XG4gICAgaWYgKHRoaXMuX291dHB1dFN0cmVhbVRleHREaXJ0eSkge1xuICAgICAgbGV0IHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcblxuICAgICAgbGV0IGluVGFnOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICAgIGZvciAobGV0IG91dHB1dE9iaiBvZiB0aGlzLm91dHB1dFN0cmVhbSkge1xuICAgICAgICAvLyB2YXIgdGV4dENvbnRlbnQgPSBvdXRwdXRPYmogYXMgU3RyaW5nVmFsdWU7XG4gICAgICAgIGxldCB0ZXh0Q29udGVudCA9IGFzT3JOdWxsKG91dHB1dE9iaiwgU3RyaW5nVmFsdWUpO1xuICAgICAgICBpZiAoIWluVGFnICYmIHRleHRDb250ZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgc2IuQXBwZW5kKHRleHRDb250ZW50LnZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgY29udHJvbENvbW1hbmQgPSBhc09yTnVsbChvdXRwdXRPYmosIENvbnRyb2xDb21tYW5kKTtcbiAgICAgICAgICBpZiAoY29udHJvbENvbW1hbmQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgY29udHJvbENvbW1hbmQuY29tbWFuZFR5cGUgPT0gQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuQmVnaW5UYWdcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBpblRhZyA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgICBjb250cm9sQ29tbWFuZC5jb21tYW5kVHlwZSA9PSBDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5FbmRUYWdcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBpblRhZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLl9jdXJyZW50VGV4dCA9IHRoaXMuQ2xlYW5PdXRwdXRXaGl0ZXNwYWNlKHNiLnRvU3RyaW5nKCkpO1xuICAgICAgdGhpcy5fb3V0cHV0U3RyZWFtVGV4dERpcnR5ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRUZXh0O1xuICB9XG4gIHByaXZhdGUgX2N1cnJlbnRUZXh0OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICBwdWJsaWMgQ2xlYW5PdXRwdXRXaGl0ZXNwYWNlKHN0cjogc3RyaW5nKSB7XG4gICAgbGV0IHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcblxuICAgIGxldCBjdXJyZW50V2hpdGVzcGFjZVN0YXJ0ID0gLTE7XG4gICAgbGV0IHN0YXJ0T2ZMaW5lID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsZXQgYyA9IHN0ci5jaGFyQXQoaSk7XG5cbiAgICAgIGxldCBpc0lubGluZVdoaXRlc3BhY2UgPSBjID09IFwiIFwiIHx8IGMgPT0gXCJcXHRcIjtcblxuICAgICAgaWYgKGlzSW5saW5lV2hpdGVzcGFjZSAmJiBjdXJyZW50V2hpdGVzcGFjZVN0YXJ0ID09IC0xKVxuICAgICAgICBjdXJyZW50V2hpdGVzcGFjZVN0YXJ0ID0gaTtcblxuICAgICAgaWYgKCFpc0lubGluZVdoaXRlc3BhY2UpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGMgIT0gXCJcXG5cIiAmJlxuICAgICAgICAgIGN1cnJlbnRXaGl0ZXNwYWNlU3RhcnQgPiAwICYmXG4gICAgICAgICAgY3VycmVudFdoaXRlc3BhY2VTdGFydCAhPSBzdGFydE9mTGluZVxuICAgICAgICApIHtcbiAgICAgICAgICBzYi5BcHBlbmQoXCIgXCIpO1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnRXaGl0ZXNwYWNlU3RhcnQgPSAtMTtcbiAgICAgIH1cblxuICAgICAgaWYgKGMgPT0gXCJcXG5cIikgc3RhcnRPZkxpbmUgPSBpICsgMTtcblxuICAgICAgaWYgKCFpc0lubGluZVdoaXRlc3BhY2UpIHNiLkFwcGVuZChjKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2IudG9TdHJpbmcoKTtcbiAgfVxuXG4gIGdldCBjdXJyZW50VGFncygpIHtcbiAgICBpZiAodGhpcy5fb3V0cHV0U3RyZWFtVGFnc0RpcnR5KSB7XG4gICAgICB0aGlzLl9jdXJyZW50VGFncyA9IFtdO1xuICAgICAgbGV0IGluVGFnOiBib29sZWFuID0gZmFsc2U7XG4gICAgICBsZXQgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xuXG4gICAgICBmb3IgKGxldCBvdXRwdXRPYmogb2YgdGhpcy5vdXRwdXRTdHJlYW0pIHtcbiAgICAgICAgbGV0IGNvbnRyb2xDb21tYW5kID0gYXNPck51bGwob3V0cHV0T2JqLCBDb250cm9sQ29tbWFuZCk7XG4gICAgICAgIGlmIChjb250cm9sQ29tbWFuZCAhPSBudWxsKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29udHJvbENvbW1hbmQuY29tbWFuZFR5cGUgPT0gQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuQmVnaW5UYWdcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGlmIChpblRhZyAmJiBzYi5MZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGxldCB0eHQgPSB0aGlzLkNsZWFuT3V0cHV0V2hpdGVzcGFjZShzYi50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgdGhpcy5fY3VycmVudFRhZ3MucHVzaCh0eHQpO1xuICAgICAgICAgICAgICBzYi5DbGVhcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5UYWcgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICBjb250cm9sQ29tbWFuZC5jb21tYW5kVHlwZSA9PSBDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5FbmRUYWdcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGlmIChzYi5MZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGxldCB0eHQgPSB0aGlzLkNsZWFuT3V0cHV0V2hpdGVzcGFjZShzYi50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgdGhpcy5fY3VycmVudFRhZ3MucHVzaCh0eHQpO1xuICAgICAgICAgICAgICBzYi5DbGVhcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5UYWcgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoaW5UYWcpIHtcbiAgICAgICAgICBsZXQgc3RyVmFsID0gYXNPck51bGwob3V0cHV0T2JqLCBTdHJpbmdWYWx1ZSk7XG4gICAgICAgICAgaWYgKHN0clZhbCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgc2IuQXBwZW5kKHN0clZhbC52YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxldCB0YWcgPSBhc09yTnVsbChvdXRwdXRPYmosIFRhZyk7XG4gICAgICAgICAgaWYgKHRhZyAhPSBudWxsICYmIHRhZy50ZXh0ICE9IG51bGwgJiYgdGFnLnRleHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fY3VycmVudFRhZ3MucHVzaCh0YWcudGV4dCk7IC8vIHRhZy50ZXh0IGhhcyB3aGl0ZXNwYWUgYWxyZWFkeSBjbGVhbmVkXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzYi5MZW5ndGggPiAwKSB7XG4gICAgICAgIGxldCB0eHQgPSB0aGlzLkNsZWFuT3V0cHV0V2hpdGVzcGFjZShzYi50b1N0cmluZygpKTtcbiAgICAgICAgdGhpcy5fY3VycmVudFRhZ3MucHVzaCh0eHQpO1xuICAgICAgICBzYi5DbGVhcigpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9vdXRwdXRTdHJlYW1UYWdzRGlydHkgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fY3VycmVudFRhZ3M7XG4gIH1cbiAgcHJpdmF0ZSBfY3VycmVudFRhZ3M6IHN0cmluZ1tdIHwgbnVsbCA9IG51bGw7XG5cbiAgZ2V0IGN1cnJlbnRGbG93TmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudEZsb3cubmFtZTtcbiAgfVxuXG4gIGdldCBjdXJyZW50Rmxvd0lzRGVmYXVsdEZsb3coKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRGbG93Lm5hbWUgPT0gdGhpcy5rRGVmYXVsdEZsb3dOYW1lO1xuICB9XG5cbiAgZ2V0IGFsaXZlRmxvd05hbWVzKCkge1xuICAgIGlmICh0aGlzLl9hbGl2ZUZsb3dOYW1lc0RpcnR5KSB7XG4gICAgICB0aGlzLl9hbGl2ZUZsb3dOYW1lcyA9IFtdO1xuXG4gICAgICBpZiAodGhpcy5fbmFtZWRGbG93cyAhPSBudWxsKSB7XG4gICAgICAgIGZvciAobGV0IGZsb3dOYW1lIG9mIHRoaXMuX25hbWVkRmxvd3Mua2V5cygpKSB7XG4gICAgICAgICAgaWYgKGZsb3dOYW1lICE9IHRoaXMua0RlZmF1bHRGbG93TmFtZSkge1xuICAgICAgICAgICAgdGhpcy5fYWxpdmVGbG93TmFtZXMucHVzaChmbG93TmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX2FsaXZlRmxvd05hbWVzRGlydHkgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fYWxpdmVGbG93TmFtZXM7XG4gIH1cblxuICBnZXQgaW5FeHByZXNzaW9uRXZhbHVhdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5jYWxsU3RhY2suY3VycmVudEVsZW1lbnQuaW5FeHByZXNzaW9uRXZhbHVhdGlvbjtcbiAgfVxuICBzZXQgaW5FeHByZXNzaW9uRXZhbHVhdGlvbih2YWx1ZSkge1xuICAgIHRoaXMuY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50LmluRXhwcmVzc2lvbkV2YWx1YXRpb24gPSB2YWx1ZTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHN0b3J5OiBTdG9yeSkge1xuICAgIHRoaXMuc3RvcnkgPSBzdG9yeTtcblxuICAgIHRoaXMuX2N1cnJlbnRGbG93ID0gbmV3IEZsb3codGhpcy5rRGVmYXVsdEZsb3dOYW1lLCBzdG9yeSk7XG4gICAgdGhpcy5PdXRwdXRTdHJlYW1EaXJ0eSgpO1xuXG4gICAgdGhpcy5fYWxpdmVGbG93TmFtZXNEaXJ0eSA9IHRydWU7XG4gICAgdGhpcy5fZXZhbHVhdGlvblN0YWNrID0gW107XG5cbiAgICB0aGlzLl92YXJpYWJsZXNTdGF0ZSA9IG5ldyBWYXJpYWJsZXNTdGF0ZShcbiAgICAgIHRoaXMuY2FsbFN0YWNrLFxuICAgICAgc3RvcnkubGlzdERlZmluaXRpb25zXG4gICAgKTtcblxuICAgIHRoaXMuX3Zpc2l0Q291bnRzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuX3R1cm5JbmRpY2VzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuY3VycmVudFR1cm5JbmRleCA9IC0xO1xuXG4gICAgbGV0IHRpbWVTZWVkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgdGhpcy5zdG9yeVNlZWQgPSBuZXcgUFJORyh0aW1lU2VlZCkubmV4dCgpICUgMTAwO1xuICAgIHRoaXMucHJldmlvdXNSYW5kb20gPSAwO1xuXG4gICAgdGhpcy5Hb1RvU3RhcnQoKTtcbiAgfVxuXG4gIHB1YmxpYyBHb1RvU3RhcnQoKSB7XG4gICAgdGhpcy5jYWxsU3RhY2suY3VycmVudEVsZW1lbnQuY3VycmVudFBvaW50ZXIgPSBQb2ludGVyLlN0YXJ0T2YoXG4gICAgICB0aGlzLnN0b3J5Lm1haW5Db250ZW50Q29udGFpbmVyXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBTd2l0Y2hGbG93X0ludGVybmFsKGZsb3dOYW1lOiBzdHJpbmcgfCBudWxsKSB7XG4gICAgaWYgKGZsb3dOYW1lID09PSBudWxsKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBwYXNzIGEgbm9uLW51bGwgc3RyaW5nIHRvIFN0b3J5LlN3aXRjaEZsb3dcIik7XG5cbiAgICBpZiAodGhpcy5fbmFtZWRGbG93cyA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5fbmFtZWRGbG93cyA9IG5ldyBNYXAoKTtcbiAgICAgIHRoaXMuX25hbWVkRmxvd3Muc2V0KHRoaXMua0RlZmF1bHRGbG93TmFtZSwgdGhpcy5fY3VycmVudEZsb3cpO1xuICAgIH1cblxuICAgIGlmIChmbG93TmFtZSA9PT0gdGhpcy5fY3VycmVudEZsb3cubmFtZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBmbG93OiBGbG93O1xuICAgIGxldCBjb250ZW50ID0gdHJ5R2V0VmFsdWVGcm9tTWFwKHRoaXMuX25hbWVkRmxvd3MsIGZsb3dOYW1lLCBudWxsKTtcbiAgICBpZiAoY29udGVudC5leGlzdHMpIHtcbiAgICAgIGZsb3cgPSBjb250ZW50LnJlc3VsdCE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZsb3cgPSBuZXcgRmxvdyhmbG93TmFtZSwgdGhpcy5zdG9yeSk7XG4gICAgICB0aGlzLl9uYW1lZEZsb3dzLnNldChmbG93TmFtZSwgZmxvdyk7XG4gICAgICB0aGlzLl9hbGl2ZUZsb3dOYW1lc0RpcnR5ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLl9jdXJyZW50RmxvdyA9IGZsb3c7XG4gICAgdGhpcy52YXJpYWJsZXNTdGF0ZS5jYWxsU3RhY2sgPSB0aGlzLl9jdXJyZW50Rmxvdy5jYWxsU3RhY2s7XG5cbiAgICB0aGlzLk91dHB1dFN0cmVhbURpcnR5KCk7XG4gIH1cblxuICBwdWJsaWMgU3dpdGNoVG9EZWZhdWx0Rmxvd19JbnRlcm5hbCgpIHtcbiAgICBpZiAodGhpcy5fbmFtZWRGbG93cyA9PT0gbnVsbCkgcmV0dXJuO1xuICAgIHRoaXMuU3dpdGNoRmxvd19JbnRlcm5hbCh0aGlzLmtEZWZhdWx0Rmxvd05hbWUpO1xuICB9XG5cbiAgcHVibGljIFJlbW92ZUZsb3dfSW50ZXJuYWwoZmxvd05hbWU6IHN0cmluZyB8IG51bGwpIHtcbiAgICBpZiAoZmxvd05hbWUgPT09IG51bGwpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHBhc3MgYSBub24tbnVsbCBzdHJpbmcgdG8gU3RvcnkuRGVzdHJveUZsb3dcIik7XG4gICAgaWYgKGZsb3dOYW1lID09PSB0aGlzLmtEZWZhdWx0Rmxvd05hbWUpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZGVzdHJveSBkZWZhdWx0IGZsb3dcIik7XG5cbiAgICBpZiAodGhpcy5fY3VycmVudEZsb3cubmFtZSA9PT0gZmxvd05hbWUpIHtcbiAgICAgIHRoaXMuU3dpdGNoVG9EZWZhdWx0Rmxvd19JbnRlcm5hbCgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9uYW1lZEZsb3dzID09PSBudWxsKVxuICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcInRoaXMuX25hbWVkRmxvd3NcIik7XG4gICAgdGhpcy5fbmFtZWRGbG93cy5kZWxldGUoZmxvd05hbWUpO1xuICAgIHRoaXMuX2FsaXZlRmxvd05hbWVzRGlydHkgPSB0cnVlO1xuICB9XG5cbiAgcHVibGljIENvcHlBbmRTdGFydFBhdGNoaW5nKGZvckJhY2tncm91bmRTYXZlOiBib29sZWFuKSB7XG4gICAgbGV0IGNvcHkgPSBuZXcgU3RvcnlTdGF0ZSh0aGlzLnN0b3J5KTtcblxuICAgIGNvcHkuX3BhdGNoID0gbmV3IFN0YXRlUGF0Y2godGhpcy5fcGF0Y2gpO1xuXG4gICAgY29weS5fY3VycmVudEZsb3cubmFtZSA9IHRoaXMuX2N1cnJlbnRGbG93Lm5hbWU7XG4gICAgY29weS5fY3VycmVudEZsb3cuY2FsbFN0YWNrID0gbmV3IENhbGxTdGFjayh0aGlzLl9jdXJyZW50Rmxvdy5jYWxsU3RhY2spO1xuICAgIGNvcHkuX2N1cnJlbnRGbG93Lm91dHB1dFN0cmVhbS5wdXNoKC4uLnRoaXMuX2N1cnJlbnRGbG93Lm91dHB1dFN0cmVhbSk7XG4gICAgY29weS5PdXRwdXRTdHJlYW1EaXJ0eSgpO1xuXG4gICAgLy8gV2hlbiBiYWNrZ3JvdW5kIHNhdmluZyB3ZSBuZWVkIHRvIG1ha2UgY29waWVzIG9mIGNob2ljZXMgc2luY2UgdGhleSBlYWNoIGhhdmVcbiAgICAvLyBhIHNuYXBzaG90IG9mIHRoZSB0aHJlYWQgYXQgdGhlIHRpbWUgb2YgZ2VuZXJhdGlvbiBzaW5jZSB0aGUgZ2FtZSBjb3VsZCBwcm9ncmVzc1xuICAgIC8vIHNpZ25pZmljYW50bHkgYW5kIHRocmVhZHMgbW9kaWZpZWQgZHVyaW5nIHRoZSBzYXZlIHByb2Nlc3MuXG4gICAgLy8gSG93ZXZlciwgd2hlbiBkb2luZyBpbnRlcm5hbCBzYXZpbmcgYW5kIHJlc3RvcmluZyBvZiBzbmFwc2hvdHMgdGhpcyBpc24ndCBhbiBpc3N1ZSxcbiAgICAvLyBhbmQgd2UgY2FuIHNpbXBseSByZWYtY29weSB0aGUgY2hvaWNlcyB3aXRoIHRoZWlyIGV4aXN0aW5nIHRocmVhZHMuXG5cbiAgICBpZiAoZm9yQmFja2dyb3VuZFNhdmUpIHtcbiAgICAgIGZvciAobGV0IGNob2ljZSBvZiB0aGlzLl9jdXJyZW50Rmxvdy5jdXJyZW50Q2hvaWNlcykge1xuICAgICAgICBjb3B5Ll9jdXJyZW50Rmxvdy5jdXJyZW50Q2hvaWNlcy5wdXNoKGNob2ljZS5DbG9uZSgpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29weS5fY3VycmVudEZsb3cuY3VycmVudENob2ljZXMucHVzaChcbiAgICAgICAgLi4udGhpcy5fY3VycmVudEZsb3cuY3VycmVudENob2ljZXNcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX25hbWVkRmxvd3MgIT09IG51bGwpIHtcbiAgICAgIGNvcHkuX25hbWVkRmxvd3MgPSBuZXcgTWFwKCk7XG4gICAgICBmb3IgKGxldCBbbmFtZWRGbG93S2V5LCBuYW1lZEZsb3dWYWx1ZV0gb2YgdGhpcy5fbmFtZWRGbG93cykge1xuICAgICAgICBjb3B5Ll9uYW1lZEZsb3dzLnNldChuYW1lZEZsb3dLZXksIG5hbWVkRmxvd1ZhbHVlKTtcbiAgICAgICAgY29weS5fYWxpdmVGbG93TmFtZXNEaXJ0eSA9IHRydWU7XG4gICAgICB9XG4gICAgICBjb3B5Ll9uYW1lZEZsb3dzLnNldCh0aGlzLl9jdXJyZW50Rmxvdy5uYW1lLCBjb3B5Ll9jdXJyZW50Rmxvdyk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaGFzRXJyb3IpIHtcbiAgICAgIGNvcHkuX2N1cnJlbnRFcnJvcnMgPSBbXTtcbiAgICAgIGNvcHkuX2N1cnJlbnRFcnJvcnMucHVzaCguLi4odGhpcy5jdXJyZW50RXJyb3JzIHx8IFtdKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaGFzV2FybmluZykge1xuICAgICAgY29weS5fY3VycmVudFdhcm5pbmdzID0gW107XG4gICAgICBjb3B5Ll9jdXJyZW50V2FybmluZ3MucHVzaCguLi4odGhpcy5jdXJyZW50V2FybmluZ3MgfHwgW10pKTtcbiAgICB9XG5cbiAgICBjb3B5LnZhcmlhYmxlc1N0YXRlID0gdGhpcy52YXJpYWJsZXNTdGF0ZTtcbiAgICBjb3B5LnZhcmlhYmxlc1N0YXRlLmNhbGxTdGFjayA9IGNvcHkuY2FsbFN0YWNrO1xuICAgIGNvcHkudmFyaWFibGVzU3RhdGUucGF0Y2ggPSBjb3B5Ll9wYXRjaDtcblxuICAgIGNvcHkuZXZhbHVhdGlvblN0YWNrLnB1c2goLi4udGhpcy5ldmFsdWF0aW9uU3RhY2spO1xuXG4gICAgaWYgKCF0aGlzLmRpdmVydGVkUG9pbnRlci5pc051bGwpXG4gICAgICBjb3B5LmRpdmVydGVkUG9pbnRlciA9IHRoaXMuZGl2ZXJ0ZWRQb2ludGVyLmNvcHkoKTtcblxuICAgIGNvcHkucHJldmlvdXNQb2ludGVyID0gdGhpcy5wcmV2aW91c1BvaW50ZXIuY29weSgpO1xuXG4gICAgY29weS5fdmlzaXRDb3VudHMgPSB0aGlzLl92aXNpdENvdW50cztcbiAgICBjb3B5Ll90dXJuSW5kaWNlcyA9IHRoaXMuX3R1cm5JbmRpY2VzO1xuXG4gICAgY29weS5jdXJyZW50VHVybkluZGV4ID0gdGhpcy5jdXJyZW50VHVybkluZGV4O1xuICAgIGNvcHkuc3RvcnlTZWVkID0gdGhpcy5zdG9yeVNlZWQ7XG4gICAgY29weS5wcmV2aW91c1JhbmRvbSA9IHRoaXMucHJldmlvdXNSYW5kb207XG5cbiAgICBjb3B5LmRpZFNhZmVFeGl0ID0gdGhpcy5kaWRTYWZlRXhpdDtcblxuICAgIHJldHVybiBjb3B5O1xuICB9XG5cbiAgcHVibGljIFJlc3RvcmVBZnRlclBhdGNoKCkge1xuICAgIHRoaXMudmFyaWFibGVzU3RhdGUuY2FsbFN0YWNrID0gdGhpcy5jYWxsU3RhY2s7XG4gICAgdGhpcy52YXJpYWJsZXNTdGF0ZS5wYXRjaCA9IHRoaXMuX3BhdGNoO1xuICB9XG5cbiAgcHVibGljIEFwcGx5QW55UGF0Y2goKSB7XG4gICAgaWYgKHRoaXMuX3BhdGNoID09PSBudWxsKSByZXR1cm47XG5cbiAgICB0aGlzLnZhcmlhYmxlc1N0YXRlLkFwcGx5UGF0Y2goKTtcblxuICAgIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiB0aGlzLl9wYXRjaC52aXNpdENvdW50cylcbiAgICAgIHRoaXMuQXBwbHlDb3VudENoYW5nZXMoa2V5LCB2YWx1ZSwgdHJ1ZSk7XG5cbiAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgdGhpcy5fcGF0Y2gudHVybkluZGljZXMpXG4gICAgICB0aGlzLkFwcGx5Q291bnRDaGFuZ2VzKGtleSwgdmFsdWUsIGZhbHNlKTtcblxuICAgIHRoaXMuX3BhdGNoID0gbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBBcHBseUNvdW50Q2hhbmdlcyhcbiAgICBjb250YWluZXI6IENvbnRhaW5lcixcbiAgICBuZXdDb3VudDogbnVtYmVyLFxuICAgIGlzVmlzaXQ6IGJvb2xlYW5cbiAgKSB7XG4gICAgbGV0IGNvdW50cyA9IGlzVmlzaXQgPyB0aGlzLl92aXNpdENvdW50cyA6IHRoaXMuX3R1cm5JbmRpY2VzO1xuICAgIGNvdW50cy5zZXQoY29udGFpbmVyLnBhdGgudG9TdHJpbmcoKSwgbmV3Q291bnQpO1xuICB9XG5cbiAgcHVibGljIFdyaXRlSnNvbih3cml0ZXI6IFNpbXBsZUpzb24uV3JpdGVyKSB7XG4gICAgd3JpdGVyLldyaXRlT2JqZWN0U3RhcnQoKTtcblxuICAgIHdyaXRlci5Xcml0ZVByb3BlcnR5U3RhcnQoXCJmbG93c1wiKTtcbiAgICB3cml0ZXIuV3JpdGVPYmplY3RTdGFydCgpO1xuXG4gICAgLy8gTk9URTogTmV2ZXIgcGFzcyBgV3JpdGVKc29uYCBkaXJlY3RseSBhcyBhbiBhcmd1bWVudCB0byBgV3JpdGVQcm9wZXJ0eWAuXG4gICAgLy8gQ2FsbCBpdCBpbnNpZGUgYSBmdW5jdGlvbiB0byBtYWtlIHN1cmUgYHRoaXNgIGlzIGNvcnJlY3RseSBib3VuZFxuICAgIC8vIGFuZCBwYXNzZWQgZG93biB0aGUgY2FsbCBoaWVyYXJjaHkuXG5cbiAgICBpZiAodGhpcy5fbmFtZWRGbG93cyAhPT0gbnVsbCkge1xuICAgICAgZm9yIChsZXQgW25hbWVkRmxvd0tleSwgbmFtZWRGbG93VmFsdWVdIG9mIHRoaXMuX25hbWVkRmxvd3MpIHtcbiAgICAgICAgd3JpdGVyLldyaXRlUHJvcGVydHkobmFtZWRGbG93S2V5LCAodykgPT4gbmFtZWRGbG93VmFsdWUuV3JpdGVKc29uKHcpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgd3JpdGVyLldyaXRlUHJvcGVydHkodGhpcy5fY3VycmVudEZsb3cubmFtZSwgKHcpID0+XG4gICAgICAgIHRoaXMuX2N1cnJlbnRGbG93LldyaXRlSnNvbih3KVxuICAgICAgKTtcbiAgICB9XG5cbiAgICB3cml0ZXIuV3JpdGVPYmplY3RFbmQoKTtcbiAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eUVuZCgpO1xuXG4gICAgd3JpdGVyLldyaXRlUHJvcGVydHkoXCJjdXJyZW50Rmxvd05hbWVcIiwgdGhpcy5fY3VycmVudEZsb3cubmFtZSk7XG5cbiAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eShcInZhcmlhYmxlc1N0YXRlXCIsICh3KSA9PlxuICAgICAgdGhpcy52YXJpYWJsZXNTdGF0ZS5Xcml0ZUpzb24odylcbiAgICApO1xuXG4gICAgd3JpdGVyLldyaXRlUHJvcGVydHkoXCJldmFsU3RhY2tcIiwgKHcpID0+XG4gICAgICBKc29uU2VyaWFsaXNhdGlvbi5Xcml0ZUxpc3RSdW50aW1lT2Jqcyh3LCB0aGlzLmV2YWx1YXRpb25TdGFjaylcbiAgICApO1xuXG4gICAgaWYgKCF0aGlzLmRpdmVydGVkUG9pbnRlci5pc051bGwpIHtcbiAgICAgIGlmICh0aGlzLmRpdmVydGVkUG9pbnRlci5wYXRoID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJkaXZlcnRlZFBvaW50ZXJcIik7XG4gICAgICB9XG4gICAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eShcbiAgICAgICAgXCJjdXJyZW50RGl2ZXJ0VGFyZ2V0XCIsXG4gICAgICAgIHRoaXMuZGl2ZXJ0ZWRQb2ludGVyLnBhdGguY29tcG9uZW50c1N0cmluZ1xuICAgICAgKTtcbiAgICB9XG5cbiAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eShcInZpc2l0Q291bnRzXCIsICh3KSA9PlxuICAgICAgSnNvblNlcmlhbGlzYXRpb24uV3JpdGVJbnREaWN0aW9uYXJ5KHcsIHRoaXMuX3Zpc2l0Q291bnRzKVxuICAgICk7XG4gICAgd3JpdGVyLldyaXRlUHJvcGVydHkoXCJ0dXJuSW5kaWNlc1wiLCAodykgPT5cbiAgICAgIEpzb25TZXJpYWxpc2F0aW9uLldyaXRlSW50RGljdGlvbmFyeSh3LCB0aGlzLl90dXJuSW5kaWNlcylcbiAgICApO1xuXG4gICAgd3JpdGVyLldyaXRlSW50UHJvcGVydHkoXCJ0dXJuSWR4XCIsIHRoaXMuY3VycmVudFR1cm5JbmRleCk7XG4gICAgd3JpdGVyLldyaXRlSW50UHJvcGVydHkoXCJzdG9yeVNlZWRcIiwgdGhpcy5zdG9yeVNlZWQpO1xuICAgIHdyaXRlci5Xcml0ZUludFByb3BlcnR5KFwicHJldmlvdXNSYW5kb21cIiwgdGhpcy5wcmV2aW91c1JhbmRvbSk7XG5cbiAgICB3cml0ZXIuV3JpdGVJbnRQcm9wZXJ0eShcImlua1NhdmVWZXJzaW9uXCIsIHRoaXMua0lua1NhdmVTdGF0ZVZlcnNpb24pO1xuXG4gICAgd3JpdGVyLldyaXRlSW50UHJvcGVydHkoXCJpbmtGb3JtYXRWZXJzaW9uXCIsIFN0b3J5Lmlua1ZlcnNpb25DdXJyZW50KTtcblxuICAgIHdyaXRlci5Xcml0ZU9iamVjdEVuZCgpO1xuICB9XG5cbiAgcHVibGljIExvYWRKc29uT2JqKHZhbHVlOiBSZWNvcmQ8c3RyaW5nLCBhbnk+KSB7XG4gICAgbGV0IGpPYmplY3QgPSB2YWx1ZTtcblxuICAgIGxldCBqU2F2ZVZlcnNpb24gPSBqT2JqZWN0W1wiaW5rU2F2ZVZlcnNpb25cIl07XG4gICAgaWYgKGpTYXZlVmVyc2lvbiA9PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbmsgc2F2ZSBmb3JtYXQgaW5jb3JyZWN0LCBjYW4ndCBsb2FkLlwiKTtcbiAgICB9IGVsc2UgaWYgKHBhcnNlSW50KGpTYXZlVmVyc2lvbikgPCB0aGlzLmtNaW5Db21wYXRpYmxlTG9hZFZlcnNpb24pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJJbmsgc2F2ZSBmb3JtYXQgaXNuJ3QgY29tcGF0aWJsZSB3aXRoIHRoZSBjdXJyZW50IHZlcnNpb24gKHNhdyAnXCIgK1xuICAgICAgICAgIGpTYXZlVmVyc2lvbiArXG4gICAgICAgICAgXCInLCBidXQgbWluaW11bSBpcyBcIiArXG4gICAgICAgICAgdGhpcy5rTWluQ29tcGF0aWJsZUxvYWRWZXJzaW9uICtcbiAgICAgICAgICBcIiksIHNvIGNhbid0IGxvYWQuXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgbGV0IGZsb3dzT2JqID0gak9iamVjdFtcImZsb3dzXCJdO1xuICAgIGlmIChmbG93c09iaiAhPSBudWxsKSB7XG4gICAgICBsZXQgZmxvd3NPYmpEaWN0ID0gZmxvd3NPYmogYXMgUmVjb3JkPHN0cmluZywgYW55PjtcblxuICAgICAgLy8gU2luZ2xlIGRlZmF1bHQgZmxvd1xuICAgICAgaWYgKE9iamVjdC5rZXlzKGZsb3dzT2JqRGljdCkubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHRoaXMuX25hbWVkRmxvd3MgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl9uYW1lZEZsb3dzID09PSBudWxsKSB7XG4gICAgICAgIHRoaXMuX25hbWVkRmxvd3MgPSBuZXcgTWFwKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9uYW1lZEZsb3dzLmNsZWFyKCk7XG4gICAgICB9XG5cbiAgICAgIGxldCBmbG93c09iakRpY3RFbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoZmxvd3NPYmpEaWN0KTtcbiAgICAgIGZvciAobGV0IFtuYW1lZEZsb3dPYmpLZXksIG5hbWVkRmxvd09ialZhbHVlXSBvZiBmbG93c09iakRpY3RFbnRyaWVzKSB7XG4gICAgICAgIGxldCBuYW1lID0gbmFtZWRGbG93T2JqS2V5O1xuICAgICAgICBsZXQgZmxvd09iaiA9IG5hbWVkRmxvd09ialZhbHVlIGFzIFJlY29yZDxzdHJpbmcsIGFueT47XG5cbiAgICAgICAgbGV0IGZsb3cgPSBuZXcgRmxvdyhuYW1lLCB0aGlzLnN0b3J5LCBmbG93T2JqKTtcblxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoZmxvd3NPYmpEaWN0KS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICB0aGlzLl9jdXJyZW50RmxvdyA9IG5ldyBGbG93KG5hbWUsIHRoaXMuc3RvcnksIGZsb3dPYmopO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0aGlzLl9uYW1lZEZsb3dzID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcInRoaXMuX25hbWVkRmxvd3NcIik7XG4gICAgICAgICAgdGhpcy5fbmFtZWRGbG93cy5zZXQobmFtZSwgZmxvdyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX25hbWVkRmxvd3MgIT0gbnVsbCAmJiB0aGlzLl9uYW1lZEZsb3dzLnNpemUgPiAxKSB7XG4gICAgICAgIGxldCBjdXJyRmxvd05hbWUgPSBqT2JqZWN0W1wiY3VycmVudEZsb3dOYW1lXCJdIGFzIHN0cmluZztcbiAgICAgICAgLy8gQWRkaW5nIGEgYmFuZyBhdCB0aGUgZW5kLCBiZWNhdXNlIHdlJ3JlIHRydXN0aW5nIHRoZSBzYXZlLCBhc1xuICAgICAgICAvLyBkb25lIGluIHVwc3RyZWFtLiAgSWYgdGhlIHNhdmUgaXMgY29ycnVwdGVkLCB0aGUgZXhlY3V0aW9uXG4gICAgICAgIC8vIGlzIHVuZGVmaW5lZC5cbiAgICAgICAgdGhpcy5fY3VycmVudEZsb3cgPSB0aGlzLl9uYW1lZEZsb3dzLmdldChjdXJyRmxvd05hbWUpITtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbmFtZWRGbG93cyA9IG51bGw7XG4gICAgICB0aGlzLl9jdXJyZW50Rmxvdy5uYW1lID0gdGhpcy5rRGVmYXVsdEZsb3dOYW1lO1xuICAgICAgdGhpcy5fY3VycmVudEZsb3cuY2FsbFN0YWNrLlNldEpzb25Ub2tlbihcbiAgICAgICAgak9iamVjdFtcImNhbGxzdGFja1RocmVhZHNcIl0gYXMgUmVjb3JkPHN0cmluZywgYW55PixcbiAgICAgICAgdGhpcy5zdG9yeVxuICAgICAgKTtcbiAgICAgIHRoaXMuX2N1cnJlbnRGbG93Lm91dHB1dFN0cmVhbSA9IEpzb25TZXJpYWxpc2F0aW9uLkpBcnJheVRvUnVudGltZU9iakxpc3QoXG4gICAgICAgIGpPYmplY3RbXCJvdXRwdXRTdHJlYW1cIl0gYXMgYW55W11cbiAgICAgICk7XG4gICAgICB0aGlzLl9jdXJyZW50Rmxvdy5jdXJyZW50Q2hvaWNlcyA9XG4gICAgICAgIEpzb25TZXJpYWxpc2F0aW9uLkpBcnJheVRvUnVudGltZU9iakxpc3QoXG4gICAgICAgICAgak9iamVjdFtcImN1cnJlbnRDaG9pY2VzXCJdIGFzIGFueVtdXG4gICAgICAgICkgYXMgQ2hvaWNlW107XG5cbiAgICAgIGxldCBqQ2hvaWNlVGhyZWFkc09iaiA9IGpPYmplY3RbXCJjaG9pY2VUaHJlYWRzXCJdO1xuICAgICAgdGhpcy5fY3VycmVudEZsb3cuTG9hZEZsb3dDaG9pY2VUaHJlYWRzKGpDaG9pY2VUaHJlYWRzT2JqLCB0aGlzLnN0b3J5KTtcbiAgICB9XG5cbiAgICB0aGlzLk91dHB1dFN0cmVhbURpcnR5KCk7XG4gICAgdGhpcy5fYWxpdmVGbG93TmFtZXNEaXJ0eSA9IHRydWU7XG5cbiAgICB0aGlzLnZhcmlhYmxlc1N0YXRlLlNldEpzb25Ub2tlbihqT2JqZWN0W1widmFyaWFibGVzU3RhdGVcIl0pO1xuICAgIHRoaXMudmFyaWFibGVzU3RhdGUuY2FsbFN0YWNrID0gdGhpcy5fY3VycmVudEZsb3cuY2FsbFN0YWNrO1xuXG4gICAgdGhpcy5fZXZhbHVhdGlvblN0YWNrID0gSnNvblNlcmlhbGlzYXRpb24uSkFycmF5VG9SdW50aW1lT2JqTGlzdChcbiAgICAgIGpPYmplY3RbXCJldmFsU3RhY2tcIl1cbiAgICApO1xuXG4gICAgbGV0IGN1cnJlbnREaXZlcnRUYXJnZXRQYXRoID0gak9iamVjdFtcImN1cnJlbnREaXZlcnRUYXJnZXRcIl07XG4gICAgaWYgKGN1cnJlbnREaXZlcnRUYXJnZXRQYXRoICE9IG51bGwpIHtcbiAgICAgIGxldCBkaXZlcnRQYXRoID0gbmV3IFBhdGgoY3VycmVudERpdmVydFRhcmdldFBhdGgudG9TdHJpbmcoKSk7XG4gICAgICB0aGlzLmRpdmVydGVkUG9pbnRlciA9IHRoaXMuc3RvcnkuUG9pbnRlckF0UGF0aChkaXZlcnRQYXRoKTtcbiAgICB9XG5cbiAgICB0aGlzLl92aXNpdENvdW50cyA9IEpzb25TZXJpYWxpc2F0aW9uLkpPYmplY3RUb0ludERpY3Rpb25hcnkoXG4gICAgICBqT2JqZWN0W1widmlzaXRDb3VudHNcIl1cbiAgICApO1xuICAgIHRoaXMuX3R1cm5JbmRpY2VzID0gSnNvblNlcmlhbGlzYXRpb24uSk9iamVjdFRvSW50RGljdGlvbmFyeShcbiAgICAgIGpPYmplY3RbXCJ0dXJuSW5kaWNlc1wiXVxuICAgICk7XG4gICAgdGhpcy5jdXJyZW50VHVybkluZGV4ID0gcGFyc2VJbnQoak9iamVjdFtcInR1cm5JZHhcIl0pO1xuICAgIHRoaXMuc3RvcnlTZWVkID0gcGFyc2VJbnQoak9iamVjdFtcInN0b3J5U2VlZFwiXSk7XG4gICAgdGhpcy5wcmV2aW91c1JhbmRvbSA9IHBhcnNlSW50KGpPYmplY3RbXCJwcmV2aW91c1JhbmRvbVwiXSk7XG4gIH1cblxuICBwdWJsaWMgUmVzZXRFcnJvcnMoKSB7XG4gICAgdGhpcy5fY3VycmVudEVycm9ycyA9IG51bGw7XG4gICAgdGhpcy5fY3VycmVudFdhcm5pbmdzID0gbnVsbDtcbiAgfVxuICBwdWJsaWMgUmVzZXRPdXRwdXQob2JqczogSW5rT2JqZWN0W10gfCBudWxsID0gbnVsbCkge1xuICAgIHRoaXMub3V0cHV0U3RyZWFtLmxlbmd0aCA9IDA7XG4gICAgaWYgKG9ianMgIT09IG51bGwpIHRoaXMub3V0cHV0U3RyZWFtLnB1c2goLi4ub2Jqcyk7XG4gICAgdGhpcy5PdXRwdXRTdHJlYW1EaXJ0eSgpO1xuICB9XG5cbiAgcHVibGljIFB1c2hUb091dHB1dFN0cmVhbShvYmo6IElua09iamVjdCB8IG51bGwpIHtcbiAgICAvLyB2YXIgdGV4dCA9IG9iaiBhcyBTdHJpbmdWYWx1ZTtcbiAgICBsZXQgdGV4dCA9IGFzT3JOdWxsKG9iaiwgU3RyaW5nVmFsdWUpO1xuICAgIGlmICh0ZXh0ICE9PSBudWxsKSB7XG4gICAgICBsZXQgbGlzdFRleHQgPSB0aGlzLlRyeVNwbGl0dGluZ0hlYWRUYWlsV2hpdGVzcGFjZSh0ZXh0KTtcbiAgICAgIGlmIChsaXN0VGV4dCAhPT0gbnVsbCkge1xuICAgICAgICBmb3IgKGxldCB0ZXh0T2JqIG9mIGxpc3RUZXh0KSB7XG4gICAgICAgICAgdGhpcy5QdXNoVG9PdXRwdXRTdHJlYW1JbmRpdmlkdWFsKHRleHRPYmopO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuT3V0cHV0U3RyZWFtRGlydHkoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuUHVzaFRvT3V0cHV0U3RyZWFtSW5kaXZpZHVhbChvYmopO1xuICAgIHRoaXMuT3V0cHV0U3RyZWFtRGlydHkoKTtcbiAgfVxuXG4gIHB1YmxpYyBQb3BGcm9tT3V0cHV0U3RyZWFtKGNvdW50OiBudW1iZXIpIHtcbiAgICB0aGlzLm91dHB1dFN0cmVhbS5zcGxpY2UodGhpcy5vdXRwdXRTdHJlYW0ubGVuZ3RoIC0gY291bnQsIGNvdW50KTtcbiAgICB0aGlzLk91dHB1dFN0cmVhbURpcnR5KCk7XG4gIH1cblxuICBwdWJsaWMgVHJ5U3BsaXR0aW5nSGVhZFRhaWxXaGl0ZXNwYWNlKHNpbmdsZTogU3RyaW5nVmFsdWUpIHtcbiAgICBsZXQgc3RyID0gc2luZ2xlLnZhbHVlO1xuICAgIGlmIChzdHIgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJzaW5nbGUudmFsdWVcIik7XG4gICAgfVxuXG4gICAgbGV0IGhlYWRGaXJzdE5ld2xpbmVJZHggPSAtMTtcbiAgICBsZXQgaGVhZExhc3ROZXdsaW5lSWR4ID0gLTE7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBjID0gc3RyW2ldO1xuICAgICAgaWYgKGMgPT0gXCJcXG5cIikge1xuICAgICAgICBpZiAoaGVhZEZpcnN0TmV3bGluZUlkeCA9PSAtMSkgaGVhZEZpcnN0TmV3bGluZUlkeCA9IGk7XG4gICAgICAgIGhlYWRMYXN0TmV3bGluZUlkeCA9IGk7XG4gICAgICB9IGVsc2UgaWYgKGMgPT0gXCIgXCIgfHwgYyA9PSBcIlxcdFwiKSBjb250aW51ZTtcbiAgICAgIGVsc2UgYnJlYWs7XG4gICAgfVxuXG4gICAgbGV0IHRhaWxMYXN0TmV3bGluZUlkeCA9IC0xO1xuICAgIGxldCB0YWlsRmlyc3ROZXdsaW5lSWR4ID0gLTE7XG4gICAgZm9yIChsZXQgaSA9IHN0ci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgbGV0IGMgPSBzdHJbaV07XG4gICAgICBpZiAoYyA9PSBcIlxcblwiKSB7XG4gICAgICAgIGlmICh0YWlsTGFzdE5ld2xpbmVJZHggPT0gLTEpIHRhaWxMYXN0TmV3bGluZUlkeCA9IGk7XG4gICAgICAgIHRhaWxGaXJzdE5ld2xpbmVJZHggPSBpO1xuICAgICAgfSBlbHNlIGlmIChjID09IFwiIFwiIHx8IGMgPT0gXCJcXHRcIikgY29udGludWU7XG4gICAgICBlbHNlIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIE5vIHNwbGl0dGluZyB0byBiZSBkb25lP1xuICAgIGlmIChoZWFkRmlyc3ROZXdsaW5lSWR4ID09IC0xICYmIHRhaWxMYXN0TmV3bGluZUlkeCA9PSAtMSkgcmV0dXJuIG51bGw7XG5cbiAgICBsZXQgbGlzdFRleHRzOiBTdHJpbmdWYWx1ZVtdID0gW107XG4gICAgbGV0IGlubmVyU3RyU3RhcnQgPSAwO1xuICAgIGxldCBpbm5lclN0ckVuZCA9IHN0ci5sZW5ndGg7XG5cbiAgICBpZiAoaGVhZEZpcnN0TmV3bGluZUlkeCAhPSAtMSkge1xuICAgICAgaWYgKGhlYWRGaXJzdE5ld2xpbmVJZHggPiAwKSB7XG4gICAgICAgIGxldCBsZWFkaW5nU3BhY2VzID0gbmV3IFN0cmluZ1ZhbHVlKFxuICAgICAgICAgIHN0ci5zdWJzdHJpbmcoMCwgaGVhZEZpcnN0TmV3bGluZUlkeClcbiAgICAgICAgKTtcbiAgICAgICAgbGlzdFRleHRzLnB1c2gobGVhZGluZ1NwYWNlcyk7XG4gICAgICB9XG4gICAgICBsaXN0VGV4dHMucHVzaChuZXcgU3RyaW5nVmFsdWUoXCJcXG5cIikpO1xuICAgICAgaW5uZXJTdHJTdGFydCA9IGhlYWRMYXN0TmV3bGluZUlkeCArIDE7XG4gICAgfVxuXG4gICAgaWYgKHRhaWxMYXN0TmV3bGluZUlkeCAhPSAtMSkge1xuICAgICAgaW5uZXJTdHJFbmQgPSB0YWlsRmlyc3ROZXdsaW5lSWR4O1xuICAgIH1cblxuICAgIGlmIChpbm5lclN0ckVuZCA+IGlubmVyU3RyU3RhcnQpIHtcbiAgICAgIGxldCBpbm5lclN0clRleHQgPSBzdHIuc3Vic3RyaW5nKGlubmVyU3RyU3RhcnQsIGlubmVyU3RyRW5kKTtcbiAgICAgIGxpc3RUZXh0cy5wdXNoKG5ldyBTdHJpbmdWYWx1ZShpbm5lclN0clRleHQpKTtcbiAgICB9XG5cbiAgICBpZiAodGFpbExhc3ROZXdsaW5lSWR4ICE9IC0xICYmIHRhaWxGaXJzdE5ld2xpbmVJZHggPiBoZWFkTGFzdE5ld2xpbmVJZHgpIHtcbiAgICAgIGxpc3RUZXh0cy5wdXNoKG5ldyBTdHJpbmdWYWx1ZShcIlxcblwiKSk7XG4gICAgICBpZiAodGFpbExhc3ROZXdsaW5lSWR4IDwgc3RyLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgbGV0IG51bVNwYWNlcyA9IHN0ci5sZW5ndGggLSB0YWlsTGFzdE5ld2xpbmVJZHggLSAxO1xuICAgICAgICBsZXQgdHJhaWxpbmdTcGFjZXMgPSBuZXcgU3RyaW5nVmFsdWUoXG4gICAgICAgICAgc3RyLnN1YnN0cmluZyhcbiAgICAgICAgICAgIHRhaWxMYXN0TmV3bGluZUlkeCArIDEsXG4gICAgICAgICAgICB0YWlsTGFzdE5ld2xpbmVJZHggKyAxICsgbnVtU3BhY2VzXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgICBsaXN0VGV4dHMucHVzaCh0cmFpbGluZ1NwYWNlcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpc3RUZXh0cztcbiAgfVxuXG4gIHB1YmxpYyBQdXNoVG9PdXRwdXRTdHJlYW1JbmRpdmlkdWFsKG9iajogSW5rT2JqZWN0IHwgbnVsbCkge1xuICAgIGxldCBnbHVlID0gYXNPck51bGwob2JqLCBHbHVlKTtcbiAgICBsZXQgdGV4dCA9IGFzT3JOdWxsKG9iaiwgU3RyaW5nVmFsdWUpO1xuXG4gICAgbGV0IGluY2x1ZGVJbk91dHB1dCA9IHRydWU7XG5cbiAgICBpZiAoZ2x1ZSkge1xuICAgICAgdGhpcy5UcmltTmV3bGluZXNGcm9tT3V0cHV0U3RyZWFtKCk7XG4gICAgICBpbmNsdWRlSW5PdXRwdXQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAodGV4dCkge1xuICAgICAgbGV0IGZ1bmN0aW9uVHJpbUluZGV4ID0gLTE7XG4gICAgICBsZXQgY3VyckVsID0gdGhpcy5jYWxsU3RhY2suY3VycmVudEVsZW1lbnQ7XG4gICAgICBpZiAoY3VyckVsLnR5cGUgPT0gUHVzaFBvcFR5cGUuRnVuY3Rpb24pIHtcbiAgICAgICAgZnVuY3Rpb25UcmltSW5kZXggPSBjdXJyRWwuZnVuY3Rpb25TdGFydEluT3V0cHV0U3RyZWFtO1xuICAgICAgfVxuXG4gICAgICBsZXQgZ2x1ZVRyaW1JbmRleCA9IC0xO1xuICAgICAgZm9yIChsZXQgaSA9IHRoaXMub3V0cHV0U3RyZWFtLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGxldCBvID0gdGhpcy5vdXRwdXRTdHJlYW1baV07XG4gICAgICAgIGxldCBjID0gbyBpbnN0YW5jZW9mIENvbnRyb2xDb21tYW5kID8gbyA6IG51bGw7XG4gICAgICAgIGxldCBnID0gbyBpbnN0YW5jZW9mIEdsdWUgPyBvIDogbnVsbDtcblxuICAgICAgICBpZiAoZyAhPSBudWxsKSB7XG4gICAgICAgICAgZ2x1ZVRyaW1JbmRleCA9IGk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgYyAhPSBudWxsICYmXG4gICAgICAgICAgYy5jb21tYW5kVHlwZSA9PSBDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5CZWdpblN0cmluZ1xuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoaSA+PSBmdW5jdGlvblRyaW1JbmRleCkge1xuICAgICAgICAgICAgZnVuY3Rpb25UcmltSW5kZXggPSAtMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGV0IHRyaW1JbmRleCA9IC0xO1xuICAgICAgaWYgKGdsdWVUcmltSW5kZXggIT0gLTEgJiYgZnVuY3Rpb25UcmltSW5kZXggIT0gLTEpXG4gICAgICAgIHRyaW1JbmRleCA9IE1hdGgubWluKGZ1bmN0aW9uVHJpbUluZGV4LCBnbHVlVHJpbUluZGV4KTtcbiAgICAgIGVsc2UgaWYgKGdsdWVUcmltSW5kZXggIT0gLTEpIHRyaW1JbmRleCA9IGdsdWVUcmltSW5kZXg7XG4gICAgICBlbHNlIHRyaW1JbmRleCA9IGZ1bmN0aW9uVHJpbUluZGV4O1xuXG4gICAgICBpZiAodHJpbUluZGV4ICE9IC0xKSB7XG4gICAgICAgIGlmICh0ZXh0LmlzTmV3bGluZSkge1xuICAgICAgICAgIGluY2x1ZGVJbk91dHB1dCA9IGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKHRleHQuaXNOb25XaGl0ZXNwYWNlKSB7XG4gICAgICAgICAgaWYgKGdsdWVUcmltSW5kZXggPiAtMSkgdGhpcy5SZW1vdmVFeGlzdGluZ0dsdWUoKTtcblxuICAgICAgICAgIGlmIChmdW5jdGlvblRyaW1JbmRleCA+IC0xKSB7XG4gICAgICAgICAgICBsZXQgY2FsbFN0YWNrRWxlbWVudHMgPSB0aGlzLmNhbGxTdGFjay5lbGVtZW50cztcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBjYWxsU3RhY2tFbGVtZW50cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICBsZXQgZWwgPSBjYWxsU3RhY2tFbGVtZW50c1tpXTtcbiAgICAgICAgICAgICAgaWYgKGVsLnR5cGUgPT0gUHVzaFBvcFR5cGUuRnVuY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBlbC5mdW5jdGlvblN0YXJ0SW5PdXRwdXRTdHJlYW0gPSAtMTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0ZXh0LmlzTmV3bGluZSkge1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRTdHJlYW1FbmRzSW5OZXdsaW5lIHx8ICF0aGlzLm91dHB1dFN0cmVhbUNvbnRhaW5zQ29udGVudClcbiAgICAgICAgICBpbmNsdWRlSW5PdXRwdXQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaW5jbHVkZUluT3V0cHV0KSB7XG4gICAgICBpZiAob2JqID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJvYmpcIik7XG4gICAgICB9XG4gICAgICB0aGlzLm91dHB1dFN0cmVhbS5wdXNoKG9iaik7XG4gICAgICB0aGlzLk91dHB1dFN0cmVhbURpcnR5KCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFRyaW1OZXdsaW5lc0Zyb21PdXRwdXRTdHJlYW0oKSB7XG4gICAgbGV0IHJlbW92ZVdoaXRlc3BhY2VGcm9tID0gLTE7XG5cbiAgICBsZXQgaSA9IHRoaXMub3V0cHV0U3RyZWFtLmxlbmd0aCAtIDE7XG4gICAgd2hpbGUgKGkgPj0gMCkge1xuICAgICAgbGV0IG9iaiA9IHRoaXMub3V0cHV0U3RyZWFtW2ldO1xuICAgICAgbGV0IGNtZCA9IGFzT3JOdWxsKG9iaiwgQ29udHJvbENvbW1hbmQpO1xuICAgICAgbGV0IHR4dCA9IGFzT3JOdWxsKG9iaiwgU3RyaW5nVmFsdWUpO1xuXG4gICAgICBpZiAoY21kICE9IG51bGwgfHwgKHR4dCAhPSBudWxsICYmIHR4dC5pc05vbldoaXRlc3BhY2UpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfSBlbHNlIGlmICh0eHQgIT0gbnVsbCAmJiB0eHQuaXNOZXdsaW5lKSB7XG4gICAgICAgIHJlbW92ZVdoaXRlc3BhY2VGcm9tID0gaTtcbiAgICAgIH1cbiAgICAgIGktLTtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgdGhlIHdoaXRlc3BhY2VcbiAgICBpZiAocmVtb3ZlV2hpdGVzcGFjZUZyb20gPj0gMCkge1xuICAgICAgaSA9IHJlbW92ZVdoaXRlc3BhY2VGcm9tO1xuICAgICAgd2hpbGUgKGkgPCB0aGlzLm91dHB1dFN0cmVhbS5sZW5ndGgpIHtcbiAgICAgICAgbGV0IHRleHQgPSBhc09yTnVsbCh0aGlzLm91dHB1dFN0cmVhbVtpXSwgU3RyaW5nVmFsdWUpO1xuICAgICAgICBpZiAodGV4dCkge1xuICAgICAgICAgIHRoaXMub3V0cHV0U3RyZWFtLnNwbGljZShpLCAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpKys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLk91dHB1dFN0cmVhbURpcnR5KCk7XG4gIH1cblxuICBwdWJsaWMgUmVtb3ZlRXhpc3RpbmdHbHVlKCkge1xuICAgIGZvciAobGV0IGkgPSB0aGlzLm91dHB1dFN0cmVhbS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgbGV0IGMgPSB0aGlzLm91dHB1dFN0cmVhbVtpXTtcbiAgICAgIGlmIChjIGluc3RhbmNlb2YgR2x1ZSkge1xuICAgICAgICB0aGlzLm91dHB1dFN0cmVhbS5zcGxpY2UoaSwgMSk7XG4gICAgICB9IGVsc2UgaWYgKGMgaW5zdGFuY2VvZiBDb250cm9sQ29tbWFuZCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLk91dHB1dFN0cmVhbURpcnR5KCk7XG4gIH1cblxuICBnZXQgb3V0cHV0U3RyZWFtRW5kc0luTmV3bGluZSgpIHtcbiAgICBpZiAodGhpcy5vdXRwdXRTdHJlYW0ubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChsZXQgaSA9IHRoaXMub3V0cHV0U3RyZWFtLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGxldCBvYmogPSB0aGlzLm91dHB1dFN0cmVhbVtpXTtcbiAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIENvbnRyb2xDb21tYW5kKSBicmVhaztcbiAgICAgICAgbGV0IHRleHQgPSB0aGlzLm91dHB1dFN0cmVhbVtpXTtcbiAgICAgICAgaWYgKHRleHQgaW5zdGFuY2VvZiBTdHJpbmdWYWx1ZSkge1xuICAgICAgICAgIGlmICh0ZXh0LmlzTmV3bGluZSkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgZWxzZSBpZiAodGV4dC5pc05vbldoaXRlc3BhY2UpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZ2V0IG91dHB1dFN0cmVhbUNvbnRhaW5zQ29udGVudCgpIHtcbiAgICBmb3IgKGxldCBjb250ZW50IG9mIHRoaXMub3V0cHV0U3RyZWFtKSB7XG4gICAgICBpZiAoY29udGVudCBpbnN0YW5jZW9mIFN0cmluZ1ZhbHVlKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZ2V0IGluU3RyaW5nRXZhbHVhdGlvbigpIHtcbiAgICBmb3IgKGxldCBpID0gdGhpcy5vdXRwdXRTdHJlYW0ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGxldCBjbWQgPSBhc09yTnVsbCh0aGlzLm91dHB1dFN0cmVhbVtpXSwgQ29udHJvbENvbW1hbmQpO1xuICAgICAgaWYgKFxuICAgICAgICBjbWQgaW5zdGFuY2VvZiBDb250cm9sQ29tbWFuZCAmJlxuICAgICAgICBjbWQuY29tbWFuZFR5cGUgPT0gQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuQmVnaW5TdHJpbmdcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgUHVzaEV2YWx1YXRpb25TdGFjayhvYmo6IElua09iamVjdCB8IG51bGwpIHtcbiAgICAvLyB2YXIgbGlzdFZhbHVlID0gb2JqIGFzIExpc3RWYWx1ZTtcbiAgICBsZXQgbGlzdFZhbHVlID0gYXNPck51bGwob2JqLCBMaXN0VmFsdWUpO1xuICAgIGlmIChsaXN0VmFsdWUpIHtcbiAgICAgIC8vIFVwZGF0ZSBvcmlnaW4gd2hlbiBsaXN0IGlzIGhhcyBzb21ldGhpbmcgdG8gaW5kaWNhdGUgdGhlIGxpc3Qgb3JpZ2luXG4gICAgICBsZXQgcmF3TGlzdCA9IGxpc3RWYWx1ZS52YWx1ZTtcbiAgICAgIGlmIChyYXdMaXN0ID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJyYXdMaXN0XCIpO1xuICAgICAgfVxuXG4gICAgICBpZiAocmF3TGlzdC5vcmlnaW5OYW1lcyAhPSBudWxsKSB7XG4gICAgICAgIGlmICghcmF3TGlzdC5vcmlnaW5zKSByYXdMaXN0Lm9yaWdpbnMgPSBbXTtcbiAgICAgICAgcmF3TGlzdC5vcmlnaW5zLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgZm9yIChsZXQgbiBvZiByYXdMaXN0Lm9yaWdpbk5hbWVzKSB7XG4gICAgICAgICAgaWYgKHRoaXMuc3RvcnkubGlzdERlZmluaXRpb25zID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcIlN0b3J5U3RhdGUuc3RvcnkubGlzdERlZmluaXRpb25zXCIpO1xuICAgICAgICAgIGxldCBkZWYgPSB0aGlzLnN0b3J5Lmxpc3REZWZpbml0aW9ucy5UcnlMaXN0R2V0RGVmaW5pdGlvbihuLCBudWxsKTtcbiAgICAgICAgICBpZiAoZGVmLnJlc3VsdCA9PT0gbnVsbClcbiAgICAgICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJTdG9yeVN0YXRlIGRlZi5yZXN1bHRcIik7XG4gICAgICAgICAgaWYgKHJhd0xpc3Qub3JpZ2lucy5pbmRleE9mKGRlZi5yZXN1bHQpIDwgMClcbiAgICAgICAgICAgIHJhd0xpc3Qub3JpZ2lucy5wdXNoKGRlZi5yZXN1bHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9iaiA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcIm9ialwiKTtcbiAgICB9XG4gICAgdGhpcy5ldmFsdWF0aW9uU3RhY2sucHVzaChvYmopO1xuICB9XG5cbiAgcHVibGljIFBvcEV2YWx1YXRpb25TdGFjaygpOiBJbmtPYmplY3Q7XG4gIHB1YmxpYyBQb3BFdmFsdWF0aW9uU3RhY2sobnVtYmVyT2ZPYmplY3RzOiBudW1iZXIpOiBJbmtPYmplY3RbXTtcbiAgcHVibGljIFBvcEV2YWx1YXRpb25TdGFjayhudW1iZXJPZk9iamVjdHM/OiBudW1iZXIpIHtcbiAgICBpZiAodHlwZW9mIG51bWJlck9mT2JqZWN0cyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgbGV0IG9iaiA9IHRoaXMuZXZhbHVhdGlvblN0YWNrLnBvcCgpO1xuICAgICAgcmV0dXJuIG51bGxJZlVuZGVmaW5lZChvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAobnVtYmVyT2ZPYmplY3RzID4gdGhpcy5ldmFsdWF0aW9uU3RhY2subGVuZ3RoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInRyeWluZyB0byBwb3AgdG9vIG1hbnkgb2JqZWN0c1wiKTtcbiAgICAgIH1cblxuICAgICAgbGV0IHBvcHBlZCA9IHRoaXMuZXZhbHVhdGlvblN0YWNrLnNwbGljZShcbiAgICAgICAgdGhpcy5ldmFsdWF0aW9uU3RhY2subGVuZ3RoIC0gbnVtYmVyT2ZPYmplY3RzLFxuICAgICAgICBudW1iZXJPZk9iamVjdHNcbiAgICAgICk7XG4gICAgICByZXR1cm4gbnVsbElmVW5kZWZpbmVkKHBvcHBlZCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFBlZWtFdmFsdWF0aW9uU3RhY2soKSB7XG4gICAgcmV0dXJuIHRoaXMuZXZhbHVhdGlvblN0YWNrW3RoaXMuZXZhbHVhdGlvblN0YWNrLmxlbmd0aCAtIDFdO1xuICB9XG5cbiAgcHVibGljIEZvcmNlRW5kKCkge1xuICAgIHRoaXMuY2FsbFN0YWNrLlJlc2V0KCk7XG5cbiAgICB0aGlzLl9jdXJyZW50Rmxvdy5jdXJyZW50Q2hvaWNlcy5sZW5ndGggPSAwO1xuXG4gICAgdGhpcy5jdXJyZW50UG9pbnRlciA9IFBvaW50ZXIuTnVsbDtcbiAgICB0aGlzLnByZXZpb3VzUG9pbnRlciA9IFBvaW50ZXIuTnVsbDtcblxuICAgIHRoaXMuZGlkU2FmZUV4aXQgPSB0cnVlO1xuICB9XG5cbiAgcHVibGljIFRyaW1XaGl0ZXNwYWNlRnJvbUZ1bmN0aW9uRW5kKCkge1xuICAgIERlYnVnLkFzc2VydCh0aGlzLmNhbGxTdGFjay5jdXJyZW50RWxlbWVudC50eXBlID09IFB1c2hQb3BUeXBlLkZ1bmN0aW9uKTtcbiAgICBsZXQgZnVuY3Rpb25TdGFydFBvaW50ID1cbiAgICAgIHRoaXMuY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50LmZ1bmN0aW9uU3RhcnRJbk91dHB1dFN0cmVhbTtcblxuICAgIGlmIChmdW5jdGlvblN0YXJ0UG9pbnQgPT0gLTEpIHtcbiAgICAgIGZ1bmN0aW9uU3RhcnRQb2ludCA9IDA7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IHRoaXMub3V0cHV0U3RyZWFtLmxlbmd0aCAtIDE7IGkgPj0gZnVuY3Rpb25TdGFydFBvaW50OyBpLS0pIHtcbiAgICAgIGxldCBvYmogPSB0aGlzLm91dHB1dFN0cmVhbVtpXTtcbiAgICAgIGxldCB0eHQgPSBhc09yTnVsbChvYmosIFN0cmluZ1ZhbHVlKTtcbiAgICAgIGxldCBjbWQgPSBhc09yTnVsbChvYmosIENvbnRyb2xDb21tYW5kKTtcblxuICAgICAgaWYgKHR4dCA9PSBudWxsKSBjb250aW51ZTtcbiAgICAgIGlmIChjbWQpIGJyZWFrO1xuXG4gICAgICBpZiAodHh0LmlzTmV3bGluZSB8fCB0eHQuaXNJbmxpbmVXaGl0ZXNwYWNlKSB7XG4gICAgICAgIHRoaXMub3V0cHV0U3RyZWFtLnNwbGljZShpLCAxKTtcbiAgICAgICAgdGhpcy5PdXRwdXRTdHJlYW1EaXJ0eSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFBvcENhbGxTdGFjayhwb3BUeXBlOiBQdXNoUG9wVHlwZSB8IG51bGwgPSBudWxsKSB7XG4gICAgaWYgKHRoaXMuY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50LnR5cGUgPT0gUHVzaFBvcFR5cGUuRnVuY3Rpb24pXG4gICAgICB0aGlzLlRyaW1XaGl0ZXNwYWNlRnJvbUZ1bmN0aW9uRW5kKCk7XG5cbiAgICB0aGlzLmNhbGxTdGFjay5Qb3AocG9wVHlwZSk7XG4gIH1cblxuICBwdWJsaWMgU2V0Q2hvc2VuUGF0aChwYXRoOiBQYXRoLCBpbmNyZW1lbnRpbmdUdXJuSW5kZXg6IGJvb2xlYW4pIHtcbiAgICAvLyBDaGFuZ2luZyBkaXJlY3Rpb24sIGFzc3VtZSB3ZSBuZWVkIHRvIGNsZWFyIGN1cnJlbnQgc2V0IG9mIGNob2ljZXNcbiAgICB0aGlzLl9jdXJyZW50Rmxvdy5jdXJyZW50Q2hvaWNlcy5sZW5ndGggPSAwO1xuXG4gICAgbGV0IG5ld1BvaW50ZXIgPSB0aGlzLnN0b3J5LlBvaW50ZXJBdFBhdGgocGF0aCk7XG4gICAgaWYgKCFuZXdQb2ludGVyLmlzTnVsbCAmJiBuZXdQb2ludGVyLmluZGV4ID09IC0xKSBuZXdQb2ludGVyLmluZGV4ID0gMDtcblxuICAgIHRoaXMuY3VycmVudFBvaW50ZXIgPSBuZXdQb2ludGVyO1xuXG4gICAgaWYgKGluY3JlbWVudGluZ1R1cm5JbmRleCkge1xuICAgICAgdGhpcy5jdXJyZW50VHVybkluZGV4Kys7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFN0YXJ0RnVuY3Rpb25FdmFsdWF0aW9uRnJvbUdhbWUoXG4gICAgZnVuY0NvbnRhaW5lcjogQ29udGFpbmVyLFxuICAgIGFyZ3M6IGFueVtdXG4gICkge1xuICAgIHRoaXMuY2FsbFN0YWNrLlB1c2goXG4gICAgICBQdXNoUG9wVHlwZS5GdW5jdGlvbkV2YWx1YXRpb25Gcm9tR2FtZSxcbiAgICAgIHRoaXMuZXZhbHVhdGlvblN0YWNrLmxlbmd0aFxuICAgICk7XG4gICAgdGhpcy5jYWxsU3RhY2suY3VycmVudEVsZW1lbnQuY3VycmVudFBvaW50ZXIgPVxuICAgICAgUG9pbnRlci5TdGFydE9mKGZ1bmNDb250YWluZXIpO1xuXG4gICAgdGhpcy5QYXNzQXJndW1lbnRzVG9FdmFsdWF0aW9uU3RhY2soYXJncyk7XG4gIH1cblxuICBwdWJsaWMgUGFzc0FyZ3VtZW50c1RvRXZhbHVhdGlvblN0YWNrKGFyZ3M6IGFueVtdIHwgbnVsbCkge1xuICAgIGlmIChhcmdzICE9PSBudWxsKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICEoXG4gICAgICAgICAgICB0eXBlb2YgYXJnc1tpXSA9PT0gXCJudW1iZXJcIiB8fFxuICAgICAgICAgICAgdHlwZW9mIGFyZ3NbaV0gPT09IFwic3RyaW5nXCIgfHxcbiAgICAgICAgICAgIHR5cGVvZiBhcmdzW2ldID09PSBcImJvb2xlYW5cIiB8fFxuICAgICAgICAgICAgYXJnc1tpXSBpbnN0YW5jZW9mIElua0xpc3RcbiAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIFwiaW5rIGFyZ3VtZW50cyB3aGVuIGNhbGxpbmcgRXZhbHVhdGVGdW5jdGlvbiAvIENob29zZVBhdGhTdHJpbmdXaXRoUGFyYW1ldGVycyBtdXN0IGJlXCIgK1xuICAgICAgICAgICAgICBcIm51bWJlciwgc3RyaW5nLCBib29sIG9yIElua0xpc3QuIEFyZ3VtZW50IHdhcyBcIiArXG4gICAgICAgICAgICAgIChudWxsSWZVbmRlZmluZWQoYXJnc1tpXSkgPT09IG51bGxcbiAgICAgICAgICAgICAgICA/IFwibnVsbFwiXG4gICAgICAgICAgICAgICAgOiBhcmdzW2ldLmNvbnN0cnVjdG9yLm5hbWUpXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuUHVzaEV2YWx1YXRpb25TdGFjayhWYWx1ZS5DcmVhdGUoYXJnc1tpXSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBUcnlFeGl0RnVuY3Rpb25FdmFsdWF0aW9uRnJvbUdhbWUoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5jYWxsU3RhY2suY3VycmVudEVsZW1lbnQudHlwZSA9PVxuICAgICAgUHVzaFBvcFR5cGUuRnVuY3Rpb25FdmFsdWF0aW9uRnJvbUdhbWVcbiAgICApIHtcbiAgICAgIHRoaXMuY3VycmVudFBvaW50ZXIgPSBQb2ludGVyLk51bGw7XG4gICAgICB0aGlzLmRpZFNhZmVFeGl0ID0gdHJ1ZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBDb21wbGV0ZUZ1bmN0aW9uRXZhbHVhdGlvbkZyb21HYW1lKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50LnR5cGUgIT1cbiAgICAgIFB1c2hQb3BUeXBlLkZ1bmN0aW9uRXZhbHVhdGlvbkZyb21HYW1lXG4gICAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiRXhwZWN0ZWQgZXh0ZXJuYWwgZnVuY3Rpb24gZXZhbHVhdGlvbiB0byBiZSBjb21wbGV0ZS4gU3RhY2sgdHJhY2U6IFwiICtcbiAgICAgICAgICB0aGlzLmNhbGxTdGFjay5jYWxsU3RhY2tUcmFjZVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgb3JpZ2luYWxFdmFsdWF0aW9uU3RhY2tIZWlnaHQgPVxuICAgICAgdGhpcy5jYWxsU3RhY2suY3VycmVudEVsZW1lbnQuZXZhbHVhdGlvblN0YWNrSGVpZ2h0V2hlblB1c2hlZDtcblxuICAgIGxldCByZXR1cm5lZE9iajogSW5rT2JqZWN0IHwgbnVsbCA9IG51bGw7XG4gICAgd2hpbGUgKHRoaXMuZXZhbHVhdGlvblN0YWNrLmxlbmd0aCA+IG9yaWdpbmFsRXZhbHVhdGlvblN0YWNrSGVpZ2h0KSB7XG4gICAgICBsZXQgcG9wcGVkT2JqID0gdGhpcy5Qb3BFdmFsdWF0aW9uU3RhY2soKTtcbiAgICAgIGlmIChyZXR1cm5lZE9iaiA9PT0gbnVsbCkgcmV0dXJuZWRPYmogPSBwb3BwZWRPYmo7XG4gICAgfVxuXG4gICAgdGhpcy5Qb3BDYWxsU3RhY2soUHVzaFBvcFR5cGUuRnVuY3Rpb25FdmFsdWF0aW9uRnJvbUdhbWUpO1xuXG4gICAgaWYgKHJldHVybmVkT2JqKSB7XG4gICAgICBpZiAocmV0dXJuZWRPYmogaW5zdGFuY2VvZiBWb2lkKSByZXR1cm4gbnVsbDtcblxuICAgICAgLy8gU29tZSBraW5kIG9mIHZhbHVlLCBpZiBub3Qgdm9pZFxuICAgICAgLy8gdmFyIHJldHVyblZhbCA9IHJldHVybmVkT2JqIGFzIFJ1bnRpbWUuVmFsdWU7XG4gICAgICBsZXQgcmV0dXJuVmFsID0gYXNPclRocm93cyhyZXR1cm5lZE9iaiwgVmFsdWUpO1xuXG4gICAgICAvLyBEaXZlcnRUYXJnZXRzIGdldCByZXR1cm5lZCBhcyB0aGUgc3RyaW5nIG9mIGNvbXBvbmVudHNcbiAgICAgIC8vIChyYXRoZXIgdGhhbiBhIFBhdGgsIHdoaWNoIGlzbid0IHB1YmxpYylcbiAgICAgIGlmIChyZXR1cm5WYWwudmFsdWVUeXBlID09IFZhbHVlVHlwZS5EaXZlcnRUYXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIHJldHVyblZhbC52YWx1ZU9iamVjdC50b1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICAvLyBPdGhlciB0eXBlcyBjYW4ganVzdCBoYXZlIHRoZWlyIGV4YWN0IG9iamVjdCB0eXBlOlxuICAgICAgLy8gaW50LCBmbG9hdCwgc3RyaW5nLiBWYXJpYWJsZVBvaW50ZXJzIGdldCByZXR1cm5lZCBhcyBzdHJpbmdzLlxuICAgICAgcmV0dXJuIHJldHVyblZhbC52YWx1ZU9iamVjdDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBBZGRFcnJvcihtZXNzYWdlOiBzdHJpbmcsIGlzV2FybmluZzogYm9vbGVhbikge1xuICAgIGlmICghaXNXYXJuaW5nKSB7XG4gICAgICBpZiAodGhpcy5fY3VycmVudEVycm9ycyA9PSBudWxsKSB0aGlzLl9jdXJyZW50RXJyb3JzID0gW107XG4gICAgICB0aGlzLl9jdXJyZW50RXJyb3JzLnB1c2gobWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLl9jdXJyZW50V2FybmluZ3MgPT0gbnVsbCkgdGhpcy5fY3VycmVudFdhcm5pbmdzID0gW107XG4gICAgICB0aGlzLl9jdXJyZW50V2FybmluZ3MucHVzaChtZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgT3V0cHV0U3RyZWFtRGlydHkoKSB7XG4gICAgdGhpcy5fb3V0cHV0U3RyZWFtVGV4dERpcnR5ID0gdHJ1ZTtcbiAgICB0aGlzLl9vdXRwdXRTdHJlYW1UYWdzRGlydHkgPSB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBfdmlzaXRDb3VudHM6IE1hcDxzdHJpbmcsIG51bWJlcj47XG4gIHByaXZhdGUgX3R1cm5JbmRpY2VzOiBNYXA8c3RyaW5nLCBudW1iZXI+O1xuXG4gIHByaXZhdGUgX291dHB1dFN0cmVhbVRleHREaXJ0eSA9IHRydWU7XG4gIHByaXZhdGUgX291dHB1dFN0cmVhbVRhZ3NEaXJ0eSA9IHRydWU7XG5cbiAgcHJpdmF0ZSBfcGF0Y2g6IFN0YXRlUGF0Y2ggfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIF9jdXJyZW50RmxvdzogRmxvdztcbiAgcHJpdmF0ZSBfYWxpdmVGbG93TmFtZXM6IHN0cmluZ1tdIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgX25hbWVkRmxvd3M6IE1hcDxzdHJpbmcsIEZsb3c+IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgcmVhZG9ubHkga0RlZmF1bHRGbG93TmFtZSA9IFwiREVGQVVMVF9GTE9XXCI7XG4gIHByaXZhdGUgX2FsaXZlRmxvd05hbWVzRGlydHk6IGJvb2xlYW4gPSB0cnVlO1xufVxuIiwiLy8gVGhpcyBpcyBzaW1wbGUgcmVwbGFjZW1lbnQgb2YgdGhlIFN0b3B3YXRjaCBjbGFzcyBmcm9tIHRoZSAuTkVUIEZyYW1ld29yay5cbi8vIFRoZSBvcmlnaW5hbCBjbGFzcyBjYW4gY291bnQgdGltZSB3aXRoIG11Y2ggbW9yZSBhY2N1cmFjeSB0aGFuIHRoZSBKYXZhc2NyaXB0IHZlcnNpb24uXG4vLyBJdCBtaWdodCBiZSB3b3J0aCBjb25zaWRlcmluZyB1c2luZyBgd2luZG93LnBlcmZvcm1hbmNlYCBpbiB0aGUgYnJvd3NlclxuLy8gb3IgYHByb2Nlc3MuaHJ0aW1lKClgIGluIG5vZGUuXG5leHBvcnQgY2xhc3MgU3RvcHdhdGNoIHtcbiAgcHJpdmF0ZSBzdGFydFRpbWU6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnN0YXJ0VGltZSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGdldCBFbGFwc2VkTWlsbGlzZWNvbmRzKCk6IG51bWJlciB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLnN0YXJ0VGltZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHRoaXMuc3RhcnRUaW1lO1xuICB9XG5cbiAgcHVibGljIFN0YXJ0KCkge1xuICAgIHRoaXMuc3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gIH1cbiAgcHVibGljIFN0b3AoKSB7XG4gICAgdGhpcy5zdGFydFRpbWUgPSB1bmRlZmluZWQ7XG4gIH1cbn1cbiIsIi8vIFRPRE86IFVuaWZ5IHdpdGggQ29tcGlsZXIuXG5cbmV4cG9ydCB0eXBlIEVycm9ySGFuZGxlciA9IChtZXNzYWdlOiBzdHJpbmcsIHR5cGU6IEVycm9yVHlwZSkgPT4gdm9pZDtcblxuZXhwb3J0IGVudW0gRXJyb3JUeXBlIHtcbiAgQXV0aG9yLFxuICBXYXJuaW5nLFxuICBFcnJvcixcbn1cbiIsImltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gXCIuL0NvbnRhaW5lclwiO1xuaW1wb3J0IHsgSW5rT2JqZWN0IH0gZnJvbSBcIi4vT2JqZWN0XCI7XG5pbXBvcnQgeyBKc29uU2VyaWFsaXNhdGlvbiB9IGZyb20gXCIuL0pzb25TZXJpYWxpc2F0aW9uXCI7XG5pbXBvcnQgeyBTdG9yeVN0YXRlIH0gZnJvbSBcIi4vU3RvcnlTdGF0ZVwiO1xuaW1wb3J0IHsgQ29udHJvbENvbW1hbmQgfSBmcm9tIFwiLi9Db250cm9sQ29tbWFuZFwiO1xuaW1wb3J0IHsgUHVzaFBvcFR5cGUgfSBmcm9tIFwiLi9QdXNoUG9wXCI7XG5pbXBvcnQgeyBDaG9pY2VQb2ludCB9IGZyb20gXCIuL0Nob2ljZVBvaW50XCI7XG5pbXBvcnQgeyBDaG9pY2UgfSBmcm9tIFwiLi9DaG9pY2VcIjtcbmltcG9ydCB7IERpdmVydCB9IGZyb20gXCIuL0RpdmVydFwiO1xuaW1wb3J0IHtcbiAgVmFsdWUsXG4gIFN0cmluZ1ZhbHVlLFxuICBJbnRWYWx1ZSxcbiAgRGl2ZXJ0VGFyZ2V0VmFsdWUsXG4gIFZhcmlhYmxlUG9pbnRlclZhbHVlLFxuICBMaXN0VmFsdWUsXG59IGZyb20gXCIuL1ZhbHVlXCI7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSBcIi4vUGF0aFwiO1xuaW1wb3J0IHsgVm9pZCB9IGZyb20gXCIuL1ZvaWRcIjtcbmltcG9ydCB7IFRhZyB9IGZyb20gXCIuL1RhZ1wiO1xuaW1wb3J0IHsgVmFyaWFibGVBc3NpZ25tZW50IH0gZnJvbSBcIi4vVmFyaWFibGVBc3NpZ25tZW50XCI7XG5pbXBvcnQgeyBWYXJpYWJsZVJlZmVyZW5jZSB9IGZyb20gXCIuL1ZhcmlhYmxlUmVmZXJlbmNlXCI7XG5pbXBvcnQgeyBOYXRpdmVGdW5jdGlvbkNhbGwgfSBmcm9tIFwiLi9OYXRpdmVGdW5jdGlvbkNhbGxcIjtcbmltcG9ydCB7IFN0b3J5RXhjZXB0aW9uIH0gZnJvbSBcIi4vU3RvcnlFeGNlcHRpb25cIjtcbmltcG9ydCB7IFBSTkcgfSBmcm9tIFwiLi9QUk5HXCI7XG5pbXBvcnQgeyBTdHJpbmdCdWlsZGVyIH0gZnJvbSBcIi4vU3RyaW5nQnVpbGRlclwiO1xuaW1wb3J0IHsgTGlzdERlZmluaXRpb25zT3JpZ2luIH0gZnJvbSBcIi4vTGlzdERlZmluaXRpb25zT3JpZ2luXCI7XG5pbXBvcnQgeyBMaXN0RGVmaW5pdGlvbiB9IGZyb20gXCIuL0xpc3REZWZpbml0aW9uXCI7XG5pbXBvcnQgeyBTdG9wd2F0Y2ggfSBmcm9tIFwiLi9TdG9wV2F0Y2hcIjtcbmltcG9ydCB7IFBvaW50ZXIgfSBmcm9tIFwiLi9Qb2ludGVyXCI7XG5pbXBvcnQgeyBJbmtMaXN0LCBJbmtMaXN0SXRlbSwgS2V5VmFsdWVQYWlyIH0gZnJvbSBcIi4vSW5rTGlzdFwiO1xuaW1wb3J0IHsgYXNPck51bGwsIGFzT3JUaHJvd3MgfSBmcm9tIFwiLi9UeXBlQXNzZXJ0aW9uXCI7XG5pbXBvcnQgeyBEZWJ1Z01ldGFkYXRhIH0gZnJvbSBcIi4vRGVidWdNZXRhZGF0YVwiO1xuaW1wb3J0IHsgdGhyb3dOdWxsRXhjZXB0aW9uIH0gZnJvbSBcIi4vTnVsbEV4Y2VwdGlvblwiO1xuaW1wb3J0IHsgU2ltcGxlSnNvbiB9IGZyb20gXCIuL1NpbXBsZUpzb25cIjtcbmltcG9ydCB7IEVycm9ySGFuZGxlciwgRXJyb3JUeXBlIH0gZnJvbSBcIi4vRXJyb3JcIjtcblxuZXhwb3J0IHsgSW5rTGlzdCB9IGZyb20gXCIuL0lua0xpc3RcIjtcblxuaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKSB7XG4gIE51bWJlci5pc0ludGVnZXIgPSBmdW5jdGlvbiBpc0ludGVnZXIoblZhbDogYW55KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHR5cGVvZiBuVmFsID09PSBcIm51bWJlclwiICYmXG4gICAgICBpc0Zpbml0ZShuVmFsKSAmJlxuICAgICAgblZhbCA+IC05MDA3MTk5MjU0NzQwOTkyICYmXG4gICAgICBuVmFsIDwgOTAwNzE5OTI1NDc0MDk5MiAmJlxuICAgICAgTWF0aC5mbG9vcihuVmFsKSA9PT0gblZhbFxuICAgICk7XG4gIH07XG59XG5cbmV4cG9ydCBjbGFzcyBTdG9yeSBleHRlbmRzIElua09iamVjdCB7XG4gIHB1YmxpYyBzdGF0aWMgaW5rVmVyc2lvbkN1cnJlbnQgPSAyMTtcblxuICBwdWJsaWMgaW5rVmVyc2lvbk1pbmltdW1Db21wYXRpYmxlID0gMTg7XG5cbiAgZ2V0IGN1cnJlbnRDaG9pY2VzKCkge1xuICAgIGxldCBjaG9pY2VzOiBDaG9pY2VbXSA9IFtdO1xuXG4gICAgaWYgKHRoaXMuX3N0YXRlID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwidGhpcy5fc3RhdGVcIik7XG4gICAgfVxuICAgIGZvciAobGV0IGMgb2YgdGhpcy5fc3RhdGUuY3VycmVudENob2ljZXMpIHtcbiAgICAgIGlmICghYy5pc0ludmlzaWJsZURlZmF1bHQpIHtcbiAgICAgICAgYy5pbmRleCA9IGNob2ljZXMubGVuZ3RoO1xuICAgICAgICBjaG9pY2VzLnB1c2goYyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNob2ljZXM7XG4gIH1cblxuICBnZXQgY3VycmVudFRleHQoKSB7XG4gICAgdGhpcy5JZkFzeW5jV2VDYW50KFwiY2FsbCBjdXJyZW50VGV4dCBzaW5jZSBpdCdzIGEgd29yayBpbiBwcm9ncmVzc1wiKTtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5jdXJyZW50VGV4dDtcbiAgfVxuXG4gIGdldCBjdXJyZW50VGFncygpIHtcbiAgICB0aGlzLklmQXN5bmNXZUNhbnQoXCJjYWxsIGN1cnJlbnRUYWdzIHNpbmNlIGl0J3MgYSB3b3JrIGluIHByb2dyZXNzXCIpO1xuICAgIHJldHVybiB0aGlzLnN0YXRlLmN1cnJlbnRUYWdzO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRFcnJvcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuY3VycmVudEVycm9ycztcbiAgfVxuXG4gIGdldCBjdXJyZW50V2FybmluZ3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuY3VycmVudFdhcm5pbmdzO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRGbG93TmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5jdXJyZW50Rmxvd05hbWU7XG4gIH1cblxuICBnZXQgY3VycmVudEZsb3dJc0RlZmF1bHRGbG93KCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLmN1cnJlbnRGbG93SXNEZWZhdWx0RmxvdztcbiAgfVxuXG4gIGdldCBhbGl2ZUZsb3dOYW1lcygpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5hbGl2ZUZsb3dOYW1lcztcbiAgfVxuXG4gIGdldCBoYXNFcnJvcigpIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0ZS5oYXNFcnJvcjtcbiAgfVxuXG4gIGdldCBoYXNXYXJuaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnN0YXRlLmhhc1dhcm5pbmc7XG4gIH1cblxuICBnZXQgdmFyaWFibGVzU3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUudmFyaWFibGVzU3RhdGU7XG4gIH1cblxuICBnZXQgbGlzdERlZmluaXRpb25zKCkge1xuICAgIHJldHVybiB0aGlzLl9saXN0RGVmaW5pdGlvbnM7XG4gIH1cblxuICBnZXQgc3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xuICB9XG5cbiAgcHVibGljIG9uRXJyb3I6IEVycm9ySGFuZGxlciB8IG51bGwgPSBudWxsO1xuXG4gIHB1YmxpYyBvbkRpZENvbnRpbnVlOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcblxuICBwdWJsaWMgb25NYWtlQ2hvaWNlOiAoKGFyZzE6IENob2ljZSkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcblxuICBwdWJsaWMgb25FdmFsdWF0ZUZ1bmN0aW9uOiAoKGFyZzE6IHN0cmluZywgYXJnMjogYW55W10pID0+IHZvaWQpIHwgbnVsbCA9XG4gICAgbnVsbDtcblxuICBwdWJsaWMgb25Db21wbGV0ZUV2YWx1YXRlRnVuY3Rpb246XG4gICAgfCAoKGFyZzE6IHN0cmluZywgYXJnMjogYW55W10sIGFyZzM6IHN0cmluZywgYXJnNDogYW55KSA9PiB2b2lkKVxuICAgIHwgbnVsbCA9IG51bGw7XG5cbiAgcHVibGljIG9uQ2hvb3NlUGF0aFN0cmluZzogKChhcmcxOiBzdHJpbmcsIGFyZzI6IGFueVtdKSA9PiB2b2lkKSB8IG51bGwgPVxuICAgIG51bGw7XG5cbiAgLy8gVE9ETzogSW1wbGVtZW50IFByb2ZpbGVyXG4gIHB1YmxpYyBTdGFydFByb2ZpbGluZygpIHtcbiAgICAvKiAqL1xuICB9XG4gIHB1YmxpYyBFbmRQcm9maWxpbmcoKSB7XG4gICAgLyogKi9cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGNvbnRlbnRDb250YWluZXI6IENvbnRhaW5lciwgbGlzdHM6IExpc3REZWZpbml0aW9uW10gfCBudWxsKTtcbiAgY29uc3RydWN0b3IoanNvblN0cmluZzogc3RyaW5nKTtcbiAgY29uc3RydWN0b3IoanNvbjogUmVjb3JkPHN0cmluZywgYW55Pik7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICAvLyBEaXNjcmltaW5hdGlvbiBiZXR3ZWVuIGNvbnN0cnVjdG9yc1xuICAgIGxldCBjb250ZW50Q29udGFpbmVyOiBDb250YWluZXI7XG4gICAgbGV0IGxpc3RzOiBMaXN0RGVmaW5pdGlvbltdIHwgbnVsbCA9IG51bGw7XG4gICAgbGV0IGpzb246IFJlY29yZDxzdHJpbmcsIGFueT4gfCBudWxsID0gbnVsbDtcblxuICAgIGlmIChhcmd1bWVudHNbMF0gaW5zdGFuY2VvZiBDb250YWluZXIpIHtcbiAgICAgIGNvbnRlbnRDb250YWluZXIgPSBhcmd1bWVudHNbMF0gYXMgQ29udGFpbmVyO1xuXG4gICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1sxXSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICBsaXN0cyA9IGFyZ3VtZW50c1sxXSBhcyBMaXN0RGVmaW5pdGlvbltdO1xuICAgICAgfVxuXG4gICAgICAvLyAtLS0tLS0gU3RvcnkgKENvbnRhaW5lciBjb250ZW50Q29udGFpbmVyLCBMaXN0PFJ1bnRpbWUuTGlzdERlZmluaXRpb24+IGxpc3RzID0gbnVsbClcbiAgICAgIHRoaXMuX21haW5Db250ZW50Q29udGFpbmVyID0gY29udGVudENvbnRhaW5lcjtcbiAgICAgIC8vIC0tLS0tLVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBsZXQganNvblN0cmluZyA9IGFyZ3VtZW50c1swXSBhcyBzdHJpbmc7XG4gICAgICAgIGpzb24gPSBTaW1wbGVKc29uLlRleHRUb0RpY3Rpb25hcnkoanNvblN0cmluZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBqc29uID0gYXJndW1lbnRzWzBdIGFzIFJlY29yZDxzdHJpbmcsIGFueT47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gLS0tLS0tIFN0b3J5IChDb250YWluZXIgY29udGVudENvbnRhaW5lciwgTGlzdDxSdW50aW1lLkxpc3REZWZpbml0aW9uPiBsaXN0cyA9IG51bGwpXG4gICAgaWYgKGxpc3RzICE9IG51bGwpIHRoaXMuX2xpc3REZWZpbml0aW9ucyA9IG5ldyBMaXN0RGVmaW5pdGlvbnNPcmlnaW4obGlzdHMpO1xuXG4gICAgdGhpcy5fZXh0ZXJuYWxzID0gbmV3IE1hcCgpO1xuICAgIC8vIC0tLS0tLVxuXG4gICAgLy8gLS0tLS0tIFN0b3J5KHN0cmluZyBqc29uU3RyaW5nKSA6IHRoaXMoKENvbnRhaW5lciludWxsKVxuICAgIGlmIChqc29uICE9PSBudWxsKSB7XG4gICAgICBsZXQgcm9vdE9iamVjdDogUmVjb3JkPHN0cmluZywgYW55PiA9IGpzb247XG5cbiAgICAgIGxldCB2ZXJzaW9uT2JqID0gcm9vdE9iamVjdFtcImlua1ZlcnNpb25cIl07XG4gICAgICBpZiAodmVyc2lvbk9iaiA9PSBudWxsKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgXCJpbmsgdmVyc2lvbiBudW1iZXIgbm90IGZvdW5kLiBBcmUgeW91IHN1cmUgaXQncyBhIHZhbGlkIC5pbmsuanNvbiBmaWxlP1wiXG4gICAgICAgICk7XG5cbiAgICAgIGxldCBmb3JtYXRGcm9tRmlsZSA9IHBhcnNlSW50KHZlcnNpb25PYmopO1xuICAgICAgaWYgKGZvcm1hdEZyb21GaWxlID4gU3RvcnkuaW5rVmVyc2lvbkN1cnJlbnQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIFwiVmVyc2lvbiBvZiBpbmsgdXNlZCB0byBidWlsZCBzdG9yeSB3YXMgbmV3ZXIgdGhhbiB0aGUgY3VycmVudCB2ZXJzaW9uIG9mIHRoZSBlbmdpbmVcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChmb3JtYXRGcm9tRmlsZSA8IHRoaXMuaW5rVmVyc2lvbk1pbmltdW1Db21wYXRpYmxlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcIlZlcnNpb24gb2YgaW5rIHVzZWQgdG8gYnVpbGQgc3RvcnkgaXMgdG9vIG9sZCB0byBiZSBsb2FkZWQgYnkgdGhpcyB2ZXJzaW9uIG9mIHRoZSBlbmdpbmVcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChmb3JtYXRGcm9tRmlsZSAhPSBTdG9yeS5pbmtWZXJzaW9uQ3VycmVudCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgXCJXQVJOSU5HOiBWZXJzaW9uIG9mIGluayB1c2VkIHRvIGJ1aWxkIHN0b3J5IGRvZXNuJ3QgbWF0Y2ggY3VycmVudCB2ZXJzaW9uIG9mIGVuZ2luZS4gTm9uLWNyaXRpY2FsLCBidXQgcmVjb21tZW5kIHN5bmNocm9uaXNpbmcuXCJcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgbGV0IHJvb3RUb2tlbiA9IHJvb3RPYmplY3RbXCJyb290XCJdO1xuICAgICAgaWYgKHJvb3RUb2tlbiA9PSBudWxsKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgXCJSb290IG5vZGUgZm9yIGluayBub3QgZm91bmQuIEFyZSB5b3Ugc3VyZSBpdCdzIGEgdmFsaWQgLmluay5qc29uIGZpbGU/XCJcbiAgICAgICAgKTtcblxuICAgICAgbGV0IGxpc3REZWZzT2JqO1xuICAgICAgaWYgKChsaXN0RGVmc09iaiA9IHJvb3RPYmplY3RbXCJsaXN0RGVmc1wiXSkpIHtcbiAgICAgICAgdGhpcy5fbGlzdERlZmluaXRpb25zID1cbiAgICAgICAgICBKc29uU2VyaWFsaXNhdGlvbi5KVG9rZW5Ub0xpc3REZWZpbml0aW9ucyhsaXN0RGVmc09iaik7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX21haW5Db250ZW50Q29udGFpbmVyID0gYXNPclRocm93cyhcbiAgICAgICAgSnNvblNlcmlhbGlzYXRpb24uSlRva2VuVG9SdW50aW1lT2JqZWN0KHJvb3RUb2tlbiksXG4gICAgICAgIENvbnRhaW5lclxuICAgICAgKTtcblxuICAgICAgdGhpcy5SZXNldFN0YXRlKCk7XG4gICAgfVxuICAgIC8vIC0tLS0tLVxuICB9XG5cbiAgLy8gTWVyZ2UgdG9nZXRoZXIgYHB1YmxpYyBzdHJpbmcgVG9Kc29uKClgIGFuZCBgdm9pZCBUb0pzb24oU2ltcGxlSnNvbi5Xcml0ZXIgd3JpdGVyKWAuXG4gIC8vIFdpbGwgb25seSByZXR1cm4gYSB2YWx1ZSBpZiB3cml0ZXIgd2FzIG5vdCBwcm92aWRlZC5cbiAgcHVibGljIFRvSnNvbih3cml0ZXI/OiBTaW1wbGVKc29uLldyaXRlcik6IHN0cmluZyB8IHZvaWQge1xuICAgIGxldCBzaG91bGRSZXR1cm4gPSBmYWxzZTtcblxuICAgIGlmICghd3JpdGVyKSB7XG4gICAgICBzaG91bGRSZXR1cm4gPSB0cnVlO1xuICAgICAgd3JpdGVyID0gbmV3IFNpbXBsZUpzb24uV3JpdGVyKCk7XG4gICAgfVxuXG4gICAgd3JpdGVyLldyaXRlT2JqZWN0U3RhcnQoKTtcblxuICAgIHdyaXRlci5Xcml0ZUludFByb3BlcnR5KFwiaW5rVmVyc2lvblwiLCBTdG9yeS5pbmtWZXJzaW9uQ3VycmVudCk7XG5cbiAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eShcInJvb3RcIiwgKHcpID0+XG4gICAgICBKc29uU2VyaWFsaXNhdGlvbi5Xcml0ZVJ1bnRpbWVDb250YWluZXIodywgdGhpcy5fbWFpbkNvbnRlbnRDb250YWluZXIpXG4gICAgKTtcblxuICAgIGlmICh0aGlzLl9saXN0RGVmaW5pdGlvbnMgIT0gbnVsbCkge1xuICAgICAgd3JpdGVyLldyaXRlUHJvcGVydHlTdGFydChcImxpc3REZWZzXCIpO1xuICAgICAgd3JpdGVyLldyaXRlT2JqZWN0U3RhcnQoKTtcblxuICAgICAgZm9yIChsZXQgZGVmIG9mIHRoaXMuX2xpc3REZWZpbml0aW9ucy5saXN0cykge1xuICAgICAgICB3cml0ZXIuV3JpdGVQcm9wZXJ0eVN0YXJ0KGRlZi5uYW1lKTtcbiAgICAgICAgd3JpdGVyLldyaXRlT2JqZWN0U3RhcnQoKTtcblxuICAgICAgICBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgZGVmLml0ZW1zKSB7XG4gICAgICAgICAgbGV0IGl0ZW0gPSBJbmtMaXN0SXRlbS5mcm9tU2VyaWFsaXplZEtleShrZXkpO1xuICAgICAgICAgIGxldCB2YWwgPSB2YWx1ZTtcbiAgICAgICAgICB3cml0ZXIuV3JpdGVJbnRQcm9wZXJ0eShpdGVtLml0ZW1OYW1lLCB2YWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgd3JpdGVyLldyaXRlT2JqZWN0RW5kKCk7XG4gICAgICAgIHdyaXRlci5Xcml0ZVByb3BlcnR5RW5kKCk7XG4gICAgICB9XG5cbiAgICAgIHdyaXRlci5Xcml0ZU9iamVjdEVuZCgpO1xuICAgICAgd3JpdGVyLldyaXRlUHJvcGVydHlFbmQoKTtcbiAgICB9XG5cbiAgICB3cml0ZXIuV3JpdGVPYmplY3RFbmQoKTtcblxuICAgIGlmIChzaG91bGRSZXR1cm4pIHJldHVybiB3cml0ZXIudG9TdHJpbmcoKTtcbiAgfVxuXG4gIHB1YmxpYyBSZXNldFN0YXRlKCkge1xuICAgIHRoaXMuSWZBc3luY1dlQ2FudChcIlJlc2V0U3RhdGVcIik7XG5cbiAgICB0aGlzLl9zdGF0ZSA9IG5ldyBTdG9yeVN0YXRlKHRoaXMpO1xuICAgIHRoaXMuX3N0YXRlLnZhcmlhYmxlc1N0YXRlLk9ic2VydmVWYXJpYWJsZUNoYW5nZShcbiAgICAgIHRoaXMuVmFyaWFibGVTdGF0ZURpZENoYW5nZUV2ZW50LmJpbmQodGhpcylcbiAgICApO1xuXG4gICAgdGhpcy5SZXNldEdsb2JhbHMoKTtcbiAgfVxuXG4gIHB1YmxpYyBSZXNldEVycm9ycygpIHtcbiAgICBpZiAodGhpcy5fc3RhdGUgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJ0aGlzLl9zdGF0ZVwiKTtcbiAgICB9XG4gICAgdGhpcy5fc3RhdGUuUmVzZXRFcnJvcnMoKTtcbiAgfVxuXG4gIHB1YmxpYyBSZXNldENhbGxzdGFjaygpIHtcbiAgICB0aGlzLklmQXN5bmNXZUNhbnQoXCJSZXNldENhbGxzdGFja1wiKTtcbiAgICBpZiAodGhpcy5fc3RhdGUgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJ0aGlzLl9zdGF0ZVwiKTtcbiAgICB9XG4gICAgdGhpcy5fc3RhdGUuRm9yY2VFbmQoKTtcbiAgfVxuXG4gIHB1YmxpYyBSZXNldEdsb2JhbHMoKSB7XG4gICAgaWYgKHRoaXMuX21haW5Db250ZW50Q29udGFpbmVyLm5hbWVkQ29udGVudC5nZXQoXCJnbG9iYWwgZGVjbFwiKSkge1xuICAgICAgbGV0IG9yaWdpbmFsUG9pbnRlciA9IHRoaXMuc3RhdGUuY3VycmVudFBvaW50ZXIuY29weSgpO1xuXG4gICAgICB0aGlzLkNob29zZVBhdGgobmV3IFBhdGgoXCJnbG9iYWwgZGVjbFwiKSwgZmFsc2UpO1xuXG4gICAgICB0aGlzLkNvbnRpbnVlSW50ZXJuYWwoKTtcblxuICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50UG9pbnRlciA9IG9yaWdpbmFsUG9pbnRlcjtcbiAgICB9XG5cbiAgICB0aGlzLnN0YXRlLnZhcmlhYmxlc1N0YXRlLlNuYXBzaG90RGVmYXVsdEdsb2JhbHMoKTtcbiAgfVxuXG4gIHB1YmxpYyBTd2l0Y2hGbG93KGZsb3dOYW1lOiBzdHJpbmcpIHtcbiAgICB0aGlzLklmQXN5bmNXZUNhbnQoXCJzd2l0Y2ggZmxvd1wiKTtcbiAgICBpZiAodGhpcy5fYXN5bmNTYXZpbmcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJTdG9yeSBpcyBhbHJlYWR5IGluIGJhY2tncm91bmQgc2F2aW5nIG1vZGUsIGNhbid0IHN3aXRjaCBmbG93IHRvIFwiICtcbiAgICAgICAgICBmbG93TmFtZVxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLnN0YXRlLlN3aXRjaEZsb3dfSW50ZXJuYWwoZmxvd05hbWUpO1xuICB9XG5cbiAgcHVibGljIFJlbW92ZUZsb3coZmxvd05hbWU6IHN0cmluZykge1xuICAgIHRoaXMuc3RhdGUuUmVtb3ZlRmxvd19JbnRlcm5hbChmbG93TmFtZSk7XG4gIH1cblxuICBwdWJsaWMgU3dpdGNoVG9EZWZhdWx0RmxvdygpIHtcbiAgICB0aGlzLnN0YXRlLlN3aXRjaFRvRGVmYXVsdEZsb3dfSW50ZXJuYWwoKTtcbiAgfVxuXG4gIHB1YmxpYyBDb250aW51ZSgpIHtcbiAgICB0aGlzLkNvbnRpbnVlQXN5bmMoMCk7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudFRleHQ7XG4gIH1cblxuICBnZXQgY2FuQ29udGludWUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdGUuY2FuQ29udGludWU7XG4gIH1cblxuICBnZXQgYXN5bmNDb250aW51ZUNvbXBsZXRlKCkge1xuICAgIHJldHVybiAhdGhpcy5fYXN5bmNDb250aW51ZUFjdGl2ZTtcbiAgfVxuXG4gIHB1YmxpYyBDb250aW51ZUFzeW5jKG1pbGxpc2Vjc0xpbWl0QXN5bmM6IG51bWJlcikge1xuICAgIGlmICghdGhpcy5faGFzVmFsaWRhdGVkRXh0ZXJuYWxzKSB0aGlzLlZhbGlkYXRlRXh0ZXJuYWxCaW5kaW5ncygpO1xuXG4gICAgdGhpcy5Db250aW51ZUludGVybmFsKG1pbGxpc2Vjc0xpbWl0QXN5bmMpO1xuICB9XG5cbiAgcHVibGljIENvbnRpbnVlSW50ZXJuYWwobWlsbGlzZWNzTGltaXRBc3luYyA9IDApIHtcbiAgICBpZiAodGhpcy5fcHJvZmlsZXIgIT0gbnVsbCkgdGhpcy5fcHJvZmlsZXIuUHJlQ29udGludWUoKTtcblxuICAgIGxldCBpc0FzeW5jVGltZUxpbWl0ZWQgPSBtaWxsaXNlY3NMaW1pdEFzeW5jID4gMDtcbiAgICB0aGlzLl9yZWN1cnNpdmVDb250aW51ZUNvdW50Kys7XG5cbiAgICBpZiAoIXRoaXMuX2FzeW5jQ29udGludWVBY3RpdmUpIHtcbiAgICAgIHRoaXMuX2FzeW5jQ29udGludWVBY3RpdmUgPSBpc0FzeW5jVGltZUxpbWl0ZWQ7XG5cbiAgICAgIGlmICghdGhpcy5jYW5Db250aW51ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgXCJDYW4ndCBjb250aW51ZSAtIHNob3VsZCBjaGVjayBjYW5Db250aW51ZSBiZWZvcmUgY2FsbGluZyBDb250aW51ZVwiXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3N0YXRlLmRpZFNhZmVFeGl0ID0gZmFsc2U7XG4gICAgICB0aGlzLl9zdGF0ZS5SZXNldE91dHB1dCgpO1xuXG4gICAgICBpZiAodGhpcy5fcmVjdXJzaXZlQ29udGludWVDb3VudCA9PSAxKVxuICAgICAgICB0aGlzLl9zdGF0ZS52YXJpYWJsZXNTdGF0ZS5TdGFydFZhcmlhYmxlT2JzZXJ2YXRpb24oKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2FzeW5jQ29udGludWVBY3RpdmUgJiYgIWlzQXN5bmNUaW1lTGltaXRlZCkge1xuICAgICAgdGhpcy5fYXN5bmNDb250aW51ZUFjdGl2ZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIGxldCBkdXJhdGlvblN0b3B3YXRjaCA9IG5ldyBTdG9wd2F0Y2goKTtcbiAgICBkdXJhdGlvblN0b3B3YXRjaC5TdGFydCgpO1xuXG4gICAgbGV0IG91dHB1dFN0cmVhbUVuZHNJbk5ld2xpbmUgPSBmYWxzZTtcbiAgICB0aGlzLl9zYXdMb29rYWhlYWRVbnNhZmVGdW5jdGlvbkFmdGVyTmV3bGluZSA9IGZhbHNlO1xuICAgIGRvIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG91dHB1dFN0cmVhbUVuZHNJbk5ld2xpbmUgPSB0aGlzLkNvbnRpbnVlU2luZ2xlU3RlcCgpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgU3RvcnlFeGNlcHRpb24pKSB0aHJvdyBlO1xuXG4gICAgICAgIHRoaXMuQWRkRXJyb3IoZS5tZXNzYWdlLCB1bmRlZmluZWQsIGUudXNlRW5kTGluZU51bWJlcik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBpZiAob3V0cHV0U3RyZWFtRW5kc0luTmV3bGluZSkgYnJlYWs7XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5fYXN5bmNDb250aW51ZUFjdGl2ZSAmJlxuICAgICAgICBkdXJhdGlvblN0b3B3YXRjaC5FbGFwc2VkTWlsbGlzZWNvbmRzID4gbWlsbGlzZWNzTGltaXRBc3luY1xuICAgICAgKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gd2hpbGUgKHRoaXMuY2FuQ29udGludWUpO1xuXG4gICAgZHVyYXRpb25TdG9wd2F0Y2guU3RvcCgpO1xuXG4gICAgbGV0IGNoYW5nZWRWYXJpYWJsZXNUb09ic2VydmU6IE1hcDxzdHJpbmcsIGFueT4gfCBudWxsID0gbnVsbDtcblxuICAgIGlmIChvdXRwdXRTdHJlYW1FbmRzSW5OZXdsaW5lIHx8ICF0aGlzLmNhbkNvbnRpbnVlKSB7XG4gICAgICBpZiAodGhpcy5fc3RhdGVTbmFwc2hvdEF0TGFzdE5ld2xpbmUgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5SZXN0b3JlU3RhdGVTbmFwc2hvdCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuY2FuQ29udGludWUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuY2FsbFN0YWNrLmNhblBvcFRocmVhZClcbiAgICAgICAgICB0aGlzLkFkZEVycm9yKFxuICAgICAgICAgICAgXCJUaHJlYWQgYXZhaWxhYmxlIHRvIHBvcCwgdGhyZWFkcyBzaG91bGQgYWx3YXlzIGJlIGZsYXQgYnkgdGhlIGVuZCBvZiBldmFsdWF0aW9uP1wiXG4gICAgICAgICAgKTtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgdGhpcy5zdGF0ZS5nZW5lcmF0ZWRDaG9pY2VzLmxlbmd0aCA9PSAwICYmXG4gICAgICAgICAgIXRoaXMuc3RhdGUuZGlkU2FmZUV4aXQgJiZcbiAgICAgICAgICB0aGlzLl90ZW1wb3JhcnlFdmFsdWF0aW9uQ29udGFpbmVyID09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHRoaXMuc3RhdGUuY2FsbFN0YWNrLkNhblBvcChQdXNoUG9wVHlwZS5UdW5uZWwpKVxuICAgICAgICAgICAgdGhpcy5BZGRFcnJvcihcbiAgICAgICAgICAgICAgXCJ1bmV4cGVjdGVkbHkgcmVhY2hlZCBlbmQgb2YgY29udGVudC4gRG8geW91IG5lZWQgYSAnLT4tPicgdG8gcmV0dXJuIGZyb20gYSB0dW5uZWw/XCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgZWxzZSBpZiAodGhpcy5zdGF0ZS5jYWxsU3RhY2suQ2FuUG9wKFB1c2hQb3BUeXBlLkZ1bmN0aW9uKSlcbiAgICAgICAgICAgIHRoaXMuQWRkRXJyb3IoXG4gICAgICAgICAgICAgIFwidW5leHBlY3RlZGx5IHJlYWNoZWQgZW5kIG9mIGNvbnRlbnQuIERvIHlvdSBuZWVkIGEgJ34gcmV0dXJuJz9cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICBlbHNlIGlmICghdGhpcy5zdGF0ZS5jYWxsU3RhY2suY2FuUG9wKVxuICAgICAgICAgICAgdGhpcy5BZGRFcnJvcihcbiAgICAgICAgICAgICAgXCJyYW4gb3V0IG9mIGNvbnRlbnQuIERvIHlvdSBuZWVkIGEgJy0+IERPTkUnIG9yICctPiBFTkQnP1wiXG4gICAgICAgICAgICApO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuQWRkRXJyb3IoXG4gICAgICAgICAgICAgIFwidW5leHBlY3RlZGx5IHJlYWNoZWQgZW5kIG9mIGNvbnRlbnQgZm9yIHVua25vd24gcmVhc29uLiBQbGVhc2UgZGVidWcgY29tcGlsZXIhXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5zdGF0ZS5kaWRTYWZlRXhpdCA9IGZhbHNlO1xuICAgICAgdGhpcy5fc2F3TG9va2FoZWFkVW5zYWZlRnVuY3Rpb25BZnRlck5ld2xpbmUgPSBmYWxzZTtcblxuICAgICAgaWYgKHRoaXMuX3JlY3Vyc2l2ZUNvbnRpbnVlQ291bnQgPT0gMSlcbiAgICAgICAgY2hhbmdlZFZhcmlhYmxlc1RvT2JzZXJ2ZSA9XG4gICAgICAgICAgdGhpcy5fc3RhdGUudmFyaWFibGVzU3RhdGUuQ29tcGxldGVWYXJpYWJsZU9ic2VydmF0aW9uKCk7XG5cbiAgICAgIHRoaXMuX2FzeW5jQ29udGludWVBY3RpdmUgPSBmYWxzZTtcbiAgICAgIGlmICh0aGlzLm9uRGlkQ29udGludWUgIT09IG51bGwpIHRoaXMub25EaWRDb250aW51ZSgpO1xuICAgIH1cblxuICAgIHRoaXMuX3JlY3Vyc2l2ZUNvbnRpbnVlQ291bnQtLTtcblxuICAgIGlmICh0aGlzLl9wcm9maWxlciAhPSBudWxsKSB0aGlzLl9wcm9maWxlci5Qb3N0Q29udGludWUoKTtcblxuICAgIC8vIEluIHRoZSBmb2xsb3dpbmcgY29kZSwgd2UncmUgbWFza2luZyBhIGxvdCBvZiBub24tbnVsbCBhc3NlcnRpb24sXG4gICAgLy8gYmVjYXVzZSB0ZXN0aW5nIGZvciBhZ2FpbnN0IGBoYXNFcnJvcmAgb3IgYGhhc1dhcm5pbmdgIG1ha2VzIHN1cmVcbiAgICAvLyB0aGUgYXJyYXlzIGFyZSBwcmVzZW50IGFuZCBjb250YWluIGF0IGxlYXN0IG9uZSBlbGVtZW50LlxuICAgIGlmICh0aGlzLnN0YXRlLmhhc0Vycm9yIHx8IHRoaXMuc3RhdGUuaGFzV2FybmluZykge1xuICAgICAgaWYgKHRoaXMub25FcnJvciAhPT0gbnVsbCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5oYXNFcnJvcikge1xuICAgICAgICAgIGZvciAobGV0IGVyciBvZiB0aGlzLnN0YXRlLmN1cnJlbnRFcnJvcnMhKSB7XG4gICAgICAgICAgICB0aGlzLm9uRXJyb3IoZXJyLCBFcnJvclR5cGUuRXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5oYXNXYXJuaW5nKSB7XG4gICAgICAgICAgZm9yIChsZXQgZXJyIG9mIHRoaXMuc3RhdGUuY3VycmVudFdhcm5pbmdzISkge1xuICAgICAgICAgICAgdGhpcy5vbkVycm9yKGVyciwgRXJyb3JUeXBlLldhcm5pbmcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLlJlc2V0RXJyb3JzKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xuICAgICAgICBzYi5BcHBlbmQoXCJJbmsgaGFkIFwiKTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaGFzRXJyb3IpIHtcbiAgICAgICAgICBzYi5BcHBlbmQoYCR7dGhpcy5zdGF0ZS5jdXJyZW50RXJyb3JzIS5sZW5ndGh9YCk7XG4gICAgICAgICAgc2IuQXBwZW5kKFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50RXJyb3JzIS5sZW5ndGggPT0gMSA/IFwiIGVycm9yXCIgOiBcImVycm9yc1wiXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5oYXNXYXJuaW5nKSBzYi5BcHBlbmQoXCIgYW5kIFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5oYXNXYXJuaW5nKSB7XG4gICAgICAgICAgc2IuQXBwZW5kKGAke3RoaXMuc3RhdGUuY3VycmVudFdhcm5pbmdzIS5sZW5ndGh9YCk7XG4gICAgICAgICAgc2IuQXBwZW5kKFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50V2FybmluZ3MhLmxlbmd0aCA9PSAxID8gXCIgd2FybmluZ1wiIDogXCJ3YXJuaW5nc1wiXG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5oYXNXYXJuaW5nKSBzYi5BcHBlbmQoXCIgYW5kIFwiKTtcbiAgICAgICAgfVxuICAgICAgICBzYi5BcHBlbmQoXG4gICAgICAgICAgXCIuIEl0IGlzIHN0cm9uZ2x5IHN1Z2dlc3RlZCB0aGF0IHlvdSBhc3NpZ24gYW4gZXJyb3IgaGFuZGxlciB0byBzdG9yeS5vbkVycm9yLiBUaGUgZmlyc3QgaXNzdWUgd2FzOiBcIlxuICAgICAgICApO1xuICAgICAgICBzYi5BcHBlbmQoXG4gICAgICAgICAgdGhpcy5zdGF0ZS5oYXNFcnJvclxuICAgICAgICAgICAgPyB0aGlzLnN0YXRlLmN1cnJlbnRFcnJvcnMhWzBdXG4gICAgICAgICAgICA6IHRoaXMuc3RhdGUuY3VycmVudFdhcm5pbmdzIVswXVxuICAgICAgICApO1xuXG4gICAgICAgIHRocm93IG5ldyBTdG9yeUV4Y2VwdGlvbihzYi50b1N0cmluZygpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKFxuICAgICAgY2hhbmdlZFZhcmlhYmxlc1RvT2JzZXJ2ZSAhPSBudWxsICYmXG4gICAgICBPYmplY3Qua2V5cyhjaGFuZ2VkVmFyaWFibGVzVG9PYnNlcnZlKS5sZW5ndGggPiAwXG4gICAgKSB7XG4gICAgICB0aGlzLl9zdGF0ZS52YXJpYWJsZXNTdGF0ZS5Ob3RpZnlPYnNlcnZlcnMoY2hhbmdlZFZhcmlhYmxlc1RvT2JzZXJ2ZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIENvbnRpbnVlU2luZ2xlU3RlcCgpIHtcbiAgICBpZiAodGhpcy5fcHJvZmlsZXIgIT0gbnVsbCkgdGhpcy5fcHJvZmlsZXIuUHJlU3RlcCgpO1xuXG4gICAgdGhpcy5TdGVwKCk7XG5cbiAgICBpZiAodGhpcy5fcHJvZmlsZXIgIT0gbnVsbCkgdGhpcy5fcHJvZmlsZXIuUG9zdFN0ZXAoKTtcblxuICAgIGlmICghdGhpcy5jYW5Db250aW51ZSAmJiAhdGhpcy5zdGF0ZS5jYWxsU3RhY2suZWxlbWVudElzRXZhbHVhdGVGcm9tR2FtZSkge1xuICAgICAgdGhpcy5UcnlGb2xsb3dEZWZhdWx0SW52aXNpYmxlQ2hvaWNlKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Byb2ZpbGVyICE9IG51bGwpIHRoaXMuX3Byb2ZpbGVyLlByZVNuYXBzaG90KCk7XG5cbiAgICBpZiAoIXRoaXMuc3RhdGUuaW5TdHJpbmdFdmFsdWF0aW9uKSB7XG4gICAgICBpZiAodGhpcy5fc3RhdGVTbmFwc2hvdEF0TGFzdE5ld2xpbmUgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKHRoaXMuX3N0YXRlU25hcHNob3RBdExhc3ROZXdsaW5lLmN1cnJlbnRUYWdzID09PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcInRoaXMuX3N0YXRlQXRMYXN0TmV3bGluZS5jdXJyZW50VGFnc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5jdXJyZW50VGFncyA9PT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJ0aGlzLnN0YXRlLmN1cnJlbnRUYWdzXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGNoYW5nZSA9IHRoaXMuQ2FsY3VsYXRlTmV3bGluZU91dHB1dFN0YXRlQ2hhbmdlKFxuICAgICAgICAgIHRoaXMuX3N0YXRlU25hcHNob3RBdExhc3ROZXdsaW5lLmN1cnJlbnRUZXh0LFxuICAgICAgICAgIHRoaXMuc3RhdGUuY3VycmVudFRleHQsXG4gICAgICAgICAgdGhpcy5fc3RhdGVTbmFwc2hvdEF0TGFzdE5ld2xpbmUuY3VycmVudFRhZ3MubGVuZ3RoLFxuICAgICAgICAgIHRoaXMuc3RhdGUuY3VycmVudFRhZ3MubGVuZ3RoXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNoYW5nZSA9PSBTdG9yeS5PdXRwdXRTdGF0ZUNoYW5nZS5FeHRlbmRlZEJleW9uZE5ld2xpbmUgfHxcbiAgICAgICAgICB0aGlzLl9zYXdMb29rYWhlYWRVbnNhZmVGdW5jdGlvbkFmdGVyTmV3bGluZVxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLlJlc3RvcmVTdGF0ZVNuYXBzaG90KCk7XG5cbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChjaGFuZ2UgPT0gU3RvcnkuT3V0cHV0U3RhdGVDaGFuZ2UuTmV3bGluZVJlbW92ZWQpIHtcbiAgICAgICAgICB0aGlzLkRpc2NhcmRTbmFwc2hvdCgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnN0YXRlLm91dHB1dFN0cmVhbUVuZHNJbk5ld2xpbmUpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FuQ29udGludWUpIHtcbiAgICAgICAgICBpZiAodGhpcy5fc3RhdGVTbmFwc2hvdEF0TGFzdE5ld2xpbmUgPT0gbnVsbCkgdGhpcy5TdGF0ZVNuYXBzaG90KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5EaXNjYXJkU25hcHNob3QoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLl9wcm9maWxlciAhPSBudWxsKSB0aGlzLl9wcm9maWxlci5Qb3N0U25hcHNob3QoKTtcblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBDYWxjdWxhdGVOZXdsaW5lT3V0cHV0U3RhdGVDaGFuZ2UoXG4gICAgcHJldlRleHQ6IHN0cmluZyB8IG51bGwsXG4gICAgY3VyclRleHQ6IHN0cmluZyB8IG51bGwsXG4gICAgcHJldlRhZ0NvdW50OiBudW1iZXIsXG4gICAgY3VyclRhZ0NvdW50OiBudW1iZXJcbiAgKSB7XG4gICAgaWYgKHByZXZUZXh0ID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwicHJldlRleHRcIik7XG4gICAgfVxuICAgIGlmIChjdXJyVGV4dCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcImN1cnJUZXh0XCIpO1xuICAgIH1cblxuICAgIGxldCBuZXdsaW5lU3RpbGxFeGlzdHMgPVxuICAgICAgY3VyclRleHQubGVuZ3RoID49IHByZXZUZXh0Lmxlbmd0aCAmJlxuICAgICAgcHJldlRleHQubGVuZ3RoID4gMCAmJlxuICAgICAgY3VyclRleHQuY2hhckF0KHByZXZUZXh0Lmxlbmd0aCAtIDEpID09IFwiXFxuXCI7XG4gICAgaWYgKFxuICAgICAgcHJldlRhZ0NvdW50ID09IGN1cnJUYWdDb3VudCAmJlxuICAgICAgcHJldlRleHQubGVuZ3RoID09IGN1cnJUZXh0Lmxlbmd0aCAmJlxuICAgICAgbmV3bGluZVN0aWxsRXhpc3RzXG4gICAgKVxuICAgICAgcmV0dXJuIFN0b3J5Lk91dHB1dFN0YXRlQ2hhbmdlLk5vQ2hhbmdlO1xuXG4gICAgaWYgKCFuZXdsaW5lU3RpbGxFeGlzdHMpIHtcbiAgICAgIHJldHVybiBTdG9yeS5PdXRwdXRTdGF0ZUNoYW5nZS5OZXdsaW5lUmVtb3ZlZDtcbiAgICB9XG5cbiAgICBpZiAoY3VyclRhZ0NvdW50ID4gcHJldlRhZ0NvdW50KVxuICAgICAgcmV0dXJuIFN0b3J5Lk91dHB1dFN0YXRlQ2hhbmdlLkV4dGVuZGVkQmV5b25kTmV3bGluZTtcblxuICAgIGZvciAobGV0IGkgPSBwcmV2VGV4dC5sZW5ndGg7IGkgPCBjdXJyVGV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGMgPSBjdXJyVGV4dC5jaGFyQXQoaSk7XG4gICAgICBpZiAoYyAhPSBcIiBcIiAmJiBjICE9IFwiXFx0XCIpIHtcbiAgICAgICAgcmV0dXJuIFN0b3J5Lk91dHB1dFN0YXRlQ2hhbmdlLkV4dGVuZGVkQmV5b25kTmV3bGluZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gU3RvcnkuT3V0cHV0U3RhdGVDaGFuZ2UuTm9DaGFuZ2U7XG4gIH1cblxuICBwdWJsaWMgQ29udGludWVNYXhpbWFsbHkoKSB7XG4gICAgdGhpcy5JZkFzeW5jV2VDYW50KFwiQ29udGludWVNYXhpbWFsbHlcIik7XG5cbiAgICBsZXQgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xuXG4gICAgd2hpbGUgKHRoaXMuY2FuQ29udGludWUpIHtcbiAgICAgIHNiLkFwcGVuZCh0aGlzLkNvbnRpbnVlKCkpO1xuICAgIH1cblxuICAgIHJldHVybiBzYi50b1N0cmluZygpO1xuICB9XG5cbiAgcHVibGljIENvbnRlbnRBdFBhdGgocGF0aDogUGF0aCkge1xuICAgIHJldHVybiB0aGlzLm1haW5Db250ZW50Q29udGFpbmVyLkNvbnRlbnRBdFBhdGgocGF0aCk7XG4gIH1cblxuICBwdWJsaWMgS25vdENvbnRhaW5lcldpdGhOYW1lKG5hbWU6IHN0cmluZykge1xuICAgIGxldCBuYW1lZENvbnRhaW5lciA9IHRoaXMubWFpbkNvbnRlbnRDb250YWluZXIubmFtZWRDb250ZW50LmdldChuYW1lKTtcbiAgICBpZiAobmFtZWRDb250YWluZXIgaW5zdGFuY2VvZiBDb250YWluZXIpIHJldHVybiBuYW1lZENvbnRhaW5lcjtcbiAgICBlbHNlIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHVibGljIFBvaW50ZXJBdFBhdGgocGF0aDogUGF0aCkge1xuICAgIGlmIChwYXRoLmxlbmd0aCA9PSAwKSByZXR1cm4gUG9pbnRlci5OdWxsO1xuXG4gICAgbGV0IHAgPSBuZXcgUG9pbnRlcigpO1xuXG4gICAgbGV0IHBhdGhMZW5ndGhUb1VzZSA9IHBhdGgubGVuZ3RoO1xuXG4gICAgbGV0IHJlc3VsdCA9IG51bGw7XG4gICAgaWYgKHBhdGgubGFzdENvbXBvbmVudCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcInBhdGgubGFzdENvbXBvbmVudFwiKTtcbiAgICB9XG5cbiAgICBpZiAocGF0aC5sYXN0Q29tcG9uZW50LmlzSW5kZXgpIHtcbiAgICAgIHBhdGhMZW5ndGhUb1VzZSA9IHBhdGgubGVuZ3RoIC0gMTtcbiAgICAgIHJlc3VsdCA9IHRoaXMubWFpbkNvbnRlbnRDb250YWluZXIuQ29udGVudEF0UGF0aChcbiAgICAgICAgcGF0aCxcbiAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICBwYXRoTGVuZ3RoVG9Vc2VcbiAgICAgICk7XG4gICAgICBwLmNvbnRhaW5lciA9IHJlc3VsdC5jb250YWluZXI7XG4gICAgICBwLmluZGV4ID0gcGF0aC5sYXN0Q29tcG9uZW50LmluZGV4O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQgPSB0aGlzLm1haW5Db250ZW50Q29udGFpbmVyLkNvbnRlbnRBdFBhdGgocGF0aCk7XG4gICAgICBwLmNvbnRhaW5lciA9IHJlc3VsdC5jb250YWluZXI7XG4gICAgICBwLmluZGV4ID0gLTE7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgcmVzdWx0Lm9iaiA9PSBudWxsIHx8XG4gICAgICAocmVzdWx0Lm9iaiA9PSB0aGlzLm1haW5Db250ZW50Q29udGFpbmVyICYmIHBhdGhMZW5ndGhUb1VzZSA+IDApXG4gICAgKSB7XG4gICAgICB0aGlzLkVycm9yKFxuICAgICAgICBcIkZhaWxlZCB0byBmaW5kIGNvbnRlbnQgYXQgcGF0aCAnXCIgK1xuICAgICAgICAgIHBhdGggK1xuICAgICAgICAgIFwiJywgYW5kIG5vIGFwcHJveGltYXRpb24gb2YgaXQgd2FzIHBvc3NpYmxlLlwiXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAocmVzdWx0LmFwcHJveGltYXRlKVxuICAgICAgdGhpcy5XYXJuaW5nKFxuICAgICAgICBcIkZhaWxlZCB0byBmaW5kIGNvbnRlbnQgYXQgcGF0aCAnXCIgK1xuICAgICAgICAgIHBhdGggK1xuICAgICAgICAgIFwiJywgc28gaXQgd2FzIGFwcHJveGltYXRlZCB0bzogJ1wiICtcbiAgICAgICAgICByZXN1bHQub2JqLnBhdGggK1xuICAgICAgICAgIFwiJy5cIlxuICAgICAgKTtcblxuICAgIHJldHVybiBwO1xuICB9XG5cbiAgcHVibGljIFN0YXRlU25hcHNob3QoKSB7XG4gICAgdGhpcy5fc3RhdGVTbmFwc2hvdEF0TGFzdE5ld2xpbmUgPSB0aGlzLl9zdGF0ZTtcbiAgICB0aGlzLl9zdGF0ZSA9IHRoaXMuX3N0YXRlLkNvcHlBbmRTdGFydFBhdGNoaW5nKGZhbHNlKTtcbiAgfVxuXG4gIHB1YmxpYyBSZXN0b3JlU3RhdGVTbmFwc2hvdCgpIHtcbiAgICBpZiAodGhpcy5fc3RhdGVTbmFwc2hvdEF0TGFzdE5ld2xpbmUgPT09IG51bGwpIHtcbiAgICAgIHRocm93TnVsbEV4Y2VwdGlvbihcIl9zdGF0ZVNuYXBzaG90QXRMYXN0TmV3bGluZVwiKTtcbiAgICB9XG4gICAgdGhpcy5fc3RhdGVTbmFwc2hvdEF0TGFzdE5ld2xpbmUuUmVzdG9yZUFmdGVyUGF0Y2goKTtcblxuICAgIHRoaXMuX3N0YXRlID0gdGhpcy5fc3RhdGVTbmFwc2hvdEF0TGFzdE5ld2xpbmU7XG4gICAgdGhpcy5fc3RhdGVTbmFwc2hvdEF0TGFzdE5ld2xpbmUgPSBudWxsO1xuXG4gICAgaWYgKCF0aGlzLl9hc3luY1NhdmluZykge1xuICAgICAgdGhpcy5fc3RhdGUuQXBwbHlBbnlQYXRjaCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBEaXNjYXJkU25hcHNob3QoKSB7XG4gICAgaWYgKCF0aGlzLl9hc3luY1NhdmluZykgdGhpcy5fc3RhdGUuQXBwbHlBbnlQYXRjaCgpO1xuXG4gICAgdGhpcy5fc3RhdGVTbmFwc2hvdEF0TGFzdE5ld2xpbmUgPSBudWxsO1xuICB9XG5cbiAgcHVibGljIENvcHlTdGF0ZUZvckJhY2tncm91bmRUaHJlYWRTYXZlKCkge1xuICAgIHRoaXMuSWZBc3luY1dlQ2FudChcInN0YXJ0IHNhdmluZyBvbiBhIGJhY2tncm91bmQgdGhyZWFkXCIpO1xuXG4gICAgaWYgKHRoaXMuX2FzeW5jU2F2aW5nKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIlN0b3J5IGlzIGFscmVhZHkgaW4gYmFja2dyb3VuZCBzYXZpbmcgbW9kZSwgY2FuJ3QgY2FsbCBDb3B5U3RhdGVGb3JCYWNrZ3JvdW5kVGhyZWFkU2F2ZSBhZ2FpbiFcIlxuICAgICAgKTtcblxuICAgIGxldCBzdGF0ZVRvU2F2ZSA9IHRoaXMuX3N0YXRlO1xuICAgIHRoaXMuX3N0YXRlID0gdGhpcy5fc3RhdGUuQ29weUFuZFN0YXJ0UGF0Y2hpbmcodHJ1ZSk7XG4gICAgdGhpcy5fYXN5bmNTYXZpbmcgPSB0cnVlO1xuICAgIHJldHVybiBzdGF0ZVRvU2F2ZTtcbiAgfVxuXG4gIHB1YmxpYyBCYWNrZ3JvdW5kU2F2ZUNvbXBsZXRlKCkge1xuICAgIGlmICh0aGlzLl9zdGF0ZVNuYXBzaG90QXRMYXN0TmV3bGluZSA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5fc3RhdGUuQXBwbHlBbnlQYXRjaCgpO1xuICAgIH1cblxuICAgIHRoaXMuX2FzeW5jU2F2aW5nID0gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgU3RlcCgpIHtcbiAgICBsZXQgc2hvdWxkQWRkVG9TdHJlYW0gPSB0cnVlO1xuXG4gICAgbGV0IHBvaW50ZXIgPSB0aGlzLnN0YXRlLmN1cnJlbnRQb2ludGVyLmNvcHkoKTtcbiAgICBpZiAocG9pbnRlci5pc051bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDb250YWluZXIgY29udGFpbmVyVG9FbnRlciA9IHBvaW50ZXIuUmVzb2x2ZSAoKSBhcyBDb250YWluZXI7XG4gICAgbGV0IGNvbnRhaW5lclRvRW50ZXIgPSBhc09yTnVsbChwb2ludGVyLlJlc29sdmUoKSwgQ29udGFpbmVyKTtcblxuICAgIHdoaWxlIChjb250YWluZXJUb0VudGVyKSB7XG4gICAgICB0aGlzLlZpc2l0Q29udGFpbmVyKGNvbnRhaW5lclRvRW50ZXIsIHRydWUpO1xuXG4gICAgICAvLyBObyBjb250ZW50PyB0aGUgbW9zdCB3ZSBjYW4gZG8gaXMgc3RlcCBwYXN0IGl0XG4gICAgICBpZiAoY29udGFpbmVyVG9FbnRlci5jb250ZW50Lmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBwb2ludGVyID0gUG9pbnRlci5TdGFydE9mKGNvbnRhaW5lclRvRW50ZXIpO1xuICAgICAgLy8gY29udGFpbmVyVG9FbnRlciA9IHBvaW50ZXIuUmVzb2x2ZSgpIGFzIENvbnRhaW5lcjtcbiAgICAgIGNvbnRhaW5lclRvRW50ZXIgPSBhc09yTnVsbChwb2ludGVyLlJlc29sdmUoKSwgQ29udGFpbmVyKTtcbiAgICB9XG5cbiAgICB0aGlzLnN0YXRlLmN1cnJlbnRQb2ludGVyID0gcG9pbnRlci5jb3B5KCk7XG5cbiAgICBpZiAodGhpcy5fcHJvZmlsZXIgIT0gbnVsbCkgdGhpcy5fcHJvZmlsZXIuU3RlcCh0aGlzLnN0YXRlLmNhbGxTdGFjayk7XG5cbiAgICAvLyBJcyB0aGUgY3VycmVudCBjb250ZW50IG9iamVjdDpcbiAgICAvLyAgLSBOb3JtYWwgY29udGVudFxuICAgIC8vICAtIE9yIGEgbG9naWMvZmxvdyBzdGF0ZW1lbnQgLSBpZiBzbywgZG8gaXRcbiAgICAvLyBTdG9wIGZsb3cgaWYgd2UgaGl0IGEgc3RhY2sgcG9wIHdoZW4gd2UncmUgdW5hYmxlIHRvIHBvcCAoZS5nLiByZXR1cm4vZG9uZSBzdGF0ZW1lbnQgaW4ga25vdFxuICAgIC8vIHRoYXQgd2FzIGRpdmVydGVkIHRvIHJhdGhlciB0aGFuIGNhbGxlZCBhcyBhIGZ1bmN0aW9uKVxuICAgIGxldCBjdXJyZW50Q29udGVudE9iaiA9IHBvaW50ZXIuUmVzb2x2ZSgpO1xuICAgIGxldCBpc0xvZ2ljT3JGbG93Q29udHJvbCA9XG4gICAgICB0aGlzLlBlcmZvcm1Mb2dpY0FuZEZsb3dDb250cm9sKGN1cnJlbnRDb250ZW50T2JqKTtcblxuICAgIC8vIEhhcyBmbG93IGJlZW4gZm9yY2VkIHRvIGVuZCBieSBmbG93IGNvbnRyb2wgYWJvdmU/XG4gICAgaWYgKHRoaXMuc3RhdGUuY3VycmVudFBvaW50ZXIuaXNOdWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGlzTG9naWNPckZsb3dDb250cm9sKSB7XG4gICAgICBzaG91bGRBZGRUb1N0cmVhbSA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIENob2ljZSB3aXRoIGNvbmRpdGlvbj9cbiAgICAvLyB2YXIgY2hvaWNlUG9pbnQgPSBjdXJyZW50Q29udGVudE9iaiBhcyBDaG9pY2VQb2ludDtcbiAgICBsZXQgY2hvaWNlUG9pbnQgPSBhc09yTnVsbChjdXJyZW50Q29udGVudE9iaiwgQ2hvaWNlUG9pbnQpO1xuICAgIGlmIChjaG9pY2VQb2ludCkge1xuICAgICAgbGV0IGNob2ljZSA9IHRoaXMuUHJvY2Vzc0Nob2ljZShjaG9pY2VQb2ludCk7XG4gICAgICBpZiAoY2hvaWNlKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuZ2VuZXJhdGVkQ2hvaWNlcy5wdXNoKGNob2ljZSk7XG4gICAgICB9XG5cbiAgICAgIGN1cnJlbnRDb250ZW50T2JqID0gbnVsbDtcbiAgICAgIHNob3VsZEFkZFRvU3RyZWFtID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIGNvbnRhaW5lciBoYXMgbm8gY29udGVudCwgdGhlbiBpdCB3aWxsIGJlXG4gICAgLy8gdGhlIFwiY29udGVudFwiIGl0c2VsZiwgYnV0IHdlIHNraXAgb3ZlciBpdC5cbiAgICBpZiAoY3VycmVudENvbnRlbnRPYmogaW5zdGFuY2VvZiBDb250YWluZXIpIHtcbiAgICAgIHNob3VsZEFkZFRvU3RyZWFtID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gQ29udGVudCB0byBhZGQgdG8gZXZhbHVhdGlvbiBzdGFjayBvciB0aGUgb3V0cHV0IHN0cmVhbVxuICAgIGlmIChzaG91bGRBZGRUb1N0cmVhbSkge1xuICAgICAgLy8gSWYgd2UncmUgcHVzaGluZyBhIHZhcmlhYmxlIHBvaW50ZXIgb250byB0aGUgZXZhbHVhdGlvbiBzdGFjaywgZW5zdXJlIHRoYXQgaXQncyBzcGVjaWZpY1xuICAgICAgLy8gdG8gb3VyIGN1cnJlbnQgKHBvc3NpYmx5IHRlbXBvcmFyeSkgY29udGV4dCBpbmRleC4gQW5kIG1ha2UgYSBjb3B5IG9mIHRoZSBwb2ludGVyXG4gICAgICAvLyBzbyB0aGF0IHdlJ3JlIG5vdCBlZGl0aW5nIHRoZSBvcmlnaW5hbCBydW50aW1lIG9iamVjdC5cbiAgICAgIC8vIHZhciB2YXJQb2ludGVyID0gY3VycmVudENvbnRlbnRPYmogYXMgVmFyaWFibGVQb2ludGVyVmFsdWU7XG4gICAgICBsZXQgdmFyUG9pbnRlciA9IGFzT3JOdWxsKGN1cnJlbnRDb250ZW50T2JqLCBWYXJpYWJsZVBvaW50ZXJWYWx1ZSk7XG4gICAgICBpZiAodmFyUG9pbnRlciAmJiB2YXJQb2ludGVyLmNvbnRleHRJbmRleCA9PSAtMSkge1xuICAgICAgICAvLyBDcmVhdGUgbmV3IG9iamVjdCBzbyB3ZSdyZSBub3Qgb3ZlcndyaXRpbmcgdGhlIHN0b3J5J3Mgb3duIGRhdGFcbiAgICAgICAgbGV0IGNvbnRleHRJZHggPSB0aGlzLnN0YXRlLmNhbGxTdGFjay5Db250ZXh0Rm9yVmFyaWFibGVOYW1lZChcbiAgICAgICAgICB2YXJQb2ludGVyLnZhcmlhYmxlTmFtZVxuICAgICAgICApO1xuICAgICAgICBjdXJyZW50Q29udGVudE9iaiA9IG5ldyBWYXJpYWJsZVBvaW50ZXJWYWx1ZShcbiAgICAgICAgICB2YXJQb2ludGVyLnZhcmlhYmxlTmFtZSxcbiAgICAgICAgICBjb250ZXh0SWR4XG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIC8vIEV4cHJlc3Npb24gZXZhbHVhdGlvbiBjb250ZW50XG4gICAgICBpZiAodGhpcy5zdGF0ZS5pbkV4cHJlc3Npb25FdmFsdWF0aW9uKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuUHVzaEV2YWx1YXRpb25TdGFjayhjdXJyZW50Q29udGVudE9iaik7XG4gICAgICB9XG4gICAgICAvLyBPdXRwdXQgc3RyZWFtIGNvbnRlbnQgKGkuZS4gbm90IGV4cHJlc3Npb24gZXZhbHVhdGlvbilcbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLnN0YXRlLlB1c2hUb091dHB1dFN0cmVhbShjdXJyZW50Q29udGVudE9iaik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSW5jcmVtZW50IHRoZSBjb250ZW50IHBvaW50ZXIsIGZvbGxvd2luZyBkaXZlcnRzIGlmIG5lY2Vzc2FyeVxuICAgIHRoaXMuTmV4dENvbnRlbnQoKTtcblxuICAgIC8vIFN0YXJ0aW5nIGEgdGhyZWFkIHNob3VsZCBiZSBkb25lIGFmdGVyIHRoZSBpbmNyZW1lbnQgdG8gdGhlIGNvbnRlbnQgcG9pbnRlcixcbiAgICAvLyBzbyB0aGF0IHdoZW4gcmV0dXJuaW5nIGZyb20gdGhlIHRocmVhZCwgaXQgcmV0dXJucyB0byB0aGUgY29udGVudCBhZnRlciB0aGlzIGluc3RydWN0aW9uLlxuICAgIC8vIHZhciBjb250cm9sQ21kID0gY3VycmVudENvbnRlbnRPYmogYXMgO1xuICAgIGxldCBjb250cm9sQ21kID0gYXNPck51bGwoY3VycmVudENvbnRlbnRPYmosIENvbnRyb2xDb21tYW5kKTtcbiAgICBpZiAoXG4gICAgICBjb250cm9sQ21kICYmXG4gICAgICBjb250cm9sQ21kLmNvbW1hbmRUeXBlID09IENvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLlN0YXJ0VGhyZWFkXG4gICAgKSB7XG4gICAgICB0aGlzLnN0YXRlLmNhbGxTdGFjay5QdXNoVGhyZWFkKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFZpc2l0Q29udGFpbmVyKGNvbnRhaW5lcjogQ29udGFpbmVyLCBhdFN0YXJ0OiBib29sZWFuKSB7XG4gICAgaWYgKCFjb250YWluZXIuY291bnRpbmdBdFN0YXJ0T25seSB8fCBhdFN0YXJ0KSB7XG4gICAgICBpZiAoY29udGFpbmVyLnZpc2l0c1Nob3VsZEJlQ291bnRlZClcbiAgICAgICAgdGhpcy5zdGF0ZS5JbmNyZW1lbnRWaXNpdENvdW50Rm9yQ29udGFpbmVyKGNvbnRhaW5lcik7XG5cbiAgICAgIGlmIChjb250YWluZXIudHVybkluZGV4U2hvdWxkQmVDb3VudGVkKVxuICAgICAgICB0aGlzLnN0YXRlLlJlY29yZFR1cm5JbmRleFZpc2l0VG9Db250YWluZXIoY29udGFpbmVyKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIF9wcmV2Q29udGFpbmVyczogQ29udGFpbmVyW10gPSBbXTtcbiAgcHVibGljIFZpc2l0Q2hhbmdlZENvbnRhaW5lcnNEdWVUb0RpdmVydCgpIHtcbiAgICBsZXQgcHJldmlvdXNQb2ludGVyID0gdGhpcy5zdGF0ZS5wcmV2aW91c1BvaW50ZXIuY29weSgpO1xuICAgIGxldCBwb2ludGVyID0gdGhpcy5zdGF0ZS5jdXJyZW50UG9pbnRlci5jb3B5KCk7XG5cbiAgICBpZiAocG9pbnRlci5pc051bGwgfHwgcG9pbnRlci5pbmRleCA9PSAtMSkgcmV0dXJuO1xuXG4gICAgdGhpcy5fcHJldkNvbnRhaW5lcnMubGVuZ3RoID0gMDtcbiAgICBpZiAoIXByZXZpb3VzUG9pbnRlci5pc051bGwpIHtcbiAgICAgIC8vIENvbnRhaW5lciBwcmV2QW5jZXN0b3IgPSBwcmV2aW91c1BvaW50ZXIuUmVzb2x2ZSgpIGFzIENvbnRhaW5lciA/PyBwcmV2aW91c1BvaW50ZXIuY29udGFpbmVyIGFzIENvbnRhaW5lcjtcbiAgICAgIGxldCByZXNvbHZlZFByZXZpb3VzQW5jZXN0b3IgPSBwcmV2aW91c1BvaW50ZXIuUmVzb2x2ZSgpO1xuICAgICAgbGV0IHByZXZBbmNlc3RvciA9XG4gICAgICAgIGFzT3JOdWxsKHJlc29sdmVkUHJldmlvdXNBbmNlc3RvciwgQ29udGFpbmVyKSB8fFxuICAgICAgICBhc09yTnVsbChwcmV2aW91c1BvaW50ZXIuY29udGFpbmVyLCBDb250YWluZXIpO1xuICAgICAgd2hpbGUgKHByZXZBbmNlc3Rvcikge1xuICAgICAgICB0aGlzLl9wcmV2Q29udGFpbmVycy5wdXNoKHByZXZBbmNlc3Rvcik7XG4gICAgICAgIC8vIHByZXZBbmNlc3RvciA9IHByZXZBbmNlc3Rvci5wYXJlbnQgYXMgQ29udGFpbmVyO1xuICAgICAgICBwcmV2QW5jZXN0b3IgPSBhc09yTnVsbChwcmV2QW5jZXN0b3IucGFyZW50LCBDb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBjdXJyZW50Q2hpbGRPZkNvbnRhaW5lciA9IHBvaW50ZXIuUmVzb2x2ZSgpO1xuXG4gICAgaWYgKGN1cnJlbnRDaGlsZE9mQ29udGFpbmVyID09IG51bGwpIHJldHVybjtcblxuICAgIC8vIENvbnRhaW5lciBjdXJyZW50Q29udGFpbmVyQW5jZXN0b3IgPSBjdXJyZW50Q2hpbGRPZkNvbnRhaW5lci5wYXJlbnQgYXMgQ29udGFpbmVyO1xuICAgIGxldCBjdXJyZW50Q29udGFpbmVyQW5jZXN0b3IgPSBhc09yTnVsbChcbiAgICAgIGN1cnJlbnRDaGlsZE9mQ29udGFpbmVyLnBhcmVudCxcbiAgICAgIENvbnRhaW5lclxuICAgICk7XG4gICAgbGV0IGFsbENoaWxkcmVuRW50ZXJlZEF0U3RhcnQgPSB0cnVlO1xuICAgIHdoaWxlIChcbiAgICAgIGN1cnJlbnRDb250YWluZXJBbmNlc3RvciAmJlxuICAgICAgKHRoaXMuX3ByZXZDb250YWluZXJzLmluZGV4T2YoY3VycmVudENvbnRhaW5lckFuY2VzdG9yKSA8IDAgfHxcbiAgICAgICAgY3VycmVudENvbnRhaW5lckFuY2VzdG9yLmNvdW50aW5nQXRTdGFydE9ubHkpXG4gICAgKSB7XG4gICAgICAvLyBDaGVjayB3aGV0aGVyIHRoaXMgYW5jZXN0b3IgY29udGFpbmVyIGlzIGJlaW5nIGVudGVyZWQgYXQgdGhlIHN0YXJ0LFxuICAgICAgLy8gYnkgY2hlY2tpbmcgd2hldGhlciB0aGUgY2hpbGQgb2JqZWN0IGlzIHRoZSBmaXJzdC5cbiAgICAgIGxldCBlbnRlcmluZ0F0U3RhcnQgPVxuICAgICAgICBjdXJyZW50Q29udGFpbmVyQW5jZXN0b3IuY29udGVudC5sZW5ndGggPiAwICYmXG4gICAgICAgIGN1cnJlbnRDaGlsZE9mQ29udGFpbmVyID09IGN1cnJlbnRDb250YWluZXJBbmNlc3Rvci5jb250ZW50WzBdICYmXG4gICAgICAgIGFsbENoaWxkcmVuRW50ZXJlZEF0U3RhcnQ7XG5cbiAgICAgIGlmICghZW50ZXJpbmdBdFN0YXJ0KSBhbGxDaGlsZHJlbkVudGVyZWRBdFN0YXJ0ID0gZmFsc2U7XG5cbiAgICAgIC8vIE1hcmsgYSB2aXNpdCB0byB0aGlzIGNvbnRhaW5lclxuICAgICAgdGhpcy5WaXNpdENvbnRhaW5lcihjdXJyZW50Q29udGFpbmVyQW5jZXN0b3IsIGVudGVyaW5nQXRTdGFydCk7XG5cbiAgICAgIGN1cnJlbnRDaGlsZE9mQ29udGFpbmVyID0gY3VycmVudENvbnRhaW5lckFuY2VzdG9yO1xuICAgICAgLy8gY3VycmVudENvbnRhaW5lckFuY2VzdG9yID0gY3VycmVudENvbnRhaW5lckFuY2VzdG9yLnBhcmVudCBhcyBDb250YWluZXI7XG4gICAgICBjdXJyZW50Q29udGFpbmVyQW5jZXN0b3IgPSBhc09yTnVsbChcbiAgICAgICAgY3VycmVudENvbnRhaW5lckFuY2VzdG9yLnBhcmVudCxcbiAgICAgICAgQ29udGFpbmVyXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBQb3BDaG9pY2VTdHJpbmdBbmRUYWdzKHRhZ3M6IHN0cmluZ1tdKSB7XG4gICAgbGV0IGNob2ljZU9ubHlTdHJWYWwgPSBhc09yVGhyb3dzKFxuICAgICAgdGhpcy5zdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2soKSxcbiAgICAgIFN0cmluZ1ZhbHVlXG4gICAgKTtcblxuICAgIHdoaWxlIChcbiAgICAgIHRoaXMuc3RhdGUuZXZhbHVhdGlvblN0YWNrLmxlbmd0aCA+IDAgJiZcbiAgICAgIGFzT3JOdWxsKHRoaXMuc3RhdGUuUGVla0V2YWx1YXRpb25TdGFjaygpLCBUYWcpICE9IG51bGxcbiAgICApIHtcbiAgICAgIGxldCB0YWcgPSBhc09yTnVsbCh0aGlzLnN0YXRlLlBvcEV2YWx1YXRpb25TdGFjaygpLCBUYWcpO1xuICAgICAgaWYgKHRhZykgdGFncy5wdXNoKHRhZy50ZXh0KTtcbiAgICB9XG4gICAgcmV0dXJuIGNob2ljZU9ubHlTdHJWYWwudmFsdWU7XG4gIH1cblxuICBwdWJsaWMgUHJvY2Vzc0Nob2ljZShjaG9pY2VQb2ludDogQ2hvaWNlUG9pbnQpIHtcbiAgICBsZXQgc2hvd0Nob2ljZSA9IHRydWU7XG5cbiAgICAvLyBEb24ndCBjcmVhdGUgY2hvaWNlIGlmIGNob2ljZSBwb2ludCBkb2Vzbid0IHBhc3MgY29uZGl0aW9uYWxcbiAgICBpZiAoY2hvaWNlUG9pbnQuaGFzQ29uZGl0aW9uKSB7XG4gICAgICBsZXQgY29uZGl0aW9uVmFsdWUgPSB0aGlzLnN0YXRlLlBvcEV2YWx1YXRpb25TdGFjaygpO1xuICAgICAgaWYgKCF0aGlzLklzVHJ1dGh5KGNvbmRpdGlvblZhbHVlKSkge1xuICAgICAgICBzaG93Q2hvaWNlID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHN0YXJ0VGV4dCA9IFwiXCI7XG4gICAgbGV0IGNob2ljZU9ubHlUZXh0ID0gXCJcIjtcbiAgICBsZXQgdGFnczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmIChjaG9pY2VQb2ludC5oYXNDaG9pY2VPbmx5Q29udGVudCkge1xuICAgICAgY2hvaWNlT25seVRleHQgPSB0aGlzLlBvcENob2ljZVN0cmluZ0FuZFRhZ3ModGFncykgfHwgXCJcIjtcbiAgICB9XG5cbiAgICBpZiAoY2hvaWNlUG9pbnQuaGFzU3RhcnRDb250ZW50KSB7XG4gICAgICBzdGFydFRleHQgPSB0aGlzLlBvcENob2ljZVN0cmluZ0FuZFRhZ3ModGFncykgfHwgXCJcIjtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBjcmVhdGUgY2hvaWNlIGlmIHBsYXllciBoYXMgYWxyZWFkeSByZWFkIHRoaXMgY29udGVudFxuICAgIGlmIChjaG9pY2VQb2ludC5vbmNlT25seSkge1xuICAgICAgbGV0IHZpc2l0Q291bnQgPSB0aGlzLnN0YXRlLlZpc2l0Q291bnRGb3JDb250YWluZXIoXG4gICAgICAgIGNob2ljZVBvaW50LmNob2ljZVRhcmdldFxuICAgICAgKTtcbiAgICAgIGlmICh2aXNpdENvdW50ID4gMCkge1xuICAgICAgICBzaG93Q2hvaWNlID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2UgZ28gdGhyb3VnaCB0aGUgZnVsbCBwcm9jZXNzIG9mIGNyZWF0aW5nIHRoZSBjaG9pY2UgYWJvdmUgc29cbiAgICAvLyB0aGF0IHdlIGNvbnN1bWUgdGhlIGNvbnRlbnQgZm9yIGl0LCBzaW5jZSBvdGhlcndpc2UgaXQnbGxcbiAgICAvLyBiZSBzaG93biBvbiB0aGUgb3V0cHV0IHN0cmVhbS5cbiAgICBpZiAoIXNob3dDaG9pY2UpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCBjaG9pY2UgPSBuZXcgQ2hvaWNlKCk7XG4gICAgY2hvaWNlLnRhcmdldFBhdGggPSBjaG9pY2VQb2ludC5wYXRoT25DaG9pY2U7XG4gICAgY2hvaWNlLnNvdXJjZVBhdGggPSBjaG9pY2VQb2ludC5wYXRoLnRvU3RyaW5nKCk7XG4gICAgY2hvaWNlLmlzSW52aXNpYmxlRGVmYXVsdCA9IGNob2ljZVBvaW50LmlzSW52aXNpYmxlRGVmYXVsdDtcbiAgICBjaG9pY2UudGhyZWFkQXRHZW5lcmF0aW9uID0gdGhpcy5zdGF0ZS5jYWxsU3RhY2suRm9ya1RocmVhZCgpO1xuICAgIGNob2ljZS50YWdzID0gdGFncy5yZXZlcnNlKCk7IC8vQyMgaXMgYSBzdGFja1xuICAgIGNob2ljZS50ZXh0ID0gKHN0YXJ0VGV4dCArIGNob2ljZU9ubHlUZXh0KS5yZXBsYWNlKC9eWyBcXHRdK3xbIFxcdF0rJC9nLCBcIlwiKTtcblxuICAgIHJldHVybiBjaG9pY2U7XG4gIH1cblxuICBwdWJsaWMgSXNUcnV0aHkob2JqOiBJbmtPYmplY3QpIHtcbiAgICBsZXQgdHJ1dGh5ID0gZmFsc2U7XG4gICAgaWYgKG9iaiBpbnN0YW5jZW9mIFZhbHVlKSB7XG4gICAgICBsZXQgdmFsID0gb2JqO1xuXG4gICAgICBpZiAodmFsIGluc3RhbmNlb2YgRGl2ZXJ0VGFyZ2V0VmFsdWUpIHtcbiAgICAgICAgbGV0IGRpdlRhcmdldCA9IHZhbDtcbiAgICAgICAgdGhpcy5FcnJvcihcbiAgICAgICAgICBcIlNob3VsZG4ndCB1c2UgYSBkaXZlcnQgdGFyZ2V0ICh0byBcIiArXG4gICAgICAgICAgICBkaXZUYXJnZXQudGFyZ2V0UGF0aCArXG4gICAgICAgICAgICBcIikgYXMgYSBjb25kaXRpb25hbCB2YWx1ZS4gRGlkIHlvdSBpbnRlbmQgYSBmdW5jdGlvbiBjYWxsICdsaWtlVGhpcygpJyBvciBhIHJlYWQgY291bnQgY2hlY2sgJ2xpa2VUaGlzJz8gKG5vIGFycm93cylcIlxuICAgICAgICApO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2YWwuaXNUcnV0aHk7XG4gICAgfVxuICAgIHJldHVybiB0cnV0aHk7XG4gIH1cblxuICBwdWJsaWMgUGVyZm9ybUxvZ2ljQW5kRmxvd0NvbnRyb2woY29udGVudE9iajogSW5rT2JqZWN0IHwgbnVsbCkge1xuICAgIGlmIChjb250ZW50T2JqID09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBEaXZlcnRcbiAgICBpZiAoY29udGVudE9iaiBpbnN0YW5jZW9mIERpdmVydCkge1xuICAgICAgbGV0IGN1cnJlbnREaXZlcnQgPSBjb250ZW50T2JqO1xuXG4gICAgICBpZiAoY3VycmVudERpdmVydC5pc0NvbmRpdGlvbmFsKSB7XG4gICAgICAgIGxldCBjb25kaXRpb25WYWx1ZSA9IHRoaXMuc3RhdGUuUG9wRXZhbHVhdGlvblN0YWNrKCk7XG5cbiAgICAgICAgLy8gRmFsc2UgY29uZGl0aW9uYWw/IENhbmNlbCBkaXZlcnRcbiAgICAgICAgaWYgKCF0aGlzLklzVHJ1dGh5KGNvbmRpdGlvblZhbHVlKSkgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjdXJyZW50RGl2ZXJ0Lmhhc1ZhcmlhYmxlVGFyZ2V0KSB7XG4gICAgICAgIGxldCB2YXJOYW1lID0gY3VycmVudERpdmVydC52YXJpYWJsZURpdmVydE5hbWU7XG5cbiAgICAgICAgbGV0IHZhckNvbnRlbnRzID1cbiAgICAgICAgICB0aGlzLnN0YXRlLnZhcmlhYmxlc1N0YXRlLkdldFZhcmlhYmxlV2l0aE5hbWUodmFyTmFtZSk7XG5cbiAgICAgICAgaWYgKHZhckNvbnRlbnRzID09IG51bGwpIHtcbiAgICAgICAgICB0aGlzLkVycm9yKFxuICAgICAgICAgICAgXCJUcmllZCB0byBkaXZlcnQgdXNpbmcgYSB0YXJnZXQgZnJvbSBhIHZhcmlhYmxlIHRoYXQgY291bGQgbm90IGJlIGZvdW5kIChcIiArXG4gICAgICAgICAgICAgIHZhck5hbWUgK1xuICAgICAgICAgICAgICBcIilcIlxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoISh2YXJDb250ZW50cyBpbnN0YW5jZW9mIERpdmVydFRhcmdldFZhbHVlKSkge1xuICAgICAgICAgIC8vIHZhciBpbnRDb250ZW50ID0gdmFyQ29udGVudHMgYXMgSW50VmFsdWU7XG4gICAgICAgICAgbGV0IGludENvbnRlbnQgPSBhc09yTnVsbCh2YXJDb250ZW50cywgSW50VmFsdWUpO1xuXG4gICAgICAgICAgbGV0IGVycm9yTWVzc2FnZSA9XG4gICAgICAgICAgICBcIlRyaWVkIHRvIGRpdmVydCB0byBhIHRhcmdldCBmcm9tIGEgdmFyaWFibGUsIGJ1dCB0aGUgdmFyaWFibGUgKFwiICtcbiAgICAgICAgICAgIHZhck5hbWUgK1xuICAgICAgICAgICAgXCIpIGRpZG4ndCBjb250YWluIGEgZGl2ZXJ0IHRhcmdldCwgaXQgXCI7XG4gICAgICAgICAgaWYgKGludENvbnRlbnQgaW5zdGFuY2VvZiBJbnRWYWx1ZSAmJiBpbnRDb250ZW50LnZhbHVlID09IDApIHtcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSArPSBcIndhcyBlbXB0eS9udWxsICh0aGUgdmFsdWUgMCkuXCI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSArPSBcImNvbnRhaW5lZCAnXCIgKyB2YXJDb250ZW50cyArIFwiJy5cIjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLkVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdGFyZ2V0ID0gYXNPclRocm93cyh2YXJDb250ZW50cywgRGl2ZXJ0VGFyZ2V0VmFsdWUpO1xuICAgICAgICB0aGlzLnN0YXRlLmRpdmVydGVkUG9pbnRlciA9IHRoaXMuUG9pbnRlckF0UGF0aCh0YXJnZXQudGFyZ2V0UGF0aCk7XG4gICAgICB9IGVsc2UgaWYgKGN1cnJlbnREaXZlcnQuaXNFeHRlcm5hbCkge1xuICAgICAgICB0aGlzLkNhbGxFeHRlcm5hbEZ1bmN0aW9uKFxuICAgICAgICAgIGN1cnJlbnREaXZlcnQudGFyZ2V0UGF0aFN0cmluZyxcbiAgICAgICAgICBjdXJyZW50RGl2ZXJ0LmV4dGVybmFsQXJnc1xuICAgICAgICApO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc3RhdGUuZGl2ZXJ0ZWRQb2ludGVyID0gY3VycmVudERpdmVydC50YXJnZXRQb2ludGVyLmNvcHkoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGN1cnJlbnREaXZlcnQucHVzaGVzVG9TdGFjaykge1xuICAgICAgICB0aGlzLnN0YXRlLmNhbGxTdGFjay5QdXNoKFxuICAgICAgICAgIGN1cnJlbnREaXZlcnQuc3RhY2tQdXNoVHlwZSxcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgdGhpcy5zdGF0ZS5vdXRwdXRTdHJlYW0ubGVuZ3RoXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnN0YXRlLmRpdmVydGVkUG9pbnRlci5pc051bGwgJiYgIWN1cnJlbnREaXZlcnQuaXNFeHRlcm5hbCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgY3VycmVudERpdmVydCAmJlxuICAgICAgICAgIGN1cnJlbnREaXZlcnQuZGVidWdNZXRhZGF0YSAmJlxuICAgICAgICAgIGN1cnJlbnREaXZlcnQuZGVidWdNZXRhZGF0YS5zb3VyY2VOYW1lICE9IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5FcnJvcihcbiAgICAgICAgICAgIFwiRGl2ZXJ0IHRhcmdldCBkb2Vzbid0IGV4aXN0OiBcIiArXG4gICAgICAgICAgICAgIGN1cnJlbnREaXZlcnQuZGVidWdNZXRhZGF0YS5zb3VyY2VOYW1lXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLkVycm9yKFwiRGl2ZXJ0IHJlc29sdXRpb24gZmFpbGVkOiBcIiArIGN1cnJlbnREaXZlcnQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0YXJ0L2VuZCBhbiBleHByZXNzaW9uIGV2YWx1YXRpb24/IE9yIHByaW50IG91dCB0aGUgcmVzdWx0P1xuICAgIGVsc2UgaWYgKGNvbnRlbnRPYmogaW5zdGFuY2VvZiBDb250cm9sQ29tbWFuZCkge1xuICAgICAgbGV0IGV2YWxDb21tYW5kID0gY29udGVudE9iajtcblxuICAgICAgc3dpdGNoIChldmFsQ29tbWFuZC5jb21tYW5kVHlwZSkge1xuICAgICAgICBjYXNlIENvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLkV2YWxTdGFydDpcbiAgICAgICAgICB0aGlzLkFzc2VydChcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuaW5FeHByZXNzaW9uRXZhbHVhdGlvbiA9PT0gZmFsc2UsXG4gICAgICAgICAgICBcIkFscmVhZHkgaW4gZXhwcmVzc2lvbiBldmFsdWF0aW9uP1wiXG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLnN0YXRlLmluRXhwcmVzc2lvbkV2YWx1YXRpb24gPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuRXZhbEVuZDpcbiAgICAgICAgICB0aGlzLkFzc2VydChcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuaW5FeHByZXNzaW9uRXZhbHVhdGlvbiA9PT0gdHJ1ZSxcbiAgICAgICAgICAgIFwiTm90IGluIGV4cHJlc3Npb24gZXZhbHVhdGlvbiBtb2RlXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHRoaXMuc3RhdGUuaW5FeHByZXNzaW9uRXZhbHVhdGlvbiA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuRXZhbE91dHB1dDpcbiAgICAgICAgICAvLyBJZiB0aGUgZXhwcmVzc2lvbiB0dXJuZWQgb3V0IHRvIGJlIGVtcHR5LCB0aGVyZSBtYXkgbm90IGJlIGFueXRoaW5nIG9uIHRoZSBzdGFja1xuICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmV2YWx1YXRpb25TdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBsZXQgb3V0cHV0ID0gdGhpcy5zdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2soKTtcblxuICAgICAgICAgICAgLy8gRnVuY3Rpb25zIG1heSBldmFsdWF0ZSB0byBWb2lkLCBpbiB3aGljaCBjYXNlIHdlIHNraXAgb3V0cHV0XG4gICAgICAgICAgICBpZiAoIShvdXRwdXQgaW5zdGFuY2VvZiBWb2lkKSkge1xuICAgICAgICAgICAgICAvLyBUT0RPOiBTaG91bGQgd2UgcmVhbGx5IGFsd2F5cyBibGFua2V0IGNvbnZlcnQgdG8gc3RyaW5nP1xuICAgICAgICAgICAgICAvLyBJdCB3b3VsZCBiZSBva2F5IHRvIGhhdmUgbnVtYmVycyBpbiB0aGUgb3V0cHV0IHN0cmVhbSB0aGVcbiAgICAgICAgICAgICAgLy8gb25seSBwcm9ibGVtIGlzIHdoZW4gZXhwb3J0aW5nIHRleHQgZm9yIHZpZXdpbmcsIGl0IHNraXBzIG92ZXIgbnVtYmVycyBldGMuXG4gICAgICAgICAgICAgIGxldCB0ZXh0ID0gbmV3IFN0cmluZ1ZhbHVlKG91dHB1dC50b1N0cmluZygpKTtcblxuICAgICAgICAgICAgICB0aGlzLnN0YXRlLlB1c2hUb091dHB1dFN0cmVhbSh0ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5Ob09wOlxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuRHVwbGljYXRlOlxuICAgICAgICAgIHRoaXMuc3RhdGUuUHVzaEV2YWx1YXRpb25TdGFjayh0aGlzLnN0YXRlLlBlZWtFdmFsdWF0aW9uU3RhY2soKSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5Qb3BFdmFsdWF0ZWRWYWx1ZTpcbiAgICAgICAgICB0aGlzLnN0YXRlLlBvcEV2YWx1YXRpb25TdGFjaygpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuUG9wRnVuY3Rpb246XG4gICAgICAgIGNhc2UgQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuUG9wVHVubmVsOlxuICAgICAgICAgIGxldCBwb3BUeXBlID1cbiAgICAgICAgICAgIGV2YWxDb21tYW5kLmNvbW1hbmRUeXBlID09IENvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLlBvcEZ1bmN0aW9uXG4gICAgICAgICAgICAgID8gUHVzaFBvcFR5cGUuRnVuY3Rpb25cbiAgICAgICAgICAgICAgOiBQdXNoUG9wVHlwZS5UdW5uZWw7XG5cbiAgICAgICAgICBsZXQgb3ZlcnJpZGVUdW5uZWxSZXR1cm5UYXJnZXQ6IERpdmVydFRhcmdldFZhbHVlIHwgbnVsbCA9IG51bGw7XG4gICAgICAgICAgaWYgKHBvcFR5cGUgPT0gUHVzaFBvcFR5cGUuVHVubmVsKSB7XG4gICAgICAgICAgICBsZXQgcG9wcGVkID0gdGhpcy5zdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2soKTtcbiAgICAgICAgICAgIC8vIG92ZXJyaWRlVHVubmVsUmV0dXJuVGFyZ2V0ID0gcG9wcGVkIGFzIERpdmVydFRhcmdldFZhbHVlO1xuICAgICAgICAgICAgb3ZlcnJpZGVUdW5uZWxSZXR1cm5UYXJnZXQgPSBhc09yTnVsbChwb3BwZWQsIERpdmVydFRhcmdldFZhbHVlKTtcbiAgICAgICAgICAgIGlmIChvdmVycmlkZVR1bm5lbFJldHVyblRhcmdldCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICB0aGlzLkFzc2VydChcbiAgICAgICAgICAgICAgICBwb3BwZWQgaW5zdGFuY2VvZiBWb2lkLFxuICAgICAgICAgICAgICAgIFwiRXhwZWN0ZWQgdm9pZCBpZiAtPi0+IGRvZXNuJ3Qgb3ZlcnJpZGUgdGFyZ2V0XCJcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGhpcy5zdGF0ZS5UcnlFeGl0RnVuY3Rpb25FdmFsdWF0aW9uRnJvbUdhbWUoKSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50LnR5cGUgIT0gcG9wVHlwZSB8fFxuICAgICAgICAgICAgIXRoaXMuc3RhdGUuY2FsbFN0YWNrLmNhblBvcFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgbGV0IG5hbWVzOiBNYXA8UHVzaFBvcFR5cGUsIHN0cmluZz4gPSBuZXcgTWFwKCk7XG4gICAgICAgICAgICBuYW1lcy5zZXQoXG4gICAgICAgICAgICAgIFB1c2hQb3BUeXBlLkZ1bmN0aW9uLFxuICAgICAgICAgICAgICBcImZ1bmN0aW9uIHJldHVybiBzdGF0ZW1lbnQgKH4gcmV0dXJuKVwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbmFtZXMuc2V0KFB1c2hQb3BUeXBlLlR1bm5lbCwgXCJ0dW5uZWwgb253YXJkcyBzdGF0ZW1lbnQgKC0+LT4pXCIpO1xuXG4gICAgICAgICAgICBsZXQgZXhwZWN0ZWQgPSBuYW1lcy5nZXQodGhpcy5zdGF0ZS5jYWxsU3RhY2suY3VycmVudEVsZW1lbnQudHlwZSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RhdGUuY2FsbFN0YWNrLmNhblBvcCkge1xuICAgICAgICAgICAgICBleHBlY3RlZCA9IFwiZW5kIG9mIGZsb3cgKC0+IEVORCBvciBjaG9pY2UpXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBlcnJvck1zZyA9XG4gICAgICAgICAgICAgIFwiRm91bmQgXCIgKyBuYW1lcy5nZXQocG9wVHlwZSkgKyBcIiwgd2hlbiBleHBlY3RlZCBcIiArIGV4cGVjdGVkO1xuXG4gICAgICAgICAgICB0aGlzLkVycm9yKGVycm9yTXNnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5Qb3BDYWxsU3RhY2soKTtcblxuICAgICAgICAgICAgaWYgKG92ZXJyaWRlVHVubmVsUmV0dXJuVGFyZ2V0KVxuICAgICAgICAgICAgICB0aGlzLnN0YXRlLmRpdmVydGVkUG9pbnRlciA9IHRoaXMuUG9pbnRlckF0UGF0aChcbiAgICAgICAgICAgICAgICBvdmVycmlkZVR1bm5lbFJldHVyblRhcmdldC50YXJnZXRQYXRoXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuQmVnaW5TdHJpbmc6XG4gICAgICAgICAgdGhpcy5zdGF0ZS5QdXNoVG9PdXRwdXRTdHJlYW0oZXZhbENvbW1hbmQpO1xuXG4gICAgICAgICAgdGhpcy5Bc3NlcnQoXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmluRXhwcmVzc2lvbkV2YWx1YXRpb24gPT09IHRydWUsXG4gICAgICAgICAgICBcIkV4cGVjdGVkIHRvIGJlIGluIGFuIGV4cHJlc3Npb24gd2hlbiBldmFsdWF0aW5nIGEgc3RyaW5nXCJcbiAgICAgICAgICApO1xuICAgICAgICAgIHRoaXMuc3RhdGUuaW5FeHByZXNzaW9uRXZhbHVhdGlvbiA9IGZhbHNlO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIC8vIExlYXZlIGl0IHRvIHN0b3J5LmN1cnJlbnRUZXh0IGFuZCBzdG9yeS5jdXJyZW50VGFncyB0byBzb3J0IG91dCB0aGUgdGV4dCBmcm9tIHRoZSB0YWdzXG4gICAgICAgIC8vIFRoaXMgaXMgbW9zdGx5IGJlY2F1c2Ugd2UgY2FuJ3QgYWx3YXlzIHJlbHkgb24gdGhlIGV4aXN0ZW5jZSBvZiBFbmRUYWcsIGFuZCB3ZSBkb24ndCB3YW50XG4gICAgICAgIC8vIHRvIHRyeSBhbmQgZmxhdHRlbiBkeW5hbWljIHRhZ3MgdG8gc3RyaW5ncyBldmVyeSB0aW1lIFxcbiBpcyBwdXNoZWQgdG8gb3V0cHV0XG4gICAgICAgIGNhc2UgQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuQmVnaW5UYWc6XG4gICAgICAgICAgdGhpcy5zdGF0ZS5QdXNoVG9PdXRwdXRTdHJlYW0oZXZhbENvbW1hbmQpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIC8vIEVuZFRhZyBoYXMgMiBtb2RlczpcbiAgICAgICAgLy8gIC0gV2hlbiBpbiBzdHJpbmcgZXZhbHVhdGlvbiAoZm9yIGNob2ljZXMpXG4gICAgICAgIC8vICAtIE5vcm1hbFxuICAgICAgICAvL1xuICAgICAgICAvLyBUaGUgb25seSB3YXkgeW91IGNvdWxkIGhhdmUgYW4gRW5kVGFnIGluIHRoZSBtaWRkbGUgb2ZcbiAgICAgICAgLy8gc3RyaW5nIGV2YWx1YXRpb24gaXMgaWYgd2UncmUgY3VycmVudGx5IGdlbmVyYXRpbmcgdGV4dCBmb3IgYVxuICAgICAgICAvLyBjaG9pY2UsIHN1Y2ggYXM6XG4gICAgICAgIC8vXG4gICAgICAgIC8vICAgKyBjaG9pY2UgIyB0YWdcbiAgICAgICAgLy9cbiAgICAgICAgLy8gSW4gdGhlIGFib3ZlIGNhc2UsIHRoZSBpbmsgd2lsbCBiZSBydW4gdHdpY2U6XG4gICAgICAgIC8vICAtIEZpcnN0LCB0byBnZW5lcmF0ZSB0aGUgY2hvaWNlIHRleHQuIFN0cmluZyBldmFsdWF0aW9uXG4gICAgICAgIC8vICAgIHdpbGwgYmUgb24sIGFuZCB0aGUgZmluYWwgc3RyaW5nIHdpbGwgYmUgcHVzaGVkIHRvIHRoZVxuICAgICAgICAvLyAgICBldmFsdWF0aW9uIHN0YWNrLCByZWFkeSB0byBiZSBwb3BwZWQgdG8gbWFrZSBhIENob2ljZVxuICAgICAgICAvLyAgICBvYmplY3QuXG4gICAgICAgIC8vICAtIFNlY29uZCwgd2hlbiBpbmsgZ2VuZXJhdGVzIHRleHQgYWZ0ZXIgY2hvb3NpbmcgdGhlIGNob2ljZS5cbiAgICAgICAgLy8gICAgT24gdGhpcyBvY2Fzc2lvbiwgaXQncyBub3QgaW4gc3RyaW5nIGV2YWx1YXRpb24gbW9kZS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gT24gdGhlIHdyaXRpbmcgc2lkZSwgd2UgZGlzYWxsb3cgbWFudWFsbHkgcHV0dGluZyB0YWdzIHdpdGhpblxuICAgICAgICAvLyBzdHJpbmdzIGxpa2UgdGhpczpcbiAgICAgICAgLy9cbiAgICAgICAgLy8gICB7XCJoZWxsbyAjIHdvcmxkXCJ9XG4gICAgICAgIC8vXG4gICAgICAgIC8vIFNvIHdlIGtub3cgdGhhdCB0aGUgdGFnIG11c3QgYmUgYmVpbmcgZ2VuZXJhdGVkIGFzIHBhcnQgb2ZcbiAgICAgICAgLy8gY2hvaWNlIGNvbnRlbnQuIFRoZXJlZm9yZSwgd2hlbiB0aGUgdGFnIGhhcyBiZWVuIGdlbmVyYXRlZCxcbiAgICAgICAgLy8gd2UgcHVzaCBpdCBvbnRvIHRoZSBldmFsdWF0aW9uIHN0YWNrIGluIHRoZSBleGFjdCBzYW1lIHdheVxuICAgICAgICAvLyBhcyB0aGUgc3RyaW5nIGZvciB0aGUgY2hvaWNlIGNvbnRlbnQuXG4gICAgICAgIGNhc2UgQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuRW5kVGFnOiB7XG4gICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaW5TdHJpbmdFdmFsdWF0aW9uKSB7XG4gICAgICAgICAgICBsZXQgY29udGVudFN0YWNrRm9yVGFnOiBJbmtPYmplY3RbXSA9IFtdO1xuICAgICAgICAgICAgbGV0IG91dHB1dENvdW50Q29uc3VtZWQgPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuc3RhdGUub3V0cHV0U3RyZWFtLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICAgIGxldCBvYmogPSB0aGlzLnN0YXRlLm91dHB1dFN0cmVhbVtpXTtcbiAgICAgICAgICAgICAgb3V0cHV0Q291bnRDb25zdW1lZCsrO1xuXG4gICAgICAgICAgICAgIC8vIHZhciBjb21tYW5kID0gb2JqIGFzIENvbnRyb2xDb21tYW5kO1xuICAgICAgICAgICAgICBsZXQgY29tbWFuZCA9IGFzT3JOdWxsKG9iaiwgQ29udHJvbENvbW1hbmQpO1xuICAgICAgICAgICAgICBpZiAoY29tbWFuZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgY29tbWFuZC5jb21tYW5kVHlwZSA9PSBDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5CZWdpblRhZ1xuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIFwiVW5leHBlY3RlZCBDb250cm9sQ29tbWFuZCB3aGlsZSBleHRyYWN0aW5nIHRhZyBmcm9tIGNob2ljZVwiXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBTdHJpbmdWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnRlbnRTdGFja0ZvclRhZy5wdXNoKG9iaik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ29uc3VtZSB0aGUgY29udGVudCB0aGF0IHdhcyBwcm9kdWNlZCBmb3IgdGhpcyBzdHJpbmdcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuUG9wRnJvbU91dHB1dFN0cmVhbShvdXRwdXRDb3VudENvbnN1bWVkKTtcbiAgICAgICAgICAgIC8vIEJ1aWxkIHN0cmluZyBvdXQgb2YgdGhlIGNvbnRlbnQgd2UgY29sbGVjdGVkXG4gICAgICAgICAgICBsZXQgc2IgPSBuZXcgU3RyaW5nQnVpbGRlcigpO1xuICAgICAgICAgICAgZm9yIChsZXQgc3RyVmFsIG9mIGNvbnRlbnRTdGFja0ZvclRhZy5yZXZlcnNlKCkpIHtcbiAgICAgICAgICAgICAgc2IuQXBwZW5kKHN0clZhbC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBjaG9pY2VUYWcgPSBuZXcgVGFnKFxuICAgICAgICAgICAgICB0aGlzLnN0YXRlLkNsZWFuT3V0cHV0V2hpdGVzcGFjZShzYi50b1N0cmluZygpKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vIFB1c2hpbmcgdG8gdGhlIGV2YWx1YXRpb24gc3RhY2sgbWVhbnMgaXQgZ2V0cyBwaWNrZWQgdXBcbiAgICAgICAgICAgIC8vIHdoZW4gYSBDaG9pY2UgaXMgZ2VuZXJhdGVkIGZyb20gdGhlIG5leHQgQ2hvaWNlIFBvaW50LlxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5QdXNoRXZhbHVhdGlvblN0YWNrKGNob2ljZVRhZyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSEgU2ltcGx5IHB1c2ggRW5kVGFnLCBzbyB0aGF0IGluIHRoZSBvdXRwdXQgc3RyZWFtIHdlXG4gICAgICAgICAgICAvLyBoYXZlIGEgc3RydWN0dXJlIG9mOiBbQmVnaW5UYWcsIFwidGhlIHRhZyBjb250ZW50XCIsIEVuZFRhZ11cbiAgICAgICAgICAgIHRoaXMuc3RhdGUuUHVzaFRvT3V0cHV0U3RyZWFtKGV2YWxDb21tYW5kKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBjYXNlIENvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLkVuZFN0cmluZzoge1xuICAgICAgICAgIGxldCBjb250ZW50U3RhY2tGb3JTdHJpbmc6IElua09iamVjdFtdID0gW107XG4gICAgICAgICAgbGV0IGNvbnRlbnRUb1JldGFpbjogSW5rT2JqZWN0W10gPSBbXTtcblxuICAgICAgICAgIGxldCBvdXRwdXRDb3VudENvbnN1bWVkID0gMDtcbiAgICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5zdGF0ZS5vdXRwdXRTdHJlYW0ubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICAgIGxldCBvYmogPSB0aGlzLnN0YXRlLm91dHB1dFN0cmVhbVtpXTtcblxuICAgICAgICAgICAgb3V0cHV0Q291bnRDb25zdW1lZCsrO1xuXG4gICAgICAgICAgICAvLyB2YXIgY29tbWFuZCA9IG9iaiBhcyBDb250cm9sQ29tbWFuZDtcbiAgICAgICAgICAgIGxldCBjb21tYW5kID0gYXNPck51bGwob2JqLCBDb250cm9sQ29tbWFuZCk7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGNvbW1hbmQgJiZcbiAgICAgICAgICAgICAgY29tbWFuZC5jb21tYW5kVHlwZSA9PSBDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5CZWdpblN0cmluZ1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIFRhZykge1xuICAgICAgICAgICAgICBjb250ZW50VG9SZXRhaW4ucHVzaChvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIFN0cmluZ1ZhbHVlKSB7XG4gICAgICAgICAgICAgIGNvbnRlbnRTdGFja0ZvclN0cmluZy5wdXNoKG9iaik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQ29uc3VtZSB0aGUgY29udGVudCB0aGF0IHdhcyBwcm9kdWNlZCBmb3IgdGhpcyBzdHJpbmdcbiAgICAgICAgICB0aGlzLnN0YXRlLlBvcEZyb21PdXRwdXRTdHJlYW0ob3V0cHV0Q291bnRDb25zdW1lZCk7XG5cbiAgICAgICAgICAvLyBSZXNjdWUgdGhlIHRhZ3MgdGhhdCB3ZSB3YW50IGFjdHVhbGx5IHRvIGtlZXAgb24gdGhlIG91dHB1dCBzdGFja1xuICAgICAgICAgIC8vIHJhdGhlciB0aGFuIGNvbnN1bWUgYXMgcGFydCBvZiB0aGUgc3RyaW5nIHdlJ3JlIGJ1aWxkaW5nLlxuICAgICAgICAgIC8vIEF0IHRoZSB0aW1lIG9mIHdyaXRpbmcsIHRoaXMgb25seSBhcHBsaWVzIHRvIFRhZyBvYmplY3RzIGdlbmVyYXRlZFxuICAgICAgICAgIC8vIGJ5IGNob2ljZXMsIHdoaWNoIGFyZSBwdXNoZWQgdG8gdGhlIHN0YWNrIGR1cmluZyBzdHJpbmcgZ2VuZXJhdGlvbi5cbiAgICAgICAgICBmb3IgKGxldCByZXNjdWVkVGFnIG9mIGNvbnRlbnRUb1JldGFpbilcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuUHVzaFRvT3V0cHV0U3RyZWFtKHJlc2N1ZWRUYWcpO1xuXG4gICAgICAgICAgLy8gVGhlIEMjIHZlcnNpb24gdXNlcyBhIFN0YWNrIGZvciBjb250ZW50U3RhY2tGb3JTdHJpbmcsIGJ1dCB3ZSdyZVxuICAgICAgICAgIC8vIHVzaW5nIGEgc2ltcGxlIGFycmF5LCBzbyB3ZSBuZWVkIHRvIHJldmVyc2UgaXQgYmVmb3JlIHVzaW5nIGl0XG4gICAgICAgICAgY29udGVudFN0YWNrRm9yU3RyaW5nID0gY29udGVudFN0YWNrRm9yU3RyaW5nLnJldmVyc2UoKTtcblxuICAgICAgICAgIC8vIEJ1aWxkIHN0cmluZyBvdXQgb2YgdGhlIGNvbnRlbnQgd2UgY29sbGVjdGVkXG4gICAgICAgICAgbGV0IHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcbiAgICAgICAgICBmb3IgKGxldCBjIG9mIGNvbnRlbnRTdGFja0ZvclN0cmluZykge1xuICAgICAgICAgICAgc2IuQXBwZW5kKGMudG9TdHJpbmcoKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gUmV0dXJuIHRvIGV4cHJlc3Npb24gZXZhbHVhdGlvbiAoZnJvbSBjb250ZW50IG1vZGUpXG4gICAgICAgICAgdGhpcy5zdGF0ZS5pbkV4cHJlc3Npb25FdmFsdWF0aW9uID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLnN0YXRlLlB1c2hFdmFsdWF0aW9uU3RhY2sobmV3IFN0cmluZ1ZhbHVlKHNiLnRvU3RyaW5nKCkpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuQ2hvaWNlQ291bnQ6XG4gICAgICAgICAgbGV0IGNob2ljZUNvdW50ID0gdGhpcy5zdGF0ZS5nZW5lcmF0ZWRDaG9pY2VzLmxlbmd0aDtcbiAgICAgICAgICB0aGlzLnN0YXRlLlB1c2hFdmFsdWF0aW9uU3RhY2sobmV3IEludFZhbHVlKGNob2ljZUNvdW50KSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5UdXJuczpcbiAgICAgICAgICB0aGlzLnN0YXRlLlB1c2hFdmFsdWF0aW9uU3RhY2soXG4gICAgICAgICAgICBuZXcgSW50VmFsdWUodGhpcy5zdGF0ZS5jdXJyZW50VHVybkluZGV4ICsgMSlcbiAgICAgICAgICApO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuVHVybnNTaW5jZTpcbiAgICAgICAgY2FzZSBDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5SZWFkQ291bnQ6XG4gICAgICAgICAgbGV0IHRhcmdldCA9IHRoaXMuc3RhdGUuUG9wRXZhbHVhdGlvblN0YWNrKCk7XG4gICAgICAgICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgRGl2ZXJ0VGFyZ2V0VmFsdWUpKSB7XG4gICAgICAgICAgICBsZXQgZXh0cmFOb3RlID0gXCJcIjtcbiAgICAgICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBJbnRWYWx1ZSlcbiAgICAgICAgICAgICAgZXh0cmFOb3RlID1cbiAgICAgICAgICAgICAgICBcIi4gRGlkIHlvdSBhY2NpZGVudGFsbHkgcGFzcyBhIHJlYWQgY291bnQgKCdrbm90X25hbWUnKSBpbnN0ZWFkIG9mIGEgdGFyZ2V0ICgnLT4ga25vdF9uYW1lJyk/XCI7XG4gICAgICAgICAgICB0aGlzLkVycm9yKFxuICAgICAgICAgICAgICBcIlRVUk5TX1NJTkNFIC8gUkVBRF9DT1VOVCBleHBlY3RlZCBhIGRpdmVydCB0YXJnZXQgKGtub3QsIHN0aXRjaCwgbGFiZWwgbmFtZSksIGJ1dCBzYXcgXCIgK1xuICAgICAgICAgICAgICAgIHRhcmdldCArXG4gICAgICAgICAgICAgICAgZXh0cmFOb3RlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gdmFyIGRpdmVydFRhcmdldCA9IHRhcmdldCBhcyBEaXZlcnRUYXJnZXRWYWx1ZTtcbiAgICAgICAgICBsZXQgZGl2ZXJ0VGFyZ2V0ID0gYXNPclRocm93cyh0YXJnZXQsIERpdmVydFRhcmdldFZhbHVlKTtcbiAgICAgICAgICAvLyB2YXIgY29udGFpbmVyID0gQ29udGVudEF0UGF0aCAoZGl2ZXJ0VGFyZ2V0LnRhcmdldFBhdGgpLmNvcnJlY3RPYmogYXMgQ29udGFpbmVyO1xuICAgICAgICAgIGxldCBjb250YWluZXIgPSBhc09yTnVsbChcbiAgICAgICAgICAgIHRoaXMuQ29udGVudEF0UGF0aChkaXZlcnRUYXJnZXQudGFyZ2V0UGF0aCkuY29ycmVjdE9iaixcbiAgICAgICAgICAgIENvbnRhaW5lclxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBsZXQgZWl0aGVyQ291bnQ7XG4gICAgICAgICAgaWYgKGNvbnRhaW5lciAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGV2YWxDb21tYW5kLmNvbW1hbmRUeXBlID09IENvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLlR1cm5zU2luY2VcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgZWl0aGVyQ291bnQgPSB0aGlzLnN0YXRlLlR1cm5zU2luY2VGb3JDb250YWluZXIoY29udGFpbmVyKTtcbiAgICAgICAgICAgIGVsc2UgZWl0aGVyQ291bnQgPSB0aGlzLnN0YXRlLlZpc2l0Q291bnRGb3JDb250YWluZXIoY29udGFpbmVyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBldmFsQ29tbWFuZC5jb21tYW5kVHlwZSA9PSBDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5UdXJuc1NpbmNlXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAgIGVpdGhlckNvdW50ID0gLTE7XG4gICAgICAgICAgICBlbHNlIGVpdGhlckNvdW50ID0gMDtcblxuICAgICAgICAgICAgdGhpcy5XYXJuaW5nKFxuICAgICAgICAgICAgICBcIkZhaWxlZCB0byBmaW5kIGNvbnRhaW5lciBmb3IgXCIgK1xuICAgICAgICAgICAgICAgIGV2YWxDb21tYW5kLnRvU3RyaW5nKCkgK1xuICAgICAgICAgICAgICAgIFwiIGxvb2t1cCBhdCBcIiArXG4gICAgICAgICAgICAgICAgZGl2ZXJ0VGFyZ2V0LnRhcmdldFBhdGgudG9TdHJpbmcoKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLnN0YXRlLlB1c2hFdmFsdWF0aW9uU3RhY2sobmV3IEludFZhbHVlKGVpdGhlckNvdW50KSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5SYW5kb206IHtcbiAgICAgICAgICBsZXQgbWF4SW50ID0gYXNPck51bGwodGhpcy5zdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2soKSwgSW50VmFsdWUpO1xuICAgICAgICAgIGxldCBtaW5JbnQgPSBhc09yTnVsbCh0aGlzLnN0YXRlLlBvcEV2YWx1YXRpb25TdGFjaygpLCBJbnRWYWx1ZSk7XG5cbiAgICAgICAgICBpZiAobWluSW50ID09IG51bGwgfHwgbWluSW50IGluc3RhbmNlb2YgSW50VmFsdWUgPT09IGZhbHNlKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIFwiSW52YWxpZCB2YWx1ZSBmb3IgbWluaW11bSBwYXJhbWV0ZXIgb2YgUkFORE9NKG1pbiwgbWF4KVwiXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgaWYgKG1heEludCA9PSBudWxsIHx8IG1heEludCBpbnN0YW5jZW9mIEludFZhbHVlID09PSBmYWxzZSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkVycm9yKFxuICAgICAgICAgICAgICBcIkludmFsaWQgdmFsdWUgZm9yIG1heGltdW0gcGFyYW1ldGVyIG9mIFJBTkRPTShtaW4sIG1heClcIlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgIC8vIE9yaWdpbmFsbHkgYSBwcmltaXRpdmUgdHlwZSwgYnV0IGhlcmUsIGNhbiBiZSBudWxsLlxuICAgICAgICAgIC8vIFRPRE86IFJlcGxhY2UgYnkgZGVmYXVsdCB2YWx1ZT9cbiAgICAgICAgICBpZiAobWF4SW50LnZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwibWF4SW50LnZhbHVlXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobWluSW50LnZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwibWluSW50LnZhbHVlXCIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFRoaXMgY29kZSBpcyBkaWZmZXJzIGEgYml0IGZyb20gdGhlIHJlZmVyZW5jZSBpbXBsZW1lbnRhdGlvbiwgc2luY2VcbiAgICAgICAgICAvLyBKYXZhU2NyaXB0IGhhcyBubyB0cnVlIGludGVnZXJzLiBIZW5jZSBpbnRlZ2VyIGFyaXRobWV0aWNzIGFuZFxuICAgICAgICAgIC8vIGludGVyZ2VyIG92ZXJmbG93cyBkb24ndCBhcHBseSBoZXJlLiBBIGxvc3Mgb2YgcHJlY2lzaW9uIGNhblxuICAgICAgICAgIC8vIGhhcHBlbiB3aXRoIGJpZyBudW1iZXJzIGhvd2V2ZXIuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBUaGUgY2FzZSB3aGVyZSAncmFuZG9tUmFuZ2UnIGlzIGxvd2VyIHRoYW4gemVybyBpcyBoYW5kbGVkIGJlbG93LFxuICAgICAgICAgIC8vIHNvIHRoZXJlJ3Mgbm8gbmVlZCB0byB0ZXN0IGFnYWluc3QgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIuXG4gICAgICAgICAgbGV0IHJhbmRvbVJhbmdlID0gbWF4SW50LnZhbHVlIC0gbWluSW50LnZhbHVlICsgMTtcbiAgICAgICAgICBpZiAoIWlzRmluaXRlKHJhbmRvbVJhbmdlKSB8fCByYW5kb21SYW5nZSA+IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSB7XG4gICAgICAgICAgICByYW5kb21SYW5nZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xuICAgICAgICAgICAgdGhpcy5FcnJvcihcbiAgICAgICAgICAgICAgXCJSQU5ET00gd2FzIGNhbGxlZCB3aXRoIGEgcmFuZ2UgdGhhdCBleGNlZWRzIHRoZSBzaXplIHRoYXQgaW5rIG51bWJlcnMgY2FuIHVzZS5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJhbmRvbVJhbmdlIDw9IDApXG4gICAgICAgICAgICB0aGlzLkVycm9yKFxuICAgICAgICAgICAgICBcIlJBTkRPTSB3YXMgY2FsbGVkIHdpdGggbWluaW11bSBhcyBcIiArXG4gICAgICAgICAgICAgICAgbWluSW50LnZhbHVlICtcbiAgICAgICAgICAgICAgICBcIiBhbmQgbWF4aW11bSBhcyBcIiArXG4gICAgICAgICAgICAgICAgbWF4SW50LnZhbHVlICtcbiAgICAgICAgICAgICAgICBcIi4gVGhlIG1heGltdW0gbXVzdCBiZSBsYXJnZXJcIlxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgIGxldCByZXN1bHRTZWVkID0gdGhpcy5zdGF0ZS5zdG9yeVNlZWQgKyB0aGlzLnN0YXRlLnByZXZpb3VzUmFuZG9tO1xuICAgICAgICAgIGxldCByYW5kb20gPSBuZXcgUFJORyhyZXN1bHRTZWVkKTtcblxuICAgICAgICAgIGxldCBuZXh0UmFuZG9tID0gcmFuZG9tLm5leHQoKTtcbiAgICAgICAgICBsZXQgY2hvc2VuVmFsdWUgPSAobmV4dFJhbmRvbSAlIHJhbmRvbVJhbmdlKSArIG1pbkludC52YWx1ZTtcbiAgICAgICAgICB0aGlzLnN0YXRlLlB1c2hFdmFsdWF0aW9uU3RhY2sobmV3IEludFZhbHVlKGNob3NlblZhbHVlKSk7XG5cbiAgICAgICAgICAvLyBOZXh0IHJhbmRvbSBudW1iZXIgKHJhdGhlciB0aGFuIGtlZXBpbmcgdGhlIFJhbmRvbSBvYmplY3QgYXJvdW5kKVxuICAgICAgICAgIHRoaXMuc3RhdGUucHJldmlvdXNSYW5kb20gPSBuZXh0UmFuZG9tO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FzZSBDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5TZWVkUmFuZG9tOlxuICAgICAgICAgIGxldCBzZWVkID0gYXNPck51bGwodGhpcy5zdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2soKSwgSW50VmFsdWUpO1xuICAgICAgICAgIGlmIChzZWVkID09IG51bGwgfHwgc2VlZCBpbnN0YW5jZW9mIEludFZhbHVlID09PSBmYWxzZSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkVycm9yKFwiSW52YWxpZCB2YWx1ZSBwYXNzZWQgdG8gU0VFRF9SQU5ET01cIik7XG5cbiAgICAgICAgICAvLyBPcmlnaW5hbGx5IGEgcHJpbWl0aXZlIHR5cGUsIGJ1dCBoZXJlLCBjYW4gYmUgbnVsbC5cbiAgICAgICAgICAvLyBUT0RPOiBSZXBsYWNlIGJ5IGRlZmF1bHQgdmFsdWU/XG4gICAgICAgICAgaWYgKHNlZWQudmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJtaW5JbnQudmFsdWVcIik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5zdGF0ZS5zdG9yeVNlZWQgPSBzZWVkLnZhbHVlO1xuICAgICAgICAgIHRoaXMuc3RhdGUucHJldmlvdXNSYW5kb20gPSAwO1xuXG4gICAgICAgICAgdGhpcy5zdGF0ZS5QdXNoRXZhbHVhdGlvblN0YWNrKG5ldyBWb2lkKCkpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuVmlzaXRJbmRleDpcbiAgICAgICAgICBsZXQgY291bnQgPVxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5WaXNpdENvdW50Rm9yQ29udGFpbmVyKFxuICAgICAgICAgICAgICB0aGlzLnN0YXRlLmN1cnJlbnRQb2ludGVyLmNvbnRhaW5lclxuICAgICAgICAgICAgKSAtIDE7IC8vIGluZGV4IG5vdCBjb3VudFxuICAgICAgICAgIHRoaXMuc3RhdGUuUHVzaEV2YWx1YXRpb25TdGFjayhuZXcgSW50VmFsdWUoY291bnQpKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLlNlcXVlbmNlU2h1ZmZsZUluZGV4OlxuICAgICAgICAgIGxldCBzaHVmZmxlSW5kZXggPSB0aGlzLk5leHRTZXF1ZW5jZVNodWZmbGVJbmRleCgpO1xuICAgICAgICAgIHRoaXMuc3RhdGUuUHVzaEV2YWx1YXRpb25TdGFjayhuZXcgSW50VmFsdWUoc2h1ZmZsZUluZGV4KSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5TdGFydFRocmVhZDpcbiAgICAgICAgICAvLyBIYW5kbGVkIGluIG1haW4gc3RlcCBmdW5jdGlvblxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuRG9uZTpcbiAgICAgICAgICAvLyBXZSBtYXkgZXhpc3QgaW4gdGhlIGNvbnRleHQgb2YgdGhlIGluaXRpYWxcbiAgICAgICAgICAvLyBhY3Qgb2YgY3JlYXRpbmcgdGhlIHRocmVhZCwgb3IgaW4gdGhlIGNvbnRleHQgb2ZcbiAgICAgICAgICAvLyBldmFsdWF0aW5nIHRoZSBjb250ZW50LlxuICAgICAgICAgIGlmICh0aGlzLnN0YXRlLmNhbGxTdGFjay5jYW5Qb3BUaHJlYWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuY2FsbFN0YWNrLlBvcFRocmVhZCgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEluIG5vcm1hbCBmbG93IC0gYWxsb3cgc2FmZSBleGl0IHdpdGhvdXQgd2FybmluZ1xuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5kaWRTYWZlRXhpdCA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIFN0b3AgZmxvdyBpbiBjdXJyZW50IHRocmVhZFxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5jdXJyZW50UG9pbnRlciA9IFBvaW50ZXIuTnVsbDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICAvLyBGb3JjZSBmbG93IHRvIGVuZCBjb21wbGV0ZWx5XG4gICAgICAgIGNhc2UgQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuRW5kOlxuICAgICAgICAgIHRoaXMuc3RhdGUuRm9yY2VFbmQoKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIENvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLkxpc3RGcm9tSW50OlxuICAgICAgICAgIC8vIHZhciBpbnRWYWwgPSBzdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2sgKCkgYXMgSW50VmFsdWU7XG4gICAgICAgICAgbGV0IGludFZhbCA9IGFzT3JOdWxsKHRoaXMuc3RhdGUuUG9wRXZhbHVhdGlvblN0YWNrKCksIEludFZhbHVlKTtcbiAgICAgICAgICAvLyB2YXIgbGlzdE5hbWVWYWwgPSBzdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2sgKCkgYXMgU3RyaW5nVmFsdWU7XG4gICAgICAgICAgbGV0IGxpc3ROYW1lVmFsID0gYXNPclRocm93cyhcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuUG9wRXZhbHVhdGlvblN0YWNrKCksXG4gICAgICAgICAgICBTdHJpbmdWYWx1ZVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBpZiAoaW50VmFsID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgU3RvcnlFeGNlcHRpb24oXG4gICAgICAgICAgICAgIFwiUGFzc2VkIG5vbi1pbnRlZ2VyIHdoZW4gY3JlYXRpbmcgYSBsaXN0IGVsZW1lbnQgZnJvbSBhIG51bWVyaWNhbCB2YWx1ZS5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsZXQgZ2VuZXJhdGVkTGlzdFZhbHVlID0gbnVsbDtcblxuICAgICAgICAgIGlmICh0aGlzLmxpc3REZWZpbml0aW9ucyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcInRoaXMubGlzdERlZmluaXRpb25zXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgZm91bmRMaXN0RGVmID0gdGhpcy5saXN0RGVmaW5pdGlvbnMuVHJ5TGlzdEdldERlZmluaXRpb24oXG4gICAgICAgICAgICBsaXN0TmFtZVZhbC52YWx1ZSxcbiAgICAgICAgICAgIG51bGxcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChmb3VuZExpc3REZWYuZXhpc3RzKSB7XG4gICAgICAgICAgICAvLyBPcmlnaW5hbGx5IGEgcHJpbWl0aXZlIHR5cGUsIGJ1dCBoZXJlLCBjYW4gYmUgbnVsbC5cbiAgICAgICAgICAgIC8vIFRPRE86IFJlcGxhY2UgYnkgZGVmYXVsdCB2YWx1ZT9cbiAgICAgICAgICAgIGlmIChpbnRWYWwudmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcIm1pbkludC52YWx1ZVwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGZvdW5kSXRlbSA9IGZvdW5kTGlzdERlZi5yZXN1bHQhLlRyeUdldEl0ZW1XaXRoVmFsdWUoXG4gICAgICAgICAgICAgIGludFZhbC52YWx1ZSxcbiAgICAgICAgICAgICAgSW5rTGlzdEl0ZW0uTnVsbFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChmb3VuZEl0ZW0uZXhpc3RzKSB7XG4gICAgICAgICAgICAgIGdlbmVyYXRlZExpc3RWYWx1ZSA9IG5ldyBMaXN0VmFsdWUoXG4gICAgICAgICAgICAgICAgZm91bmRJdGVtLnJlc3VsdCEsXG4gICAgICAgICAgICAgICAgaW50VmFsLnZhbHVlXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBTdG9yeUV4Y2VwdGlvbihcbiAgICAgICAgICAgICAgXCJGYWlsZWQgdG8gZmluZCBMSVNUIGNhbGxlZCBcIiArIGxpc3ROYW1lVmFsLnZhbHVlXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChnZW5lcmF0ZWRMaXN0VmFsdWUgPT0gbnVsbCkgZ2VuZXJhdGVkTGlzdFZhbHVlID0gbmV3IExpc3RWYWx1ZSgpO1xuXG4gICAgICAgICAgdGhpcy5zdGF0ZS5QdXNoRXZhbHVhdGlvblN0YWNrKGdlbmVyYXRlZExpc3RWYWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5MaXN0UmFuZ2U6XG4gICAgICAgICAgbGV0IG1heCA9IGFzT3JOdWxsKHRoaXMuc3RhdGUuUG9wRXZhbHVhdGlvblN0YWNrKCksIFZhbHVlKTtcbiAgICAgICAgICBsZXQgbWluID0gYXNPck51bGwodGhpcy5zdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2soKSwgVmFsdWUpO1xuXG4gICAgICAgICAgLy8gdmFyIHRhcmdldExpc3QgPSBzdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2sgKCkgYXMgTGlzdFZhbHVlO1xuICAgICAgICAgIGxldCB0YXJnZXRMaXN0ID0gYXNPck51bGwodGhpcy5zdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2soKSwgTGlzdFZhbHVlKTtcblxuICAgICAgICAgIGlmICh0YXJnZXRMaXN0ID09PSBudWxsIHx8IG1pbiA9PT0gbnVsbCB8fCBtYXggPT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgU3RvcnlFeGNlcHRpb24oXG4gICAgICAgICAgICAgIFwiRXhwZWN0ZWQgbGlzdCwgbWluaW11bSBhbmQgbWF4aW11bSBmb3IgTElTVF9SQU5HRVwiXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgaWYgKHRhcmdldExpc3QudmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJ0YXJnZXRMaXN0LnZhbHVlXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgcmVzdWx0ID0gdGFyZ2V0TGlzdC52YWx1ZS5MaXN0V2l0aFN1YlJhbmdlKFxuICAgICAgICAgICAgbWluLnZhbHVlT2JqZWN0LFxuICAgICAgICAgICAgbWF4LnZhbHVlT2JqZWN0XG4gICAgICAgICAgKTtcblxuICAgICAgICAgIHRoaXMuc3RhdGUuUHVzaEV2YWx1YXRpb25TdGFjayhuZXcgTGlzdFZhbHVlKHJlc3VsdCkpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgQ29udHJvbENvbW1hbmQuQ29tbWFuZFR5cGUuTGlzdFJhbmRvbToge1xuICAgICAgICAgIGxldCBsaXN0VmFsID0gdGhpcy5zdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2soKSBhcyBMaXN0VmFsdWU7XG4gICAgICAgICAgaWYgKGxpc3RWYWwgPT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgU3RvcnlFeGNlcHRpb24oXCJFeHBlY3RlZCBsaXN0IGZvciBMSVNUX1JBTkRPTVwiKTtcblxuICAgICAgICAgIGxldCBsaXN0ID0gbGlzdFZhbC52YWx1ZTtcblxuICAgICAgICAgIGxldCBuZXdMaXN0OiBJbmtMaXN0IHwgbnVsbCA9IG51bGw7XG5cbiAgICAgICAgICBpZiAobGlzdCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3cgdGhyb3dOdWxsRXhjZXB0aW9uKFwibGlzdFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGxpc3QuQ291bnQgPT0gMCkge1xuICAgICAgICAgICAgbmV3TGlzdCA9IG5ldyBJbmtMaXN0KCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIGEgcmFuZG9tIGluZGV4IGZvciB0aGUgZWxlbWVudCB0byB0YWtlXG4gICAgICAgICAgICBsZXQgcmVzdWx0U2VlZCA9IHRoaXMuc3RhdGUuc3RvcnlTZWVkICsgdGhpcy5zdGF0ZS5wcmV2aW91c1JhbmRvbTtcbiAgICAgICAgICAgIGxldCByYW5kb20gPSBuZXcgUFJORyhyZXN1bHRTZWVkKTtcblxuICAgICAgICAgICAgbGV0IG5leHRSYW5kb20gPSByYW5kb20ubmV4dCgpO1xuICAgICAgICAgICAgbGV0IGxpc3RJdGVtSW5kZXggPSBuZXh0UmFuZG9tICUgbGlzdC5Db3VudDtcblxuICAgICAgICAgICAgLy8gVGhpcyBiaXQgaXMgYSBsaXR0bGUgZGlmZmVyZW50IGZyb20gdGhlIG9yaWdpbmFsXG4gICAgICAgICAgICAvLyBDIyBjb2RlLCBzaW5jZSBpdGVyYXRvcnMgZG8gbm90IHdvcmsgaW4gdGhlIHNhbWUgd2F5LlxuICAgICAgICAgICAgLy8gRmlyc3QsIHdlIGl0ZXJhdGUgbGlzdEl0ZW1JbmRleCAtIDEgdGltZXMsIGNhbGxpbmcgbmV4dCgpLlxuICAgICAgICAgICAgLy8gVGhlIGxpc3RJdGVtSW5kZXgtdGggdGltZSBpcyBtYWRlIG91dHNpZGUgb2YgdGhlIGxvb3AsXG4gICAgICAgICAgICAvLyBpbiBvcmRlciB0byByZXRyaWV2ZSB0aGUgdmFsdWUuXG4gICAgICAgICAgICBsZXQgbGlzdEVudW1lcmF0b3IgPSBsaXN0LmVudHJpZXMoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IGxpc3RJdGVtSW5kZXggLSAxOyBpKyspIHtcbiAgICAgICAgICAgICAgbGlzdEVudW1lcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHZhbHVlID0gbGlzdEVudW1lcmF0b3IubmV4dCgpLnZhbHVlO1xuICAgICAgICAgICAgbGV0IHJhbmRvbUl0ZW06IEtleVZhbHVlUGFpcjxJbmtMaXN0SXRlbSwgbnVtYmVyPiA9IHtcbiAgICAgICAgICAgICAgS2V5OiBJbmtMaXN0SXRlbS5mcm9tU2VyaWFsaXplZEtleSh2YWx1ZVswXSksXG4gICAgICAgICAgICAgIFZhbHVlOiB2YWx1ZVsxXSxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIE9yaWdpbiBsaXN0IGlzIHNpbXBseSB0aGUgb3JpZ2luIG9mIHRoZSBvbmUgZWxlbWVudFxuICAgICAgICAgICAgaWYgKHJhbmRvbUl0ZW0uS2V5Lm9yaWdpbk5hbWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcInJhbmRvbUl0ZW0uS2V5Lm9yaWdpbk5hbWVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdMaXN0ID0gbmV3IElua0xpc3QocmFuZG9tSXRlbS5LZXkub3JpZ2luTmFtZSwgdGhpcyk7XG4gICAgICAgICAgICBuZXdMaXN0LkFkZChyYW5kb21JdGVtLktleSwgcmFuZG9tSXRlbS5WYWx1ZSk7XG5cbiAgICAgICAgICAgIHRoaXMuc3RhdGUucHJldmlvdXNSYW5kb20gPSBuZXh0UmFuZG9tO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuc3RhdGUuUHVzaEV2YWx1YXRpb25TdGFjayhuZXcgTGlzdFZhbHVlKG5ld0xpc3QpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhpcy5FcnJvcihcInVuaGFuZGxlZCBDb250cm9sQ29tbWFuZDogXCIgKyBldmFsQ29tbWFuZCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFZhcmlhYmxlIGFzc2lnbm1lbnRcbiAgICBlbHNlIGlmIChjb250ZW50T2JqIGluc3RhbmNlb2YgVmFyaWFibGVBc3NpZ25tZW50KSB7XG4gICAgICBsZXQgdmFyQXNzID0gY29udGVudE9iajtcbiAgICAgIGxldCBhc3NpZ25lZFZhbCA9IHRoaXMuc3RhdGUuUG9wRXZhbHVhdGlvblN0YWNrKCk7XG5cbiAgICAgIHRoaXMuc3RhdGUudmFyaWFibGVzU3RhdGUuQXNzaWduKHZhckFzcywgYXNzaWduZWRWYWwpO1xuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBWYXJpYWJsZSByZWZlcmVuY2VcbiAgICBlbHNlIGlmIChjb250ZW50T2JqIGluc3RhbmNlb2YgVmFyaWFibGVSZWZlcmVuY2UpIHtcbiAgICAgIGxldCB2YXJSZWYgPSBjb250ZW50T2JqO1xuICAgICAgbGV0IGZvdW5kVmFsdWUgPSBudWxsO1xuXG4gICAgICAvLyBFeHBsaWNpdCByZWFkIGNvdW50IHZhbHVlXG4gICAgICBpZiAodmFyUmVmLnBhdGhGb3JDb3VudCAhPSBudWxsKSB7XG4gICAgICAgIGxldCBjb250YWluZXIgPSB2YXJSZWYuY29udGFpbmVyRm9yQ291bnQ7XG4gICAgICAgIGxldCBjb3VudCA9IHRoaXMuc3RhdGUuVmlzaXRDb3VudEZvckNvbnRhaW5lcihjb250YWluZXIpO1xuICAgICAgICBmb3VuZFZhbHVlID0gbmV3IEludFZhbHVlKGNvdW50KTtcbiAgICAgIH1cblxuICAgICAgLy8gTm9ybWFsIHZhcmlhYmxlIHJlZmVyZW5jZVxuICAgICAgZWxzZSB7XG4gICAgICAgIGZvdW5kVmFsdWUgPSB0aGlzLnN0YXRlLnZhcmlhYmxlc1N0YXRlLkdldFZhcmlhYmxlV2l0aE5hbWUodmFyUmVmLm5hbWUpO1xuXG4gICAgICAgIGlmIChmb3VuZFZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICB0aGlzLldhcm5pbmcoXG4gICAgICAgICAgICBcIlZhcmlhYmxlIG5vdCBmb3VuZDogJ1wiICtcbiAgICAgICAgICAgICAgdmFyUmVmLm5hbWUgK1xuICAgICAgICAgICAgICBcIicuIFVzaW5nIGRlZmF1bHQgdmFsdWUgb2YgMCAoZmFsc2UpLiBUaGlzIGNhbiBoYXBwZW4gd2l0aCB0ZW1wb3JhcnkgdmFyaWFibGVzIGlmIHRoZSBkZWNsYXJhdGlvbiBoYXNuJ3QgeWV0IGJlZW4gaGl0LiBHbG9iYWxzIGFyZSBhbHdheXMgZ2l2ZW4gYSBkZWZhdWx0IHZhbHVlIG9uIGxvYWQgaWYgYSB2YWx1ZSBkb2Vzbid0IGV4aXN0IGluIHRoZSBzYXZlIHN0YXRlLlwiXG4gICAgICAgICAgKTtcbiAgICAgICAgICBmb3VuZFZhbHVlID0gbmV3IEludFZhbHVlKDApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuc3RhdGUuUHVzaEV2YWx1YXRpb25TdGFjayhmb3VuZFZhbHVlKTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gTmF0aXZlIGZ1bmN0aW9uIGNhbGxcbiAgICBlbHNlIGlmIChjb250ZW50T2JqIGluc3RhbmNlb2YgTmF0aXZlRnVuY3Rpb25DYWxsKSB7XG4gICAgICBsZXQgZnVuYyA9IGNvbnRlbnRPYmo7XG4gICAgICBsZXQgZnVuY1BhcmFtcyA9IHRoaXMuc3RhdGUuUG9wRXZhbHVhdGlvblN0YWNrKGZ1bmMubnVtYmVyT2ZQYXJhbWV0ZXJzKTtcbiAgICAgIGxldCByZXN1bHQgPSBmdW5jLkNhbGwoZnVuY1BhcmFtcyk7XG4gICAgICB0aGlzLnN0YXRlLlB1c2hFdmFsdWF0aW9uU3RhY2socmVzdWx0KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIE5vIGNvbnRyb2wgY29udGVudCwgbXVzdCBiZSBvcmRpbmFyeSBjb250ZW50XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHVibGljIENob29zZVBhdGhTdHJpbmcoXG4gICAgcGF0aDogc3RyaW5nLFxuICAgIHJlc2V0Q2FsbHN0YWNrID0gdHJ1ZSxcbiAgICBhcmdzOiBhbnlbXSA9IFtdXG4gICkge1xuICAgIHRoaXMuSWZBc3luY1dlQ2FudChcImNhbGwgQ2hvb3NlUGF0aFN0cmluZyByaWdodCBub3dcIik7XG4gICAgaWYgKHRoaXMub25DaG9vc2VQYXRoU3RyaW5nICE9PSBudWxsKSB0aGlzLm9uQ2hvb3NlUGF0aFN0cmluZyhwYXRoLCBhcmdzKTtcblxuICAgIGlmIChyZXNldENhbGxzdGFjaykge1xuICAgICAgdGhpcy5SZXNldENhbGxzdGFjaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5zdGF0ZS5jYWxsU3RhY2suY3VycmVudEVsZW1lbnQudHlwZSA9PSBQdXNoUG9wVHlwZS5GdW5jdGlvbikge1xuICAgICAgICBsZXQgZnVuY0RldGFpbCA9IFwiXCI7XG4gICAgICAgIGxldCBjb250YWluZXIgPVxuICAgICAgICAgIHRoaXMuc3RhdGUuY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50LmN1cnJlbnRQb2ludGVyLmNvbnRhaW5lcjtcbiAgICAgICAgaWYgKGNvbnRhaW5lciAhPSBudWxsKSB7XG4gICAgICAgICAgZnVuY0RldGFpbCA9IFwiKFwiICsgY29udGFpbmVyLnBhdGgudG9TdHJpbmcoKSArIFwiKSBcIjtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgXCJTdG9yeSB3YXMgcnVubmluZyBhIGZ1bmN0aW9uIFwiICtcbiAgICAgICAgICAgIGZ1bmNEZXRhaWwgK1xuICAgICAgICAgICAgXCJ3aGVuIHlvdSBjYWxsZWQgQ2hvb3NlUGF0aFN0cmluZyhcIiArXG4gICAgICAgICAgICBwYXRoICtcbiAgICAgICAgICAgIFwiKSAtIHRoaXMgaXMgYWxtb3N0IGNlcnRhaW5seSBub3Qgbm90IHdoYXQgeW91IHdhbnQhIEZ1bGwgc3RhY2sgdHJhY2U6IFxcblwiICtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuY2FsbFN0YWNrLmNhbGxTdGFja1RyYWNlXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zdGF0ZS5QYXNzQXJndW1lbnRzVG9FdmFsdWF0aW9uU3RhY2soYXJncyk7XG4gICAgdGhpcy5DaG9vc2VQYXRoKG5ldyBQYXRoKHBhdGgpKTtcbiAgfVxuXG4gIHB1YmxpYyBJZkFzeW5jV2VDYW50KGFjdGl2aXR5U3RyOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5fYXN5bmNDb250aW51ZUFjdGl2ZSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJDYW4ndCBcIiArXG4gICAgICAgICAgYWN0aXZpdHlTdHIgK1xuICAgICAgICAgIFwiLiBTdG9yeSBpcyBpbiB0aGUgbWlkZGxlIG9mIGEgQ29udGludWVBc3luYygpLiBNYWtlIG1vcmUgQ29udGludWVBc3luYygpIGNhbGxzIG9yIGEgc2luZ2xlIENvbnRpbnVlKCkgY2FsbCBiZWZvcmVoYW5kLlwiXG4gICAgICApO1xuICB9XG5cbiAgcHVibGljIENob29zZVBhdGgocDogUGF0aCwgaW5jcmVtZW50aW5nVHVybkluZGV4OiBib29sZWFuID0gdHJ1ZSkge1xuICAgIHRoaXMuc3RhdGUuU2V0Q2hvc2VuUGF0aChwLCBpbmNyZW1lbnRpbmdUdXJuSW5kZXgpO1xuXG4gICAgLy8gVGFrZSBhIG5vdGUgb2YgbmV3bHkgdmlzaXRlZCBjb250YWluZXJzIGZvciByZWFkIGNvdW50cyBldGNcbiAgICB0aGlzLlZpc2l0Q2hhbmdlZENvbnRhaW5lcnNEdWVUb0RpdmVydCgpO1xuICB9XG5cbiAgcHVibGljIENob29zZUNob2ljZUluZGV4KGNob2ljZUlkeDogbnVtYmVyKSB7XG4gICAgY2hvaWNlSWR4ID0gY2hvaWNlSWR4O1xuICAgIGxldCBjaG9pY2VzID0gdGhpcy5jdXJyZW50Q2hvaWNlcztcbiAgICB0aGlzLkFzc2VydChcbiAgICAgIGNob2ljZUlkeCA+PSAwICYmIGNob2ljZUlkeCA8IGNob2ljZXMubGVuZ3RoLFxuICAgICAgXCJjaG9pY2Ugb3V0IG9mIHJhbmdlXCJcbiAgICApO1xuXG4gICAgbGV0IGNob2ljZVRvQ2hvb3NlID0gY2hvaWNlc1tjaG9pY2VJZHhdO1xuICAgIGlmICh0aGlzLm9uTWFrZUNob2ljZSAhPT0gbnVsbCkgdGhpcy5vbk1ha2VDaG9pY2UoY2hvaWNlVG9DaG9vc2UpO1xuXG4gICAgaWYgKGNob2ljZVRvQ2hvb3NlLnRocmVhZEF0R2VuZXJhdGlvbiA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcImNob2ljZVRvQ2hvb3NlLnRocmVhZEF0R2VuZXJhdGlvblwiKTtcbiAgICB9XG4gICAgaWYgKGNob2ljZVRvQ2hvb3NlLnRhcmdldFBhdGggPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJjaG9pY2VUb0Nob29zZS50YXJnZXRQYXRoXCIpO1xuICAgIH1cblxuICAgIHRoaXMuc3RhdGUuY2FsbFN0YWNrLmN1cnJlbnRUaHJlYWQgPSBjaG9pY2VUb0Nob29zZS50aHJlYWRBdEdlbmVyYXRpb247XG5cbiAgICB0aGlzLkNob29zZVBhdGgoY2hvaWNlVG9DaG9vc2UudGFyZ2V0UGF0aCk7XG4gIH1cblxuICBwdWJsaWMgSGFzRnVuY3Rpb24oZnVuY3Rpb25OYW1lOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHRoaXMuS25vdENvbnRhaW5lcldpdGhOYW1lKGZ1bmN0aW9uTmFtZSkgIT0gbnVsbDtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIEV2YWx1YXRlRnVuY3Rpb24oXG4gICAgZnVuY3Rpb25OYW1lOiBzdHJpbmcsXG4gICAgYXJnczogYW55W10gPSBbXSxcbiAgICByZXR1cm5UZXh0T3V0cHV0OiBib29sZWFuID0gZmFsc2VcbiAgKTogU3RvcnkuRXZhbHVhdGVGdW5jdGlvblRleHRPdXRwdXQgfCBhbnkge1xuICAgIC8vIEV2YWx1YXRlRnVuY3Rpb24gYmVoYXZlcyBzbGlnaHRseSBkaWZmZXJlbnRseSB0aGFuIHRoZSBDIyB2ZXJzaW9uLlxuICAgIC8vIEluIEMjLCB5b3UgY2FuIHBhc3MgYSAoc2Vjb25kKSBwYXJhbWV0ZXIgYG91dCB0ZXh0T3V0cHV0YCB0byBnZXQgdGhlXG4gICAgLy8gdGV4dCBvdXRwdXR0ZWQgYnkgdGhlIGZ1bmN0aW9uLiBUaGlzIGlzIG5vdCBwb3NzaWJsZSBpbiBqcy4gSW5zdGVhZCxcbiAgICAvLyB3ZSBtYWludGFpbiB0aGUgcmVndWxhciBzaWduYXR1cmUgKGZ1bmN0aW9uTmFtZSwgYXJncyksIHBsdXMgYW5cbiAgICAvLyBvcHRpb25hbCB0aGlyZCBwYXJhbWV0ZXIgcmV0dXJuVGV4dE91dHB1dC4gSWYgc2V0IHRvIHRydWUsIHdlIHdpbGxcbiAgICAvLyByZXR1cm4gYm90aCB0aGUgdGV4dE91dHB1dCBhbmQgdGhlIHJldHVybmVkIHZhbHVlLCBhcyBhbiBvYmplY3QuXG5cbiAgICBpZiAodGhpcy5vbkV2YWx1YXRlRnVuY3Rpb24gIT09IG51bGwpXG4gICAgICB0aGlzLm9uRXZhbHVhdGVGdW5jdGlvbihmdW5jdGlvbk5hbWUsIGFyZ3MpO1xuXG4gICAgdGhpcy5JZkFzeW5jV2VDYW50KFwiZXZhbHVhdGUgYSBmdW5jdGlvblwiKTtcblxuICAgIGlmIChmdW5jdGlvbk5hbWUgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRnVuY3Rpb24gaXMgbnVsbFwiKTtcbiAgICB9IGVsc2UgaWYgKGZ1bmN0aW9uTmFtZSA9PSBcIlwiIHx8IGZ1bmN0aW9uTmFtZS50cmltKCkgPT0gXCJcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRnVuY3Rpb24gaXMgZW1wdHkgb3Igd2hpdGUgc3BhY2UuXCIpO1xuICAgIH1cblxuICAgIGxldCBmdW5jQ29udGFpbmVyID0gdGhpcy5Lbm90Q29udGFpbmVyV2l0aE5hbWUoZnVuY3Rpb25OYW1lKTtcbiAgICBpZiAoZnVuY0NvbnRhaW5lciA9PSBudWxsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGdW5jdGlvbiBkb2Vzbid0IGV4aXN0OiAnXCIgKyBmdW5jdGlvbk5hbWUgKyBcIidcIik7XG4gICAgfVxuXG4gICAgbGV0IG91dHB1dFN0cmVhbUJlZm9yZTogSW5rT2JqZWN0W10gPSBbXTtcbiAgICBvdXRwdXRTdHJlYW1CZWZvcmUucHVzaCguLi50aGlzLnN0YXRlLm91dHB1dFN0cmVhbSk7XG4gICAgdGhpcy5fc3RhdGUuUmVzZXRPdXRwdXQoKTtcblxuICAgIHRoaXMuc3RhdGUuU3RhcnRGdW5jdGlvbkV2YWx1YXRpb25Gcm9tR2FtZShmdW5jQ29udGFpbmVyLCBhcmdzKTtcblxuICAgIC8vIEV2YWx1YXRlIHRoZSBmdW5jdGlvbiwgYW5kIGNvbGxlY3QgdGhlIHN0cmluZyBvdXRwdXRcbiAgICBsZXQgc3RyaW5nT3V0cHV0ID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcbiAgICB3aGlsZSAodGhpcy5jYW5Db250aW51ZSkge1xuICAgICAgc3RyaW5nT3V0cHV0LkFwcGVuZCh0aGlzLkNvbnRpbnVlKCkpO1xuICAgIH1cbiAgICBsZXQgdGV4dE91dHB1dCA9IHN0cmluZ091dHB1dC50b1N0cmluZygpO1xuXG4gICAgdGhpcy5fc3RhdGUuUmVzZXRPdXRwdXQob3V0cHV0U3RyZWFtQmVmb3JlKTtcblxuICAgIGxldCByZXN1bHQgPSB0aGlzLnN0YXRlLkNvbXBsZXRlRnVuY3Rpb25FdmFsdWF0aW9uRnJvbUdhbWUoKTtcbiAgICBpZiAodGhpcy5vbkNvbXBsZXRlRXZhbHVhdGVGdW5jdGlvbiAhPSBudWxsKVxuICAgICAgdGhpcy5vbkNvbXBsZXRlRXZhbHVhdGVGdW5jdGlvbihmdW5jdGlvbk5hbWUsIGFyZ3MsIHRleHRPdXRwdXQsIHJlc3VsdCk7XG5cbiAgICByZXR1cm4gcmV0dXJuVGV4dE91dHB1dCA/IHsgcmV0dXJuZWQ6IHJlc3VsdCwgb3V0cHV0OiB0ZXh0T3V0cHV0IH0gOiByZXN1bHQ7XG4gIH1cblxuICBwdWJsaWMgRXZhbHVhdGVFeHByZXNzaW9uKGV4cHJDb250YWluZXI6IENvbnRhaW5lcikge1xuICAgIGxldCBzdGFydENhbGxTdGFja0hlaWdodCA9IHRoaXMuc3RhdGUuY2FsbFN0YWNrLmVsZW1lbnRzLmxlbmd0aDtcblxuICAgIHRoaXMuc3RhdGUuY2FsbFN0YWNrLlB1c2goUHVzaFBvcFR5cGUuVHVubmVsKTtcblxuICAgIHRoaXMuX3RlbXBvcmFyeUV2YWx1YXRpb25Db250YWluZXIgPSBleHByQ29udGFpbmVyO1xuXG4gICAgdGhpcy5zdGF0ZS5Hb1RvU3RhcnQoKTtcblxuICAgIGxldCBldmFsU3RhY2tIZWlnaHQgPSB0aGlzLnN0YXRlLmV2YWx1YXRpb25TdGFjay5sZW5ndGg7XG5cbiAgICB0aGlzLkNvbnRpbnVlKCk7XG5cbiAgICB0aGlzLl90ZW1wb3JhcnlFdmFsdWF0aW9uQ29udGFpbmVyID0gbnVsbDtcblxuICAgIC8vIFNob3VsZCBoYXZlIGZhbGxlbiBvZmYgdGhlIGVuZCBvZiB0aGUgQ29udGFpbmVyLCB3aGljaCBzaG91bGRcbiAgICAvLyBoYXZlIGF1dG8tcG9wcGVkLCBidXQganVzdCBpbiBjYXNlIHdlIGRpZG4ndCBmb3Igc29tZSByZWFzb24sXG4gICAgLy8gbWFudWFsbHkgcG9wIHRvIHJlc3RvcmUgdGhlIHN0YXRlIChpbmNsdWRpbmcgY3VycmVudFBhdGgpLlxuICAgIGlmICh0aGlzLnN0YXRlLmNhbGxTdGFjay5lbGVtZW50cy5sZW5ndGggPiBzdGFydENhbGxTdGFja0hlaWdodCkge1xuICAgICAgdGhpcy5zdGF0ZS5Qb3BDYWxsU3RhY2soKTtcbiAgICB9XG5cbiAgICBsZXQgZW5kU3RhY2tIZWlnaHQgPSB0aGlzLnN0YXRlLmV2YWx1YXRpb25TdGFjay5sZW5ndGg7XG4gICAgaWYgKGVuZFN0YWNrSGVpZ2h0ID4gZXZhbFN0YWNrSGVpZ2h0KSB7XG4gICAgICByZXR1cm4gdGhpcy5zdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2soKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGFsbG93RXh0ZXJuYWxGdW5jdGlvbkZhbGxiYWNrczogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHB1YmxpYyBDYWxsRXh0ZXJuYWxGdW5jdGlvbihcbiAgICBmdW5jTmFtZTogc3RyaW5nIHwgbnVsbCxcbiAgICBudW1iZXJPZkFyZ3VtZW50czogbnVtYmVyXG4gICkge1xuICAgIGlmIChmdW5jTmFtZSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcImZ1bmNOYW1lXCIpO1xuICAgIH1cbiAgICBsZXQgZnVuY0RlZiA9IHRoaXMuX2V4dGVybmFscy5nZXQoZnVuY05hbWUpO1xuICAgIGxldCBmYWxsYmFja0Z1bmN0aW9uQ29udGFpbmVyID0gbnVsbDtcblxuICAgIGxldCBmb3VuZEV4dGVybmFsID0gdHlwZW9mIGZ1bmNEZWYgIT09IFwidW5kZWZpbmVkXCI7XG5cbiAgICBpZiAoXG4gICAgICBmb3VuZEV4dGVybmFsICYmXG4gICAgICAhZnVuY0RlZiEubG9va0FoZWFkU2FmZSAmJlxuICAgICAgdGhpcy5fc3RhdGUuaW5TdHJpbmdFdmFsdWF0aW9uXG4gICAgKSB7XG4gICAgICB0aGlzLkVycm9yKFxuICAgICAgICBcIkV4dGVybmFsIGZ1bmN0aW9uIFwiICtcbiAgICAgICAgICBmdW5jTmFtZSArXG4gICAgICAgICAgJyBjb3VsZCBub3QgYmUgY2FsbGVkIGJlY2F1c2UgMSkgaXQgd2FzblxcJ3QgbWFya2VkIGFzIGxvb2thaGVhZFNhZmUgd2hlbiBCaW5kRXh0ZXJuYWxGdW5jdGlvbiB3YXMgY2FsbGVkIGFuZCAyKSB0aGUgc3RvcnkgaXMgaW4gdGhlIG1pZGRsZSBvZiBzdHJpbmcgZ2VuZXJhdGlvbiwgZWl0aGVyIGJlY2F1c2UgY2hvaWNlIHRleHQgaXMgYmVpbmcgZ2VuZXJhdGVkLCBvciBiZWNhdXNlIHlvdSBoYXZlIGluayBsaWtlIFwiaGVsbG8ge2Z1bmMoKX1cIi4gWW91IGNhbiB3b3JrIGFyb3VuZCB0aGlzIGJ5IGdlbmVyYXRpbmcgdGhlIHJlc3VsdCBvZiB5b3VyIGZ1bmN0aW9uIGludG8gYSB0ZW1wb3JhcnkgdmFyaWFibGUgYmVmb3JlIHRoZSBzdHJpbmcgb3IgY2hvaWNlIGdldHMgZ2VuZXJhdGVkOiB+IHRlbXAgeCA9ICcgK1xuICAgICAgICAgIGZ1bmNOYW1lICtcbiAgICAgICAgICBcIigpXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgZm91bmRFeHRlcm5hbCAmJlxuICAgICAgIWZ1bmNEZWYhLmxvb2tBaGVhZFNhZmUgJiZcbiAgICAgIHRoaXMuX3N0YXRlU25hcHNob3RBdExhc3ROZXdsaW5lICE9PSBudWxsXG4gICAgKSB7XG4gICAgICB0aGlzLl9zYXdMb29rYWhlYWRVbnNhZmVGdW5jdGlvbkFmdGVyTmV3bGluZSA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFmb3VuZEV4dGVybmFsKSB7XG4gICAgICBpZiAodGhpcy5hbGxvd0V4dGVybmFsRnVuY3Rpb25GYWxsYmFja3MpIHtcbiAgICAgICAgZmFsbGJhY2tGdW5jdGlvbkNvbnRhaW5lciA9IHRoaXMuS25vdENvbnRhaW5lcldpdGhOYW1lKGZ1bmNOYW1lKTtcbiAgICAgICAgdGhpcy5Bc3NlcnQoXG4gICAgICAgICAgZmFsbGJhY2tGdW5jdGlvbkNvbnRhaW5lciAhPT0gbnVsbCxcbiAgICAgICAgICBcIlRyeWluZyB0byBjYWxsIEVYVEVSTkFMIGZ1bmN0aW9uICdcIiArXG4gICAgICAgICAgICBmdW5jTmFtZSArXG4gICAgICAgICAgICBcIicgd2hpY2ggaGFzIG5vdCBiZWVuIGJvdW5kLCBhbmQgZmFsbGJhY2sgaW5rIGZ1bmN0aW9uIGNvdWxkIG5vdCBiZSBmb3VuZC5cIlxuICAgICAgICApO1xuXG4gICAgICAgIC8vIERpdmVydCBkaXJlY3QgaW50byBmYWxsYmFjayBmdW5jdGlvbiBhbmQgd2UncmUgZG9uZVxuICAgICAgICB0aGlzLnN0YXRlLmNhbGxTdGFjay5QdXNoKFxuICAgICAgICAgIFB1c2hQb3BUeXBlLkZ1bmN0aW9uLFxuICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICB0aGlzLnN0YXRlLm91dHB1dFN0cmVhbS5sZW5ndGhcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5zdGF0ZS5kaXZlcnRlZFBvaW50ZXIgPSBQb2ludGVyLlN0YXJ0T2YoZmFsbGJhY2tGdW5jdGlvbkNvbnRhaW5lcik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuQXNzZXJ0KFxuICAgICAgICAgIGZhbHNlLFxuICAgICAgICAgIFwiVHJ5aW5nIHRvIGNhbGwgRVhURVJOQUwgZnVuY3Rpb24gJ1wiICtcbiAgICAgICAgICAgIGZ1bmNOYW1lICtcbiAgICAgICAgICAgIFwiJyB3aGljaCBoYXMgbm90IGJlZW4gYm91bmQgKGFuZCBpbmsgZmFsbGJhY2tzIGRpc2FibGVkKS5cIlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFBvcCBhcmd1bWVudHNcbiAgICBsZXQgYXJnczogYW55W10gPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlck9mQXJndW1lbnRzOyArK2kpIHtcbiAgICAgIC8vIHZhciBwb3BwZWRPYmogPSBzdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2sgKCkgYXMgVmFsdWU7XG4gICAgICBsZXQgcG9wcGVkT2JqID0gYXNPclRocm93cyh0aGlzLnN0YXRlLlBvcEV2YWx1YXRpb25TdGFjaygpLCBWYWx1ZSk7XG4gICAgICBsZXQgdmFsdWVPYmogPSBwb3BwZWRPYmoudmFsdWVPYmplY3Q7XG4gICAgICBhcmdzLnB1c2godmFsdWVPYmopO1xuICAgIH1cblxuICAgIC8vIFJldmVyc2UgYXJndW1lbnRzIGZyb20gdGhlIG9yZGVyIHRoZXkgd2VyZSBwb3BwZWQsXG4gICAgLy8gc28gdGhleSdyZSB0aGUgcmlnaHQgd2F5IHJvdW5kIGFnYWluLlxuICAgIGFyZ3MucmV2ZXJzZSgpO1xuXG4gICAgLy8gUnVuIHRoZSBmdW5jdGlvbiFcbiAgICBsZXQgZnVuY1Jlc3VsdCA9IGZ1bmNEZWYhLmZ1bmN0aW9uKGFyZ3MpO1xuXG4gICAgLy8gQ29udmVydCByZXR1cm4gdmFsdWUgKGlmIGFueSkgdG8gdGhlIGEgdHlwZSB0aGF0IHRoZSBpbmsgZW5naW5lIGNhbiB1c2VcbiAgICBsZXQgcmV0dXJuT2JqID0gbnVsbDtcbiAgICBpZiAoZnVuY1Jlc3VsdCAhPSBudWxsKSB7XG4gICAgICByZXR1cm5PYmogPSBWYWx1ZS5DcmVhdGUoZnVuY1Jlc3VsdCk7XG4gICAgICB0aGlzLkFzc2VydChcbiAgICAgICAgcmV0dXJuT2JqICE9PSBudWxsLFxuICAgICAgICBcIkNvdWxkIG5vdCBjcmVhdGUgaW5rIHZhbHVlIGZyb20gcmV0dXJuZWQgb2JqZWN0IG9mIHR5cGUgXCIgK1xuICAgICAgICAgIHR5cGVvZiBmdW5jUmVzdWx0XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm5PYmogPSBuZXcgVm9pZCgpO1xuICAgIH1cblxuICAgIHRoaXMuc3RhdGUuUHVzaEV2YWx1YXRpb25TdGFjayhyZXR1cm5PYmopO1xuICB9XG5cbiAgcHVibGljIEJpbmRFeHRlcm5hbEZ1bmN0aW9uR2VuZXJhbChcbiAgICBmdW5jTmFtZTogc3RyaW5nLFxuICAgIGZ1bmM6IFN0b3J5LkV4dGVybmFsRnVuY3Rpb24sXG4gICAgbG9va2FoZWFkU2FmZTogYm9vbGVhbiA9IHRydWVcbiAgKSB7XG4gICAgdGhpcy5JZkFzeW5jV2VDYW50KFwiYmluZCBhbiBleHRlcm5hbCBmdW5jdGlvblwiKTtcbiAgICB0aGlzLkFzc2VydChcbiAgICAgICF0aGlzLl9leHRlcm5hbHMuaGFzKGZ1bmNOYW1lKSxcbiAgICAgIFwiRnVuY3Rpb24gJ1wiICsgZnVuY05hbWUgKyBcIicgaGFzIGFscmVhZHkgYmVlbiBib3VuZC5cIlxuICAgICk7XG4gICAgdGhpcy5fZXh0ZXJuYWxzLnNldChmdW5jTmFtZSwge1xuICAgICAgZnVuY3Rpb246IGZ1bmMsXG4gICAgICBsb29rQWhlYWRTYWZlOiBsb29rYWhlYWRTYWZlLFxuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIFRyeUNvZXJjZSh2YWx1ZTogYW55KSB7XG4gICAgLy8gV2UncmUgc2tpcHBpbmcgdHlwZSBjb2VyY2l0aW9uIGluIHRoaXMgaW1wbGVtZW50YXRpb24uIEZpcnN0IG9mLCBqc1xuICAgIC8vIGlzIGxvb3NlbHkgdHlwZWQsIHNvIGl0J3Mgbm90IHRoYXQgaW1wb3J0YW50LiBTZWNvbmRseSwgdGhlcmUgaXMgbm9cbiAgICAvLyBjbGVhbiB3YXkgKEFGQUlLKSBmb3IgdGhlIHVzZXIgdG8gZGVzY3JpYmUgd2hhdCB0eXBlIG9mIHBhcmFtZXRlcnNcbiAgICAvLyB0aGV5IGV4cGVjdC5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBwdWJsaWMgQmluZEV4dGVybmFsRnVuY3Rpb24oXG4gICAgZnVuY05hbWU6IHN0cmluZyxcbiAgICBmdW5jOiBTdG9yeS5FeHRlcm5hbEZ1bmN0aW9uLFxuICAgIGxvb2thaGVhZFNhZmU6IGJvb2xlYW4gPSBmYWxzZVxuICApIHtcbiAgICB0aGlzLkFzc2VydChmdW5jICE9IG51bGwsIFwiQ2FuJ3QgYmluZCBhIG51bGwgZnVuY3Rpb25cIik7XG5cbiAgICB0aGlzLkJpbmRFeHRlcm5hbEZ1bmN0aW9uR2VuZXJhbChcbiAgICAgIGZ1bmNOYW1lLFxuICAgICAgKGFyZ3M6IGFueSkgPT4ge1xuICAgICAgICB0aGlzLkFzc2VydChcbiAgICAgICAgICBhcmdzLmxlbmd0aCA+PSBmdW5jLmxlbmd0aCxcbiAgICAgICAgICBcIkV4dGVybmFsIGZ1bmN0aW9uIGV4cGVjdGVkIFwiICsgZnVuYy5sZW5ndGggKyBcIiBhcmd1bWVudHNcIlxuICAgICAgICApO1xuXG4gICAgICAgIGxldCBjb2VyY2VkQXJncyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGFyZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgY29lcmNlZEFyZ3NbaV0gPSB0aGlzLlRyeUNvZXJjZShhcmdzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuYy5hcHBseShudWxsLCBjb2VyY2VkQXJncyk7XG4gICAgICB9LFxuICAgICAgbG9va2FoZWFkU2FmZVxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgVW5iaW5kRXh0ZXJuYWxGdW5jdGlvbihmdW5jTmFtZTogc3RyaW5nKSB7XG4gICAgdGhpcy5JZkFzeW5jV2VDYW50KFwidW5iaW5kIGFuIGV4dGVybmFsIGEgZnVuY3Rpb25cIik7XG4gICAgdGhpcy5Bc3NlcnQoXG4gICAgICB0aGlzLl9leHRlcm5hbHMuaGFzKGZ1bmNOYW1lKSxcbiAgICAgIFwiRnVuY3Rpb24gJ1wiICsgZnVuY05hbWUgKyBcIicgaGFzIG5vdCBiZWVuIGJvdW5kLlwiXG4gICAgKTtcbiAgICB0aGlzLl9leHRlcm5hbHMuZGVsZXRlKGZ1bmNOYW1lKTtcbiAgfVxuXG4gIHB1YmxpYyBWYWxpZGF0ZUV4dGVybmFsQmluZGluZ3MoKTogdm9pZDtcbiAgcHVibGljIFZhbGlkYXRlRXh0ZXJuYWxCaW5kaW5ncyhcbiAgICBjOiBDb250YWluZXIgfCBudWxsLFxuICAgIG1pc3NpbmdFeHRlcm5hbHM6IFNldDxzdHJpbmc+XG4gICk6IHZvaWQ7XG4gIHB1YmxpYyBWYWxpZGF0ZUV4dGVybmFsQmluZGluZ3MoXG4gICAgbzogSW5rT2JqZWN0IHwgbnVsbCxcbiAgICBtaXNzaW5nRXh0ZXJuYWxzOiBTZXQ8c3RyaW5nPlxuICApOiB2b2lkO1xuICBwdWJsaWMgVmFsaWRhdGVFeHRlcm5hbEJpbmRpbmdzKCkge1xuICAgIGxldCBjOiBDb250YWluZXIgfCBudWxsID0gbnVsbDtcbiAgICBsZXQgbzogSW5rT2JqZWN0IHwgbnVsbCA9IG51bGw7XG4gICAgbGV0IG1pc3NpbmdFeHRlcm5hbHM6IFNldDxzdHJpbmc+ID0gYXJndW1lbnRzWzFdIHx8IG5ldyBTZXQoKTtcblxuICAgIGlmIChhcmd1bWVudHNbMF0gaW5zdGFuY2VvZiBDb250YWluZXIpIHtcbiAgICAgIGMgPSBhcmd1bWVudHNbMF07XG4gICAgfVxuXG4gICAgaWYgKGFyZ3VtZW50c1swXSBpbnN0YW5jZW9mIElua09iamVjdCkge1xuICAgICAgbyA9IGFyZ3VtZW50c1swXTtcbiAgICB9XG5cbiAgICBpZiAoYyA9PT0gbnVsbCAmJiBvID09PSBudWxsKSB7XG4gICAgICB0aGlzLlZhbGlkYXRlRXh0ZXJuYWxCaW5kaW5ncyhcbiAgICAgICAgdGhpcy5fbWFpbkNvbnRlbnRDb250YWluZXIsXG4gICAgICAgIG1pc3NpbmdFeHRlcm5hbHNcbiAgICAgICk7XG4gICAgICB0aGlzLl9oYXNWYWxpZGF0ZWRFeHRlcm5hbHMgPSB0cnVlO1xuXG4gICAgICAvLyBObyBwcm9ibGVtISBWYWxpZGF0aW9uIGNvbXBsZXRlXG4gICAgICBpZiAobWlzc2luZ0V4dGVybmFscy5zaXplID09IDApIHtcbiAgICAgICAgdGhpcy5faGFzVmFsaWRhdGVkRXh0ZXJuYWxzID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBtZXNzYWdlID0gXCJFcnJvcjogTWlzc2luZyBmdW5jdGlvbiBiaW5kaW5nIGZvciBleHRlcm5hbFwiO1xuICAgICAgICBtZXNzYWdlICs9IG1pc3NpbmdFeHRlcm5hbHMuc2l6ZSA+IDEgPyBcInNcIiA6IFwiXCI7XG4gICAgICAgIG1lc3NhZ2UgKz0gXCI6ICdcIjtcbiAgICAgICAgbWVzc2FnZSArPSBBcnJheS5mcm9tKG1pc3NpbmdFeHRlcm5hbHMpLmpvaW4oXCInLCAnXCIpO1xuICAgICAgICBtZXNzYWdlICs9IFwiJyBcIjtcbiAgICAgICAgbWVzc2FnZSArPSB0aGlzLmFsbG93RXh0ZXJuYWxGdW5jdGlvbkZhbGxiYWNrc1xuICAgICAgICAgID8gXCIsIGFuZCBubyBmYWxsYmFjayBpbmsgZnVuY3Rpb24gZm91bmQuXCJcbiAgICAgICAgICA6IFwiIChpbmsgZmFsbGJhY2tzIGRpc2FibGVkKVwiO1xuXG4gICAgICAgIHRoaXMuRXJyb3IobWVzc2FnZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjICE9IG51bGwpIHtcbiAgICAgIGZvciAobGV0IGlubmVyQ29udGVudCBvZiBjLmNvbnRlbnQpIHtcbiAgICAgICAgbGV0IGNvbnRhaW5lciA9IGlubmVyQ29udGVudCBhcyBDb250YWluZXI7XG4gICAgICAgIGlmIChjb250YWluZXIgPT0gbnVsbCB8fCAhY29udGFpbmVyLmhhc1ZhbGlkTmFtZSlcbiAgICAgICAgICB0aGlzLlZhbGlkYXRlRXh0ZXJuYWxCaW5kaW5ncyhpbm5lckNvbnRlbnQsIG1pc3NpbmdFeHRlcm5hbHMpO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgWywgdmFsdWVdIG9mIGMubmFtZWRDb250ZW50KSB7XG4gICAgICAgIHRoaXMuVmFsaWRhdGVFeHRlcm5hbEJpbmRpbmdzKFxuICAgICAgICAgIGFzT3JOdWxsKHZhbHVlLCBJbmtPYmplY3QpLFxuICAgICAgICAgIG1pc3NpbmdFeHRlcm5hbHNcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG8gIT0gbnVsbCkge1xuICAgICAgbGV0IGRpdmVydCA9IGFzT3JOdWxsKG8sIERpdmVydCk7XG4gICAgICBpZiAoZGl2ZXJ0ICYmIGRpdmVydC5pc0V4dGVybmFsKSB7XG4gICAgICAgIGxldCBuYW1lID0gZGl2ZXJ0LnRhcmdldFBhdGhTdHJpbmc7XG4gICAgICAgIGlmIChuYW1lID09PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcIm5hbWVcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9leHRlcm5hbHMuaGFzKG5hbWUpKSB7XG4gICAgICAgICAgaWYgKHRoaXMuYWxsb3dFeHRlcm5hbEZ1bmN0aW9uRmFsbGJhY2tzKSB7XG4gICAgICAgICAgICBsZXQgZmFsbGJhY2tGb3VuZCA9XG4gICAgICAgICAgICAgIHRoaXMubWFpbkNvbnRlbnRDb250YWluZXIubmFtZWRDb250ZW50LmhhcyhuYW1lKTtcbiAgICAgICAgICAgIGlmICghZmFsbGJhY2tGb3VuZCkge1xuICAgICAgICAgICAgICBtaXNzaW5nRXh0ZXJuYWxzLmFkZChuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWlzc2luZ0V4dGVybmFscy5hZGQobmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIE9ic2VydmVWYXJpYWJsZShcbiAgICB2YXJpYWJsZU5hbWU6IHN0cmluZyxcbiAgICBvYnNlcnZlcjogU3RvcnkuVmFyaWFibGVPYnNlcnZlclxuICApIHtcbiAgICB0aGlzLklmQXN5bmNXZUNhbnQoXCJvYnNlcnZlIGEgbmV3IHZhcmlhYmxlXCIpO1xuXG4gICAgaWYgKHRoaXMuX3ZhcmlhYmxlT2JzZXJ2ZXJzID09PSBudWxsKSB0aGlzLl92YXJpYWJsZU9ic2VydmVycyA9IG5ldyBNYXAoKTtcblxuICAgIGlmICghdGhpcy5zdGF0ZS52YXJpYWJsZXNTdGF0ZS5HbG9iYWxWYXJpYWJsZUV4aXN0c1dpdGhOYW1lKHZhcmlhYmxlTmFtZSkpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiQ2Fubm90IG9ic2VydmUgdmFyaWFibGUgJ1wiICtcbiAgICAgICAgICB2YXJpYWJsZU5hbWUgK1xuICAgICAgICAgIFwiJyBiZWNhdXNlIGl0IHdhc24ndCBkZWNsYXJlZCBpbiB0aGUgaW5rIHN0b3J5LlwiXG4gICAgICApO1xuXG4gICAgaWYgKHRoaXMuX3ZhcmlhYmxlT2JzZXJ2ZXJzLmhhcyh2YXJpYWJsZU5hbWUpKSB7XG4gICAgICB0aGlzLl92YXJpYWJsZU9ic2VydmVycy5nZXQodmFyaWFibGVOYW1lKSEucHVzaChvYnNlcnZlcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3ZhcmlhYmxlT2JzZXJ2ZXJzLnNldCh2YXJpYWJsZU5hbWUsIFtvYnNlcnZlcl0pO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBPYnNlcnZlVmFyaWFibGVzKFxuICAgIHZhcmlhYmxlTmFtZXM6IHN0cmluZ1tdLFxuICAgIG9ic2VydmVyczogU3RvcnkuVmFyaWFibGVPYnNlcnZlcltdXG4gICkge1xuICAgIGZvciAobGV0IGkgPSAwLCBsID0gdmFyaWFibGVOYW1lcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHRoaXMuT2JzZXJ2ZVZhcmlhYmxlKHZhcmlhYmxlTmFtZXNbaV0sIG9ic2VydmVyc1tpXSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIFJlbW92ZVZhcmlhYmxlT2JzZXJ2ZXIoXG4gICAgb2JzZXJ2ZXI/OiBTdG9yeS5WYXJpYWJsZU9ic2VydmVyLFxuICAgIHNwZWNpZmljVmFyaWFibGVOYW1lPzogc3RyaW5nXG4gICkge1xuICAgIC8vIEEgY291cGxlIG9mIHRoaW5ncyB0byBrbm93IGFib3V0IHRoaXMgbWV0aG9kOlxuICAgIC8vXG4gICAgLy8gMS4gU2luY2UgYFJlbW92ZVZhcmlhYmxlT2JzZXJ2ZXJgIGlzIGV4cG9zZWQgdG8gdGhlIEphdmFTY3JpcHQgd29ybGQsXG4gICAgLy8gICAgb3B0aW9uYWxpdHkgaXMgbWFya2VkIGFzIGB1bmRlZmluZWRgIHJhdGhlciB0aGFuIGBudWxsYC5cbiAgICAvLyAgICBUbyBrZWVwIHRoaW5ncyBzaW1wbGUsIG51bGwtY2hlY2tzIGFyZSBwZXJmb3JtZWQgdXNpbmcgcmVndWxhclxuICAgIC8vICAgIGVxdWFsaXR5IG9wZXJhdG9ycywgd2hlcmUgdW5kZWZpbmVkID09IG51bGwuXG4gICAgLy9cbiAgICAvLyAyLiBTaW5jZSBDIyBkZWxlZ2F0ZXMgYXJlIHRyYW5zbGF0ZWQgdG8gYXJyYXlzIG9mIGZ1bmN0aW9ucyxcbiAgICAvLyAgICAtPSBiZWNvbWVzIGEgY2FsbCB0byBzcGxpY2UgYW5kIG51bGwtY2hlY2tzIGFyZSByZXBsYWNlZCBieVxuICAgIC8vICAgIGVtcHRpbmVzcy1jaGVja3MuXG4gICAgLy9cbiAgICB0aGlzLklmQXN5bmNXZUNhbnQoXCJyZW1vdmUgYSB2YXJpYWJsZSBvYnNlcnZlclwiKTtcblxuICAgIGlmICh0aGlzLl92YXJpYWJsZU9ic2VydmVycyA9PT0gbnVsbCkgcmV0dXJuO1xuXG4gICAgaWYgKHNwZWNpZmljVmFyaWFibGVOYW1lICE9IG51bGwpIHtcbiAgICAgIGlmICh0aGlzLl92YXJpYWJsZU9ic2VydmVycy5oYXMoc3BlY2lmaWNWYXJpYWJsZU5hbWUpKSB7XG4gICAgICAgIGlmIChvYnNlcnZlciAhPSBudWxsKSB7XG4gICAgICAgICAgbGV0IHZhcmlhYmxlT2JzZXJ2ZXJzID1cbiAgICAgICAgICAgIHRoaXMuX3ZhcmlhYmxlT2JzZXJ2ZXJzLmdldChzcGVjaWZpY1ZhcmlhYmxlTmFtZSk7XG4gICAgICAgICAgaWYgKHZhcmlhYmxlT2JzZXJ2ZXJzICE9IG51bGwpIHtcbiAgICAgICAgICAgIHZhcmlhYmxlT2JzZXJ2ZXJzLnNwbGljZSh2YXJpYWJsZU9ic2VydmVycy5pbmRleE9mKG9ic2VydmVyKSwgMSk7XG4gICAgICAgICAgICBpZiAodmFyaWFibGVPYnNlcnZlcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgIHRoaXMuX3ZhcmlhYmxlT2JzZXJ2ZXJzLmRlbGV0ZShzcGVjaWZpY1ZhcmlhYmxlTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX3ZhcmlhYmxlT2JzZXJ2ZXJzLmRlbGV0ZShzcGVjaWZpY1ZhcmlhYmxlTmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG9ic2VydmVyICE9IG51bGwpIHtcbiAgICAgIGxldCBrZXlzID0gdGhpcy5fdmFyaWFibGVPYnNlcnZlcnMua2V5cygpO1xuICAgICAgZm9yIChsZXQgdmFyTmFtZSBvZiBrZXlzKSB7XG4gICAgICAgIGxldCB2YXJpYWJsZU9ic2VydmVycyA9IHRoaXMuX3ZhcmlhYmxlT2JzZXJ2ZXJzLmdldCh2YXJOYW1lKTtcbiAgICAgICAgaWYgKHZhcmlhYmxlT2JzZXJ2ZXJzICE9IG51bGwpIHtcbiAgICAgICAgICB2YXJpYWJsZU9ic2VydmVycy5zcGxpY2UodmFyaWFibGVPYnNlcnZlcnMuaW5kZXhPZihvYnNlcnZlciksIDEpO1xuICAgICAgICAgIGlmICh2YXJpYWJsZU9ic2VydmVycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuX3ZhcmlhYmxlT2JzZXJ2ZXJzLmRlbGV0ZSh2YXJOYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgVmFyaWFibGVTdGF0ZURpZENoYW5nZUV2ZW50KFxuICAgIHZhcmlhYmxlTmFtZTogc3RyaW5nLFxuICAgIG5ld1ZhbHVlT2JqOiBJbmtPYmplY3RcbiAgKSB7XG4gICAgaWYgKHRoaXMuX3ZhcmlhYmxlT2JzZXJ2ZXJzID09PSBudWxsKSByZXR1cm47XG5cbiAgICBsZXQgb2JzZXJ2ZXJzID0gdGhpcy5fdmFyaWFibGVPYnNlcnZlcnMuZ2V0KHZhcmlhYmxlTmFtZSk7XG4gICAgaWYgKHR5cGVvZiBvYnNlcnZlcnMgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgIGlmICghKG5ld1ZhbHVlT2JqIGluc3RhbmNlb2YgVmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcIlRyaWVkIHRvIGdldCB0aGUgdmFsdWUgb2YgYSB2YXJpYWJsZSB0aGF0IGlzbid0IGEgc3RhbmRhcmQgdHlwZVwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICAvLyB2YXIgdmFsID0gbmV3VmFsdWVPYmogYXMgVmFsdWU7XG4gICAgICBsZXQgdmFsID0gYXNPclRocm93cyhuZXdWYWx1ZU9iaiwgVmFsdWUpO1xuXG4gICAgICBmb3IgKGxldCBvYnNlcnZlciBvZiBvYnNlcnZlcnMpIHtcbiAgICAgICAgb2JzZXJ2ZXIodmFyaWFibGVOYW1lLCB2YWwudmFsdWVPYmplY3QpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldCBnbG9iYWxUYWdzKCkge1xuICAgIHJldHVybiB0aGlzLlRhZ3NBdFN0YXJ0T2ZGbG93Q29udGFpbmVyV2l0aFBhdGhTdHJpbmcoXCJcIik7XG4gIH1cblxuICBwdWJsaWMgVGFnc0ZvckNvbnRlbnRBdFBhdGgocGF0aDogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuVGFnc0F0U3RhcnRPZkZsb3dDb250YWluZXJXaXRoUGF0aFN0cmluZyhwYXRoKTtcbiAgfVxuXG4gIHB1YmxpYyBUYWdzQXRTdGFydE9mRmxvd0NvbnRhaW5lcldpdGhQYXRoU3RyaW5nKHBhdGhTdHJpbmc6IHN0cmluZykge1xuICAgIGxldCBwYXRoID0gbmV3IFBhdGgocGF0aFN0cmluZyk7XG5cbiAgICBsZXQgZmxvd0NvbnRhaW5lciA9IHRoaXMuQ29udGVudEF0UGF0aChwYXRoKS5jb250YWluZXI7XG4gICAgaWYgKGZsb3dDb250YWluZXIgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJmbG93Q29udGFpbmVyXCIpO1xuICAgIH1cbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgbGV0IGZpcnN0Q29udGVudDogSW5rT2JqZWN0ID0gZmxvd0NvbnRhaW5lci5jb250ZW50WzBdO1xuICAgICAgaWYgKGZpcnN0Q29udGVudCBpbnN0YW5jZW9mIENvbnRhaW5lcikgZmxvd0NvbnRhaW5lciA9IGZpcnN0Q29udGVudDtcbiAgICAgIGVsc2UgYnJlYWs7XG4gICAgfVxuXG4gICAgbGV0IGluVGFnID0gZmFsc2U7XG4gICAgbGV0IHRhZ3M6IHN0cmluZ1tdIHwgbnVsbCA9IG51bGw7XG5cbiAgICBmb3IgKGxldCBjIG9mIGZsb3dDb250YWluZXIuY29udGVudCkge1xuICAgICAgLy8gdmFyIHRhZyA9IGMgYXMgUnVudGltZS5UYWc7XG4gICAgICBsZXQgY29tbWFuZCA9IGFzT3JOdWxsKGMsIENvbnRyb2xDb21tYW5kKTtcblxuICAgICAgaWYgKGNvbW1hbmQgIT0gbnVsbCkge1xuICAgICAgICBpZiAoY29tbWFuZC5jb21tYW5kVHlwZSA9PSBDb250cm9sQ29tbWFuZC5Db21tYW5kVHlwZS5CZWdpblRhZykge1xuICAgICAgICAgIGluVGFnID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChjb21tYW5kLmNvbW1hbmRUeXBlID09IENvbnRyb2xDb21tYW5kLkNvbW1hbmRUeXBlLkVuZFRhZykge1xuICAgICAgICAgIGluVGFnID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaW5UYWcpIHtcbiAgICAgICAgbGV0IHN0ciA9IGFzT3JOdWxsKGMsIFN0cmluZ1ZhbHVlKTtcbiAgICAgICAgaWYgKHN0ciAhPT0gbnVsbCkge1xuICAgICAgICAgIGlmICh0YWdzID09PSBudWxsKSB0YWdzID0gW107XG4gICAgICAgICAgaWYgKHN0ci52YWx1ZSAhPT0gbnVsbCkgdGFncy5wdXNoKHN0ci52YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5FcnJvcihcbiAgICAgICAgICAgIFwiVGFnIGNvbnRhaW5lZCBub24tdGV4dCBjb250ZW50LiBPbmx5IHBsYWluIHRleHQgaXMgYWxsb3dlZCB3aGVuIHVzaW5nIGdsb2JhbFRhZ3Mgb3IgVGFnc0F0Q29udGVudFBhdGguIElmIHlvdSB3YW50IHRvIGV2YWx1YXRlIGR5bmFtaWMgY29udGVudCwgeW91IG5lZWQgdG8gdXNlIHN0b3J5LkNvbnRpbnVlKCkuXCJcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGFncztcbiAgfVxuXG4gIHB1YmxpYyBCdWlsZFN0cmluZ09mSGllcmFyY2h5KCkge1xuICAgIGxldCBzYiA9IG5ldyBTdHJpbmdCdWlsZGVyKCk7XG5cbiAgICB0aGlzLm1haW5Db250ZW50Q29udGFpbmVyLkJ1aWxkU3RyaW5nT2ZIaWVyYXJjaHkoXG4gICAgICBzYixcbiAgICAgIDAsXG4gICAgICB0aGlzLnN0YXRlLmN1cnJlbnRQb2ludGVyLlJlc29sdmUoKVxuICAgICk7XG5cbiAgICByZXR1cm4gc2IudG9TdHJpbmcoKTtcbiAgfVxuXG4gIHB1YmxpYyBCdWlsZFN0cmluZ09mQ29udGFpbmVyKGNvbnRhaW5lcjogQ29udGFpbmVyKSB7XG4gICAgbGV0IHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcbiAgICBjb250YWluZXIuQnVpbGRTdHJpbmdPZkhpZXJhcmNoeShcbiAgICAgIHNiLFxuICAgICAgMCxcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFBvaW50ZXIuUmVzb2x2ZSgpXG4gICAgKTtcbiAgICByZXR1cm4gc2IudG9TdHJpbmcoKTtcbiAgfVxuXG4gIHB1YmxpYyBOZXh0Q29udGVudCgpIHtcbiAgICB0aGlzLnN0YXRlLnByZXZpb3VzUG9pbnRlciA9IHRoaXMuc3RhdGUuY3VycmVudFBvaW50ZXIuY29weSgpO1xuXG4gICAgaWYgKCF0aGlzLnN0YXRlLmRpdmVydGVkUG9pbnRlci5pc051bGwpIHtcbiAgICAgIHRoaXMuc3RhdGUuY3VycmVudFBvaW50ZXIgPSB0aGlzLnN0YXRlLmRpdmVydGVkUG9pbnRlci5jb3B5KCk7XG4gICAgICB0aGlzLnN0YXRlLmRpdmVydGVkUG9pbnRlciA9IFBvaW50ZXIuTnVsbDtcblxuICAgICAgdGhpcy5WaXNpdENoYW5nZWRDb250YWluZXJzRHVlVG9EaXZlcnQoKTtcblxuICAgICAgaWYgKCF0aGlzLnN0YXRlLmN1cnJlbnRQb2ludGVyLmlzTnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHN1Y2Nlc3NmdWxQb2ludGVySW5jcmVtZW50ID0gdGhpcy5JbmNyZW1lbnRDb250ZW50UG9pbnRlcigpO1xuXG4gICAgaWYgKCFzdWNjZXNzZnVsUG9pbnRlckluY3JlbWVudCkge1xuICAgICAgbGV0IGRpZFBvcCA9IGZhbHNlO1xuXG4gICAgICBpZiAodGhpcy5zdGF0ZS5jYWxsU3RhY2suQ2FuUG9wKFB1c2hQb3BUeXBlLkZ1bmN0aW9uKSkge1xuICAgICAgICB0aGlzLnN0YXRlLlBvcENhbGxTdGFjayhQdXNoUG9wVHlwZS5GdW5jdGlvbik7XG5cbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaW5FeHByZXNzaW9uRXZhbHVhdGlvbikge1xuICAgICAgICAgIHRoaXMuc3RhdGUuUHVzaEV2YWx1YXRpb25TdGFjayhuZXcgVm9pZCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRpZFBvcCA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUuY2FsbFN0YWNrLmNhblBvcFRocmVhZCkge1xuICAgICAgICB0aGlzLnN0YXRlLmNhbGxTdGFjay5Qb3BUaHJlYWQoKTtcblxuICAgICAgICBkaWRQb3AgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5UcnlFeGl0RnVuY3Rpb25FdmFsdWF0aW9uRnJvbUdhbWUoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGRpZFBvcCAmJiAhdGhpcy5zdGF0ZS5jdXJyZW50UG9pbnRlci5pc051bGwpIHtcbiAgICAgICAgdGhpcy5OZXh0Q29udGVudCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBJbmNyZW1lbnRDb250ZW50UG9pbnRlcigpIHtcbiAgICBsZXQgc3VjY2Vzc2Z1bEluY3JlbWVudCA9IHRydWU7XG5cbiAgICBsZXQgcG9pbnRlciA9IHRoaXMuc3RhdGUuY2FsbFN0YWNrLmN1cnJlbnRFbGVtZW50LmN1cnJlbnRQb2ludGVyLmNvcHkoKTtcbiAgICBwb2ludGVyLmluZGV4Kys7XG5cbiAgICBpZiAocG9pbnRlci5jb250YWluZXIgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJwb2ludGVyLmNvbnRhaW5lclwiKTtcbiAgICB9XG4gICAgd2hpbGUgKHBvaW50ZXIuaW5kZXggPj0gcG9pbnRlci5jb250YWluZXIuY29udGVudC5sZW5ndGgpIHtcbiAgICAgIHN1Y2Nlc3NmdWxJbmNyZW1lbnQgPSBmYWxzZTtcblxuICAgICAgLy8gQ29udGFpbmVyIG5leHRBbmNlc3RvciA9IHBvaW50ZXIuY29udGFpbmVyLnBhcmVudCBhcyBDb250YWluZXI7XG4gICAgICBsZXQgbmV4dEFuY2VzdG9yID0gYXNPck51bGwocG9pbnRlci5jb250YWluZXIucGFyZW50LCBDb250YWluZXIpO1xuICAgICAgaWYgKG5leHRBbmNlc3RvciBpbnN0YW5jZW9mIENvbnRhaW5lciA9PT0gZmFsc2UpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGxldCBpbmRleEluQW5jZXN0b3IgPSBuZXh0QW5jZXN0b3IhLmNvbnRlbnQuaW5kZXhPZihwb2ludGVyLmNvbnRhaW5lcik7XG4gICAgICBpZiAoaW5kZXhJbkFuY2VzdG9yID09IC0xKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBwb2ludGVyID0gbmV3IFBvaW50ZXIobmV4dEFuY2VzdG9yLCBpbmRleEluQW5jZXN0b3IpO1xuXG4gICAgICBwb2ludGVyLmluZGV4Kys7XG5cbiAgICAgIHN1Y2Nlc3NmdWxJbmNyZW1lbnQgPSB0cnVlO1xuICAgICAgaWYgKHBvaW50ZXIuY29udGFpbmVyID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJwb2ludGVyLmNvbnRhaW5lclwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXN1Y2Nlc3NmdWxJbmNyZW1lbnQpIHBvaW50ZXIgPSBQb2ludGVyLk51bGw7XG5cbiAgICB0aGlzLnN0YXRlLmNhbGxTdGFjay5jdXJyZW50RWxlbWVudC5jdXJyZW50UG9pbnRlciA9IHBvaW50ZXIuY29weSgpO1xuXG4gICAgcmV0dXJuIHN1Y2Nlc3NmdWxJbmNyZW1lbnQ7XG4gIH1cblxuICBwdWJsaWMgVHJ5Rm9sbG93RGVmYXVsdEludmlzaWJsZUNob2ljZSgpIHtcbiAgICBsZXQgYWxsQ2hvaWNlcyA9IHRoaXMuX3N0YXRlLmN1cnJlbnRDaG9pY2VzO1xuXG4gICAgbGV0IGludmlzaWJsZUNob2ljZXMgPSBhbGxDaG9pY2VzLmZpbHRlcigoYykgPT4gYy5pc0ludmlzaWJsZURlZmF1bHQpO1xuXG4gICAgaWYgKFxuICAgICAgaW52aXNpYmxlQ2hvaWNlcy5sZW5ndGggPT0gMCB8fFxuICAgICAgYWxsQ2hvaWNlcy5sZW5ndGggPiBpbnZpc2libGVDaG9pY2VzLmxlbmd0aFxuICAgIClcbiAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIGxldCBjaG9pY2UgPSBpbnZpc2libGVDaG9pY2VzWzBdO1xuXG4gICAgaWYgKGNob2ljZS50YXJnZXRQYXRoID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwiY2hvaWNlLnRhcmdldFBhdGhcIik7XG4gICAgfVxuXG4gICAgaWYgKGNob2ljZS50aHJlYWRBdEdlbmVyYXRpb24gPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aHJvd051bGxFeGNlcHRpb24oXCJjaG9pY2UudGhyZWFkQXRHZW5lcmF0aW9uXCIpO1xuICAgIH1cblxuICAgIHRoaXMuc3RhdGUuY2FsbFN0YWNrLmN1cnJlbnRUaHJlYWQgPSBjaG9pY2UudGhyZWFkQXRHZW5lcmF0aW9uO1xuXG4gICAgaWYgKHRoaXMuX3N0YXRlU25hcHNob3RBdExhc3ROZXdsaW5lICE9PSBudWxsKSB7XG4gICAgICB0aGlzLnN0YXRlLmNhbGxTdGFjay5jdXJyZW50VGhyZWFkID0gdGhpcy5zdGF0ZS5jYWxsU3RhY2suRm9ya1RocmVhZCgpO1xuICAgIH1cblxuICAgIHRoaXMuQ2hvb3NlUGF0aChjaG9pY2UudGFyZ2V0UGF0aCwgZmFsc2UpO1xuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwdWJsaWMgTmV4dFNlcXVlbmNlU2h1ZmZsZUluZGV4KCkge1xuICAgIC8vIHZhciBudW1FbGVtZW50c0ludFZhbCA9IHN0YXRlLlBvcEV2YWx1YXRpb25TdGFjayAoKSBhcyBJbnRWYWx1ZTtcbiAgICBsZXQgbnVtRWxlbWVudHNJbnRWYWwgPSBhc09yTnVsbCh0aGlzLnN0YXRlLlBvcEV2YWx1YXRpb25TdGFjaygpLCBJbnRWYWx1ZSk7XG4gICAgaWYgKCEobnVtRWxlbWVudHNJbnRWYWwgaW5zdGFuY2VvZiBJbnRWYWx1ZSkpIHtcbiAgICAgIHRoaXMuRXJyb3IoXCJleHBlY3RlZCBudW1iZXIgb2YgZWxlbWVudHMgaW4gc2VxdWVuY2UgZm9yIHNodWZmbGUgaW5kZXhcIik7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBsZXQgc2VxQ29udGFpbmVyID0gdGhpcy5zdGF0ZS5jdXJyZW50UG9pbnRlci5jb250YWluZXI7XG4gICAgaWYgKHNlcUNvbnRhaW5lciA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcInNlcUNvbnRhaW5lclwiKTtcbiAgICB9XG5cbiAgICAvLyBPcmlnaW5hbGx5IGEgcHJpbWl0aXZlIHR5cGUsIGJ1dCBoZXJlLCBjYW4gYmUgbnVsbC5cbiAgICAvLyBUT0RPOiBSZXBsYWNlIGJ5IGRlZmF1bHQgdmFsdWU/XG4gICAgaWYgKG51bUVsZW1lbnRzSW50VmFsLnZhbHVlID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhyb3dOdWxsRXhjZXB0aW9uKFwibnVtRWxlbWVudHNJbnRWYWwudmFsdWVcIik7XG4gICAgfVxuICAgIGxldCBudW1FbGVtZW50cyA9IG51bUVsZW1lbnRzSW50VmFsLnZhbHVlO1xuXG4gICAgLy8gdmFyIHNlcUNvdW50VmFsID0gc3RhdGUuUG9wRXZhbHVhdGlvblN0YWNrICgpIGFzIEludFZhbHVlO1xuICAgIGxldCBzZXFDb3VudFZhbCA9IGFzT3JUaHJvd3ModGhpcy5zdGF0ZS5Qb3BFdmFsdWF0aW9uU3RhY2soKSwgSW50VmFsdWUpO1xuICAgIGxldCBzZXFDb3VudCA9IHNlcUNvdW50VmFsLnZhbHVlO1xuXG4gICAgLy8gT3JpZ2luYWxseSBhIHByaW1pdGl2ZSB0eXBlLCBidXQgaGVyZSwgY2FuIGJlIG51bGwuXG4gICAgLy8gVE9ETzogUmVwbGFjZSBieSBkZWZhdWx0IHZhbHVlP1xuICAgIGlmIChzZXFDb3VudCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRocm93TnVsbEV4Y2VwdGlvbihcInNlcUNvdW50XCIpO1xuICAgIH1cblxuICAgIGxldCBsb29wSW5kZXggPSBzZXFDb3VudCAvIG51bUVsZW1lbnRzO1xuICAgIGxldCBpdGVyYXRpb25JbmRleCA9IHNlcUNvdW50ICUgbnVtRWxlbWVudHM7XG5cbiAgICBsZXQgc2VxUGF0aFN0ciA9IHNlcUNvbnRhaW5lci5wYXRoLnRvU3RyaW5nKCk7XG4gICAgbGV0IHNlcXVlbmNlSGFzaCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSBzZXFQYXRoU3RyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgc2VxdWVuY2VIYXNoICs9IHNlcVBhdGhTdHIuY2hhckNvZGVBdChpKSB8fCAwO1xuICAgIH1cbiAgICBsZXQgcmFuZG9tU2VlZCA9IHNlcXVlbmNlSGFzaCArIGxvb3BJbmRleCArIHRoaXMuc3RhdGUuc3RvcnlTZWVkO1xuICAgIGxldCByYW5kb20gPSBuZXcgUFJORyhNYXRoLmZsb29yKHJhbmRvbVNlZWQpKTtcblxuICAgIGxldCB1bnBpY2tlZEluZGljZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUVsZW1lbnRzOyArK2kpIHtcbiAgICAgIHVucGlja2VkSW5kaWNlcy5wdXNoKGkpO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IGl0ZXJhdGlvbkluZGV4OyArK2kpIHtcbiAgICAgIGxldCBjaG9zZW4gPSByYW5kb20ubmV4dCgpICUgdW5waWNrZWRJbmRpY2VzLmxlbmd0aDtcbiAgICAgIGxldCBjaG9zZW5JbmRleCA9IHVucGlja2VkSW5kaWNlc1tjaG9zZW5dO1xuICAgICAgdW5waWNrZWRJbmRpY2VzLnNwbGljZShjaG9zZW4sIDEpO1xuXG4gICAgICBpZiAoaSA9PSBpdGVyYXRpb25JbmRleCkge1xuICAgICAgICByZXR1cm4gY2hvc2VuSW5kZXg7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiU2hvdWxkIG5ldmVyIHJlYWNoIGhlcmVcIik7XG4gIH1cblxuICBwdWJsaWMgRXJyb3IobWVzc2FnZTogc3RyaW5nLCB1c2VFbmRMaW5lTnVtYmVyID0gZmFsc2UpOiBuZXZlciB7XG4gICAgbGV0IGUgPSBuZXcgU3RvcnlFeGNlcHRpb24obWVzc2FnZSk7XG4gICAgZS51c2VFbmRMaW5lTnVtYmVyID0gdXNlRW5kTGluZU51bWJlcjtcbiAgICB0aHJvdyBlO1xuICB9XG5cbiAgcHVibGljIFdhcm5pbmcobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgdGhpcy5BZGRFcnJvcihtZXNzYWdlLCB0cnVlKTtcbiAgfVxuXG4gIHB1YmxpYyBBZGRFcnJvcihcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgaXNXYXJuaW5nID0gZmFsc2UsXG4gICAgdXNlRW5kTGluZU51bWJlciA9IGZhbHNlXG4gICkge1xuICAgIGxldCBkbSA9IHRoaXMuY3VycmVudERlYnVnTWV0YWRhdGE7XG5cbiAgICBsZXQgZXJyb3JUeXBlU3RyID0gaXNXYXJuaW5nID8gXCJXQVJOSU5HXCIgOiBcIkVSUk9SXCI7XG5cbiAgICBpZiAoZG0gIT0gbnVsbCkge1xuICAgICAgbGV0IGxpbmVOdW0gPSB1c2VFbmRMaW5lTnVtYmVyID8gZG0uZW5kTGluZU51bWJlciA6IGRtLnN0YXJ0TGluZU51bWJlcjtcbiAgICAgIG1lc3NhZ2UgPVxuICAgICAgICBcIlJVTlRJTUUgXCIgK1xuICAgICAgICBlcnJvclR5cGVTdHIgK1xuICAgICAgICBcIjogJ1wiICtcbiAgICAgICAgZG0uZmlsZU5hbWUgK1xuICAgICAgICBcIicgbGluZSBcIiArXG4gICAgICAgIGxpbmVOdW0gK1xuICAgICAgICBcIjogXCIgK1xuICAgICAgICBtZXNzYWdlO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuc3RhdGUuY3VycmVudFBvaW50ZXIuaXNOdWxsKSB7XG4gICAgICBtZXNzYWdlID1cbiAgICAgICAgXCJSVU5USU1FIFwiICtcbiAgICAgICAgZXJyb3JUeXBlU3RyICtcbiAgICAgICAgXCI6IChcIiArXG4gICAgICAgIHRoaXMuc3RhdGUuY3VycmVudFBvaW50ZXIgK1xuICAgICAgICBcIik6IFwiICtcbiAgICAgICAgbWVzc2FnZTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWVzc2FnZSA9IFwiUlVOVElNRSBcIiArIGVycm9yVHlwZVN0ciArIFwiOiBcIiArIG1lc3NhZ2U7XG4gICAgfVxuXG4gICAgdGhpcy5zdGF0ZS5BZGRFcnJvcihtZXNzYWdlLCBpc1dhcm5pbmcpO1xuXG4gICAgLy8gSW4gYSBicm9rZW4gc3RhdGUgZG9uJ3QgbmVlZCB0byBrbm93IGFib3V0IGFueSBvdGhlciBlcnJvcnMuXG4gICAgaWYgKCFpc1dhcm5pbmcpIHRoaXMuc3RhdGUuRm9yY2VFbmQoKTtcbiAgfVxuXG4gIHB1YmxpYyBBc3NlcnQoY29uZGl0aW9uOiBib29sZWFuLCBtZXNzYWdlOiBzdHJpbmcgfCBudWxsID0gbnVsbCkge1xuICAgIGlmIChjb25kaXRpb24gPT0gZmFsc2UpIHtcbiAgICAgIGlmIChtZXNzYWdlID09IG51bGwpIHtcbiAgICAgICAgbWVzc2FnZSA9IFwiU3RvcnkgYXNzZXJ0XCI7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlICsgXCIgXCIgKyB0aGlzLmN1cnJlbnREZWJ1Z01ldGFkYXRhKTtcbiAgICB9XG4gIH1cblxuICBnZXQgY3VycmVudERlYnVnTWV0YWRhdGEoKTogRGVidWdNZXRhZGF0YSB8IG51bGwge1xuICAgIGxldCBkbTogRGVidWdNZXRhZGF0YSB8IG51bGw7XG5cbiAgICBsZXQgcG9pbnRlciA9IHRoaXMuc3RhdGUuY3VycmVudFBvaW50ZXI7XG4gICAgaWYgKCFwb2ludGVyLmlzTnVsbCAmJiBwb2ludGVyLlJlc29sdmUoKSAhPT0gbnVsbCkge1xuICAgICAgZG0gPSBwb2ludGVyLlJlc29sdmUoKSEuZGVidWdNZXRhZGF0YTtcbiAgICAgIGlmIChkbSAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZG07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IHRoaXMuc3RhdGUuY2FsbFN0YWNrLmVsZW1lbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICBwb2ludGVyID0gdGhpcy5zdGF0ZS5jYWxsU3RhY2suZWxlbWVudHNbaV0uY3VycmVudFBvaW50ZXI7XG4gICAgICBpZiAoIXBvaW50ZXIuaXNOdWxsICYmIHBvaW50ZXIuUmVzb2x2ZSgpICE9PSBudWxsKSB7XG4gICAgICAgIGRtID0gcG9pbnRlci5SZXNvbHZlKCkhLmRlYnVnTWV0YWRhdGE7XG4gICAgICAgIGlmIChkbSAhPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBkbTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSB0aGlzLnN0YXRlLm91dHB1dFN0cmVhbS5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgbGV0IG91dHB1dE9iaiA9IHRoaXMuc3RhdGUub3V0cHV0U3RyZWFtW2ldO1xuICAgICAgZG0gPSBvdXRwdXRPYmouZGVidWdNZXRhZGF0YTtcbiAgICAgIGlmIChkbSAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZG07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBnZXQgbWFpbkNvbnRlbnRDb250YWluZXIoKSB7XG4gICAgaWYgKHRoaXMuX3RlbXBvcmFyeUV2YWx1YXRpb25Db250YWluZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLl90ZW1wb3JhcnlFdmFsdWF0aW9uQ29udGFpbmVyO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5fbWFpbkNvbnRlbnRDb250YWluZXI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGBfbWFpbkNvbnRlbnRDb250YWluZXJgIGlzIGFsbW9zdCBndWFyYW50ZWVkIHRvIGJlIHNldCBpbiB0aGVcbiAgICogY29uc3RydWN0b3IsIHVubGVzcyB0aGUganNvbiBpcyBtYWxmb3JtZWQuXG4gICAqL1xuICBwcml2YXRlIF9tYWluQ29udGVudENvbnRhaW5lciE6IENvbnRhaW5lcjtcbiAgcHJpdmF0ZSBfbGlzdERlZmluaXRpb25zOiBMaXN0RGVmaW5pdGlvbnNPcmlnaW4gfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIF9leHRlcm5hbHM6IE1hcDxzdHJpbmcsIFN0b3J5LkV4dGVybmFsRnVuY3Rpb25EZWY+O1xuICBwcml2YXRlIF92YXJpYWJsZU9ic2VydmVyczogTWFwPHN0cmluZywgU3RvcnkuVmFyaWFibGVPYnNlcnZlcltdPiB8IG51bGwgPVxuICAgIG51bGw7XG4gIHByaXZhdGUgX2hhc1ZhbGlkYXRlZEV4dGVybmFsczogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHByaXZhdGUgX3RlbXBvcmFyeUV2YWx1YXRpb25Db250YWluZXI6IENvbnRhaW5lciB8IG51bGwgPSBudWxsO1xuXG4gIC8qKlxuICAgKiBgc3RhdGVgIGlzIGFsbW9zdCBndWFyYW50ZWVkIHRvIGJlIHNldCBpbiB0aGUgY29uc3RydWN0b3IsIHVubGVzc1xuICAgKiB1c2luZyB0aGUgY29tcGlsZXItc3BlY2lmaWMgY29uc3RydWN0b3Igd2hpY2ggd2lsbCBsaWtlbHkgbm90IGJlIHVzZWQgaW5cbiAgICogdGhlIHJlYWwgd29ybGQuXG4gICAqL1xuICBwcml2YXRlIF9zdGF0ZSE6IFN0b3J5U3RhdGU7XG5cbiAgcHJpdmF0ZSBfYXN5bmNDb250aW51ZUFjdGl2ZTogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9zdGF0ZVNuYXBzaG90QXRMYXN0TmV3bGluZTogU3RvcnlTdGF0ZSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIF9zYXdMb29rYWhlYWRVbnNhZmVGdW5jdGlvbkFmdGVyTmV3bGluZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHByaXZhdGUgX3JlY3Vyc2l2ZUNvbnRpbnVlQ291bnQ6IG51bWJlciA9IDA7XG5cbiAgcHJpdmF0ZSBfYXN5bmNTYXZpbmc6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwcml2YXRlIF9wcm9maWxlcjogYW55IHwgbnVsbCA9IG51bGw7IC8vIFRPRE86IFByb2ZpbGVyXG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgU3Rvcnkge1xuICBleHBvcnQgZW51bSBPdXRwdXRTdGF0ZUNoYW5nZSB7XG4gICAgTm9DaGFuZ2UgPSAwLFxuICAgIEV4dGVuZGVkQmV5b25kTmV3bGluZSA9IDEsXG4gICAgTmV3bGluZVJlbW92ZWQgPSAyLFxuICB9XG5cbiAgZXhwb3J0IGludGVyZmFjZSBFdmFsdWF0ZUZ1bmN0aW9uVGV4dE91dHB1dCB7XG4gICAgcmV0dXJuZWQ6IGFueTtcbiAgICBvdXRwdXQ6IHN0cmluZztcbiAgfVxuXG4gIGV4cG9ydCBpbnRlcmZhY2UgRXh0ZXJuYWxGdW5jdGlvbkRlZiB7XG4gICAgZnVuY3Rpb246IEV4dGVybmFsRnVuY3Rpb247XG4gICAgbG9va0FoZWFkU2FmZTogYm9vbGVhbjtcbiAgfVxuXG4gIGV4cG9ydCB0eXBlIFZhcmlhYmxlT2JzZXJ2ZXIgPSAodmFyaWFibGVOYW1lOiBzdHJpbmcsIG5ld1ZhbHVlOiBhbnkpID0+IHZvaWQ7XG4gIGV4cG9ydCB0eXBlIEV4dGVybmFsRnVuY3Rpb24gPSAoLi4uYXJnczogYW55KSA9PiBhbnk7XG59XG4iLCJpbXBvcnQgeyBBdXRob3JXYXJuaW5nIH0gZnJvbSBcIi4vQXV0aG9yV2FybmluZ1wiO1xuaW1wb3J0IHsgQ29uc3RhbnREZWNsYXJhdGlvbiB9IGZyb20gXCIuL0RlY2xhcmF0aW9uL0NvbnN0YW50RGVjbGFyYXRpb25cIjtcbmltcG9ydCB7IENvbnRhaW5lciBhcyBSdW50aW1lQ29udGFpbmVyIH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9Db250YWluZXJcIjtcbmltcG9ydCB7IENvbnRyb2xDb21tYW5kIGFzIFJ1bnRpbWVDb250cm9sQ29tbWFuZCB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvQ29udHJvbENvbW1hbmRcIjtcbmltcG9ydCB7IEVycm9ySGFuZGxlciB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvRXJyb3JcIjtcbmltcG9ydCB7IEVycm9yVHlwZSB9IGZyb20gXCIuLi9FcnJvclR5cGVcIjtcbmltcG9ydCB7IEV4cHJlc3Npb24gfSBmcm9tIFwiLi9FeHByZXNzaW9uL0V4cHJlc3Npb25cIjtcbmltcG9ydCB7IEV4dGVybmFsRGVjbGFyYXRpb24gfSBmcm9tIFwiLi9EZWNsYXJhdGlvbi9FeHRlcm5hbERlY2xhcmF0aW9uXCI7XG5pbXBvcnQgeyBGbG93QmFzZSB9IGZyb20gXCIuL0Zsb3cvRmxvd0Jhc2VcIjtcbmltcG9ydCB7IEZsb3dMZXZlbCB9IGZyb20gXCIuL0Zsb3cvRmxvd0xldmVsXCI7XG5pbXBvcnQgeyBJbmNsdWRlZEZpbGUgfSBmcm9tIFwiLi9JbmNsdWRlZEZpbGVcIjtcbmltcG9ydCB7IExpc3REZWZpbml0aW9uIH0gZnJvbSBcIi4vTGlzdC9MaXN0RGVmaW5pdGlvblwiO1xuaW1wb3J0IHsgTGlzdEVsZW1lbnREZWZpbml0aW9uIH0gZnJvbSBcIi4vTGlzdC9MaXN0RWxlbWVudERlZmluaXRpb25cIjtcbmltcG9ydCB7IFBhcnNlZE9iamVjdCB9IGZyb20gXCIuL09iamVjdFwiO1xuaW1wb3J0IHsgU3RvcnkgYXMgUnVudGltZVN0b3J5IH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9TdG9yeVwiO1xuaW1wb3J0IHsgU3ltYm9sVHlwZSB9IGZyb20gXCIuL1N5bWJvbFR5cGVcIjtcbmltcG9ydCB7IFRleHQgfSBmcm9tIFwiLi9UZXh0XCI7XG5pbXBvcnQgeyBWYXJpYWJsZUFzc2lnbm1lbnQgYXMgUnVudGltZVZhcmlhYmxlQXNzaWdubWVudCB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvVmFyaWFibGVBc3NpZ25tZW50XCI7XG5pbXBvcnQgeyBJZGVudGlmaWVyIH0gZnJvbSBcIi4vSWRlbnRpZmllclwiO1xuaW1wb3J0IHsgYXNPck51bGwgfSBmcm9tIFwiLi4vLi4vLi4vZW5naW5lL1R5cGVBc3NlcnRpb25cIjtcbmltcG9ydCB7IENsb3Nlc3RGbG93QmFzZSB9IGZyb20gXCIuL0Zsb3cvQ2xvc2VzdEZsb3dCYXNlXCI7XG5pbXBvcnQgeyBGdW5jdGlvbkNhbGwgfSBmcm9tIFwiLi9GdW5jdGlvbkNhbGxcIjtcbmltcG9ydCB7IFBhdGggfSBmcm9tIFwiLi9QYXRoXCI7XG5pbXBvcnQgeyBWYXJpYWJsZUFzc2lnbm1lbnQgfSBmcm9tIFwiLi9WYXJpYWJsZS9WYXJpYWJsZUFzc2lnbm1lbnRcIjtcblxuZXhwb3J0IGNsYXNzIFN0b3J5IGV4dGVuZHMgRmxvd0Jhc2Uge1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IElzUmVzZXJ2ZWRLZXl3b3JkID0gKG5hbWU/OiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgICBzd2l0Y2ggKG5hbWUpIHtcbiAgICAgIGNhc2UgXCJ0cnVlXCI6XG4gICAgICBjYXNlIFwiZmFsc2VcIjpcbiAgICAgIGNhc2UgXCJub3RcIjpcbiAgICAgIGNhc2UgXCJyZXR1cm5cIjpcbiAgICAgIGNhc2UgXCJlbHNlXCI6XG4gICAgICBjYXNlIFwiVkFSXCI6XG4gICAgICBjYXNlIFwiQ09OU1RcIjpcbiAgICAgIGNhc2UgXCJ0ZW1wXCI6XG4gICAgICBjYXNlIFwiTElTVFwiOlxuICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBwcml2YXRlIF9lcnJvckhhbmRsZXI6IEVycm9ySGFuZGxlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIF9oYWRFcnJvcjogYm9vbGVhbiA9IGZhbHNlO1xuICBwcml2YXRlIF9oYWRXYXJuaW5nOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX2RvbnRGbGF0dGVuQ29udGFpbmVyczogU2V0PFJ1bnRpbWVDb250YWluZXI+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIF9saXN0RGVmczogTWFwPHN0cmluZywgTGlzdERlZmluaXRpb24+ID0gbmV3IE1hcCgpO1xuXG4gIGdldCBmbG93TGV2ZWwoKTogRmxvd0xldmVsIHtcbiAgICByZXR1cm4gRmxvd0xldmVsLlN0b3J5O1xuICB9XG5cbiAgZ2V0IGhhZEVycm9yKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9oYWRFcnJvcjtcbiAgfVxuXG4gIGdldCBoYWRXYXJuaW5nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9oYWRXYXJuaW5nO1xuICB9XG5cbiAgcHVibGljIGNvbnN0YW50czogTWFwPHN0cmluZywgRXhwcmVzc2lvbj4gPSBuZXcgTWFwKCk7XG4gIHB1YmxpYyBleHRlcm5hbHM6IE1hcDxzdHJpbmcsIEV4dGVybmFsRGVjbGFyYXRpb24+ID0gbmV3IE1hcCgpO1xuXG4gIC8vIEJ1aWxkIHNldHRpbmcgZm9yIGV4cG9ydGluZzpcbiAgLy8gV2hlbiB0cnVlLCB0aGUgdmlzaXQgY291bnQgZm9yICphbGwqIGtub3RzLCBzdGl0Y2hlcywgY2hvaWNlcyxcbiAgLy8gYW5kIGdhdGhlcnMgaXMgY291bnRlZC4gV2hlbiBmYWxzZSwgb25seSB0aG9zZSB0aGF0IGFyZSBkaXJlY2x0eVxuICAvLyByZWZlcmVuY2VkIGJ5IHRoZSBpbmsgYXJlIHJlY29yZGVkLiBVc2UgdGhpcyBmbGFnIHRvIGFsbG93IGdhbWUtc2lkZVxuICAvLyBxdWVyeWluZyBvZiAgYXJiaXRyYXJ5IGtub3RzL3N0aXRjaGVzIGV0Yy5cbiAgLy8gU3RvcmluZyBhbGwgY291bnRzIGlzIG1vcmUgcm9idXN0IGFuZCBmdXR1cmUgcHJvb2YgKHVwZGF0ZXMgdG8gdGhlIHN0b3J5IGZpbGVcbiAgLy8gdGhhdCByZWZlcmVuY2UgcHJldmlvdXNseSB1bmNvdW50ZWQgdmlzaXRzIGFyZSBwb3NzaWJsZSwgYnV0IGdlbmVyYXRlcyBhIG11Y2hcbiAgLy8gbGFyZ2VyIHNhZmUgZmlsZSwgd2l0aCBhIGxvdCBvZiBwb3RlbnRpYWxseSByZWR1bmRhbnQgY291bnRzLlxuICBwdWJsaWMgY291bnRBbGxWaXNpdHM6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3Rvcih0b3BsZXZlbE9iamVjdHM6IFBhcnNlZE9iamVjdFtdLCBpc0luY2x1ZGU6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIC8vIERvbid0IGRvIGFueXRoaW5nIG11Y2ggb24gY29uc3RydWN0aW9uLCBsZWF2ZSBpdCBsaWdodHdlaWdodCB1bnRpbFxuICAgIC8vIHRoZSBFeHBvcnRSdW50aW1lIG1ldGhvZCBpcyBjYWxsZWQuXG4gICAgc3VwZXIobnVsbCwgdG9wbGV2ZWxPYmplY3RzLCBudWxsLCBmYWxzZSwgaXNJbmNsdWRlKTtcbiAgfVxuXG4gIGdldCB0eXBlTmFtZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcIlN0b3J5XCI7XG4gIH1cblxuICAvLyBCZWZvcmUgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQsIHdlIGhhdmUgSW5jbHVkZWRGaWxlIG9iamVjdHMgaW50ZXJzcGVyc2VkXG4gIC8vIGluIG91ciBjb250ZW50IHdoZXJldmVyIGFuIGluY2x1ZGUgc3RhdGVtZW50IHdhcy5cbiAgLy8gU28gdGhhdCB0aGUgaW5jbHVkZSBzdGF0ZW1lbnQgY2FuIGJlIGFkZGVkIGluIGEgc2Vuc2libGUgcGxhY2UgKGUuZy4gdGhlXG4gIC8vIHRvcCBvZiB0aGUgZmlsZSkgd2l0aG91dCBzaWRlLWVmZmVjdHMgb2YganVtcGluZyBpbnRvIGEga25vdCB0aGF0IHdhc1xuICAvLyBkZWZpbmVkIGluIHRoYXQgaW5jbHVkZSwgd2Ugc2VwYXJhdGUga25vdHMgYW5kIHN0aXRjaGVzIGZyb20gYW55dGhpbmdcbiAgLy8gZWxzZSBkZWZpbmVkIGF0IHRoZSB0b3Agc2NvcGUgb2YgdGhlIGluY2x1ZGVkIGZpbGUuXG4gIC8vXG4gIC8vIEFsZ29yaXRobTogRm9yIGVhY2ggSW5jbHVkZWRGaWxlIHdlIGZpbmQsIHNwbGl0IGl0cyBjb250ZW50cyBpbnRvXG4gIC8vIGtub3RzL3N0aWNoZXMgYW5kIGFueSBvdGhlciBjb250ZW50LiBJbnNlcnQgdGhlIG5vcm1hbCBjb250ZW50IHdoZXJldmVyXG4gIC8vIHRoZSBpbmNsdWRlIHN0YXRlbWVudCB3YXMsIGFuZCBhcHBlbmQgdGhlIGtub3RzL3N0aXRjaGVzIHRvIHRoZSB2ZXJ5XG4gIC8vIGVuZCBvZiB0aGUgbWFpbiBzdG9yeS5cbiAgcHVibGljIFByZVByb2Nlc3NUb3BMZXZlbE9iamVjdHModG9wTGV2ZWxDb250ZW50OiBQYXJzZWRPYmplY3RbXSk6IHZvaWQge1xuICAgIHN1cGVyLlByZVByb2Nlc3NUb3BMZXZlbE9iamVjdHModG9wTGV2ZWxDb250ZW50KTtcblxuICAgIGNvbnN0IGZsb3dzRnJvbU90aGVyRmlsZXMgPSBbXTtcblxuICAgIC8vIEluamVjdCBpbmNsdWRlZCBmaWxlc1xuICAgIGZvciAobGV0IG9iaiBvZiB0b3BMZXZlbENvbnRlbnQpIHtcbiAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBJbmNsdWRlZEZpbGUpIHtcbiAgICAgICAgY29uc3QgZmlsZTogSW5jbHVkZWRGaWxlID0gb2JqO1xuXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgSW5jbHVkZWRGaWxlIGl0c2VsZlxuICAgICAgICBjb25zdCBwb3NPZk9iaiA9IHRvcExldmVsQ29udGVudC5pbmRleE9mKG9iaik7XG4gICAgICAgIHRvcExldmVsQ29udGVudC5zcGxpY2UocG9zT2ZPYmosIDEpO1xuXG4gICAgICAgIC8vIFdoZW4gYW4gaW5jbHVkZWQgc3RvcnkgZmFpbHMgdG8gbG9hZCwgdGhlIGluY2x1ZGVcbiAgICAgICAgLy8gbGluZSBpdHNlbGYgaXMgc3RpbGwgdmFsaWQsIHNvIHdlIGhhdmUgdG8gaGFuZGxlIGl0IGhlcmVcbiAgICAgICAgaWYgKGZpbGUuaW5jbHVkZWRTdG9yeSkge1xuICAgICAgICAgIGNvbnN0IG5vbkZsb3dDb250ZW50OiBQYXJzZWRPYmplY3RbXSA9IFtdO1xuICAgICAgICAgIGNvbnN0IHN1YlN0b3J5ID0gZmlsZS5pbmNsdWRlZFN0b3J5O1xuICAgICAgICAgIC8vIEFsbG93IGVtcHR5IGZpbGVcbiAgICAgICAgICBpZiAoc3ViU3RvcnkuY29udGVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN1YlN0b3J5T2JqIG9mIHN1YlN0b3J5LmNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgaWYgKHN1YlN0b3J5T2JqIGluc3RhbmNlb2YgRmxvd0Jhc2UpIHtcbiAgICAgICAgICAgICAgICBmbG93c0Zyb21PdGhlckZpbGVzLnB1c2goc3ViU3RvcnlPYmopO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vbkZsb3dDb250ZW50LnB1c2goc3ViU3RvcnlPYmopO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBuZXdsaW5lIG9uIHRoZSBlbmQgb2YgdGhlIGluY2x1ZGVcbiAgICAgICAgICAgIG5vbkZsb3dDb250ZW50LnB1c2gobmV3IFRleHQoXCJcXG5cIikpO1xuXG4gICAgICAgICAgICAvLyBBZGQgY29udGVudHMgb2YgdGhlIGZpbGUgaW4gaXRzIHBsYWNlXG4gICAgICAgICAgICB0b3BMZXZlbENvbnRlbnQuc3BsaWNlKHBvc09mT2JqLCAwLCAuLi5ub25GbG93Q29udGVudCk7XG5cbiAgICAgICAgICAgIC8vIFNraXAgcGFzdCB0aGUgY29udGVudCBvZiB0aGlzIHN1YiBzdG9yeVxuICAgICAgICAgICAgLy8gKHNpbmNlIGl0IHdpbGwgYWxyZWFkeSBoYXZlIHJlY3Vyc2l2ZWx5IGluY2x1ZGVkXG4gICAgICAgICAgICAvLyAgYW55IGxpbmVzIGZyb20gb3RoZXIgZmlsZXMpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5jbHVkZSBvYmplY3QgaGFzIGJlZW4gcmVtb3ZlZCwgd2l0aCBwb3NzaWJsZSBjb250ZW50IGluc2VydGVkLFxuICAgICAgICAvLyBhbmQgcG9zaXRpb24gb2YgJ2knIHdpbGwgaGF2ZSBiZWVuIGRldGVybWluZWQgYWxyZWFkeS5cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWRkIHRoZSBmbG93cyB3ZSBjb2xsZWN0ZWQgZnJvbSB0aGUgaW5jbHVkZWQgZmlsZXMgdG8gdGhlXG4gICAgLy8gZW5kIG9mIG91ciBsaXN0IG9mIG91ciBjb250ZW50XG4gICAgdG9wTGV2ZWxDb250ZW50LnNwbGljZSgwLCAwLCAuLi5mbG93c0Zyb21PdGhlckZpbGVzKTtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBFeHBvcnRSdW50aW1lID0gKFxuICAgIGVycm9ySGFuZGxlcjogRXJyb3JIYW5kbGVyIHwgbnVsbCA9IG51bGxcbiAgKTogUnVudGltZVN0b3J5IHwgbnVsbCA9PiB7XG4gICAgdGhpcy5fZXJyb3JIYW5kbGVyID0gZXJyb3JIYW5kbGVyO1xuXG4gICAgLy8gRmluZCBhbGwgY29uc3RhbnRzIGJlZm9yZSBtYWluIGV4cG9ydCBiZWdpbnMsIHNvIHRoYXQgVmFyaWFibGVSZWZlcmVuY2VzIGtub3dcbiAgICAvLyB3aGV0aGVyIHRvIGdlbmVyYXRlIGEgcnVudGltZSB2YXJpYWJsZSByZWZlcmVuY2Ugb3IgdGhlIGxpdGVyYWwgdmFsdWVcbiAgICB0aGlzLmNvbnN0YW50cyA9IG5ldyBNYXAoKTtcbiAgICBmb3IgKGNvbnN0IGNvbnN0RGVjbCBvZiB0aGlzLkZpbmRBbGwoQ29uc3RhbnREZWNsYXJhdGlvbikoKSkge1xuICAgICAgLy8gQ2hlY2sgZm9yIGR1cGxpY2F0ZSBkZWZpbml0aW9uc1xuICAgICAgY29uc3QgZXhpc3RpbmdEZWZpbml0aW9uOiBFeHByZXNzaW9uID0gdGhpcy5jb25zdGFudHMuZ2V0KFxuICAgICAgICBjb25zdERlY2wuY29uc3RhbnROYW1lIVxuICAgICAgKSBhcyBhbnk7XG5cbiAgICAgIGlmIChleGlzdGluZ0RlZmluaXRpb24pIHtcbiAgICAgICAgaWYgKCFleGlzdGluZ0RlZmluaXRpb24uRXF1YWxzKGNvbnN0RGVjbC5leHByZXNzaW9uKSkge1xuICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gYENPTlNUICcke2NvbnN0RGVjbC5jb25zdGFudE5hbWV9JyBoYXMgYmVlbiByZWRlZmluZWQgd2l0aCBhIGRpZmZlcmVudCB2YWx1ZS4gTXVsdGlwbGUgZGVmaW5pdGlvbnMgb2YgdGhlIHNhbWUgQ09OU1QgYXJlIHZhbGlkIHNvIGxvbmcgYXMgdGhleSBjb250YWluIHRoZSBzYW1lIHZhbHVlLiBJbml0aWFsIGRlZmluaXRpb24gd2FzIG9uICR7ZXhpc3RpbmdEZWZpbml0aW9uLmRlYnVnTWV0YWRhdGF9LmA7XG4gICAgICAgICAgdGhpcy5FcnJvcihlcnJvck1zZywgY29uc3REZWNsLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5jb25zdGFudHMuc2V0KGNvbnN0RGVjbC5jb25zdGFudE5hbWUhLCBjb25zdERlY2wuZXhwcmVzc2lvbik7XG4gICAgfVxuXG4gICAgLy8gTGlzdCBkZWZpbml0aW9ucyBhcmUgdHJlYXRlZCBsaWtlIGNvbnN0YW50cyB0b28gLSB0aGV5IHNob3VsZCBiZSB1c2FibGVcbiAgICAvLyBmcm9tIG90aGVyIHZhcmlhYmxlIGRlY2xhcmF0aW9ucy5cbiAgICB0aGlzLl9saXN0RGVmcyA9IG5ldyBNYXAoKTtcbiAgICBmb3IgKGNvbnN0IGxpc3REZWYgb2YgdGhpcy5GaW5kQWxsPExpc3REZWZpbml0aW9uPihMaXN0RGVmaW5pdGlvbikoKSkge1xuICAgICAgaWYgKGxpc3REZWYuaWRlbnRpZmllcj8ubmFtZSkge1xuICAgICAgICB0aGlzLl9saXN0RGVmcy5zZXQobGlzdERlZi5pZGVudGlmaWVyPy5uYW1lLCBsaXN0RGVmKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmV4dGVybmFscyA9IG5ldyBNYXAoKTtcblxuICAgIC8vIFJlc29sdXRpb24gb2Ygd2VhdmUgcG9pbnQgbmFtZXMgaGFzIHRvIGNvbWUgZmlyc3QsIGJlZm9yZSBhbnkgcnVudGltZSBjb2RlIGdlbmVyYXRpb25cbiAgICAvLyBzaW5jZSBuYW1lcyBoYXZlIHRvIGJlIHJlYWR5IGJlZm9yZSBkaXZlcnRzIHN0YXJ0IGdldHRpbmcgY3JlYXRlZC5cbiAgICAvLyAoSXQgdXNlZCB0byBiZSBkb25lIGluIHRoZSBjb25zdHJ1Y3RvciBmb3IgYSB3ZWF2ZSwgYnV0IGRpZG4ndCBhbGxvdyB1cyB0byBnZW5lcmF0ZVxuICAgIC8vIGVycm9ycyB3aGVuIG5hbWUgcmVzb2x1dGlvbiBmYWlsZWQuKVxuICAgIHRoaXMuUmVzb2x2ZVdlYXZlUG9pbnROYW1pbmcoKTtcblxuICAgIC8vIEdldCBkZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIHJ1bnRpbWVPYmplY3QsIHdoaWNoIGNhbGxzIENvbnRhaW5lckJhc2UncyBnZW5lcmF0aW9uIG1ldGhvZFxuICAgIGNvbnN0IHJvb3RDb250YWluZXIgPSB0aGlzLnJ1bnRpbWVPYmplY3QgYXMgUnVudGltZUNvbnRhaW5lcjtcblxuICAgIC8vIEV4cG9ydCBpbml0aWFsaXNhdGlvbiBvZiBnbG9iYWwgdmFyaWFibGVzXG4gICAgLy8gVE9ETzogV2UgKmNvdWxkKiBhZGQgdGhpcyBhcyBhIGRlY2xhcmF0aXZlIGJsb2NrIHRvIHRoZSBzdG9yeSBpdHNlbGYuLi5cbiAgICBjb25zdCB2YXJpYWJsZUluaXRpYWxpc2F0aW9uID0gbmV3IFJ1bnRpbWVDb250YWluZXIoKTtcbiAgICB2YXJpYWJsZUluaXRpYWxpc2F0aW9uLkFkZENvbnRlbnQoUnVudGltZUNvbnRyb2xDb21tYW5kLkV2YWxTdGFydCgpKTtcblxuICAgIC8vIEdsb2JhbCB2YXJpYWJsZXMgYXJlIHRob3NlIHRoYXQgYXJlIGxvY2FsIHRvIHRoZSBzdG9yeSBhbmQgbWFya2VkIGFzIGdsb2JhbFxuICAgIGNvbnN0IHJ1bnRpbWVMaXN0cyA9IFtdO1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIHRoaXMudmFyaWFibGVEZWNsYXJhdGlvbnMpIHtcbiAgICAgIGlmICh2YWx1ZS5pc0dsb2JhbERlY2xhcmF0aW9uKSB7XG4gICAgICAgIGlmICh2YWx1ZS5saXN0RGVmaW5pdGlvbikge1xuICAgICAgICAgIHRoaXMuX2xpc3REZWZzLnNldChrZXksIHZhbHVlLmxpc3REZWZpbml0aW9uKTtcbiAgICAgICAgICB2YXJpYWJsZUluaXRpYWxpc2F0aW9uLkFkZENvbnRlbnQoXG4gICAgICAgICAgICB2YWx1ZS5saXN0RGVmaW5pdGlvbi5ydW50aW1lT2JqZWN0IVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBydW50aW1lTGlzdHMucHVzaCh2YWx1ZS5saXN0RGVmaW5pdGlvbi5ydW50aW1lTGlzdERlZmluaXRpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICghdmFsdWUuZXhwcmVzc2lvbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhbHVlLmV4cHJlc3Npb24uR2VuZXJhdGVJbnRvQ29udGFpbmVyKHZhcmlhYmxlSW5pdGlhbGlzYXRpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcnVudGltZVZhckFzcyA9IG5ldyBSdW50aW1lVmFyaWFibGVBc3NpZ25tZW50KGtleSwgdHJ1ZSk7XG4gICAgICAgIHJ1bnRpbWVWYXJBc3MuaXNHbG9iYWwgPSB0cnVlO1xuICAgICAgICB2YXJpYWJsZUluaXRpYWxpc2F0aW9uLkFkZENvbnRlbnQocnVudGltZVZhckFzcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyaWFibGVJbml0aWFsaXNhdGlvbi5BZGRDb250ZW50KFJ1bnRpbWVDb250cm9sQ29tbWFuZC5FdmFsRW5kKCkpO1xuICAgIHZhcmlhYmxlSW5pdGlhbGlzYXRpb24uQWRkQ29udGVudChSdW50aW1lQ29udHJvbENvbW1hbmQuRW5kKCkpO1xuXG4gICAgaWYgKHRoaXMudmFyaWFibGVEZWNsYXJhdGlvbnMuc2l6ZSA+IDApIHtcbiAgICAgIHZhcmlhYmxlSW5pdGlhbGlzYXRpb24ubmFtZSA9IFwiZ2xvYmFsIGRlY2xcIjtcbiAgICAgIHJvb3RDb250YWluZXIuQWRkVG9OYW1lZENvbnRlbnRPbmx5KHZhcmlhYmxlSW5pdGlhbGlzYXRpb24pO1xuICAgIH1cblxuICAgIC8vIFNpZ25hbCB0aGF0IGl0J3Mgc2FmZSB0byBleGl0IHdpdGhvdXQgZXJyb3IsIGV2ZW4gaWYgdGhlcmUgYXJlIG5vIGNob2ljZXMgZ2VuZXJhdGVkXG4gICAgLy8gKHRoaXMgb25seSBoYXBwZW5zIGF0IHRoZSBlbmQgb2YgdG9wIGxldmVsIGNvbnRlbnQgdGhhdCBpc24ndCBpbiBhbnkgcGFydGljdWxhciBrbm90KVxuICAgIHJvb3RDb250YWluZXIuQWRkQ29udGVudChSdW50aW1lQ29udHJvbENvbW1hbmQuRG9uZSgpKTtcblxuICAgIC8vIFJlcGxhY2UgcnVudGltZU9iamVjdCB3aXRoIFN0b3J5IG9iamVjdCBpbnN0ZWFkIG9mIHRoZSBSdW50aW1lLkNvbnRhaW5lciBnZW5lcmF0ZWQgYnkgUGFyc2VkLkNvbnRhaW5lckJhc2VcbiAgICBjb25zdCBydW50aW1lU3RvcnkgPSBuZXcgUnVudGltZVN0b3J5KHJvb3RDb250YWluZXIsIHJ1bnRpbWVMaXN0cyk7XG5cbiAgICB0aGlzLnJ1bnRpbWVPYmplY3QgPSBydW50aW1lU3Rvcnk7XG5cbiAgICBpZiAodGhpcy5oYWRFcnJvcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gT3B0aW1pc2F0aW9uIHN0ZXAgLSBpbmxpbmUgY29udGFpbmVycyB0aGF0IGNhbiBiZVxuICAgIHRoaXMuRmxhdHRlbkNvbnRhaW5lcnNJbihyb290Q29udGFpbmVyKTtcblxuICAgIC8vIE5vdyB0aGF0IHRoZSBzdG9yeSBoYXMgYmVlbiBmdWxsZWQgcGFyc2VkIGludG8gYSBoaWVyYXJjaHksXG4gICAgLy8gYW5kIHRoZSBkZXJpdmVkIHJ1bnRpbWUgaGllcmFyY2h5IGhhcyBiZWVuIGJ1aWx0LCB3ZSBjYW5cbiAgICAvLyByZXNvbHZlIHJlZmVyZW5jZWQgc3ltYm9scyBzdWNoIGFzIHZhcmlhYmxlcyBhbmQgcGF0aHMuXG4gICAgLy8gZS5nLiBmb3IgcGF0aHMgXCIgLT4ga25vdE5hbWUgLS0+IHN0aXRjaE5hbWVcIiBpbnRvIGFuIElOS1BhdGggKGtub3ROYW1lLnN0aXRjaE5hbWUpXG4gICAgLy8gV2UgZG9uJ3QgbWFrZSBhbnkgYXNzdW1wdGlvbnMgdGhhdCB0aGUgSU5LUGF0aCBmb2xsb3dzIHRoZSBzYW1lXG4gICAgLy8gY29udmVudGlvbnMgYXMgdGhlIHNjcmlwdCBmb3JtYXQsIHNvIHdlIHJlc29sdmUgdG8gYWN0dWFsIG9iamVjdHMgYmVmb3JlXG4gICAgLy8gdHJhbnNsYXRpbmcgaW50byBhbiBJTktQYXRoLiAoVGhpcyBhbHNvIGFsbG93cyB1cyB0byBjaG9vc2Ugd2hldGhlclxuICAgIC8vIHdlIHdhbnQgdGhlIHBhdGhzIHRvIGJlIGFic29sdXRlKVxuICAgIHRoaXMuUmVzb2x2ZVJlZmVyZW5jZXModGhpcyk7XG5cbiAgICBpZiAodGhpcy5oYWRFcnJvcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcnVudGltZVN0b3J5LlJlc2V0U3RhdGUoKTtcblxuICAgIHJldHVybiBydW50aW1lU3Rvcnk7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IFJlc29sdmVMaXN0ID0gKGxpc3ROYW1lOiBzdHJpbmcpOiBMaXN0RGVmaW5pdGlvbiB8IG51bGwgPT4ge1xuICAgIGxldCBsaXN0OiBMaXN0RGVmaW5pdGlvbiB8IG51bGwgfCB1bmRlZmluZWQgPSB0aGlzLl9saXN0RGVmcy5nZXQobGlzdE5hbWUpO1xuICAgIGlmICghbGlzdCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpc3Q7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IFJlc29sdmVMaXN0SXRlbSA9IChcbiAgICBsaXN0TmFtZTogc3RyaW5nIHwgbnVsbCxcbiAgICBpdGVtTmFtZTogc3RyaW5nLFxuICAgIHNvdXJjZTogUGFyc2VkT2JqZWN0IHwgbnVsbCA9IG51bGxcbiAgKTogTGlzdEVsZW1lbnREZWZpbml0aW9uIHwgbnVsbCA9PiB7XG4gICAgbGV0IGxpc3REZWY6IExpc3REZWZpbml0aW9uIHwgbnVsbCB8IHVuZGVmaW5lZCA9IG51bGw7XG5cbiAgICAvLyBTZWFyY2ggYSBzcGVjaWZpYyBsaXN0IGlmIHdlIGtub3cgaXRzIG5hbWUgKGkuZS4gdGhlIGZvcm0gbGlzdE5hbWUuaXRlbU5hbWUpXG4gICAgaWYgKGxpc3ROYW1lKSB7XG4gICAgICBpZiAoIShsaXN0RGVmID0gdGhpcy5fbGlzdERlZnMuZ2V0KGxpc3ROYW1lKSkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBsaXN0RGVmLkl0ZW1OYW1lZChpdGVtTmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IHRvIHNlYXJjaCBhbGwgbGlzdHNcblxuICAgICAgbGV0IGZvdW5kSXRlbTogTGlzdEVsZW1lbnREZWZpbml0aW9uIHwgbnVsbCA9IG51bGw7XG4gICAgICBsZXQgb3JpZ2luYWxGb3VuZExpc3Q6IExpc3REZWZpbml0aW9uIHwgbnVsbCA9IG51bGw7XG5cbiAgICAgIGZvciAoY29uc3QgWywgdmFsdWVdIG9mIHRoaXMuX2xpc3REZWZzLmVudHJpZXMoKSkge1xuICAgICAgICBjb25zdCBpdGVtSW5UaGlzTGlzdCA9IHZhbHVlLkl0ZW1OYW1lZChpdGVtTmFtZSk7XG4gICAgICAgIGlmIChpdGVtSW5UaGlzTGlzdCkge1xuICAgICAgICAgIGlmIChmb3VuZEl0ZW0pIHtcbiAgICAgICAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgICAgICAgIGBBbWJpZ3VvdXMgaXRlbSBuYW1lICcke2l0ZW1OYW1lfScgZm91bmQgaW4gbXVsdGlwbGUgc2V0cywgaW5jbHVkaW5nICR7XG4gICAgICAgICAgICAgICAgb3JpZ2luYWxGb3VuZExpc3QhLmlkZW50aWZpZXJcbiAgICAgICAgICAgICAgfSBhbmQgJHt2YWx1ZSEuaWRlbnRpZmllcn1gLFxuICAgICAgICAgICAgICBzb3VyY2UsXG4gICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3VuZEl0ZW0gPSBpdGVtSW5UaGlzTGlzdDtcbiAgICAgICAgICAgIG9yaWdpbmFsRm91bmRMaXN0ID0gdmFsdWUhO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm91bmRJdGVtO1xuICAgIH1cbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgRmxhdHRlbkNvbnRhaW5lcnNJbiA9IChjb250YWluZXI6IFJ1bnRpbWVDb250YWluZXIpOiB2b2lkID0+IHtcbiAgICAvLyBOZWVkIHRvIGNyZWF0ZSBhIGNvbGxlY3Rpb24gdG8gaG9sZCB0aGUgaW5uZXIgY29udGFpbmVyc1xuICAgIC8vIGJlY2F1c2Ugb3RoZXJ3aXNlIHdlJ2QgZW5kIHVwIG1vZGlmeWluZyBkdXJpbmcgaXRlcmF0aW9uXG4gICAgY29uc3QgaW5uZXJDb250YWluZXJzID0gbmV3IFNldDxSdW50aW1lQ29udGFpbmVyPigpO1xuICAgIGlmIChjb250YWluZXIuY29udGVudCkge1xuICAgICAgZm9yIChjb25zdCBjIG9mIGNvbnRhaW5lci5jb250ZW50KSB7XG4gICAgICAgIGNvbnN0IGlubmVyQ29udGFpbmVyID0gYXNPck51bGwoYywgUnVudGltZUNvbnRhaW5lcik7XG4gICAgICAgIGlmIChpbm5lckNvbnRhaW5lcikge1xuICAgICAgICAgIGlubmVyQ29udGFpbmVycy5hZGQoaW5uZXJDb250YWluZXIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FuJ3QgZmxhdHRlbiB0aGUgbmFtZWQgaW5uZXIgY29udGFpbmVycywgYnV0IHdlIGNhbiBhdCBsZWFzdFxuICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCB0aGVpciBjaGlsZHJlblxuICAgIGlmIChjb250YWluZXIubmFtZWRDb250ZW50KSB7XG4gICAgICBmb3IgKGNvbnN0IFssIHZhbHVlXSBvZiBjb250YWluZXIubmFtZWRDb250ZW50KSB7XG4gICAgICAgIGNvbnN0IG5hbWVkSW5uZXJDb250YWluZXIgPSBhc09yTnVsbCh2YWx1ZSwgUnVudGltZUNvbnRhaW5lcik7XG4gICAgICAgIGlmIChuYW1lZElubmVyQ29udGFpbmVyKSB7XG4gICAgICAgICAgaW5uZXJDb250YWluZXJzLmFkZChuYW1lZElubmVyQ29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgaW5uZXJDb250YWluZXIgb2YgaW5uZXJDb250YWluZXJzKSB7XG4gICAgICB0aGlzLlRyeUZsYXR0ZW5Db250YWluZXIoaW5uZXJDb250YWluZXIpO1xuICAgICAgdGhpcy5GbGF0dGVuQ29udGFpbmVyc0luKGlubmVyQ29udGFpbmVyKTtcbiAgICB9XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IFRyeUZsYXR0ZW5Db250YWluZXIgPSAoY29udGFpbmVyOiBSdW50aW1lQ29udGFpbmVyKTogdm9pZCA9PiB7XG4gICAgaWYgKFxuICAgICAgKGNvbnRhaW5lci5uYW1lZENvbnRlbnQgJiYgY29udGFpbmVyLm5hbWVkQ29udGVudC5zaXplID4gMCkgfHxcbiAgICAgIGNvbnRhaW5lci5oYXNWYWxpZE5hbWUgfHxcbiAgICAgIHRoaXMuX2RvbnRGbGF0dGVuQ29udGFpbmVycy5oYXMoY29udGFpbmVyKVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElubGluZSBhbGwgdGhlIGNvbnRlbnQgaW4gY29udGFpbmVyIGludG8gdGhlIHBhcmVudFxuICAgIGNvbnN0IHBhcmVudENvbnRhaW5lciA9IGFzT3JOdWxsKGNvbnRhaW5lci5wYXJlbnQsIFJ1bnRpbWVDb250YWluZXIpO1xuICAgIGlmIChwYXJlbnRDb250YWluZXIpIHtcbiAgICAgIGxldCBjb250ZW50SWR4ID0gcGFyZW50Q29udGFpbmVyLmNvbnRlbnQuaW5kZXhPZihjb250YWluZXIpO1xuICAgICAgcGFyZW50Q29udGFpbmVyLmNvbnRlbnQuc3BsaWNlKGNvbnRlbnRJZHgsIDEpO1xuXG4gICAgICBjb25zdCBkbSA9IGNvbnRhaW5lci5vd25EZWJ1Z01ldGFkYXRhO1xuXG4gICAgICBpZiAoY29udGFpbmVyLmNvbnRlbnQpIHtcbiAgICAgICAgZm9yIChjb25zdCBpbm5lckNvbnRlbnQgb2YgY29udGFpbmVyLmNvbnRlbnQpIHtcbiAgICAgICAgICBpbm5lckNvbnRlbnQucGFyZW50ID0gbnVsbDtcbiAgICAgICAgICBpZiAoZG0gIT09IG51bGwgJiYgaW5uZXJDb250ZW50Lm93bkRlYnVnTWV0YWRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGlubmVyQ29udGVudC5kZWJ1Z01ldGFkYXRhID0gZG07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcGFyZW50Q29udGFpbmVyLkluc2VydENvbnRlbnQoaW5uZXJDb250ZW50LCBjb250ZW50SWR4KTtcbiAgICAgICAgICBjb250ZW50SWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IEVycm9yID0gKFxuICAgIG1lc3NhZ2U6IHN0cmluZyxcbiAgICBzb3VyY2U6IFBhcnNlZE9iamVjdCB8IG51bGwgfCB1bmRlZmluZWQsXG4gICAgaXNXYXJuaW5nOiBib29sZWFuIHwgbnVsbCB8IHVuZGVmaW5lZFxuICApID0+IHtcbiAgICBsZXQgZXJyb3JUeXBlOiBFcnJvclR5cGUgPSBpc1dhcm5pbmcgPyBFcnJvclR5cGUuV2FybmluZyA6IEVycm9yVHlwZS5FcnJvcjtcblxuICAgIGxldCBzYiA9IFwiXCI7XG4gICAgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIEF1dGhvcldhcm5pbmcpIHtcbiAgICAgIHNiICs9IFwiVE9ETzogXCI7XG4gICAgICBlcnJvclR5cGUgPSBFcnJvclR5cGUuQXV0aG9yO1xuICAgIH0gZWxzZSBpZiAoaXNXYXJuaW5nKSB7XG4gICAgICBzYiArPSBcIldBUk5JTkc6IFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBzYiArPSBcIkVSUk9SOiBcIjtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBzb3VyY2UgJiZcbiAgICAgIHNvdXJjZS5kZWJ1Z01ldGFkYXRhICE9PSBudWxsICYmXG4gICAgICBzb3VyY2UuZGVidWdNZXRhZGF0YS5zdGFydExpbmVOdW1iZXIgPj0gMVxuICAgICkge1xuICAgICAgaWYgKHNvdXJjZS5kZWJ1Z01ldGFkYXRhLmZpbGVOYW1lICE9IG51bGwpIHtcbiAgICAgICAgc2IgKz0gYCcke3NvdXJjZS5kZWJ1Z01ldGFkYXRhLmZpbGVOYW1lfScgYDtcbiAgICAgIH1cblxuICAgICAgc2IgKz0gYGxpbmUgJHtzb3VyY2UuZGVidWdNZXRhZGF0YS5zdGFydExpbmVOdW1iZXJ9OiBgO1xuICAgIH1cblxuICAgIHNiICs9IG1lc3NhZ2U7XG5cbiAgICBtZXNzYWdlID0gc2I7XG5cbiAgICBpZiAodGhpcy5fZXJyb3JIYW5kbGVyICE9PSBudWxsKSB7XG4gICAgICB0aGlzLl9lcnJvckhhbmRsZXIobWVzc2FnZSwgZXJyb3JUeXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICAgIH1cblxuICAgIHRoaXMuX2hhZEVycm9yID0gZXJyb3JUeXBlID09PSBFcnJvclR5cGUuRXJyb3I7XG4gICAgdGhpcy5faGFkV2FybmluZyA9IGVycm9yVHlwZSA9PT0gRXJyb3JUeXBlLldhcm5pbmc7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IFJlc2V0RXJyb3IgPSAoKTogdm9pZCA9PiB7XG4gICAgdGhpcy5faGFkRXJyb3IgPSBmYWxzZTtcbiAgICB0aGlzLl9oYWRXYXJuaW5nID0gZmFsc2U7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IElzRXh0ZXJuYWwgPSAobmFtZWRGdW5jVGFyZ2V0OiBzdHJpbmcpOiBib29sZWFuID0+XG4gICAgdGhpcy5leHRlcm5hbHMuaGFzKG5hbWVkRnVuY1RhcmdldCk7XG5cbiAgcHVibGljIHJlYWRvbmx5IEFkZEV4dGVybmFsID0gKGRlY2w6IEV4dGVybmFsRGVjbGFyYXRpb24pOiB2b2lkID0+IHtcbiAgICBpZiAodGhpcy5leHRlcm5hbHMuaGFzKGRlY2wubmFtZSEpKSB7XG4gICAgICB0aGlzLkVycm9yKFxuICAgICAgICBgRHVwbGljYXRlIEVYVEVSTkFMIGRlZmluaXRpb24gb2YgJyR7ZGVjbC5uYW1lfSdgLFxuICAgICAgICBkZWNsLFxuICAgICAgICBmYWxzZVxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGRlY2wubmFtZSkge1xuICAgICAgdGhpcy5leHRlcm5hbHMuc2V0KGRlY2wubmFtZSwgZGVjbCk7XG4gICAgfVxuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBEb250RmxhdHRlbkNvbnRhaW5lciA9IChcbiAgICBjb250YWluZXI6IFJ1bnRpbWVDb250YWluZXJcbiAgKTogdm9pZCA9PiB7XG4gICAgdGhpcy5fZG9udEZsYXR0ZW5Db250YWluZXJzLmFkZChjb250YWluZXIpO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBOYW1lQ29uZmxpY3RFcnJvciA9IChcbiAgICBvYmo6IFBhcnNlZE9iamVjdCxcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgZXhpc3RpbmdPYmo6IFBhcnNlZE9iamVjdCxcbiAgICB0eXBlTmFtZVRvUHJpbnQ6IHN0cmluZ1xuICApOiB2b2lkID0+IHtcbiAgICBvYmouRXJyb3IoXG4gICAgICBgJHt0eXBlTmFtZVRvUHJpbnR9ICcke25hbWV9JzogbmFtZSBoYXMgYWxyZWFkeSBiZWVuIHVzZWQgZm9yIGEgJHtleGlzdGluZ09iai50eXBlTmFtZS50b0xvd2VyQ2FzZSgpfSBvbiAke1xuICAgICAgICBleGlzdGluZ09iai5kZWJ1Z01ldGFkYXRhXG4gICAgICB9YFxuICAgICk7XG4gIH07XG5cbiAgLy8gQ2hlY2sgZ2l2ZW4gc3ltYm9sIHR5cGUgYWdhaW5zdCBldmVyeXRoaW5nIHRoYXQncyBvZiBhIGhpZ2hlciBwcmlvcml0eSBpbiB0aGUgb3JkZXJlZCBTeW1ib2xUeXBlIGVudW0gKGFib3ZlKS5cbiAgLy8gV2hlbiB0aGUgZ2l2ZW4gc3ltYm9sIHR5cGUgbGV2ZWwgaXMgcmVhY2hlZCwgd2UgZWFybHktb3V0IC8gcmV0dXJuLlxuICBwdWJsaWMgcmVhZG9ubHkgQ2hlY2tGb3JOYW1pbmdDb2xsaXNpb25zID0gKFxuICAgIG9iajogUGFyc2VkT2JqZWN0LFxuICAgIGlkZW50aWZpZXI6IElkZW50aWZpZXIsXG4gICAgc3ltYm9sVHlwZTogU3ltYm9sVHlwZSxcbiAgICB0eXBlTmFtZU92ZXJyaWRlOiBzdHJpbmcgPSBcIlwiXG4gICk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IHR5cGVOYW1lVG9QcmludDogc3RyaW5nID0gdHlwZU5hbWVPdmVycmlkZSB8fCBvYmoudHlwZU5hbWU7XG4gICAgaWYgKFN0b3J5LklzUmVzZXJ2ZWRLZXl3b3JkKGlkZW50aWZpZXI/Lm5hbWUpKSB7XG4gICAgICBvYmouRXJyb3IoXG4gICAgICAgIGAnJHtpZGVudGlmaWVyfScgY2Fubm90IGJlIHVzZWQgZm9yIHRoZSBuYW1lIG9mIGEgJHt0eXBlTmFtZVRvUHJpbnQudG9Mb3dlckNhc2UoKX0gYmVjYXVzZSBpdCdzIGEgcmVzZXJ2ZWQga2V5d29yZGBcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmIChGdW5jdGlvbkNhbGwuSXNCdWlsdEluKGlkZW50aWZpZXI/Lm5hbWUgfHwgXCJcIikpIHtcbiAgICAgIG9iai5FcnJvcihcbiAgICAgICAgYCcke2lkZW50aWZpZXJ9JyBjYW5ub3QgYmUgdXNlZCBmb3IgdGhlIG5hbWUgb2YgYSAke3R5cGVOYW1lVG9QcmludC50b0xvd2VyQ2FzZSgpfSBiZWNhdXNlIGl0J3MgYSBidWlsdCBpbiBmdW5jdGlvbmBcbiAgICAgICk7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBUb3AgbGV2ZWwga25vdHNcbiAgICBjb25zdCBtYXliZUtub3RPckZ1bmN0aW9uID0gdGhpcy5Db250ZW50V2l0aE5hbWVBdExldmVsKFxuICAgICAgaWRlbnRpZmllcj8ubmFtZSB8fCBcIlwiLFxuICAgICAgRmxvd0xldmVsLktub3RcbiAgICApO1xuXG4gICAgY29uc3Qga25vdE9yRnVuY3Rpb24gPSBhc09yTnVsbChtYXliZUtub3RPckZ1bmN0aW9uLCBGbG93QmFzZSk7XG5cbiAgICBpZiAoXG4gICAgICBrbm90T3JGdW5jdGlvbiAmJlxuICAgICAgKGtub3RPckZ1bmN0aW9uICE9PSBvYmogfHwgc3ltYm9sVHlwZSA9PT0gU3ltYm9sVHlwZS5BcmcpXG4gICAgKSB7XG4gICAgICB0aGlzLk5hbWVDb25mbGljdEVycm9yKFxuICAgICAgICBvYmosXG4gICAgICAgIGlkZW50aWZpZXI/Lm5hbWUgfHwgXCJcIixcbiAgICAgICAga25vdE9yRnVuY3Rpb24sXG4gICAgICAgIHR5cGVOYW1lVG9QcmludFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc3ltYm9sVHlwZSA8IFN5bWJvbFR5cGUuTGlzdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIExpc3RzXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgdGhpcy5fbGlzdERlZnMpIHtcbiAgICAgIGlmIChcbiAgICAgICAgaWRlbnRpZmllcj8ubmFtZSA9PT0ga2V5ICYmXG4gICAgICAgIG9iaiAhPT0gdmFsdWUgJiZcbiAgICAgICAgdmFsdWUudmFyaWFibGVBc3NpZ25tZW50ICE9PSBvYmpcbiAgICAgICkge1xuICAgICAgICB0aGlzLk5hbWVDb25mbGljdEVycm9yKG9iaiwgaWRlbnRpZmllcj8ubmFtZSwgdmFsdWUsIHR5cGVOYW1lVG9QcmludCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFdlIGRvbid0IGNoZWNrIGZvciBjb25mbGljdHMgYmV0d2VlbiBpbmRpdmlkdWFsIGVsZW1lbnRzIGluXG4gICAgICAvLyBkaWZmZXJlbnQgbGlzdHMgYmVjYXVzZSB0aGV5IGFyZSBuYW1lc3BhY2VkLlxuICAgICAgaWYgKCEob2JqIGluc3RhbmNlb2YgTGlzdEVsZW1lbnREZWZpbml0aW9uKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdmFsdWUuaXRlbURlZmluaXRpb25zKSB7XG4gICAgICAgICAgaWYgKGlkZW50aWZpZXI/Lm5hbWUgPT09IGl0ZW0ubmFtZSkge1xuICAgICAgICAgICAgdGhpcy5OYW1lQ29uZmxpY3RFcnJvcihcbiAgICAgICAgICAgICAgb2JqLFxuICAgICAgICAgICAgICBpZGVudGlmaWVyPy5uYW1lIHx8IFwiXCIsXG4gICAgICAgICAgICAgIGl0ZW0sXG4gICAgICAgICAgICAgIHR5cGVOYW1lVG9QcmludFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBEb24ndCBjaGVjayBmb3IgVkFSLT5WQVIgY29uZmxpY3RzIGJlY2F1c2UgdGhhdCdzIGhhbmRsZWQgc2VwYXJhdGVseVxuICAgIC8vIChuZWNlc3Nhcnkgc2luY2UgY2hlY2tpbmcgbG9va3MgdXAgaW4gYSBkaWN0aW9uYXJ5KVxuICAgIGlmIChzeW1ib2xUeXBlIDw9IFN5bWJvbFR5cGUuVmFyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gR2xvYmFsIHZhcmlhYmxlIGNvbGxpc2lvblxuICAgIGNvbnN0IHZhckRlY2w6IFZhcmlhYmxlQXNzaWdubWVudCB8IG51bGwgPVxuICAgICAgKGlkZW50aWZpZXI/Lm5hbWUgJiYgdGhpcy52YXJpYWJsZURlY2xhcmF0aW9ucy5nZXQoaWRlbnRpZmllcj8ubmFtZSkpIHx8XG4gICAgICBudWxsO1xuICAgIGlmIChcbiAgICAgIHZhckRlY2wgJiZcbiAgICAgIHZhckRlY2wgIT09IG9iaiAmJlxuICAgICAgdmFyRGVjbC5pc0dsb2JhbERlY2xhcmF0aW9uICYmXG4gICAgICB2YXJEZWNsLmxpc3REZWZpbml0aW9uID09IG51bGxcbiAgICApIHtcbiAgICAgIHRoaXMuTmFtZUNvbmZsaWN0RXJyb3IoXG4gICAgICAgIG9iaixcbiAgICAgICAgaWRlbnRpZmllcj8ubmFtZSB8fCBcIlwiLFxuICAgICAgICB2YXJEZWNsLFxuICAgICAgICB0eXBlTmFtZVRvUHJpbnRcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHN5bWJvbFR5cGUgPCBTeW1ib2xUeXBlLlN1YkZsb3dBbmRXZWF2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFN0aXRjaGVzLCBDaG9pY2VzIGFuZCBHYXRoZXJzXG4gICAgY29uc3QgcGF0aCA9IG5ldyBQYXRoKGlkZW50aWZpZXIpO1xuICAgIGNvbnN0IHRhcmdldENvbnRlbnQgPSBwYXRoLlJlc29sdmVGcm9tQ29udGV4dChvYmopO1xuICAgIGlmICh0YXJnZXRDb250ZW50ICYmIHRhcmdldENvbnRlbnQgIT09IG9iaikge1xuICAgICAgdGhpcy5OYW1lQ29uZmxpY3RFcnJvcihcbiAgICAgICAgb2JqLFxuICAgICAgICBpZGVudGlmaWVyPy5uYW1lIHx8IFwiXCIsXG4gICAgICAgIHRhcmdldENvbnRlbnQsXG4gICAgICAgIHR5cGVOYW1lVG9QcmludFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc3ltYm9sVHlwZSA8IFN5bWJvbFR5cGUuQXJnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQXJndW1lbnRzIHRvIHRoZSBjdXJyZW50IGZsb3dcbiAgICBpZiAoc3ltYm9sVHlwZSAhPT0gU3ltYm9sVHlwZS5BcmcpIHtcbiAgICAgIGxldCBmbG93OiBGbG93QmFzZSB8IG51bGwgPSBhc09yTnVsbChvYmosIEZsb3dCYXNlKTtcbiAgICAgIGlmICghZmxvdykge1xuICAgICAgICBmbG93ID0gQ2xvc2VzdEZsb3dCYXNlKG9iaik7XG4gICAgICB9XG5cbiAgICAgIGlmIChmbG93ICYmIGZsb3cuaGFzUGFyYW1ldGVycyAmJiBmbG93LmFyZ3MpIHtcbiAgICAgICAgZm9yIChjb25zdCBhcmcgb2YgZmxvdy5hcmdzKSB7XG4gICAgICAgICAgaWYgKGFyZy5pZGVudGlmaWVyPy5uYW1lID09PSBpZGVudGlmaWVyPy5uYW1lKSB7XG4gICAgICAgICAgICBvYmouRXJyb3IoXG4gICAgICAgICAgICAgIGAke3R5cGVOYW1lVG9QcmludH0gJyR7aWRlbnRpZmllcn0nOiBuYW1lIGhhcyBhbHJlYWR5IGJlZW4gdXNlZCBmb3IgYSBhcmd1bWVudCB0byAke2Zsb3cuaWRlbnRpZmllcn0gb24gJHtmbG93LmRlYnVnTWV0YWRhdGF9YFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cbiIsImltcG9ydCB7IENvbnRhaW5lciBhcyBSdW50aW1lQ29udGFpbmVyIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9Db250YWluZXJcIjtcbmltcG9ydCB7IENvbnRyb2xDb21tYW5kIGFzIFJ1bnRpbWVDb250cm9sQ29tbWFuZCB9IGZyb20gXCIuLi8uLi8uLi8uLi9lbmdpbmUvQ29udHJvbENvbW1hbmRcIjtcbmltcG9ydCB7IEV4cHJlc3Npb24gfSBmcm9tIFwiLi9FeHByZXNzaW9uXCI7XG5pbXBvcnQgeyBQYXJzZWRPYmplY3QgfSBmcm9tIFwiLi4vT2JqZWN0XCI7XG5pbXBvcnQgeyBUZXh0IH0gZnJvbSBcIi4uL1RleHRcIjtcbmltcG9ydCB7IGFzT3JOdWxsIH0gZnJvbSBcIi4uLy4uLy4uLy4uL2VuZ2luZS9UeXBlQXNzZXJ0aW9uXCI7XG5cbmV4cG9ydCBjbGFzcyBTdHJpbmdFeHByZXNzaW9uIGV4dGVuZHMgRXhwcmVzc2lvbiB7XG4gIGdldCBpc1NpbmdsZVN0cmluZygpIHtcbiAgICBpZiAodGhpcy5jb250ZW50Lmxlbmd0aCAhPT0gMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGMgPSB0aGlzLmNvbnRlbnRbMF07XG4gICAgaWYgKCEoYyBpbnN0YW5jZW9mIFRleHQpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihjb250ZW50OiBQYXJzZWRPYmplY3RbXSkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLkFkZENvbnRlbnQoY29udGVudCk7XG4gIH1cblxuICBnZXQgdHlwZU5hbWUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJTdHJpbmdcIjtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBHZW5lcmF0ZUludG9Db250YWluZXIgPSAoXG4gICAgY29udGFpbmVyOiBSdW50aW1lQ29udGFpbmVyXG4gICk6IHZvaWQgPT4ge1xuICAgIGNvbnRhaW5lci5BZGRDb250ZW50KFJ1bnRpbWVDb250cm9sQ29tbWFuZC5CZWdpblN0cmluZygpKTtcblxuICAgIGZvciAoY29uc3QgYyBvZiB0aGlzLmNvbnRlbnQpIHtcbiAgICAgIGNvbnRhaW5lci5BZGRDb250ZW50KGMucnVudGltZU9iamVjdCk7XG4gICAgfVxuXG4gICAgY29udGFpbmVyLkFkZENvbnRlbnQoUnVudGltZUNvbnRyb2xDb21tYW5kLkVuZFN0cmluZygpKTtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgdG9TdHJpbmcgPSAoKTogc3RyaW5nID0+IHtcbiAgICBsZXQgc2IgPSBcIlwiO1xuICAgIGZvciAoY29uc3QgYyBvZiB0aGlzLmNvbnRlbnQpIHtcbiAgICAgIHNiICs9IGM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNiO1xuICB9O1xuXG4gIC8vIEVxdWFscyBvdmVycmlkZSBuZWNlc3NhcnkgaW4gb3JkZXIgdG8gY2hlY2sgZm9yIENPTlNUIG11bHRpcGxlIGRlZmluaXRpb24gZXF1YWxpdHlcbiAgcHVibGljIEVxdWFscyhvYmo6IFBhcnNlZE9iamVjdCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG90aGVyU3RyID0gYXNPck51bGwob2JqLCBTdHJpbmdFeHByZXNzaW9uKTtcbiAgICBpZiAob3RoZXJTdHIgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBDYW4gb25seSBjb21wYXJlIGRpcmVjdCBlcXVhbGl0eSBvbiBzaW5nbGUgc3RyaW5ncyByYXRoZXIgdGhhblxuICAgIC8vIGNvbXBsZXggc3RyaW5nIGV4cHJlc3Npb25zIHRoYXQgY29udGFpbiBkeW5hbWljIGxvZ2ljXG4gICAgaWYgKCF0aGlzLmlzU2luZ2xlU3RyaW5nIHx8ICFvdGhlclN0ci5pc1NpbmdsZVN0cmluZykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IHRoaXNUeHQgPSB0aGlzLnRvU3RyaW5nKCk7XG4gICAgY29uc3Qgb3RoZXJUeHQgPSBvdGhlclN0ci50b1N0cmluZygpO1xuICAgIHJldHVybiB0aGlzVHh0ID09PSBvdGhlclR4dDtcbiAgfVxufVxuIiwiaW1wb3J0IHsgUGFyc2VkT2JqZWN0IH0gZnJvbSBcIi4vT2JqZWN0XCI7XG5pbXBvcnQgeyBDb250cm9sQ29tbWFuZCB9IGZyb20gXCIuLi8uLi8uLi9lbmdpbmUvQ29udHJvbENvbW1hbmRcIjtcbmltcG9ydCB7IElua09iamVjdCBhcyBSdW50aW1lT2JqZWN0IH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9PYmplY3RcIjtcblxuZXhwb3J0IGNsYXNzIFRhZyBleHRlbmRzIFBhcnNlZE9iamVjdCB7XG4gIHB1YmxpYyBpc1N0YXJ0OiBib29sZWFuO1xuICBwdWJsaWMgaW5DaG9pY2U6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoaXNTdGFydDogYm9vbGVhbiwgaW5DaG9pY2U6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5pc1N0YXJ0ID0gaXNTdGFydDtcbiAgICB0aGlzLmluQ2hvaWNlID0gaW5DaG9pY2U7XG4gIH1cbiAgZ2V0IHR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiVGFnXCI7XG4gIH1cbiAgcHVibGljIHJlYWRvbmx5IEdlbmVyYXRlUnVudGltZU9iamVjdCA9ICgpOiBSdW50aW1lT2JqZWN0ID0+IHtcbiAgICBpZiAodGhpcy5pc1N0YXJ0KSB7XG4gICAgICByZXR1cm4gQ29udHJvbENvbW1hbmQuQmVnaW5UYWcoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIENvbnRyb2xDb21tYW5kLkVuZFRhZygpO1xuICAgIH1cbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgdG9TdHJpbmcgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuaXNTdGFydCkge1xuICAgICAgcmV0dXJuIFwiI1N0YXJ0VGFnXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBcIiNFbmRUYWdcIjtcbiAgICB9XG4gIH07XG59XG5cbmltcG9ydCB7IFRhZyBhcyBSdW50aW1lVGFnIH0gZnJvbSBcIi4uLy4uLy4uL2VuZ2luZS9UYWdcIjtcbmltcG9ydCB7IFdyYXAgfSBmcm9tIFwiLi9XcmFwXCI7XG5leHBvcnQgY2xhc3MgTGVnYWN5VGFnIGV4dGVuZHMgV3JhcDxSdW50aW1lVGFnPiB7XG4gIGNvbnN0cnVjdG9yKHRhZzogUnVudGltZVRhZykge1xuICAgIHN1cGVyKHRhZyk7XG4gIH1cbiAgZ2V0IHR5cGVOYW1lKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiVGFnXCI7XG4gIH1cbn1cbiIsImltcG9ydCB7IElGaWxlSGFuZGxlciB9IGZyb20gXCIuLi9JRmlsZUhhbmRsZXJcIjtcblxuLy8gVGhpcyBjbGFzcyByZXBsYWNlcyB1cHN0cmVhbSdzIERlZmF1bHRGaWxlSGFuZGxlci4gSXQgZG9lc24ndCBwZXJmb3JtIGFueVxuLy8gcmVzb2x1dGlvbiBhbmQgd2FybnMgdGhlIHVzZXIgYWJvdXQgcHJvdmlkaW5nIGEgcHJvcGVyIGZpbGUgaGFuZGxlciB3aGVuXG4vLyBJTkNMVURFIHN0YXRlbWVudHMgYXJlIHBhcnNlZC4gU2luY2UgdGhlIEphdmFTY3JpcHQgcGFyc2VyIGNhbiBiZSBleGVjdXRlZCBpblxuLy8gZGlmZmVyZW50IGVudmlyb25tZW50cywgd2UgbGV0IHRoZSB1c2VyIGRlY2lkZSB3aGljaCBGaWxlSGFuZGxlciBpcyBiZXN0IGZvclxuLy8gdGhlaXIgdXNlLWNhc2UuIFNlZSBQb3NpeEZpbGVIYW5kbGVyIGFuZCBKc29uRmlsZUhhbmRsZXIuXG5leHBvcnQgY2xhc3MgRGVmYXVsdEZpbGVIYW5kbGVyIGltcGxlbWVudHMgSUZpbGVIYW5kbGVyIHtcbiAgY29uc3RydWN0b3IocHVibGljIHJlYWRvbmx5IHJvb3RQYXRoPzogc3RyaW5nKSB7fVxuXG4gIHJlYWRvbmx5IFJlc29sdmVJbmtGaWxlbmFtZSA9ICgpOiBzdHJpbmcgPT4ge1xuICAgIHRocm93IEVycm9yKFxuICAgICAgXCJDYW4ndCByZXNvbHZlIGZpbGVuYW1lIGJlY2F1c2Ugbm8gRmlsZUhhbmRsZXIgd2FzIHByb3ZpZGVkIHdoZW4gaW5zdGFudGlhdGluZyB0aGUgcGFyc2VyIC8gY29tcGlsZXIuXCJcbiAgICApO1xuICB9O1xuXG4gIHJlYWRvbmx5IExvYWRJbmtGaWxlQ29udGVudHMgPSAoKTogc3RyaW5nID0+IHtcbiAgICB0aHJvdyBFcnJvcihcbiAgICAgIFwiQ2FuJ3QgbG9hZCBpbmsgY29udGVudCBiZWNhdXNlIG5vIEZpbGVIYW5kbGVyIHdhcyBwcm92aWRlZCB3aGVuIGluc3RhbnRpYXRpbmcgdGhlIHBhcnNlciAvIGNvbXBpbGVyLlwiXG4gICAgKTtcbiAgfTtcbn1cbiIsImltcG9ydCB7IEFyZ3VtZW50IH0gZnJvbSBcIi4vUGFyc2VkSGllcmFyY2h5L0FyZ3VtZW50XCI7XG5pbXBvcnQgeyBBdXRob3JXYXJuaW5nIH0gZnJvbSBcIi4vUGFyc2VkSGllcmFyY2h5L0F1dGhvcldhcm5pbmdcIjtcbmltcG9ydCB7IEJpbmFyeUV4cHJlc3Npb24gfSBmcm9tIFwiLi9QYXJzZWRIaWVyYXJjaHkvRXhwcmVzc2lvbi9CaW5hcnlFeHByZXNzaW9uXCI7XG5pbXBvcnQgeyBDaGFyYWN0ZXJSYW5nZSB9IGZyb20gXCIuL0NoYXJhY3RlclJhbmdlXCI7XG5pbXBvcnQgeyBDaGFyYWN0ZXJTZXQgfSBmcm9tIFwiLi9DaGFyYWN0ZXJTZXRcIjtcbmltcG9ydCB7IENob2ljZSB9IGZyb20gXCIuL1BhcnNlZEhpZXJhcmNoeS9DaG9pY2VcIjtcbmltcG9ydCB7IENvbW1lbnRFbGltaW5hdG9yIH0gZnJvbSBcIi4vQ29tbWVudEVsaW1pbmF0b3JcIjtcbmltcG9ydCB7IENvbmRpdGlvbmFsIH0gZnJvbSBcIi4vUGFyc2VkSGllcmFyY2h5L0NvbmRpdGlvbmFsL0NvbmRpdGlvbmFsXCI7XG5pbXBvcnQgeyBDb25kaXRpb25hbFNpbmdsZUJyYW5jaCB9IGZyb20gXCIuL1BhcnNlZEhpZXJhcmNoeS9Db25kaXRpb25hbC9Db25kaXRpb25hbFNpbmdsZUJyYW5jaFwiO1xuaW1wb3J0IHsgQ29udGVudExpc3QgfSBmcm9tIFwiLi9QYXJzZWRIaWVyYXJjaHkvQ29udGVudExpc3RcIjtcbmltcG9ydCB7IENvbnN0YW50RGVjbGFyYXRpb24gfSBmcm9tIFwiLi9QYXJzZWRIaWVyYXJjaHkvRGVjbGFyYXRpb24vQ29uc3RhbnREZWNsYXJhdGlvblwiO1xuaW1wb3J0IHsgQ3VzdG9tRmxhZ3MgfSBmcm9tIFwiLi9DdXN0b21GbGFnc1wiO1xuaW1wb3J0IHsgRGVidWdNZXRhZGF0YSB9IGZyb20gXCIuLi8uLi9lbmdpbmUvRGVidWdNZXRhZGF0YVwiO1xuaW1wb3J0IHsgRGl2ZXJ0IH0gZnJvbSBcIi4vUGFyc2VkSGllcmFyY2h5L0RpdmVydC9EaXZlcnRcIjtcbmltcG9ydCB7IERpdmVydFRhcmdldCB9IGZyb20gXCIuL1BhcnNlZEhpZXJhcmNoeS9EaXZlcnQvRGl2ZXJ0VGFyZ2V0XCI7XG5pbXBvcnQgeyBFeHByZXNzaW9uIH0gZnJvbSBcIi4vUGFyc2VkSGllcmFyY2h5L0V4cHJlc3Npb24vRXhwcmVzc2lvblwiO1xuaW1wb3J0IHsgRXJyb3JIYW5kbGVyIH0gZnJvbSBcIi4uLy4uL2VuZ2luZS9FcnJvclwiO1xuaW1wb3J0IHsgRXh0ZXJuYWxEZWNsYXJhdGlvbiB9IGZyb20gXCIuL1BhcnNlZEhpZXJhcmNoeS9EZWNsYXJhdGlvbi9FeHRlcm5hbERlY2xhcmF0aW9uXCI7XG5pbXBvcnQgeyBGbG93RGVjbCB9IGZyb20gXCIuL0Zsb3dEZWNsXCI7XG5pbXBvcnQgeyBGdW5jdGlvbkNhbGwgfSBmcm9tIFwiLi9QYXJzZWRIaWVyYXJjaHkvRnVuY3Rpb25DYWxsXCI7XG5pbXBvcnQgeyBHYXRoZXIgfSBmcm9tIFwiLi9QYXJzZWRIaWVyYXJjaHkvR2F0aGVyL0dhdGhlclwiO1xuaW1wb3J0IHsgR2x1ZSB9IGZyb20gXCIuL1BhcnNlZEhpZXJhcmNoeS9HbHVlXCI7XG5pbXBvcnQgeyBHbHVlIGFzIFJ1bnRpbWVHbHVlIH0gZnJvbSBcIi4uLy4uL2VuZ2luZS9HbHVlXCI7XG5pbXBvcnQgeyBJRmlsZUhhbmRsZXIgfSBmcm9tIFwiLi4vSUZpbGVIYW5kbGVyXCI7XG5pbXBvcnQgeyBJbmNEZWNFeHByZXNzaW9uIH0gZnJvbSBcIi4vUGFyc2VkSGllcmFyY2h5L0V4cHJlc3Npb24vSW5jRGVjRXhwcmVzc2lvblwiO1xuaW1wb3J0IHsgSW5jbHVkZWRGaWxlIH0gZnJvbSBcIi4vUGFyc2VkSGllcmFyY2h5L0luY2x1ZGVkRmlsZVwiO1xuaW1wb3J0IHsgSW5maXhPcGVyYXRvciB9IGZyb20gXCIuL0luZml4T3BlcmF0b3JcIjtcbmltcG9ydCB7IEtub3QgfSBmcm9tIFwiLi9QYXJzZWRIaWVyYXJjaHkvS25vdFwiO1xuaW1wb3J0IHsgTGlzdCB9IGZyb20gXCIuL1BhcnNlZEhpZXJhcmNoeS9MaXN0L0xpc3RcIjtcbmltcG9ydCB7IExpc3REZWZpbml0aW9uIH0gZnJvbSBcIi4vUGFyc2VkSGllcmFyY2h5L0xpc3QvTGlzdERlZmluaXRpb25cIjtcbmltcG9ydCB7IExpc3RFbGVtZW50RGVmaW5pdGlvbiB9IGZyb20gXCIuL1BhcnNlZEhpZXJhcmNoeS9MaXN0L0xpc3RFbGVtZW50RGVmaW5pdGlvblwiO1xuaW1wb3J0IHsgTXVsdGlwbGVDb25kaXRpb25FeHByZXNzaW9uIH0gZnJvbSBcIi4vUGFyc2VkSGllcmFyY2h5L0V4cHJlc3Npb24vTXVsdGlwbGVDb25kaXRpb25FeHByZXNzaW9uXCI7XG5pbXBvcnQgeyBQYXJzZWRPYmplY3QgfSBmcm9tIFwiLi9QYXJzZWRIaWVyYXJjaHkvT2JqZWN0XCI7XG5pbXBvcnQgeyBQYXRoIH0gZnJvbSBcIi4vUGFyc2VkSGllcmFyY2h5L1BhdGhcIjtcbmltcG9ydCB7IFJldHVyblR5cGUgfSBmcm9tIFwiLi9QYXJzZWRIaWVyYXJjaHkvUmV0dXJuVHlwZVwiO1xuaW1wb3J0IHsgU2VxdWVuY2UgfSBmcm9tIFwiLi9QYXJzZWRIaWVyYXJjaHkvU2VxdWVuY2UvU2VxdWVuY2VcIjtcbmltcG9ydCB7IFNlcXVlbmNlVHlwZSB9IGZyb20gXCIuL1BhcnNlZEhpZXJhcmNoeS9TZXF1ZW5jZS9TZXF1ZW5jZVR5cGVcIjtcbmltcG9ydCB7IFN0YXRlbWVudExldmVsIH0gZnJvbSBcIi4vU3RhdGVtZW50TGV2ZWxcIjtcbmltcG9ydCB7IFN0aXRjaCB9IGZyb20gXCIuL1BhcnNlZEhpZXJhcmNoeS9TdGl0Y2hcIjtcbmltcG9ydCB7IFN0b3J5IH0gZnJvbSBcIi4vUGFyc2VkSGllcmFyY2h5L1N0b3J5XCI7XG5pbXBvcnQgeyBTdHJpbmdFeHByZXNzaW9uIH0gZnJvbSBcIi4vUGFyc2VkSGllcmFyY2h5L0V4cHJlc3Npb24vU3RyaW5nRXhwcmVzc2lvblwiO1xuaW1wb3J0IHtcbiAgU3RyaW5nUGFyc2VyLFxuICBTcGVjaWZpY1BhcnNlUnVsZSxcbiAgUGFyc2VSdWxlLFxuICBQYXJzZVJ1bGVSZXR1cm4sXG4gIFBhcnNlU3VjY2Vzcyxcbn0gZnJvbSBcIi4vU3RyaW5nUGFyc2VyL1N0cmluZ1BhcnNlclwiO1xuaW1wb3J0IHsgU3RyaW5nUGFyc2VyRWxlbWVudCB9IGZyb20gXCIuL1N0cmluZ1BhcnNlci9TdHJpbmdQYXJzZXJFbGVtZW50XCI7XG5pbXBvcnQgeyBUYWcgfSBmcm9tIFwiLi9QYXJzZWRIaWVyYXJjaHkvVGFnXCI7XG5pbXBvcnQgeyBUZXh0IH0gZnJvbSBcIi4vUGFyc2VkSGllcmFyY2h5L1RleHRcIjtcbmltcG9ydCB7IFR1bm5lbE9ud2FyZHMgfSBmcm9tIFwiLi9QYXJzZWRIaWVyYXJjaHkvVHVubmVsT253YXJkc1wiO1xuaW1wb3J0IHsgVmFyaWFibGVBc3NpZ25tZW50IH0gZnJvbSBcIi4vUGFyc2VkSGllcmFyY2h5L1ZhcmlhYmxlL1ZhcmlhYmxlQXNzaWdubWVudFwiO1xuaW1wb3J0IHsgVmFyaWFibGVSZWZlcmVuY2UgfSBmcm9tIFwiLi9QYXJzZWRIaWVyYXJjaHkvVmFyaWFibGUvVmFyaWFibGVSZWZlcmVuY2VcIjtcbmltcG9ydCB7IFVuYXJ5RXhwcmVzc2lvbiB9IGZyb20gXCIuL1BhcnNlZEhpZXJhcmNoeS9FeHByZXNzaW9uL1VuYXJ5RXhwcmVzc2lvblwiO1xuaW1wb3J0IHsgYXNPck51bGwsIGZpbHRlclVuZGVmIH0gZnJvbSBcIi4uLy4uL2VuZ2luZS9UeXBlQXNzZXJ0aW9uXCI7XG5pbXBvcnQgeyBJZGVudGlmaWVyIH0gZnJvbSBcIi4vUGFyc2VkSGllcmFyY2h5L0lkZW50aWZpZXJcIjtcbmltcG9ydCB7IE51bWJlckV4cHJlc3Npb24gfSBmcm9tIFwiLi9QYXJzZWRIaWVyYXJjaHkvRXhwcmVzc2lvbi9OdW1iZXJFeHByZXNzaW9uXCI7XG5pbXBvcnQgeyBFcnJvclR5cGUgfSBmcm9tIFwiLi9FcnJvclR5cGVcIjtcbmltcG9ydCB7IERlZmF1bHRGaWxlSGFuZGxlciB9IGZyb20gXCIuLi9GaWxlSGFuZGxlci9EZWZhdWx0RmlsZUhhbmRsZXJcIjtcblxuZXhwb3J0IGNsYXNzIElua1BhcnNlciBleHRlbmRzIFN0cmluZ1BhcnNlciB7XG4gIC8qKlxuICAgKiBCZWdpbiBiYXNlIElua1BhcnNlciBzZWN0aW9uLlxuICAgKi9cblxuICBnZXQgZmlsZUhhbmRsZXIoKTogSUZpbGVIYW5kbGVyIHtcbiAgICBpZiAoIXRoaXMuX2ZpbGVIYW5kbGVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBGaWxlSGFuZGxlciBkZWZpbmVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZmlsZUhhbmRsZXI7XG4gIH1cblxuICBzZXQgZmlsZUhhbmRsZXIodmFsdWU6IElGaWxlSGFuZGxlcikge1xuICAgIHRoaXMuX2ZpbGVIYW5kbGVyID0gdmFsdWU7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBzdHI6IHN0cmluZyxcbiAgICBmaWxlbmFtZTogc3RyaW5nIHwgbnVsbCA9IG51bGwsXG4gICAgZXh0ZXJuYWxFcnJvckhhbmRsZXI6IEVycm9ySGFuZGxlciB8IG51bGwgPSBudWxsLFxuICAgIHJvb3RQYXJzZXI6IElua1BhcnNlciB8IG51bGwgPSBudWxsLFxuICAgIGZpbGVIYW5kbGVyOiBJRmlsZUhhbmRsZXIgfCBudWxsID0gbnVsbFxuICApIHtcbiAgICBzdXBlcihzdHIpO1xuXG4gICAgdGhpcy5fZmlsZW5hbWUgPSBmaWxlbmFtZTtcbiAgICB0aGlzLlJlZ2lzdGVyRXhwcmVzc2lvbk9wZXJhdG9ycygpO1xuICAgIHRoaXMuR2VuZXJhdGVTdGF0ZW1lbnRMZXZlbFJ1bGVzKCk7XG5cbiAgICB0aGlzLmVycm9ySGFuZGxlciA9IHRoaXMuT25TdHJpbmdQYXJzZXJFcnJvcjtcblxuICAgIHRoaXMuX2V4dGVybmFsRXJyb3JIYW5kbGVyID0gZXh0ZXJuYWxFcnJvckhhbmRsZXI7XG5cbiAgICBpZiAoZmlsZUhhbmRsZXIgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuX2ZpbGVIYW5kbGVyID0gbmV3IERlZmF1bHRGaWxlSGFuZGxlcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9maWxlSGFuZGxlciA9IGZpbGVIYW5kbGVyO1xuICAgIH1cblxuICAgIGlmIChyb290UGFyc2VyID09PSBudWxsKSB7XG4gICAgICB0aGlzLl9yb290UGFyc2VyID0gdGhpcztcbiAgICAgIHRoaXMuX29wZW5GaWxlbmFtZXMgPSBbXTtcblxuICAgICAgaWYgKHRoaXMuX2ZpbGVuYW1lICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxSb290SW5rUGF0aCA9IHRoaXMuZmlsZUhhbmRsZXIuUmVzb2x2ZUlua0ZpbGVuYW1lKFxuICAgICAgICAgIHRoaXMuX2ZpbGVuYW1lXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuX29wZW5GaWxlbmFtZXMucHVzaChmdWxsUm9vdElua1BhdGgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yb290UGFyc2VyID0gcm9vdFBhcnNlcjtcbiAgICB9XG4gIH1cblxuICAvLyBNYWluIGVudHJ5IHBvaW50XG4gIC8vIE5PVEU6IFRoaXMgbWV0aG9kIGlzIG5hbWVkIFBhcnNlKCkgaW4gdXBzdHJlYW0uXG4gIHB1YmxpYyByZWFkb25seSBQYXJzZVN0b3J5ID0gKCk6IFN0b3J5ID0+IHtcbiAgICBjb25zdCB0b3BMZXZlbENvbnRlbnQ6IFBhcnNlZE9iamVjdFtdID0gdGhpcy5TdGF0ZW1lbnRzQXRMZXZlbChcbiAgICAgIFN0YXRlbWVudExldmVsLlRvcFxuICAgICk7XG5cbiAgICAvLyBOb3RlIHdlIHVzZWQgdG8gcmV0dXJuIG51bGwgaWYgdGhlcmUgd2VyZSBhbnkgZXJyb3JzLCBidXQgdGhpcyB3b3VsZCBtZWFuXG4gICAgLy8gdGhhdCBpbmNsdWRlIGZpbGVzIHdvdWxkIHJldHVybiBjb21wbGV0ZWx5IGVtcHR5IHJhdGhlciB0aGFuIGF0dGVtcHRpbmcgdG9cbiAgICAvLyBjb250aW51ZSB3aXRoIGVycm9ycy4gUmV0dXJuaW5nIGFuIGVtcHR5IGluY2x1ZGUgZmlsZXMgbWVhbnQgdGhhdCBhbnl0aGluZ1xuICAgIC8vIHRoYXQgKmRpZCogY29tcGlsZSBzdWNjZXNzZnVsbHkgd291bGQgb3RoZXJ3aXNlIGJlIGlnbm9yZWQsIGdlbmVyYXRpbmcgd2F5XG4gICAgLy8gbW9yZSBlcnJvcnMgdGhhbiBuZWNlc3NhcnkuXG4gICAgcmV0dXJuIG5ldyBTdG9yeSh0b3BMZXZlbENvbnRlbnQsIHRoaXMuX3Jvb3RQYXJzZXIgIT09IHRoaXMpO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBTZXBhcmF0ZWRMaXN0ID0gPFQgZXh0ZW5kcyBQYXJzZVJ1bGU+KFxuICAgIG1haW5SdWxlOiBTcGVjaWZpY1BhcnNlUnVsZTxUPixcbiAgICBzZXBhcmF0b3JSdWxlOiBQYXJzZVJ1bGVcbiAgKTogUGFyc2VSdWxlUmV0dXJuW10gfCBudWxsID0+IHtcbiAgICBjb25zdCBmaXJzdEVsZW1lbnQ6IFBhcnNlUnVsZVJldHVybiA9IHRoaXMuUGFyc2UobWFpblJ1bGUpO1xuICAgIGlmIChmaXJzdEVsZW1lbnQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGFsbEVsZW1lbnRzID0gW107XG4gICAgYWxsRWxlbWVudHMucHVzaChmaXJzdEVsZW1lbnQpO1xuXG4gICAgZG8ge1xuICAgICAgY29uc3QgbmV4dEVsZW1lbnRSdWxlSWQ6IG51bWJlciA9IHRoaXMuQmVnaW5SdWxlKCk7XG4gICAgICBsZXQgc2VwID0gc2VwYXJhdG9yUnVsZSgpO1xuICAgICAgaWYgKHNlcCA9PT0gbnVsbCkge1xuICAgICAgICB0aGlzLkZhaWxSdWxlKG5leHRFbGVtZW50UnVsZUlkKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5leHRFbGVtZW50ID0gdGhpcy5QYXJzZShtYWluUnVsZSk7XG4gICAgICBpZiAobmV4dEVsZW1lbnQgPT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5GYWlsUnVsZShuZXh0RWxlbWVudFJ1bGVJZCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICB0aGlzLlN1Y2NlZWRSdWxlKG5leHRFbGVtZW50UnVsZUlkKTtcbiAgICAgIGFsbEVsZW1lbnRzLnB1c2gobmV4dEVsZW1lbnQpO1xuICAgIH0gd2hpbGUgKHRydWUpO1xuXG4gICAgcmV0dXJuIGFsbEVsZW1lbnRzO1xuICB9O1xuXG4gIHB1YmxpYyBQcmVQcm9jZXNzSW5wdXRTdHJpbmcoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNvbW1lbnRFbGltaW5hdG9yID0gbmV3IENvbW1lbnRFbGltaW5hdG9yKHN0cik7XG4gICAgcmV0dXJuIGNvbW1lbnRFbGltaW5hdG9yLlByb2Nlc3MoKTtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBDcmVhdGVEZWJ1Z01ldGFkYXRhID0gKFxuICAgIHN0YXRlQXRTdGFydDogU3RyaW5nUGFyc2VyRWxlbWVudCB8IG51bGwsXG4gICAgc3RhdGVBdEVuZDogU3RyaW5nUGFyc2VyRWxlbWVudFxuICApOiBEZWJ1Z01ldGFkYXRhID0+IHtcbiAgICBjb25zdCBtZCA9IG5ldyBEZWJ1Z01ldGFkYXRhKCk7XG4gICAgbWQuc3RhcnRMaW5lTnVtYmVyID0gKHN0YXRlQXRTdGFydD8ubGluZUluZGV4IHx8IDApICsgMTtcbiAgICBtZC5lbmRMaW5lTnVtYmVyID0gc3RhdGVBdEVuZC5saW5lSW5kZXggKyAxO1xuICAgIG1kLnN0YXJ0Q2hhcmFjdGVyTnVtYmVyID0gKHN0YXRlQXRTdGFydD8uY2hhcmFjdGVySW5MaW5lSW5kZXggfHwgMCkgKyAxO1xuICAgIG1kLmVuZENoYXJhY3Rlck51bWJlciA9IHN0YXRlQXRFbmQuY2hhcmFjdGVySW5MaW5lSW5kZXggKyAxO1xuICAgIG1kLmZpbGVOYW1lID0gdGhpcy5fZmlsZW5hbWU7XG5cbiAgICByZXR1cm4gbWQ7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IFJ1bGVEaWRTdWNjZWVkID0gKFxuICAgIHJlc3VsdDogUGFyc2VSdWxlUmV0dXJuLFxuICAgIHN0YXRlQXRTdGFydDogU3RyaW5nUGFyc2VyRWxlbWVudCB8IG51bGwsXG4gICAgc3RhdGVBdEVuZDogU3RyaW5nUGFyc2VyRWxlbWVudFxuICApOiB2b2lkID0+IHtcbiAgICAvLyBBcHBseSBEZWJ1Z01ldGFkYXRhIGJhc2VkIG9uIHRoZSBzdGF0ZSBhdCB0aGUgc3RhcnQgb2YgdGhlIHJ1bGVcbiAgICAvLyAoaS5lLiB1c2UgbGluZSBudW1iZXIgYXMgaXQgd2FzIGF0IHRoZSBzdGFydCBvZiB0aGUgcnVsZSlcbiAgICBjb25zdCBwYXJzZWRPYmogPSBhc09yTnVsbChyZXN1bHQsIFBhcnNlZE9iamVjdCk7XG4gICAgaWYgKHBhcnNlZE9iaikge1xuICAgICAgcGFyc2VkT2JqLmRlYnVnTWV0YWRhdGEgPSB0aGlzLkNyZWF0ZURlYnVnTWV0YWRhdGEoXG4gICAgICAgIHN0YXRlQXRTdGFydCxcbiAgICAgICAgc3RhdGVBdEVuZFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBBIGxpc3Qgb2Ygb2JqZWN0cyB0aGF0IGRvZXNuJ3QgYWxyZWFkeSBoYXZlIG1ldGFkYXRhP1xuICAgIGNvbnN0IHBhcnNlZExpc3RPYmpzOiBQYXJzZWRPYmplY3RbXSB8IG51bGwgPSBBcnJheS5pc0FycmF5KHJlc3VsdClcbiAgICAgID8gKHJlc3VsdCBhcyBQYXJzZWRPYmplY3RbXSlcbiAgICAgIDogbnVsbDtcbiAgICBpZiAocGFyc2VkTGlzdE9ianMgIT09IG51bGwpIHtcbiAgICAgIGZvciAoY29uc3QgcGFyc2VkTGlzdE9iaiBvZiBwYXJzZWRMaXN0T2Jqcykge1xuICAgICAgICBjb25zdCBzaW5nbGVPYmogPSBhc09yTnVsbChwYXJzZWRMaXN0T2JqLCBQYXJzZWRPYmplY3QpO1xuICAgICAgICBpZiAoIXNpbmdsZU9iaikgY29udGludWU7XG4gICAgICAgIGlmICghcGFyc2VkTGlzdE9iai5oYXNPd25EZWJ1Z01ldGFkYXRhKSB7XG4gICAgICAgICAgcGFyc2VkTGlzdE9iai5kZWJ1Z01ldGFkYXRhID0gdGhpcy5DcmVhdGVEZWJ1Z01ldGFkYXRhKFxuICAgICAgICAgICAgc3RhdGVBdFN0YXJ0LFxuICAgICAgICAgICAgc3RhdGVBdEVuZFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBpZCA9IGFzT3JOdWxsKHJlc3VsdCwgSWRlbnRpZmllcik7XG4gICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgIGlkLmRlYnVnTWV0YWRhdGEgPSB0aGlzLkNyZWF0ZURlYnVnTWV0YWRhdGEoc3RhdGVBdFN0YXJ0LCBzdGF0ZUF0RW5kKTtcbiAgICB9XG4gIH07XG5cbiAgZ2V0IHBhcnNpbmdTdHJpbmdFeHByZXNzaW9uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLkdldEZsYWcoTnVtYmVyKEN1c3RvbUZsYWdzLlBhcnNpbmdTdHJpbmcpKTtcbiAgfVxuXG4gIHNldCBwYXJzaW5nU3RyaW5nRXhwcmVzc2lvbih2YWx1ZTogYm9vbGVhbikge1xuICAgIHRoaXMuU2V0RmxhZyhOdW1iZXIoQ3VzdG9tRmxhZ3MuUGFyc2luZ1N0cmluZyksIHZhbHVlKTtcbiAgfVxuXG4gIGdldCB0YWdBY3RpdmUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuR2V0RmxhZyhOdW1iZXIoQ3VzdG9tRmxhZ3MuVGFnQWN0aXZlKSk7XG4gIH1cblxuICBzZXQgdGFnQWN0aXZlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5TZXRGbGFnKE51bWJlcihDdXN0b21GbGFncy5UYWdBY3RpdmUpLCB2YWx1ZSk7XG4gIH1cblxuICBwdWJsaWMgcmVhZG9ubHkgT25TdHJpbmdQYXJzZXJFcnJvciA9IChcbiAgICBtZXNzYWdlOiBzdHJpbmcsXG4gICAgaW5kZXg6IG51bWJlcixcbiAgICBsaW5lSW5kZXg6IG51bWJlciA9IDAsXG4gICAgaXNXYXJuaW5nOiBib29sZWFuID0gZmFsc2VcbiAgKTogdm9pZCA9PiB7XG4gICAgY29uc3Qgd2FybmluZ1R5cGU6IHN0cmluZyA9IGlzV2FybmluZyA/IFwiV0FSTklORzpcIiA6IFwiRVJST1I6XCI7XG4gICAgbGV0IGZ1bGxNZXNzYWdlOiBzdHJpbmcgPSB3YXJuaW5nVHlwZTtcblxuICAgIGlmICh0aGlzLl9maWxlbmFtZSAhPT0gbnVsbCkge1xuICAgICAgZnVsbE1lc3NhZ2UgKz0gYCAnJHt0aGlzLl9maWxlbmFtZX0nYDtcbiAgICB9XG5cbiAgICBmdWxsTWVzc2FnZSArPSBgIGxpbmUgJHtsaW5lSW5kZXggKyAxfTogJHttZXNzYWdlfWA7XG5cbiAgICBpZiAodGhpcy5fZXh0ZXJuYWxFcnJvckhhbmRsZXIgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuX2V4dGVybmFsRXJyb3JIYW5kbGVyKFxuICAgICAgICBmdWxsTWVzc2FnZSxcbiAgICAgICAgaXNXYXJuaW5nID8gRXJyb3JUeXBlLldhcm5pbmcgOiBFcnJvclR5cGUuRXJyb3JcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihmdWxsTWVzc2FnZSk7XG4gICAgfVxuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBBdXRob3JXYXJuaW5nID0gKCk6IEF1dGhvcldhcm5pbmcgfCBudWxsID0+IHtcbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIGNvbnN0IGlkZW50aWZpZXIgPSB0aGlzLlBhcnNlKFxuICAgICAgdGhpcy5JZGVudGlmaWVyV2l0aE1ldGFkYXRhXG4gICAgKSBhcyB1bmtub3duIGFzIElkZW50aWZpZXIgfCBudWxsO1xuICAgIGlmIChpZGVudGlmaWVyID09PSBudWxsIHx8IGlkZW50aWZpZXIubmFtZSAhPT0gXCJUT0RPXCIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuICAgIHRoaXMuUGFyc2VTdHJpbmcoXCI6XCIpO1xuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuUGFyc2VVbnRpbENoYXJhY3RlcnNGcm9tU3RyaW5nKFwiXFxuXFxyXCIpO1xuXG4gICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgIHJldHVybiBuZXcgQXV0aG9yV2FybmluZyhtZXNzYWdlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogRW5kIGJhc2UgSW5rUGFyc2VyIHNlY3Rpb24uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBCZWdpbiBDaGFyYWN0ZXJSYW5nZXMgc2VjdGlvbi5cbiAgICovXG5cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBMYXRpbkJhc2ljOiBDaGFyYWN0ZXJSYW5nZSA9IENoYXJhY3RlclJhbmdlLkRlZmluZShcbiAgICBcIlxcdTAwNDFcIixcbiAgICBcIlxcdTAwN0FcIixcbiAgICBuZXcgQ2hhcmFjdGVyU2V0KCkuQWRkUmFuZ2UoXCJcXHUwMDVCXCIsIFwiXFx1MDA2MFwiKVxuICApO1xuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTGF0aW5FeHRlbmRlZEE6IENoYXJhY3RlclJhbmdlID0gQ2hhcmFjdGVyUmFuZ2UuRGVmaW5lKFxuICAgIFwiXFx1MDEwMFwiLFxuICAgIFwiXFx1MDE3RlwiXG4gICAgLy8gbm8gZXhjbHVkZXMgaGVyZVxuICApO1xuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTGF0aW5FeHRlbmRlZEI6IENoYXJhY3RlclJhbmdlID0gQ2hhcmFjdGVyUmFuZ2UuRGVmaW5lKFxuICAgIFwiXFx1MDE4MFwiLFxuICAgIFwiXFx1MDI0RlwiXG4gICAgLy8gbm8gZXhjbHVkZXMgaGVyZVxuICApO1xuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgR3JlZWs6IENoYXJhY3RlclJhbmdlID0gQ2hhcmFjdGVyUmFuZ2UuRGVmaW5lKFxuICAgIFwiXFx1MDM3MFwiLFxuICAgIFwiXFx1MDNGRlwiLFxuICAgIG5ldyBDaGFyYWN0ZXJTZXQoKVxuICAgICAgLkFkZFJhbmdlKFwiXFx1MDM3OFwiLCBcIlxcdTAzODVcIilcbiAgICAgIC5BZGRDaGFyYWN0ZXJzKFwiXFx1MDM3NFxcdTAzNzVcXHUwMzc4XFx1MDM4N1xcdTAzOEJcXHUwMzhEXFx1MDNBMlwiKVxuICApO1xuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgQ3lyaWxsaWM6IENoYXJhY3RlclJhbmdlID0gQ2hhcmFjdGVyUmFuZ2UuRGVmaW5lKFxuICAgIFwiXFx1MDQwMFwiLFxuICAgIFwiXFx1MDRGRlwiLFxuICAgIG5ldyBDaGFyYWN0ZXJTZXQoKS5BZGRSYW5nZShcIlxcdTA0ODJcIiwgXCJcXHUwNDg5XCIpXG4gICk7XG5cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBBcm1lbmlhbjogQ2hhcmFjdGVyUmFuZ2UgPSBDaGFyYWN0ZXJSYW5nZS5EZWZpbmUoXG4gICAgXCJcXHUwNTMwXCIsXG4gICAgXCJcXHUwNThGXCIsXG4gICAgbmV3IENoYXJhY3RlclNldCgpXG4gICAgICAuQWRkQ2hhcmFjdGVycyhcIlxcdTA1MzBcIilcbiAgICAgIC5BZGRSYW5nZShcIlxcdTA1NTdcIiwgXCJcXHUwNTYwXCIpXG4gICAgICAuQWRkUmFuZ2UoXCJcXHUwNTg4XCIsIFwiXFx1MDU4RVwiKVxuICApO1xuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgSGVicmV3OiBDaGFyYWN0ZXJSYW5nZSA9IENoYXJhY3RlclJhbmdlLkRlZmluZShcbiAgICBcIlxcdTA1OTBcIixcbiAgICBcIlxcdTA1RkZcIixcbiAgICBuZXcgQ2hhcmFjdGVyU2V0KClcbiAgKTtcblxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEFyYWJpYzogQ2hhcmFjdGVyUmFuZ2UgPSBDaGFyYWN0ZXJSYW5nZS5EZWZpbmUoXG4gICAgXCJcXHUwNjAwXCIsXG4gICAgXCJcXHUwNkZGXCIsXG4gICAgbmV3IENoYXJhY3RlclNldCgpXG4gICk7XG5cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBLb3JlYW46IENoYXJhY3RlclJhbmdlID0gQ2hhcmFjdGVyUmFuZ2UuRGVmaW5lKFxuICAgIFwiXFx1QUMwMFwiLFxuICAgIFwiXFx1RDdBRlwiLFxuICAgIG5ldyBDaGFyYWN0ZXJTZXQoKVxuICApO1xuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTGF0aW4xU3VwcGxlbWVudDogQ2hhcmFjdGVyUmFuZ2UgPVxuICAgIENoYXJhY3RlclJhbmdlLkRlZmluZShcIlxcdTAwODBcIiwgXCJcXHUwMEZGXCIsIG5ldyBDaGFyYWN0ZXJTZXQoKSk7XG5cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBDaGluZXNlOiBDaGFyYWN0ZXJSYW5nZSA9IENoYXJhY3RlclJhbmdlLkRlZmluZShcbiAgICBcIlxcdTRFMDBcIixcbiAgICBcIlxcdTlGRkZcIixcbiAgICBuZXcgQ2hhcmFjdGVyU2V0KClcbiAgKTtcblxuICBwcml2YXRlIHJlYWRvbmx5IEV4dGVuZElkZW50aWZpZXJDaGFyYWN0ZXJSYW5nZXMgPSAoXG4gICAgaWRlbnRpZmllckNoYXJTZXQ6IENoYXJhY3RlclNldFxuICApOiB2b2lkID0+IHtcbiAgICBjb25zdCBjaGFyYWN0ZXJSYW5nZXMgPSBJbmtQYXJzZXIuTGlzdEFsbENoYXJhY3RlclJhbmdlcygpO1xuICAgIGZvciAoY29uc3QgY2hhclJhbmdlIG9mIGNoYXJhY3RlclJhbmdlcykge1xuICAgICAgaWRlbnRpZmllckNoYXJTZXQuQWRkQ2hhcmFjdGVycyhjaGFyUmFuZ2UuVG9DaGFyYWN0ZXJTZXQoKSk7XG4gICAgfVxuICB9O1xuXG4gIC8vLyA8c3VtbWFyeT5cbiAgLy8vIEdldHMgYW4gYXJyYXkgb2YgPHNlZSBjcmVmPVwiQ2hhcmFjdGVyUmFuZ2VcIiAvPiByZXByZXNlbnRpbmcgYWxsIG9mIHRoZSBjdXJyZW50bHkgc3VwcG9ydGVkXG4gIC8vLyBub24tQVNDSUkgY2hhcmFjdGVyIHJhbmdlcyB0aGF0IGNhbiBiZSB1c2VkIGluIGlkZW50aWZpZXIgbmFtZXMuXG4gIC8vLyA8L3N1bW1hcnk+XG4gIC8vLyA8cmV0dXJucz5cbiAgLy8vIEFuIGFycmF5IG9mIDxzZWUgY3JlZj1cIkNoYXJhY3RlclJhbmdlXCIgLz4gcmVwcmVzZW50aW5nIGFsbCBvZiB0aGUgY3VycmVudGx5IHN1cHBvcnRlZFxuICAvLy8gbm9uLUFTQ0lJIGNoYXJhY3RlciByYW5nZXMgdGhhdCBjYW4gYmUgdXNlZCBpbiBpZGVudGlmaWVyIG5hbWVzLlxuICAvLy8gPC9yZXR1cm5zPlxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IExpc3RBbGxDaGFyYWN0ZXJSYW5nZXMgPSAoKTogQ2hhcmFjdGVyUmFuZ2VbXSA9PiBbXG4gICAgSW5rUGFyc2VyLkxhdGluQmFzaWMsXG4gICAgSW5rUGFyc2VyLkxhdGluRXh0ZW5kZWRBLFxuICAgIElua1BhcnNlci5MYXRpbkV4dGVuZGVkQixcbiAgICBJbmtQYXJzZXIuQXJhYmljLFxuICAgIElua1BhcnNlci5Bcm1lbmlhbixcbiAgICBJbmtQYXJzZXIuQ3lyaWxsaWMsXG4gICAgSW5rUGFyc2VyLkdyZWVrLFxuICAgIElua1BhcnNlci5IZWJyZXcsXG4gICAgSW5rUGFyc2VyLktvcmVhbixcbiAgICBJbmtQYXJzZXIuTGF0aW4xU3VwcGxlbWVudCxcbiAgICBJbmtQYXJzZXIuQ2hpbmVzZSxcbiAgXTtcblxuICAvKipcbiAgICogRW5kIENoYXJhY3RlclJhbmdlcyBzZWN0aW9uLlxuICAgKi9cblxuICAvKipcbiAgICogQmVnaW4gQ2hvaWNlcyBzZWN0aW9uLlxuICAgKi9cblxuICBwdWJsaWMgX3BhcnNpbmdDaG9pY2U6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwdWJsaWMgcmVhZG9ubHkgQ2hvaWNlID0gKCk6IENob2ljZSB8IG51bGwgPT4ge1xuICAgIGxldCBvbmNlT25seUNob2ljZTogYm9vbGVhbiA9IHRydWU7XG4gICAgbGV0IGJ1bGxldHMgPSB0aGlzLkludGVybGVhdmU8c3RyaW5nPihcbiAgICAgIHRoaXMuT3B0aW9uYWxFeGNsdWRlKHRoaXMuV2hpdGVzcGFjZSksXG4gICAgICB0aGlzLlN0cmluZyhcIipcIilcbiAgICApO1xuXG4gICAgaWYgKCFidWxsZXRzKSB7XG4gICAgICBidWxsZXRzID0gdGhpcy5JbnRlcmxlYXZlPHN0cmluZz4oXG4gICAgICAgIHRoaXMuT3B0aW9uYWxFeGNsdWRlKHRoaXMuV2hpdGVzcGFjZSksXG4gICAgICAgIHRoaXMuU3RyaW5nKFwiK1wiKVxuICAgICAgKTtcblxuICAgICAgaWYgKGJ1bGxldHMgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIG9uY2VPbmx5Q2hvaWNlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gT3B0aW9uYWwgbmFtZSBmb3IgdGhlIGNob2ljZVxuICAgIGNvbnN0IG9wdGlvbmFsTmFtZTogSWRlbnRpZmllciA9IHRoaXMuUGFyc2UoXG4gICAgICB0aGlzLkJyYWNrZXRlZE5hbWVcbiAgICApIGFzIElkZW50aWZpZXI7XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIC8vIEFsbG93IG9wdGlvbmFsIG5ld2xpbmUgcmlnaHQgYWZ0ZXIgYSBjaG9pY2UgbmFtZVxuICAgIGlmIChvcHRpb25hbE5hbWUgIT0gbnVsbCkgdGhpcy5OZXdsaW5lKCk7XG5cbiAgICAvLyBPcHRpb25hbCBjb25kaXRpb24gZm9yIHdoZXRoZXIgdGhlIGNob2ljZSBzaG91bGQgYmUgc2hvd24gdG8gdGhlIHBsYXllclxuICAgIGNvbnN0IGNvbmRpdGlvbkV4cHI6IEV4cHJlc3Npb24gPSB0aGlzLlBhcnNlKFxuICAgICAgdGhpcy5DaG9pY2VDb25kaXRpb25cbiAgICApIGFzIEV4cHJlc3Npb247XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIC8vIE9yZGluYXJpbHkgd2UgYXZvaWQgcGFyc2VyIHN0YXRlIHZhcmlhYmxlcyBsaWtlIHRoZXNlLCBzaW5jZVxuICAgIC8vIG5lc3Rpbmcgd291bGQgcmVxdWlyZSB1cyB0byBzdG9yZSB0aGVtIGluIGEgc3RhY2suIEJ1dCBzaW5jZSB5b3Ugc2hvdWxkXG4gICAgLy8gbmV2ZXIgYmUgYWJsZSB0byBuZXN0IGNob2ljZXMgd2l0aGluIGNob2ljZSBjb250ZW50LCBpdCdzIGZpbmUgaGVyZS5cbiAgICBpZiAodGhpcy5fcGFyc2luZ0Nob2ljZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkFscmVhZHkgcGFyc2luZyBhIGNob2ljZSAtIHNob3VsZG4ndCBoYXZlIG5lc3RlZCBjaG9pY2VzXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5fcGFyc2luZ0Nob2ljZSA9IHRydWU7XG5cbiAgICBsZXQgc3RhcnRDb250ZW50OiBDb250ZW50TGlzdCB8IG51bGwgPSBudWxsO1xuICAgIGNvbnN0IHN0YXJ0VGV4dEFuZExvZ2ljID0gdGhpcy5QYXJzZShcbiAgICAgIHRoaXMuTWl4ZWRUZXh0QW5kTG9naWNcbiAgICApIGFzIFBhcnNlZE9iamVjdFtdO1xuICAgIGlmIChzdGFydFRleHRBbmRMb2dpYykge1xuICAgICAgc3RhcnRDb250ZW50ID0gbmV3IENvbnRlbnRMaXN0KHN0YXJ0VGV4dEFuZExvZ2ljKTtcbiAgICB9XG5cbiAgICBsZXQgb3B0aW9uT25seUNvbnRlbnQ6IENvbnRlbnRMaXN0IHwgbnVsbCA9IG51bGw7XG4gICAgbGV0IGlubmVyQ29udGVudDogQ29udGVudExpc3QgfCBudWxsID0gbnVsbDtcblxuICAgIC8vIENoZWNrIGZvciBhIHRoZSB3ZWF2ZSBzdHlsZSBmb3JtYXQ6XG4gICAgLy8gICAqIFwiSGVsbG9bLlwiXSxcIiBoZSBzYWlkLlxuICAgIGNvbnN0IGhhc1dlYXZlU3R5bGVJbmxpbmVCcmFja2V0czogYm9vbGVhbiA9IHRoaXMuUGFyc2VTdHJpbmcoXCJbXCIpICE9PSBudWxsO1xuICAgIGlmIChoYXNXZWF2ZVN0eWxlSW5saW5lQnJhY2tldHMpIHtcbiAgICAgIHRoaXMuRW5kVGFnSWZOZWNlc3Nhcnkoc3RhcnRDb250ZW50KTtcblxuICAgICAgY29uc3Qgb3B0aW9uT25seVRleHRBbmRMb2dpYyA9IHRoaXMuUGFyc2UoXG4gICAgICAgIHRoaXMuTWl4ZWRUZXh0QW5kTG9naWNcbiAgICAgICkgYXMgUGFyc2VkT2JqZWN0W107XG5cbiAgICAgIGlmIChvcHRpb25Pbmx5VGV4dEFuZExvZ2ljICE9PSBudWxsKSB7XG4gICAgICAgIG9wdGlvbk9ubHlDb250ZW50ID0gbmV3IENvbnRlbnRMaXN0KG9wdGlvbk9ubHlUZXh0QW5kTG9naWMpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLkV4cGVjdCh0aGlzLlN0cmluZyhcIl1cIiksIFwiY2xvc2luZyAnXScgZm9yIHdlYXZlLXN0eWxlIG9wdGlvblwiKTtcblxuICAgICAgdGhpcy5FbmRUYWdJZk5lY2Vzc2FyeShvcHRpb25Pbmx5Q29udGVudCk7XG5cbiAgICAgIGxldCBpbm5lclRleHRBbmRMb2dpYyA9IHRoaXMuUGFyc2UoXG4gICAgICAgIHRoaXMuTWl4ZWRUZXh0QW5kTG9naWNcbiAgICAgICkgYXMgUGFyc2VkT2JqZWN0W107XG4gICAgICBpZiAoaW5uZXJUZXh0QW5kTG9naWMgIT09IG51bGwpIHtcbiAgICAgICAgaW5uZXJDb250ZW50ID0gbmV3IENvbnRlbnRMaXN0KGlubmVyVGV4dEFuZExvZ2ljKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIHRoaXMuRW5kVGFnSWZOZWNlc3NhcnkoaW5uZXJDb250ZW50ID8/IHN0YXJ0Q29udGVudCk7XG5cbiAgICAvLyBGaW5hbGx5LCBub3cgd2Uga25vdyB3ZSdyZSBhdCB0aGUgZW5kIG9mIHRoZSBtYWluIGNob2ljZSBib2R5LCBwYXJzZVxuICAgIC8vIGFueSBkaXZlcnRzIHNlcGFyYXRlbHkuXG4gICAgY29uc3QgZGl2ZXJ0czogUGFyc2VkT2JqZWN0W10gPSB0aGlzLlBhcnNlKFxuICAgICAgdGhpcy5NdWx0aURpdmVydFxuICAgICkgYXMgUGFyc2VkT2JqZWN0W107XG5cbiAgICB0aGlzLl9wYXJzaW5nQ2hvaWNlID0gZmFsc2U7XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIC8vIENvbXBsZXRlbHkgZW1wdHkgY2hvaWNlIHdpdGhvdXQgZXZlbiBhbiBlbXB0eSBkaXZlcnQ/XG4gICAgY29uc3QgZW1wdHlDb250ZW50OiBib29sZWFuID1cbiAgICAgICFzdGFydENvbnRlbnQgJiYgIWlubmVyQ29udGVudCAmJiAhb3B0aW9uT25seUNvbnRlbnQ7XG5cbiAgICBpZiAoZW1wdHlDb250ZW50ICYmIGRpdmVydHMgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuV2FybmluZyhcbiAgICAgICAgXCJDaG9pY2UgaXMgY29tcGxldGVseSBlbXB0eS4gSW50ZXJwcmV0dGluZyBhcyBhIGRlZmF1bHQgZmFsbGJhY2sgY2hvaWNlLiBBZGQgYSBkaXZlcnQgYXJyb3cgdG8gcmVtb3ZlIHRoaXMgd2FybmluZzogKiAtPlwiXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICghc3RhcnRDb250ZW50ICYmIGhhc1dlYXZlU3R5bGVJbmxpbmVCcmFja2V0cyAmJiAhb3B0aW9uT25seUNvbnRlbnQpIHtcbiAgICAgIC8vICogW10gc29tZSB0ZXh0XG4gICAgICB0aGlzLldhcm5pbmcoXG4gICAgICAgIFwiQmxhbmsgY2hvaWNlIC0gaWYgeW91IGludGVuZGVkIGEgZGVmYXVsdCBmYWxsYmFjayBjaG9pY2UsIHVzZSB0aGUgYCogLT5gIHN5bnRheFwiXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICghaW5uZXJDb250ZW50KSB7XG4gICAgICBpbm5lckNvbnRlbnQgPSBuZXcgQ29udGVudExpc3QoKTtcbiAgICB9XG5cbiAgICB0aGlzLkVuZFRhZ0lmTmVjZXNzYXJ5KGlubmVyQ29udGVudCk7XG5cbiAgICAvLyBOb3JtYWwgZGl2ZXJ0cyBvbiB0aGUgZW5kIG9mIGEgY2hvaWNlIC0gc2ltcGx5IGFkZCB0byB0aGUgbm9ybWFsIGNvbnRlbnRcbiAgICBpZiAoZGl2ZXJ0cyAhPT0gbnVsbCkge1xuICAgICAgZm9yIChjb25zdCBkaXZPYmogb2YgZGl2ZXJ0cykge1xuICAgICAgICAvLyBtYXkgYmUgVHVubmVsT253YXJkc1xuICAgICAgICBjb25zdCBkaXYgPSBhc09yTnVsbChkaXZPYmosIERpdmVydCk7XG5cbiAgICAgICAgLy8gRW1wdHkgZGl2ZXJ0IHNlcnZlcyBubyBwdXJwb3NlIG90aGVyIHRoYW4gdG8gc2F5XG4gICAgICAgIC8vIFwidGhpcyBjaG9pY2UgaXMgaW50ZW50aW9uYWxseSBsZWZ0IGJsYW5rXCJcbiAgICAgICAgLy8gKGFzIGFuIGludmlzaWJsZSBkZWZhdWx0IGNob2ljZSlcbiAgICAgICAgaWYgKGRpdiAmJiBkaXYuaXNFbXB0eSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaW5uZXJDb250ZW50LkFkZENvbnRlbnQoZGl2T2JqKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUZXJtaW5hdGUgbWFpbiBjb250ZW50IHdpdGggYSBuZXdsaW5lIHNpbmNlIHRoaXMgaXMgdGhlIGVuZCBvZiB0aGUgbGluZVxuICAgIC8vIE5vdGUgdGhhdCB0aGlzIHdpbGwgYmUgcmVkdW5kYW50IGlmIHRoZSBkaXZlcnRzIGFib3ZlIGRlZmluaXRlbHkgdGFrZVxuICAgIC8vIHRoZSBmbG93IGF3YXkgcGVybWFuZW50bHkuXG4gICAgaW5uZXJDb250ZW50LkFkZENvbnRlbnQobmV3IFRleHQoXCJcXG5cIikpO1xuXG4gICAgY29uc3QgY2hvaWNlID0gbmV3IENob2ljZShzdGFydENvbnRlbnQhLCBvcHRpb25Pbmx5Q29udGVudCEsIGlubmVyQ29udGVudCk7XG4gICAgaWYgKG9wdGlvbmFsTmFtZSkgY2hvaWNlLmlkZW50aWZpZXIgPSBvcHRpb25hbE5hbWU7XG4gICAgY2hvaWNlLmluZGVudGF0aW9uRGVwdGggPSBidWxsZXRzLmxlbmd0aDtcbiAgICBjaG9pY2UuaGFzV2VhdmVTdHlsZUlubGluZUJyYWNrZXRzID0gaGFzV2VhdmVTdHlsZUlubGluZUJyYWNrZXRzO1xuICAgIGNob2ljZS5jb25kaXRpb24gPSBjb25kaXRpb25FeHByO1xuICAgIGNob2ljZS5vbmNlT25seSA9IG9uY2VPbmx5Q2hvaWNlO1xuICAgIGNob2ljZS5pc0ludmlzaWJsZURlZmF1bHQgPSBlbXB0eUNvbnRlbnQ7XG4gICAgcmV0dXJuIGNob2ljZTtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgQ2hvaWNlQ29uZGl0aW9uID0gKCk6IEV4cHJlc3Npb24gfCBudWxsID0+IHtcbiAgICBjb25zdCBjb25kaXRpb25zID0gdGhpcy5JbnRlcmxlYXZlPEV4cHJlc3Npb24+KFxuICAgICAgdGhpcy5DaG9pY2VTaW5nbGVDb25kaXRpb24sXG4gICAgICB0aGlzLkNob2ljZUNvbmRpdGlvbnNTcGFjZVxuICAgICk7XG5cbiAgICBpZiAoY29uZGl0aW9ucyA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIGlmIChjb25kaXRpb25zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIGNvbmRpdGlvbnNbMF07XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBNdWx0aXBsZUNvbmRpdGlvbkV4cHJlc3Npb24oY29uZGl0aW9ucyk7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IENob2ljZUNvbmRpdGlvbnNTcGFjZSA9ICgpOiB0eXBlb2YgUGFyc2VTdWNjZXNzID0+IHtcbiAgICAvLyBCb3RoIG9wdGlvbmFsXG4gICAgLy8gTmV3bGluZSBpbmNsdWRlcyBpbml0aWFsIGVuZCBvZiBsaW5lIHdoaXRlc3BhY2VcbiAgICB0aGlzLk5ld2xpbmUoKTtcbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIHJldHVybiBQYXJzZVN1Y2Nlc3M7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IENob2ljZVNpbmdsZUNvbmRpdGlvbiA9ICgpOiBFeHByZXNzaW9uIHwgbnVsbCA9PiB7XG4gICAgaWYgKHRoaXMuUGFyc2VTdHJpbmcoXCJ7XCIpID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBjb25kRXhwciA9IHRoaXMuRXhwZWN0KFxuICAgICAgdGhpcy5FeHByZXNzaW9uLFxuICAgICAgXCJjaG9pY2UgY29uZGl0aW9uIGluc2lkZSB7IH1cIlxuICAgICkgYXMgRXhwcmVzc2lvbjtcblxuICAgIHRoaXMuRGlzYWxsb3dJbmNyZW1lbnQoY29uZEV4cHIpO1xuICAgIHRoaXMuRXhwZWN0KHRoaXMuU3RyaW5nKFwifVwiKSwgXCJjbG9zaW5nICd9JyBmb3IgY2hvaWNlIGNvbmRpdGlvblwiKTtcblxuICAgIHJldHVybiBjb25kRXhwcjtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgR2F0aGVyID0gKCk6IEdhdGhlciB8IG51bGwgPT4ge1xuICAgIGNvbnN0IGdhdGhlckRhc2hDb3VudE9iajogbnVtYmVyID0gdGhpcy5QYXJzZSh0aGlzLkdhdGhlckRhc2hlcykgYXMgbnVtYmVyO1xuICAgIGlmIChnYXRoZXJEYXNoQ291bnRPYmogPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGdhdGhlckRhc2hDb3VudDogbnVtYmVyID0gTnVtYmVyKGdhdGhlckRhc2hDb3VudE9iaik7XG5cbiAgICAvLyBPcHRpb25hbCBuYW1lIGZvciB0aGUgZ2F0aGVyXG4gICAgY29uc3Qgb3B0aW9uYWxOYW1lOiBJZGVudGlmaWVyID0gdGhpcy5QYXJzZShcbiAgICAgIHRoaXMuQnJhY2tldGVkTmFtZVxuICAgICkgYXMgSWRlbnRpZmllcjtcblxuICAgIGNvbnN0IGdhdGhlciA9IG5ldyBHYXRoZXIob3B0aW9uYWxOYW1lLCBnYXRoZXJEYXNoQ291bnQpO1xuXG4gICAgLy8gT3B0aW9uYWwgbmV3bGluZSBiZWZvcmUgZ2F0aGVyJ3MgY29udGVudCBiZWdpbnNcbiAgICB0aGlzLk5ld2xpbmUoKTtcblxuICAgIHJldHVybiBnYXRoZXI7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IEdhdGhlckRhc2hlcyA9ICgpOiBudW1iZXIgfCBudWxsID0+IHtcbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIGxldCBnYXRoZXJEYXNoQ291bnQ6IG51bWJlciA9IDA7XG4gICAgd2hpbGUgKHRoaXMuUGFyc2VEYXNoTm90QXJyb3coKSAhPT0gbnVsbCkge1xuICAgICAgZ2F0aGVyRGFzaENvdW50ICs9IDE7XG4gICAgICB0aGlzLldoaXRlc3BhY2UoKTtcbiAgICB9XG5cbiAgICBpZiAoZ2F0aGVyRGFzaENvdW50ID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gZ2F0aGVyRGFzaENvdW50IGFzIG51bWJlcjtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgUGFyc2VEYXNoTm90QXJyb3cgPSAoKSA9PiB7XG4gICAgY29uc3QgcnVsZUlkID0gdGhpcy5CZWdpblJ1bGUoKTtcblxuICAgIGlmIChcbiAgICAgIHRoaXMuUGFyc2VTdHJpbmcoXCItPlwiKSA9PT0gbnVsbCAmJlxuICAgICAgdGhpcy5QYXJzZVNpbmdsZUNoYXJhY3RlcigpID09PSBcIi1cIlxuICAgICkge1xuICAgICAgcmV0dXJuIHRoaXMuU3VjY2VlZFJ1bGUocnVsZUlkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5GYWlsUnVsZShydWxlSWQpO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBCcmFja2V0ZWROYW1lID0gKCk6IElkZW50aWZpZXIgfCBudWxsID0+IHtcbiAgICBpZiAodGhpcy5QYXJzZVN0cmluZyhcIihcIikgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgY29uc3QgbmFtZSA9IHRoaXMuUGFyc2UodGhpcy5JZGVudGlmaWVyV2l0aE1ldGFkYXRhKSBhcyBJZGVudGlmaWVyIHwgbnVsbDtcbiAgICBpZiAobmFtZSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICB0aGlzLkV4cGVjdCh0aGlzLlN0cmluZyhcIilcIiksIFwiY2xvc2luZyAnKScgZm9yIGJyYWNrZXRlZCBuYW1lXCIpO1xuXG4gICAgcmV0dXJuIG5hbWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEVuZCBDaG9pY2VzIHNlY3Rpb24uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBCZWdpbiBDb25kaXRpb25hbCBzZWN0aW9uLlxuICAgKi9cblxuICBwdWJsaWMgcmVhZG9ubHkgSW5uZXJDb25kaXRpb25hbENvbnRlbnQgPSAoXG4gICAgaW5pdGlhbFF1ZXJ5RXhwcmVzc2lvbjogRXhwcmVzc2lvblxuICApOiBDb25kaXRpb25hbCB8IG51bGwgPT4ge1xuICAgIGlmIChpbml0aWFsUXVlcnlFeHByZXNzaW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IGluaXRpYWxRdWVyeUV4cHJlc3Npb24gPSB0aGlzLlBhcnNlKHRoaXMuQ29uZGl0aW9uRXhwcmVzc2lvbik7XG4gICAgICBjb25zdCBjb25kaXRpb25hbCA9IHRoaXMuUGFyc2UoKCkgPT5cbiAgICAgICAgdGhpcy5Jbm5lckNvbmRpdGlvbmFsQ29udGVudChpbml0aWFsUXVlcnlFeHByZXNzaW9uIGFzIEV4cHJlc3Npb24pXG4gICAgICApIGFzIENvbmRpdGlvbmFsO1xuXG4gICAgICBpZiAoY29uZGl0aW9uYWwgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb25kaXRpb25hbDtcbiAgICB9XG5cbiAgICBsZXQgYWx0ZXJuYXRpdmVzOiBDb25kaXRpb25hbFNpbmdsZUJyYW5jaFtdIHwgbnVsbDtcbiAgICBjb25zdCBjYW5CZUlubGluZTogYm9vbGVhbiA9IGluaXRpYWxRdWVyeUV4cHJlc3Npb24gIT09IG51bGw7XG4gICAgY29uc3QgaXNJbmxpbmU6IGJvb2xlYW4gPSB0aGlzLlBhcnNlKHRoaXMuTmV3bGluZSkgPT09IG51bGw7XG5cbiAgICBpZiAoaXNJbmxpbmUgJiYgIWNhbkJlSW5saW5lKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoaXNJbmxpbmUpIHtcbiAgICAgIC8vIElubGluZSBpbm5hcmRzXG4gICAgICBhbHRlcm5hdGl2ZXMgPSB0aGlzLklubGluZUNvbmRpdGlvbmFsQnJhbmNoZXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTXVsdGlsaW5lIGlubmFyZHNcbiAgICAgIGFsdGVybmF0aXZlcyA9IHRoaXMuTXVsdGlsaW5lQ29uZGl0aW9uYWxCcmFuY2hlcygpO1xuXG4gICAgICBpZiAoYWx0ZXJuYXRpdmVzID09PSBudWxsKSB7XG4gICAgICAgIC8vIEFsbG93IHNpbmdsZSBwaWVjZSBvZiBjb250ZW50IHdpdGhpbiBtdWx0aS1saW5lIGV4cHJlc3Npb24sIGUuZy46XG4gICAgICAgIC8vIHsgdHJ1ZTpcbiAgICAgICAgLy8gICAgU29tZSBjb250ZW50IHRoYXQgaXNuJ3QgcHJlY2VkZWQgYnkgJy0nXG4gICAgICAgIC8vIH1cbiAgICAgICAgaWYgKGluaXRpYWxRdWVyeUV4cHJlc3Npb24pIHtcbiAgICAgICAgICBsZXQgc29sZUNvbnRlbnQ6IFBhcnNlZE9iamVjdFtdID0gdGhpcy5TdGF0ZW1lbnRzQXRMZXZlbChcbiAgICAgICAgICAgIFN0YXRlbWVudExldmVsLklubmVyQmxvY2tcbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChzb2xlQ29udGVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3Qgc29sZUJyYW5jaCA9IG5ldyBDb25kaXRpb25hbFNpbmdsZUJyYW5jaChzb2xlQ29udGVudCk7XG4gICAgICAgICAgICBhbHRlcm5hdGl2ZXMgPSBbc29sZUJyYW5jaF07XG5cbiAgICAgICAgICAgIC8vIEFsc28gYWxsb3cgYSBmaW5hbCBcIi0gZWxzZTpcIiBjbGF1c2VcbiAgICAgICAgICAgIGNvbnN0IGVsc2VCcmFuY2ggPSB0aGlzLlBhcnNlKFxuICAgICAgICAgICAgICB0aGlzLlNpbmdsZU11bHRpbGluZUNvbmRpdGlvblxuICAgICAgICAgICAgKSBhcyBDb25kaXRpb25hbFNpbmdsZUJyYW5jaDtcbiAgICAgICAgICAgIGlmIChlbHNlQnJhbmNoKSB7XG4gICAgICAgICAgICAgIGlmICghZWxzZUJyYW5jaC5pc0Vsc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLkVycm9yV2l0aFBhcnNlZE9iamVjdChcbiAgICAgICAgICAgICAgICAgIFwiRXhwZWN0ZWQgYW4gJy0gZWxzZTonIGNsYXVzZSBoZXJlIHJhdGhlciB0aGFuIGFuIGV4dHJhIGNvbmRpdGlvblwiLFxuICAgICAgICAgICAgICAgICAgZWxzZUJyYW5jaFxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICBlbHNlQnJhbmNoLmlzRWxzZSA9IHRydWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBhbHRlcm5hdGl2ZXMucHVzaChlbHNlQnJhbmNoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTdGlsbCBudWxsP1xuICAgICAgICBpZiAoYWx0ZXJuYXRpdmVzID09PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIGFsdGVybmF0aXZlcy5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgYWx0ZXJuYXRpdmVzWzBdLmlzRWxzZSAmJlxuICAgICAgICBpbml0aWFsUXVlcnlFeHByZXNzaW9uXG4gICAgICApIHtcbiAgICAgICAgLy8gRW1wdHkgdHJ1ZSBicmFuY2ggLSBkaWRuJ3QgZ2V0IHBhcnNlZCwgYnV0IHNob3VsZCBpbnNlcnQgb25lIGZvciBzZW1hbnRpYyBjb3JyZWN0bmVzcyxcbiAgICAgICAgLy8gYW5kIHRvIG1ha2Ugc3VyZSB0aGF0IGFueSBldmFsdWF0aW9uIHN0YWNrIHZhbHVlcyBnZXQgdGlkaWVkIHVwIGNvcnJlY3RseS5cbiAgICAgICAgY29uc3QgZW1wdHlUcnVlQnJhbmNoID0gbmV3IENvbmRpdGlvbmFsU2luZ2xlQnJhbmNoKG51bGwpO1xuICAgICAgICBlbXB0eVRydWVCcmFuY2guaXNUcnVlQnJhbmNoID0gdHJ1ZTtcbiAgICAgICAgYWx0ZXJuYXRpdmVzLnVuc2hpZnQoZW1wdHlUcnVlQnJhbmNoKTtcbiAgICAgIH1cblxuICAgICAgLy8gTGlrZSBhIHN3aXRjaCBzdGF0ZW1lbnRcbiAgICAgIC8vIHsgaW5pdGlhbFF1ZXJ5RXhwcmVzc2lvbjpcbiAgICAgIC8vICAgIC4uLiBtYXRjaCB0aGUgZXhwcmVzc2lvblxuICAgICAgLy8gfVxuICAgICAgaWYgKGluaXRpYWxRdWVyeUV4cHJlc3Npb24pIHtcbiAgICAgICAgbGV0IGVhcmxpZXJCcmFuY2hlc0hhdmVPd25FeHByZXNzaW9uOiBib29sZWFuID0gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBhbHRlcm5hdGl2ZXMubGVuZ3RoOyArK2lpKSB7XG4gICAgICAgICAgY29uc3QgYnJhbmNoID0gYWx0ZXJuYXRpdmVzW2lpXTtcbiAgICAgICAgICBjb25zdCBpc0xhc3Q6IGJvb2xlYW4gPSBpaSA9PT0gYWx0ZXJuYXRpdmVzLmxlbmd0aCAtIDE7XG5cbiAgICAgICAgICAvLyBNYXRjaGluZyBlcXVhbGl0eSB3aXRoIGluaXRpYWwgcXVlcnkgZXhwcmVzc2lvblxuICAgICAgICAgIC8vIFdlIHNldCB0aGlzIGZsYWcgZXZlbiBmb3IgdGhlIFwiZWxzZVwiIGNsYXVzZSBzbyB0aGF0XG4gICAgICAgICAgLy8gaXQga25vd3MgdG8gdGlkeSB1cCB0aGUgZXZhbHVhdGlvbiBzdGFjayBhdCB0aGUgZW5kXG5cbiAgICAgICAgICAvLyBNYXRjaCBxdWVyeVxuICAgICAgICAgIGlmIChicmFuY2gub3duRXhwcmVzc2lvbikge1xuICAgICAgICAgICAgYnJhbmNoLm1hdGNoaW5nRXF1YWxpdHkgPSB0cnVlO1xuICAgICAgICAgICAgZWFybGllckJyYW5jaGVzSGF2ZU93bkV4cHJlc3Npb24gPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZWFybGllckJyYW5jaGVzSGF2ZU93bkV4cHJlc3Npb24gJiYgaXNMYXN0KSB7XG4gICAgICAgICAgICAvLyBFbHNlIChmaW5hbCBicmFuY2gpXG4gICAgICAgICAgICBicmFuY2gubWF0Y2hpbmdFcXVhbGl0eSA9IHRydWU7XG4gICAgICAgICAgICBicmFuY2guaXNFbHNlID0gdHJ1ZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gQmluYXJ5IGNvbmRpdGlvbjpcbiAgICAgICAgICAgIC8vIHsgdHJ1ZU9yRmFsc2U6XG4gICAgICAgICAgICAvLyAgICAtIHdoZW4gdHJ1ZVxuICAgICAgICAgICAgLy8gICAgLSB3aGVuIGZhbHNlXG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICBpZiAoIWlzTGFzdCAmJiBhbHRlcm5hdGl2ZXMubGVuZ3RoID4gMikge1xuICAgICAgICAgICAgICB0aGlzLkVycm9yV2l0aFBhcnNlZE9iamVjdChcbiAgICAgICAgICAgICAgICBcIk9ubHkgZmluYWwgYnJhbmNoIGNhbiBiZSBhbiAnZWxzZScuIERpZCB5b3UgbWlzcyBhICc6Jz9cIixcbiAgICAgICAgICAgICAgICBicmFuY2hcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmIChpaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGJyYW5jaC5pc1RydWVCcmFuY2ggPSB0cnVlO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyYW5jaC5pc0Vsc2UgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBObyBpbml0aWFsIHF1ZXJ5LCBzbyBqdXN0IGEgbXVsdGktbGluZSBjb25kaXRpb25hbC4gZS5nLjpcbiAgICAgICAgLy8ge1xuICAgICAgICAvLyAgIC0geCA+IDM6ICBncmVhdGVyIHRoYW4gdGhyZWVcbiAgICAgICAgLy8gICAtIHggPT0gMzogZXF1YWwgdG8gdGhyZWVcbiAgICAgICAgLy8gICAtIHggPCAzOiAgbGVzcyB0aGFuIHRocmVlXG4gICAgICAgIC8vIH1cblxuICAgICAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgYWx0ZXJuYXRpdmVzLmxlbmd0aDsgKytpaSkge1xuICAgICAgICAgIGNvbnN0IGFsdCA9IGFsdGVybmF0aXZlc1tpaV07XG4gICAgICAgICAgY29uc3QgaXNMYXN0OiBib29sZWFuID0gaWkgPT09IGFsdGVybmF0aXZlcy5sZW5ndGggLSAxO1xuXG4gICAgICAgICAgaWYgKGFsdC5vd25FeHByZXNzaW9uID09PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoaXNMYXN0KSB7XG4gICAgICAgICAgICAgIGFsdC5pc0Vsc2UgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKGFsdC5pc0Vsc2UpIHtcbiAgICAgICAgICAgICAgICAvLyBEbyB3ZSBBTFNPIGhhdmUgYSB2YWxpZCBcImVsc2VcIiBhdCB0aGUgZW5kPyBMZXQncyByZXBvcnQgdGhlIGVycm9yIHRoZXJlLlxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbmFsQ2xhdXNlID0gYWx0ZXJuYXRpdmVzW2FsdGVybmF0aXZlcy5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICBpZiAoZmluYWxDbGF1c2UuaXNFbHNlKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLkVycm9yV2l0aFBhcnNlZE9iamVjdChcbiAgICAgICAgICAgICAgICAgICAgXCJNdWx0aXBsZSAnZWxzZScgY2FzZXMuIENhbiBoYXZlIGEgbWF4aW11bSBvZiBvbmUsIGF0IHRoZSBlbmQuXCIsXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2xhdXNlXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLkVycm9yV2l0aFBhcnNlZE9iamVjdChcbiAgICAgICAgICAgICAgICAgICAgXCInZWxzZScgY2FzZSBpbiBjb25kaXRpb25hbCBzaG91bGQgYWx3YXlzIGJlIHRoZSBmaW5hbCBvbmVcIixcbiAgICAgICAgICAgICAgICAgICAgYWx0XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLkVycm9yV2l0aFBhcnNlZE9iamVjdChcbiAgICAgICAgICAgICAgICAgIFwiQnJhbmNoIGRvZXNuJ3QgaGF2ZSBjb25kaXRpb24uIEFyZSB5b3UgbWlzc2luZyBhICc6Jz8gXCIsXG4gICAgICAgICAgICAgICAgICBhbHRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGFsdGVybmF0aXZlcy5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgICBhbHRlcm5hdGl2ZXNbMF0ub3duRXhwcmVzc2lvbiA9PT0gbnVsbFxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLkVycm9yV2l0aFBhcnNlZE9iamVjdChcbiAgICAgICAgICAgIFwiQ29uZGl0aW9uIGJsb2NrIHdpdGggbm8gY29uZGl0aW9uc1wiLFxuICAgICAgICAgICAgYWx0ZXJuYXRpdmVzWzBdXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRPRE86IENvbWUgdXAgd2l0aCB3YXRlci10aWdodCBlcnJvciBjb25kaXRpb25zLi4uIGl0J3MgcXVpdGUgYSBmbGV4aWJsZSBzeXN0ZW0hXG4gICAgLy8gZS5nLlxuICAgIC8vICAgLSBpbmxpbmUgY29uZGl0aW9uYWxzIG11c3QgaGF2ZSBleGFjdGx5IDEgb3IgMiBhbHRlcm5hdGl2ZXNcbiAgICAvLyAgIC0gbXVsdGlsaW5lIGV4cHJlc3Npb24gc2hvdWxkbid0IGhhdmUgbWl4ZWQgZXhpc3RlbmNlIG9mIGJyYW5jaC1jb25kaXRpb25zP1xuICAgIGlmIChhbHRlcm5hdGl2ZXMgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgYnJhbmNoIG9mIGFsdGVybmF0aXZlcykge1xuICAgICAgYnJhbmNoLmlzSW5saW5lID0gaXNJbmxpbmU7XG4gICAgfVxuXG4gICAgY29uc3QgY29uZCA9IG5ldyBDb25kaXRpb25hbChpbml0aWFsUXVlcnlFeHByZXNzaW9uLCBhbHRlcm5hdGl2ZXMpO1xuXG4gICAgcmV0dXJuIGNvbmQ7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IElubGluZUNvbmRpdGlvbmFsQnJhbmNoZXMgPSAoKTpcbiAgICB8IENvbmRpdGlvbmFsU2luZ2xlQnJhbmNoW11cbiAgICB8IG51bGwgPT4ge1xuICAgIGNvbnN0IGxpc3RPZkxpc3RzID0gdGhpcy5JbnRlcmxlYXZlPFBhcnNlZE9iamVjdFtdPihcbiAgICAgIHRoaXMuTWl4ZWRUZXh0QW5kTG9naWMsXG4gICAgICB0aGlzLkV4Y2x1ZGUodGhpcy5TdHJpbmcoXCJ8XCIpKSxcbiAgICAgIG51bGwsXG4gICAgICBmYWxzZVxuICAgICk7XG5cbiAgICBpZiAobGlzdE9mTGlzdHMgPT09IG51bGwgfHwgbGlzdE9mTGlzdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQ6IENvbmRpdGlvbmFsU2luZ2xlQnJhbmNoW10gPSBbXTtcblxuICAgIGlmIChsaXN0T2ZMaXN0cy5sZW5ndGggPiAyKSB7XG4gICAgICB0aGlzLkVycm9yKFxuICAgICAgICBcIkV4cGVjdGVkIG9uZSBvciB0d28gYWx0ZXJuYXRpdmVzIHNlcGFyYXRlZCBieSAnfCcgaW4gaW5saW5lIGNvbmRpdGlvbmFsXCJcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHRydWVCcmFuY2ggPSBuZXcgQ29uZGl0aW9uYWxTaW5nbGVCcmFuY2gobGlzdE9mTGlzdHNbMF0pO1xuICAgICAgdHJ1ZUJyYW5jaC5pc1RydWVCcmFuY2ggPSB0cnVlO1xuICAgICAgcmVzdWx0LnB1c2godHJ1ZUJyYW5jaCk7XG5cbiAgICAgIGlmIChsaXN0T2ZMaXN0cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGNvbnN0IGVsc2VCcmFuY2ggPSBuZXcgQ29uZGl0aW9uYWxTaW5nbGVCcmFuY2gobGlzdE9mTGlzdHNbMV0pO1xuICAgICAgICBlbHNlQnJhbmNoLmlzRWxzZSA9IHRydWU7XG4gICAgICAgIHJlc3VsdC5wdXNoKGVsc2VCcmFuY2gpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IE11bHRpbGluZUNvbmRpdGlvbmFsQnJhbmNoZXMgPSAoKTpcbiAgICB8IENvbmRpdGlvbmFsU2luZ2xlQnJhbmNoW11cbiAgICB8IG51bGwgPT4ge1xuICAgIHRoaXMuTXVsdGlsaW5lV2hpdGVzcGFjZSgpO1xuXG4gICAgY29uc3QgbXVsdGlwbGVDb25kaXRpb25zID0gdGhpcy5PbmVPck1vcmUodGhpcy5TaW5nbGVNdWx0aWxpbmVDb25kaXRpb24pO1xuICAgIGlmIChtdWx0aXBsZUNvbmRpdGlvbnMgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuTXVsdGlsaW5lV2hpdGVzcGFjZSgpO1xuXG4gICAgcmV0dXJuIG11bHRpcGxlQ29uZGl0aW9ucyBhcyBDb25kaXRpb25hbFNpbmdsZUJyYW5jaFtdO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBTaW5nbGVNdWx0aWxpbmVDb25kaXRpb24gPVxuICAgICgpOiBDb25kaXRpb25hbFNpbmdsZUJyYW5jaCB8IG51bGwgPT4ge1xuICAgICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICAgIGlmIChcbiAgICAgICAgLy8gTWFrZSBzdXJlIHdlJ3JlIG5vdCBhY2NpZGVudGFsbHkgcGFyc2luZyBhIGRpdmVydFxuICAgICAgICB0aGlzLlBhcnNlU3RyaW5nKFwiLT5cIikgIT09IG51bGwgfHxcbiAgICAgICAgdGhpcy5QYXJzZVN0cmluZyhcIi1cIikgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICAgIGxldCBleHByOiBFeHByZXNzaW9uIHwgbnVsbCA9IG51bGw7XG4gICAgICBjb25zdCBpc0Vsc2U6IGJvb2xlYW4gPSB0aGlzLlBhcnNlKHRoaXMuRWxzZUV4cHJlc3Npb24pICE9PSBudWxsO1xuXG4gICAgICBpZiAoIWlzRWxzZSkge1xuICAgICAgICBleHByID0gdGhpcy5QYXJzZSh0aGlzLkNvbmRpdGlvbkV4cHJlc3Npb24pIGFzIEV4cHJlc3Npb247XG4gICAgICB9XG5cbiAgICAgIGxldCBjb250ZW50OiBQYXJzZWRPYmplY3RbXSA9IHRoaXMuU3RhdGVtZW50c0F0TGV2ZWwoXG4gICAgICAgIFN0YXRlbWVudExldmVsLklubmVyQmxvY2tcbiAgICAgICk7XG4gICAgICBpZiAoZXhwciA9PT0gbnVsbCAmJiBjb250ZW50ID09PSBudWxsKSB7XG4gICAgICAgIHRoaXMuRXJyb3IoXCJleHBlY3RlZCBjb250ZW50IGZvciB0aGUgY29uZGl0aW9uYWwgYnJhbmNoIGZvbGxvd2luZyAnLSdcIik7XG5cbiAgICAgICAgLy8gUmVjb3ZlclxuICAgICAgICBjb250ZW50ID0gW25ldyBUZXh0KFwiXCIpXTtcbiAgICAgIH1cblxuICAgICAgLy8gQWxsb3cgYWRkaXRpb25hbCBtdWx0aWxpbmUgd2hpdGVzcGFjZSwgaWYgdGhlIHN0YXRlbWVudHMgd2VyZSBlbXB0eSAodmFsaWQpXG4gICAgICAvLyB0aGVuIHRoZWlyIHN1cnJvdW5kaW5nIG11bHRpbGluZSB3aGl0ZXNwYWNjZSBuZWVkcyB0byBiZSBoYW5kbGVkIG1hbnVhbGx5LlxuICAgICAgLy8gZS5nLlxuICAgICAgLy8geyB4OlxuICAgICAgLy8gICAtIDE6ICAgIC8vIGludGVudGlvbmFsbHkgbGVmdCBibGFuaywgYnV0IG5ld2xpbmUgbmVlZHMgdG8gYmUgcGFyc2VkXG4gICAgICAvLyAgIC0gMjogZXRjXG4gICAgICAvLyB9XG4gICAgICB0aGlzLk11bHRpbGluZVdoaXRlc3BhY2UoKTtcblxuICAgICAgY29uc3QgYnJhbmNoID0gbmV3IENvbmRpdGlvbmFsU2luZ2xlQnJhbmNoKGNvbnRlbnQpO1xuICAgICAgYnJhbmNoLm93bkV4cHJlc3Npb24gPSBleHByO1xuICAgICAgYnJhbmNoLmlzRWxzZSA9IGlzRWxzZTtcblxuICAgICAgcmV0dXJuIGJyYW5jaDtcbiAgICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBDb25kaXRpb25FeHByZXNzaW9uID0gKCk6IFBhcnNlZE9iamVjdCB8IG51bGwgPT4ge1xuICAgIGNvbnN0IGV4cHIgPSB0aGlzLlBhcnNlKHRoaXMuRXhwcmVzc2lvbikgYXMgUGFyc2VkT2JqZWN0O1xuICAgIGlmIChleHByID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLkRpc2FsbG93SW5jcmVtZW50KGV4cHIpO1xuXG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICBpZiAodGhpcy5QYXJzZVN0cmluZyhcIjpcIikgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBleHByO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBFbHNlRXhwcmVzc2lvbiA9ICgpOiB0eXBlb2YgUGFyc2VTdWNjZXNzIHwgbnVsbCA9PiB7XG4gICAgaWYgKHRoaXMuUGFyc2VTdHJpbmcoXCJlbHNlXCIpID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIGlmICh0aGlzLlBhcnNlU3RyaW5nKFwiOlwiKSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIFBhcnNlU3VjY2VzcztcbiAgfTtcblxuICAvKipcbiAgICogRW5kIENvbmRpdGlvbmFsIHNlY3Rpb24uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBCZWdpbiBDb250ZW50IHNlY3Rpb24uXG4gICAqL1xuXG4gIHB1YmxpYyBfbm9uVGV4dFBhdXNlQ2hhcmFjdGVyczogQ2hhcmFjdGVyU2V0IHwgbnVsbCA9IG51bGw7XG4gIHB1YmxpYyBfbm9uVGV4dEVuZENoYXJhY3RlcnM6IENoYXJhY3RlclNldCB8IG51bGwgPSBudWxsO1xuICBwdWJsaWMgX25vdFRleHRFbmRDaGFyYWN0ZXJzQ2hvaWNlOiBDaGFyYWN0ZXJTZXQgfCBudWxsID0gbnVsbDtcbiAgcHVibGljIF9ub3RUZXh0RW5kQ2hhcmFjdGVyc1N0cmluZzogQ2hhcmFjdGVyU2V0IHwgbnVsbCA9IG51bGw7XG5cbiAgcHVibGljIHJlYWRvbmx5IFRyaW1FbmRXaGl0ZXNwYWNlID0gKFxuICAgIG1peGVkVGV4dEFuZExvZ2ljUmVzdWx0czogUGFyc2VkT2JqZWN0W10sXG4gICAgdGVybWluYXRlV2l0aFNwYWNlOiBib29sZWFuXG4gICk6IHZvaWQgPT4ge1xuICAgIC8vIFRyaW0gd2hpdGVzcGFjZSBmcm9tIGVuZFxuICAgIGlmIChtaXhlZFRleHRBbmRMb2dpY1Jlc3VsdHMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgbGFzdE9iaklkeCA9IG1peGVkVGV4dEFuZExvZ2ljUmVzdWx0cy5sZW5ndGggLSAxO1xuICAgICAgY29uc3QgbGFzdE9iaiA9IG1peGVkVGV4dEFuZExvZ2ljUmVzdWx0c1tsYXN0T2JqSWR4XTtcbiAgICAgIGlmIChsYXN0T2JqIGluc3RhbmNlb2YgVGV4dCkge1xuICAgICAgICBjb25zdCB0ZXh0T2JqOiBUZXh0ID0gbGFzdE9iajtcbiAgICAgICAgdGV4dE9iai50ZXh0ID0gdGV4dE9iai50ZXh0LnJlcGxhY2UobmV3IFJlZ0V4cCgvWyBcXHRdKyQvZyksIFwiXCIpO1xuXG4gICAgICAgIGlmICh0ZXJtaW5hdGVXaXRoU3BhY2UpIHtcbiAgICAgICAgICB0ZXh0T2JqLnRleHQgKz0gXCIgXCI7XG4gICAgICAgIH0gZWxzZSBpZiAodGV4dE9iai50ZXh0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIC8vIE5vIGNvbnRlbnQgbGVmdCBhdCBhbGw/IHRyaW0gdGhlIHdob2xlIG9iamVjdFxuICAgICAgICAgIG1peGVkVGV4dEFuZExvZ2ljUmVzdWx0cy5zcGxpY2UobGFzdE9iaklkeCwgMSk7XG5cbiAgICAgICAgICAvLyBSZWN1cnNlIGluIGNhc2UgdGhlcmUncyBtb3JlIHdoaXRlc3BhY2VcbiAgICAgICAgICB0aGlzLlRyaW1FbmRXaGl0ZXNwYWNlKG1peGVkVGV4dEFuZExvZ2ljUmVzdWx0cywgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBMaW5lT2ZNaXhlZFRleHRBbmRMb2dpYyA9ICgpOiBQYXJzZWRPYmplY3RbXSB8IG51bGwgPT4ge1xuICAgIC8vIENvbnN1bWUgYW55IHdoaXRlc3BhY2UgYXQgdGhlIHN0YXJ0IG9mIHRoZSBsaW5lXG4gICAgLy8gKEV4Y2VwdCBmb3IgZXNjYXBlZCB3aGl0ZXNwYWNlKVxuICAgIHRoaXMuUGFyc2UodGhpcy5XaGl0ZXNwYWNlKTtcblxuICAgIGxldCByZXN1bHQ6IFBhcnNlZE9iamVjdFtdID0gdGhpcy5QYXJzZShcbiAgICAgIHRoaXMuTWl4ZWRUZXh0QW5kTG9naWNcbiAgICApIGFzIFBhcnNlZE9iamVjdFtdO1xuXG4gICAgaWYgKCFyZXN1bHQgfHwgIXJlc3VsdC5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIFdhcm4gYWJvdXQgYWNjaWRlbnRhbGx5IHdyaXRpbmcgXCJyZXR1cm5cIiB3aXRob3V0IFwiflwiXG4gICAgY29uc3QgZmlyc3RUZXh0ID0gcmVzdWx0WzBdIGFzIFRleHQ7XG4gICAgaWYgKGZpcnN0VGV4dCAmJiBmaXJzdFRleHQudGV4dCAmJiBmaXJzdFRleHQudGV4dC5zdGFydHNXaXRoKFwicmV0dXJuXCIpKSB7XG4gICAgICB0aGlzLldhcm5pbmcoXG4gICAgICAgIFwiRG8geW91IG5lZWQgYSAnficgYmVmb3JlICdyZXR1cm4nPyBJZiBub3QsIHBlcmhhcHMgdXNlIGEgZ2x1ZTogPD4gKHNpbmNlIGl0J3MgbG93ZXJjYXNlKSBvciByZXdyaXRlIHNvbWVob3c/XCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHJlc3VsdC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGxhc3RPYmogPSByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdO1xuICAgIGlmICghKGxhc3RPYmogaW5zdGFuY2VvZiBEaXZlcnQpKSB7XG4gICAgICB0aGlzLlRyaW1FbmRXaGl0ZXNwYWNlKHJlc3VsdCwgZmFsc2UpO1xuICAgIH1cblxuICAgIHRoaXMuRW5kVGFnSWZOZWNlc3NhcnkocmVzdWx0KTtcblxuICAgIC8vIElmIHRoZSBsaW5lIGRvZW5zJ3QgYWN0dWFsbHkgY29udGFpbiBhbnkgbm9ybWFsIHRleHQgY29udGVudFxuICAgIC8vIGJ1dCBpcyBpbiBmYWN0IGVudGlyZWx5IGEgdGFnLCB0aGVuIGxldCdzIG5vdCBhcHBlbmRcbiAgICAvLyBhIG5ld2xpbmUsIHNpbmNlIHdlIHdhbnQgdGhlIHRhZyAob3IgdGFncykgdG8gYmUgYXNzb2NpYXRlZFxuICAgIC8vIHdpdGggdGhlIGxpbmUgYmVsb3cgcmF0aGVyIHRoYW4gYmVpbmcgY29tcGxldGVseSBpbmRlcGVuZGVudC5cbiAgICBsZXQgbGluZUlzUHVyZVRhZyA9XG4gICAgICByZXN1bHQubGVuZ3RoID4gMCAmJiByZXN1bHRbMF0gaW5zdGFuY2VvZiBUYWcgJiYgcmVzdWx0WzBdLmlzU3RhcnQ7XG5cbiAgICBpZiAoIWxpbmVJc1B1cmVUYWcpIHtcbiAgICAgIHJlc3VsdC5wdXNoKG5ldyBUZXh0KFwiXFxuXCIpKTtcbiAgICB9XG5cbiAgICB0aGlzLkV4cGVjdCh0aGlzLkVuZE9mTGluZSwgXCJlbmQgb2YgbGluZVwiLCB0aGlzLlNraXBUb05leHRMaW5lKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBNaXhlZFRleHRBbmRMb2dpYyA9ICgpOiBQYXJzZWRPYmplY3RbXSB8IG51bGwgPT4ge1xuICAgIC8vIENoZWNrIGZvciBkaXNhbGxvd2VkIFwiflwiIHdpdGhpbiB0aGlzIGNvbnRleHRcbiAgICBjb25zdCBkaXNhbGxvd2VkVGlsZGUgPSB0aGlzLlBhcnNlT2JqZWN0KHRoaXMuU3BhY2VkKHRoaXMuU3RyaW5nKFwiflwiKSkpO1xuICAgIGlmIChkaXNhbGxvd2VkVGlsZGUgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgIFwiWW91IHNob3VsZG4ndCB1c2UgYSAnficgaGVyZSAtIHRpbGRhcyBhcmUgZm9yIGxvZ2ljIHRoYXQncyBvbiBpdHMgb3duIGxpbmUuIFRvIGRvIGlubGluZSBsb2dpYywgdXNlIHsgY3VybHkgYnJhY2VzIH0gaW5zdGVhZFwiXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEVpdGhlciwgb3IgYm90aCBpbnRlcmxlYXZlZFxuICAgIGxldCByZXN1bHRzOiBQYXJzZWRPYmplY3RbXSA9IHRoaXMuSW50ZXJsZWF2ZTxQYXJzZWRPYmplY3Q+KFxuICAgICAgdGhpcy5PcHRpb25hbCh0aGlzLkNvbnRlbnRUZXh0KSxcbiAgICAgIHRoaXMuT3B0aW9uYWwodGhpcy5JbmxpbmVMb2dpY09yR2x1ZU9yU3RhcnRUYWcpXG4gICAgKTtcblxuICAgIC8vIFRlcm1pbmF0aW5nIGRpdmVydD9cbiAgICAvLyAoV2hlbiBwYXJzaW5nIGNvbnRlbnQgZm9yIHRoZSB0ZXh0IG9mIGEgY2hvaWNlLCBkaXZlcnRzIGFyZW4ndCBhbGxvd2VkLlxuICAgIC8vICBUaGUgZGl2ZXJ0IG9uIHRoZSBlbmQgb2YgdGhlIGJvZHkgb2YgYSBjaG9pY2UgaXMgaGFuZGxlZCBzcGVjaWFsbHkuKVxuICAgIGlmICghdGhpcy5fcGFyc2luZ0Nob2ljZSkge1xuICAgICAgY29uc3QgZGl2ZXJ0czogUGFyc2VkT2JqZWN0W10gPSB0aGlzLlBhcnNlKFxuICAgICAgICB0aGlzLk11bHRpRGl2ZXJ0XG4gICAgICApIGFzIFBhcnNlZE9iamVjdFtdO1xuICAgICAgaWYgKGRpdmVydHMgIT09IG51bGwpIHtcbiAgICAgICAgLy8gTWF5IG5vdCBoYXZlIGhhZCBhbnkgcmVzdWx0cyBhdCBhbGwgaWYgdGhlcmUncyAqb25seSogYSBkaXZlcnQhXG4gICAgICAgIGlmIChyZXN1bHRzID09PSBudWxsKSB7XG4gICAgICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRW5kIHByZXZpb3VzbHkgYWN0aXZlIHRhZyBpZiBuZWNlc3NhcnlcbiAgICAgICAgdGhpcy5FbmRUYWdJZk5lY2Vzc2FyeShyZXN1bHRzKTtcblxuICAgICAgICB0aGlzLlRyaW1FbmRXaGl0ZXNwYWNlKHJlc3VsdHMsIHRydWUpO1xuXG4gICAgICAgIHJlc3VsdHMucHVzaCguLi5kaXZlcnRzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXJlc3VsdHMpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBDb250ZW50VGV4dCA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5Db250ZW50VGV4dEFsbG93aW5nRXNjYXBlQ2hhcigpO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBDb250ZW50VGV4dEFsbG93aW5nRXNjYXBlQ2hhciA9ICgpOiBUZXh0IHwgbnVsbCA9PiB7XG4gICAgbGV0IHNiOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAgIGRvIHtcbiAgICAgIGxldCBzdHIgPSB0aGlzLlBhcnNlKHRoaXMuQ29udGVudFRleHROb0VzY2FwZSk7XG4gICAgICBjb25zdCBnb3RFc2NhcGVDaGFyOiBib29sZWFuID0gdGhpcy5QYXJzZVN0cmluZyhcIlxcXFxcIikgIT09IG51bGw7XG5cbiAgICAgIGlmIChnb3RFc2NhcGVDaGFyIHx8IHN0ciAhPT0gbnVsbCkge1xuICAgICAgICBpZiAoc2IgPT09IG51bGwpIHtcbiAgICAgICAgICBzYiA9IFwiXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3RyICE9PSBudWxsKSB7XG4gICAgICAgICAgc2IgKz0gU3RyaW5nKHN0cik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZ290RXNjYXBlQ2hhcikge1xuICAgICAgICAgIGNvbnN0IGM6IHN0cmluZyA9IHRoaXMuUGFyc2VTaW5nbGVDaGFyYWN0ZXIoKTtcbiAgICAgICAgICBzYiArPSBjO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IHdoaWxlICh0cnVlKTtcblxuICAgIGlmIChzYiAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG5ldyBUZXh0KHNiKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvLyBDb250ZW50IHRleHQgaXMgYW4gdW51c3VhbCBwYXJzZSBydWxlIGNvbXBhcmVkIHdpdGggbW9zdCBzaW5jZSBpdCdzXG4gIC8vIGxlc3MgYWJvdXQgc2F5aW5nIFwidGhpcyBpcyBpcyB0aGUgc21hbGwgc2VsZWN0aW9uIG9mIHN0dWZmIHRoYXQgd2UgcGFyc2VcIlxuICAvLyBhbmQgbW9yZSBcIndlIHBhcnNlIEFOWVRISU5HIGV4Y2VwdCB0aGlzIHNtYWxsIHNlbGVjdGlvbiBvZiBzdHVmZlwiLlxuICBwdWJsaWMgcmVhZG9ubHkgQ29udGVudFRleHROb0VzY2FwZSA9ICgpOiBzdHJpbmcgfCBudWxsID0+IHtcbiAgICAvLyBFYXQgdGhyb3VnaCB0ZXh0LCBwYXVzaW5nIGF0IHRoZSBmb2xsb3dpbmcgY2hhcmFjdGVycywgYW5kXG4gICAgLy8gYXR0ZW1wdCB0byBwYXJzZSB0aGUgbm9uVGV4dFJ1bGUuXG4gICAgLy8gXCItXCI6IHBvc3NpYmxlIHN0YXJ0IG9mIGRpdmVydCBvciBzdGFydCBvZiBnYXRoZXJcbiAgICAvLyBcIjxcIjogcG9zc2libGUgc3RhcnQgb2YgZ2x1ZVxuICAgIGlmICh0aGlzLl9ub25UZXh0UGF1c2VDaGFyYWN0ZXJzID09PSBudWxsKSB7XG4gICAgICB0aGlzLl9ub25UZXh0UGF1c2VDaGFyYWN0ZXJzID0gbmV3IENoYXJhY3RlclNldChcIi08XCIpO1xuICAgIH1cblxuICAgIC8vIElmIHdlIGhpdCBhbnkgb2YgdGhlc2UgY2hhcmFjdGVycywgd2Ugc3RvcCAqaW1tZWRpYXRlbHkqIHdpdGhvdXQgYm90aGVyaW5nIHRvIGV2ZW4gY2hlY2sgdGhlIG5vblRleHRSdWxlXG4gICAgLy8gXCJ7XCIgZm9yIHN0YXJ0IG9mIGxvZ2ljXG4gICAgLy8gXCJ8XCIgZm9yIG1pZCBsb2dpYyBicmFuY2hcbiAgICBpZiAodGhpcy5fbm9uVGV4dEVuZENoYXJhY3RlcnMgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuX25vblRleHRFbmRDaGFyYWN0ZXJzID0gbmV3IENoYXJhY3RlclNldChcInt9fFxcblxcclxcXFwjXCIpO1xuICAgICAgdGhpcy5fbm90VGV4dEVuZENoYXJhY3RlcnNDaG9pY2UgPSBuZXcgQ2hhcmFjdGVyU2V0KFxuICAgICAgICB0aGlzLl9ub25UZXh0RW5kQ2hhcmFjdGVyc1xuICAgICAgKTtcbiAgICAgIHRoaXMuX25vdFRleHRFbmRDaGFyYWN0ZXJzQ2hvaWNlLkFkZENoYXJhY3RlcnMoXCJbXVwiKTtcbiAgICAgIHRoaXMuX25vdFRleHRFbmRDaGFyYWN0ZXJzU3RyaW5nID0gbmV3IENoYXJhY3RlclNldChcbiAgICAgICAgdGhpcy5fbm9uVGV4dEVuZENoYXJhY3RlcnNcbiAgICAgICk7XG4gICAgICB0aGlzLl9ub3RUZXh0RW5kQ2hhcmFjdGVyc1N0cmluZy5BZGRDaGFyYWN0ZXJzKCdcIicpO1xuICAgIH1cblxuICAgIC8vIFdoZW4gdGhlIFBhcnNlVW50aWwgcGF1c2VzLCBjaGVjayB0aGVzZSBydWxlcyBpbiBjYXNlIHRoZXkgZXZhbHVhdGUgc3VjY2Vzc2Z1bGx5XG4gICAgY29uc3Qgbm9uVGV4dFJ1bGU6IFBhcnNlUnVsZSA9ICgpID0+XG4gICAgICB0aGlzLk9uZU9mKFtcbiAgICAgICAgdGhpcy5QYXJzZURpdmVydEFycm93LFxuICAgICAgICB0aGlzLlBhcnNlVGhyZWFkQXJyb3csXG4gICAgICAgIHRoaXMuRW5kT2ZMaW5lLFxuICAgICAgICB0aGlzLkdsdWUsXG4gICAgICBdKTtcblxuICAgIGxldCBlbmRDaGFyczogQ2hhcmFjdGVyU2V0IHwgbnVsbCA9IG51bGw7XG4gICAgaWYgKHRoaXMucGFyc2luZ1N0cmluZ0V4cHJlc3Npb24pIHtcbiAgICAgIGVuZENoYXJzID0gdGhpcy5fbm90VGV4dEVuZENoYXJhY3RlcnNTdHJpbmc7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9wYXJzaW5nQ2hvaWNlKSB7XG4gICAgICBlbmRDaGFycyA9IHRoaXMuX25vdFRleHRFbmRDaGFyYWN0ZXJzQ2hvaWNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmRDaGFycyA9IHRoaXMuX25vblRleHRFbmRDaGFyYWN0ZXJzO1xuICAgIH1cblxuICAgIGNvbnN0IHB1cmVUZXh0Q29udGVudDogc3RyaW5nID0gdGhpcy5QYXJzZVVudGlsKFxuICAgICAgbm9uVGV4dFJ1bGUsXG4gICAgICB0aGlzLl9ub25UZXh0UGF1c2VDaGFyYWN0ZXJzLFxuICAgICAgZW5kQ2hhcnNcbiAgICApO1xuXG4gICAgaWYgKHB1cmVUZXh0Q29udGVudCAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHB1cmVUZXh0Q29udGVudDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogRW5kIENvbnRlbnQgc2VjdGlvbi5cbiAgICovXG5cbiAgLyoqXG4gICAqIEJlZ2luIERpdmVydCBzZWN0aW9uLlxuICAgKi9cblxuICBwdWJsaWMgcmVhZG9ubHkgTXVsdGlEaXZlcnQgPSAoKTogUGFyc2VkT2JqZWN0W10gfCBudWxsID0+IHtcbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIGxldCBkaXZlcnRzOiBQYXJzZWRPYmplY3RbXSA9IFtdO1xuXG4gICAgLy8gVHJ5IHNpbmdsZSB0aHJlYWQgZmlyc3RcbiAgICBjb25zdCB0aHJlYWREaXZlcnQgPSB0aGlzLlBhcnNlKHRoaXMuU3RhcnRUaHJlYWQpIGFzIFBhcnNlZE9iamVjdDtcbiAgICBpZiAodGhyZWFkRGl2ZXJ0KSB7XG4gICAgICBkaXZlcnRzID0gW3RocmVhZERpdmVydF07XG5cbiAgICAgIHJldHVybiBkaXZlcnRzO1xuICAgIH1cblxuICAgIC8vIE5vcm1hbCBkaXZlcnRzIGFuZCB0dW5uZWxzXG4gICAgY29uc3QgYXJyb3dzQW5kRGl2ZXJ0cyA9IHRoaXMuSW50ZXJsZWF2ZTxQYXJzZWRPYmplY3Q+KFxuICAgICAgdGhpcy5QYXJzZURpdmVydEFycm93T3JUdW5uZWxPbndhcmRzLFxuICAgICAgdGhpcy5EaXZlcnRJZGVudGlmaWVyV2l0aEFyZ3VtZW50c1xuICAgICk7XG5cbiAgICBpZiAoIWFycm93c0FuZERpdmVydHMpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGRpdmVydHMgPSBbXTtcblxuICAgIHRoaXMuRW5kVGFnSWZOZWNlc3NhcnkoZGl2ZXJ0cyk7XG5cbiAgICAvLyBQb3NzaWJsZSBwYXR0ZXJuczpcbiAgICAvLyAgLT4gICAgICAgICAgICAgICAgICAgLS0gZXhwbGljaXQgZ2F0aGVyXG4gICAgLy8gIC0+LT4gICAgICAgICAgICAgICAgIC0tIHR1bm5lbCBvbndhcmRzXG4gICAgLy8gIC0+IGRpdiAgICAgICAgICAgICAgIC0tIG5vcm1hbCBkaXZlcnRcbiAgICAvLyAgLT4tPiBkaXYgICAgICAgICAgICAgLS0gdHVubmVsIG9ud2FyZHMsIGZvbGxvd2VkIGJ5IG92ZXJyaWRlIGRpdmVydFxuICAgIC8vICAtPiBkaXYgLT4gICAgICAgICAgICAtLSBub3JtYWwgdHVubmVsXG4gICAgLy8gIC0+IGRpdiAtPi0+ICAgICAgICAgIC0tIHR1bm5lbCB0aGVuIHR1bm5lbCBjb250aW51ZVxuICAgIC8vICAtPiBkaXYgLT4gZGl2ICAgICAgICAtLSB0dW5uZWwgdGhlbiBkaXZlcnRcbiAgICAvLyAgLT4gZGl2IC0+IGRpdiAtPiAgICAgLS0gdHVubmVsIHRoZW4gdHVubmVsXG4gICAgLy8gIC0+IGRpdiAtPiBkaXYgLT4tPlxuICAgIC8vICAtPiBkaXYgLT4gZGl2IC0+LT4gZGl2ICAgIChldGMpXG5cbiAgICAvLyBMb29rIGF0IHRoZSBhcnJvd3MgYW5kIGRpdmVydHNcbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgYXJyb3dzQW5kRGl2ZXJ0cy5sZW5ndGg7ICsraWkpIHtcbiAgICAgIGNvbnN0IGlzQXJyb3c6IGJvb2xlYW4gPSBpaSAlIDIgPT09IDA7XG5cbiAgICAgIC8vIEFycm93IHN0cmluZ1xuICAgICAgaWYgKGlzQXJyb3cpIHtcbiAgICAgICAgLy8gVHVubmVsIG9ud2FyZHNcbiAgICAgICAgaWYgKChhcnJvd3NBbmREaXZlcnRzW2lpXSBhcyBhbnkpID09PSBcIi0+LT5cIikge1xuICAgICAgICAgIGNvbnN0IHR1bm5lbE9ud2FyZHNQbGFjZW1lbnRWYWxpZDogYm9vbGVhbiA9XG4gICAgICAgICAgICBpaSA9PT0gMCB8fFxuICAgICAgICAgICAgaWkgPT09IGFycm93c0FuZERpdmVydHMubGVuZ3RoIC0gMSB8fFxuICAgICAgICAgICAgaWkgPT09IGFycm93c0FuZERpdmVydHMubGVuZ3RoIC0gMjtcblxuICAgICAgICAgIGlmICghdHVubmVsT253YXJkc1BsYWNlbWVudFZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLkVycm9yKFxuICAgICAgICAgICAgICBcIlR1bm5lbCBvbndhcmRzICctPi0+JyBtdXN0IG9ubHkgY29tZSBhdCB0aGUgYmVnaW5pbmcgb3IgdGhlIHN0YXJ0IG9mIGEgZGl2ZXJ0XCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgdHVubmVsT253YXJkcyA9IG5ldyBUdW5uZWxPbndhcmRzKCk7XG4gICAgICAgICAgaWYgKGlpIDwgYXJyb3dzQW5kRGl2ZXJ0cy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBjb25zdCB0dW5uZWxPbndhcmREaXZlcnQgPSBhc09yTnVsbChcbiAgICAgICAgICAgICAgYXJyb3dzQW5kRGl2ZXJ0c1tpaSArIDFdLFxuICAgICAgICAgICAgICBEaXZlcnRcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0dW5uZWxPbndhcmRzLmRpdmVydEFmdGVyID0gdHVubmVsT253YXJkRGl2ZXJ0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGRpdmVydHMucHVzaCh0dW5uZWxPbndhcmRzKTtcblxuICAgICAgICAgIC8vIE5vdCBhbGxvd2VkIHRvIGRvIGFueXRoaW5nIGFmdGVyIGEgdHVubmVsIG9ud2FyZHMuXG4gICAgICAgICAgLy8gSWYgd2UgaGFkIGFueXRoaW5nIGxlZnQgaXQgd291bGQgYmUgY2F1c2VkIGluIHRoZSBhYm92ZSBFcnJvciBmb3JcbiAgICAgICAgICAvLyB0aGUgcG9zaXRpb25pbmcgb2YgYSAtPi0+XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIERpdmVydFxuICAgICAgICBjb25zdCBkaXZlcnQgPSBhcnJvd3NBbmREaXZlcnRzW2lpXSBhcyBEaXZlcnQ7XG4gICAgICAgIC8vIE1vcmUgdG8gY29tZT8gKGZ1cnRoZXIgYXJyb3dzKSBNdXN0IGJlIHR1bm5lbGxpbmcuXG4gICAgICAgIGlmIChpaSA8IGFycm93c0FuZERpdmVydHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgIGRpdmVydC5pc1R1bm5lbCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBkaXZlcnRzLnB1c2goZGl2ZXJ0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTaW5nbGUgLT4gKHVzZWQgZm9yIGRlZmF1bHQgY2hvaWNlcylcbiAgICBpZiAoZGl2ZXJ0cy5sZW5ndGggPT09IDAgJiYgYXJyb3dzQW5kRGl2ZXJ0cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnN0IGdhdGhlckRpdmVydCA9IG5ldyBEaXZlcnQobnVsbCk7XG4gICAgICBnYXRoZXJEaXZlcnQuaXNFbXB0eSA9IHRydWU7XG4gICAgICBkaXZlcnRzLnB1c2goZ2F0aGVyRGl2ZXJ0KTtcblxuICAgICAgaWYgKCF0aGlzLl9wYXJzaW5nQ2hvaWNlKSB7XG4gICAgICAgIHRoaXMuRXJyb3IoXCJFbXB0eSBkaXZlcnRzICgtPikgYXJlIG9ubHkgdmFsaWQgb24gY2hvaWNlc1wiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGl2ZXJ0cztcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgU3RhcnRUaHJlYWQgPSAoKTogRGl2ZXJ0IHwgbnVsbCA9PiB7XG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICBpZiAodGhpcy5QYXJzZVRocmVhZEFycm93KCkgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgY29uc3QgZGl2ZXJ0ID0gdGhpcy5FeHBlY3QoXG4gICAgICB0aGlzLkRpdmVydElkZW50aWZpZXJXaXRoQXJndW1lbnRzLFxuICAgICAgXCJ0YXJnZXQgZm9yIG5ldyB0aHJlYWRcIixcbiAgICAgICgpID0+IG5ldyBEaXZlcnQobnVsbClcbiAgICApIGFzIERpdmVydDtcblxuICAgIGRpdmVydC5pc1RocmVhZCA9IHRydWU7XG5cbiAgICByZXR1cm4gZGl2ZXJ0O1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBEaXZlcnRJZGVudGlmaWVyV2l0aEFyZ3VtZW50cyA9ICgpOiBEaXZlcnQgfCBudWxsID0+IHtcbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIGNvbnN0IHRhcmdldENvbXBvbmVudHM6IElkZW50aWZpZXJbXSA9IHRoaXMuUGFyc2UoXG4gICAgICB0aGlzLkRvdFNlcGFyYXRlZERpdmVydFBhdGhDb21wb25lbnRzXG4gICAgKSBhcyBJZGVudGlmaWVyW107XG5cbiAgICBpZiAoIXRhcmdldENvbXBvbmVudHMpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgY29uc3Qgb3B0aW9uYWxBcmd1bWVudHMgPSB0aGlzLlBhcnNlKFxuICAgICAgdGhpcy5FeHByZXNzaW9uRnVuY3Rpb25DYWxsQXJndW1lbnRzXG4gICAgKSBhcyBFeHByZXNzaW9uW107XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIGNvbnN0IHRhcmdldFBhdGggPSBuZXcgUGF0aCh0YXJnZXRDb21wb25lbnRzKTtcblxuICAgIHJldHVybiBuZXcgRGl2ZXJ0KHRhcmdldFBhdGgsIG9wdGlvbmFsQXJndW1lbnRzKTtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgU2luZ2xlRGl2ZXJ0ID0gKCk6IERpdmVydCB8IG51bGwgPT4ge1xuICAgIGNvbnN0IGRpdmVydHMgPSB0aGlzLlBhcnNlKHRoaXMuTXVsdGlEaXZlcnQpIGFzIFBhcnNlZE9iamVjdFtdO1xuICAgIGlmICghZGl2ZXJ0cykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gSWRlYWxseSB3ZSdkIHJlcG9ydCBlcnJvcnMgaWYgd2UgZ2V0IHRoZVxuICAgIC8vIHdyb25nIGtpbmQgb2YgZGl2ZXJ0LCBidXQgdW5mb3J0dW5hdGVseSB3ZVxuICAgIC8vIGhhdmUgdG8gaGFjayBhcm91bmQgdGhlIGZhY3QgdGhhdCBzZXF1ZW5jZXMgdXNlXG4gICAgLy8gYSB2ZXJ5IHNpbWlsYXIgc3ludGF4LlxuICAgIC8vIGkuZS4gaWYgeW91IGhhdmUgYSBtdWx0aS1kaXZlcnQgYXQgdGhlIHN0YXJ0XG4gICAgLy8gb2YgYSBzZXF1ZW5jZSwgaXQgaW5pdGlhbGx5IHRyaWVzIHRvIHBhcnNlIGl0XG4gICAgLy8gYXMgYSBkaXZlcnQgdGFyZ2V0IChwYXJ0IG9mIGFuIGV4cHJlc3Npb24gb2ZcbiAgICAvLyBhIGNvbmRpdGlvbmFsKSBhbmQgZ2l2ZXMgZXJyb3JzLiBTbyBpbnN0ZWFkXG4gICAgLy8gd2UganVzdCBoYXZlIHRvIGJsaW5kbHkgcmVqZWN0IGl0IGFzIGEgc2luZ2xlXG4gICAgLy8gZGl2ZXJ0LCBhbmQgZ2l2ZSBhIHNsaWdodGx5IGxlc3MgbmljZSBlcnJvclxuICAgIC8vIHdoZW4geW91IERPIHVzZSBhIG11bHRpIGRpdmVydCBhcyBhIGRpdmVydCB0YXJldC5cblxuICAgIGlmIChkaXZlcnRzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3Qgc2luZ2xlRGl2ZXJ0ID0gZGl2ZXJ0c1swXTtcbiAgICBpZiAoc2luZ2xlRGl2ZXJ0IGluc3RhbmNlb2YgVHVubmVsT253YXJkcykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgZGl2ZXJ0ID0gZGl2ZXJ0c1swXSBhcyBEaXZlcnQ7XG4gICAgaWYgKGRpdmVydC5pc1R1bm5lbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpdmVydDtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgRG90U2VwYXJhdGVkRGl2ZXJ0UGF0aENvbXBvbmVudHMgPSAoKTogSWRlbnRpZmllcltdID0+XG4gICAgdGhpcy5JbnRlcmxlYXZlPElkZW50aWZpZXI+KFxuICAgICAgdGhpcy5TcGFjZWQodGhpcy5JZGVudGlmaWVyV2l0aE1ldGFkYXRhKSxcbiAgICAgIHRoaXMuRXhjbHVkZSh0aGlzLlN0cmluZyhcIi5cIikpXG4gICAgKTtcblxuICBwdWJsaWMgcmVhZG9ubHkgUGFyc2VEaXZlcnRBcnJvd09yVHVubmVsT253YXJkcyA9ICgpOiBzdHJpbmcgfCBudWxsID0+IHtcbiAgICBsZXQgbnVtQXJyb3dzOiBudW1iZXIgPSAwO1xuICAgIHdoaWxlICh0aGlzLlBhcnNlU3RyaW5nKFwiLT5cIikgIT09IG51bGwpIHtcbiAgICAgIG51bUFycm93cyArPSAxO1xuICAgIH1cblxuICAgIGlmIChudW1BcnJvd3MgPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0gZWxzZSBpZiAobnVtQXJyb3dzID09PSAxKSB7XG4gICAgICByZXR1cm4gXCItPlwiO1xuICAgIH0gZWxzZSBpZiAobnVtQXJyb3dzID09PSAyKSB7XG4gICAgICByZXR1cm4gXCItPi0+XCI7XG4gICAgfVxuXG4gICAgdGhpcy5FcnJvcihcbiAgICAgIFwiVW5leHBlY3RlZCBudW1iZXIgb2YgYXJyb3dzIGluIGRpdmVydC4gU2hvdWxkIG9ubHkgaGF2ZSAnLT4nIG9yICctPi0+J1wiXG4gICAgKTtcblxuICAgIHJldHVybiBcIi0+LT5cIjtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgUGFyc2VEaXZlcnRBcnJvdyA9ICgpID0+IHRoaXMuUGFyc2VTdHJpbmcoXCItPlwiKTtcblxuICBwdWJsaWMgcmVhZG9ubHkgUGFyc2VUaHJlYWRBcnJvdyA9ICgpID0+IHRoaXMuUGFyc2VTdHJpbmcoXCI8LVwiKTtcblxuICAvKipcbiAgICogRW5kIERpdmVydCBzZWN0aW9uLlxuICAgKi9cblxuICAvKipcbiAgICogQmVnaW4gRXhwcmVzc2lvbnMgc2VjdGlvbi5cbiAgICovXG5cbiAgcHVibGljIF9iaW5hcnlPcGVyYXRvcnM6IEluZml4T3BlcmF0b3JbXSA9IFtdO1xuICBwdWJsaWMgX21heEJpbmFyeU9wTGVuZ3RoOiBudW1iZXIgPSAwO1xuXG4gIHB1YmxpYyByZWFkb25seSBUZW1wRGVjbGFyYXRpb25PckFzc2lnbm1lbnQgPSAoKTogUGFyc2VkT2JqZWN0IHwgbnVsbCA9PiB7XG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICBjb25zdCBpc05ld0RlY2xhcmF0aW9uOiBib29sZWFuID0gdGhpcy5QYXJzZVRlbXBLZXl3b3JkKCk7XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIGxldCB2YXJJZGVudGlmaWVyOiBJZGVudGlmaWVyIHwgbnVsbCA9IG51bGw7XG4gICAgaWYgKGlzTmV3RGVjbGFyYXRpb24pIHtcbiAgICAgIHZhcklkZW50aWZpZXIgPSB0aGlzLkV4cGVjdChcbiAgICAgICAgdGhpcy5JZGVudGlmaWVyV2l0aE1ldGFkYXRhLFxuICAgICAgICBcInZhcmlhYmxlIG5hbWVcIlxuICAgICAgKSBhcyBJZGVudGlmaWVyO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXJJZGVudGlmaWVyID0gdGhpcy5QYXJzZSh0aGlzLklkZW50aWZpZXJXaXRoTWV0YWRhdGEpIGFzIElkZW50aWZpZXI7XG4gICAgfVxuXG4gICAgaWYgKHZhcklkZW50aWZpZXIgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgLy8gKz0gLT1cbiAgICBjb25zdCBpc0luY3JlbWVudDogYm9vbGVhbiA9IHRoaXMuUGFyc2VTdHJpbmcoXCIrXCIpICE9PSBudWxsO1xuICAgIGNvbnN0IGlzRGVjcmVtZW50OiBib29sZWFuID0gdGhpcy5QYXJzZVN0cmluZyhcIi1cIikgIT09IG51bGw7XG5cbiAgICBpZiAoaXNJbmNyZW1lbnQgJiYgaXNEZWNyZW1lbnQpIHtcbiAgICAgIHRoaXMuRXJyb3IoXCJVbmV4cGVjdGVkIHNlcXVlbmNlICcrLSdcIik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuUGFyc2VTdHJpbmcoXCI9XCIpID09PSBudWxsKSB7XG4gICAgICAvLyBEZWZpbml0ZWx5IGluIGFuIGFzc2lnbm1lbnQgZXhwcmVzc2lvbj9cbiAgICAgIGlmIChpc05ld0RlY2xhcmF0aW9uKSB7XG4gICAgICAgIHRoaXMuRXJyb3IoXCJFeHBlY3RlZCAnPSdcIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGFzc2lnbmVkRXhwcmVzc2lvbjogRXhwcmVzc2lvbiA9IHRoaXMuRXhwZWN0KFxuICAgICAgdGhpcy5FeHByZXNzaW9uLFxuICAgICAgXCJ2YWx1ZSBleHByZXNzaW9uIHRvIGJlIGFzc2lnbmVkXCJcbiAgICApIGFzIEV4cHJlc3Npb247XG5cbiAgICBpZiAoaXNJbmNyZW1lbnQgfHwgaXNEZWNyZW1lbnQpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBJbmNEZWNFeHByZXNzaW9uKFxuICAgICAgICB2YXJJZGVudGlmaWVyLFxuICAgICAgICBhc3NpZ25lZEV4cHJlc3Npb24sXG4gICAgICAgIGlzSW5jcmVtZW50XG4gICAgICApO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBuZXcgVmFyaWFibGVBc3NpZ25tZW50KHtcbiAgICAgIHZhcmlhYmxlSWRlbnRpZmllcjogdmFySWRlbnRpZmllcixcbiAgICAgIGFzc2lnbmVkRXhwcmVzc2lvbixcbiAgICAgIGlzVGVtcG9yYXJ5TmV3RGVjbGFyYXRpb246IGlzTmV3RGVjbGFyYXRpb24sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBEaXNhbGxvd0luY3JlbWVudCA9IChleHByOiBQYXJzZWRPYmplY3QpOiB2b2lkID0+IHtcbiAgICBpZiAoZXhwciBpbnN0YW5jZW9mIEluY0RlY0V4cHJlc3Npb24pIHtcbiAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgIFwiQ2FuJ3QgdXNlIGluY3JlbWVudC9kZWNyZW1lbnQgaGVyZS4gSXQgY2FuIG9ubHkgYmUgdXNlZCBvbiBhIH4gbGluZVwiXG4gICAgICApO1xuICAgIH1cbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgUGFyc2VUZW1wS2V5d29yZCA9ICgpID0+IHtcbiAgICBjb25zdCBydWxlSWQgPSB0aGlzLkJlZ2luUnVsZSgpO1xuXG4gICAgaWYgKHRoaXMuUGFyc2UodGhpcy5JZGVudGlmaWVyKSA9PT0gXCJ0ZW1wXCIpIHtcbiAgICAgIHRoaXMuU3VjY2VlZFJ1bGUocnVsZUlkKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMuRmFpbFJ1bGUocnVsZUlkKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IFJldHVyblN0YXRlbWVudCA9ICgpOiBSZXR1cm5UeXBlIHwgbnVsbCA9PiB7XG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICBjb25zdCByZXR1cm5PckRvbmUgPSB0aGlzLlBhcnNlKHRoaXMuSWRlbnRpZmllcik7XG4gICAgaWYgKHJldHVybk9yRG9uZSAhPT0gXCJyZXR1cm5cIikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICBjb25zdCBleHByID0gdGhpcy5QYXJzZSh0aGlzLkV4cHJlc3Npb24pIGFzIEV4cHJlc3Npb247XG5cbiAgICBjb25zdCByZXR1cm5PYmogPSBuZXcgUmV0dXJuVHlwZShleHByKTtcblxuICAgIHJldHVybiByZXR1cm5PYmo7XG4gIH07XG5cbiAgLy8gUHJhdHQgUGFyc2VyXG4gIC8vIGFrYSBcIlRvcCBkb3duIG9wZXJhdG9yIHByZWNlZGVuY2UgcGFyc2VyXCJcbiAgLy8gaHR0cDovL2pvdXJuYWwuc3R1ZmZ3aXRoc3R1ZmYuY29tLzIwMTEvMDMvMTkvcHJhdHQtcGFyc2Vycy1leHByZXNzaW9uLXBhcnNpbmctbWFkZS1lYXN5L1xuICAvLyBBbGdvcml0aG0gb3ZlcnZpZXc6XG4gIC8vIFRoZSB0d28gdHlwZXMgb2YgcHJlY2VkZW5jZSBhcmUgaGFuZGxlZCBpbiB0d28gZGlmZmVyZW50IHdheXM6XG4gIC8vICAgKCgoKGEgLiBiKSAuIGMpIC4gZCkgLiBlKVx0XHRcdCMxXG4gIC8vICAgKGEgLiAoYiAuIChjIC4gKGQgLiBlKSkpKVx0XHRcdCMyXG4gIC8vIFdoZXJlICMxIGlzIGF1dG9tYXRpY2FsbHkgaGFuZGxlZCBieSBzdWNjZXNzaXZlIGxvb3BzIHdpdGhpbiB0aGUgbWFpbiAnd2hpbGUnIGluIHRoaXMgZnVuY3Rpb24sXG4gIC8vIHNvIGxvbmcgYXMgY29udGludWluZyBvcGVyYXRvcnMgaGF2ZSBsb3dlciAob3IgZXF1YWwpIHByZWNlZGVuY2UgKGUuZy4gaW1hZ2luZSBzb21lIHNlcmllcyBvZiBcIipcInMgdGhlbiBcIitcIiBhYm92ZS5cbiAgLy8gLi4uYW5kICMyIGlzIGhhbmRsZWQgYnkgcmVjdXJzaW9uIG9mIHRoZSByaWdodCBoYW5kIHRlcm0gaW4gdGhlIGJpbmFyeSBleHByZXNzaW9uIHBhcnNlci5cbiAgLy8gKHNlZSBsaW5rIGZvciBhZHZpY2Ugb24gaG93IHRvIGV4dGVuZCBmb3IgcG9zdGZpeCBhbmQgbWl4Zml4IG9wZXJhdG9ycylcbiAgcHVibGljIHJlYWRvbmx5IEV4cHJlc3Npb24gPSAoXG4gICAgbWluaW11bVByZWNlZGVuY2U6IG51bWJlciA9IDBcbiAgKTogRXhwcmVzc2lvbiB8IG51bGwgPT4ge1xuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgLy8gRmlyc3QgcGFyc2UgYSB1bmFyeSBleHByZXNzaW9uIGUuZy4gXCItYVwiIG9yIHBhcmV0aGVuc2lzZWQgXCIoMSArIDIpXCJcbiAgICBsZXQgZXhwciA9IHRoaXMuRXhwcmVzc2lvblVuYXJ5KCk7XG4gICAgaWYgKGV4cHIgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgLy8gQXR0ZW1wdCB0byBwYXJzZSAocG9zc2libHkgbXVsdGlwbGUpIGNvbnRpbnVpbmcgaW5maXggZXhwcmVzc2lvbnMgKGUuZy4gMSArIDIgKyAzKVxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBjb25zdCBydWxlSWQgPSB0aGlzLkJlZ2luUnVsZSgpO1xuXG4gICAgICAvLyBPcGVyYXRvclxuICAgICAgY29uc3QgaW5maXhPcCA9IHRoaXMuUGFyc2VJbmZpeE9wZXJhdG9yKCk7XG4gICAgICBpZiAoaW5maXhPcCAhPT0gbnVsbCAmJiBpbmZpeE9wLnByZWNlZGVuY2UgPiBtaW5pbXVtUHJlY2VkZW5jZSkge1xuICAgICAgICAvLyBFeHBlY3QgcmlnaHQgaGFuZCBzaWRlIG9mIG9wZXJhdG9yXG4gICAgICAgIGNvbnN0IGV4cGVjdGF0aW9uTWVzc2FnZSA9IGByaWdodCBzaWRlIG9mICcke2luZml4T3AudHlwZX0nIGV4cHJlc3Npb25gO1xuICAgICAgICBjb25zdCBtdWx0aWFyeUV4cHIgPSB0aGlzLkV4cGVjdChcbiAgICAgICAgICAoKSA9PiB0aGlzLkV4cHJlc3Npb25JbmZpeFJpZ2h0KGV4cHIsIGluZml4T3ApLFxuICAgICAgICAgIGV4cGVjdGF0aW9uTWVzc2FnZVxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChtdWx0aWFyeUV4cHIgPT09IG51bGwpIHtcbiAgICAgICAgICAvLyBGYWlsIGZvciBvcGVyYXRvciBhbmQgcmlnaHQtaGFuZCBzaWRlIG9mIG11bHRpYXJ5IGV4cHJlc3Npb25cbiAgICAgICAgICB0aGlzLkZhaWxSdWxlKHJ1bGVJZCk7XG5cbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cHIgPSB0aGlzLlN1Y2NlZWRSdWxlKHJ1bGVJZCwgbXVsdGlhcnlFeHByKSBhcyBFeHByZXNzaW9uO1xuXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICB0aGlzLkZhaWxSdWxlKHJ1bGVJZCk7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIHJldHVybiBleHByO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBFeHByZXNzaW9uVW5hcnkgPSAoKTogRXhwcmVzc2lvbiB8IG51bGwgPT4ge1xuICAgIC8vIERpdmVydCB0YXJnZXQgaXMgYSBzcGVjaWFsIGNhc2UgLSBpdCBjYW4ndCBoYXZlIGFueSBvdGhlciBvcGVyYXRvcnNcbiAgICAvLyBhcHBsaWVkIHRvIGl0LCBhbmQgd2UgYWxzbyB3YW50IHRvIGNoZWNrIGZvciBpdCBmaXJzdCBzbyB0aGF0IHdlIGRvbid0XG4gICAgLy8gY29uZnVzZSBcIi0+XCIgZm9yIHN1YnRyYWN0aW9uLlxuICAgIGNvbnN0IGRpdmVydFRhcmdldCA9IHRoaXMuUGFyc2UodGhpcy5FeHByZXNzaW9uRGl2ZXJ0VGFyZ2V0KSBhcyBFeHByZXNzaW9uO1xuICAgIGlmIChkaXZlcnRUYXJnZXQgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiBkaXZlcnRUYXJnZXQ7XG4gICAgfVxuXG4gICAgbGV0IHByZWZpeE9wOiBzdHJpbmcgPSB0aGlzLk9uZU9mKFtcbiAgICAgIHRoaXMuU3RyaW5nKFwiLVwiKSxcbiAgICAgIHRoaXMuU3RyaW5nKFwiIVwiKSxcbiAgICBdKSBhcyBzdHJpbmc7XG5cbiAgICAvLyBEb24ndCBwYXJzZSBsaWtlIHRoZSBzdHJpbmcgcnVsZXMgYWJvdmUsIGluIGNhc2UgaXRzIGFjdHVhbGx5XG4gICAgLy8gYSB2YXJpYWJsZSB0aGF0IHNpbXBseSBzdGFydHMgd2l0aCBcIm5vdFwiLCBlLmcuIFwibm90YWJsZVwiLlxuICAgIC8vIFRoaXMgcnVsZSB1c2VzIHRoZSBJZGVudGlmaWVyIHJ1bGUsIHdoaWNoIHdpbGwgc2NhbiBhcyBtdWNoIHRleHRcbiAgICAvLyBhcyBwb3NzaWJsZSBiZWZvcmUgcmV0dXJuaW5nLlxuICAgIGlmIChwcmVmaXhPcCA9PT0gbnVsbCkge1xuICAgICAgcHJlZml4T3AgPSB0aGlzLlBhcnNlKHRoaXMuRXhwcmVzc2lvbk5vdCkgYXMgc3RyaW5nO1xuICAgIH1cblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgLy8gLSBTaW5jZSB3ZSBhbGxvdyBudW1iZXJzIGF0IHRoZSBzdGFydCBvZiB2YXJpYWJsZSBuYW1lcywgdmFyaWFibGUgbmFtZXMgYXJlIGNoZWNrZWQgYmVmb3JlIGxpdGVyYWxzXG4gICAgLy8gLSBGdW5jdGlvbiBjYWxscyBiZWZvcmUgdmFyaWFibGUgbmFtZXMgaW4gY2FzZSB3ZSBzZWUgcGFyZW50aGVzZXNcbiAgICBsZXQgZXhwciA9IHRoaXMuT25lT2YoW1xuICAgICAgdGhpcy5FeHByZXNzaW9uTGlzdCxcbiAgICAgIHRoaXMuRXhwcmVzc2lvblBhcmVuLFxuICAgICAgdGhpcy5FeHByZXNzaW9uRnVuY3Rpb25DYWxsLFxuICAgICAgdGhpcy5FeHByZXNzaW9uVmFyaWFibGVOYW1lLFxuICAgICAgdGhpcy5FeHByZXNzaW9uTGl0ZXJhbCxcbiAgICBdKSBhcyBFeHByZXNzaW9uIHwgbnVsbDtcblxuICAgIC8vIE9ubHkgcmVjdXJzZSBpbW1lZGlhdGVseSBpZiB3ZSBoYXZlIG9uZSBvZiB0aGUgKHVzdWFsbHkgb3B0aW9uYWwpIHVuYXJ5IG9wc1xuICAgIGlmIChleHByID09PSBudWxsICYmIHByZWZpeE9wICE9PSBudWxsKSB7XG4gICAgICBleHByID0gdGhpcy5FeHByZXNzaW9uVW5hcnkoKTtcbiAgICB9XG5cbiAgICBpZiAoZXhwciA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIGlmIChwcmVmaXhPcCAhPT0gbnVsbCkge1xuICAgICAgZXhwciA9IFVuYXJ5RXhwcmVzc2lvbi5XaXRoSW5uZXIoZXhwciwgcHJlZml4T3ApIGFzIEV4cHJlc3Npb247XG4gICAgfVxuXG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICBjb25zdCBwb3N0Zml4T3AgPSB0aGlzLk9uZU9mKFt0aGlzLlN0cmluZyhcIisrXCIpLCB0aGlzLlN0cmluZyhcIi0tXCIpXSk7XG5cbiAgICBpZiAocG9zdGZpeE9wICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBpc0luYzogYm9vbGVhbiA9IHBvc3RmaXhPcCA9PT0gXCIrK1wiO1xuXG4gICAgICBpZiAoIShleHByIGluc3RhbmNlb2YgVmFyaWFibGVSZWZlcmVuY2UpKSB7XG4gICAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgICAgYGNhbiBvbmx5IGluY3JlbWVudCBhbmQgZGVjcmVtZW50IHZhcmlhYmxlcywgYnV0IHNhdyAnJHtleHByfScuYFxuICAgICAgICApO1xuXG4gICAgICAgIC8vIERyb3AgZG93biBhbmQgc3VjY2VlZCB3aXRob3V0IHRoZSBpbmNyZW1lbnQgYWZ0ZXIgcmVwb3J0aW5nIGVycm9yXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB2YXJSZWYgPSBleHByIGFzIFZhcmlhYmxlUmVmZXJlbmNlO1xuICAgICAgICBleHByID0gbmV3IEluY0RlY0V4cHJlc3Npb24odmFyUmVmLmlkZW50aWZpZXIsIGlzSW5jKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZXhwcjtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgRXhwcmVzc2lvbk5vdCA9ICgpOiBzdHJpbmcgfCBudWxsID0+IHtcbiAgICBjb25zdCBpZCA9IHRoaXMuSWRlbnRpZmllcigpO1xuICAgIGlmIChpZCA9PT0gXCJub3RcIikge1xuICAgICAgcmV0dXJuIGlkO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBFeHByZXNzaW9uTGl0ZXJhbCA9ICgpOiBFeHByZXNzaW9uID0+XG4gICAgdGhpcy5PbmVPZihbXG4gICAgICB0aGlzLkV4cHJlc3Npb25GbG9hdCxcbiAgICAgIHRoaXMuRXhwcmVzc2lvbkludCxcbiAgICAgIHRoaXMuRXhwcmVzc2lvbkJvb2wsXG4gICAgICB0aGlzLkV4cHJlc3Npb25TdHJpbmcsXG4gICAgXSkgYXMgRXhwcmVzc2lvbjtcblxuICBwdWJsaWMgcmVhZG9ubHkgRXhwcmVzc2lvbkRpdmVydFRhcmdldCA9ICgpOiBFeHByZXNzaW9uIHwgbnVsbCA9PiB7XG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICBjb25zdCBkaXZlcnQgPSB0aGlzLlBhcnNlKHRoaXMuU2luZ2xlRGl2ZXJ0KSBhcyBEaXZlcnQ7XG4gICAgaWYgKCFkaXZlcnQgfHwgKGRpdmVydCAmJiBkaXZlcnQuaXNUaHJlYWQpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIHJldHVybiBuZXcgRGl2ZXJ0VGFyZ2V0KGRpdmVydCk7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IEV4cHJlc3Npb25JbnQgPSAoKTogTnVtYmVyRXhwcmVzc2lvbiB8IG51bGwgPT4ge1xuICAgIGNvbnN0IGludE9yTnVsbDogbnVtYmVyID0gdGhpcy5QYXJzZUludCgpIGFzIG51bWJlcjtcbiAgICBpZiAoaW50T3JOdWxsID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IE51bWJlckV4cHJlc3Npb24oaW50T3JOdWxsLCBcImludFwiKTtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgRXhwcmVzc2lvbkZsb2F0ID0gKCk6IE51bWJlckV4cHJlc3Npb24gfCBudWxsID0+IHtcbiAgICBjb25zdCBmbG9hdE9yTnVsbDogbnVtYmVyID0gdGhpcy5QYXJzZUZsb2F0KCkgYXMgbnVtYmVyO1xuICAgIGlmIChmbG9hdE9yTnVsbCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBOdW1iZXJFeHByZXNzaW9uKGZsb2F0T3JOdWxsLCBcImZsb2F0XCIpO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBFeHByZXNzaW9uU3RyaW5nID0gKCk6IFN0cmluZ0V4cHJlc3Npb24gfCBudWxsID0+IHtcbiAgICBjb25zdCBvcGVuUXVvdGUgPSB0aGlzLlBhcnNlU3RyaW5nKCdcIicpO1xuICAgIGlmIChvcGVuUXVvdGUgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIFNldCBjdXN0b20gcGFyc2VyIHN0YXRlIGZsYWcgc28gdGhhdCB3aXRoaW4gdGhlIHRleHQgcGFyc2VyLFxuICAgIC8vIGl0IGtub3dzIHRvIHRyZWF0IHRoZSBxdW90ZSBjaGFyYWN0ZXIgKFwiKSBhcyBhbiBlbmQgY2hhcmFjdGVyXG4gICAgdGhpcy5wYXJzaW5nU3RyaW5nRXhwcmVzc2lvbiA9IHRydWU7XG5cbiAgICBsZXQgdGV4dEFuZExvZ2ljOiBQYXJzZWRPYmplY3RbXSA9IHRoaXMuUGFyc2UoXG4gICAgICB0aGlzLk1peGVkVGV4dEFuZExvZ2ljXG4gICAgKSBhcyBQYXJzZWRPYmplY3RbXTtcblxuICAgIHRoaXMuRXhwZWN0KHRoaXMuU3RyaW5nKCdcIicpLCBcImNsb3NlIHF1b3RlIGZvciBzdHJpbmcgZXhwcmVzc2lvblwiKTtcblxuICAgIHRoaXMucGFyc2luZ1N0cmluZ0V4cHJlc3Npb24gPSBmYWxzZTtcblxuICAgIGlmICh0ZXh0QW5kTG9naWMgPT09IG51bGwpIHtcbiAgICAgIHRleHRBbmRMb2dpYyA9IFtuZXcgVGV4dChcIlwiKV07XG4gICAgfSBlbHNlIGlmICh0ZXh0QW5kTG9naWMuZmluZCgoYykgPT4gYyBpbnN0YW5jZW9mIERpdmVydCkpIHtcbiAgICAgIHRoaXMuRXJyb3IoXCJTdHJpbmcgZXhwcmVzc2lvbnMgY2Fubm90IGNvbnRhaW4gZGl2ZXJ0cyAoLT4pXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgU3RyaW5nRXhwcmVzc2lvbih0ZXh0QW5kTG9naWMpO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBFeHByZXNzaW9uQm9vbCA9ICgpOiBOdW1iZXJFeHByZXNzaW9uIHwgbnVsbCA9PiB7XG4gICAgY29uc3QgaWQgPSB0aGlzLlBhcnNlKHRoaXMuSWRlbnRpZmllcik7XG4gICAgaWYgKGlkID09PSBcInRydWVcIikge1xuICAgICAgcmV0dXJuIG5ldyBOdW1iZXJFeHByZXNzaW9uKHRydWUsIFwiYm9vbFwiKTtcbiAgICB9IGVsc2UgaWYgKGlkID09PSBcImZhbHNlXCIpIHtcbiAgICAgIHJldHVybiBuZXcgTnVtYmVyRXhwcmVzc2lvbihmYWxzZSwgXCJib29sXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBFeHByZXNzaW9uRnVuY3Rpb25DYWxsID0gKCk6IEV4cHJlc3Npb24gfCBudWxsID0+IHtcbiAgICBjb25zdCBpZGVuID0gdGhpcy5QYXJzZSh0aGlzLklkZW50aWZpZXJXaXRoTWV0YWRhdGEpO1xuICAgIGlmIChpZGVuID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIGNvbnN0IGFyZ3MgPSB0aGlzLlBhcnNlKFxuICAgICAgdGhpcy5FeHByZXNzaW9uRnVuY3Rpb25DYWxsQXJndW1lbnRzXG4gICAgKSBhcyBFeHByZXNzaW9uW107XG4gICAgaWYgKGFyZ3MgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRnVuY3Rpb25DYWxsKGlkZW4gYXMgSWRlbnRpZmllciwgYXJncyk7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IEV4cHJlc3Npb25GdW5jdGlvbkNhbGxBcmd1bWVudHMgPSAoKTogRXhwcmVzc2lvbltdIHwgbnVsbCA9PiB7XG4gICAgaWYgKHRoaXMuUGFyc2VTdHJpbmcoXCIoXCIpID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBcIkV4Y2x1ZGVcIiByZXF1aXJlcyB0aGUgcnVsZSB0byBzdWNjZWVkLCBidXQgY2F1c2VzIGFjdHVhbCBjb21tYSBzdHJpbmcgdG8gYmUgZXhjbHVkZWQgZnJvbSB0aGUgbGlzdCBvZiByZXN1bHRzXG4gICAgY29uc3QgY29tbWFzOiBQYXJzZVJ1bGUgPSB0aGlzLkV4Y2x1ZGUodGhpcy5TdHJpbmcoXCIsXCIpKTtcbiAgICBsZXQgYXJncyA9IHRoaXMuSW50ZXJsZWF2ZTxFeHByZXNzaW9uPih0aGlzLkV4cHJlc3Npb24sIGNvbW1hcyk7XG4gICAgaWYgKGFyZ3MgPT09IG51bGwpIHtcbiAgICAgIGFyZ3MgPSBbXTtcbiAgICB9XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIHRoaXMuRXhwZWN0KHRoaXMuU3RyaW5nKFwiKVwiKSwgXCJjbG9zaW5nICcpJyBmb3IgZnVuY3Rpb24gY2FsbFwiKTtcblxuICAgIHJldHVybiBhcmdzO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBFeHByZXNzaW9uVmFyaWFibGVOYW1lID0gKCk6IEV4cHJlc3Npb24gfCBudWxsID0+IHtcbiAgICBjb25zdCBwYXRoID0gdGhpcy5JbnRlcmxlYXZlPElkZW50aWZpZXI+KFxuICAgICAgdGhpcy5JZGVudGlmaWVyV2l0aE1ldGFkYXRhLFxuICAgICAgdGhpcy5FeGNsdWRlKHRoaXMuU3BhY2VkKHRoaXMuU3RyaW5nKFwiLlwiKSkpXG4gICAgKTtcblxuICAgIGlmIChwYXRoID09PSBudWxsIHx8IFN0b3J5LklzUmVzZXJ2ZWRLZXl3b3JkKHBhdGhbMF0ubmFtZSkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgVmFyaWFibGVSZWZlcmVuY2UocGF0aCk7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IEV4cHJlc3Npb25QYXJlbiA9ICgpOiBFeHByZXNzaW9uIHwgbnVsbCA9PiB7XG4gICAgaWYgKHRoaXMuUGFyc2VTdHJpbmcoXCIoXCIpID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBpbm5lckV4cHIgPSB0aGlzLlBhcnNlKHRoaXMuRXhwcmVzc2lvbikgYXMgRXhwcmVzc2lvbjtcbiAgICBpZiAoaW5uZXJFeHByID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIHRoaXMuRXhwZWN0KHRoaXMuU3RyaW5nKFwiKVwiKSwgXCJjbG9zaW5nIHBhcmVudGhlc2lzICcpJyBmb3IgZXhwcmVzc2lvblwiKTtcblxuICAgIHJldHVybiBpbm5lckV4cHI7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IEV4cHJlc3Npb25JbmZpeFJpZ2h0ID0gKFxuICAgIGxlZnQ6IEV4cHJlc3Npb24gfCBudWxsLFxuICAgIG9wOiBJbmZpeE9wZXJhdG9yXG4gICkgPT4ge1xuICAgIGlmICghbGVmdCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICBjb25zdCByaWdodCA9IHRoaXMuUGFyc2UoKCkgPT5cbiAgICAgIHRoaXMuRXhwcmVzc2lvbihvcC5wcmVjZWRlbmNlKVxuICAgICkgYXMgRXhwcmVzc2lvbjtcbiAgICBpZiAocmlnaHQpIHtcbiAgICAgIC8vIFdlIGFzc3VtZSB0aGF0IHRoZSBjaGFyYWN0ZXIgd2UgdXNlIGZvciB0aGUgb3BlcmF0b3IncyB0eXBlIGlzIHRoZSBzYW1lXG4gICAgICAvLyBhcyB0aGF0IHVzZWQgaW50ZXJuYWxseSBieSBlLmcuIFJ1bnRpbWUuRXhwcmVzc2lvbi5BZGQsIFJ1bnRpbWUuRXhwcmVzc2lvbi5NdWx0aXBseSBldGNcbiAgICAgIGNvbnN0IGV4cHIgPSBuZXcgQmluYXJ5RXhwcmVzc2lvbihsZWZ0LCByaWdodCwgb3AudHlwZSk7XG4gICAgICByZXR1cm4gZXhwcjtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBwcml2YXRlIHJlYWRvbmx5IFBhcnNlSW5maXhPcGVyYXRvciA9ICgpOiBJbmZpeE9wZXJhdG9yIHwgbnVsbCA9PiB7XG4gICAgZm9yIChjb25zdCBvcCBvZiB0aGlzLl9iaW5hcnlPcGVyYXRvcnMpIHtcbiAgICAgIGNvbnN0IHJ1bGVJZDogbnVtYmVyID0gdGhpcy5CZWdpblJ1bGUoKTtcblxuICAgICAgaWYgKHRoaXMuUGFyc2VTdHJpbmcob3AudHlwZSkgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKG9wLnJlcXVpcmVXaGl0ZXNwYWNlKSB7XG4gICAgICAgICAgaWYgKHRoaXMuV2hpdGVzcGFjZSgpID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLkZhaWxSdWxlKHJ1bGVJZCk7XG5cbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLlN1Y2NlZWRSdWxlKHJ1bGVJZCwgb3ApIGFzIEluZml4T3BlcmF0b3I7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuRmFpbFJ1bGUocnVsZUlkKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgRXhwcmVzc2lvbkxpc3QgPSAoKTogTGlzdCB8IG51bGwgPT4ge1xuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgaWYgKHRoaXMuUGFyc2VTdHJpbmcoXCIoXCIpID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIC8vIFdoZW4gbGlzdCBoYXM6XG4gICAgLy8gIC0gMCBlbGVtZW50cyAobnVsbCBsaXN0KSAtIHRoaXMgaXMgb2theSwgaXQncyBhbiBlbXB0eSBsaXN0OiBcIigpXCJcbiAgICAvLyAgLSAxIGVsZW1lbnQgLSBpdCBjb3VsZCBiZSBjb25mdXNlZCBmb3IgYSBzaW5nbGUgbm9uLWxpc3QgcmVsYXRlZFxuICAgIC8vICAgIGlkZW50aWZpZXIgZXhwcmVzc2lvbiBpbiBicmFja2V0cywgYnV0IHRoaXMgaXMgYSB1c2VsZXNzIHRoaW5nXG4gICAgLy8gICAgdG8gZG8sIHNvIHdlIHJlc2VydmUgdGhhdCBzeW50YXggZm9yIGEgbGlzdCB3aXRoIG9uZSBpdGVtLlxuICAgIC8vICAtIDIgb3IgbW9yZSBlbGVtZW50cyAtIG5vcm1hbCFcbiAgICBjb25zdCBtZW1iZXJOYW1lczogSWRlbnRpZmllcltdID0gdGhpcy5TZXBhcmF0ZWRMaXN0KFxuICAgICAgdGhpcy5MaXN0TWVtYmVyLFxuICAgICAgdGhpcy5TcGFjZWQodGhpcy5TdHJpbmcoXCIsXCIpKVxuICAgICkgYXMgSWRlbnRpZmllcltdO1xuXG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICAvLyBNYXkgaGF2ZSBmYWlsZWQgdG8gcGFyc2UgdGhlIGlubmVyIGxpc3QgLSB0aGUgcGFyZW50aGVzZXMgbWF5XG4gICAgLy8gYmUgZm9yIGEgbm9ybWFsIGV4cHJlc3Npb25cbiAgICBpZiAodGhpcy5QYXJzZVN0cmluZyhcIilcIikgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IExpc3QobWVtYmVyTmFtZXMpO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBMaXN0TWVtYmVyID0gKCk6IElkZW50aWZpZXIgfCBudWxsID0+IHtcbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIGxldCBpZGVudGlmaWVyOiBJZGVudGlmaWVyID0gdGhpcy5QYXJzZShcbiAgICAgIHRoaXMuSWRlbnRpZmllcldpdGhNZXRhZGF0YVxuICAgICkgYXMgSWRlbnRpZmllcjtcbiAgICBpZiAoaWRlbnRpZmllciA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgZG90ID0gdGhpcy5QYXJzZVN0cmluZyhcIi5cIik7XG4gICAgaWYgKGRvdCAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgaWRlbnRpZmllcjI6IElkZW50aWZpZXIgPSB0aGlzLkV4cGVjdChcbiAgICAgICAgdGhpcy5JZGVudGlmaWVyV2l0aE1ldGFkYXRhLFxuICAgICAgICBgZWxlbWVudCBuYW1lIHdpdGhpbiB0aGUgc2V0ICR7aWRlbnRpZmllcn1gXG4gICAgICApIGFzIElkZW50aWZpZXI7XG5cbiAgICAgIGlkZW50aWZpZXIubmFtZSArPSBgLiR7aWRlbnRpZmllcjI/Lm5hbWV9YDtcbiAgICB9XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIHJldHVybiBpZGVudGlmaWVyO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBSZWdpc3RlckV4cHJlc3Npb25PcGVyYXRvcnMgPSAoKSA9PiB7XG4gICAgLy8gVGhlc2Ugd2lsbCBiZSB0cmllZCBpbiBvcmRlciwgc28gd2UgbmVlZCBcIjw9XCIgYmVmb3JlIFwiPFwiXG4gICAgLy8gZm9yIGNvcnJlY3RuZXNzXG5cbiAgICB0aGlzLlJlZ2lzdGVyQmluYXJ5T3BlcmF0b3IoXCImJlwiLCAxKTtcbiAgICB0aGlzLlJlZ2lzdGVyQmluYXJ5T3BlcmF0b3IoXCJ8fFwiLCAxKTtcbiAgICB0aGlzLlJlZ2lzdGVyQmluYXJ5T3BlcmF0b3IoXCJhbmRcIiwgMSwgdHJ1ZSk7XG4gICAgdGhpcy5SZWdpc3RlckJpbmFyeU9wZXJhdG9yKFwib3JcIiwgMSwgdHJ1ZSk7XG4gICAgdGhpcy5SZWdpc3RlckJpbmFyeU9wZXJhdG9yKFwiPT1cIiwgMik7XG4gICAgdGhpcy5SZWdpc3RlckJpbmFyeU9wZXJhdG9yKFwiPj1cIiwgMik7XG4gICAgdGhpcy5SZWdpc3RlckJpbmFyeU9wZXJhdG9yKFwiPD1cIiwgMik7XG4gICAgdGhpcy5SZWdpc3RlckJpbmFyeU9wZXJhdG9yKFwiPFwiLCAyKTtcbiAgICB0aGlzLlJlZ2lzdGVyQmluYXJ5T3BlcmF0b3IoXCI+XCIsIDIpO1xuICAgIHRoaXMuUmVnaXN0ZXJCaW5hcnlPcGVyYXRvcihcIiE9XCIsIDIpO1xuXG4gICAgLy8gKGFwcGxlcywgb3JhbmdlcykgKyBjYWJiYWdlcyBoYXMgKG9yYW5nZXMsIGNhYmJhZ2VzKSA9PT0gdHJ1ZVxuICAgIHRoaXMuUmVnaXN0ZXJCaW5hcnlPcGVyYXRvcihcIj9cIiwgMyk7XG4gICAgdGhpcy5SZWdpc3RlckJpbmFyeU9wZXJhdG9yKFwiaGFzXCIsIDMsIHRydWUpO1xuICAgIHRoaXMuUmVnaXN0ZXJCaW5hcnlPcGVyYXRvcihcIiE/XCIsIDMpO1xuICAgIHRoaXMuUmVnaXN0ZXJCaW5hcnlPcGVyYXRvcihcImhhc250XCIsIDMsIHRydWUpO1xuICAgIHRoaXMuUmVnaXN0ZXJCaW5hcnlPcGVyYXRvcihcIl5cIiwgMyk7XG5cbiAgICB0aGlzLlJlZ2lzdGVyQmluYXJ5T3BlcmF0b3IoXCIrXCIsIDQpO1xuICAgIHRoaXMuUmVnaXN0ZXJCaW5hcnlPcGVyYXRvcihcIi1cIiwgNSk7XG4gICAgdGhpcy5SZWdpc3RlckJpbmFyeU9wZXJhdG9yKFwiKlwiLCA2KTtcbiAgICB0aGlzLlJlZ2lzdGVyQmluYXJ5T3BlcmF0b3IoXCIvXCIsIDcpO1xuXG4gICAgdGhpcy5SZWdpc3RlckJpbmFyeU9wZXJhdG9yKFwiJVwiLCA4KTtcbiAgICB0aGlzLlJlZ2lzdGVyQmluYXJ5T3BlcmF0b3IoXCJtb2RcIiwgOCwgdHJ1ZSk7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IFJlZ2lzdGVyQmluYXJ5T3BlcmF0b3IgPSAoXG4gICAgb3A6IHN0cmluZyxcbiAgICBwcmVjZWRlbmNlOiBudW1iZXIsXG4gICAgcmVxdWlyZVdoaXRlc3BhY2U6IGJvb2xlYW4gPSBmYWxzZVxuICApOiB2b2lkID0+IHtcbiAgICBjb25zdCBpbmZpeCA9IG5ldyBJbmZpeE9wZXJhdG9yKG9wLCBwcmVjZWRlbmNlLCByZXF1aXJlV2hpdGVzcGFjZSk7XG4gICAgdGhpcy5fYmluYXJ5T3BlcmF0b3JzLnB1c2goaW5maXgpO1xuICAgIHRoaXMuX21heEJpbmFyeU9wTGVuZ3RoID0gTWF0aC5tYXgodGhpcy5fbWF4QmluYXJ5T3BMZW5ndGgsIG9wLmxlbmd0aCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEVuZCBFeHByZXNzaW9ucyBzZWN0aW9uLlxuICAgKi9cblxuICAvKipcbiAgICogQmVnaW4gSW5jbHVkZSBzZWN0aW9uLlxuICAgKi9cblxuICBwcml2YXRlIF9yb290UGFyc2VyOiBJbmtQYXJzZXI7XG4gIHByaXZhdGUgX29wZW5GaWxlbmFtZXM6IHN0cmluZ1tdID0gW107XG5cbiAgcHVibGljIHJlYWRvbmx5IEluY2x1ZGVTdGF0ZW1lbnQgPSAoKSA9PiB7XG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICBpZiAodGhpcy5QYXJzZVN0cmluZyhcIklOQ0xVREVcIikgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgbGV0IGZpbGVuYW1lOiBzdHJpbmcgPSB0aGlzLkV4cGVjdChcbiAgICAgICgpID0+IHRoaXMuUGFyc2VVbnRpbENoYXJhY3RlcnNGcm9tU3RyaW5nKFwiXFxuXFxyXCIpLFxuICAgICAgXCJmaWxlbmFtZSBmb3IgaW5jbHVkZSBzdGF0ZW1lbnRcIlxuICAgICkgYXMgc3RyaW5nO1xuXG4gICAgZmlsZW5hbWUgPSBmaWxlbmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoL1sgXFx0XSskL2cpLCBcIlwiKTtcblxuICAgIC8vIFdvcmtpbmcgZGlyZWN0b3J5IHNob3VsZCBhbHJlYWR5IGhhdmUgYmVlbiBzZXQgdXAgcmVsYXRpdmUgdG8gdGhlIHJvb3QgaW5rIGZpbGUuXG4gICAgY29uc3QgZnVsbEZpbGVuYW1lID0gdGhpcy5maWxlSGFuZGxlci5SZXNvbHZlSW5rRmlsZW5hbWUoZmlsZW5hbWUpO1xuXG4gICAgaWYgKHRoaXMuRmlsZW5hbWVJc0FscmVhZHlPcGVuKGZ1bGxGaWxlbmFtZSkpIHtcbiAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgIGBSZWN1cnNpdmUgSU5DTFVERSBkZXRlY3RlZDogJyR7ZnVsbEZpbGVuYW1lfScgaXMgYWxyZWFkeSBvcGVuLmBcbiAgICAgICk7XG4gICAgICB0aGlzLlBhcnNlVW50aWxDaGFyYWN0ZXJzRnJvbVN0cmluZyhcIlxcclxcblwiKTtcbiAgICAgIHJldHVybiBuZXcgSW5jbHVkZWRGaWxlKG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLkFkZE9wZW5GaWxlbmFtZShmdWxsRmlsZW5hbWUpO1xuICAgIH1cblxuICAgIGxldCBpbmNsdWRlZFN0b3J5OiBTdG9yeSB8IG51bGwgPSBudWxsO1xuICAgIGxldCBpbmNsdWRlZFN0cmluZzogc3RyaW5nID0gXCJcIjtcbiAgICB0cnkge1xuICAgICAgaW5jbHVkZWRTdHJpbmcgPVxuICAgICAgICB0aGlzLl9yb290UGFyc2VyLmZpbGVIYW5kbGVyLkxvYWRJbmtGaWxlQ29udGVudHMoZnVsbEZpbGVuYW1lKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRoaXMuRXJyb3IoYEZhaWxlZCB0byBsb2FkOiAnJHtmaWxlbmFtZX0nLlxcbkVycm9yOiR7ZXJyfWApO1xuICAgIH1cblxuICAgIGlmIChpbmNsdWRlZFN0cmluZyAhPSBudWxsKSB7XG4gICAgICBjb25zdCBwYXJzZXI6IElua1BhcnNlciA9IG5ldyBJbmtQYXJzZXIoXG4gICAgICAgIGluY2x1ZGVkU3RyaW5nLFxuICAgICAgICBmaWxlbmFtZSxcbiAgICAgICAgdGhpcy5fZXh0ZXJuYWxFcnJvckhhbmRsZXIsXG4gICAgICAgIHRoaXMuX3Jvb3RQYXJzZXIsXG4gICAgICAgIHRoaXMuZmlsZUhhbmRsZXJcbiAgICAgICk7XG5cbiAgICAgIGluY2x1ZGVkU3RvcnkgPSBwYXJzZXIuUGFyc2VTdG9yeSgpO1xuICAgIH1cblxuICAgIHRoaXMuUmVtb3ZlT3BlbkZpbGVuYW1lKGZ1bGxGaWxlbmFtZSk7XG5cbiAgICAvLyBSZXR1cm4gdmFsaWQgSW5jbHVkZWRGaWxlIG9iamVjdCBldmVuIGlmIHRoZXJlIHdlcmUgZXJyb3JzIHdoZW4gcGFyc2luZy5cbiAgICAvLyBXZSBkb24ndCB3YW50IHRvIGF0dGVtcHQgdG8gcmUtcGFyc2UgdGhlIGluY2x1ZGUgbGluZSBhcyBzb21ldGhpbmcgZWxzZSxcbiAgICAvLyBhbmQgd2Ugd2FudCB0byBpbmNsdWRlIHRoZSBiaXRzIHRoYXQgKmFyZSogdmFsaWQsIHNvIHdlIGRvbid0IGdlbmVyYXRlXG4gICAgLy8gbW9yZSBlcnJvcnMgdGhhbiBuZWNlc3NhcnkuXG4gICAgcmV0dXJuIG5ldyBJbmNsdWRlZEZpbGUoaW5jbHVkZWRTdG9yeSk7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IEZpbGVuYW1lSXNBbHJlYWR5T3BlbiA9IChmdWxsRmlsZW5hbWU6IHN0cmluZyk6IGJvb2xlYW4gPT5cbiAgICB0aGlzLl9yb290UGFyc2VyLl9vcGVuRmlsZW5hbWVzLmluY2x1ZGVzKGZ1bGxGaWxlbmFtZSk7XG5cbiAgcHVibGljIHJlYWRvbmx5IEFkZE9wZW5GaWxlbmFtZSA9IChmdWxsRmlsZW5hbWU6IHN0cmluZyk6IHZvaWQgPT4ge1xuICAgIHRoaXMuX3Jvb3RQYXJzZXIuX29wZW5GaWxlbmFtZXMucHVzaChmdWxsRmlsZW5hbWUpO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBSZW1vdmVPcGVuRmlsZW5hbWUgPSAoZnVsbEZpbGVuYW1lOiBzdHJpbmcpID0+IHtcbiAgICB0aGlzLl9yb290UGFyc2VyLl9vcGVuRmlsZW5hbWVzLnNwbGljZShcbiAgICAgIHRoaXMuX3Jvb3RQYXJzZXIuX29wZW5GaWxlbmFtZXMuaW5kZXhPZihmdWxsRmlsZW5hbWUpLFxuICAgICAgMVxuICAgICk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEVuZCBJbmNsdWRlIHNlY3Rpb24uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBCZWdpbiBLbm90IHNlY3Rpb24uXG4gICAqL1xuXG4gIHB1YmxpYyByZWFkb25seSBLbm90RGVmaW5pdGlvbiA9ICgpOiBLbm90IHwgbnVsbCA9PiB7XG4gICAgY29uc3Qga25vdERlY2w6IEZsb3dEZWNsID0gdGhpcy5QYXJzZSh0aGlzLktub3REZWNsYXJhdGlvbikgYXMgRmxvd0RlY2w7XG4gICAgaWYgKGtub3REZWNsID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLkV4cGVjdChcbiAgICAgIHRoaXMuRW5kT2ZMaW5lLFxuICAgICAgXCJlbmQgb2YgbGluZSBhZnRlciBrbm90IG5hbWUgZGVmaW5pdGlvblwiLFxuICAgICAgdGhpcy5Ta2lwVG9OZXh0TGluZVxuICAgICk7XG5cbiAgICBjb25zdCBpbm5lcktub3RTdGF0ZW1lbnRzOiBQYXJzZVJ1bGUgPSAoKTogUGFyc2VkT2JqZWN0W10gPT5cbiAgICAgIHRoaXMuU3RhdGVtZW50c0F0TGV2ZWwoU3RhdGVtZW50TGV2ZWwuS25vdCk7XG5cbiAgICBjb25zdCBjb250ZW50ID0gdGhpcy5FeHBlY3QoXG4gICAgICBpbm5lcktub3RTdGF0ZW1lbnRzLFxuICAgICAgXCJhdCBsZWFzdCBvbmUgbGluZSB3aXRoaW4gdGhlIGtub3RcIixcbiAgICAgIHRoaXMuS25vdFN0aXRjaE5vQ29udGVudFJlY292ZXJ5UnVsZVxuICAgICkgYXMgUGFyc2VkT2JqZWN0W107XG5cbiAgICByZXR1cm4gbmV3IEtub3Qoa25vdERlY2wubmFtZSwgY29udGVudCwga25vdERlY2wuYXJncywga25vdERlY2wuaXNGdW5jdGlvbik7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IEtub3REZWNsYXJhdGlvbiA9ICgpOiBGbG93RGVjbCB8IG51bGwgPT4ge1xuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgaWYgKHRoaXMuS25vdFRpdGxlRXF1YWxzKCkgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgY29uc3QgaWRlbnRpZmllcjogSWRlbnRpZmllciA9IHRoaXMuUGFyc2UoXG4gICAgICB0aGlzLklkZW50aWZpZXJXaXRoTWV0YWRhdGFcbiAgICApIGFzIElkZW50aWZpZXI7XG4gICAgbGV0IGtub3ROYW1lOiBJZGVudGlmaWVyO1xuXG4gICAgY29uc3QgaXNGdW5jOiBib29sZWFuID0gaWRlbnRpZmllcj8ubmFtZSA9PT0gXCJmdW5jdGlvblwiO1xuICAgIGlmIChpc0Z1bmMpIHtcbiAgICAgIHRoaXMuRXhwZWN0KHRoaXMuV2hpdGVzcGFjZSwgXCJ3aGl0ZXNwYWNlIGFmdGVyIHRoZSAnZnVuY3Rpb24nIGtleXdvcmRcIik7XG5cbiAgICAgIGtub3ROYW1lID0gdGhpcy5QYXJzZSh0aGlzLklkZW50aWZpZXJXaXRoTWV0YWRhdGEpIGFzIElkZW50aWZpZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtub3ROYW1lID0gaWRlbnRpZmllcjtcbiAgICB9XG5cbiAgICBpZiAoa25vdE5hbWUgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuRXJyb3IoYEV4cGVjdGVkIHRoZSBuYW1lIG9mIHRoZSAke2lzRnVuYyA/IFwiZnVuY3Rpb25cIiA6IFwia25vdFwifWApO1xuICAgICAga25vdE5hbWUgPSBuZXcgSWRlbnRpZmllcihcIlwiKTsgLy8gcHJldmVudCBsYXRlciBudWxsIHJlZlxuICAgIH1cblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgY29uc3QgcGFyYW1ldGVyTmFtZXM6IEFyZ3VtZW50W10gPSB0aGlzLlBhcnNlKFxuICAgICAgdGhpcy5CcmFja2V0ZWRLbm90RGVjbEFyZ3VtZW50c1xuICAgICkgYXMgQXJndW1lbnRbXTtcblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgLy8gT3B0aW9uYWwgZXF1YWxzIGFmdGVyIG5hbWVcbiAgICB0aGlzLlBhcnNlKHRoaXMuS25vdFRpdGxlRXF1YWxzKTtcblxuICAgIHJldHVybiBuZXcgRmxvd0RlY2woa25vdE5hbWUsIHBhcmFtZXRlck5hbWVzLCBpc0Z1bmMpO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBLbm90VGl0bGVFcXVhbHMgPSAoKTogc3RyaW5nIHwgbnVsbCA9PiB7XG4gICAgLy8gMisgXCI9XCIgc3RhcnRzIGEga25vdFxuICAgIGNvbnN0IG11bHRpRXF1YWxzID0gdGhpcy5QYXJzZUNoYXJhY3RlcnNGcm9tU3RyaW5nKFwiPVwiKTtcbiAgICBpZiAobXVsdGlFcXVhbHMgPT09IG51bGwgfHwgbXVsdGlFcXVhbHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBtdWx0aUVxdWFscztcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgU3RpdGNoRGVmaW5pdGlvbiA9ICgpOiBQYXJzZVJ1bGVSZXR1cm4gPT4ge1xuICAgIGNvbnN0IGRlY2wgPSB0aGlzLlBhcnNlKHRoaXMuU3RpdGNoRGVjbGFyYXRpb24pIGFzIEZsb3dEZWNsO1xuICAgIGlmIChkZWNsID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLkV4cGVjdChcbiAgICAgIHRoaXMuRW5kT2ZMaW5lLFxuICAgICAgXCJlbmQgb2YgbGluZSBhZnRlciBzdGl0Y2ggbmFtZVwiLFxuICAgICAgdGhpcy5Ta2lwVG9OZXh0TGluZVxuICAgICk7XG5cbiAgICBjb25zdCBpbm5lclN0aXRjaFN0YXRlbWVudHM6IFBhcnNlUnVsZSA9ICgpID0+XG4gICAgICB0aGlzLlN0YXRlbWVudHNBdExldmVsKFN0YXRlbWVudExldmVsLlN0aXRjaCk7XG5cbiAgICBjb25zdCBjb250ZW50ID0gdGhpcy5FeHBlY3QoXG4gICAgICBpbm5lclN0aXRjaFN0YXRlbWVudHMsXG4gICAgICBcImF0IGxlYXN0IG9uZSBsaW5lIHdpdGhpbiB0aGUgc3RpdGNoXCIsXG4gICAgICB0aGlzLktub3RTdGl0Y2hOb0NvbnRlbnRSZWNvdmVyeVJ1bGVcbiAgICApIGFzIFBhcnNlZE9iamVjdFtdO1xuXG4gICAgcmV0dXJuIG5ldyBTdGl0Y2goZGVjbC5uYW1lLCBjb250ZW50LCBkZWNsLmFyZ3MsIGRlY2wuaXNGdW5jdGlvbik7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IFN0aXRjaERlY2xhcmF0aW9uID0gKCk6IEZsb3dEZWNsIHwgbnVsbCA9PiB7XG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICAvLyBTaW5nbGUgXCI9XCIgdG8gZGVmaW5lIGEgc3RpdGNoXG4gICAgaWYgKHRoaXMuUGFyc2VTdHJpbmcoXCI9XCIpID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZSdzIG1vcmUgdGhhbiBvbmUgXCI9XCIsIHRoYXQncyBhY3R1YWxseSBhIGtub3QgZGVmaW5pdGlvbiAob3IgZGl2ZXJ0KSwgc28gdGhpcyBydWxlIHNob3VsZCBmYWlsXG4gICAgaWYgKHRoaXMuUGFyc2VTdHJpbmcoXCI9XCIpICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIC8vIFN0aXRjaGVzIGFyZW4ndCBhbGxvd2VkIHRvIGJlIGZ1bmN0aW9ucywgYnV0IHdlIHBhcnNlIGl0IGFueXdheSBhbmQgcmVwb3J0IHRoZSBlcnJvciBsYXRlclxuICAgIGNvbnN0IGlzRnVuYzogYm9vbGVhbiA9IHRoaXMuUGFyc2VTdHJpbmcoXCJmdW5jdGlvblwiKSAhPT0gbnVsbDtcbiAgICBpZiAoaXNGdW5jKSB7XG4gICAgICB0aGlzLldoaXRlc3BhY2UoKTtcbiAgICB9XG5cbiAgICBjb25zdCBzdGl0Y2hOYW1lOiBJZGVudGlmaWVyID0gdGhpcy5QYXJzZShcbiAgICAgIHRoaXMuSWRlbnRpZmllcldpdGhNZXRhZGF0YVxuICAgICkgYXMgSWRlbnRpZmllcjtcbiAgICBpZiAoc3RpdGNoTmFtZSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICBjb25zdCBmbG93QXJnczogQXJndW1lbnRbXSA9IHRoaXMuUGFyc2UoXG4gICAgICB0aGlzLkJyYWNrZXRlZEtub3REZWNsQXJndW1lbnRzXG4gICAgKSBhcyBBcmd1bWVudFtdO1xuXG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICByZXR1cm4gbmV3IEZsb3dEZWNsKHN0aXRjaE5hbWUsIGZsb3dBcmdzLCBpc0Z1bmMpO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBLbm90U3RpdGNoTm9Db250ZW50UmVjb3ZlcnlSdWxlID0gKCk6IFBhcnNlUnVsZVJldHVybiA9PiB7XG4gICAgLy8gSnVtcCBhaGVhZCB0byB0aGUgbmV4dCBrbm90IG9yIHRoZSBlbmQgb2YgdGhlIGZpbGVcbiAgICB0aGlzLlBhcnNlVW50aWwodGhpcy5Lbm90RGVjbGFyYXRpb24sIG5ldyBDaGFyYWN0ZXJTZXQoXCI9XCIpLCBudWxsKTtcblxuICAgIGNvbnN0IHJlY292ZXJlZEZsb3dDb250ZW50OiBQYXJzZWRPYmplY3RbXSA9IFtuZXcgVGV4dChcIjxFUlJPUiBJTiBGTE9XPlwiKV07XG5cbiAgICByZXR1cm4gcmVjb3ZlcmVkRmxvd0NvbnRlbnQ7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IEJyYWNrZXRlZEtub3REZWNsQXJndW1lbnRzID0gKCk6IEFyZ3VtZW50W10gfCBudWxsID0+IHtcbiAgICBpZiAodGhpcy5QYXJzZVN0cmluZyhcIihcIikgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCBmbG93QXJndW1lbnRzID0gdGhpcy5JbnRlcmxlYXZlPEFyZ3VtZW50PihcbiAgICAgIHRoaXMuU3BhY2VkKHRoaXMuRmxvd0RlY2xBcmd1bWVudCksXG4gICAgICB0aGlzLkV4Y2x1ZGUodGhpcy5TdHJpbmcoXCIsXCIpKVxuICAgICk7XG5cbiAgICB0aGlzLkV4cGVjdCh0aGlzLlN0cmluZyhcIilcIiksIFwiY2xvc2luZyAnKScgZm9yIHBhcmFtZXRlciBsaXN0XCIpO1xuXG4gICAgLy8gSWYgbm8gcGFyYW1ldGVycywgY3JlYXRlIGFuIGVtcHR5IGxpc3Qgc28gdGhhdCB0aGlzIG1ldGhvZCBpcyB0eXBlIHNhZmUgYW5kXG4gICAgLy8gZG9lc24ndCBhdHRlbXB0IHRvIHJldHVybiB0aGUgUGFyc2VTdWNjZXNzIG9iamVjdFxuICAgIGlmIChmbG93QXJndW1lbnRzID09PSBudWxsKSB7XG4gICAgICBmbG93QXJndW1lbnRzID0gW107XG4gICAgfVxuXG4gICAgcmV0dXJuIGZsb3dBcmd1bWVudHM7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IEZsb3dEZWNsQXJndW1lbnQgPSAoKTogQXJndW1lbnQgfCBudWxsID0+IHtcbiAgICAvLyBQb3NzaWJsZSBmb3JtczpcbiAgICAvLyAgbmFtZVxuICAgIC8vICAtPiBuYW1lICAgICAgKHZhcmlhYmxlIGRpdmVydCB0YXJnZXQgYXJndW1lbnRcbiAgICAvLyAgcmVmIG5hbWVcbiAgICAvLyAgcmVmIC0+IG5hbWUgICh2YXJpYWJsZSBkaXZlcnQgdGFyZ2V0IGJ5IHJlZmVyZW5jZSlcbiAgICBjb25zdCBmaXJzdElkZW4gPSB0aGlzLlBhcnNlKHRoaXMuSWRlbnRpZmllcldpdGhNZXRhZGF0YSkgYXMgSWRlbnRpZmllcjtcbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIGNvbnN0IGRpdmVydEFycm93ID0gdGhpcy5QYXJzZURpdmVydEFycm93KCk7XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIGNvbnN0IHNlY29uZElkZW4gPSB0aGlzLlBhcnNlKHRoaXMuSWRlbnRpZmllcldpdGhNZXRhZGF0YSkgYXMgSWRlbnRpZmllcjtcblxuICAgIGlmIChmaXJzdElkZW4gPT0gbnVsbCAmJiBzZWNvbmRJZGVuID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBmbG93QXJnID0gbmV3IEFyZ3VtZW50KCk7XG4gICAgaWYgKGRpdmVydEFycm93ICE9PSBudWxsKSB7XG4gICAgICBmbG93QXJnLmlzRGl2ZXJ0VGFyZ2V0ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBQYXNzaW5nIGJ5IHJlZmVyZW5jZVxuICAgIGlmIChmaXJzdElkZW4gIT09IG51bGwgJiYgZmlyc3RJZGVuLm5hbWUgPT09IFwicmVmXCIpIHtcbiAgICAgIGlmIChzZWNvbmRJZGVuID09PSBudWxsKSB7XG4gICAgICAgIHRoaXMuRXJyb3IoXCJFeHBlY3RlZCBhbiBwYXJhbWV0ZXIgbmFtZSBhZnRlciAncmVmJ1wiKTtcbiAgICAgIH1cblxuICAgICAgZmxvd0FyZy5pZGVudGlmaWVyID0gc2Vjb25kSWRlbjtcbiAgICAgIGZsb3dBcmcuaXNCeVJlZmVyZW5jZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNpbXBsZSBhcmd1bWVudCBuYW1lXG4gICAgICBpZiAoZmxvd0FyZy5pc0RpdmVydFRhcmdldCkge1xuICAgICAgICBmbG93QXJnLmlkZW50aWZpZXIgPSBzZWNvbmRJZGVuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmxvd0FyZy5pZGVudGlmaWVyID0gZmlyc3RJZGVuO1xuICAgICAgfVxuXG4gICAgICBpZiAoZmxvd0FyZy5pZGVudGlmaWVyID09PSBudWxsKSB7XG4gICAgICAgIHRoaXMuRXJyb3IoXCJFeHBlY3RlZCBhbiBwYXJhbWV0ZXIgbmFtZVwiKTtcbiAgICAgIH1cblxuICAgICAgZmxvd0FyZy5pc0J5UmVmZXJlbmNlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZsb3dBcmc7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IEV4dGVybmFsRGVjbGFyYXRpb24gPSAoKTogRXh0ZXJuYWxEZWNsYXJhdGlvbiB8IG51bGwgPT4ge1xuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgY29uc3QgZXh0ZXJuYWwgPSB0aGlzLlBhcnNlKFxuICAgICAgdGhpcy5JZGVudGlmaWVyV2l0aE1ldGFkYXRhXG4gICAgKSBhcyBJZGVudGlmaWVyIHwgbnVsbDtcbiAgICBpZiAoZXh0ZXJuYWwgPT09IG51bGwgfHwgZXh0ZXJuYWwubmFtZSAhPSBcIkVYVEVSTkFMXCIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgY29uc3QgZnVuY0lkZW50aWZpZXI6IElkZW50aWZpZXIgPVxuICAgICAgKHRoaXMuRXhwZWN0KFxuICAgICAgICB0aGlzLklkZW50aWZpZXJXaXRoTWV0YWRhdGEsXG4gICAgICAgIFwibmFtZSBvZiBleHRlcm5hbCBmdW5jdGlvblwiXG4gICAgICApIGFzIElkZW50aWZpZXIgfCBudWxsKSB8fCBuZXcgSWRlbnRpZmllcihcIlwiKTtcblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgbGV0IHBhcmFtZXRlck5hbWVzID0gdGhpcy5FeHBlY3QoXG4gICAgICB0aGlzLkJyYWNrZXRlZEtub3REZWNsQXJndW1lbnRzLFxuICAgICAgYGRlY2xhcmF0aW9uIG9mIGFyZ3VtZW50cyBmb3IgRVhURVJOQUwsIGV2ZW4gaWYgZW1wdHksIGkuZS4gJ0VYVEVSTkFMICR7ZnVuY0lkZW50aWZpZXJ9KCknYFxuICAgICkgYXMgQXJndW1lbnRbXTtcblxuICAgIGlmIChwYXJhbWV0ZXJOYW1lcyA9PT0gbnVsbCkge1xuICAgICAgcGFyYW1ldGVyTmFtZXMgPSBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBhcmdOYW1lcyA9IHBhcmFtZXRlck5hbWVzXG4gICAgICAubWFwKChhcmcpID0+IGFyZy5pZGVudGlmaWVyPy5uYW1lKVxuICAgICAgLmZpbHRlcihmaWx0ZXJVbmRlZik7XG5cbiAgICByZXR1cm4gbmV3IEV4dGVybmFsRGVjbGFyYXRpb24oZnVuY0lkZW50aWZpZXIsIGFyZ05hbWVzKTtcbiAgfTtcblxuICAvKipcbiAgICogRW5kIEtub3Qgc2VjdGlvbi5cbiAgICovXG5cbiAgLyoqXG4gICAqIFN0YXJ0IExvZ2ljIHNlY3Rpb24uXG4gICAqL1xuXG4gIHByaXZhdGUgX2lkZW50aWZpZXJDaGFyU2V0OiBDaGFyYWN0ZXJTZXQgfCBudWxsID0gbnVsbDtcblxuICBnZXQgaWRlbnRpZmllckNoYXJTZXQoKTogQ2hhcmFjdGVyU2V0IHtcbiAgICBpZiAodGhpcy5faWRlbnRpZmllckNoYXJTZXQgPT09IG51bGwpIHtcbiAgICAgICh0aGlzLl9pZGVudGlmaWVyQ2hhclNldCA9IG5ldyBDaGFyYWN0ZXJTZXQoKSlcbiAgICAgICAgLkFkZFJhbmdlKFwiQVwiLCBcIlpcIilcbiAgICAgICAgLkFkZFJhbmdlKFwiYVwiLCBcInpcIilcbiAgICAgICAgLkFkZFJhbmdlKFwiMFwiLCBcIjlcIilcbiAgICAgICAgLkFkZChcIl9cIik7XG5cbiAgICAgIC8vIEVuYWJsZSBub24tQVNDSUkgY2hhcmFjdGVycyBmb3Igc3RvcnkgaWRlbnRpZmllcnMuXG4gICAgICB0aGlzLkV4dGVuZElkZW50aWZpZXJDaGFyYWN0ZXJSYW5nZXModGhpcy5faWRlbnRpZmllckNoYXJTZXQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9pZGVudGlmaWVyQ2hhclNldDtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBMb2dpY0xpbmUgPSAoKTogUGFyc2VkT2JqZWN0IHwgbnVsbCA9PiB7XG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICBpZiAodGhpcy5QYXJzZVN0cmluZyhcIn5cIikgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgLy8gU29tZSBleGFtcGxlIGxpbmVzIHdlIG5lZWQgdG8gYmUgYWJsZSB0byBkaXN0aW5ndWlzaCBiZXR3ZWVuOlxuICAgIC8vIH4gdGVtcCB4ID0gNSAgLS0gdmFyIGRlY2wgKyBhc3NpZ25cbiAgICAvLyB+IHRlbXAgeCAgICAgIC0tIHZhciBkZWNsXG4gICAgLy8gfiB4ID0gNSAgICAgICAtLSB2YXIgYXNzaWduXG4gICAgLy8gfiB4ICAgICAgICAgICAtLSBleHByIChub3QgdmFyIGRlY2wgb3IgYXNzaWduKVxuICAgIC8vIH4gZigpICAgICAgICAgLS0gZXhwclxuICAgIC8vIFdlIGRvbid0IHRyZWF0IHZhcmlhYmxlIGRlY2wvYXNzaWduIGFzIGFuIGV4cHJlc3Npb24gc2luY2Ugd2UgZG9uJ3Qgd2FudCBhbiBhc3NpZ25tZW50XG4gICAgLy8gdG8gaGF2ZSBhIHJldHVybiB2YWx1ZSwgb3IgdG8gYmUgdXNlZCBpbiBjb21wb3VuZCBleHByZXNzaW9ucy5cbiAgICBjb25zdCBhZnRlclRpbGRlOiBQYXJzZVJ1bGUgPSAoKSA9PlxuICAgICAgdGhpcy5PbmVPZihbXG4gICAgICAgIHRoaXMuUmV0dXJuU3RhdGVtZW50LFxuICAgICAgICB0aGlzLlRlbXBEZWNsYXJhdGlvbk9yQXNzaWdubWVudCxcbiAgICAgICAgdGhpcy5FeHByZXNzaW9uLFxuICAgICAgXSk7XG5cbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5FeHBlY3QoXG4gICAgICBhZnRlclRpbGRlLFxuICAgICAgXCJleHByZXNzaW9uIGFmdGVyICd+J1wiLFxuICAgICAgdGhpcy5Ta2lwVG9OZXh0TGluZVxuICAgICkgYXMgUGFyc2VkT2JqZWN0O1xuXG4gICAgLy8gUHJldmVudCBmdXJ0aGVyIGVycm9ycywgYWxyZWFkeSByZXBvcnRlZCBleHBlY3RlZCBleHByZXNzaW9uIGFuZCBoYXZlIHNraXBwZWQgdG8gbmV4dCBsaW5lLlxuICAgIGlmIChyZXN1bHQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBuZXcgQ29udGVudExpc3QoKTtcbiAgICB9XG5cbiAgICAvLyBQYXJzZSBhbGwgZXhwcmVzc2lvbnMsIGJ1dCB0ZWxsIHRoZSB3cml0ZXIgb2ZmIGlmIHRoZXkgZGlkIHNvbWV0aGluZyB1c2VsZXNzIGxpa2U6XG4gICAgLy8gIH4gNSArIDRcbiAgICAvLyBBbmQgZXZlbjpcbiAgICAvLyAgfiBmYWxzZSAmJiBteUZ1bmN0aW9uKClcbiAgICAvLyAuLi5zaW5jZSBpdCdzIGJhZCBwcmFjdGljZSwgYW5kIHdvbid0IGRvIHdoYXQgdGhleSBleHBlY3QgaWZcbiAgICAvLyB0aGV5J3JlIGV4cGVjdGluZyBDJ3MgbGF6eSBldmFsdWF0aW9uLlxuICAgIGlmIChcbiAgICAgIHJlc3VsdCBpbnN0YW5jZW9mIEV4cHJlc3Npb24gJiZcbiAgICAgICEocmVzdWx0IGluc3RhbmNlb2YgRnVuY3Rpb25DYWxsIHx8IHJlc3VsdCBpbnN0YW5jZW9mIEluY0RlY0V4cHJlc3Npb24pXG4gICAgKSB7XG4gICAgICB0aGlzLkVycm9yKFxuICAgICAgICBcIkxvZ2ljIGZvbGxvd2luZyBhICd+JyBjYW4ndCBiZSB0aGF0IHR5cGUgb2YgZXhwcmVzc2lvbi4gSXQgY2FuIG9ubHkgYmUgc29tZXRoaW5nIGxpa2U6XFxuXFx0fiByZXR1cm5cXG5cXHR+IHZhciB4ID0gYmxhaFxcblxcdH4geCsrXFxuXFx0fiBteUZ1bmN0aW9uKClcIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBMaW5lIGlzIHB1cmUgZnVuY3Rpb24gY2FsbD8gZS5nLlxuICAgIC8vICB+IGYoKVxuICAgIC8vIEFkZCBleHRyYSBwb3AgdG8gbWFrZSBzdXJlIHdlIHRpZHkgdXAgYWZ0ZXIgb3Vyc2VsdmVzLlxuICAgIC8vIFdlIG5vIGxvbmdlciBuZWVkIGFueXRoaW5nIG9uIHRoZSBldmFsdWF0aW9uIHN0YWNrLlxuICAgIGNvbnN0IGZ1bkNhbGwgPSBhc09yTnVsbChyZXN1bHQsIEZ1bmN0aW9uQ2FsbCk7XG4gICAgaWYgKGZ1bkNhbGwpIHtcbiAgICAgIGZ1bkNhbGwuc2hvdWxkUG9wUmV0dXJuZWRWYWx1ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIGV4cHJlc3Npb24gY29udGFpbnMgYSBmdW5jdGlvbiBjYWxsLCB0aGVuIGl0IGNvdWxkIHByb2R1Y2UgYSB0ZXh0IHNpZGUgZWZmZWN0LFxuICAgIC8vIGluIHdoaWNoIGNhc2UgaXQgbmVlZHMgYSBuZXdsaW5lIG9uIHRoZSBlbmQuIGUuZy5cbiAgICAvLyAgfiBwcmludE15TmFtZSgpXG4gICAgLy8gIH4geCA9IDEgKyByZXR1cm5BVmFsdWVBbmRBbHNvUHJpbnRTdHVmZigpXG4gICAgLy8gSWYgbm8gdGV4dCBnZXRzIHByaW50ZWQsIHRoZW4gdGhlIGV4dHJhIG5ld2xpbmUgd2lsbCBoYXZlIHRvIGJlIGN1bGxlZCBsYXRlci5cbiAgICAvLyBNdWx0aXBsZSBuZXdsaW5lcyBvbiB0aGUgb3V0cHV0IHdpbGwgYmUgcmVtb3ZlZCwgc28gdGhlcmUgd2lsbCBiZSBubyBcImxlYWtcIiBmb3JcbiAgICAvLyBsb25nIHJ1bm5pbmcgY2FsY3VsYXRpb25zLiBJdCdzIGRpc2FwcG9pbnRpbmdseSBtZXNzeSB0aG91Z2ggOi0vXG4gICAgaWYgKHJlc3VsdC5GaW5kKEZ1bmN0aW9uQ2FsbCkoKSAhPT0gbnVsbCkge1xuICAgICAgcmVzdWx0ID0gbmV3IENvbnRlbnRMaXN0KFxuICAgICAgICByZXN1bHQgYXMgdW5rbm93biBhcyBQYXJzZWRPYmplY3RbXSxcbiAgICAgICAgbmV3IFRleHQoXCJcXG5cIilcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhpcy5FeHBlY3QodGhpcy5FbmRPZkxpbmUsIFwiZW5kIG9mIGxpbmVcIiwgdGhpcy5Ta2lwVG9OZXh0TGluZSk7XG5cbiAgICByZXR1cm4gcmVzdWx0IGFzIFBhcnNlZE9iamVjdDtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgVmFyaWFibGVEZWNsYXJhdGlvbiA9ICgpOiBQYXJzZWRPYmplY3QgfCBudWxsID0+IHtcbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIGNvbnN0IGlkID0gdGhpcy5QYXJzZSh0aGlzLklkZW50aWZpZXIpO1xuICAgIGlmIChpZCAhPT0gXCJWQVJcIikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICBjb25zdCB2YXJOYW1lID0gdGhpcy5FeHBlY3QoXG4gICAgICB0aGlzLklkZW50aWZpZXJXaXRoTWV0YWRhdGEsXG4gICAgICBcInZhcmlhYmxlIG5hbWVcIlxuICAgICkgYXMgSWRlbnRpZmllcjtcblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgdGhpcy5FeHBlY3QoXG4gICAgICB0aGlzLlN0cmluZyhcIj1cIiksXG4gICAgICBcInRoZSAnPScgZm9yIGFuIGFzc2lnbm1lbnQgb2YgYSB2YWx1ZSwgZS5nLiAnPSA1JyAoaW5pdGlhbCB2YWx1ZXMgYXJlIG1hbmRhdG9yeSlcIlxuICAgICk7XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIGNvbnN0IGRlZmluaXRpb24gPSB0aGlzLkV4cGVjdCh0aGlzLkV4cHJlc3Npb24sIFwiaW5pdGlhbCB2YWx1ZSBmb3IgXCIpO1xuXG4gICAgY29uc3QgZXhwciA9IGRlZmluaXRpb24gYXMgRXhwcmVzc2lvbjtcblxuICAgIGlmIChleHByKSB7XG4gICAgICBjb25zdCBjaGVjayA9XG4gICAgICAgIGV4cHIgaW5zdGFuY2VvZiBOdW1iZXJFeHByZXNzaW9uIHx8XG4gICAgICAgIGV4cHIgaW5zdGFuY2VvZiBTdHJpbmdFeHByZXNzaW9uIHx8XG4gICAgICAgIGV4cHIgaW5zdGFuY2VvZiBEaXZlcnRUYXJnZXQgfHxcbiAgICAgICAgZXhwciBpbnN0YW5jZW9mIFZhcmlhYmxlUmVmZXJlbmNlIHx8XG4gICAgICAgIGV4cHIgaW5zdGFuY2VvZiBMaXN0O1xuXG4gICAgICBpZiAoIWNoZWNrKSB7XG4gICAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgICAgXCJpbml0aWFsIHZhbHVlIGZvciBhIHZhcmlhYmxlIG11c3QgYmUgYSBudW1iZXIsIGNvbnN0YW50LCBsaXN0IG9yIGRpdmVydCB0YXJnZXRcIlxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5QYXJzZSh0aGlzLkxpc3RFbGVtZW50RGVmaW5pdGlvblNlcGFyYXRvcikgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5FcnJvcihcbiAgICAgICAgICBcIlVuZXhwZWN0ZWQgJywnLiBJZiB5b3UncmUgdHJ5aW5nIHRvIGRlY2xhcmUgYSBuZXcgbGlzdCwgdXNlIHRoZSBMSVNUIGtleXdvcmQsIG5vdCBWQVJcIlxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChleHByIGluc3RhbmNlb2YgU3RyaW5nRXhwcmVzc2lvbikge1xuICAgICAgICAvLyBFbnN1cmUgc3RyaW5nIGV4cHJlc3Npb25zIGFyZSBzaW1wbGVcbiAgICAgICAgY29uc3Qgc3RyRXhwciA9IGV4cHIgYXMgU3RyaW5nRXhwcmVzc2lvbjtcbiAgICAgICAgaWYgKCFzdHJFeHByLmlzU2luZ2xlU3RyaW5nKSB7XG4gICAgICAgICAgdGhpcy5FcnJvcihcIkNvbnN0YW50IHN0cmluZ3MgY2Fubm90IGNvbnRhaW4gYW55IGxvZ2ljLlwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHQgPSBuZXcgVmFyaWFibGVBc3NpZ25tZW50KHtcbiAgICAgICAgYXNzaWduZWRFeHByZXNzaW9uOiBleHByLFxuICAgICAgICBpc0dsb2JhbERlY2xhcmF0aW9uOiB0cnVlLFxuICAgICAgICB2YXJpYWJsZUlkZW50aWZpZXI6IHZhck5hbWUsXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgTGlzdERlY2xhcmF0aW9uID0gKCk6IFZhcmlhYmxlQXNzaWdubWVudCB8IG51bGwgPT4ge1xuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgY29uc3QgaWQgPSB0aGlzLlBhcnNlKHRoaXMuSWRlbnRpZmllcik7XG4gICAgaWYgKGlkICE9IFwiTElTVFwiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIGNvbnN0IHZhck5hbWUgPSB0aGlzLkV4cGVjdChcbiAgICAgIHRoaXMuSWRlbnRpZmllcldpdGhNZXRhZGF0YSxcbiAgICAgIFwibGlzdCBuYW1lXCJcbiAgICApIGFzIElkZW50aWZpZXI7XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIHRoaXMuRXhwZWN0KFxuICAgICAgdGhpcy5TdHJpbmcoXCI9XCIpLFxuICAgICAgXCJ0aGUgJz0nIGZvciBhbiBhc3NpZ25tZW50IG9mIHRoZSBsaXN0IGRlZmluaXRpb25cIlxuICAgICk7XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIGNvbnN0IGRlZmluaXRpb24gPSB0aGlzLkV4cGVjdChcbiAgICAgIHRoaXMuTGlzdERlZmluaXRpb24sXG4gICAgICBcImxpc3QgaXRlbSBuYW1lc1wiXG4gICAgKSBhcyBMaXN0RGVmaW5pdGlvbjtcblxuICAgIGlmIChkZWZpbml0aW9uKSB7XG4gICAgICBkZWZpbml0aW9uLmlkZW50aWZpZXIgPSBuZXcgSWRlbnRpZmllcih2YXJOYW1lLm5hbWUpO1xuICAgICAgcmV0dXJuIG5ldyBWYXJpYWJsZUFzc2lnbm1lbnQoe1xuICAgICAgICB2YXJpYWJsZUlkZW50aWZpZXI6IHZhck5hbWUsXG4gICAgICAgIGxpc3REZWY6IGRlZmluaXRpb24sXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgTGlzdERlZmluaXRpb24gPSAoKTogTGlzdERlZmluaXRpb24gfCBudWxsID0+IHtcbiAgICB0aGlzLkFueVdoaXRlc3BhY2UoKTtcblxuICAgIGNvbnN0IGFsbEVsZW1lbnRzID0gdGhpcy5TZXBhcmF0ZWRMaXN0KFxuICAgICAgdGhpcy5MaXN0RWxlbWVudERlZmluaXRpb24sXG4gICAgICB0aGlzLkxpc3RFbGVtZW50RGVmaW5pdGlvblNlcGFyYXRvclxuICAgICkgYXMgTGlzdEVsZW1lbnREZWZpbml0aW9uW107XG5cbiAgICBpZiAoYWxsRWxlbWVudHMgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgTGlzdERlZmluaXRpb24oYWxsRWxlbWVudHMpO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBMaXN0RWxlbWVudERlZmluaXRpb25TZXBhcmF0b3IgPSAoKTogc3RyaW5nIHwgbnVsbCA9PiB7XG4gICAgdGhpcy5BbnlXaGl0ZXNwYWNlKCk7XG5cbiAgICBpZiAodGhpcy5QYXJzZVN0cmluZyhcIixcIikgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuQW55V2hpdGVzcGFjZSgpO1xuXG4gICAgcmV0dXJuIFwiLFwiO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBMaXN0RWxlbWVudERlZmluaXRpb24gPSAoKSA9PiB7XG4gICAgY29uc3QgaW5Jbml0aWFsTGlzdCA9IHRoaXMuUGFyc2VTdHJpbmcoXCIoXCIpICE9PSBudWxsO1xuICAgIGxldCBuZWVkc1RvQ2xvc2VQYXJlbiA9IGluSW5pdGlhbExpc3Q7XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIGNvbnN0IG5hbWUgPSB0aGlzLlBhcnNlKHRoaXMuSWRlbnRpZmllcldpdGhNZXRhZGF0YSkgYXMgSWRlbnRpZmllciB8IG51bGw7XG4gICAgaWYgKG5hbWUgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgaWYgKGluSW5pdGlhbExpc3QpIHtcbiAgICAgIGlmICh0aGlzLlBhcnNlU3RyaW5nKFwiKVwiKSAhPSBudWxsKSB7XG4gICAgICAgIG5lZWRzVG9DbG9zZVBhcmVuID0gZmFsc2U7XG4gICAgICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBlbGVtZW50VmFsdWU6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICAgIGlmICh0aGlzLlBhcnNlU3RyaW5nKFwiPVwiKSAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICAgIGNvbnN0IGVsZW1lbnRWYWx1ZU51bSA9IHRoaXMuRXhwZWN0KFxuICAgICAgICB0aGlzLkV4cHJlc3Npb25JbnQsXG4gICAgICAgIFwidmFsdWUgdG8gYmUgYXNzaWduZWQgdG8gbGlzdCBpdGVtXCJcbiAgICAgICkgYXMgTnVtYmVyRXhwcmVzc2lvbjtcblxuICAgICAgaWYgKGVsZW1lbnRWYWx1ZU51bSAhPT0gbnVsbCkge1xuICAgICAgICBlbGVtZW50VmFsdWUgPSBlbGVtZW50VmFsdWVOdW0udmFsdWUgYXMgbnVtYmVyO1xuICAgICAgfVxuXG4gICAgICBpZiAobmVlZHNUb0Nsb3NlUGFyZW4pIHtcbiAgICAgICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuUGFyc2VTdHJpbmcoXCIpXCIpICE9PSBudWxsKSB7XG4gICAgICAgICAgbmVlZHNUb0Nsb3NlUGFyZW4gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChuZWVkc1RvQ2xvc2VQYXJlbikge1xuICAgICAgdGhpcy5FcnJvcihcIkV4cGVjdGVkIGNsb3NpbmcgJyknXCIpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgTGlzdEVsZW1lbnREZWZpbml0aW9uKG5hbWUsIGluSW5pdGlhbExpc3QsIGVsZW1lbnRWYWx1ZSk7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IENvbnN0RGVjbGFyYXRpb24gPSAoKTogUGFyc2VkT2JqZWN0IHwgbnVsbCA9PiB7XG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICBjb25zdCBpZCA9IHRoaXMuUGFyc2UodGhpcy5JZGVudGlmaWVyKTtcbiAgICBpZiAoaWQgIT09IFwiQ09OU1RcIikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICBjb25zdCB2YXJOYW1lID0gdGhpcy5FeHBlY3QoXG4gICAgICB0aGlzLklkZW50aWZpZXJXaXRoTWV0YWRhdGEsXG4gICAgICBcImNvbnN0YW50IG5hbWVcIlxuICAgICkgYXMgSWRlbnRpZmllcjtcblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgdGhpcy5FeHBlY3QoXG4gICAgICB0aGlzLlN0cmluZyhcIj1cIiksXG4gICAgICBcInRoZSAnPScgZm9yIGFuIGFzc2lnbm1lbnQgb2YgYSB2YWx1ZSwgZS5nLiAnPSA1JyAoaW5pdGlhbCB2YWx1ZXMgYXJlIG1hbmRhdG9yeSlcIlxuICAgICk7XG5cbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIGNvbnN0IGV4cHIgPSB0aGlzLkV4cGVjdChcbiAgICAgIHRoaXMuRXhwcmVzc2lvbixcbiAgICAgIFwiaW5pdGlhbCB2YWx1ZSBmb3IgXCJcbiAgICApIGFzIEV4cHJlc3Npb247XG5cbiAgICBjb25zdCBjaGVjayA9XG4gICAgICBleHByIGluc3RhbmNlb2YgTnVtYmVyRXhwcmVzc2lvbiB8fFxuICAgICAgZXhwciBpbnN0YW5jZW9mIERpdmVydFRhcmdldCB8fFxuICAgICAgZXhwciBpbnN0YW5jZW9mIFN0cmluZ0V4cHJlc3Npb247XG5cbiAgICBpZiAoIWNoZWNrKSB7XG4gICAgICB0aGlzLkVycm9yKFxuICAgICAgICBcImluaXRpYWwgdmFsdWUgZm9yIGEgY29uc3RhbnQgbXVzdCBiZSBhIG51bWJlciBvciBkaXZlcnQgdGFyZ2V0XCJcbiAgICAgICk7XG4gICAgfSBlbHNlIGlmIChleHByIGluc3RhbmNlb2YgU3RyaW5nRXhwcmVzc2lvbikge1xuICAgICAgLy8gRW5zdXJlIHN0cmluZyBleHByZXNzaW9ucyBhcmUgc2ltcGxlXG4gICAgICBjb25zdCBzdHJFeHByID0gZXhwciBhcyBTdHJpbmdFeHByZXNzaW9uO1xuICAgICAgaWYgKCFzdHJFeHByLmlzU2luZ2xlU3RyaW5nKSB7XG4gICAgICAgIHRoaXMuRXJyb3IoXCJDb25zdGFudCBzdHJpbmdzIGNhbm5vdCBjb250YWluIGFueSBsb2dpYy5cIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IENvbnN0YW50RGVjbGFyYXRpb24odmFyTmFtZSwgZXhwcik7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBJbmxpbmVMb2dpY09yR2x1ZU9yU3RhcnRUYWcgPSAoKTogUGFyc2VkT2JqZWN0ID0+XG4gICAgdGhpcy5PbmVPZihbdGhpcy5JbmxpbmVMb2dpYywgdGhpcy5HbHVlLCB0aGlzLlN0YXJ0VGFnXSkgYXMgUGFyc2VkT2JqZWN0O1xuXG4gIHB1YmxpYyByZWFkb25seSBHbHVlID0gKCk6IEdsdWUgfCBudWxsID0+IHtcbiAgICAvLyBEb24ndCB3YW50IHRvIHBhcnNlIHdoaXRlc3BhY2UsIHNpbmNlIGl0IG1pZ2h0IGJlIGltcG9ydGFudFxuICAgIC8vIHN1cnJvdW5kaW5nIHRoZSBnbHVlLlxuICAgIGNvbnN0IGdsdWVTdHIgPSB0aGlzLlBhcnNlU3RyaW5nKFwiPD5cIik7XG4gICAgaWYgKGdsdWVTdHIgIT09IG51bGwpIHtcbiAgICAgIHJldHVybiBuZXcgR2x1ZShuZXcgUnVudGltZUdsdWUoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IElubGluZUxvZ2ljID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLlBhcnNlU3RyaW5nKFwie1wiKSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgbGV0IHdhc1BhcnNpbmdTdHJpbmcgPSB0aGlzLnBhcnNpbmdTdHJpbmdFeHByZXNzaW9uO1xuICAgIGxldCB3YXNUYWdBY3RpdmUgPSB0aGlzLnRhZ0FjdGl2ZTtcblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgY29uc3QgbG9naWMgPSB0aGlzLkV4cGVjdChcbiAgICAgIHRoaXMuSW5uZXJMb2dpYyxcbiAgICAgIFwic29tZSBraW5kIG9mIGxvZ2ljLCBjb25kaXRpb25hbCBvciBzZXF1ZW5jZSB3aXRoaW4gYnJhY2VzOiB7IC4uLiB9XCJcbiAgICApIGFzIFBhcnNlZE9iamVjdDtcblxuICAgIGlmIChsb2dpYyA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5wYXJzaW5nU3RyaW5nRXhwcmVzc2lvbiA9IHdhc1BhcnNpbmdTdHJpbmc7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLkRpc2FsbG93SW5jcmVtZW50KGxvZ2ljKTtcblxuICAgIGxldCBjb250ZW50TGlzdCA9IGFzT3JOdWxsKGxvZ2ljLCBDb250ZW50TGlzdCk7XG4gICAgaWYgKCFjb250ZW50TGlzdCkge1xuICAgICAgY29udGVudExpc3QgPSBuZXcgQ29udGVudExpc3QobG9naWMgYXMgdW5rbm93biBhcyBQYXJzZWRPYmplY3RbXSk7XG4gICAgfVxuXG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICB0aGlzLkV4cGVjdCh0aGlzLlN0cmluZyhcIn1cIiksIFwiY2xvc2luZyBicmFjZSAnfScgZm9yIGlubGluZSBsb2dpY1wiKTtcblxuICAgIC8vIEFsbG93IG5lc3RlZCBzdHJpbmdzIGFuZCBsb2dpY1xuICAgIHRoaXMucGFyc2luZ1N0cmluZ0V4cHJlc3Npb24gPSB3YXNQYXJzaW5nU3RyaW5nO1xuXG4gICAgLy8gRGlmZmVyZW5jZSBiZXR3ZWVuOlxuICAgIC8vXG4gICAgLy8gICAgIDEpIEEgdGhpbmcgIyB7aW1hZ2V9LmpwZ1xuICAgIC8vICAgICAyKSBBIHtyZWQgI3JlZHxibHVlICNibHVlfSBzZXF1ZW5jZS5cbiAgICAvL1xuICAgIC8vICBXaGVuIGxvZ2ljIGVuZHMgaW4gKDEpIHdlIHN0aWxsIHdhbnQgdGFnIHRvIGNvbnRpbnVlLlxuICAgIC8vICBXaGVuIGxvZ2ljIGVuZHMgaW4gKDIpIHdlIHdhbnQgdG8gYXV0by1lbmQgdGhlIHRhZy5cbiAgICAvLyAgU2lkZSBub3RlOiB3ZSBzaW1wbHkgZGlzYWxsb3cgdGFncyB3aXRoaW4gc3RyaW5ncy5cbiAgICBpZiAoIXdhc1RhZ0FjdGl2ZSkgdGhpcy5FbmRUYWdJZk5lY2Vzc2FyeShjb250ZW50TGlzdCk7XG5cbiAgICByZXR1cm4gY29udGVudExpc3Q7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IElubmVyTG9naWMgPSAoKTogUGFyc2VkT2JqZWN0IHwgbnVsbCA9PiB7XG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICAvLyBFeHBsaWNpdGx5IHRyeSB0aGUgY29tYmluYXRpb25zIG9mIGlubmVyIGxvZ2ljXG4gICAgLy8gdGhhdCBjb3VsZCBwb3RlbnRpYWxseSBoYXZlIGNvbmZsaWN0cyBmaXJzdC5cblxuICAgIC8vIEV4cGxpY2l0IHNlcXVlbmNlIGFubm90YXRpb24/XG4gICAgY29uc3QgZXhwbGljaXRTZXFUeXBlOiBTZXF1ZW5jZVR5cGUgPSB0aGlzLlBhcnNlT2JqZWN0KFxuICAgICAgdGhpcy5TZXF1ZW5jZVR5cGVBbm5vdGF0aW9uXG4gICAgKSBhcyBTZXF1ZW5jZVR5cGU7XG5cbiAgICBpZiAoZXhwbGljaXRTZXFUeXBlICE9PSBudWxsKSB7XG4gICAgICBjb25zdCBjb250ZW50TGlzdHMgPSB0aGlzLkV4cGVjdChcbiAgICAgICAgdGhpcy5Jbm5lclNlcXVlbmNlT2JqZWN0cyxcbiAgICAgICAgXCJzZXF1ZW5jZSBlbGVtZW50cyAoZm9yIGN5Y2xlL3N0b3BpbmcgZXRjKVwiXG4gICAgICApIGFzIENvbnRlbnRMaXN0W107XG5cbiAgICAgIGlmIChjb250ZW50TGlzdHMgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgU2VxdWVuY2UoY29udGVudExpc3RzLCBleHBsaWNpdFNlcVR5cGUpO1xuICAgIH1cblxuICAgIC8vIENvbmRpdGlvbmFsIHdpdGggZXhwcmVzc2lvbj9cbiAgICBjb25zdCBpbml0aWFsUXVlcnlFeHByZXNzaW9uID0gdGhpcy5QYXJzZShcbiAgICAgIHRoaXMuQ29uZGl0aW9uRXhwcmVzc2lvblxuICAgICkgYXMgRXhwcmVzc2lvbjtcbiAgICBpZiAoaW5pdGlhbFF1ZXJ5RXhwcmVzc2lvbikge1xuICAgICAgY29uc3QgY29uZGl0aW9uYWwgPSB0aGlzLkV4cGVjdChcbiAgICAgICAgKCkgPT4gdGhpcy5Jbm5lckNvbmRpdGlvbmFsQ29udGVudChpbml0aWFsUXVlcnlFeHByZXNzaW9uKSxcbiAgICAgICAgXCJjb25kaXRpb25hbCBjb250ZW50IGZvbGxvd2luZyBxdWVyeVwiXG4gICAgICApIGFzIENvbmRpdGlvbmFsO1xuXG4gICAgICByZXR1cm4gY29uZGl0aW9uYWw7XG4gICAgfVxuXG4gICAgLy8gTm93IHRyeSB0byBldmFsdWF0ZSBlYWNoIG9mIHRoZSBcImZ1bGxcIiBydWxlcyBpbiB0dXJuXG4gICAgY29uc3QgcnVsZXM6IFBhcnNlUnVsZVtdID0gW1xuICAgICAgLy8gQ29uZGl0aW9uYWwgc3RpbGwgbmVjZXNzYXJ5LCBzaW5jZSB5b3UgY2FuIGhhdmUgYSBtdWx0aS1saW5lIGNvbmRpdGlvbmFsXG4gICAgICAvLyB3aXRob3V0IGFuIGluaXRpYWwgcXVlcnkgZXhwcmVzc2lvbjpcbiAgICAgIC8vIHtcbiAgICAgIC8vICAgLSB0cnVlOiAgdGhpcyBpcyB0cnVlXG4gICAgICAvLyAgIC0gZmFsc2U6IHRoaXMgaXMgZmFsc2VcbiAgICAgIC8vIH1cbiAgICAgIHRoaXMuSW5uZXJDb25kaXRpb25hbENvbnRlbnQgYXMgUGFyc2VSdWxlLFxuICAgICAgdGhpcy5Jbm5lclNlcXVlbmNlLFxuICAgICAgdGhpcy5Jbm5lckV4cHJlc3Npb24sXG4gICAgXTtcblxuICAgIC8vbGV0IHdhc1RhZ0FjdGl2ZUF0U3RhcnRPZlNjb3BlID0gdGhpcy50YWdBY3RpdmU7XG5cbiAgICAvLyBBZGFwdGVkIGZyb20gXCJPbmVPZlwiIHN0cnVjdHVyaW5nIHJ1bGUgZXhjZXB0IHRoYXQgaW5cbiAgICAvLyBvcmRlciBmb3IgdGhlIHJ1bGUgdG8gc3VjY2VlZCwgaXQgaGFzIHRvIG1heGltYWxseVxuICAgIC8vIGNvdmVyIHRoZSBlbnRpcmUgc3RyaW5nIHdpdGhpbiB0aGUgeyB9LiBVc2VkIHRvXG4gICAgLy8gZGlmZmVyZW50aWF0ZSBiZXR3ZWVuOlxuICAgIC8vICB7bXlWYXJ9ICAgICAgICAgICAgICAgICAtLSBFeHByZXNzaW9uICh0cnkgZmlyc3QpXG4gICAgLy8gIHtteSBjb250ZW50IGlzIGpvbGx5fSAgIC0tIHNlcXVlbmNlIHdpdGggc2luZ2xlIGVsZW1lbnRcbiAgICBmb3IgKGNvbnN0IHJ1bGUgb2YgcnVsZXMpIHtcbiAgICAgIGNvbnN0IHJ1bGVJZDogbnVtYmVyID0gdGhpcy5CZWdpblJ1bGUoKTtcblxuICAgICAgY29uc3QgcmVzdWx0OiBQYXJzZWRPYmplY3QgPSB0aGlzLlBhcnNlT2JqZWN0KHJ1bGUpIGFzIFBhcnNlZE9iamVjdDtcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgLy8gTm90IHlldCBhdCBlbmQ/XG4gICAgICAgIGlmICh0aGlzLlBlZWsodGhpcy5TcGFjZWQodGhpcy5TdHJpbmcoXCJ9XCIpKSkgPT09IG51bGwpIHtcbiAgICAgICAgICB0aGlzLkZhaWxSdWxlKHJ1bGVJZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRnVsbCBwYXJzZSBvZiBjb250ZW50IHdpdGhpbiBicmFjZXNcbiAgICAgICAgICByZXR1cm4gdGhpcy5TdWNjZWVkUnVsZShydWxlSWQsIHJlc3VsdCkgYXMgUGFyc2VkT2JqZWN0O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLkZhaWxSdWxlKHJ1bGVJZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IElubmVyRXhwcmVzc2lvbiA9ICgpOiBQYXJzZWRPYmplY3QgPT4ge1xuICAgIGNvbnN0IGV4cHIgPSB0aGlzLlBhcnNlKHRoaXMuRXhwcmVzc2lvbikgYXMgRXhwcmVzc2lvbjtcbiAgICBpZiAoZXhwcikge1xuICAgICAgZXhwci5vdXRwdXRXaGVuQ29tcGxldGUgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBleHByO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBJZGVudGlmaWVyV2l0aE1ldGFkYXRhID0gKCk6IElkZW50aWZpZXIgfCBudWxsID0+IHtcbiAgICBjb25zdCBpZCA9IHRoaXMuSWRlbnRpZmllcigpO1xuICAgIGlmIChpZCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBuZXcgSWRlbnRpZmllcihpZCk7XG4gIH07XG5cbiAgLy8gTm90ZTogd2UgYWxsb3cgaWRlbnRpZmllcnMgdGhhdCBzdGFydCB3aXRoIGEgbnVtYmVyLFxuICAvLyBidXQgbm90IGlmIHRoZXkgKm9ubHkqIGNvbXByaXNlIG51bWJlcnNcbiAgcHVibGljIHJlYWRvbmx5IElkZW50aWZpZXIgPSAoKTogc3RyaW5nIHwgbnVsbCA9PiB7XG4gICAgLy8gUGFyc2UgcmVtYWluaW5nIGNoYXJhY3RlcnMgKGlmIGFueSlcbiAgICBjb25zdCBuYW1lID0gdGhpcy5QYXJzZUNoYXJhY3RlcnNGcm9tQ2hhclNldCh0aGlzLmlkZW50aWZpZXJDaGFyU2V0KTtcbiAgICBpZiAobmFtZSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gUmVqZWN0IGlmIGl0J3MganVzdCBhIG51bWJlclxuICAgIGxldCBpc051bWJlckNoYXJzT25seTogYm9vbGVhbiA9IHRydWU7XG4gICAgZm9yIChsZXQgYyBvZiBuYW1lKSB7XG4gICAgICBpZiAoIShjID49IFwiMFwiICYmIGMgPD0gXCI5XCIpKSB7XG4gICAgICAgIGlzTnVtYmVyQ2hhcnNPbmx5ID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc051bWJlckNoYXJzT25seSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5hbWU7XG4gIH07XG5cbiAgLyoqXG4gICAqIEVuZCBMb2dpYyBzZWN0aW9uLlxuICAgKi9cblxuICAvKipcbiAgICogQmVnaW4gU2VxdWVuY2VzIHNlY3Rpb24uXG4gICAqL1xuXG4gIHB1YmxpYyBfc2VxdWVuY2VUeXBlU3ltYm9sczogQ2hhcmFjdGVyU2V0ID0gbmV3IENoYXJhY3RlclNldChcIiEmfiRcIik7XG5cbiAgcHVibGljIHJlYWRvbmx5IElubmVyU2VxdWVuY2UgPSAoKTogU2VxdWVuY2UgfCBudWxsID0+IHtcbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIC8vIERlZmF1bHQgc2VxdWVuY2UgdHlwZVxuICAgIGxldCBzZXFUeXBlOiBTZXF1ZW5jZVR5cGUgPSBTZXF1ZW5jZVR5cGUuU3RvcHBpbmc7XG5cbiAgICAvLyBPcHRpb25hbCBleHBsaWNpdCBzZXF1ZW5jZSB0eXBlXG4gICAgY29uc3QgcGFyc2VkU2VxVHlwZTogU2VxdWVuY2VUeXBlID0gdGhpcy5QYXJzZShcbiAgICAgIHRoaXMuU2VxdWVuY2VUeXBlQW5ub3RhdGlvblxuICAgICkgYXMgU2VxdWVuY2VUeXBlO1xuXG4gICAgaWYgKHBhcnNlZFNlcVR5cGUgIT09IG51bGwpIHtcbiAgICAgIHNlcVR5cGUgPSBwYXJzZWRTZXFUeXBlO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRlbnRMaXN0cyA9IHRoaXMuUGFyc2UodGhpcy5Jbm5lclNlcXVlbmNlT2JqZWN0cykgYXMgQ29udGVudExpc3RbXTtcbiAgICBpZiAoY29udGVudExpc3RzID09PSBudWxsIHx8IGNvbnRlbnRMaXN0cy5sZW5ndGggPD0gMSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBTZXF1ZW5jZShjb250ZW50TGlzdHMsIHNlcVR5cGUpO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBTZXF1ZW5jZVR5cGVBbm5vdGF0aW9uID0gKCk6IFBhcnNlUnVsZVJldHVybiA9PiB7XG4gICAgbGV0IGFubm90YXRpb24gPSB0aGlzLlBhcnNlKFxuICAgICAgdGhpcy5TZXF1ZW5jZVR5cGVTeW1ib2xBbm5vdGF0aW9uXG4gICAgKSBhcyBTZXF1ZW5jZVR5cGU7XG5cbiAgICBpZiAoYW5ub3RhdGlvbiA9PT0gbnVsbCkge1xuICAgICAgYW5ub3RhdGlvbiA9IHRoaXMuUGFyc2UodGhpcy5TZXF1ZW5jZVR5cGVXb3JkQW5ub3RhdGlvbikgYXMgU2VxdWVuY2VUeXBlO1xuICAgIH1cblxuICAgIGlmIChhbm5vdGF0aW9uID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGFubm90YXRpb24pIHtcbiAgICAgIGNhc2UgU2VxdWVuY2VUeXBlLk9uY2U6XG4gICAgICBjYXNlIFNlcXVlbmNlVHlwZS5DeWNsZTpcbiAgICAgIGNhc2UgU2VxdWVuY2VUeXBlLlN0b3BwaW5nOlxuICAgICAgY2FzZSBTZXF1ZW5jZVR5cGUuU2h1ZmZsZTpcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWVudW0tY29tcGFyaXNvblxuICAgICAgY2FzZSBTZXF1ZW5jZVR5cGUuU2h1ZmZsZSB8IFNlcXVlbmNlVHlwZS5TdG9wcGluZzpcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWVudW0tY29tcGFyaXNvblxuICAgICAgY2FzZSBTZXF1ZW5jZVR5cGUuU2h1ZmZsZSB8IFNlcXVlbmNlVHlwZS5PbmNlOlxuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRoaXMuRXJyb3IoYFNlcXVlbmNlIHR5cGUgY29tYmluYXRpb24gbm90IHN1cHBvcnRlZDogJHthbm5vdGF0aW9ufWApO1xuICAgICAgICByZXR1cm4gU2VxdWVuY2VUeXBlLlN0b3BwaW5nO1xuICAgIH1cblxuICAgIHJldHVybiBhbm5vdGF0aW9uO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBTZXF1ZW5jZVR5cGVTeW1ib2xBbm5vdGF0aW9uID0gKCk6IFBhcnNlUnVsZVJldHVybiA9PiB7XG4gICAgaWYgKHRoaXMuX3NlcXVlbmNlVHlwZVN5bWJvbHMgPT09IG51bGwpIHtcbiAgICAgIHRoaXMuX3NlcXVlbmNlVHlwZVN5bWJvbHMgPSBuZXcgQ2hhcmFjdGVyU2V0KFwiISZ+JCBcIik7XG4gICAgfVxuXG4gICAgbGV0IHNlcXVlbmNlVHlwZSA9IDAgYXMgU2VxdWVuY2VUeXBlO1xuICAgIGNvbnN0IHNlcXVlbmNlQW5ub3RhdGlvbnMgPSB0aGlzLlBhcnNlQ2hhcmFjdGVyc0Zyb21DaGFyU2V0KFxuICAgICAgdGhpcy5fc2VxdWVuY2VUeXBlU3ltYm9sc1xuICAgICk7XG5cbiAgICBpZiAoc2VxdWVuY2VBbm5vdGF0aW9ucyA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBzeW1ib2xDaGFyIG9mIHNlcXVlbmNlQW5ub3RhdGlvbnMpIHtcbiAgICAgIHN3aXRjaCAoc3ltYm9sQ2hhcikge1xuICAgICAgICBjYXNlIFwiIVwiOlxuICAgICAgICAgIHNlcXVlbmNlVHlwZSB8PSBTZXF1ZW5jZVR5cGUuT25jZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIiZcIjpcbiAgICAgICAgICBzZXF1ZW5jZVR5cGUgfD0gU2VxdWVuY2VUeXBlLkN5Y2xlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiflwiOlxuICAgICAgICAgIHNlcXVlbmNlVHlwZSB8PSBTZXF1ZW5jZVR5cGUuU2h1ZmZsZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIiRcIjpcbiAgICAgICAgICBzZXF1ZW5jZVR5cGUgfD0gU2VxdWVuY2VUeXBlLlN0b3BwaW5nO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzZXF1ZW5jZVR5cGUgPT09ICgwIGFzIFNlcXVlbmNlVHlwZSkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBzZXF1ZW5jZVR5cGU7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IFNlcXVlbmNlVHlwZVdvcmRBbm5vdGF0aW9uID0gKCk6IFBhcnNlUnVsZVJldHVybiA9PiB7XG4gICAgY29uc3Qgc2VxdWVuY2VUeXBlcyA9IHRoaXMuSW50ZXJsZWF2ZTxTZXF1ZW5jZVR5cGUgfCBudWxsPihcbiAgICAgIHRoaXMuU2VxdWVuY2VUeXBlU2luZ2xlV29yZCxcbiAgICAgIHRoaXMuRXhjbHVkZSh0aGlzLldoaXRlc3BhY2UpXG4gICAgKTtcblxuICAgIGlmIChzZXF1ZW5jZVR5cGVzID09PSBudWxsIHx8IHNlcXVlbmNlVHlwZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5QYXJzZVN0cmluZyhcIjpcIikgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCBjb21iaW5lZFNlcXVlbmNlVHlwZSA9IDAgYXMgU2VxdWVuY2VUeXBlO1xuICAgIGZvciAoY29uc3Qgc2VxVHlwZSBvZiBzZXF1ZW5jZVR5cGVzKSB7XG4gICAgICBjb21iaW5lZFNlcXVlbmNlVHlwZSB8PSBzZXFUeXBlITtcbiAgICB9XG5cbiAgICByZXR1cm4gY29tYmluZWRTZXF1ZW5jZVR5cGU7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IFNlcXVlbmNlVHlwZVNpbmdsZVdvcmQgPSAoKSA9PiB7XG4gICAgbGV0IHNlcVR5cGU6IFNlcXVlbmNlVHlwZSB8IG51bGwgPSBudWxsO1xuXG4gICAgY29uc3Qgd29yZCA9IHRoaXMuUGFyc2UodGhpcy5JZGVudGlmaWVyV2l0aE1ldGFkYXRhKSBhcyBJZGVudGlmaWVyIHwgbnVsbDtcblxuICAgIGlmICh3b3JkICE9PSBudWxsKSB7XG4gICAgICBzd2l0Y2ggKHdvcmQubmFtZSkge1xuICAgICAgICBjYXNlIFwib25jZVwiOlxuICAgICAgICAgIHNlcVR5cGUgPSBTZXF1ZW5jZVR5cGUuT25jZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImN5Y2xlXCI6XG4gICAgICAgICAgc2VxVHlwZSA9IFNlcXVlbmNlVHlwZS5DeWNsZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInNodWZmbGVcIjpcbiAgICAgICAgICBzZXFUeXBlID0gU2VxdWVuY2VUeXBlLlNodWZmbGU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJzdG9wcGluZ1wiOlxuICAgICAgICAgIHNlcVR5cGUgPSBTZXF1ZW5jZVR5cGUuU3RvcHBpbmc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNlcVR5cGUgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBzZXFUeXBlO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBJbm5lclNlcXVlbmNlT2JqZWN0cyA9ICgpOiBDb250ZW50TGlzdFtdID0+IHtcbiAgICBjb25zdCBtdWx0aWxpbmUgPSB0aGlzLlBhcnNlKHRoaXMuTmV3bGluZSkgIT09IG51bGw7XG5cbiAgICBsZXQgcmVzdWx0OiBDb250ZW50TGlzdFtdIHwgbnVsbCA9IG51bGw7XG4gICAgaWYgKG11bHRpbGluZSkge1xuICAgICAgcmVzdWx0ID0gdGhpcy5QYXJzZSh0aGlzLklubmVyTXVsdGlsaW5lU2VxdWVuY2VPYmplY3RzKSBhcyBDb250ZW50TGlzdFtdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQgPSB0aGlzLlBhcnNlKHRoaXMuSW5uZXJJbmxpbmVTZXF1ZW5jZU9iamVjdHMpIGFzIENvbnRlbnRMaXN0W107XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgSW5uZXJJbmxpbmVTZXF1ZW5jZU9iamVjdHMgPSAoKTogQ29udGVudExpc3RbXSB8IG51bGwgPT4ge1xuICAgIGNvbnN0IGludGVybGVhdmVkQ29udGVudEFuZFBpcGVzID0gdGhpcy5JbnRlcmxlYXZlPFBhcnNlZE9iamVjdD4oXG4gICAgICB0aGlzLk9wdGlvbmFsKHRoaXMuTWl4ZWRUZXh0QW5kTG9naWMpLFxuICAgICAgdGhpcy5TdHJpbmcoXCJ8XCIpLFxuICAgICAgbnVsbCxcbiAgICAgIGZhbHNlXG4gICAgKTtcblxuICAgIGlmIChpbnRlcmxlYXZlZENvbnRlbnRBbmRQaXBlcyA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gW107XG5cbiAgICAvLyBUaGUgY29udGVudCBhbmQgcGlwZXMgd29uJ3QgbmVjZXNzYXJpbHkgYmUgcGVyZmVjdGx5IGludGVybGVhdmVkIGluIHRoZSBzZW5zZSB0aGF0XG4gICAgLy8gdGhlIGNvbnRlbnQgY2FuIGJlIG1pc3NpbmcsIGJ1dCBpbiB0aGF0IGNhc2UgaXQncyBpbnRlbmRlZCB0aGF0IHRoZXJlJ3MgYmxhbmsgY29udGVudC5cbiAgICBsZXQganVzdEhhZENvbnRlbnQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBmb3IgKGNvbnN0IGNvbnRlbnRPclBpcGUgb2YgaW50ZXJsZWF2ZWRDb250ZW50QW5kUGlwZXMpIHtcbiAgICAgIC8vIFBpcGUvc2VwYXJhdG9yXG4gICAgICBpZiAoKGNvbnRlbnRPclBpcGUgYXMgYW55KSA9PT0gXCJ8XCIpIHtcbiAgICAgICAgLy8gRXhwZWN0ZWQgY29udGVudCwgc2F3IHBpcGUgLSBuZWVkIGJsYW5rIGNvbnRlbnQgbm93XG4gICAgICAgIGlmICghanVzdEhhZENvbnRlbnQpIHtcbiAgICAgICAgICAvLyBBZGQgYmxhbmsgY29udGVudFxuICAgICAgICAgIHJlc3VsdC5wdXNoKG5ldyBDb250ZW50TGlzdCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGp1c3RIYWRDb250ZW50ID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZWFsIGNvbnRlbnRcbiAgICAgICAgY29uc3QgY29udGVudCA9IGNvbnRlbnRPclBpcGUgYXMgdW5rbm93biBhcyBQYXJzZWRPYmplY3RbXTtcbiAgICAgICAgaWYgKGNvbnRlbnQgPT09IG51bGwpIHtcbiAgICAgICAgICB0aGlzLkVycm9yKFxuICAgICAgICAgICAgYEV4cGVjdGVkIGNvbnRlbnQsIGJ1dCBnb3QgJHtjb250ZW50T3JQaXBlIGFzIHVua25vd24gYXMgc3RyaW5nfSAodGhpcyBpcyBhbiBpbmsgY29tcGlsZXIgYnVnISlgXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQucHVzaChuZXcgQ29udGVudExpc3QoY29udGVudCkpO1xuICAgICAgICB9XG5cbiAgICAgICAganVzdEhhZENvbnRlbnQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEVuZGVkIGluIGEgcGlwZT8gTmVlZCB0byBpbnNlcnQgZmluYWwgYmxhbmsgY29udGVudFxuICAgIGlmICghanVzdEhhZENvbnRlbnQpIHtcbiAgICAgIHJlc3VsdC5wdXNoKG5ldyBDb250ZW50TGlzdCgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBJbm5lck11bHRpbGluZVNlcXVlbmNlT2JqZWN0cyA9ICgpOiBDb250ZW50TGlzdFtdIHwgbnVsbCA9PiB7XG4gICAgdGhpcy5NdWx0aWxpbmVXaGl0ZXNwYWNlKCk7XG5cbiAgICBjb25zdCBjb250ZW50TGlzdHMgPSB0aGlzLk9uZU9yTW9yZShcbiAgICAgIHRoaXMuU2luZ2xlTXVsdGlsaW5lU2VxdWVuY2VFbGVtZW50XG4gICAgKSBhcyBDb250ZW50TGlzdFtdO1xuICAgIGlmIChjb250ZW50TGlzdHMgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBjb250ZW50TGlzdHM7XG4gIH07XG5cbiAgcHVibGljIHJlYWRvbmx5IFNpbmdsZU11bHRpbGluZVNlcXVlbmNlRWxlbWVudCA9ICgpID0+IHtcbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIC8vIE1ha2Ugc3VyZSB3ZSdyZSBub3QgYWNjaWRlbnRhbGx5IHBhcnNpbmcgYSBkaXZlcnRcbiAgICBpZiAodGhpcy5QYXJzZVN0cmluZyhcIi0+XCIpICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5QYXJzZVN0cmluZyhcIi1cIikgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgY29uc3QgY29udGVudDogUGFyc2VkT2JqZWN0W10gPSB0aGlzLlN0YXRlbWVudHNBdExldmVsKFxuICAgICAgU3RhdGVtZW50TGV2ZWwuSW5uZXJCbG9ja1xuICAgICk7XG5cbiAgICBpZiAoY29udGVudCA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5NdWx0aWxpbmVXaGl0ZXNwYWNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEFkZCBuZXdsaW5lIGF0IHRoZSBzdGFydCBvZiBlYWNoIGJyYW5jaFxuICAgICAgY29udGVudC51bnNoaWZ0KG5ldyBUZXh0KFwiXFxuXCIpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IENvbnRlbnRMaXN0KGNvbnRlbnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBFbmQgU2VxdWVuY2VzIHNlY3Rpb24uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBCZWdpbiBTdGF0ZW1lbnRzIHNlY3Rpb24uXG4gICAqL1xuXG4gIHByaXZhdGUgX3N0YXRlbWVudFJ1bGVzQXRMZXZlbDogUGFyc2VSdWxlW11bXSA9IFtdO1xuICBwcml2YXRlIF9zdGF0ZW1lbnRCcmVha1J1bGVzQXRMZXZlbDogUGFyc2VSdWxlW11bXSA9IFtdO1xuXG4gIHB1YmxpYyByZWFkb25seSBTdGF0ZW1lbnRzQXRMZXZlbCA9IChcbiAgICBsZXZlbDogU3RhdGVtZW50TGV2ZWxcbiAgKTogUGFyc2VkT2JqZWN0W10gPT4ge1xuICAgIC8vIENoZWNrIGZvciBlcnJvcjogU2hvdWxkIG5vdCBiZSBhbGxvd2VkIGdhdGhlciBkYXNoZXMgd2l0aGluIGFuIGlubmVyIGJsb2NrXG4gICAgaWYgKGxldmVsID09PSBTdGF0ZW1lbnRMZXZlbC5Jbm5lckJsb2NrKSB7XG4gICAgICBjb25zdCBiYWRHYXRoZXJEYXNoQ291bnQgPSB0aGlzLlBhcnNlKHRoaXMuR2F0aGVyRGFzaGVzKSBhcyBQYXJzZWRPYmplY3Q7XG4gICAgICBpZiAoYmFkR2F0aGVyRGFzaENvdW50ICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuRXJyb3IoXG4gICAgICAgICAgXCJZb3UgY2FuJ3QgdXNlIGEgZ2F0aGVyICh0aGUgZGFzaGVzKSB3aXRoaW4gdGhlIHsgY3VybHkgYnJhY2VzIH0gY29udGV4dC4gRm9yIG11bHRpLWxpbmUgc2VxdWVuY2VzIGFuZCBjb25kaXRpb25zLCB5b3Ugc2hvdWxkIG9ubHkgdXNlIG9uZSBkYXNoLlwiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuSW50ZXJsZWF2ZTxQYXJzZWRPYmplY3Q+KFxuICAgICAgdGhpcy5PcHRpb25hbCh0aGlzLk11bHRpbGluZVdoaXRlc3BhY2UpLFxuICAgICAgKCkgPT4gdGhpcy5TdGF0ZW1lbnRBdExldmVsKGxldmVsKSxcbiAgICAgICgpID0+IHRoaXMuU3RhdGVtZW50c0JyZWFrRm9yTGV2ZWwobGV2ZWwpXG4gICAgKTtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgU3RhdGVtZW50QXRMZXZlbCA9IChsZXZlbDogU3RhdGVtZW50TGV2ZWwpOiBQYXJzZWRPYmplY3QgPT4ge1xuICAgIGNvbnN0IHJ1bGVzQXRMZXZlbDogUGFyc2VSdWxlW10gPVxuICAgICAgdGhpcy5fc3RhdGVtZW50UnVsZXNBdExldmVsW2xldmVsIGFzIG51bWJlcl07XG4gICAgY29uc3Qgc3RhdGVtZW50ID0gdGhpcy5PbmVPZihydWxlc0F0TGV2ZWwpIGFzIFJldHVyblR5cGU7XG5cbiAgICAvLyBGb3Igc29tZSBzdGF0ZW1lbnRzLCBhbGxvdyB0aGVtIHRvIHBhcnNlLCBidXQgY3JlYXRlIGVycm9ycywgc2luY2VcbiAgICAvLyB3cml0ZXJzIG1heSB0aGluayB0aGV5IGNhbiB1c2UgdGhlIHN0YXRlbWVudCwgc28gaXQncyB1c2VmdWwgdG8gaGF2ZVxuICAgIC8vIHRoZSBlcnJvciBtZXNzYWdlLlxuICAgIGlmIChsZXZlbCA9PT0gU3RhdGVtZW50TGV2ZWwuVG9wKSB7XG4gICAgICBpZiAoc3RhdGVtZW50IGluc3RhbmNlb2YgUmV0dXJuVHlwZSkge1xuICAgICAgICB0aGlzLkVycm9yKFwic2hvdWxkIG5vdCBoYXZlIHJldHVybiBzdGF0ZW1lbnQgb3V0c2lkZSBvZiBhIGtub3RcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0YXRlbWVudDtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgU3RhdGVtZW50c0JyZWFrRm9yTGV2ZWwgPSAoXG4gICAgbGV2ZWw6IFN0YXRlbWVudExldmVsXG4gICk6IFBhcnNlUnVsZVJldHVybiA9PiB7XG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICBjb25zdCBicmVha1J1bGVzOiBQYXJzZVJ1bGVbXSA9XG4gICAgICB0aGlzLl9zdGF0ZW1lbnRCcmVha1J1bGVzQXRMZXZlbFtsZXZlbCBhcyBudW1iZXJdO1xuICAgIGNvbnN0IGJyZWFrUnVsZVJlc3VsdCA9IHRoaXMuT25lT2YoYnJlYWtSdWxlcyk7XG4gICAgaWYgKGJyZWFrUnVsZVJlc3VsdCA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJyZWFrUnVsZVJlc3VsdDtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgR2VuZXJhdGVTdGF0ZW1lbnRMZXZlbFJ1bGVzID0gKCkgPT4ge1xuICAgIGNvbnN0IGxldmVsczogU3RhdGVtZW50TGV2ZWxbXSA9IE9iamVjdC52YWx1ZXMoXG4gICAgICBTdGF0ZW1lbnRMZXZlbFxuICAgICkgYXMgU3RhdGVtZW50TGV2ZWxbXTtcblxuICAgIHRoaXMuX3N0YXRlbWVudFJ1bGVzQXRMZXZlbCA9IFwiZlwiXG4gICAgICAucmVwZWF0KGxldmVscy5sZW5ndGgpXG4gICAgICAuc3BsaXQoXCJmXCIpXG4gICAgICAubWFwKCgpID0+IFtdKTtcblxuICAgIHRoaXMuX3N0YXRlbWVudEJyZWFrUnVsZXNBdExldmVsID0gXCJmXCJcbiAgICAgIC5yZXBlYXQobGV2ZWxzLmxlbmd0aClcbiAgICAgIC5zcGxpdChcImZcIilcbiAgICAgIC5tYXAoKCkgPT4gW10pO1xuXG4gICAgZm9yIChjb25zdCBsZXZlbCBvZiBsZXZlbHMpIHtcbiAgICAgIGNvbnN0IHJ1bGVzQXRMZXZlbDogUGFyc2VSdWxlW10gPSBbXTtcbiAgICAgIGNvbnN0IGJyZWFraW5nUnVsZXM6IFBhcnNlUnVsZVtdID0gW107XG5cbiAgICAgIC8vIERpdmVydHMgY2FuIGdvIGFueXdoZXJlXG4gICAgICBydWxlc0F0TGV2ZWwucHVzaCh0aGlzLkxpbmUodGhpcy5NdWx0aURpdmVydCkpO1xuXG4gICAgICAvLyBLbm90cyBjYW4gb25seSBiZSBwYXJzZWQgYXQgVG9wL0dsb2JhbCBzY29wZVxuICAgICAgaWYgKGxldmVsID49IFN0YXRlbWVudExldmVsLlRvcCkge1xuICAgICAgICBydWxlc0F0TGV2ZWwucHVzaCh0aGlzLktub3REZWZpbml0aW9uKTtcbiAgICAgIH1cblxuICAgICAgcnVsZXNBdExldmVsLnB1c2godGhpcy5MaW5lKHRoaXMuQ2hvaWNlKSk7XG5cbiAgICAgIHJ1bGVzQXRMZXZlbC5wdXNoKHRoaXMuTGluZSh0aGlzLkF1dGhvcldhcm5pbmcpKTtcblxuICAgICAgLy8gR2F0aGVyIGxpbmVzIHdvdWxkIGJlIGNvbmZ1c2VkIHdpdGggbXVsdGktbGluZSBibG9jayBzZXBhcmF0b3JzLCBsaWtlXG4gICAgICAvLyB3aXRoaW4gYSBtdWx0aS1saW5lIGlmIHN0YXRlbWVudFxuICAgICAgaWYgKGxldmVsID4gU3RhdGVtZW50TGV2ZWwuSW5uZXJCbG9jaykge1xuICAgICAgICBydWxlc0F0TGV2ZWwucHVzaCh0aGlzLkdhdGhlcik7XG4gICAgICB9XG5cbiAgICAgIC8vIFN0aXRjaGVzIChhbmQgZ2F0aGVycykgY2FuIChjdXJyZW50bHkpIG9ubHkgZ28gaW4gS25vdHMgYW5kIHRvcCBsZXZlbFxuICAgICAgaWYgKGxldmVsID49IFN0YXRlbWVudExldmVsLktub3QpIHtcbiAgICAgICAgcnVsZXNBdExldmVsLnB1c2godGhpcy5TdGl0Y2hEZWZpbml0aW9uKTtcbiAgICAgIH1cblxuICAgICAgLy8gR2xvYmFsIHZhcmlhYmxlIGRlY2xhcmF0aW9ucyBjYW4gZ28gYW55d2hlcmVcbiAgICAgIHJ1bGVzQXRMZXZlbC5wdXNoKHRoaXMuTGluZSh0aGlzLkxpc3REZWNsYXJhdGlvbikpO1xuICAgICAgcnVsZXNBdExldmVsLnB1c2godGhpcy5MaW5lKHRoaXMuVmFyaWFibGVEZWNsYXJhdGlvbikpO1xuICAgICAgcnVsZXNBdExldmVsLnB1c2godGhpcy5MaW5lKHRoaXMuQ29uc3REZWNsYXJhdGlvbikpO1xuICAgICAgcnVsZXNBdExldmVsLnB1c2godGhpcy5MaW5lKHRoaXMuRXh0ZXJuYWxEZWNsYXJhdGlvbikpO1xuXG4gICAgICAvLyBHbG9iYWwgaW5jbHVkZSBjYW4gZ28gYW55d2hlcmVcbiAgICAgIHJ1bGVzQXRMZXZlbC5wdXNoKHRoaXMuTGluZSh0aGlzLkluY2x1ZGVTdGF0ZW1lbnQpKTtcblxuICAgICAgLy8gTm9ybWFsIGxvZ2ljIC8gdGV4dCBjYW4gZ28gYW55d2hlcmVcbiAgICAgIHJ1bGVzQXRMZXZlbC5wdXNoKHRoaXMuTG9naWNMaW5lKTtcbiAgICAgIHJ1bGVzQXRMZXZlbC5wdXNoKHRoaXMuTGluZU9mTWl4ZWRUZXh0QW5kTG9naWMpO1xuXG4gICAgICAvLyAtLS0tLS0tLVxuICAgICAgLy8gQnJlYWtpbmcgcnVsZXNcblxuICAgICAgLy8gQnJlYWsgY3VycmVudCBrbm90IHdpdGggYSBuZXcga25vdFxuICAgICAgaWYgKGxldmVsIDw9IFN0YXRlbWVudExldmVsLktub3QpIHtcbiAgICAgICAgYnJlYWtpbmdSdWxlcy5wdXNoKHRoaXMuS25vdERlY2xhcmF0aW9uKTtcbiAgICAgIH1cblxuICAgICAgLy8gQnJlYWsgY3VycmVudCBzdGl0Y2ggd2l0aCBhIG5ldyBzdGl0Y2hcbiAgICAgIGlmIChsZXZlbCA8PSBTdGF0ZW1lbnRMZXZlbC5TdGl0Y2gpIHtcbiAgICAgICAgYnJlYWtpbmdSdWxlcy5wdXNoKHRoaXMuU3RpdGNoRGVjbGFyYXRpb24pO1xuICAgICAgfVxuXG4gICAgICAvLyBCcmVha2luZyBhbiBpbm5lciBibG9jayAobGlrZSBhIG11bHRpLWxpbmUgY29uZGl0aW9uIHN0YXRlbWVudClcbiAgICAgIGlmIChsZXZlbCA8PSBTdGF0ZW1lbnRMZXZlbC5Jbm5lckJsb2NrKSB7XG4gICAgICAgIGJyZWFraW5nUnVsZXMucHVzaCh0aGlzLlBhcnNlRGFzaE5vdEFycm93KTtcbiAgICAgICAgYnJlYWtpbmdSdWxlcy5wdXNoKHRoaXMuU3RyaW5nKFwifVwiKSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3N0YXRlbWVudFJ1bGVzQXRMZXZlbFtsZXZlbCBhcyBudW1iZXJdID0gcnVsZXNBdExldmVsO1xuICAgICAgdGhpcy5fc3RhdGVtZW50QnJlYWtSdWxlc0F0TGV2ZWxbbGV2ZWwgYXMgbnVtYmVyXSA9IGJyZWFraW5nUnVsZXM7XG4gICAgfVxuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBTa2lwVG9OZXh0TGluZSA9ICgpOiB0eXBlb2YgUGFyc2VTdWNjZXNzID0+IHtcbiAgICB0aGlzLlBhcnNlVW50aWxDaGFyYWN0ZXJzRnJvbVN0cmluZyhcIlxcblxcclwiKTtcbiAgICB0aGlzLlBhcnNlTmV3bGluZSgpO1xuXG4gICAgcmV0dXJuIFBhcnNlU3VjY2VzcztcbiAgfTtcblxuICAvLyBNb2RpZmllciB0byB0dXJuIGEgcnVsZSBpbnRvIG9uZSB0aGF0IGV4cGVjdHMgYSBuZXdsaW5lIG9uIHRoZSBlbmQuXG4gIC8vIGUuZy4gYW55d2hlcmUgeW91IGNhbiB1c2UgXCJNaXhlZFRleHRBbmRMb2dpY1wiIGFzIGEgcnVsZSwgeW91IGNhbiB1c2VcbiAgLy8gXCJMaW5lKE1peGVkVGV4dEFuZExvZ2ljKVwiIHRvIHNwZWNpZnkgdGhhdCBpdCBleHBlY3RzIGEgbmV3bGluZSBhZnRlcndhcmRzLlxuICBwdWJsaWMgcmVhZG9ubHkgTGluZSA9XG4gICAgKGlubGluZVJ1bGU6IFBhcnNlUnVsZSk6IFBhcnNlUnVsZSA9PlxuICAgICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuUGFyc2VPYmplY3QoaW5saW5lUnVsZSk7XG4gICAgICBpZiAocmVzdWx0ID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICB0aGlzLkV4cGVjdCh0aGlzLkVuZE9mTGluZSwgXCJlbmQgb2YgbGluZVwiLCB0aGlzLlNraXBUb05leHRMaW5lKTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gIC8qKlxuICAgKiBFbmQgU3RhdGVtZW50cyBzZWN0aW9uLlxuICAgKi9cblxuICAvKipcbiAgICogQmVnaW4gVGFncyBzZWN0aW9uLlxuICAgKi9cblxuICBwdWJsaWMgcmVhZG9ubHkgU3RhcnRUYWcgPSAoKTogUGFyc2VkT2JqZWN0IHwgbnVsbCA9PiB7XG4gICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICBpZiAodGhpcy5QYXJzZVN0cmluZyhcIiNcIikgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBhcnNpbmdTdHJpbmdFeHByZXNzaW9uKSB7XG4gICAgICB0aGlzLkVycm9yKFxuICAgICAgICBcIlRhZ3MgYXJlbid0IGFsbG93ZWQgaW5zaWRlIG9mIHN0cmluZ3MuIFBsZWFzZSB1c2UgXFxcXCMgaWYgeW91IHdhbnQgYSBoYXNoIHN5bWJvbC5cIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgcmVzdWx0OiBQYXJzZWRPYmplY3QgfCBudWxsID0gbnVsbDtcbiAgICBpZiAodGhpcy50YWdBY3RpdmUpIHtcbiAgICAgIGxldCBjb250ZW50TGlzdCA9IG5ldyBDb250ZW50TGlzdCgpO1xuICAgICAgY29udGVudExpc3QuQWRkQ29udGVudChuZXcgVGFnKC8qaXNTdGFydDoqLyBmYWxzZSkpO1xuICAgICAgY29udGVudExpc3QuQWRkQ29udGVudChuZXcgVGFnKC8qaXNTdGFydDoqLyB0cnVlKSk7XG4gICAgICByZXN1bHQgPSBjb250ZW50TGlzdDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ID0gbmV3IFRhZygvKmlzU3RhcnQ6Ki8gdHJ1ZSk7XG4gICAgfVxuICAgIHRoaXMudGFnQWN0aXZlID0gdHJ1ZTtcblxuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICBwdWJsaWMgRW5kVGFnSWZOZWNlc3Nhcnkob3V0cHV0Q29udGVudExpc3Q6IFBhcnNlZE9iamVjdFtdIHwgbnVsbCk6IHZvaWQ7XG4gIHB1YmxpYyBFbmRUYWdJZk5lY2Vzc2FyeShvdXRwdXRDb250ZW50TGlzdDogQ29udGVudExpc3QgfCBudWxsKTogdm9pZDtcbiAgcHVibGljIEVuZFRhZ0lmTmVjZXNzYXJ5KFxuICAgIG91dHB1dENvbnRlbnRMaXN0OiBQYXJzZWRPYmplY3RbXSB8IENvbnRlbnRMaXN0IHwgbnVsbFxuICApOiB2b2lkIHtcbiAgICBpZiAodGhpcy50YWdBY3RpdmUpIHtcbiAgICAgIGlmIChvdXRwdXRDb250ZW50TGlzdCAhPSBudWxsKSB7XG4gICAgICAgIGlmIChvdXRwdXRDb250ZW50TGlzdCBpbnN0YW5jZW9mIENvbnRlbnRMaXN0KSB7XG4gICAgICAgICAgb3V0cHV0Q29udGVudExpc3QuQWRkQ29udGVudChuZXcgVGFnKC8qaXNTdGFydDoqLyBmYWxzZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG91dHB1dENvbnRlbnRMaXN0LnB1c2gobmV3IFRhZygvKmlzU3RhcnQ6Ki8gZmFsc2UpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy50YWdBY3RpdmUgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRW5kIFRhZ3Mgc2VjdGlvbi5cbiAgICovXG5cbiAgLyoqXG4gICAqIEJlZ2luIFdoaXRlc3BhY2Ugc2VjdGlvbi5cbiAgICovXG5cbiAgcHJpdmF0ZSBfaW5saW5lV2hpdGVzcGFjZUNoYXJzOiBDaGFyYWN0ZXJTZXQgPSBuZXcgQ2hhcmFjdGVyU2V0KFwiIFxcdFwiKTtcblxuICAvLyBIYW5kbGVzIGJvdGggbmV3bGluZSBhbmQgZW5kT2ZGaWxlXG4gIHB1YmxpYyByZWFkb25seSBFbmRPZkxpbmUgPSAoKSA9PiB0aGlzLk9uZU9mKFt0aGlzLk5ld2xpbmUsIHRoaXMuRW5kT2ZGaWxlXSk7XG5cbiAgLy8gQWxsb3cgd2hpdGVzcGFjZSBiZWZvcmUgdGhlIGFjdHVhbCBuZXdsaW5lXG4gIHB1YmxpYyByZWFkb25seSBOZXdsaW5lID0gKCk6IHR5cGVvZiBQYXJzZVN1Y2Nlc3MgfCBudWxsID0+IHtcbiAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgIGNvbnN0IGdvdE5ld2xpbmU6IGJvb2xlYW4gPSB0aGlzLlBhcnNlTmV3bGluZSgpICE9PSBudWxsO1xuXG4gICAgLy8gT3B0aW9uYWwgXFxyLCBkZWZpbml0ZSBcXG4gdG8gc3VwcG9ydCBXaW5kb3dzIChcXHJcXG4pIGFuZCBNYWMvVW5peCAoXFxuKVxuXG4gICAgaWYgKCFnb3ROZXdsaW5lKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gUGFyc2VTdWNjZXNzO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBFbmRPZkZpbGUgPSAoKTogdHlwZW9mIFBhcnNlU3VjY2VzcyB8IG51bGwgPT4ge1xuICAgIHRoaXMuV2hpdGVzcGFjZSgpO1xuXG4gICAgaWYgKCF0aGlzLmVuZE9mSW5wdXQpIHJldHVybiBudWxsO1xuXG4gICAgcmV0dXJuIFBhcnNlU3VjY2VzcztcbiAgfTtcblxuICAvLyBHZW5lcmFsIHB1cnBvc2Ugc3BhY2UsIHJldHVybnMgTi1jb3VudCBuZXdsaW5lcyAoZmFpbHMgaWYgbm8gbmV3bGluZXMpXG4gIHB1YmxpYyByZWFkb25seSBNdWx0aWxpbmVXaGl0ZXNwYWNlID0gKCk6IHR5cGVvZiBQYXJzZVN1Y2Nlc3MgfCBudWxsID0+IHtcbiAgICBsZXQgbmV3bGluZXM6IFBhcnNlUnVsZVJldHVybltdIHwgbnVsbCA9IHRoaXMuT25lT3JNb3JlKHRoaXMuTmV3bGluZSk7XG4gICAgaWYgKG5ld2xpbmVzID09PSBudWxsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBVc2UgY29udGVudCBmaWVsZCBvZiBUb2tlbiB0byBzYXkgaG93IG1hbnkgbmV3bGluZXMgdGhlcmUgd2VyZVxuICAgIC8vIChpbiBtb3N0IGNpcmN1bXN0YW5jZXMgaXQncyB1bmltcG9ydGFudClcbiAgICBjb25zdCBudW1OZXdsaW5lczogbnVtYmVyID0gbmV3bGluZXMubGVuZ3RoO1xuICAgIGlmIChudW1OZXdsaW5lcyA+PSAxKSB7XG4gICAgICByZXR1cm4gUGFyc2VTdWNjZXNzO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBXaGl0ZXNwYWNlID0gKCk6IHR5cGVvZiBQYXJzZVN1Y2Nlc3MgfCBudWxsID0+IHtcbiAgICBjb25zdCBkb25lUGFyc2VkID0gdGhpcy5QYXJzZUNoYXJhY3RlcnNGcm9tQ2hhclNldChcbiAgICAgIHRoaXMuX2lubGluZVdoaXRlc3BhY2VDaGFyc1xuICAgICk7XG5cbiAgICBpZiAoZG9uZVBhcnNlZCAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIFBhcnNlU3VjY2VzcztcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgU3BhY2VkID1cbiAgICAocnVsZTogUGFyc2VSdWxlKTogUGFyc2VSdWxlID0+XG4gICAgKCkgPT4ge1xuICAgICAgdGhpcy5XaGl0ZXNwYWNlKCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuUGFyc2VPYmplY3QocnVsZSk7XG4gICAgICBpZiAocmVzdWx0ID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICB0aGlzLldoaXRlc3BhY2UoKTtcblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBBbnlXaGl0ZXNwYWNlID0gKCk6IHR5cGVvZiBQYXJzZVN1Y2Nlc3MgfCBudWxsID0+IHtcbiAgICBsZXQgYW55V2hpdGVzcGFjZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgd2hpbGUgKHRoaXMuT25lT2YoW3RoaXMuV2hpdGVzcGFjZSwgdGhpcy5NdWx0aWxpbmVXaGl0ZXNwYWNlXSkgIT09IG51bGwpIHtcbiAgICAgIGFueVdoaXRlc3BhY2UgPSB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBhbnlXaGl0ZXNwYWNlID8gUGFyc2VTdWNjZXNzIDogbnVsbDtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgTXVsdGlTcGFjZWQgPVxuICAgIChydWxlOiBQYXJzZVJ1bGUpOiBQYXJzZVJ1bGVSZXR1cm4gPT5cbiAgICAoKSA9PiB7XG4gICAgICB0aGlzLkFueVdoaXRlc3BhY2UoKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5QYXJzZU9iamVjdChydWxlKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuQW55V2hpdGVzcGFjZSgpO1xuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgcHJpdmF0ZSBfZmlsZW5hbWU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIF9leHRlcm5hbEVycm9ySGFuZGxlcjogRXJyb3JIYW5kbGVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgX2ZpbGVIYW5kbGVyOiBJRmlsZUhhbmRsZXIgfCBudWxsID0gbnVsbDtcblxuICAvKipcbiAgICogRW5kIFdoaXRlc3BhY2Ugc2VjdGlvbi5cbiAgICovXG59XG4iLCJpbXBvcnQgeyBJRmlsZUhhbmRsZXIgfSBmcm9tIFwiLi4vSUZpbGVIYW5kbGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBKc29uRmlsZUhhbmRsZXIgaW1wbGVtZW50cyBJRmlsZUhhbmRsZXIge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgcmVhZG9ubHkgZmlsZUhpZXJhcmNoeTogUmVjb3JkPHN0cmluZywgc3RyaW5nPikge31cblxuICByZWFkb25seSBSZXNvbHZlSW5rRmlsZW5hbWUgPSAoZmlsZW5hbWU6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuZmlsZUhpZXJhcmNoeSkuaW5jbHVkZXMoZmlsZW5hbWUpKSByZXR1cm4gZmlsZW5hbWU7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYENhbm5vdCBsb2NhdGUgJHtmaWxlbmFtZX0uIEFyZSB5b3UgdHJ5aW5nIGEgcmVsYXRpdmUgaW1wb3J0ID8gVGhpcyBpcyBub3QgeWV0IGltcGxlbWVudGVkLmBcbiAgICApO1xuICB9O1xuXG4gIHJlYWRvbmx5IExvYWRJbmtGaWxlQ29udGVudHMgPSAoZmlsZW5hbWU6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuZmlsZUhpZXJhcmNoeSkuaW5jbHVkZXMoZmlsZW5hbWUpKSB7XG4gICAgICByZXR1cm4gdGhpcy5maWxlSGllcmFyY2h5W2ZpbGVuYW1lXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW5ub3Qgb3BlbiAke2ZpbGVuYW1lfS5gKTtcbiAgICB9XG4gIH07XG59XG4iLCJpbXBvcnQgeyBDb21waWxlck9wdGlvbnMgfSBmcm9tIFwiLi9Db21waWxlck9wdGlvbnNcIjtcbmltcG9ydCB7IERlYnVnU291cmNlUmFuZ2UgfSBmcm9tIFwiLi9EZWJ1Z1NvdXJjZVJhbmdlXCI7XG5pbXBvcnQgeyBFcnJvclR5cGUgfSBmcm9tIFwiLi9QYXJzZXIvRXJyb3JUeXBlXCI7XG5pbXBvcnQgeyBJbmtQYXJzZXIgfSBmcm9tIFwiLi9QYXJzZXIvSW5rUGFyc2VyXCI7XG5pbXBvcnQgeyBTdG9yeSB9IGZyb20gXCIuLi9lbmdpbmUvU3RvcnlcIjtcbmltcG9ydCB7IFN0b3J5IGFzIFBhcnNlZFN0b3J5IH0gZnJvbSBcIi4vUGFyc2VyL1BhcnNlZEhpZXJhcmNoeS9TdG9yeVwiO1xuaW1wb3J0IHsgRGVidWdNZXRhZGF0YSB9IGZyb20gXCIuLi9lbmdpbmUvRGVidWdNZXRhZGF0YVwiO1xuaW1wb3J0IHsgU3RyaW5nVmFsdWUgfSBmcm9tIFwiLi4vZW5naW5lL1ZhbHVlXCI7XG5pbXBvcnQgeyBhc09yTnVsbCB9IGZyb20gXCIuLi9lbmdpbmUvVHlwZUFzc2VydGlvblwiO1xuaW1wb3J0IHsgR2VuZXJhdGVTdG9yeVN0YXRzLCBTdGF0cyB9IGZyb20gXCIuL1N0YXRzXCI7XG5cbmV4cG9ydCB7IENvbXBpbGVyT3B0aW9ucyB9IGZyb20gXCIuL0NvbXBpbGVyT3B0aW9uc1wiO1xuZXhwb3J0IHsgSW5rUGFyc2VyIH0gZnJvbSBcIi4vUGFyc2VyL0lua1BhcnNlclwiO1xuZXhwb3J0IHsgU3RhdGVtZW50TGV2ZWwgfSBmcm9tIFwiLi9QYXJzZXIvU3RhdGVtZW50TGV2ZWxcIjtcbmV4cG9ydCB7IEpzb25GaWxlSGFuZGxlciB9IGZyb20gXCIuL0ZpbGVIYW5kbGVyL0pzb25GaWxlSGFuZGxlclwiO1xuZXhwb3J0IHsgSW5rTGlzdCwgU3RvcnkgfSBmcm9tIFwiLi4vZW5naW5lL1N0b3J5XCI7XG5cbmV4cG9ydCBjbGFzcyBDb21waWxlciB7XG4gIHByaXZhdGUgX2Vycm9yczogc3RyaW5nW10gPSBbXTtcbiAgZ2V0IGVycm9ycygpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHRoaXMuX2Vycm9ycztcbiAgfVxuXG4gIHByaXZhdGUgX3dhcm5pbmdzOiBzdHJpbmdbXSA9IFtdO1xuICBnZXQgd2FybmluZ3MoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB0aGlzLl93YXJuaW5ncztcbiAgfVxuXG4gIHByaXZhdGUgX2F1dGhvck1lc3NhZ2VzOiBzdHJpbmdbXSA9IFtdO1xuICBnZXQgYXV0aG9yTWVzc2FnZXMoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiB0aGlzLl9hdXRob3JNZXNzYWdlcztcbiAgfVxuXG4gIHByaXZhdGUgX2lucHV0U3RyaW5nOiBzdHJpbmc7XG4gIGdldCBpbnB1dFN0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dFN0cmluZztcbiAgfVxuXG4gIHByaXZhdGUgX29wdGlvbnM6IENvbXBpbGVyT3B0aW9ucztcbiAgZ2V0IG9wdGlvbnMoKTogQ29tcGlsZXJPcHRpb25zIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcbiAgfVxuXG4gIHByaXZhdGUgX3BhcnNlZFN0b3J5OiBQYXJzZWRTdG9yeSB8IG51bGwgPSBudWxsO1xuICBnZXQgcGFyc2VkU3RvcnkoKTogUGFyc2VkU3Rvcnkge1xuICAgIGlmICghdGhpcy5fcGFyc2VkU3RvcnkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9wYXJzZWRTdG9yeTtcbiAgfVxuXG4gIHByaXZhdGUgX3J1bnRpbWVTdG9yeTogU3RvcnkgfCBudWxsID0gbnVsbDtcbiAgZ2V0IHJ1bnRpbWVTdG9yeSgpOiBTdG9yeSB7XG4gICAgaWYgKCF0aGlzLl9ydW50aW1lU3RvcnkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbXBpbGF0aW9uIGZhaWxlZC5cIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3J1bnRpbWVTdG9yeTtcbiAgfVxuXG4gIHByaXZhdGUgX3BhcnNlcjogSW5rUGFyc2VyIHwgbnVsbCA9IG51bGw7XG4gIGdldCBwYXJzZXIoKTogSW5rUGFyc2VyIHtcbiAgICBpZiAoIXRoaXMuX3BhcnNlcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3BhcnNlcjtcbiAgfVxuXG4gIHByaXZhdGUgX2RlYnVnU291cmNlUmFuZ2VzOiBEZWJ1Z1NvdXJjZVJhbmdlW10gPSBbXTtcbiAgZ2V0IGRlYnVnU291cmNlUmFuZ2VzKCk6IERlYnVnU291cmNlUmFuZ2VbXSB7XG4gICAgcmV0dXJuIHRoaXMuX2RlYnVnU291cmNlUmFuZ2VzO1xuICB9XG5cbiAgY29uc3RydWN0b3IoaW5rU291cmNlOiBzdHJpbmcsIG9wdGlvbnM6IENvbXBpbGVyT3B0aW9ucyB8IG51bGwgPSBudWxsKSB7XG4gICAgdGhpcy5faW5wdXRTdHJpbmcgPSBpbmtTb3VyY2U7XG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnMgfHwgbmV3IENvbXBpbGVyT3B0aW9ucygpO1xuICB9XG5cbiAgcHVibGljIHJlYWRvbmx5IENvbXBpbGUgPSAoKTogU3RvcnkgPT4ge1xuICAgIHRoaXMuX3BhcnNlciA9IG5ldyBJbmtQYXJzZXIoXG4gICAgICB0aGlzLmlucHV0U3RyaW5nLFxuICAgICAgdGhpcy5vcHRpb25zLnNvdXJjZUZpbGVuYW1lIHx8IG51bGwsXG4gICAgICB0aGlzLk9uRXJyb3IsXG4gICAgICBudWxsLFxuICAgICAgdGhpcy5vcHRpb25zLmZpbGVIYW5kbGVyXG4gICAgKTtcblxuICAgIHRoaXMuX3BhcnNlZFN0b3J5ID0gdGhpcy5wYXJzZXIuUGFyc2VTdG9yeSgpO1xuXG4gICAgaWYgKHRoaXMuZXJyb3JzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5wYXJzZWRTdG9yeS5jb3VudEFsbFZpc2l0cyA9IHRoaXMub3B0aW9ucy5jb3VudEFsbFZpc2l0cztcbiAgICAgIHRoaXMuX3J1bnRpbWVTdG9yeSA9IHRoaXMucGFyc2VkU3RvcnkuRXhwb3J0UnVudGltZSh0aGlzLk9uRXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9ydW50aW1lU3RvcnkgPSBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnJ1bnRpbWVTdG9yeTtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgUmV0cmlldmVEZWJ1Z1NvdXJjZUZvckxhdGVzdENvbnRlbnQgPSAoKTogdm9pZCA9PiB7XG4gICAgZm9yIChjb25zdCBvdXRwdXRPYmogb2YgdGhpcy5ydW50aW1lU3Rvcnkuc3RhdGUub3V0cHV0U3RyZWFtKSB7XG4gICAgICBjb25zdCB0ZXh0Q29udGVudCA9IGFzT3JOdWxsKG91dHB1dE9iaiwgU3RyaW5nVmFsdWUpO1xuICAgICAgaWYgKHRleHRDb250ZW50ICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHJhbmdlID0gbmV3IERlYnVnU291cmNlUmFuZ2UoXG4gICAgICAgICAgdGV4dENvbnRlbnQudmFsdWU/Lmxlbmd0aCB8fCAwLFxuICAgICAgICAgIHRleHRDb250ZW50LmRlYnVnTWV0YWRhdGEsXG4gICAgICAgICAgdGV4dENvbnRlbnQudmFsdWUgfHwgXCJ1bmtub3duXCJcbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmRlYnVnU291cmNlUmFuZ2VzLnB1c2gocmFuZ2UpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgR2VuZXJhdGVTdGF0cyA9ICgpOiBTdGF0cyB8IG51bGwgPT4ge1xuICAgIGlmICh0aGlzLl9wYXJzZWRTdG9yeSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBHZW5lcmF0ZVN0b3J5U3RhdHModGhpcy5fcGFyc2VkU3RvcnkpO1xuICB9O1xuXG4gIHB1YmxpYyByZWFkb25seSBEZWJ1Z01ldGFkYXRhRm9yQ29udGVudEF0T2Zmc2V0ID0gKFxuICAgIG9mZnNldDogbnVtYmVyXG4gICk6IERlYnVnTWV0YWRhdGEgfCBudWxsID0+IHtcbiAgICBsZXQgY3Vyck9mZnNldCA9IDA7XG5cbiAgICBsZXQgbGFzdFZhbGlkTWV0YWRhdGE6IERlYnVnTWV0YWRhdGEgfCBudWxsID0gbnVsbDtcbiAgICBmb3IgKGNvbnN0IHJhbmdlIG9mIHRoaXMuZGVidWdTb3VyY2VSYW5nZXMpIHtcbiAgICAgIGlmIChyYW5nZS5kZWJ1Z01ldGFkYXRhICE9PSBudWxsKSB7XG4gICAgICAgIGxhc3RWYWxpZE1ldGFkYXRhID0gcmFuZ2UuZGVidWdNZXRhZGF0YTtcbiAgICAgIH1cblxuICAgICAgaWYgKG9mZnNldCA+PSBjdXJyT2Zmc2V0ICYmIG9mZnNldCA8IGN1cnJPZmZzZXQgKyByYW5nZS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGxhc3RWYWxpZE1ldGFkYXRhO1xuICAgICAgfVxuXG4gICAgICBjdXJyT2Zmc2V0ICs9IHJhbmdlLmxlbmd0aDtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBwdWJsaWMgcmVhZG9ubHkgT25FcnJvciA9IChtZXNzYWdlOiBzdHJpbmcsIGVycm9yVHlwZTogRXJyb3JUeXBlKSA9PiB7XG4gICAgc3dpdGNoIChlcnJvclR5cGUpIHtcbiAgICAgIGNhc2UgRXJyb3JUeXBlLkF1dGhvcjpcbiAgICAgICAgdGhpcy5fYXV0aG9yTWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgRXJyb3JUeXBlLldhcm5pbmc6XG4gICAgICAgIHRoaXMuX3dhcm5pbmdzLnB1c2gobWVzc2FnZSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIEVycm9yVHlwZS5FcnJvcjpcbiAgICAgICAgdGhpcy5fZXJyb3JzLnB1c2gobWVzc2FnZSk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdGlvbnMuZXJyb3JIYW5kbGVyICE9PSBudWxsKSB7XG4gICAgICB0aGlzLm9wdGlvbnMuZXJyb3JIYW5kbGVyKG1lc3NhZ2UsIGVycm9yVHlwZSk7XG4gICAgfVxuICB9O1xufVxuIiwiaW1wb3J0IHsgQ2hvaWNlIH0gZnJvbSBcIi4vUGFyc2VyL1BhcnNlZEhpZXJhcmNoeS9DaG9pY2VcIjtcbmltcG9ydCB7IERpdmVydCB9IGZyb20gXCIuL1BhcnNlci9QYXJzZWRIaWVyYXJjaHkvRGl2ZXJ0L0RpdmVydFwiO1xuaW1wb3J0IHsgR2F0aGVyIH0gZnJvbSBcIi4vUGFyc2VyL1BhcnNlZEhpZXJhcmNoeS9HYXRoZXIvR2F0aGVyXCI7XG5pbXBvcnQgeyBLbm90IH0gZnJvbSBcIi4vUGFyc2VyL1BhcnNlZEhpZXJhcmNoeS9Lbm90XCI7XG5pbXBvcnQgeyBTdGl0Y2ggfSBmcm9tIFwiLi9QYXJzZXIvUGFyc2VkSGllcmFyY2h5L1N0aXRjaFwiO1xuaW1wb3J0IHsgU3RvcnkgfSBmcm9tIFwiLi9QYXJzZXIvUGFyc2VkSGllcmFyY2h5L1N0b3J5XCI7XG5pbXBvcnQgeyBUZXh0IH0gZnJvbSBcIi4vUGFyc2VyL1BhcnNlZEhpZXJhcmNoeS9UZXh0XCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RhdHMge1xuICB3b3JkczogbnVtYmVyO1xuICBrbm90czogbnVtYmVyO1xuICBzdGl0Y2hlczogbnVtYmVyO1xuICBmdW5jdGlvbnM6IG51bWJlcjtcbiAgY2hvaWNlczogbnVtYmVyO1xuICBnYXRoZXJzOiBudW1iZXI7XG4gIGRpdmVydHM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEdlbmVyYXRlU3RvcnlTdGF0cyhzdG9yeTogU3RvcnkpOiBTdGF0cyB7XG4gIGxldCBhbGxUZXh0ID0gc3RvcnkuRmluZEFsbChUZXh0KSgpO1xuICBsZXQgd29yZHMgPSAwO1xuICBmb3IgKGNvbnN0IHRleHQgb2YgYWxsVGV4dCkge1xuICAgIGxldCB3b3Jkc0luVGhpc1N0ciA9IDA7XG4gICAgbGV0IHdhc1doaXRlU3BhY2UgPSB0cnVlO1xuICAgIGZvciAoY29uc3QgYyBvZiB0ZXh0LnRleHQpIHtcbiAgICAgIGlmIChjID09IFwiIFwiIHx8IGMgPT0gXCJcXHRcIiB8fCBjID09IFwiXFxuXCIgfHwgYyA9PSBcIlxcclwiKSB7XG4gICAgICAgIHdhc1doaXRlU3BhY2UgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmICh3YXNXaGl0ZVNwYWNlKSB7XG4gICAgICAgIHdvcmRzSW5UaGlzU3RyKys7XG4gICAgICAgIHdhc1doaXRlU3BhY2UgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB3b3JkcyArPSB3b3Jkc0luVGhpc1N0cjtcbiAgfVxuXG4gIGNvbnN0IGtub3RzID0gc3RvcnkuRmluZEFsbChLbm90KSgpO1xuICBjb25zdCBzdGl0Y2hlcyA9IHN0b3J5LkZpbmRBbGwoU3RpdGNoKSgpO1xuICBjb25zdCBjaG9pY2VzID0gc3RvcnkuRmluZEFsbChDaG9pY2UpKCk7XG4gIGNvbnN0IGdhdGhlcnMgPSBzdG9yeS5GaW5kQWxsKEdhdGhlcikoKGcpID0+IGcuZGVidWdNZXRhZGF0YSAhPSBudWxsKTtcbiAgY29uc3QgZGl2ZXJ0cyA9IHN0b3J5LkZpbmRBbGwoRGl2ZXJ0KSgpO1xuXG4gIHJldHVybiB7XG4gICAgd29yZHMsXG4gICAga25vdHM6IGtub3RzLmxlbmd0aCxcbiAgICBmdW5jdGlvbnM6IGtub3RzLmZpbHRlcigoaykgPT4gay5pc0Z1bmN0aW9uKS5sZW5ndGgsXG4gICAgc3RpdGNoZXM6IHN0aXRjaGVzLmxlbmd0aCxcbiAgICBnYXRoZXJzOiBnYXRoZXJzLmxlbmd0aCxcbiAgICBkaXZlcnRzOiBkaXZlcnRzLmxlbmd0aCAtIDEsXG4gICAgY2hvaWNlczogY2hvaWNlcy5sZW5ndGgsXG4gIH07XG59XG4iXSwibmFtZXMiOlsiQ29tcGlsZXJPcHRpb25zIiwiY29uc3RydWN0b3IiLCJzb3VyY2VGaWxlbmFtZSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInBsdWdpbk5hbWVzIiwiY291bnRBbGxWaXNpdHMiLCJlcnJvckhhbmRsZXIiLCJmaWxlSGFuZGxlciIsInRoaXMiLCJEZWJ1Z1NvdXJjZVJhbmdlIiwiZGVidWdNZXRhZGF0YSIsInRleHQiLCJFcnJvclR5cGUiLCJBcmd1bWVudCIsImlkZW50aWZpZXIiLCJpc0J5UmVmZXJlbmNlIiwiaXNEaXZlcnRUYXJnZXQiLCJ0eXBlTmFtZSIsImFzT3JOdWxsIiwib2JqIiwidHlwZSIsInVuc2FmZVR5cGVBc3NlcnRpb24iLCJhc09yVGhyb3dzIiwiRXJyb3IiLCJhc0lOYW1lZENvbnRlbnRPck51bGwiLCJoYXNWYWxpZE5hbWUiLCJuYW1lIiwibnVsbElmVW5kZWZpbmVkIiwiaXNFcXVhdGFibGUiLCJFcXVhbHMiLCJmaWx0ZXJVbmRlZiIsImVsZW1lbnQiLCJQYXJzZWRPYmplY3QiLCJfdGhpcyIsIl9hbHJlYWR5SGFkRXJyb3IiLCJfYWxyZWFkeUhhZFdhcm5pbmciLCJfZGVidWdNZXRhZGF0YSIsIl9ydW50aW1lT2JqZWN0IiwiY29udGVudCIsInBhcmVudCIsIkdldFR5cGUiLCJBZGRDb250ZW50Iiwic3ViQ29udGVudCIsInN1YiIsIkFycmF5IiwiaXNBcnJheSIsInNzIiwiaGFzT3duUHJvcGVydHkiLCJwdXNoIiwiSW5zZXJ0Q29udGVudCIsImluZGV4Iiwic3BsaWNlIiwiRmluZCIsInF1ZXJ5RnVuYyIsInRPYmoiLCJuZXN0ZWRSZXN1bHQiLCJGaW5kQWxsIiwiZm91bmRTb0ZhciIsImZvdW5kIiwiV2FybmluZyIsIm1lc3NhZ2UiLCJzb3VyY2UiLCJ2YWx1ZSIsImhhc093bkRlYnVnTWV0YWRhdGEiLCJCb29sZWFuIiwic3RvcnkiLCJhbmNlc3RvciIsInJ1bnRpbWVPYmplY3QiLCJHZW5lcmF0ZVJ1bnRpbWVPYmplY3QiLCJydW50aW1lUGF0aCIsInBhdGgiLCJjb250YWluZXJGb3JDb3VudGluZyIsImFuY2VzdHJ5IiwicmVzdWx0IiwicmV2ZXJzZSIsIlJlc29sdmVSZWZlcmVuY2VzIiwiY29udGV4dCIsImlzV2FybmluZyIsIkF1dGhvcldhcm5pbmciLCJ3YXJuaW5nTWVzc2FnZSIsInN1cGVyIiwiUGF0aCIsIl9jb21wb25lbnRzIiwiX2NvbXBvbmVudHNTdHJpbmciLCJfaXNSZWxhdGl2ZSIsImNvbXBvbmVudHNTdHJpbmciLCJDb21wb25lbnQiLCJoZWFkIiwidGFpbCIsImNvbmNhdCIsInJlbGF0aXZlIiwiaXNSZWxhdGl2ZSIsImNvbXBvbmVudENvdW50IiwidGFpbENvbXBzIiwic2xpY2UiLCJzZWxmIiwibGFzdENvbXBvbmVudCIsImxhc3RDb21wb25lbnRJZHgiLCJjb250YWluc05hbWVkQ29tcG9uZW50IiwiaSIsImwiLCJpc0luZGV4IiwiR2V0Q29tcG9uZW50IiwiUGF0aEJ5QXBwZW5kaW5nUGF0aCIsInBhdGhUb0FwcGVuZCIsInAiLCJ1cHdhcmRNb3ZlcyIsImlzUGFyZW50Iiwiam9pbiIsInN1YnN0cmluZyIsImNvbXBvbmVudFN0cmluZ3MiLCJzcGxpdCIsInN0ciIsInRlc3QiLCJwYXJzZUludCIsInRvU3RyaW5nIiwib3RoZXJQYXRoIiwiUGF0aEJ5QXBwZW5kaW5nQ29tcG9uZW50IiwiYyIsIkRlYnVnIiwiVmFsdWVUeXBlIiwiUHVzaFBvcFR5cGUiLCJwYXJlbnRJZCIsImluZGV4T3JOYW1lIiwic3RhdGljIiwib3RoZXJDb21wIiwiQXNzZXJ0IiwiY29uZGl0aW9uIiwiY29uc29sZSIsIndhcm4iLCJ0cmFjZSIsIkFzc2VydFR5cGUiLCJ2YXJpYWJsZSIsIk51bGxFeGNlcHRpb24iLCJ0aHJvd051bGxFeGNlcHRpb24iLCJJbmtPYmplY3QiLCJfcGF0aCIsIm93bkRlYnVnTWV0YWRhdGEiLCJEZWJ1Z0xpbmVOdW1iZXJPZlBhdGgiLCJyb290Iiwicm9vdENvbnRlbnRDb250YWluZXIiLCJ0YXJnZXRDb250ZW50IiwiQ29udGVudEF0UGF0aCIsImRtIiwic3RhcnRMaW5lTnVtYmVyIiwiY29tcHMiLCJjaGlsZCIsImNvbnRhaW5lciIsIkNvbnRhaW5lciIsIm5hbWVkQ2hpbGQiLCJ1bnNoaWZ0IiwiaW5kZXhPZiIsIlJlc29sdmVQYXRoIiwibmVhcmVzdENvbnRhaW5lciIsImNvbnRlbnRDb250YWluZXIiLCJDb252ZXJ0UGF0aFRvUmVsYXRpdmUiLCJnbG9iYWxQYXRoIiwib3duUGF0aCIsIm1pblBhdGhMZW5ndGgiLCJNYXRoIiwibWluIiwibGFzdFNoYXJlZFBhdGhDb21wSW5kZXgiLCJvd25Db21wIiwibnVtVXB3YXJkc01vdmVzIiwibmV3UGF0aENvbXBzIiwidXAiLCJUb1BhcmVudCIsImRvd24iLCJDb21wYWN0UGF0aFN0cmluZyIsImdsb2JhbFBhdGhTdHIiLCJyZWxhdGl2ZVBhdGhTdHIiLCJDb3B5IiwiU2V0Q2hpbGQiLCJwcm9wIiwiU3RyaW5nQnVpbGRlciIsInN0cmluZyIsIkxlbmd0aCIsIkFwcGVuZCIsIkFwcGVuZExpbmUiLCJBcHBlbmRGb3JtYXQiLCJmb3JtYXQiLCJfbGVuIiwiYXJncyIsIl9rZXkiLCJyZXBsYWNlIiwibWF0Y2giLCJudW0iLCJDbGVhciIsIklua0xpc3RJdGVtIiwib3JpZ2luTmFtZSIsIml0ZW1OYW1lIiwibmFtZVBhcnRzIiwiTnVsbCIsImlzTnVsbCIsImZ1bGxOYW1lIiwib3RoZXJJdGVtIiwiY29weSIsInNlcmlhbGl6ZWQiLCJKU09OIiwic3RyaW5naWZ5Iiwia2V5IiwicGFyc2UiLCJpc0xpa2VJbmtMaXN0SXRlbSIsImlua0xpc3RJdGVtIiwiaXRlbSIsIklua0xpc3QiLCJNYXAiLCJvcmlnaW5zIiwiX29yaWdpbk5hbWVzIiwib3RoZXJMaXN0Iiwib3RoZXJPcmlnaW5OYW1lcyIsIm9yaWdpbk5hbWVzIiwic2luZ2xlT3JpZ2luTGlzdE5hbWUiLCJvcmlnaW5TdG9yeSIsIlNldEluaXRpYWxPcmlnaW5OYW1lIiwibGlzdERlZmluaXRpb25zIiwiZGVmIiwiVHJ5TGlzdEdldERlZmluaXRpb24iLCJleGlzdHMiLCJzaW5nbGVFbGVtZW50IiwiQWRkIiwiS2V5IiwiVmFsdWUiLCJteUxpc3RJdGVtIiwibGlzdFZhbHVlIiwiX2EiLCJGaW5kU2luZ2xlSXRlbUxpc3RXaXRoTmFtZSIsIkFkZEl0ZW0iLCJpdGVtT3JJdGVtTmFtZSIsInN0b3J5T2JqZWN0Iiwib3JpZ2luIiwiaW50VmFsIiwiVHJ5R2V0VmFsdWVGb3JJdGVtIiwiZm91bmRMaXN0RGVmIiwiQ29udGFpbnNJdGVtV2l0aE5hbWUiLCJuZXdJdGVtIiwiRnJvbVN0cmluZyIsIm9yZGVyZWRJdGVtcyIsIml0ZW1WYWwiLCJWYWx1ZUZvckl0ZW0iLCJDb250YWluc0l0ZW1OYW1lZCIsImZyb21TZXJpYWxpemVkS2V5IiwiQ29udGFpbnNLZXkiLCJoYXMiLCJzZXJpYWxpemVkS2V5Iiwic2V0IiwiUmVtb3ZlIiwiZGVsZXRlIiwiQ291bnQiLCJzaXplIiwib3JpZ2luT2ZNYXhJdGVtIiwibWF4T3JpZ2luTmFtZSIsIm1heEl0ZW0iLCJldmVyeSIsImluaXRpYWxPcmlnaW5OYW1lIiwiU2V0SW5pdGlhbE9yaWdpbk5hbWVzIiwiaW5pdGlhbE9yaWdpbk5hbWVzIiwibWF4IiwibWluSXRlbSIsImludmVyc2UiLCJsaXN0IiwiaXRlbXMiLCJhbGwiLCJVbmlvbiIsInVuaW9uIiwiSW50ZXJzZWN0IiwiaW50ZXJzZWN0aW9uIiwiSGFzSW50ZXJzZWN0aW9uIiwiV2l0aG91dCIsImxpc3RUb1JlbW92ZSIsIkNvbnRhaW5zIiwid2hhdCIsIkdyZWF0ZXJUaGFuIiwiR3JlYXRlclRoYW5PckVxdWFscyIsIkxlc3NUaGFuIiwiTGVzc1RoYW5PckVxdWFscyIsIk1heEFzTGlzdCIsIk1pbkFzTGlzdCIsIkxpc3RXaXRoU3ViUmFuZ2UiLCJtaW5Cb3VuZCIsIm1heEJvdW5kIiwib3JkZXJlZCIsIm1pblZhbHVlIiwibWF4VmFsdWUiLCJOdW1iZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiaXNJbnRlZ2VyIiwic3ViTGlzdCIsIm90aGVySW5rTGlzdCIsInNvcnQiLCJ4IiwieSIsImxvY2FsZUNvbXBhcmUiLCJzaW5nbGVJdGVtIiwic2IiLCJ2YWx1ZU9mIiwiTmFOIiwiU3RvcnlFeGNlcHRpb24iLCJ1c2VFbmRMaW5lTnVtYmVyIiwidHJ5R2V0VmFsdWVGcm9tTWFwIiwibWFwIiwidmFsIiwiZ2V0IiwiQWJzdHJhY3RWYWx1ZSIsInByZWZlcnJlZE51bWJlclR5cGUiLCJJbnQiLCJJbnRWYWx1ZSIsIkZsb2F0IiwiaXNOYU4iLCJGbG9hdFZhbHVlIiwiQm9vbFZhbHVlIiwiU3RyaW5nVmFsdWUiLCJTdHJpbmciLCJEaXZlcnRUYXJnZXRWYWx1ZSIsIkxpc3RWYWx1ZSIsIkNyZWF0ZSIsInZhbHVlT2JqZWN0IiwiQmFkQ2FzdEV4Y2VwdGlvbiIsInRhcmdldFR5cGUiLCJ2YWx1ZVR5cGUiLCJpc1RydXRoeSIsIkJvb2wiLCJDYXN0IiwibmV3VHlwZSIsIl9pc05ld2xpbmUiLCJfaXNJbmxpbmVXaGl0ZXNwYWNlIiwiaXNOZXdsaW5lIiwiaXNJbmxpbmVXaGl0ZXNwYWNlIiwiaXNOb25XaGl0ZXNwYWNlIiwicGFyc2VkSW50IiwiZGVmYXVsdFZhbHVlIiwidHJ5UGFyc2VJbnQiLCJwYXJzZWRGbG9hdCIsInBhcnNlRmxvYXQiLCJ0cnlQYXJzZUZsb2F0IiwiRGl2ZXJ0VGFyZ2V0IiwidGFyZ2V0UGF0aCIsIlZhcmlhYmxlUG9pbnRlclZhbHVlIiwidmFyaWFibGVOYW1lIiwiY29udGV4dEluZGV4IiwiX2NvbnRleHRJbmRleCIsIlZhcmlhYmxlUG9pbnRlciIsIkxpc3QiLCJsaXN0T3JTaW5nbGVJdGVtIiwic2luZ2xlVmFsdWUiLCJvbGRWYWx1ZSIsIm5ld1ZhbHVlIiwib2xkTGlzdCIsIm5ld0xpc3QiLCJTZWFyY2hSZXN1bHQiLCJhcHByb3hpbWF0ZSIsImNvcnJlY3RPYmoiLCJzZWFyY2hSZXN1bHQiLCJfY29udGVudCIsIm5hbWVkQ29udGVudCIsInZpc2l0c1Nob3VsZEJlQ291bnRlZCIsInR1cm5JbmRleFNob3VsZEJlQ291bnRlZCIsImNvdW50aW5nQXRTdGFydE9ubHkiLCJfcGF0aFRvRmlyc3RMZWFmQ29udGVudCIsIm5hbWVkT25seUNvbnRlbnQiLCJuYW1lZE9ubHlDb250ZW50RGljdCIsImlua09iamVjdCIsIm5hbWVkIiwiZXhpc3RpbmdOYW1lZE9ubHkiLCJBZGRUb05hbWVkQ29udGVudE9ubHkiLCJjb3VudEZsYWdzIiwiZmxhZ3MiLCJDb3VudEZsYWdzIiwiVmlzaXRzIiwiVHVybnMiLCJDb3VudFN0YXJ0T25seSIsImZsYWciLCJwYXRoVG9GaXJzdExlYWZDb250ZW50IiwiaW50ZXJuYWxQYXRoVG9GaXJzdExlYWZDb250ZW50IiwiY29tcG9uZW50cyIsImNvbnRlbnRPYmpPckxpc3QiLCJjb250ZW50TGlzdCIsImNvbnRlbnRPYmoiLCJUcnlBZGROYW1lZENvbnRlbnQiLCJuYW1lZENvbnRlbnRPYmoiLCJwYXJ0aWFsUGF0aFN0YXJ0IiwicGFydGlhbFBhdGhMZW5ndGgiLCJjdXJyZW50Q29udGFpbmVyIiwiY3VycmVudE9iaiIsImNvbXAiLCJmb3VuZE9iaiIsIkNvbnRlbnRXaXRoUGF0aENvbXBvbmVudCIsIm5leHRDb250YWluZXIiLCJBZGRDb250ZW50c09mQ29udGFpbmVyIiwib3RoZXJDb250YWluZXIiLCJjb21wb25lbnQiLCJmb3VuZENvbnRlbnQiLCJCdWlsZFN0cmluZ09mSGllcmFyY2h5IiwiaW5kZW50YXRpb24iLCJwb2ludGVkT2JqIiwiYXBwZW5kSW5kZW50YXRpb24iLCJvbmx5TmFtZWQiLCJDb250cm9sQ29tbWFuZCIsImNvbW1hbmRUeXBlIiwiX2NvbW1hbmRUeXBlIiwiQ29tbWFuZFR5cGUiLCJOb3RTZXQiLCJFdmFsU3RhcnQiLCJFdmFsT3V0cHV0IiwiRXZhbEVuZCIsIkR1cGxpY2F0ZSIsIlBvcEV2YWx1YXRlZFZhbHVlIiwiUG9wRnVuY3Rpb24iLCJQb3BUdW5uZWwiLCJCZWdpblN0cmluZyIsIkVuZFN0cmluZyIsIk5vT3AiLCJDaG9pY2VDb3VudCIsIlR1cm5zU2luY2UiLCJSZWFkQ291bnQiLCJSYW5kb20iLCJTZWVkUmFuZG9tIiwiVmlzaXRJbmRleCIsIlNlcXVlbmNlU2h1ZmZsZUluZGV4IiwiU3RhcnRUaHJlYWQiLCJEb25lIiwiRW5kIiwiTGlzdEZyb21JbnQiLCJMaXN0UmFuZ2UiLCJMaXN0UmFuZG9tIiwiQmVnaW5UYWciLCJFbmRUYWciLCJFeHByZXNzaW9uIiwiX3Byb3RvdHlwZVJ1bnRpbWVDb25zdGFudEV4cHJlc3Npb24iLCJvdXRwdXRXaGVuQ29tcGxldGUiLCJSdW50aW1lQ29udGFpbmVyIiwiUnVudGltZUNvbnRyb2xDb21tYW5kIiwiR2VuZXJhdGVJbnRvQ29udGFpbmVyIiwiR2VuZXJhdGVDb25zdGFudEludG9Db250YWluZXIiLCJydW50aW1lT2JqIiwiVm9pZCIsIk5hdGl2ZUZ1bmN0aW9uQ2FsbCIsImZ1bmN0aW9uTmFtZSIsIkdlbmVyYXRlTmF0aXZlRnVuY3Rpb25zSWZOZWNlc3NhcnkiLCJfbmF0aXZlRnVuY3Rpb25zIiwiX25hbWUiLCJfaXNQcm90b3R5cGUiLCJfcHJvdG90eXBlIiwibnVtYmVyT2ZQYXJhbWV0ZXJzIiwiX251bWJlck9mUGFyYW1ldGVycyIsIkNhbGwiLCJwYXJhbWV0ZXJzIiwiaGFzTGlzdCIsIkNhbGxCaW5hcnlMaXN0T3BlcmF0aW9uIiwiY29lcmNlZFBhcmFtcyIsIkNvZXJjZVZhbHVlc1RvU2luZ2xlVHlwZSIsImNvZXJjZWRUeXBlIiwiQ2FsbFR5cGUiLCJwYXJhbWV0ZXJzT2ZTaW5nbGVUeXBlIiwicGFyYW0xIiwidmFsVHlwZSIsInZhbDEiLCJwYXJhbUNvdW50IiwiX29wZXJhdGlvbkZ1bmNzIiwib3BGb3JUeXBlT2JqIiwidmFsMiIsIm9wRm9yVHlwZSIsInJlc3VsdFZhbCIsIkNhbGxMaXN0SW5jcmVtZW50T3BlcmF0aW9uIiwidjEiLCJ2MiIsIm9wIiwiYXNCb29sZWFuT3JUaHJvd3MiLCJsaXN0SW50UGFyYW1zIiwibGlzdFZhbCIsInJlc3VsdElua0xpc3QiLCJsaXN0SXRlbUtleSIsImxpc3RJdGVtVmFsdWUiLCJsaXN0SXRlbSIsImludE9wIiwidGFyZ2V0SW50IiwiaXRlbU9yaWdpbiIsImluY3JlbWVudGVkSXRlbSIsIlRyeUdldEl0ZW1XaXRoVmFsdWUiLCJwYXJhbWV0ZXJzSW4iLCJzcGVjaWFsQ2FzZUxpc3QiLCJwYXJhbWV0ZXJzT3V0IiwiaW5rT2JqZWN0VmFsIiwiY2FzdGVkVmFsdWUiLCJ0IiwiQWRkSW50QmluYXJ5T3AiLCJTdWJ0cmFjdCIsIk11bHRpcGx5IiwiRGl2aWRlIiwiZmxvb3IiLCJNb2QiLCJBZGRJbnRVbmFyeU9wIiwiTmVnYXRlIiwiRXF1YWwiLCJHcmVhdGVyIiwiTGVzcyIsIk5vdEVxdWFscyIsIk5vdCIsIkFuZCIsIk9yIiwiTWF4IiwiTWluIiwiUG93IiwicG93IiwiRmxvb3IiLCJJZGVudGl0eSIsIkNlaWxpbmciLCJBZGRGbG9hdEJpbmFyeU9wIiwiQWRkRmxvYXRVbmFyeU9wIiwiY2VpbCIsIkFkZFN0cmluZ0JpbmFyeU9wIiwiSGFzIiwiaW5jbHVkZXMiLCJIYXNudCIsIkFkZExpc3RCaW5hcnlPcCIsIkFkZExpc3RVbmFyeU9wIiwiSW52ZXJ0IiwiQWxsIiwiTGlzdE1pbiIsIkxpc3RNYXgiLCJWYWx1ZU9mTGlzdCIsImRpdmVydFRhcmdldHNFcXVhbCIsImQxIiwiZDIiLCJkaXZlcnRUYXJnZXRzTm90RXF1YWwiLCJBZGRPcFRvTmF0aXZlRnVuYyIsIkFkZE9wRnVuY0ZvclR5cGUiLCJuYXRpdmVGdW5jIiwiTnVtYmVyRXhwcmVzc2lvbiIsInN1YnR5cGUiLCJpc0ludCIsImlzRmxvYXQiLCJpc0Jvb2wiLCJudW1iZXJFeHByZXNzaW9uIiwiVW5hcnlFeHByZXNzaW9uIiwibmF0aXZlTmFtZUZvck9wIiwiaW5uZXIiLCJpbm5lckV4cHJlc3Npb24iLCJDYWxsV2l0aE5hbWUiLCJXaXRoSW5uZXIiLCJpbm5lck51bWJlciIsIkJpbmFyeUV4cHJlc3Npb24iLCJsZWZ0IiwicmlnaHQiLCJvcE5hbWUiLCJsZWZ0RXhwcmVzc2lvbiIsInJpZ2h0RXhwcmVzc2lvbiIsIk5hdGl2ZU5hbWVGb3JPcCIsImxlZnRVbmFyeSIsIkNoYXJhY3RlclNldCIsImFyZyIsIlNldCIsImFkZCIsIkFkZFJhbmdlIiwic3RhcnQiLCJlbmQiLCJjaGFyQ29kZUF0IiwiZnJvbUNoYXJDb2RlIiwiQWRkQ2hhcmFjdGVycyIsImNoYXJzIiwiRnJvbVJhbmdlIiwiQ2hhcmFjdGVyUmFuZ2UiLCJfc3RhcnQiLCJfZW5kIiwiZXhjbHVkZXMiLCJfY29ycmVzcG9uZGluZ0NoYXJTZXQiLCJfZXhjbHVkZXMiLCJUb0NoYXJhY3RlclNldCIsImlpIiwiRGVmaW5lIiwiQ2hvaWNlUG9pbnQiLCJvbmNlT25seSIsIl9wYXRoT25DaG9pY2UiLCJoYXNDb25kaXRpb24iLCJoYXNTdGFydENvbnRlbnQiLCJoYXNDaG9pY2VPbmx5Q29udGVudCIsImlzSW52aXNpYmxlRGVmYXVsdCIsInBhdGhPbkNob2ljZSIsImNob2ljZVRhcmdldE9iaiIsImNob2ljZVRhcmdldCIsInBhdGhTdHJpbmdPbkNob2ljZSIsIlBvaW50ZXIiLCJSZXNvbHZlIiwiRGl2ZXJ0IiwiX3RhcmdldFBhdGgiLCJ0YXJnZXRPYmoiLCJ0YXJnZXRQb2ludGVyIiwiX3RhcmdldFBvaW50ZXIiLCJTdGFydE9mIiwidGFyZ2V0UGF0aFN0cmluZyIsImhhc1ZhcmlhYmxlVGFyZ2V0IiwidmFyaWFibGVEaXZlcnROYW1lIiwic3RhY2tQdXNoVHlwZSIsInB1c2hlc1RvU3RhY2siLCJpc0V4dGVybmFsIiwiZXh0ZXJuYWxBcmdzIiwiaXNDb25kaXRpb25hbCIsIm90aGVyRGl2ZXJ0IiwidGFyZ2V0U3RyIiwiRnVuY3Rpb24iLCJTeW1ib2xUeXBlIiwiaXNOZXdEZWNsYXJhdGlvbiIsImlzR2xvYmFsIiwicnVudGltZUNob2ljZSIsIl9ydW50aW1lQ2hvaWNlIiwiX2NvbmRpdGlvbiIsInJ1bnRpbWVDb250YWluZXIiLCJfaW5uZXJDb250ZW50Q29udGFpbmVyIiwiaW5uZXJDb250ZW50Q29udGFpbmVyIiwic3RhcnRDb250ZW50IiwiY2hvaWNlT25seUNvbnRlbnQiLCJpbm5lckNvbnRlbnQiLCJfb3V0ZXJDb250YWluZXIiLCJfcmV0dXJuVG9SMSIsIl9yZXR1cm5Ub1IyIiwiX3IxTGFiZWwiLCJfcjJMYWJlbCIsIl9kaXZlcnRUb1N0YXJ0Q29udGVudE91dGVyIiwiX2RpdmVydFRvU3RhcnRDb250ZW50SW5uZXIiLCJfc3RhcnRDb250ZW50UnVudGltZUNvbnRhaW5lciIsImhhc1dlYXZlU3R5bGVJbmxpbmVCcmFja2V0cyIsInZhckFzc2lnbiIsIlJ1bnRpbWVWYXJpYWJsZUFzc2lnbm1lbnQiLCJSdW50aW1lRGl2ZXJ0IiwidmFyRGl2ZXJ0IiwiY2hvaWNlT25seVJ1bnRpbWVDb250ZW50IiwiaW5uZXJDaG9pY2VPbmx5Q29udGVudCIsImluZGVudGF0aW9uRGVwdGgiLCJDaGVja0Zvck5hbWluZ0NvbGxpc2lvbnMiLCJTdWJGbG93QW5kV2VhdmUiLCJTdHJpbmdQYXJzZXJFbGVtZW50IiwiY2hhcmFjdGVySW5kZXgiLCJjaGFyYWN0ZXJJbkxpbmVJbmRleCIsImxpbmVJbmRleCIsInJlcG9ydGVkRXJyb3JJblNjb3BlIiwidW5pcXVlSWQiLCJjdXN0b21GbGFncyIsIkNvcHlGcm9tIiwiZnJvbUVsZW1lbnQiLCJfdW5pcXVlSWRDb3VudGVyIiwiU3F1YXNoRnJvbSIsIlN0cmluZ1BhcnNlclN0YXRlIiwiY3VycmVudEVsZW1lbnQiLCJfc3RhY2siLCJfbnVtRWxlbWVudHMiLCJlcnJvclJlcG9ydGVkQWxyZWFkeUluU2NvcGUiLCJzdGFja0hlaWdodCIsIlB1c2giLCJwcmV2RWxlbWVudCIsIm5ld0VsZW1lbnQiLCJQb3AiLCJleHBlY3RlZFJ1bGVJZCIsIlBlZWsiLCJQZWVrUGVudWx0aW1hdGUiLCJTcXVhc2giLCJwZW51bHRpbWF0ZUVsIiwibGFzdEVsIiwiTm90ZUVycm9yUmVwb3J0ZWQiLCJlbCIsIlBhcnNlU3VjY2VzcyIsIlN5bWJvbCIsIlN0cmluZ1BhcnNlciIsIlBhcnNlUnVsZSIsImhhZEVycm9yIiwiQmVnaW5SdWxlIiwic3RhdGUiLCJGYWlsUnVsZSIsIkNhbmNlbFJ1bGUiLCJTdWNjZWVkUnVsZSIsInN0YXRlQXRTdWNjZWVkUnVsZSIsInN0YXRlQXRCZWdpblJ1bGUiLCJSdWxlRGlkU3VjY2VlZCIsImZpbmFsUmVzdWx0IiwiRXhwZWN0IiwicnVsZSIsInJlY292ZXJ5UnVsZSIsIlBhcnNlT2JqZWN0IiwiYnV0U2F3IiwibGluZVJlbWFpbmRlciIsIkxpbmVSZW1haW5kZXIiLCJFcnJvck9uTGluZSIsIkVycm9yV2l0aFBhcnNlZE9iamVjdCIsImxpbmVOdW1iZXIiLCJlcnJvclR5cGUiLCJQYXJzZVVudGlsQ2hhcmFjdGVyc0Zyb21TdHJpbmciLCJTZXRGbGFnIiwidHJ1ZU9yRmFsc2UiLCJHZXRGbGFnIiwicnVsZUlkIiwic3RhY2tIZWlnaHRCZWZvcmUiLCJQYXJzZSIsIk9uZU9mIiwiYXJyYXkiLCJPbmVPck1vcmUiLCJyZXN1bHRzIiwiT3B0aW9uYWwiLCJFeGNsdWRlIiwiT3B0aW9uYWxFeGNsdWRlIiwiUGFyc2VTdHJpbmciLCJUcnlBZGRSZXN1bHRUb0xpc3QiLCJmbGF0dGVuIiwicmVzdWx0Q29sbGVjdGlvbiIsIkludGVybGVhdmUiLCJydWxlQSIsInJ1bGVCIiwidW50aWxUZXJtaW5hdG9yIiwiZmlyc3RBIiwibGFzdE1haW5SZXN1bHQiLCJvdXRlclJlc3VsdCIsInJlbWFpbmluZ0xlbmd0aCIsImNsaSIsImxpIiwic3VjY2VzcyIsInRlbXBJZHgiLCJfY2hhcnMiLCJQYXJzZVNpbmdsZUNoYXJhY3RlciIsIm1heENvdW50IiwiUGFyc2VDaGFyYWN0ZXJzRnJvbVN0cmluZyIsIlBhcnNlVW50aWxDaGFyYWN0ZXJzRnJvbUNoYXJTZXQiLCJjaGFyU2V0IiwiUGFyc2VDaGFyYWN0ZXJzRnJvbUNoYXJTZXQiLCJtYXhDb3VudE9yU2hvdWxkSW5jbHVkZVN0ckNoYXJzIiwic2hvdWxkSW5jbHVkZUNoYXJzIiwic3RhcnRJbmRleCIsImNvdW50IiwiUGFyc2VJbnQiLCJvbGRJbmRleCIsIm9sZENoYXJhY3RlckluTGluZUluZGV4IiwibmVnYXRpdmUiLCJwYXJzZWRTdHJpbmciLCJudW1iZXJzQ2hhcmFjdGVyU2V0IiwiTUlOX1NBRkVfSU5URUdFUiIsIlBhcnNlRmxvYXQiLCJsZWFkaW5nSW50IiwiYWZ0ZXJEZWNpbWFsUG9pbnRTdHIiLCJQYXJzZU5ld2xpbmUiLCJzdHJQcmVQcm9jIiwiUHJlUHJvY2Vzc0lucHV0U3RyaW5nIiwiaW5wdXRTdHJpbmciLCJjdXJyZW50Q2hhcmFjdGVyIiwiZW5kT2ZJbnB1dCIsInJlbWFpbmluZ1N0cmluZyIsIlBhcnNlVW50aWwiLCJzdG9wUnVsZSIsInBhdXNlQ2hhcmFjdGVycyIsImVuZENoYXJhY3RlcnMiLCJwYXVzZUFuZEVuZCIsInZhbHVlcyIsInJ1bGVSZXN1bHRBdFBhdXNlIiwicGFydGlhbFBhcnNlZFN0cmluZyIsInBhdXNlQ2hhcmFjdGVyIiwiQ29tbWVudEVsaW1pbmF0b3IiLCJfY29tbWVudE9yTmV3bGluZVN0YXJ0Q2hhcmFjdGVyIiwiX2NvbW1lbnRCbG9ja0VuZENoYXJhY3RlciIsIl9uZXdsaW5lQ2hhcmFjdGVycyIsIlByb2Nlc3MiLCJzdHJpbmdMaXN0IiwiQ29tbWVudHNBbmROZXdsaW5lcyIsIk1haW5JbmsiLCJuZXdMaW5lcyIsIlBhcnNlU2luZ2xlQ29tbWVudCIsIkVuZE9mTGluZUNvbW1lbnQiLCJCbG9ja0NvbW1lbnQiLCJzdGFydExpbmVJbmRleCIsImNvbW1lbnRSZXN1bHQiLCJyZXBlYXQiLCJDb25kaXRpb25hbCIsImluaXRpYWxDb25kaXRpb24iLCJicmFuY2hlcyIsIl9yZUpvaW5UYXJnZXQiLCJicmFuY2giLCJicmFuY2hDb250YWluZXIiLCJvd25FeHByZXNzaW9uIiwiaXNFbHNlIiwicGF0aFRvUmVKb2luIiwicmV0dXJuRGl2ZXJ0IiwiVGV4dCIsIkNvbnN0YW50RGVjbGFyYXRpb24iLCJjb25zdGFudE5hbWUiLCJjb25zdGFudElkZW50aWZpZXIiLCJleHByZXNzaW9uIiwiX2V4cHJlc3Npb24iLCJhc3NpZ25lZEV4cHJlc3Npb24iLCJWYXIiLCJGbG93TGV2ZWwiLCJHYXRoZXIiLCJfYiIsImJhc2VUYXJnZXRMZXZlbCIsImJhc2VMZXZlbElzQW1iaWd1b3VzIiwiU3RvcnkiLCJfYmFzZVRhcmdldExldmVsIiwiZmlyc3RDb21wb25lbnQiLCJudW1iZXJPZkNvbXBvbmVudHMiLCJkb3RTZXBhcmF0ZWRDb21wb25lbnRzIiwiX2RvdFNlcGFyYXRlZENvbXBvbmVudHMiLCJmaWx0ZXIiLCJhcmdPbmUiLCJhcmdUd28iLCJXZWF2ZVBvaW50IiwiUmVzb2x2ZUZyb21Db250ZXh0IiwiYmFzZVRhcmdldE9iamVjdCIsIlJlc29sdmVCYXNlVGFyZ2V0IiwiUmVzb2x2ZVRhaWxDb21wb25lbnRzIiwib3JpZ2luYWxDb250ZXh0IiwiZmlyc3RDb21wIiwiYW5jZXN0b3JDb250ZXh0IiwiZGVlcFNlYXJjaCIsImZvdW5kQmFzZSIsIkdldENoaWxkRnJvbUNvbnRleHQiLCJyb290VGFyZ2V0IiwiZm91bmRDb21wb25lbnQiLCJjb21wTmFtZSIsIm1pbmltdW1FeHBlY3RlZExldmVsIiwiZm91bmRGbG93IiwiRmxvd0Jhc2UiLCJmbG93TGV2ZWwiLCJjaGlsZE5hbWUiLCJtaW5pbXVtTGV2ZWwiLCJmb3JjZURlZXBTZWFyY2giLCJhbWJpZ3VvdXNDaGlsZExldmVsIiwid2VhdmVDb250ZXh0IiwiV2VhdmUiLCJXZWF2ZVBvaW50TmFtZWQiLCJmbG93Q29udGV4dCIsInNob3VsZERlZXBTZWFyY2giLCJLbm90IiwiQ29udGVudFdpdGhOYW1lQXRMZXZlbCIsIk9iamVjdCIsIlJldHVyblR5cGUiLCJyZXR1cm5lZEV4cHJlc3Npb24iLCJDbG9zZXN0Rmxvd0Jhc2UiLCJpYW1GbG93YmFzZSIsIklkZW50aWZpZXIiLCJoYXNQYXJhbWV0ZXJzIiwic3ViRmxvd3NCeU5hbWUiLCJfc3ViRmxvd3NCeU5hbWUiLCJpc0Z1bmN0aW9uIiwidG9wTGV2ZWxPYmplY3RzIiwiaXNJbmNsdWRlZFN0b3J5IiwiX3Jvb3RXZWF2ZSIsIl9zdGFydGluZ1N1YkZsb3dEaXZlcnQiLCJfc3RhcnRpbmdTdWJGbG93UnVudGltZSIsIl9maXJzdENoaWxkRmxvdyIsInZhcmlhYmxlRGVjbGFyYXRpb25zIiwiU3BsaXRXZWF2ZUFuZFN1YkZsb3dDb250ZW50IiwiY29udGVudE9ianMiLCJpc1Jvb3RTdG9yeSIsIndlYXZlT2JqcyIsInN1YkZsb3dPYmpzIiwic3ViRmxvdyIsImZpbmFsQ29udGVudCIsIlJlc29sdmVWYXJpYWJsZVdpdGhOYW1lIiwidmFyTmFtZSIsImZyb21Ob2RlIiwib3duZXJGbG93IiwiaXNBcmd1bWVudCIsImlzVGVtcG9yYXJ5IiwiQWRkTmV3VmFyaWFibGVEZWNsYXJhdGlvbiIsInZhckRlY2wiLCJ2YXJhYiIsInByZXZEZWNsRXJyb3IiLCJSZXNvbHZlV2VhdmVQb2ludE5hbWluZyIsImZvdW5kUmV0dXJuIiwiQ2hlY2tGb3JEaXNhbGxvd2VkRnVuY3Rpb25GbG93Q29udHJvbCIsIlN0aXRjaCIsIkdlbmVyYXRlQXJndW1lbnRWYXJpYWJsZUFzc2lnbm1lbnRzIiwiY29udGVudElkeCIsImNoaWxkRmxvdyIsImNoaWxkRmxvd1J1bnRpbWUiLCJleGlzdGluZ0NoaWxkIiwiZXJyb3JNc2ciLCJWYWxpZGF0ZVRlcm1pbmF0aW9uIiwiV2FybmluZ0luVGVybWluYXRpb24iLCJwYXJhbU5hbWUiLCJhc3NpZ24iLCJsZXZlbCIsIndlYXZlUG9pbnRSZXN1bHQiLCJEZWVwU2VhcmNoRm9yQW55TGV2ZWxDb250ZW50Iiwid2VhdmVSZXN1bHRTZWxmIiwiZGVlcFJlc3VsdCIsImFsbERpdmVydHMiLCJkaXZlcnQiLCJpc0Z1bmN0aW9uQ2FsbCIsImFsbENob2ljZXMiLCJDaG9pY2UiLCJjaG9pY2UiLCJ0ZXJtaW5hdGluZ09iamVjdCIsInRlcm1pbmF0aW5nRGl2ZXJ0IiwiaXNUdW5uZWwiLCJ0YXJnZXQiLCJQcmVQcm9jZXNzVG9wTGV2ZWxPYmplY3RzIiwiXyIsIkFyZyIsImpqIiwic3ltYm9sVHlwZSIsIkNvbnRlbnRMaXN0Iiwib2JqZWN0cyIsImRvbnRGbGF0dGVuIiwiVHJpbVRyYWlsaW5nV2hpdGVzcGFjZSIsIlJlZ0V4cCIsImNvbnRlbnRPYmpSdW50aW1lIiwiRG9udEZsYXR0ZW5Db250YWluZXIiLCJtb3JlT2JqZWN0cyIsImNvbnRhaW5lckZvckNvdW50IiwicGF0aEZvckNvdW50IiwicGF0aFN0cmluZ0ZvckNvdW50IiwiVmFyaWFibGVSZWZlcmVuY2UiLCJwYXRoSWRlbnRpZmllcnMiLCJpZCIsInJ1bnRpbWVWYXJSZWYiLCJfcnVudGltZVZhclJlZiIsImlzQ29uc3RhbnRSZWZlcmVuY2UiLCJpc0xpc3RJdGVtUmVmZXJlbmNlIiwiY29uc3RhbnRWYWx1ZSIsImNvbnN0YW50cyIsIlJ1bnRpbWVWYXJpYWJsZVJlZmVyZW5jZSIsImxpc3RJdGVtTmFtZSIsImxpc3ROYW1lIiwiUmVzb2x2ZUxpc3RJdGVtIiwicGFyc2VkUGF0aCIsInRhcmdldEZvckNvdW50IiwidGFyZ2V0RmxvdyIsIkZ1bmN0aW9uQ2FsbCIsInByb3h5RGl2ZXJ0IiwiX3Byb3h5RGl2ZXJ0IiwicnVudGltZURpdmVydCIsImlzQ2hvaWNlQ291bnQiLCJpc1R1cm5zIiwiaXNUdXJuc1NpbmNlIiwiaXNSYW5kb20iLCJpc1NlZWRSYW5kb20iLCJpc0xpc3RSYW5nZSIsImlzTGlzdFJhbmRvbSIsImlzUmVhZENvdW50IiwiX2RpdmVydFRhcmdldFRvQ291bnQiLCJfdmFyaWFibGVSZWZlcmVuY2VUb0NvdW50Iiwic2hvdWxkUG9wUmV0dXJuZWRWYWx1ZSIsImZvdW5kTGlzdCIsIlJlc29sdmVMaXN0IiwidXNpbmdQcm94eURpdmVydCIsImRpdmVydFRhcmdldCIsInZhcmlhYmxlRGl2ZXJ0VGFyZ2V0IiwiQ2FsbEV4aXN0c1dpdGhOYW1lIiwibmF0aXZlQ2FsbCIsIm1zZyIsIlJ1bnRpbWVJbmtMaXN0Iiwic3RyQXJncyIsImF0dGVtcHRpbmdUdXJuQ291bnRPZlZhcmlhYmxlVGFyZ2V0IiwidGFyZ2V0T2JqZWN0IiwiSXNCdWlsdEluIiwiTXVsdGlwbGVDb25kaXRpb25FeHByZXNzaW9uIiwic3ViRXhwcmVzc2lvbnMiLCJjb25kaXRpb25FeHByZXNzaW9ucyIsImlzRmlyc3QiLCJjb25kaXRpb25FeHByIiwiX3J1bnRpbWVEaXZlcnQiLCJydW50aW1lRGl2ZXJ0VGFyZ2V0VmFsdWUiLCJfcnVudGltZURpdmVydFRhcmdldFZhbHVlIiwib3RoZXJEaXZUYXJnZXQiLCJpc0RvbmUiLCJpc0VuZCIsInVzYWdlQ29udGV4dCIsImJhZFVzYWdlIiwiZm91bmRVc2FnZSIsInVzYWdlUGFyZW50IiwiYmluYXJ5RXhwclBhcmVudCIsImZ1bmNDYWxsIiwiQ29uZGl0aW9uYWxTaW5nbGVCcmFuY2giLCJwYXJlbnRGdW5jIiwiaXNFbXB0eSIsImlzVGhyZWFkIiwiUmVzb2x2ZVRhcmdldENvbnRlbnQiLCJDaGVja0FyZ3VtZW50VmFsaWRpdHkiLCJyZXF1aXJlc0FyZ0NvZGVHZW4iLCJ0YXJnZXRBcmd1bWVudHMiLCJhcmdUb1Bhc3MiLCJhcmdFeHBlY3RlZCIsInZhclJlZiIsInZhclBvaW50ZXIiLCJUdW5uZWwiLCJQYXRoQXNWYXJpYWJsZU5hbWUiLCJ2YXJpYWJsZVRhcmdldE5hbWUiLCJmbG93QmFzZVNjb3BlIiwicmVzb2x2ZVJlc3VsdCIsImFyZ3VtZW50IiwiZmluZCIsImEiLCJudW1BcmdzIiwiYnV0Q2xhdXNlIiwiZmxvd0FyZyIsImRpdkFyZ0V4cHIiLCJrbm90Q291bnRQYXRoIiwiQ2hlY2tFeHRlcm5hbEFyZ3VtZW50VmFsaWRpdHkiLCJleHRlcm5hbE5hbWUiLCJleHRlcm5hbCIsImV4dGVybmFscyIsImV4dGVybmFsQXJnQ291bnQiLCJhcmd1bWVudE5hbWVzIiwib3duQXJnQ291bnQiLCJyZXR1cm5TdHJpbmciLCJ0YXJnZXRXYXNGb3VuZCIsImlzQnVpbHRJbiIsIklzRXh0ZXJuYWwiLCJSdW50aW1lUGF0aCIsIkdhdGhlclBvaW50VG9SZXNvbHZlIiwidGFyZ2V0UnVudGltZU9iaiIsIlNlcXVlbmNlRGl2ZXJ0VG9SZXNvbHZlIiwiU2VxdWVuY2VUeXBlIiwiU2VxdWVuY2UiLCJlbGVtZW50Q29udGVudExpc3RzIiwic2VxdWVuY2VUeXBlIiwiX3NlcXVlbmNlRGl2ZXJ0c1RvUmVzb2x2ZSIsIm9uY2UiLCJPbmNlIiwiY3ljbGUiLCJDeWNsZSIsInN0b3BwaW5nIiwiU3RvcHBpbmciLCJzaHVmZmxlIiwiU2h1ZmZsZSIsInNlcUJyYW5jaENvdW50Iiwic2VxdWVuY2VFbGVtZW50cyIsInBvc3RTaHVmZmxlTm9PcCIsImxhc3RJZHgiLCJza2lwU2h1ZmZsZURpdmVydCIsIkFkZERpdmVydFRvUmVzb2x2ZSIsImVsZW1lbnRDb3VudFRvU2h1ZmZsZSIsInBvc3RTZXF1ZW5jZU5vT3AiLCJlbEluZGV4Iiwic2VxdWVuY2VEaXZlcnQiLCJjb250ZW50Q29udGFpbmVyRm9yU2VxdWVuY2VCcmFuY2giLCJzZXFCcmFuY2hDb21wbGV0ZURpdmVydCIsImVsZW1lbnRDb250ZW50TGlzdCIsInNlcUVsT2JqZWN0IiwidG9SZXNvbHZlIiwiVHVubmVsT253YXJkcyIsIl9vdmVycmlkZURpdmVydFRhcmdldCIsIl9kaXZlcnRBZnRlciIsImRpdmVydEFmdGVyIiwicmV0dXJuUnVudGltZU9iaiIsInJldHVyblJ1bnRpbWVDb250YWluZXIiLCJldmFsU3RhcnQiLCJldmFsRW5kIiwiY21kIiwicmV0dXJuRGl2ZXJ0T2JqIiwiX2l0ZW1zIiwiX2l0ZW1OYW1lVG9WYWx1ZXMiLCJDb250YWluc0l0ZW0iLCJMaXN0RGVmaW5pdGlvbiIsInJ1bnRpbWVMaXN0RGVmaW5pdGlvbiIsImFsbEl0ZW1zIiwiZSIsIml0ZW1EZWZpbml0aW9ucyIsInNlcmllc1ZhbHVlIiwiUnVudGltZUxpc3REZWZpbml0aW9uIiwidmFyaWFibGVBc3NpZ25tZW50IiwiX2VsZW1lbnRzQnlOYW1lIiwiSXRlbU5hbWVkIiwiaW5pdGlhbFZhbHVlcyIsIml0ZW1EZWYiLCJpbkluaXRpYWxMaXN0IiwiUnVudGltZUlua0xpc3RJdGVtIiwiY3VycmVudFZhbHVlIiwiZXhwbGljaXRWYWx1ZSIsIlZhcmlhYmxlQXNzaWdubWVudCIsInZhcmlhYmxlSWRlbnRpZmllciIsImlzTmV3VGVtcG9yYXJ5RGVjbGFyYXRpb24iLCJpc0dsb2JhbERlY2xhcmF0aW9uIiwibGlzdERlZmluaXRpb24iLCJpc0RlY2xhcmF0aW9uIiwiX3JlZiIsImlzVGVtcG9yYXJ5TmV3RGVjbGFyYXRpb24iLCJsaXN0RGVmIiwiX3J1bnRpbWVBc3NpZ25tZW50IiwibmV3RGVjbFNjb3BlIiwiVGVtcCIsInZhcmlhYmxlUmVmZXJlbmNlIiwicmVzb2x2ZWRWYXJBc3NpZ25tZW50Iiwicm9vdENvbnRhaW5lciIsIl9yb290Q29udGFpbmVyIiwibmFtZWRXZWF2ZVBvaW50cyIsIl9uYW1lZFdlYXZlUG9pbnRzIiwibGFzdFBhcnNlZFNpZ25pZmljYW50T2JqZWN0IiwibGFzdE9iamVjdCIsImxhc3RUZXh0IiwiSXNHbG9iYWxEZWNsYXJhdGlvbiIsImxhc3RXZWF2ZSIsImNvbnQiLCJpbmRlbnRJbmRleCIsInByZXZpb3VzV2VhdmVQb2ludCIsImFkZENvbnRlbnRUb1ByZXZpb3VzV2VhdmVQb2ludCIsImhhc1NlZW5DaG9pY2VJblNlY3Rpb24iLCJfdW5uYW1lZEdhdGhlckNvdW50IiwiX2Nob2ljZUNvdW50IiwibG9vc2VFbmRzIiwiZ2F0aGVyUG9pbnRzVG9SZXNvbHZlIiwidyIsIndlYXZlUG9pbnQiLCJleGlzdGluZ1dlYXZlUG9pbnQiLCJleGlzdGluZ09iaiIsIl9jIiwiQ29uc3RydWN0V2VhdmVIaWVyYXJjaHlGcm9tSW5kZW50YXRpb24iLCJ3ZWF2ZUluZGVudElkeCIsImJhc2VJbmRlbnRJbmRleCIsImlubmVyV2VhdmVTdGFydElkeCIsImlubmVyV2VhdmVPYmoiLCJ3ZWF2ZUNvbnRlbnRDb3VudCIsIndlYXZlQ29udGVudCIsIndlYXZlIiwiRGV0ZXJtaW5lQmFzZUluZGVudGF0aW9uRnJvbUNvbnRlbnQiLCJBZGRSdW50aW1lRm9yV2VhdmVQb2ludCIsIkFkZFJ1bnRpbWVGb3JOZXN0ZWRXZWF2ZSIsIkFkZEdlbmVyYWxSdW50aW1lQ29udGVudCIsIlBhc3NMb29zZUVuZHNUb0FuY2VzdG9ycyIsIkFkZFJ1bnRpbWVGb3JHYXRoZXIiLCJnYXRoZXIiLCJhdXRvRW50ZXIiLCJnYXRoZXJDb250YWluZXIiLCJsb29zZUVuZFdlYXZlUG9pbnQiLCJsb29zZUVuZCIsImxvb3NlV2VhdmVQb2ludCIsIldlYXZlUG9pbnRIYXNMb29zZUVuZCIsImNsb3Nlc3RJbm5lcldlYXZlQW5jZXN0b3IiLCJjbG9zZXN0T3V0ZXJXZWF2ZUFuY2VzdG9yIiwibmVzdGVkIiwid2VhdmVBbmNlc3RvciIsInJlY2VpdmVkIiwiUmVjZWl2ZUxvb3NlRW5kIiwicmVjZWl2aW5nV2VhdmUiLCJjaGlsZFdlYXZlTG9vc2VFbmQiLCJ2YXJBc3MiLCJDb250ZW50VGhhdEZvbGxvd3NXZWF2ZVBvaW50IiwicmV0dXJuZWQiLCJwYXJlbnRXZWF2ZSIsImxhdGVyT2JqIiwiYmFkVGVybWluYXRpb25IYW5kbGVyIiwibG9vc2VFbmRGbG93IiwiVmFsaWRhdGVGbG93T2ZPYmplY3RzVGVybWluYXRlcyIsIkJhZE5lc3RlZFRlcm1pbmF0aW9uSGFuZGxlciIsInRlcm1pbmF0aW5nT2JqIiwiY29uZGl0aW9uYWwiLCJ0b0xvd2VyQ2FzZSIsIm9iakZsb3ciLCJkZWZhdWx0T2JqIiwidGVybWluYXRlZCIsImZsb3dPYmoiLCJkIiwiaW5uZXJEaXZlcnQiLCJDaGVja0ZvcldlYXZlUG9pbnROYW1pbmdDb2xsaXNpb25zIiwiYW5jZXN0b3JGbG93cyIsImZsb3ciLCJ3ZWF2ZVBvaW50TmFtZSIsIm90aGVyQ29udGVudFdpdGhOYW1lIiwiaXNOZXN0ZWRXZWF2ZSIsImdhdGhlclBvaW50IiwiX293bkV4cHJlc3Npb24iLCJfY29udGVudENvbnRhaW5lciIsIl9jb25kaXRpb25hbERpdmVydCIsIl9pbm5lcldlYXZlIiwiaXNUcnVlQnJhbmNoIiwibWF0Y2hpbmdFcXVhbGl0eSIsImlzSW5saW5lIiwic3RhcnRzV2l0aCIsImR1cGxpY2F0ZXNTdGFja1ZhbHVlIiwibmVlZHNFdmFsIiwiR2VuZXJhdGVSdW50aW1lRm9yQ29udGVudCIsIkN1c3RvbUZsYWdzIiwiRGVidWdNZXRhZGF0YSIsImVuZExpbmVOdW1iZXIiLCJzdGFydENoYXJhY3Rlck51bWJlciIsImVuZENoYXJhY3Rlck51bWJlciIsImZpbGVOYW1lIiwic291cmNlTmFtZSIsIk1lcmdlIiwibmV3RGVidWdNZXRhZGF0YSIsIkV4dGVybmFsRGVjbGFyYXRpb24iLCJBZGRFeHRlcm5hbCIsIkZsb3dEZWNsIiwiV3JhcCIsIl9vYmpUb1dyYXAiLCJnbHVlIiwiR2x1ZSIsIkluY0RlY0V4cHJlc3Npb24iLCJ2YXJJZGVudGlmaWVyIiwiaXNJbmNPckV4cHJlc3Npb24iLCJpc0luYyIsInZhclJlc29sdmVSZXN1bHQiLCJpbmNyZW1lbnREZWNyZW1lbnRXb3JkIiwiSW5jbHVkZWRGaWxlIiwiaW5jbHVkZWRTdG9yeSIsIkluZml4T3BlcmF0b3IiLCJwcmVjZWRlbmNlIiwicmVxdWlyZVdoaXRlc3BhY2UiLCJwYXJlbnRTdG9yeSIsInN0aXRjaE5hbWUiLCJrbm90V2l0aFN0aXRjaE5hbWUiLCJzdGl0Y2giLCJpdGVtSWRlbnRpZmllckxpc3QiLCJydW50aW1lUmF3TGlzdCIsIml0ZW1JZGVudGlmaWVyIiwiTGlzdEVsZW1lbnREZWZpbml0aW9uIiwicGFyZW50TGlzdCIsImluZGVudGlmaWVyIiwiTGlzdEl0ZW0iLCJTdGF0ZW1lbnRMZXZlbCIsImJhc2VUb1N0cmluZyIsInRhZ1RleHQiLCJ0aHJlYWRBdEdlbmVyYXRpb24iLCJzb3VyY2VQYXRoIiwidGFncyIsIm9yaWdpbmFsVGhyZWFkSW5kZXgiLCJDbG9uZSIsIkxpc3REZWZpbml0aW9uc09yaWdpbiIsImxpc3RzIiwiX2xpc3RzIiwiX2FsbFVuYW1iaWd1b3VzTGlzdFZhbHVlQ2FjaGUiLCJsaXN0T2ZMaXN0cyIsImRlZmluaXRpb24iLCJKc29uU2VyaWFsaXNhdGlvbiIsImpBcnJheSIsInNraXBMYXN0IiwialRvayIsIkpUb2tlblRvUnVudGltZU9iamVjdCIsIndyaXRlciIsImRpY3Rpb25hcnkiLCJXcml0ZU9iamVjdFN0YXJ0IiwiV3JpdGVQcm9wZXJ0eVN0YXJ0IiwiV3JpdGVSdW50aW1lT2JqZWN0IiwiV3JpdGVQcm9wZXJ0eUVuZCIsIldyaXRlT2JqZWN0RW5kIiwiV3JpdGVBcnJheVN0YXJ0IiwiV3JpdGVBcnJheUVuZCIsImRpY3QiLCJXcml0ZUludFByb3BlcnR5IiwiV3JpdGVSdW50aW1lQ29udGFpbmVyIiwiZGl2VHlwZUtleSIsIldyaXRlUHJvcGVydHkiLCJjaG9pY2VQb2ludCIsImJvb2xWYWwiLCJXcml0ZUJvb2wiLCJXcml0ZUludCIsImZsb2F0VmFsIiwiV3JpdGVGbG9hdCIsInN0clZhbCIsIldyaXRlIiwiV3JpdGVTdHJpbmdTdGFydCIsIldyaXRlU3RyaW5nSW5uZXIiLCJXcml0ZVN0cmluZ0VuZCIsIldyaXRlSW5rTGlzdCIsImRpdlRhcmdldFZhbCIsInZhclB0clZhbCIsImNvbnRyb2xDbWQiLCJfY29udHJvbENvbW1hbmROYW1lcyIsInJlYWRDb3VudFBhdGgiLCJ0YWciLCJUYWciLCJXcml0ZUNob2ljZSIsImpPYmplY3QiLCJ0b2tlbiIsImZpcnN0Q2hhciIsInByb3BWYWx1ZSIsInZhclB0ciIsImlzRGl2ZXJ0IiwiZGl2UHVzaFR5cGUiLCJyZWFkQ291bnRWYXJSZWYiLCJpc1ZhckFzcyIsImlzR2xvYmFsVmFyIiwiaXNOZXdEZWNsIiwibGlzdENvbnRlbnQiLCJyYXdMaXN0IiwibmFtZXNBc09ianMiLCJuYW1lVG9WYWwiLCJKT2JqZWN0VG9DaG9pY2UiLCJKQXJyYXlUb0NvbnRhaW5lciIsInRvSnNvbiIsIm1lIiwicmVtb3ZlcyIsInNwYWNlIiwiayIsInYiLCJzb21lIiwiciIsIndpdGhvdXROYW1lIiwiaGFzTmFtZVByb3BlcnR5IiwiaGFzVGVybWluYXRvciIsIm5hbWVkQ29udGFpbmVyIiwiV3JpdGVOdWxsIiwiSkFycmF5VG9SdW50aW1lT2JqTGlzdCIsIm5hbWVkQ29udGVudEl0ZW0iLCJuYW1lZFN1YkNvbnRhaW5lciIsImpPYmoiLCJKQXJyYXlUb1RhZ3MiLCJXcml0ZUNob2ljZVRhZ3MiLCJXcml0ZVByb3BlcnR5TmFtZVN0YXJ0IiwiV3JpdGVQcm9wZXJ0eU5hbWVJbm5lciIsIldyaXRlUHJvcGVydHlOYW1lRW5kIiwibGlzdERlZkpzb24iLCJkZWZzT2JqIiwiYWxsRGVmcyIsIm5hbWVWYWx1ZUtleSIsIm5hbWVWYWx1ZSIsIlRPVEFMX1ZBTFVFUyIsIkNhbGxTdGFjayIsImVsZW1lbnRzIiwiY2FsbFN0YWNrIiwiZGVwdGgiLCJjcyIsIl90aHJlYWRzIiwiY2FsbHN0YWNrIiwiY3VycmVudEVsZW1lbnRJbmRleCIsImN1cnJlbnRUaHJlYWQiLCJjYW5Qb3AiLCJfdGhyZWFkQ291bnRlciIsIl9zdGFydE9mUm9vdCIsInN0b3J5Q29udGV4dCIsIlJlc2V0IiwidG9Db3B5Iiwib3RoZXJUaHJlYWQiLCJUaHJlYWQiLCJFbGVtZW50IiwiU2V0SnNvblRva2VuIiwialRocmVhZHMiLCJqVGhyZWFkVG9rIiwialRocmVhZE9iaiIsInRocmVhZCIsIldyaXRlSnNvbiIsIldyaXRlT2JqZWN0IiwiUHVzaFRocmVhZCIsIm5ld1RocmVhZCIsInRocmVhZEluZGV4IiwiRm9ya1RocmVhZCIsImZvcmtlZFRocmVhZCIsIlBvcFRocmVhZCIsImNhblBvcFRocmVhZCIsImVsZW1lbnRJc0V2YWx1YXRlRnJvbUdhbWUiLCJGdW5jdGlvbkV2YWx1YXRpb25Gcm9tR2FtZSIsImV4dGVybmFsRXZhbHVhdGlvblN0YWNrSGVpZ2h0Iiwib3V0cHV0U3RyZWFtTGVuZ3RoV2l0aFB1c2hlZCIsImN1cnJlbnRQb2ludGVyIiwiZXZhbHVhdGlvblN0YWNrSGVpZ2h0V2hlblB1c2hlZCIsImZ1bmN0aW9uU3RhcnRJbk91dHB1dFN0cmVhbSIsIkNhblBvcCIsInBvcCIsIkdldFRlbXBvcmFyeVZhcmlhYmxlV2l0aE5hbWUiLCJ2YXJWYWx1ZSIsInRlbXBvcmFyeVZhcmlhYmxlcyIsIlNldFRlbXBvcmFyeVZhcmlhYmxlIiwiZGVjbGFyZU5ldyIsImNvbnRleHRFbGVtZW50IiwiUmV0YWluTGlzdE9yaWdpbnNGb3JBc3NpZ25tZW50IiwiQ29udGV4dEZvclZhcmlhYmxlTmFtZWQiLCJUaHJlYWRXaXRoSW5kZXgiLCJmaWx0ZXJlZCIsImNhbGxTdGFja1RyYWNlIiwiaXNDdXJyZW50IiwicG9pbnRlciIsImluRXhwcmVzc2lvbkV2YWx1YXRpb24iLCJwcmV2aW91c1BvaW50ZXIiLCJqVGhyZWFkQ2FsbHN0YWNrIiwiakVsVG9rIiwiY3VycmVudENvbnRhaW5lclBhdGhTdHIiLCJqRWxlbWVudE9iaiIsInB1c2hQb3BUeXBlIiwiY3VycmVudENvbnRhaW5lclBhdGhTdHJUb2tlbiIsInRocmVhZFBvaW50ZXJSZXN1bHQiLCJ0ZW1wcyIsIkpPYmplY3RUb0RpY3Rpb25hcnlSdW50aW1lT2JqcyIsImNsZWFyIiwicHJldkNvbnRlbnRPYmpQYXRoIiwicHJldlBhdGgiLCJQb2ludGVyQXRQYXRoIiwiV3JpdGVEaWN0aW9uYXJ5UnVudGltZU9ianMiLCJyZXNvbHZlZFBvaW50ZXIiLCJWYXJpYWJsZXNTdGF0ZSIsInZhcmlhYmxlQ2hhbmdlZEV2ZW50IiwiY2FsbGJhY2siLCJ2YXJpYWJsZUNoYW5nZWRFdmVudENhbGxiYWNrcyIsIlN0YXJ0VmFyaWFibGVPYnNlcnZhdGlvbiIsIl9iYXRjaE9ic2VydmluZ1ZhcmlhYmxlQ2hhbmdlcyIsIl9jaGFuZ2VkVmFyaWFibGVzRm9yQmF0Y2hPYnMiLCJDb21wbGV0ZVZhcmlhYmxlT2JzZXJ2YXRpb24iLCJjaGFuZ2VkVmFycyIsIl9nbG9iYWxWYXJpYWJsZXMiLCJwYXRjaCIsImNoYW5nZWRWYXJpYWJsZXMiLCJwYXRjaGVkVmFsIiwiVHJ5R2V0R2xvYmFsIiwiTm90aWZ5T2JzZXJ2ZXJzIiwiX2NhbGxTdGFjayIsIiQiLCJ2YXJDb250ZW50cyIsIl9kZWZhdWx0R2xvYmFsVmFyaWFibGVzIiwiU2V0R2xvYmFsIiwibGlzdERlZnNPcmlnaW4iLCJfbGlzdERlZnNPcmlnaW4iLCJQcm94eSIsIkFwcGx5UGF0Y2giLCJuYW1lZFZhcktleSIsIm5hbWVkVmFyVmFsdWUiLCJnbG9iYWxzIiwialRva2VuIiwidmFyVmFsS2V5IiwidmFyVmFsVmFsdWUiLCJsb2FkZWRUb2tlbiIsInRva2VuSW5rT2JqZWN0Iiwia2V5VmFsS2V5Iiwia2V5VmFsVmFsdWUiLCJkb250U2F2ZURlZmF1bHRWYWx1ZXMiLCJkZWZhdWx0VmFsIiwiUnVudGltZU9iamVjdHNFcXVhbCIsIm9iajEiLCJvYmoyIiwiR2V0VmFyaWFibGVXaXRoTmFtZSIsIkdldFJhd1ZhcmlhYmxlV2l0aE5hbWUiLCJWYWx1ZUF0VmFyaWFibGVQb2ludGVyIiwiVHJ5R2V0RGVmYXVsdFZhcmlhYmxlVmFsdWUiLCJHbG9iYWxWYXJpYWJsZUV4aXN0c1dpdGhOYW1lIiwidmFyaWFibGVWYWx1ZSIsIkFzc2lnbiIsInNldEdsb2JhbCIsIlJlc29sdmVWYXJpYWJsZVBvaW50ZXIiLCJleGlzdGluZ1BvaW50ZXIiLCJTbmFwc2hvdERlZmF1bHRHbG9iYWxzIiwiQWRkQ2hhbmdlZFZhcmlhYmxlIiwiR2V0Q29udGV4dEluZGV4T2ZWYXJpYWJsZU5hbWVkIiwiZG91YmxlUmVkaXJlY3Rpb25Qb2ludGVyIiwiT2JzZXJ2ZVZhcmlhYmxlQ2hhbmdlIiwiUFJORyIsInNlZWQiLCJuZXh0IiwibmV4dEZsb2F0IiwiU3RhdGVQYXRjaCIsIl9nbG9iYWxzIiwiX2NoYW5nZWRWYXJpYWJsZXMiLCJ2aXNpdENvdW50cyIsIl92aXNpdENvdW50cyIsInR1cm5JbmRpY2VzIiwiX3R1cm5JbmRpY2VzIiwiVHJ5R2V0VmlzaXRDb3VudCIsIlNldFZpc2l0Q291bnQiLCJTZXRUdXJuSW5kZXgiLCJUcnlHZXRUdXJuSW5kZXgiLCJTaW1wbGVKc29uIiwiUmVhZGVyIiwiVG9EaWN0aW9uYXJ5IiwiVG9BcnJheSIsIl9yb290T2JqZWN0IiwiV3JpdGVyIiwiX2N1cnJlbnRQcm9wZXJ0eU5hbWUiLCJfY3VycmVudFN0cmluZyIsIl9zdGF0ZVN0YWNrIiwiX2NvbGxlY3Rpb25TdGFjayIsIl9wcm9wZXJ0eU5hbWVTdGFjayIsIl9qc29uT2JqZWN0IiwiU3RhcnROZXdPYmplY3QiLCJuZXdPYmplY3QiLCJTdGF0ZSIsIlByb3BlcnR5IiwiY3VycmVudENvbGxlY3Rpb24iLCJjdXJyZW50UHJvcGVydHlOYW1lIiwicHJvcGVydHlOYW1lIiwiTm9uZSIsIlN0YXRlRWxlbWVudCIsImlubmVyT3JDb250ZW50IiwiV3JpdGVGbG9hdFByb3BlcnR5IiwiSW5jcmVtZW50Q2hpbGRDb3VudCIsImNoaWxkQ291bnQiLCJQcm9wZXJ0eU5hbWUiLCJfYWRkVG9DdXJyZW50T2JqZWN0IiwiZXJyb3IiLCJQT1NJVElWRV9JTkZJTklUWSIsIk5FR0FUSVZFX0lORklOSVRZIiwiY3VyckVsIiwiRmxvdyIsIm91dHB1dFN0cmVhbSIsImN1cnJlbnRDaG9pY2VzIiwiakNob2ljZVRocmVhZHNPYmoiLCJMb2FkRmxvd0Nob2ljZVRocmVhZHMiLCJXcml0ZUxpc3RSdW50aW1lT2JqcyIsImhhc0Nob2ljZVRocmVhZHMiLCJqQ2hvaWNlVGhyZWFkcyIsImZvdW5kQWN0aXZlVGhyZWFkIiwialNhdmVkQ2hvaWNlVGhyZWFkIiwiU3RvcnlTdGF0ZSIsIlRvSnNvbiIsImluZGVudGVkIiwiTG9hZEpzb24iLCJqc29uIiwiVGV4dFRvRGljdGlvbmFyeSIsIkxvYWRKc29uT2JqIiwib25EaWRMb2FkU3RhdGUiLCJWaXNpdENvdW50QXRQYXRoU3RyaW5nIiwicGF0aFN0cmluZyIsInZpc2l0Q291bnRPdXQiLCJfcGF0Y2giLCJWaXNpdENvdW50Rm9yQ29udGFpbmVyIiwiY29udGFpbmVyUGF0aFN0ciIsImNvdW50MiIsIkluY3JlbWVudFZpc2l0Q291bnRGb3JDb250YWluZXIiLCJjdXJyQ291bnQiLCJSZWNvcmRUdXJuSW5kZXhWaXNpdFRvQ29udGFpbmVyIiwiY3VycmVudFR1cm5JbmRleCIsIlR1cm5zU2luY2VGb3JDb250YWluZXIiLCJpbmRleDIiLCJjYWxsc3RhY2tEZXB0aCIsIl9jdXJyZW50RmxvdyIsImNhbkNvbnRpbnVlIiwiZ2VuZXJhdGVkQ2hvaWNlcyIsImN1cnJlbnRFcnJvcnMiLCJfY3VycmVudEVycm9ycyIsImN1cnJlbnRXYXJuaW5ncyIsIl9jdXJyZW50V2FybmluZ3MiLCJ2YXJpYWJsZXNTdGF0ZSIsIl92YXJpYWJsZXNTdGF0ZSIsImV2YWx1YXRpb25TdGFjayIsIl9ldmFsdWF0aW9uU3RhY2siLCJfY3VycmVudFR1cm5JbmRleCIsImN1cnJlbnRQYXRoU3RyaW5nIiwicHJldmlvdXNQYXRoU3RyaW5nIiwiaGFzRXJyb3IiLCJoYXNXYXJuaW5nIiwiY3VycmVudFRleHQiLCJfb3V0cHV0U3RyZWFtVGV4dERpcnR5IiwiaW5UYWciLCJvdXRwdXRPYmoiLCJ0ZXh0Q29udGVudCIsImNvbnRyb2xDb21tYW5kIiwiX2N1cnJlbnRUZXh0IiwiQ2xlYW5PdXRwdXRXaGl0ZXNwYWNlIiwiY3VycmVudFdoaXRlc3BhY2VTdGFydCIsInN0YXJ0T2ZMaW5lIiwiY2hhckF0IiwiY3VycmVudFRhZ3MiLCJfb3V0cHV0U3RyZWFtVGFnc0RpcnR5IiwiX2N1cnJlbnRUYWdzIiwidHh0IiwiY3VycmVudEZsb3dOYW1lIiwiY3VycmVudEZsb3dJc0RlZmF1bHRGbG93Iiwia0RlZmF1bHRGbG93TmFtZSIsImFsaXZlRmxvd05hbWVzIiwiX2FsaXZlRmxvd05hbWVzRGlydHkiLCJfYWxpdmVGbG93TmFtZXMiLCJfbmFtZWRGbG93cyIsImZsb3dOYW1lIiwia2V5cyIsImtJbmtTYXZlU3RhdGVWZXJzaW9uIiwia01pbkNvbXBhdGlibGVMb2FkVmVyc2lvbiIsImRpdmVydGVkUG9pbnRlciIsInN0b3J5U2VlZCIsInByZXZpb3VzUmFuZG9tIiwiZGlkU2FmZUV4aXQiLCJPdXRwdXRTdHJlYW1EaXJ0eSIsInRpbWVTZWVkIiwiRGF0ZSIsImdldFRpbWUiLCJHb1RvU3RhcnQiLCJtYWluQ29udGVudENvbnRhaW5lciIsIlN3aXRjaEZsb3dfSW50ZXJuYWwiLCJTd2l0Y2hUb0RlZmF1bHRGbG93X0ludGVybmFsIiwiUmVtb3ZlRmxvd19JbnRlcm5hbCIsIkNvcHlBbmRTdGFydFBhdGNoaW5nIiwiZm9yQmFja2dyb3VuZFNhdmUiLCJuYW1lZEZsb3dLZXkiLCJuYW1lZEZsb3dWYWx1ZSIsIlJlc3RvcmVBZnRlclBhdGNoIiwiQXBwbHlBbnlQYXRjaCIsIkFwcGx5Q291bnRDaGFuZ2VzIiwibmV3Q291bnQiLCJpc1Zpc2l0IiwiV3JpdGVJbnREaWN0aW9uYXJ5IiwiaW5rVmVyc2lvbkN1cnJlbnQiLCJqU2F2ZVZlcnNpb24iLCJmbG93c09iaiIsImZsb3dzT2JqRGljdCIsImZsb3dzT2JqRGljdEVudHJpZXMiLCJlbnRyaWVzIiwibmFtZWRGbG93T2JqS2V5IiwibmFtZWRGbG93T2JqVmFsdWUiLCJjdXJyRmxvd05hbWUiLCJjdXJyZW50RGl2ZXJ0VGFyZ2V0UGF0aCIsImRpdmVydFBhdGgiLCJKT2JqZWN0VG9JbnREaWN0aW9uYXJ5IiwiUmVzZXRFcnJvcnMiLCJSZXNldE91dHB1dCIsIm9ianMiLCJQdXNoVG9PdXRwdXRTdHJlYW0iLCJsaXN0VGV4dCIsIlRyeVNwbGl0dGluZ0hlYWRUYWlsV2hpdGVzcGFjZSIsInRleHRPYmoiLCJQdXNoVG9PdXRwdXRTdHJlYW1JbmRpdmlkdWFsIiwiUG9wRnJvbU91dHB1dFN0cmVhbSIsInNpbmdsZSIsImhlYWRGaXJzdE5ld2xpbmVJZHgiLCJoZWFkTGFzdE5ld2xpbmVJZHgiLCJ0YWlsTGFzdE5ld2xpbmVJZHgiLCJ0YWlsRmlyc3ROZXdsaW5lSWR4IiwibGlzdFRleHRzIiwiaW5uZXJTdHJTdGFydCIsImlubmVyU3RyRW5kIiwibGVhZGluZ1NwYWNlcyIsImlubmVyU3RyVGV4dCIsIm51bVNwYWNlcyIsInRyYWlsaW5nU3BhY2VzIiwiaW5jbHVkZUluT3V0cHV0IiwiVHJpbU5ld2xpbmVzRnJvbU91dHB1dFN0cmVhbSIsImZ1bmN0aW9uVHJpbUluZGV4IiwiZ2x1ZVRyaW1JbmRleCIsIm8iLCJ0cmltSW5kZXgiLCJSZW1vdmVFeGlzdGluZ0dsdWUiLCJjYWxsU3RhY2tFbGVtZW50cyIsIm91dHB1dFN0cmVhbUVuZHNJbk5ld2xpbmUiLCJvdXRwdXRTdHJlYW1Db250YWluc0NvbnRlbnQiLCJyZW1vdmVXaGl0ZXNwYWNlRnJvbSIsImluU3RyaW5nRXZhbHVhdGlvbiIsIlB1c2hFdmFsdWF0aW9uU3RhY2siLCJuIiwiUG9wRXZhbHVhdGlvblN0YWNrIiwibnVtYmVyT2ZPYmplY3RzIiwiUGVla0V2YWx1YXRpb25TdGFjayIsIkZvcmNlRW5kIiwiVHJpbVdoaXRlc3BhY2VGcm9tRnVuY3Rpb25FbmQiLCJmdW5jdGlvblN0YXJ0UG9pbnQiLCJQb3BDYWxsU3RhY2siLCJwb3BUeXBlIiwiU2V0Q2hvc2VuUGF0aCIsImluY3JlbWVudGluZ1R1cm5JbmRleCIsIm5ld1BvaW50ZXIiLCJTdGFydEZ1bmN0aW9uRXZhbHVhdGlvbkZyb21HYW1lIiwiZnVuY0NvbnRhaW5lciIsIlBhc3NBcmd1bWVudHNUb0V2YWx1YXRpb25TdGFjayIsIlRyeUV4aXRGdW5jdGlvbkV2YWx1YXRpb25Gcm9tR2FtZSIsIkNvbXBsZXRlRnVuY3Rpb25FdmFsdWF0aW9uRnJvbUdhbWUiLCJvcmlnaW5hbEV2YWx1YXRpb25TdGFja0hlaWdodCIsInJldHVybmVkT2JqIiwicG9wcGVkT2JqIiwicmV0dXJuVmFsIiwiQWRkRXJyb3IiLCJTdG9wd2F0Y2giLCJzdGFydFRpbWUiLCJFbGFwc2VkTWlsbGlzZWNvbmRzIiwiU3RhcnQiLCJTdG9wIiwiblZhbCIsImlzRmluaXRlIiwiY2hvaWNlcyIsIl9zdGF0ZSIsIklmQXN5bmNXZUNhbnQiLCJfbGlzdERlZmluaXRpb25zIiwiU3RhcnRQcm9maWxpbmciLCJFbmRQcm9maWxpbmciLCJpbmtWZXJzaW9uTWluaW11bUNvbXBhdGlibGUiLCJvbkVycm9yIiwib25EaWRDb250aW51ZSIsIm9uTWFrZUNob2ljZSIsIm9uRXZhbHVhdGVGdW5jdGlvbiIsIm9uQ29tcGxldGVFdmFsdWF0ZUZ1bmN0aW9uIiwib25DaG9vc2VQYXRoU3RyaW5nIiwiX3ByZXZDb250YWluZXJzIiwiYWxsb3dFeHRlcm5hbEZ1bmN0aW9uRmFsbGJhY2tzIiwiX3ZhcmlhYmxlT2JzZXJ2ZXJzIiwiX2hhc1ZhbGlkYXRlZEV4dGVybmFscyIsIl90ZW1wb3JhcnlFdmFsdWF0aW9uQ29udGFpbmVyIiwiX2FzeW5jQ29udGludWVBY3RpdmUiLCJfc3RhdGVTbmFwc2hvdEF0TGFzdE5ld2xpbmUiLCJfc2F3TG9va2FoZWFkVW5zYWZlRnVuY3Rpb25BZnRlck5ld2xpbmUiLCJfcmVjdXJzaXZlQ29udGludWVDb3VudCIsIl9hc3luY1NhdmluZyIsIl9wcm9maWxlciIsIl9tYWluQ29udGVudENvbnRhaW5lciIsImpzb25TdHJpbmciLCJfZXh0ZXJuYWxzIiwicm9vdE9iamVjdCIsInZlcnNpb25PYmoiLCJmb3JtYXRGcm9tRmlsZSIsImxpc3REZWZzT2JqIiwicm9vdFRva2VuIiwiSlRva2VuVG9MaXN0RGVmaW5pdGlvbnMiLCJSZXNldFN0YXRlIiwic2hvdWxkUmV0dXJuIiwiVmFyaWFibGVTdGF0ZURpZENoYW5nZUV2ZW50IiwiYmluZCIsIlJlc2V0R2xvYmFscyIsIlJlc2V0Q2FsbHN0YWNrIiwib3JpZ2luYWxQb2ludGVyIiwiQ2hvb3NlUGF0aCIsIkNvbnRpbnVlSW50ZXJuYWwiLCJTd2l0Y2hGbG93IiwiUmVtb3ZlRmxvdyIsIlN3aXRjaFRvRGVmYXVsdEZsb3ciLCJDb250aW51ZSIsIkNvbnRpbnVlQXN5bmMiLCJhc3luY0NvbnRpbnVlQ29tcGxldGUiLCJtaWxsaXNlY3NMaW1pdEFzeW5jIiwiVmFsaWRhdGVFeHRlcm5hbEJpbmRpbmdzIiwiUHJlQ29udGludWUiLCJpc0FzeW5jVGltZUxpbWl0ZWQiLCJkdXJhdGlvblN0b3B3YXRjaCIsIkNvbnRpbnVlU2luZ2xlU3RlcCIsImNoYW5nZWRWYXJpYWJsZXNUb09ic2VydmUiLCJSZXN0b3JlU3RhdGVTbmFwc2hvdCIsIlBvc3RDb250aW51ZSIsImVyciIsIlByZVN0ZXAiLCJTdGVwIiwiUG9zdFN0ZXAiLCJUcnlGb2xsb3dEZWZhdWx0SW52aXNpYmxlQ2hvaWNlIiwiUHJlU25hcHNob3QiLCJjaGFuZ2UiLCJDYWxjdWxhdGVOZXdsaW5lT3V0cHV0U3RhdGVDaGFuZ2UiLCJPdXRwdXRTdGF0ZUNoYW5nZSIsIkV4dGVuZGVkQmV5b25kTmV3bGluZSIsIk5ld2xpbmVSZW1vdmVkIiwiRGlzY2FyZFNuYXBzaG90IiwiU3RhdGVTbmFwc2hvdCIsIlBvc3RTbmFwc2hvdCIsInByZXZUZXh0IiwiY3VyclRleHQiLCJwcmV2VGFnQ291bnQiLCJjdXJyVGFnQ291bnQiLCJuZXdsaW5lU3RpbGxFeGlzdHMiLCJOb0NoYW5nZSIsIkNvbnRpbnVlTWF4aW1hbGx5IiwiS25vdENvbnRhaW5lcldpdGhOYW1lIiwicGF0aExlbmd0aFRvVXNlIiwiQ29weVN0YXRlRm9yQmFja2dyb3VuZFRocmVhZFNhdmUiLCJzdGF0ZVRvU2F2ZSIsIkJhY2tncm91bmRTYXZlQ29tcGxldGUiLCJzaG91bGRBZGRUb1N0cmVhbSIsImNvbnRhaW5lclRvRW50ZXIiLCJWaXNpdENvbnRhaW5lciIsImN1cnJlbnRDb250ZW50T2JqIiwiaXNMb2dpY09yRmxvd0NvbnRyb2wiLCJQZXJmb3JtTG9naWNBbmRGbG93Q29udHJvbCIsIlByb2Nlc3NDaG9pY2UiLCJjb250ZXh0SWR4IiwiTmV4dENvbnRlbnQiLCJhdFN0YXJ0IiwiVmlzaXRDaGFuZ2VkQ29udGFpbmVyc0R1ZVRvRGl2ZXJ0IiwicHJldkFuY2VzdG9yIiwiY3VycmVudENoaWxkT2ZDb250YWluZXIiLCJjdXJyZW50Q29udGFpbmVyQW5jZXN0b3IiLCJhbGxDaGlsZHJlbkVudGVyZWRBdFN0YXJ0IiwiZW50ZXJpbmdBdFN0YXJ0IiwiUG9wQ2hvaWNlU3RyaW5nQW5kVGFncyIsImNob2ljZU9ubHlTdHJWYWwiLCJzaG93Q2hvaWNlIiwiY29uZGl0aW9uVmFsdWUiLCJJc1RydXRoeSIsInN0YXJ0VGV4dCIsImNob2ljZU9ubHlUZXh0IiwiZGl2VGFyZ2V0IiwiY3VycmVudERpdmVydCIsImludENvbnRlbnQiLCJlcnJvck1lc3NhZ2UiLCJDYWxsRXh0ZXJuYWxGdW5jdGlvbiIsImV2YWxDb21tYW5kIiwib3V0cHV0Iiwib3ZlcnJpZGVUdW5uZWxSZXR1cm5UYXJnZXQiLCJwb3BwZWQiLCJuYW1lcyIsImV4cGVjdGVkIiwiY29udGVudFN0YWNrRm9yVGFnIiwib3V0cHV0Q291bnRDb25zdW1lZCIsImNvbW1hbmQiLCJjaG9pY2VUYWciLCJjb250ZW50U3RhY2tGb3JTdHJpbmciLCJjb250ZW50VG9SZXRhaW4iLCJyZXNjdWVkVGFnIiwiY2hvaWNlQ291bnQiLCJleHRyYU5vdGUiLCJlaXRoZXJDb3VudCIsIm1heEludCIsIm1pbkludCIsInJhbmRvbVJhbmdlIiwicmVzdWx0U2VlZCIsIm5leHRSYW5kb20iLCJjaG9zZW5WYWx1ZSIsInNodWZmbGVJbmRleCIsIk5leHRTZXF1ZW5jZVNodWZmbGVJbmRleCIsImxpc3ROYW1lVmFsIiwiZ2VuZXJhdGVkTGlzdFZhbHVlIiwiZm91bmRJdGVtIiwidGFyZ2V0TGlzdCIsImxpc3RJdGVtSW5kZXgiLCJsaXN0RW51bWVyYXRvciIsInJhbmRvbUl0ZW0iLCJhc3NpZ25lZFZhbCIsImZvdW5kVmFsdWUiLCJmdW5jIiwiZnVuY1BhcmFtcyIsIkNob29zZVBhdGhTdHJpbmciLCJyZXNldENhbGxzdGFjayIsImZ1bmNEZXRhaWwiLCJhY3Rpdml0eVN0ciIsIkNob29zZUNob2ljZUluZGV4IiwiY2hvaWNlSWR4IiwiY2hvaWNlVG9DaG9vc2UiLCJIYXNGdW5jdGlvbiIsIkV2YWx1YXRlRnVuY3Rpb24iLCJyZXR1cm5UZXh0T3V0cHV0IiwidHJpbSIsIm91dHB1dFN0cmVhbUJlZm9yZSIsInN0cmluZ091dHB1dCIsInRleHRPdXRwdXQiLCJFdmFsdWF0ZUV4cHJlc3Npb24iLCJleHByQ29udGFpbmVyIiwic3RhcnRDYWxsU3RhY2tIZWlnaHQiLCJldmFsU3RhY2tIZWlnaHQiLCJmdW5jTmFtZSIsIm51bWJlck9mQXJndW1lbnRzIiwiZnVuY0RlZiIsImZhbGxiYWNrRnVuY3Rpb25Db250YWluZXIiLCJmb3VuZEV4dGVybmFsIiwibG9va0FoZWFkU2FmZSIsInZhbHVlT2JqIiwiZnVuY1Jlc3VsdCIsImZ1bmN0aW9uIiwicmV0dXJuT2JqIiwiQmluZEV4dGVybmFsRnVuY3Rpb25HZW5lcmFsIiwibG9va2FoZWFkU2FmZSIsIlRyeUNvZXJjZSIsIkJpbmRFeHRlcm5hbEZ1bmN0aW9uIiwiY29lcmNlZEFyZ3MiLCJhcHBseSIsIlVuYmluZEV4dGVybmFsRnVuY3Rpb24iLCJtaXNzaW5nRXh0ZXJuYWxzIiwiZnJvbSIsIk9ic2VydmVWYXJpYWJsZSIsIm9ic2VydmVyIiwiT2JzZXJ2ZVZhcmlhYmxlcyIsInZhcmlhYmxlTmFtZXMiLCJvYnNlcnZlcnMiLCJSZW1vdmVWYXJpYWJsZU9ic2VydmVyIiwic3BlY2lmaWNWYXJpYWJsZU5hbWUiLCJ2YXJpYWJsZU9ic2VydmVycyIsIm5ld1ZhbHVlT2JqIiwiZ2xvYmFsVGFncyIsIlRhZ3NBdFN0YXJ0T2ZGbG93Q29udGFpbmVyV2l0aFBhdGhTdHJpbmciLCJUYWdzRm9yQ29udGVudEF0UGF0aCIsImZsb3dDb250YWluZXIiLCJmaXJzdENvbnRlbnQiLCJCdWlsZFN0cmluZ09mQ29udGFpbmVyIiwiSW5jcmVtZW50Q29udGVudFBvaW50ZXIiLCJkaWRQb3AiLCJzdWNjZXNzZnVsSW5jcmVtZW50IiwibmV4dEFuY2VzdG9yIiwiaW5kZXhJbkFuY2VzdG9yIiwiaW52aXNpYmxlQ2hvaWNlcyIsIm51bUVsZW1lbnRzSW50VmFsIiwic2VxQ29udGFpbmVyIiwibnVtRWxlbWVudHMiLCJzZXFDb3VudCIsImxvb3BJbmRleCIsIml0ZXJhdGlvbkluZGV4Iiwic2VxUGF0aFN0ciIsInNlcXVlbmNlSGFzaCIsInJhbmRvbVNlZWQiLCJyYW5kb20iLCJ1bnBpY2tlZEluZGljZXMiLCJjaG9zZW4iLCJjaG9zZW5JbmRleCIsImN1cnJlbnREZWJ1Z01ldGFkYXRhIiwiZXJyb3JUeXBlU3RyIiwibGluZU51bSIsIl9oYWRFcnJvciIsImhhZFdhcm5pbmciLCJfaGFkV2FybmluZyIsInRvcGxldmVsT2JqZWN0cyIsIl9lcnJvckhhbmRsZXIiLCJfZG9udEZsYXR0ZW5Db250YWluZXJzIiwiX2xpc3REZWZzIiwiRXhwb3J0UnVudGltZSIsImNvbnN0RGVjbCIsImV4aXN0aW5nRGVmaW5pdGlvbiIsInZhcmlhYmxlSW5pdGlhbGlzYXRpb24iLCJydW50aW1lTGlzdHMiLCJydW50aW1lVmFyQXNzIiwicnVudGltZVN0b3J5IiwiUnVudGltZVN0b3J5IiwiRmxhdHRlbkNvbnRhaW5lcnNJbiIsIm9yaWdpbmFsRm91bmRMaXN0IiwiaXRlbUluVGhpc0xpc3QiLCJpbm5lckNvbnRhaW5lcnMiLCJpbm5lckNvbnRhaW5lciIsIm5hbWVkSW5uZXJDb250YWluZXIiLCJUcnlGbGF0dGVuQ29udGFpbmVyIiwicGFyZW50Q29udGFpbmVyIiwiQXV0aG9yIiwiUmVzZXRFcnJvciIsIm5hbWVkRnVuY1RhcmdldCIsImRlY2wiLCJOYW1lQ29uZmxpY3RFcnJvciIsInR5cGVOYW1lVG9QcmludCIsIklzUmVzZXJ2ZWRLZXl3b3JkIiwia25vdE9yRnVuY3Rpb24iLCJ0b3BMZXZlbENvbnRlbnQiLCJmbG93c0Zyb21PdGhlckZpbGVzIiwiZmlsZSIsInBvc09mT2JqIiwibm9uRmxvd0NvbnRlbnQiLCJzdWJTdG9yeSIsInN1YlN0b3J5T2JqIiwiU3RyaW5nRXhwcmVzc2lvbiIsImlzU2luZ2xlU3RyaW5nIiwib3RoZXJTdHIiLCJpc1N0YXJ0IiwiaW5DaG9pY2UiLCJEZWZhdWx0RmlsZUhhbmRsZXIiLCJyb290UGF0aCIsIlJlc29sdmVJbmtGaWxlbmFtZSIsIkxvYWRJbmtGaWxlQ29udGVudHMiLCJJbmtQYXJzZXIiLCJfZmlsZUhhbmRsZXIiLCJmaWxlbmFtZSIsImV4dGVybmFsRXJyb3JIYW5kbGVyIiwicm9vdFBhcnNlciIsIlBhcnNlU3RvcnkiLCJTdGF0ZW1lbnRzQXRMZXZlbCIsIlRvcCIsIl9yb290UGFyc2VyIiwiU2VwYXJhdGVkTGlzdCIsIm1haW5SdWxlIiwic2VwYXJhdG9yUnVsZSIsImZpcnN0RWxlbWVudCIsImFsbEVsZW1lbnRzIiwibmV4dEVsZW1lbnRSdWxlSWQiLCJuZXh0RWxlbWVudCIsIkNyZWF0ZURlYnVnTWV0YWRhdGEiLCJzdGF0ZUF0U3RhcnQiLCJzdGF0ZUF0RW5kIiwibWQiLCJfZmlsZW5hbWUiLCJwYXJzZWRPYmoiLCJwYXJzZWRMaXN0T2JqcyIsInBhcnNlZExpc3RPYmoiLCJPblN0cmluZ1BhcnNlckVycm9yIiwiZnVsbE1lc3NhZ2UiLCJfZXh0ZXJuYWxFcnJvckhhbmRsZXIiLCJXaGl0ZXNwYWNlIiwiSWRlbnRpZmllcldpdGhNZXRhZGF0YSIsIkV4dGVuZElkZW50aWZpZXJDaGFyYWN0ZXJSYW5nZXMiLCJpZGVudGlmaWVyQ2hhclNldCIsImNoYXJhY3RlclJhbmdlcyIsIkxpc3RBbGxDaGFyYWN0ZXJSYW5nZXMiLCJjaGFyUmFuZ2UiLCJfcGFyc2luZ0Nob2ljZSIsIm9uY2VPbmx5Q2hvaWNlIiwiYnVsbGV0cyIsIm9wdGlvbmFsTmFtZSIsIkJyYWNrZXRlZE5hbWUiLCJOZXdsaW5lIiwiQ2hvaWNlQ29uZGl0aW9uIiwic3RhcnRUZXh0QW5kTG9naWMiLCJNaXhlZFRleHRBbmRMb2dpYyIsIm9wdGlvbk9ubHlDb250ZW50IiwiRW5kVGFnSWZOZWNlc3NhcnkiLCJvcHRpb25Pbmx5VGV4dEFuZExvZ2ljIiwiaW5uZXJUZXh0QW5kTG9naWMiLCJkaXZlcnRzIiwiTXVsdGlEaXZlcnQiLCJlbXB0eUNvbnRlbnQiLCJkaXZPYmoiLCJkaXYiLCJjb25kaXRpb25zIiwiQ2hvaWNlU2luZ2xlQ29uZGl0aW9uIiwiQ2hvaWNlQ29uZGl0aW9uc1NwYWNlIiwiY29uZEV4cHIiLCJEaXNhbGxvd0luY3JlbWVudCIsImdhdGhlckRhc2hDb3VudE9iaiIsIkdhdGhlckRhc2hlcyIsImdhdGhlckRhc2hDb3VudCIsIlBhcnNlRGFzaE5vdEFycm93IiwiSW5uZXJDb25kaXRpb25hbENvbnRlbnQiLCJpbml0aWFsUXVlcnlFeHByZXNzaW9uIiwiQ29uZGl0aW9uRXhwcmVzc2lvbiIsImFsdGVybmF0aXZlcyIsImNhbkJlSW5saW5lIiwiSW5saW5lQ29uZGl0aW9uYWxCcmFuY2hlcyIsIk11bHRpbGluZUNvbmRpdGlvbmFsQnJhbmNoZXMiLCJzb2xlQ29udGVudCIsIklubmVyQmxvY2siLCJlbHNlQnJhbmNoIiwiU2luZ2xlTXVsdGlsaW5lQ29uZGl0aW9uIiwiZW1wdHlUcnVlQnJhbmNoIiwiZWFybGllckJyYW5jaGVzSGF2ZU93bkV4cHJlc3Npb24iLCJpc0xhc3QiLCJhbHQiLCJmaW5hbENsYXVzZSIsInRydWVCcmFuY2giLCJNdWx0aWxpbmVXaGl0ZXNwYWNlIiwibXVsdGlwbGVDb25kaXRpb25zIiwiZXhwciIsIkVsc2VFeHByZXNzaW9uIiwiX25vblRleHRQYXVzZUNoYXJhY3RlcnMiLCJfbm9uVGV4dEVuZENoYXJhY3RlcnMiLCJfbm90VGV4dEVuZENoYXJhY3RlcnNDaG9pY2UiLCJfbm90VGV4dEVuZENoYXJhY3RlcnNTdHJpbmciLCJUcmltRW5kV2hpdGVzcGFjZSIsIm1peGVkVGV4dEFuZExvZ2ljUmVzdWx0cyIsInRlcm1pbmF0ZVdpdGhTcGFjZSIsImxhc3RPYmpJZHgiLCJsYXN0T2JqIiwiTGluZU9mTWl4ZWRUZXh0QW5kTG9naWMiLCJmaXJzdFRleHQiLCJFbmRPZkxpbmUiLCJTa2lwVG9OZXh0TGluZSIsIlNwYWNlZCIsIkNvbnRlbnRUZXh0IiwiSW5saW5lTG9naWNPckdsdWVPclN0YXJ0VGFnIiwiQ29udGVudFRleHRBbGxvd2luZ0VzY2FwZUNoYXIiLCJDb250ZW50VGV4dE5vRXNjYXBlIiwiZ290RXNjYXBlQ2hhciIsImVuZENoYXJzIiwicGFyc2luZ1N0cmluZ0V4cHJlc3Npb24iLCJwdXJlVGV4dENvbnRlbnQiLCJub25UZXh0UnVsZSIsIlBhcnNlRGl2ZXJ0QXJyb3ciLCJQYXJzZVRocmVhZEFycm93IiwidGhyZWFkRGl2ZXJ0IiwiYXJyb3dzQW5kRGl2ZXJ0cyIsIlBhcnNlRGl2ZXJ0QXJyb3dPclR1bm5lbE9ud2FyZHMiLCJEaXZlcnRJZGVudGlmaWVyV2l0aEFyZ3VtZW50cyIsInR1bm5lbE9ud2FyZHMiLCJ0dW5uZWxPbndhcmREaXZlcnQiLCJnYXRoZXJEaXZlcnQiLCJ0YXJnZXRDb21wb25lbnRzIiwiRG90U2VwYXJhdGVkRGl2ZXJ0UGF0aENvbXBvbmVudHMiLCJvcHRpb25hbEFyZ3VtZW50cyIsIkV4cHJlc3Npb25GdW5jdGlvbkNhbGxBcmd1bWVudHMiLCJTaW5nbGVEaXZlcnQiLCJudW1BcnJvd3MiLCJfYmluYXJ5T3BlcmF0b3JzIiwiX21heEJpbmFyeU9wTGVuZ3RoIiwiVGVtcERlY2xhcmF0aW9uT3JBc3NpZ25tZW50IiwiUGFyc2VUZW1wS2V5d29yZCIsImlzSW5jcmVtZW50IiwiaXNEZWNyZW1lbnQiLCJSZXR1cm5TdGF0ZW1lbnQiLCJtaW5pbXVtUHJlY2VkZW5jZSIsIkV4cHJlc3Npb25VbmFyeSIsImluZml4T3AiLCJQYXJzZUluZml4T3BlcmF0b3IiLCJleHBlY3RhdGlvbk1lc3NhZ2UiLCJtdWx0aWFyeUV4cHIiLCJFeHByZXNzaW9uSW5maXhSaWdodCIsIkV4cHJlc3Npb25EaXZlcnRUYXJnZXQiLCJwcmVmaXhPcCIsIkV4cHJlc3Npb25Ob3QiLCJFeHByZXNzaW9uTGlzdCIsIkV4cHJlc3Npb25QYXJlbiIsIkV4cHJlc3Npb25GdW5jdGlvbkNhbGwiLCJFeHByZXNzaW9uVmFyaWFibGVOYW1lIiwiRXhwcmVzc2lvbkxpdGVyYWwiLCJwb3N0Zml4T3AiLCJFeHByZXNzaW9uRmxvYXQiLCJFeHByZXNzaW9uSW50IiwiRXhwcmVzc2lvbkJvb2wiLCJFeHByZXNzaW9uU3RyaW5nIiwiaW50T3JOdWxsIiwiZmxvYXRPck51bGwiLCJ0ZXh0QW5kTG9naWMiLCJpZGVuIiwiY29tbWFzIiwiaW5uZXJFeHByIiwibWVtYmVyTmFtZXMiLCJMaXN0TWVtYmVyIiwiaWRlbnRpZmllcjIiLCJSZWdpc3RlckV4cHJlc3Npb25PcGVyYXRvcnMiLCJSZWdpc3RlckJpbmFyeU9wZXJhdG9yIiwiaW5maXgiLCJfb3BlbkZpbGVuYW1lcyIsIkluY2x1ZGVTdGF0ZW1lbnQiLCJmdWxsRmlsZW5hbWUiLCJGaWxlbmFtZUlzQWxyZWFkeU9wZW4iLCJBZGRPcGVuRmlsZW5hbWUiLCJpbmNsdWRlZFN0cmluZyIsIlJlbW92ZU9wZW5GaWxlbmFtZSIsIktub3REZWZpbml0aW9uIiwia25vdERlY2wiLCJLbm90RGVjbGFyYXRpb24iLCJpbm5lcktub3RTdGF0ZW1lbnRzIiwiS25vdFN0aXRjaE5vQ29udGVudFJlY292ZXJ5UnVsZSIsIktub3RUaXRsZUVxdWFscyIsImtub3ROYW1lIiwiaXNGdW5jIiwicGFyYW1ldGVyTmFtZXMiLCJCcmFja2V0ZWRLbm90RGVjbEFyZ3VtZW50cyIsIm11bHRpRXF1YWxzIiwiU3RpdGNoRGVmaW5pdGlvbiIsIlN0aXRjaERlY2xhcmF0aW9uIiwiaW5uZXJTdGl0Y2hTdGF0ZW1lbnRzIiwiZmxvd0FyZ3MiLCJmbG93QXJndW1lbnRzIiwiRmxvd0RlY2xBcmd1bWVudCIsImZpcnN0SWRlbiIsImRpdmVydEFycm93Iiwic2Vjb25kSWRlbiIsImZ1bmNJZGVudGlmaWVyIiwiYXJnTmFtZXMiLCJfaWRlbnRpZmllckNoYXJTZXQiLCJMb2dpY0xpbmUiLCJhZnRlclRpbGRlIiwiZnVuQ2FsbCIsIlZhcmlhYmxlRGVjbGFyYXRpb24iLCJMaXN0RWxlbWVudERlZmluaXRpb25TZXBhcmF0b3IiLCJMaXN0RGVjbGFyYXRpb24iLCJBbnlXaGl0ZXNwYWNlIiwibmVlZHNUb0Nsb3NlUGFyZW4iLCJlbGVtZW50VmFsdWUiLCJlbGVtZW50VmFsdWVOdW0iLCJDb25zdERlY2xhcmF0aW9uIiwiSW5saW5lTG9naWMiLCJTdGFydFRhZyIsIlJ1bnRpbWVHbHVlIiwid2FzUGFyc2luZ1N0cmluZyIsIndhc1RhZ0FjdGl2ZSIsInRhZ0FjdGl2ZSIsImxvZ2ljIiwiSW5uZXJMb2dpYyIsImV4cGxpY2l0U2VxVHlwZSIsIlNlcXVlbmNlVHlwZUFubm90YXRpb24iLCJjb250ZW50TGlzdHMiLCJJbm5lclNlcXVlbmNlT2JqZWN0cyIsInJ1bGVzIiwiSW5uZXJTZXF1ZW5jZSIsIklubmVyRXhwcmVzc2lvbiIsImlzTnVtYmVyQ2hhcnNPbmx5IiwiX3NlcXVlbmNlVHlwZVN5bWJvbHMiLCJzZXFUeXBlIiwicGFyc2VkU2VxVHlwZSIsImFubm90YXRpb24iLCJTZXF1ZW5jZVR5cGVTeW1ib2xBbm5vdGF0aW9uIiwiU2VxdWVuY2VUeXBlV29yZEFubm90YXRpb24iLCJzZXF1ZW5jZUFubm90YXRpb25zIiwic3ltYm9sQ2hhciIsInNlcXVlbmNlVHlwZXMiLCJTZXF1ZW5jZVR5cGVTaW5nbGVXb3JkIiwiY29tYmluZWRTZXF1ZW5jZVR5cGUiLCJ3b3JkIiwiSW5uZXJNdWx0aWxpbmVTZXF1ZW5jZU9iamVjdHMiLCJJbm5lcklubGluZVNlcXVlbmNlT2JqZWN0cyIsImludGVybGVhdmVkQ29udGVudEFuZFBpcGVzIiwianVzdEhhZENvbnRlbnQiLCJjb250ZW50T3JQaXBlIiwiU2luZ2xlTXVsdGlsaW5lU2VxdWVuY2VFbGVtZW50IiwiX3N0YXRlbWVudFJ1bGVzQXRMZXZlbCIsIl9zdGF0ZW1lbnRCcmVha1J1bGVzQXRMZXZlbCIsIlN0YXRlbWVudEF0TGV2ZWwiLCJTdGF0ZW1lbnRzQnJlYWtGb3JMZXZlbCIsInJ1bGVzQXRMZXZlbCIsInN0YXRlbWVudCIsImJyZWFrUnVsZXMiLCJicmVha1J1bGVSZXN1bHQiLCJHZW5lcmF0ZVN0YXRlbWVudExldmVsUnVsZXMiLCJsZXZlbHMiLCJicmVha2luZ1J1bGVzIiwiTGluZSIsImlubGluZVJ1bGUiLCJfaW5saW5lV2hpdGVzcGFjZUNoYXJzIiwiRW5kT2ZGaWxlIiwibmV3bGluZXMiLCJhbnlXaGl0ZXNwYWNlIiwiTXVsdGlTcGFjZWQiLCJmdWxsUm9vdElua1BhdGgiLCJQYXJzaW5nU3RyaW5nIiwiVGFnQWN0aXZlIiwib3V0cHV0Q29udGVudExpc3QiLCJMYXRpbkJhc2ljIiwiTGF0aW5FeHRlbmRlZEEiLCJMYXRpbkV4dGVuZGVkQiIsIkdyZWVrIiwiQ3lyaWxsaWMiLCJBcm1lbmlhbiIsIkhlYnJldyIsIkFyYWJpYyIsIktvcmVhbiIsIkxhdGluMVN1cHBsZW1lbnQiLCJDaGluZXNlIiwiSnNvbkZpbGVIYW5kbGVyIiwiZmlsZUhpZXJhcmNoeSIsIkNvbXBpbGVyIiwiZXJyb3JzIiwiX2Vycm9ycyIsIndhcm5pbmdzIiwiX3dhcm5pbmdzIiwiYXV0aG9yTWVzc2FnZXMiLCJfYXV0aG9yTWVzc2FnZXMiLCJfaW5wdXRTdHJpbmciLCJvcHRpb25zIiwiX29wdGlvbnMiLCJwYXJzZWRTdG9yeSIsIl9wYXJzZWRTdG9yeSIsIl9ydW50aW1lU3RvcnkiLCJwYXJzZXIiLCJfcGFyc2VyIiwiZGVidWdTb3VyY2VSYW5nZXMiLCJfZGVidWdTb3VyY2VSYW5nZXMiLCJpbmtTb3VyY2UiLCJDb21waWxlIiwiT25FcnJvciIsIlJldHJpZXZlRGVidWdTb3VyY2VGb3JMYXRlc3RDb250ZW50IiwicmFuZ2UiLCJHZW5lcmF0ZVN0YXRzIiwiYWxsVGV4dCIsIndvcmRzIiwid29yZHNJblRoaXNTdHIiLCJ3YXNXaGl0ZVNwYWNlIiwia25vdHMiLCJzdGl0Y2hlcyIsImdhdGhlcnMiLCJnIiwiZnVuY3Rpb25zIiwiR2VuZXJhdGVTdG9yeVN0YXRzIiwiRGVidWdNZXRhZGF0YUZvckNvbnRlbnRBdE9mZnNldCIsIm9mZnNldCIsImN1cnJPZmZzZXQiLCJsYXN0VmFsaWRNZXRhZGF0YSJdLCJtYXBwaW5ncyI6Ik1BR2FBLEVBQ1hDLGNBS3lELElBSnZDQyxFQUFnQ0MsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBQSxLQUNoQ0csRUFBQUgsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBd0IsR0FDeEJJLEVBQTBCSixVQUFBQyxPQUFBLFFBQUFDLElBQUFGLFVBQUEsSUFBQUEsVUFBQSxHQUMxQkssRUFBQUwsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBb0MsS0FDcENNLHlEQUFtQyxLQUpuQ0MsS0FBY1IsZUFBZEEsRUFDQVEsS0FBV0osWUFBWEEsRUFDQUksS0FBY0gsZUFBZEEsRUFDQUcsS0FBWUYsYUFBWkEsRUFDQUUsS0FBV0QsWUFBWEEsQ0FDZixRQ1JRRSxFQUNYVixZQUNrQkcsRUFDQVEsRUFDVEMsR0FGU0gsS0FBTU4sT0FBTkEsRUFDQU0sS0FBYUUsY0FBYkEsRUFDVEYsS0FBSUcsS0FBSkEsQ0FDTixFQ0xMLElBQVlDLEdBQVosU0FBWUEsR0FDVkEsRUFBQUEsRUFBQSxPQUFBLEdBQUEsU0FDQUEsRUFBQUEsRUFBQSxRQUFBLEdBQUEsVUFDQUEsRUFBQUEsRUFBQSxNQUFBLEdBQUEsT0FDRCxDQUpELENBQVlBLElBQUFBLEVBSVgsQ0FBQSxVQ0pZQyxF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
